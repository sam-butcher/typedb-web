<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="An example to illustrate migration of CSV to Grakn">
<meta name="keywords" content="migrationexamples,  migration, GRAKN.AI, Grakn Labs, grakn, graql, grakn.ai, Mindmaps Research, Mindmaps Research Ltd, MindmapsDB, mindmaps, mindmaps graph, mindmaps.io, knowledge graph, distributed knowledge graph, development platform, developer tool, data platform, programming langauge, query langauge, database, semantic database, distributed semantic database, distributed database, graph database, semantic search, data exploration, recommendation system, knowledge management, knowledge engineering, real-time analytics, advanced analytics, reasoning engine, inference engine, expert systems, semantic applications, research engines, data management, business intelligence, big data, semantic web, semantic data, knowledge representation, automated reasoning, semantic network, knowledge ontology, semantic graph, ontology engineering, graph based knowledge representation, artificial intelligence,">
<title>GRAKN.AI | An Example of Migrating CSV to Grakn</title>
<link rel="stylesheet" href="/pages/css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/pages/css/modern-business.css">
<link rel="stylesheet" href="/pages/css/lavish-bootstrap.css">
<link rel="stylesheet" href="/pages/css/customstyles.css">
<link rel="stylesheet" href="/pages/css/theme-white.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/pages/js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="/pages/js/toc.js"></script>
<script src="/pages/js/customscripts.js"></script>

<link rel="shortcut icon" href="/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://grakn.ai/pages/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" style="display: none;">
    <symbol id="logo" viewBox="0 0 40 40" aria-labelledby="GRAKN.AI">
       <value>GRAKN.AI</value>
       <desc>A Distributed Knowledge Graph</desc>
       <polygon vector-effect="non-scaling-stroke" fill="transparent" stroke-linejoin="round" points="20,2 38,20 20,38 2,20"/>
       <polyline vector-effect="non-scaling-stroke" fill="transparent" stroke-linejoin="round" points="7.27,32.73 7.27,7.27 20,20 32.73,7.27 32.73,32.73"/>
    </symbol>
    <symbol id="github" viewBox="0 0 16 16" aria-labelledby="GitHub">
        <value>GitHub</value>
        <desc>GitHub</desc>
        <path vector-effect="non-scaling-stroke" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
    </symbol>
    <symbol id="gitter" viewBox="0 0 28 40" aria-labelledby="Gitter">
        <value>Gitter</value>
        <desc>Gitter</desc>
        <rect vector-effect="non-scaling-stroke" x="15.6" y="6.4" width="3.2" height="33.6"/>
        <rect vector-effect="non-scaling-stroke" x="22" y="6.4" width="3.2" height="17.6"/>
        <rect vector-effect="non-scaling-stroke" x="9.2" y="6.4" width="3.2" height="33.6"/>
        <rect vector-effect="non-scaling-stroke" x="2.8" width="3.2" height="24"/>
    </symbol>
    <symbol id="slack" viewBox="0 0 256 256" aria-labelledby="Slack">
        <path d="M165.963541,15.8384262 C162.07318,3.86308197 149.212328,-2.69009836 137.239082,1.20236066 C125.263738,5.09272131 118.710557,17.9535738 122.603016,29.9268197 L181.550164,211.292328 C185.597902,222.478689 197.682361,228.765377 209.282098,225.426885 C221.381246,221.943607 228.756984,209.093246 224.896,197.21023 C224.749115,196.756984 165.963541,15.8384262 165.963541,15.8384262"></path>
        <path d="M74.6260984,45.515541 C70.7336393,33.5422951 57.8727869,26.9891148 45.899541,30.8794754 C33.9241967,34.7698361 27.3710164,47.6306885 31.2634754,59.6060328 L90.210623,240.971541 C94.2583607,252.157902 106.34282,258.44459 117.942557,255.104 C130.041705,251.62282 137.417443,238.772459 133.556459,226.887344 C133.409574,226.436197 74.6260984,45.515541 74.6260984,45.515541"></path>
        <path d="M240.161574,166.045377 C252.136918,162.155016 258.688,149.294164 254.797639,137.31882 C250.907279,125.345574 238.046426,118.792393 226.07318,122.682754 L44.7076721,181.632 C33.5213115,185.677639 27.234623,197.762098 30.5731148,209.361836 C34.0563934,221.460984 46.9067541,228.836721 58.7897705,224.975738 C59.2430164,224.828852 240.161574,166.045377 240.161574,166.045377"></path>
        <path d="M82.507541,217.270557 C94.312918,213.434754 109.528131,208.491016 125.855475,203.186361 C122.019672,191.380984 117.075934,176.163672 111.76918,159.83423 L68.4191475,173.924721 L82.507541,217.270557"></path>
        <path d="M173.847082,187.591344 C190.235279,182.267803 205.467279,177.31777 217.195016,173.507148 C213.359213,161.70177 208.413377,146.480262 203.106623,130.146623 L159.75659,144.237115 L173.847082,187.591344"></path>
        <path d="M210.484459,74.7058361 C222.457705,70.8154754 229.010885,57.954623 225.120525,45.9792787 C221.230164,34.0060328 208.369311,27.4528525 196.393967,31.3432131 L15.028459,90.292459 C3.84209836,94.3380984 -2.44459016,106.422557 0.896,118.022295 C4.37718033,130.121443 17.227541,137.49718 29.1126557,133.636197 C29.5638033,133.489311 210.484459,74.7058361 210.484459,74.7058361"></path>
        <path d="M52.8220328,125.933115 C64.6274098,122.097311 79.8468197,117.151475 96.1762623,111.84682 C90.8527213,95.4565246 85.9026885,80.2245246 82.0920656,68.4946885 L38.731541,82.5872787 L52.8220328,125.933115"></path>
        <path d="M144.159475,96.256 C160.551869,90.9303607 175.785967,85.9803279 187.515803,82.1676066 C182.190164,65.7752131 177.240131,50.5390164 173.42741,38.807082 L130.068984,52.8996721 L144.159475,96.256"></path>
    </symbol>
</svg>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                <svg><use xlink:href="#logo" /></svg>
                <span class="projectTitle">GRAKN.AI</span>
            </a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!-- <li class="dropdown">
                    <a>Documentation</a>
                    <ul>
                        <li><a href="#">Overview</a></li>
                        <li><a href="#">Core API</a></li>
                        <li><a href="#">Graql API</a></li>
                        <li><a href="#">Rest API</a></li>
                        <li><a href="#">Javadoc</a></li>
                    </ul>
                </li> -->
                <li><a href="/pages/platform/index.html">Platform</a></li>
                <li><a href="/pages/index.html">Documentation</a></li>
                <li><a rel="me" href="//grakn.ai/community.html">Community</a></li>
                <li><a rel="me" href="//discuss.grakn.ai/">Discussion</a></li>
                <li><a rel="me" href="//blog.grakn.ai/" target="_blank">Blog</a></li>
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="Search">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/pages/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                        SimpleJekyllSearch.init({
                            searchInput: document.getElementById('search-input'),
                            resultsContainer: document.getElementById('results-container'),
                            
                            dataSource: '/pages/search.json',
                            
                            searchResultTemplate: '<li><a href="{url}" title="An Example of Migrating CSV to Grakn">{title}</a></li>',
                            noResultsText: '<li><a class="empty">No results found</a></li>',
                            limit: 10,
                            fuzzy: true
                        });
                    </script>
                    <!--end search-->
                </li>
                <!--comment out this block if you want to hide github link-->
                <li>
                    <a rel="me" href="//github.com/graknlabs/grakn" target="_blank" class="github">
                        <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use></svg>
                    </a>
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">
          





<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Grakn 0.10.0</li>
    
    
    
    <li>
        <a href="#">Get Started</a>
        <ul>
            
            
            
            <li><a href="/pages/index.html">Home</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/get-started/setup-guide.html">Setup Guide</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">The Basics</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/the-basics/grakn-basics.html">Grakn Basics</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/the-basics/grakn-knowledge-model.html">Grakn Knowledge Model</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/the-basics/quickstart-tutorial.html">Quickstart Tutorial</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/the-basics/visualiser.html">Visualising a Graph</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Building an Ontology</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/basic-ontology.html">Defining a Basic Ontology</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/hierarchical-ontology.html">Defining a Hierarchical Ontology</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/rule-driven-ontology.html">Defining a Rule-Driven Ontology</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/overview.html">Overview (deprecated)</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/simple-schema-definition.html">Simple Schema (deprecated)</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/advanced-schema-definition.html">Advanced Schema (deprecated)</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Querying with Graql</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/graql/overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/graql-shell.html">Graql Shell</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/match-queries.html">Match Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/ask-queries.html">Ask Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/delete-queries.html">Delete Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/insert-queries.html">Insert Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/graql-rules.html">Graql Rules</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/aggregate-queries.html">Aggregate Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/compute-queries.html">Compute Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/graql-templating.html">Graql Templating</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/graql-cheatsheet.html">Graql Cheatsheet</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Graql Analytics</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-overview.html">Graql Analytics Overview</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-statistics.html">Analytics Statistics</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-shortest-path.html">Analytics Shortest Path</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-degrees.html">Analytics Degrees</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-persist.html">Analytics Persist</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-connected-components.html">Connected Components</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Migrating to Grakn</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/migration/migration.html">Migrating to Grakn</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/migration/CSV-migration.html">CSV Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/migration/JSON-migration.html">JSON Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/migration/SQL-migration.html">SQL Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/migration/OWL-migration.html">OWL Migration</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Developing with Java</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/developing-with-java/java-setup.html">Java Development Setup</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/developing-with-java/graph-api.html">Graph API</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/developing-with-java/java-graql.html">Java Graql</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Advanced Grakn</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/advanced-grakn/post-processing.html">Post Processing</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/advanced-grakn/validation.html">Validation</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">API Reference</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/api-reference/api-reference.html">API Reference</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Resources</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/resources/resources.html">Resources</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/resources/grakn-deployment-guide.html">Grakn Deployment Guide</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/resources/faq.html">Grakn FAQ</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/resources/downloads.html">Downloads</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Examples</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/examples/examples.html">Examples</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/modern.html">Modern example</a></li>
            
            
            
            
            
            
            <li class="active"><a href="/pages/documentation/examples/CSV-migration.html">CSV Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/SQL-migration.html">SQL Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/OWL-migration.html">OWL Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/inference.html">Graql Rules</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/projects.html">Example Projects</a></li>
            
            
            
            
        </ul>
        
        

        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

        </div>
        <!-- Content Column -->
        <div class="col-md-9">
            <div class="post-header">
   <h1 class="post-title-main">An Example of Migrating CSV to Grakn</h1>
</div>



<div class="post-content">

   
    <div class="summary">An example to illustrate migration of CSV to Grakn</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

    

    

    <a target="_blank" href="https://github.com/graknlabs/docs/blob/master/pages/documentation/10-examples/CSV-migration.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

    

  <h2 id="introduction">Introduction</h2>

<p>This example looks at the migration of genealogy data in CSV format to build a graph in GRAKN.AI. The data is used as the basis of a <a href="https://blog.grakn.ai/family-matters-1bb639396a24#.2e6h72y0m">blog post</a> that illustrates the fundamentals of the Grakn visualiser, reasoner and analytics components.</p>

<p>As the blog post explains, the original data was a <a href="http://www.lenzenresearch.com/titusnarrlineage.pdf">document</a> from <a href="http://www.lenzenresearch.com/">Lenzen Research</a> that described the family history of Catherine Niesz Titus for three generations of her maternal lineage.</p>

<p>In this example, we will walk through how to migrate the CSV data into Grakn, and confirm that we have succeeded using the Grakn visualiser.</p>

<h2 id="genealogy-data">Genealogy Data</h2>

<p>The data for this example can be found as a set of CSV files in Grakn’s <a href="https://github.com/graknlabs/sample-datasets">sample-datasets</a> repository on Github. The data was put together by our team from narrative information gleaned from the original Lenzen Research <a href="http://www.lenzenresearch.com/titusnarrlineage.pdf">document</a>, with some minor additions to generate some interesting queries for Grakn’s reasoner.</p>

<p>Let’s take a look at the <em>raw-data</em> directory in the <a href="https://github.com/graknlabs/sample-datasets/tree/master/genealogy-graph">genealogy-graph repo</a>, which contains five CSV files. These files were put together by hand by our team, mostly by <a href="https://blog.grakn.ai/@doctormiko">Michelangelo</a>.</p>

<table>
  <tbody>
    <tr>
      <td>filename</td>
      <td>description</td>
    </tr>
    <tr>
      <td><a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/people.csv"><em>people.csv</em></a></td>
      <td>This comprehensive CSV contains information about all the individuals discussed in the Lenzen document. For each row, it lists the available information about individuals’ names, gender, birth and death dates and age at death. It also assigns each person a person ID (“pid”), which is a string containing the full name of each individual, and is used for identification of individuals in the other CSV files.</td>
    </tr>
    <tr>
      <td><a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/births.csv"><em>births.csv</em></a></td>
      <td>This CSV lists the person IDs of a child and each of its parents</td>
    </tr>
    <tr>
      <td><a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/weddings.csv"><em>weddings.csv</em></a></td>
      <td>This CSV comprises a row for each marriage, identifying each by a wedding ID (wid). The rows contain the person IDs of each spouse and the date of their wedding, where it is known.</td>
    </tr>
    <tr>
      <td><a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/documents.csv"><em>documents.csv</em></a></td>
      <td>This CSV contains rows for each piece of documentary evidence used, and identifies them using a document ID. For each is recorded the type of document, its URL and description in the form of notes</td>
    </tr>
    <tr>
      <td><a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/evidences.csv"><em>evidences.csv</em></a></td>
      <td>This CSV lists notable events that can be gleaned from the documentary evidence, and records each as a separate row. For each is noted the associated document ID, function (i.e. what happened), and the protagonists’ person ID(s).</td>
    </tr>
  </tbody>
</table>

<h2 id="example-ontology">Example Ontology</h2>

<p>On GRAKN.AI, the first step when working with a new dataset is to define its ontology in Graql. The ontology is a way to describe the entities and their relationships, so the underlying graph can store them as nodes and edges. You can find out more in our guide to the Grakn Knowledge Model. The ontology allows Grakn to perform:</p>

<ul>
  <li>logical reasoning over the represented knowledge, such as the extraction of implicit information from explicit data (inference)</li>
  <li>discovery of inconsistencies in the data (validation).</li>
</ul>

<p>The complete ontology for the genealogy-graph demo is in our sample-datasets repository, named <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/ontology.gql">ontology.gql</a>. However, it is a bit more complex that we need for this example, because it contains definitions for what may be inferred from the CSV data, using some inference rules, by the Grakn reasoner.</p>

<p>So, for this migration example, we will instead use <em>basic-ontology.gql</em>, which is also on the sample-datasets repository. It is a simplified ontology which represents the data imported from the CSV files described above.</p>

<h3 id="entities-and-resources">Entities and Resources</h3>

<p>The ontology contains the following entities:</p>

<ul>
  <li><code class="highlighter-rouge">person</code>
    <ul>
      <li>Has a resource <code class="highlighter-rouge">identifier</code>, which is a string representing the pid described above for the <em>people.csv</em> file, and is the full name of the person.</li>
    </ul>
  </li>
  <li>
    <p><code class="highlighter-rouge">birth</code>, which is a subclass of an <code class="highlighter-rouge">event</code> entity and adds the following string resources: 
 		- <code class="highlighter-rouge">firstname</code>
      - <code class="highlighter-rouge">middlename</code> (if available)
      - <code class="highlighter-rouge">surname</code> (if available)
      - <code class="highlighter-rouge">gender</code>
   	- <code class="highlighter-rouge">birth-date</code> (if available)</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">death</code>, which is a subclass of an <code class="highlighter-rouge">event</code> entity, and adds the following resources:
 		- <code class="highlighter-rouge">death-date</code> (if available)
 		- <code class="highlighter-rouge">age</code> at death (if available), of datatype long</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">wedding</code>, which is a subclass of an <code class="highlighter-rouge">event</code> entity</p>
  </li>
  <li><code class="highlighter-rouge">document</code>, which has the following string resources:
 		- <code class="highlighter-rouge">identifier</code>
 		- <code class="highlighter-rouge">document-location</code> a URL 
 		- <code class="highlighter-rouge">document-type</code> 
 		- <code class="highlighter-rouge">notes</code></li>
</ul>

<h3 id="relations-and-roles">Relations and Roles</h3>

<p>The ontology also describes the relations between entities, namely:</p>

<ul>
  <li>
    <p>the <code class="highlighter-rouge">event-protagonist</code> relation, which links events to people 
      - The role of the person in the event is described by a resource named <code class="highlighter-rouge">function</code> (which is of datatype string and indicate newborn, spouse, parent or deceased).
      - Has two associated roles: <code class="highlighter-rouge">happening</code> (played by an <code class="highlighter-rouge">event</code> entity such as a <code class="highlighter-rouge">birth</code> or <code class="highlighter-rouge">wedding</code>) and <code class="highlighter-rouge">protagonist</code> (played by a <code class="highlighter-rouge">person</code> entity)</p>
  </li>
  <li>
    <p>the <code class="highlighter-rouge">conclusion-evidence</code> relation, which links documentary evidence to an event
      - Has two associated roles <code class="highlighter-rouge">evidence</code> (played by a <code class="highlighter-rouge">document</code>) and <code class="highlighter-rouge">conclusion</code> (played by an event such as a <code class="highlighter-rouge">wedding</code>).</p>
  </li>
</ul>

<p>Note that in this example, no relations between <code class="highlighter-rouge">person</code> entities are described. The inference of such family relationships is discussed fully in a separate example that covers <a href="./inference.html">inference using the Grakn reasoner</a>.</p>

<p>To load <em>basic-ontology.gql</em> into Grakn, make sure the engine is running and choose a clean keyspace in which to work (in the example below we use the default keyspace, so we are cleaning it before we get started). Pull down the <a href="https://github.com/graknlabs/sample-datasets">sample-datasets repo</a>, and call the following from the terminal, from within the <em>genealogy-graph</em> directory:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;relative-path-to-Grakn&gt;/bin/grakn.sh clean
&lt;relative-path-to-Grakn&gt;/bin/grakn.sh start
&lt;relative-path-to-Grakn&gt;/bin/graql.sh -f ./basic-ontology.gql
</code></pre>
</div>

<h2 id="migration-templates">Migration Templates</h2>

<p>Having loaded the ontology, the next steps are to populate the graph by migrating data into Grakn from the CSV files we discussed earlier. For a detailed overview of CSV migration, we recommend that you take a look at the Grakn documentation on <a href="https://grakn.ai/pages/documentation/migration/CSV-migration.html">CSV Migration</a> and <a href="https://grakn.ai/pages/documentation/graql/graql-templating.html">Graql templating</a>.</p>

<p>In essence, we need to write a set of template Graql statements that instruct the Grakn migrator on how the CSV data can be mapped to the ontology. The Grakn migrator applies the template to each row of data in a CSV file, replacing the indicated sections in the template with the value from a specific cell, identified by the column header (the key). This sounds complicated, but isn’t really, as we will show.</p>

<p>Let’s take a look at <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/migrators/people-migrator.gql"><em>people-migrator.gql</em></a>, which is inside the <em>/raw-data/migrators/</em> directory of the genealogy-graph project. The template inserts person entities, birth entities, death entities and the corresponding event-protagonist relationships with function newborn and deceased. The code is applied row-by-row to the <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/people.csv"><em>people.csv</em></a> file. The first section is as follows:</p>

<pre><code class="language-graql-template">insert
	$p isa person has identifier &lt;pid&gt;;
</code></pre>

<p>For each row in the CSV file, the code above inserts a <code class="highlighter-rouge">person</code> entity with an <code class="highlighter-rouge">identifier</code> resource that takes the value of the cell in that row within the column with header <code class="highlighter-rouge">pid</code>.  The resultant Graql insert statement may look something like this:</p>

<pre><code class="language-graql">insert $p0 isa person has identifier "Elizabeth Niesz";
</code></pre>

<p>The following code is slightly more complex. It inserts a <code class="highlighter-rouge">birth</code> event entity, and from the row in the CSV file, takes values from:</p>

<ul>
  <li>the <code class="highlighter-rouge">name1</code> column for the <code class="highlighter-rouge">firstname</code> resource</li>
  <li>the <code class="highlighter-rouge">gender</code> column for the <code class="highlighter-rouge">gender</code> resource</li>
  <li>the <code class="highlighter-rouge">surname</code> column for the <code class="highlighter-rouge">surname</code> resource, if a value exists</li>
  <li>the <code class="highlighter-rouge">name2</code> column for the <code class="highlighter-rouge">middlename</code> resource, if a value exists</li>
  <li>the <code class="highlighter-rouge">born</code> column for the <code class="highlighter-rouge">birth-date</code> resource, if a value exists</li>
</ul>

<p>The code also creates an <code class="highlighter-rouge">event-protagonist</code> relationship between the <code class="highlighter-rouge">person</code> and the <code class="highlighter-rouge">birth</code> event, giving the relationship a <code class="highlighter-rouge">function</code> resource string <code class="highlighter-rouge">newborn</code>.</p>

<pre><code class="language-graql-template">	$x isa birth has firstname &lt;name1&gt;,
		has gender &lt;gender&gt;,
		has confidence "high";
	(happening: $x, protagonist: $p) isa event-protagonist,
		has function "newborn";
	if (&lt;surname&gt; != "") do 
		{
		$x has surname &lt;surname&gt;;
		}
	if (&lt;name2&gt; != "") do 
		{
		$x has middlename &lt;name2&gt;;
		}
	if (&lt;born&gt; != "") do 
		{
		$x has birth-date &lt;born&gt;;
		}
</code></pre>

<p>The resultant Graql insertion looks as follows, for a single row of the CSV file:</p>

<pre><code class="language-graql">$x0 has confidence "high" isa birth has gender "female" has firstname "Elizabeth";
(happening: $x0, protagonist: $p0) has function "newborn" isa event-protagonist;
$x0 has surname "Niesz";
$x0 has birth-date "1820-08-27";

</code></pre>

<p>The code continues to similarly create a <code class="highlighter-rouge">death</code> event entity, and from the row in the CSV file, takes values from:</p>

<ul>
  <li>the <code class="highlighter-rouge">dead</code> column for the <code class="highlighter-rouge">death-date</code> resource, if a value exists</li>
  <li>the <code class="highlighter-rouge">age</code> column for the <code class="highlighter-rouge">age</code> resource, if a value exists</li>
</ul>

<p>The code also creates an <code class="highlighter-rouge">event-protagonist</code> relationship between the <code class="highlighter-rouge">person</code> and the <code class="highlighter-rouge">death</code> event, giving the relationship a <code class="highlighter-rouge">function</code> resource string <code class="highlighter-rouge">deceased</code>.</p>

<pre><code class="language-graql-template">	$y isa death has confidence "high";
	(happening: $y, protagonist: $p) isa event-protagonist,
			has function "deceased";
	if (&lt;dead&gt; != "") do 
		{
		$y 	has death-date &lt;dead&gt;;
		}

	if (&lt;age&gt; != "") do 
		{
		$y 	has age @long(&lt;age&gt;);
		}
		
</code></pre>

<p>The resulting Graql insertion code looks something like the following for a row from the CSV file:</p>

<pre><code class="language-graql">$y0 has confidence "high" isa death;
isa event-protagonist has function "deceased" (happening: $y0, protagonist: $p0);
$y0 has death-date "1891-12-08";
$y0 has age 71;
</code></pre>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> <strong>A note on the <code class="highlighter-rouge">confidence</code> resource</strong>   <br />
The <code class="highlighter-rouge">confidence</code> resource associated with the <code class="highlighter-rouge">event</code> entity can be set to ‘high’, ‘medium’ or ‘low’. It is not used in this example, but is used by GRAKN.AI when the reasoner makes inference about the data, and will be explained further in an upcoming example. The <code class="highlighter-rouge">confidence</code> is set to ‘high’ in this example because all additions to the graph come from CSV data migration rather than through inference, so we can be confident that they are correct.</div>

<p>Moving on to look at <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/migrators/births-migrator.gql"><em>births-migrator.gql</em></a>, which is applied row-by-row to the <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/births.csv"><em>births.csv</em></a> file.</p>

<pre><code class="language-graql-template">match
	$c has identifier &lt;child&gt;;
	$p1 has identifier &lt;parent1&gt;;
	$p2 has identifier &lt;parent2&gt;;
	$b isa birth;
	$r (happening: $b, protagonist: $c) isa event-protagonist;
	$r has function "newborn";
insert
	$r1 (happening: $b, protagonist: $p1) isa event-protagonist
		has function "parent";
	$r2 (happening: $b, protagonist: $p2) isa event-protagonist,
		has function "parent";
</code></pre>

<p>For each row, the code matches the <code class="highlighter-rouge">person</code> entities identified by their names in the child, parent1 and parent2 columns of the CSV data. It then finds the <code class="highlighter-rouge">event-protagonist</code> relationship with the <code class="highlighter-rouge">function</code> resource set to be <code class="highlighter-rouge">newborn</code> that corresponds to the named child, which was added to Grakn by the people migrator. For the <code class="highlighter-rouge">birth</code> event associated with that relationship, it then inserts two new <code class="highlighter-rouge">event-protagonist</code> relationships between the <code class="highlighter-rouge">birth</code> and each of the <code class="highlighter-rouge">person</code> entities who are parents. Each of these new relationships have their <code class="highlighter-rouge">function</code> resource set to be <code class="highlighter-rouge">parent</code>.</p>

<p>From a single row of the CSV data, an example Graql insertion looks as follows:</p>

<pre><code class="language-graql">match $p10 has identifier "Elizabeth Niesz"; $r0 has function "newborn"; $b0 isa birth; $r0 (happening: $b0, protagonist: $c0) isa event-protagonist; $c0 has identifier "Mary Melissa Titus"; $p20 has identifier "William Sanford Titus";
insert $r10 has function "parent" isa event-protagonist (happening: $b0, protagonist: $p10);
$r20 has function "parent" isa event-protagonist (happening: $b0, protagonist: $p20);
</code></pre>

<p>Moving on to look at the <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/migrators/weddings-migrator.gql"><em>weddings-migrator.gql</em></a>, which is applied row-by-row to the <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/weddings.csv"><em>weddings.csv</em></a>.</p>

<pre><code class="language-graql-template">match
	$x has identifier &lt;spouse1&gt;;
	$y has identifier &lt;spouse2&gt;;
insert
	$m isa wedding,
	has identifier &lt;wid&gt;,
	has confidence "high";
	if (&lt;date&gt; != null) do 
		{
		$m has date &lt;date&gt;;
		}
	(happening: $m, protagonist: $x) isa event-protagonist,
		has function "spouse";
	(happening: $m, protagonist: $y) isa event-protagonist,
		has function "spouse";
</code></pre>

<p>The code matches the <code class="highlighter-rouge">person</code> entities identified by their names in the spouse1 and spouse2 columns of the CSV data. For each row, it insert a <code class="highlighter-rouge">wedding</code> entity and an <code class="highlighter-rouge">event-protagonist</code> relationship for each spouse. An example of a Graql insertion for a single line of CSV data is as follows:</p>

<pre><code class="language-graql">match $y0 has identifier "William Sanford Titus"; $x0 has identifier "Elizabeth Niesz";
insert $m0 isa wedding has confidence "high" has identifier "w01";
$m0 has date "1845-10-21";
(happening: $m0, protagonist: $x0) has function "spouse" isa event-protagonist;
has function "spouse" isa event-protagonist (happening: $m0, protagonist: $y0);
</code></pre>

<p>The <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/migrators/documents-migrator.gql"><em>documents-migrator.gql</em></a> is applied to each row of the <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/documents.csv"><em>documents.csv</em></a> file. It is a very simple template that inserts a <code class="highlighter-rouge">document</code> entity for each row of data.</p>

<pre><code class="language-graql-template">insert
	$d isa document,
		has document-type &lt;document-type&gt;,
		has document-location &lt;url&gt;,
		has identifier &lt;did&gt;,
		has notes &lt;notes&gt;;
</code></pre>

<p>The generated Graql statements for document migration are as follows for the a single row of CSV data:</p>

<pre><code class="language-graql">insert $d0 has document-type "picture" has identifier "d01" has document-location "http:\/\/www.christliebfamilyassociation.com\/images\/CatherineNieszChristlieb.jpg" has notes "Dated Picture of Catherine Niesz" isa document;
</code></pre>

<p>Finally, <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/migrators/evidences-migrator.gql"><em>evidences-migrator.gql</em></a> is applied row-by-row to <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/raw-data/evidences.csv"><em>evidences.csv</em></a>.</p>

<pre><code class="language-graql-template">match 
	$d isa document has identifier &lt;document&gt;;
	$p1 isa person has identifier &lt;protagonist1&gt;;
	$r1 (happening: $e, protagonist: $p1); 
		$r1 has function &lt;function&gt;;
	if (&lt;protagonist2&gt; != "") do {
	$p2 isa person has identifier &lt;protagonist2&gt;;
	$r2 (happening: $e, protagonist: $p2);
		$r2 has function &lt;function&gt;;
	}
insert
	(evidence: $d, conclusion: $e) isa conclusion-evidence;
</code></pre>

<p>For each row, the template matches a <code class="highlighter-rouge">document</code> by the identifier in the document column, and likewise matches a <code class="highlighter-rouge">person</code> by the identifier in the protagonist1 column. It then matches an <code class="highlighter-rouge">event-protagonist</code> relationship according to the <code class="highlighter-rouge">person</code> and the <code class="highlighter-rouge">function</code> specified in the function column. If there is a value specified in the protagonist2 column, a second <code class="highlighter-rouge">person</code> and <code class="highlighter-rouge">event-protagonist</code> relationship are also matched). The template then inserts a <code class="highlighter-rouge">conclusion-evidence</code> relationship, using the <code class="highlighter-rouge">event</code> matched with the <code class="highlighter-rouge">event-protagonist</code> relationship(s) to be the conclusion and the matched <code class="highlighter-rouge">document</code> as the evidence.</p>

<p>The Graql generated by Grakn’s <code class="highlighter-rouge">migration.sh</code> looks as follows, for a single row of CSV data:</p>

<pre><code class="language-graql">match $p10 isa person has identifier "Catherine Niesz"; $d0 has identifier "d01" isa document; $r10 (happening: $e0, protagonist: $p10); $r10 has function "deceased";
insert isa conclusion-evidence (evidence: $d0, conclusion: $e0);
</code></pre>

<h2 id="migration-script">Migration Script</h2>

<p>To invoke each of the migration templates on the appropriate .CSV file, you can call the Grakn migrator <code class="highlighter-rouge">migration.sh</code>, which resides in the <em>/bin/</em> directory of the Grakn installation. Usage instructions are available as part of our <a href="../migration/migration.html">migration documentation</a>.</p>

<p>However, for simplicity, the <em>/raw-data/</em> directory of the genealogy-graph project contains a script called <em>loader.sh</em> that calls each migration script in turn, so you can simply call the script from the terminal, from within the genealogy-graph directory, passing in the path to the Grakn <em>/bin/</em> directory.</p>

<div class="highlighter-rouge"><pre class="highlight"><code> ./loader.sh &lt;location-of-Grakn-on-your-computer&gt;/bin
</code></pre>
</div>

<p>The migration will take a minute or two, and the terminal will report which file it is migrating at each step. When it is complete, it will report that it is “Done migrating data”. To check that it has been successful, open the <a href="../the-basics/visualiser.html">Grakn visualiser</a> and select Types, then Entities, and choose one of those presented to you (the entities should be those described <a href="./CSV-migration.html#entities">above</a>]. The visualiser will display the entities it has imported. The screenshot below illustrates the result from selecting to see all <code class="highlighter-rouge">person</code> entities.</p>

<p><img src="/images/match-$x-isa-person.png" alt="Person query" /></p>

<p>We have completed the data import, and the graph can now be queried. Since we have used just the basic ontology for this example, it isn’t possible to perform the inference that is described in this blog post, that uses the same data.</p>

<h2 id="where-next">Where Next?</h2>

<p>This example has illustrated how to migrate CSV data into Grakn. Having read it, you may want to further study our documentation about <a href="../migration/migration.html">CSV migration</a> and <a href="https://grakn.ai/pages/documentation/graql/graql-templating.html">Graql templating</a>.</p>

<p>We will be using the genealogy data throughout our documentation, and will shortly add further examples to illustrate the use of Grakn’s inference and analytics, but as a starting point, please see our <a href="https://blog.grakn.ai/family-matters-1bb639396a24#.uelgekrn2">Family Matters</a> blog post.</p>

<h2 id="comments">Comments</h2>
<p>Want to leave a comment? Visit <a href="https://github.com/graknlabs/docs/issues/42" target="_blank">the issues on Github for this page</a> (you’ll need a GitHub account). You are also welcome to contribute to our documentation directly via the “Edit me” button at the top of the page.</p>


    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="/pages/tag_migration.html" class="btn btn-default navbar-btn cursorNorm" role="button">migration</a>
        
        
        
        <a href="/pages/tag_examples.html" class="btn btn-default navbar-btn cursorNorm" role="button">examples</a>
        
        
        
    </div>

    

</div>

<!-- <hr class="shaded"/> -->

<footer class="row">
    <div class="col-lg-4 footer">
        <span class="footer-header">Get in touch</span>
        <p>
            <a class="slack" href="https://grakn.ai/slack.html">
                <svg><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="#slack"></use></svg> Grakn on Slack
            </a>
            <br>
            <a rel="me" class="github" href="https://github.com/graknlabs/grakn" target="_blank">
                <svg><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="#github"></use></svg> Grakn on GitHub
            </a>
            <br><br>
            <a href="mailto:info@grakn.ai">info@grakn.ai</a><br>
            Unit 22, 8 Hornsey Street<br>
            London, UK, N7 8EG
        </p>
        <br>
        <p>© 2016 <a href="https://grakn.ai">Grakn Labs Ltd</a></p>
        <!-- &copy;2017 GRAKN.AI. All rights reserved. <br />
        <span>Page last updated:</span> January 2017<br/> Site last generated: Jan 13, 2017 <br />
        <p><img src="images/company_logo.png" alt="Company logo"/></p> -->
    </div>
    <div class="col-lg-2 footer">
        <span class="footer-header">Get Started</span>
        <ul>
            <li><a href="/pages/platform/index.html">Introduction</a></li>
            <li><a href="/pages/documentation/get-started/setup-guide.html">Install</a></li>
            <li><a href="/pages/documentation/the-basics/quickstart-tutorial.html">Quickstart</a></li>
        </ul>
    </div>
    <div class="col-lg-2 footer">
        <span class="footer-header">Resources</span>
        <ul>
            <li><a href="/pages/index.html">Documentation</a></li>
            <li><a rel="me" href="https://github.com/graknlabs/grakn" target="_blank">GitHub</a></li>
            <li><a href="https://grakn.ai/javadocs.html">Javadoc</a></li>
            <li><a href="https://grakn.ai/community.html">Community</a></li>
        </ul>
    </div>
    <div class="col-lg-2 footer">
        <span class="footer-header">Community</span>
        <ul>
            <li><a rel="me" href="https://discuss.grakn.ai">Discussion</a></li>
            <li><a rel="me" href="https://stackoverflow.com/questions/tagged/graql+or+grakn" target="_blank">Stack Overflow</a></li>
            <li><a href="https://grakn.ai/slack.html">Slack</a></li>
            <li><a rel="me" href="https://twitter.com/graknlabs" target="_blank">Twitter</a></li>
        </ul>
    </div>
    <div class="col-lg-2 footer">
        <span class="footer-header">Company</span>
        <ul>
            <li><a rel="me" href="https://blog.grakn.ai" target="_blank">Blog</a></li>
            <li><a href="https://grakn.ai/careers.html">Careers</a></li>
            <li><a href="https://grakn.ai/about.html">About</a></li>
        </ul>
    </div>
</footer>


        </div>
    </div>
</div>
<!-- /.container -->
    </div>

</body>

</html>
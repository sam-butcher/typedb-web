<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="An example to illustrate inference using genealogy data.">
<meta name="keywords" content="reasonerexamples,  migration, GRAKN.AI, Grakn Labs, grakn, graql, grakn.ai, Mindmaps Research, Mindmaps Research Ltd, MindmapsDB, mindmaps, mindmaps graph, mindmaps.io, knowledge graph, distributed knowledge graph, development platform, developer tool, data platform, programming langauge, query langauge, database, semantic database, distributed semantic database, distributed database, graph database, semantic search, data exploration, recommendation system, knowledge management, knowledge engineering, real-time analytics, advanced analytics, reasoning engine, inference engine, expert systems, semantic applications, research engines, data management, business intelligence, big data, semantic web, semantic data, knowledge representation, automated reasoning, semantic network, knowledge ontology, semantic graph, ontology engineering, graph based knowledge representation, artificial intelligence,">
<title>GRAKN.AI | Inference with the GRAKN.AI Reasoner</title>
<link rel="stylesheet" href="/pages/css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/pages/css/modern-business.css">
<link rel="stylesheet" href="/pages/css/lavish-bootstrap.css">
<link rel="stylesheet" href="/pages/css/customstyles.css">
<link rel="stylesheet" href="/pages/css/theme-white.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/pages/js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="/pages/js/toc.js"></script>
<script src="/pages/js/customscripts.js"></script>

<link rel="shortcut icon" href="/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://grakn.ai/pages/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" style="display: none;">
    <symbol id="logo" viewBox="0 0 40 40" aria-labelledby="GRAKN.AI">
       <value>GRAKN.AI</value>
       <desc>A Distributed Knowledge Graph</desc>
       <polygon vector-effect="non-scaling-stroke" fill="transparent" stroke-linejoin="round" points="20,2 38,20 20,38 2,20"/>
       <polyline vector-effect="non-scaling-stroke" fill="transparent" stroke-linejoin="round" points="7.27,32.73 7.27,7.27 20,20 32.73,7.27 32.73,32.73"/>
    </symbol>
    <symbol id="github" viewBox="0 0 16 16" aria-labelledby="GitHub">
        <value>GitHub</value>
        <desc>GitHub</desc>
        <path vector-effect="non-scaling-stroke" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
    </symbol>
    <symbol id="gitter" viewBox="0 0 28 40" aria-labelledby="Gitter">
        <value>Gitter</value>
        <desc>Gitter</desc>
        <rect vector-effect="non-scaling-stroke" x="15.6" y="6.4" width="3.2" height="33.6"/>
        <rect vector-effect="non-scaling-stroke" x="22" y="6.4" width="3.2" height="17.6"/>
        <rect vector-effect="non-scaling-stroke" x="9.2" y="6.4" width="3.2" height="33.6"/>
        <rect vector-effect="non-scaling-stroke" x="2.8" width="3.2" height="24"/>
    </symbol>
    <symbol id="slack" viewBox="0 0 256 256" aria-labelledby="Slack">
        <path d="M165.963541,15.8384262 C162.07318,3.86308197 149.212328,-2.69009836 137.239082,1.20236066 C125.263738,5.09272131 118.710557,17.9535738 122.603016,29.9268197 L181.550164,211.292328 C185.597902,222.478689 197.682361,228.765377 209.282098,225.426885 C221.381246,221.943607 228.756984,209.093246 224.896,197.21023 C224.749115,196.756984 165.963541,15.8384262 165.963541,15.8384262"></path>
        <path d="M74.6260984,45.515541 C70.7336393,33.5422951 57.8727869,26.9891148 45.899541,30.8794754 C33.9241967,34.7698361 27.3710164,47.6306885 31.2634754,59.6060328 L90.210623,240.971541 C94.2583607,252.157902 106.34282,258.44459 117.942557,255.104 C130.041705,251.62282 137.417443,238.772459 133.556459,226.887344 C133.409574,226.436197 74.6260984,45.515541 74.6260984,45.515541"></path>
        <path d="M240.161574,166.045377 C252.136918,162.155016 258.688,149.294164 254.797639,137.31882 C250.907279,125.345574 238.046426,118.792393 226.07318,122.682754 L44.7076721,181.632 C33.5213115,185.677639 27.234623,197.762098 30.5731148,209.361836 C34.0563934,221.460984 46.9067541,228.836721 58.7897705,224.975738 C59.2430164,224.828852 240.161574,166.045377 240.161574,166.045377"></path>
        <path d="M82.507541,217.270557 C94.312918,213.434754 109.528131,208.491016 125.855475,203.186361 C122.019672,191.380984 117.075934,176.163672 111.76918,159.83423 L68.4191475,173.924721 L82.507541,217.270557"></path>
        <path d="M173.847082,187.591344 C190.235279,182.267803 205.467279,177.31777 217.195016,173.507148 C213.359213,161.70177 208.413377,146.480262 203.106623,130.146623 L159.75659,144.237115 L173.847082,187.591344"></path>
        <path d="M210.484459,74.7058361 C222.457705,70.8154754 229.010885,57.954623 225.120525,45.9792787 C221.230164,34.0060328 208.369311,27.4528525 196.393967,31.3432131 L15.028459,90.292459 C3.84209836,94.3380984 -2.44459016,106.422557 0.896,118.022295 C4.37718033,130.121443 17.227541,137.49718 29.1126557,133.636197 C29.5638033,133.489311 210.484459,74.7058361 210.484459,74.7058361"></path>
        <path d="M52.8220328,125.933115 C64.6274098,122.097311 79.8468197,117.151475 96.1762623,111.84682 C90.8527213,95.4565246 85.9026885,80.2245246 82.0920656,68.4946885 L38.731541,82.5872787 L52.8220328,125.933115"></path>
        <path d="M144.159475,96.256 C160.551869,90.9303607 175.785967,85.9803279 187.515803,82.1676066 C182.190164,65.7752131 177.240131,50.5390164 173.42741,38.807082 L130.068984,52.8996721 L144.159475,96.256"></path>
    </symbol>
</svg>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                <svg><use xlink:href="#logo" /></svg>
                <span class="projectTitle">GRAKN.AI</span>
            </a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!-- <li class="dropdown">
                    <a>Documentation</a>
                    <ul>
                        <li><a href="#">Overview</a></li>
                        <li><a href="#">Core API</a></li>
                        <li><a href="#">Graql API</a></li>
                        <li><a href="#">Rest API</a></li>
                        <li><a href="#">Javadoc</a></li>
                    </ul>
                </li> -->
                <li><a href="/pages/platform/index.html">Platform</a></li>
                <li><a href="/pages/index.html">Documentation</a></li>
                <li><a rel="me" href="//grakn.ai/community.html">Community</a></li>
                <li><a rel="me" href="//discuss.grakn.ai/">Discussion</a></li>
                <li><a rel="me" href="//blog.grakn.ai/" target="_blank">Blog</a></li>
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="Search">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/pages/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                        SimpleJekyllSearch.init({
                            searchInput: document.getElementById('search-input'),
                            resultsContainer: document.getElementById('results-container'),
                            
                            dataSource: '/pages/search.json',
                            
                            searchResultTemplate: '<li><a href="{url}" title="Inference with the GRAKN.AI Reasoner">{title}</a></li>',
                            noResultsText: '<li><a class="empty">No results found</a></li>',
                            limit: 10,
                            fuzzy: true
                        });
                    </script>
                    <!--end search-->
                </li>
                <!--comment out this block if you want to hide github link-->
                <li>
                    <a rel="me" href="//github.com/graknlabs/grakn" target="_blank" class="github">
                        <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use></svg>
                    </a>
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">
          





<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Grakn 0.10.0</li>
    
    
    
    <li>
        <a href="#">Get Started</a>
        <ul>
            
            
            
            <li><a href="/pages/index.html">Home</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/get-started/setup-guide.html">Setup Guide</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">The Basics</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/the-basics/grakn-basics.html">Grakn Basics</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/the-basics/grakn-knowledge-model.html">Grakn Knowledge Model</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/the-basics/quickstart-tutorial.html">Quickstart Tutorial</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/the-basics/visualiser.html">Visualising a Graph</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Building an Ontology</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/basic-ontology.html">Defining a Basic Ontology</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/hierarchical-ontology.html">Defining a Hierarchical Ontology</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/rule-driven-ontology.html">Defining a Rule-Driven Ontology</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/ontology-overview.html">Overview (deprecated)</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/simple-schema-definition.html">Simple Schema (deprecated)</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/building-an-ontology/advanced-schema-definition.html">Advanced Schema (deprecated)</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Querying with Graql</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/graql/graql-overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/graql-shell.html">Graql Shell</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/match-queries.html">Match Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/ask-queries.html">Ask Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/delete-queries.html">Delete Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/insert-queries.html">Insert Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/graql-rules.html">Graql Rules</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/aggregate-queries.html">Aggregate Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/compute-queries.html">Compute Queries</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/graql-templating.html">Graql Templating</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql/graql-cheatsheet.html">Graql Cheatsheet</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Graql Analytics</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-statistics.html">Analytics Statistics</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-shortest-path.html">Analytics Shortest Path</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-degrees.html">Analytics Degrees</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-persist.html">Analytics Persist</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/graql-analytics/analytics-connected-components.html">Connected Components</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Migrating to Grakn</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/migration/migration-overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/migration/CSV-migration.html">CSV Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/migration/JSON-migration.html">JSON Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/migration/SQL-migration.html">SQL Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/migration/OWL-migration.html">OWL Migration</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Developing with Java</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/developing-with-java/java-setup.html">Java Development Setup</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/developing-with-java/graph-api.html">Graph API</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/developing-with-java/java-graql.html">Java Graql</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Advanced Grakn</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/advanced-grakn/post-processing.html">Post Processing</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/advanced-grakn/validation.html">Validation</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">API Reference</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/api-reference/api-reference.html">API Reference</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Resources</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/resources/resources-overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/resources/grakn-deployment-guide.html">Grakn Deployment Guide</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/resources/faq.html">Grakn FAQ</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/resources/downloads.html">Downloads</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Examples</a>
        <ul>
            
            
            
            <li><a href="/pages/documentation/examples/examples-overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/modern.html">Modern example</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/CSV-migration.html">CSV Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/SQL-migration.html">SQL Migration</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/OWL-migration.html">OWL Migration</a></li>
            
            
            
            
            
            
            <li class="active"><a href="/pages/documentation/examples/grakn-reasoner.html">Grakn Reasoner</a></li>
            
            
            
            
            
            
            <li><a href="/pages/documentation/examples/projects.html">Example Projects</a></li>
            
            
            
            
        </ul>
        
        

        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

        </div>
        <!-- Content Column -->
        <div class="col-md-9">
            <div class="post-header">
   <h1 class="post-title-main">Inference with the GRAKN.AI Reasoner</h1>
</div>



<div class="post-content">

   
    <div class="summary">An example to illustrate inference using genealogy data.</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

    

    

    <a target="_blank" href="https://github.com/graknlabs/docs/blob/master/pages/documentation/10-examples/grakn-rules.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

    

  <h2 id="introduction">Introduction</h2>

<p>This is an example of how to use Grakn’s reasoner to infer information about family relationships from a simple dataset of genealogy data. The data has been used previously as the basis of a <a href="https://blog.grakn.ai/family-matters-1bb639396a24#.2e6h72y0m">blog post</a> to illustrate the fundamentals of the Grakn visualiser, reasoner and analytics components.</p>

<p>As the blog post explained, the original data was a <a href="http://www.lenzenresearch.com/titusnarrlineage.pdf">document</a> from <a href="http://www.lenzenresearch.com/">Lenzen Research</a> that described the family history of Catherine Niesz Titus for three generations of her maternal lineage. Our team gathered together a set of CSV files containing basic information about the family, such as names, dates of birth, death and marriage, who was a parent of who, and who married who.</p>

<p>The full genealogy-graph example can be found on Grakn’s <a href="https://github.com/graknlabs/sample-datasets/tree/master/genealogy-graph">sample-datasets</a>. repository on Github. In this example, we will explore how to use Grakn to make inferences and find information from the data that is not explicit in the dataset. You can find documentation about writing rules for the Grakn reasoner <a href="https://grakn.ai/pages/documentation/graql/graql-rules.html">here</a>.</p>

<h2 id="example-ontology">Example Ontology</h2>

<p>On GRAKN.AI, the first step when working with a dataset is to define its ontology in Graql. The ontology is a way to describe the entities and their relations, so the underlying graph can store them as nodes and edges. You can find out more in our guide to the Grakn Knowledge Model. The ontology allows Grakn to perform:</p>

<ul>
  <li>logical reasoning over the represented knowledge, such as the extraction of implicit information from explicit data (inference)</li>
  <li>discovery of inconsistencies in the data (validation).</li>
</ul>

<p>The complete ontology for the genealogy-graph demo is in our sample-datasets repository, named <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/ontology.gql">ontology.gql</a>.</p>

<p>At a very high-level, the ontology contains the following entities:</p>

<ul>
  <li><code class="highlighter-rouge">person</code></li>
  <li><code class="highlighter-rouge">event</code>
    <ul>
      <li><code class="highlighter-rouge">birth</code>, a subclass of an <code class="highlighter-rouge">event</code></li>
      <li><code class="highlighter-rouge">death</code>, a subclass of an <code class="highlighter-rouge">event</code></li>
      <li><code class="highlighter-rouge">wedding</code>, a subclass of an <code class="highlighter-rouge">event</code></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">document</code>, which we will not consider in this example.</li>
</ul>

<p>The ontology also describes possible family relationships between <code class="highlighter-rouge">person</code> entities, such as parent/child, siblings, grandparent/grandchild, which will discuss shortly.</p>

<p>In addition, there is an <code class="highlighter-rouge">event-protagonist</code> relation:</p>

<ul>
  <li>The role of the person in the event is described by a resource named <code class="highlighter-rouge">function</code> (which is of datatype string to indicate newborn, spouse, parent or deceased).</li>
  <li>The relation two associated roles: <code class="highlighter-rouge">happening</code> (played by an <code class="highlighter-rouge">event</code> entity such as a <code class="highlighter-rouge">birth</code> or <code class="highlighter-rouge">wedding</code>) and <code class="highlighter-rouge">protagonist</code> (played by a <code class="highlighter-rouge">person</code> entity)</li>
</ul>

<p>Finally, there is another relation, which is between <code class="highlighter-rouge">document</code> and <code class="highlighter-rouge">event</code> entities, the <code class="highlighter-rouge">conclusion-evidence</code> relation, which we will not consider in this example, as it is not relevant to the concepts we are discussing.</p>

<p>To load the <em>ontology.gql</em> file into Grakn, make sure the engine is running and choose a clean keyspace in which to work (in the example below we use the default keyspace, so we are cleaning it before we get started). Pull down the <a href="https://github.com/graknlabs/sample-datasets">sample-datasets repo</a>, and call the following from the terminal, from within the <em>genealogy-graph</em> directory:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;relative-path-to-Grakn&gt;/bin/grakn.sh clean
&lt;relative-path-to-Grakn&gt;/bin/grakn.sh start
&lt;relative-path-to-Grakn&gt;/bin/graql.sh -f ./ontology.gql
</code></pre>
</div>

<h2 id="data">Data</h2>

<p>The data for this example is discussed more fully in our <a href="./CSV-migration.html">example on CSV migration</a>, which discusses how the original data is laid out in CSV files and migrated into GRAKN.AI. For the purposes of this example, we can simply load the data from a .gql file into the graph:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;relative-path-to-Grakn&gt;/bin/graql.sh -f ./data.gql
</code></pre>
</div>

<p>When the terminal prompt returns, the data will have been loaded into the default keyspace, and you can start to look it using the <a href="../the-basics/visualiser.html">Grakn visualiser</a>, by navigating to <a href="http://localhost:4567">http://localhost:4567</a> in your browser.</p>

<h2 id="inferring-family-relations">Inferring Family Relations</h2>

<p>By default, inference is switched off, and the only data in the graph is what we have loaded, which is a set of people, event and document entities and a set of relations between people/events and documents/events. For example, if you submit the following query to the visualiser:</p>

<pre><code class="language-graql">match (child: $c, parent: $p) isa parentship;
</code></pre>

<p>You will receive no results at all. To find family relations between people, we need to:</p>

<ul>
  <li>Load a set of rules for the reasoner, which we will discuss further shortly</li>
  <li>Activate inference.</li>
</ul>

<p>The following loads the rules for this dataset from a file called <em>rules.gql</em>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;relative-path-to-Grakn&gt;/bin/graql.sh -f ./rules.gql
</code></pre>
</div>

<p>To activate inference in the Grakn visualiser you need to open the Config settings, found on the left hand side of the screen. When the page opens you will see the “Activate Inference” checkbox. Check it, and Grakn is ready to start building some new information about the family. Try the query again:</p>

<pre><code class="language-graql">match (child: $c, parent: $p) isa parentship;
</code></pre>

<p>You should see something similar to the screenshot below in your visualiser window.</p>

<p><img src="/images/match-isa-parentship.png" alt="Person query" /></p>

<p>Alternatively, you can make queries in the graql shell. You will need to start it as follows, to switch on inference and materialisation:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;relative-path-to-Grakn&gt;/bin/graql.sh -n -m
</code></pre>
</div>

<h2 id="inference-rules">Inference Rules</h2>

<p>Inference is the process of deducing information from incomplete data. For example, given the following statements:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>If grass is not an animal.
If vegetarians only eat things which are not animals.
If sheep only eat grass.
</code></pre>
</div>

<p>It is possible to infer the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Then sheep are vegetarians.
</code></pre>
</div>

<p>The initial statements can be seen as a set of rules with a particular structure: IF something is verified, THEN something else must be true.</p>

<p>This is how the Grakn reasoner works. It checks all whether the rules in the first block can be verified and, if they can, infers the statement in the second block. The rules are written in Graql, and we call the first set of statements (the IF part or, if you prefer, the antecedent) simply the left hand side (LHS). The second part, not surprisingly, is the right hand side (RHS). Using Graql, both sides of the rule are enclosed in curly braces and preceded by, respectively, the keywords <code class="highlighter-rouge">lhs</code> and <code class="highlighter-rouge">rhs</code>.</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> The full documentation for writing rules for the Grakn reasoner is available from <a href="https://grakn.ai/pages/documentation/graql/graql-rules.html">here</a>.</div>

<h3 id="example-1-a-parentship-relation">Example 1: A <code class="highlighter-rouge">parentship</code> relation</h3>

<p>The following code is part of the set of rules in <a href="https://github.com/graknlabs/sample-datasets/blob/master/genealogy-graph/rules.gql"><em>rules.gql</em></a> that we loaded into the graph earlier.</p>

<pre><code class="language-graql"># Naming the rule is optional

$materializeParentChildRelations isa inference-rule
lhs
{$b isa birth has confidence "high";
$rel1 (happening: $b, protagonist: $p) isa event-protagonist;
$rel1 has function "parent";
$rel2 (happening: $b, protagonist: $c) isa event-protagonist;
$rel2 has function "newborn";}
rhs
{(parent: $p, child: $c) isa parentship;};
</code></pre>

<p>Here, the left hand side rules check these statements:</p>

<ul>
  <li>does a <code class="highlighter-rouge">birth</code> event (<code class="highlighter-rouge">$b</code>) have a <code class="highlighter-rouge">confidence</code> resource set to “high” (which means that it has been added by the Grakn migrator from CSV data, so is reliable)?</li>
  <li>does an <code class="highlighter-rouge">event-protagonist</code> relation between this <code class="highlighter-rouge">birth</code> event (<code class="highlighter-rouge">$b</code>) and a <code class="highlighter-rouge">person</code> entity (<code class="highlighter-rouge">$p</code>) have a <code class="highlighter-rouge">function</code> resource called “parent”?</li>
  <li>does an <code class="highlighter-rouge">event-protagonist</code> relation between this <code class="highlighter-rouge">birth</code> event (<code class="highlighter-rouge">$b</code>) and a <code class="highlighter-rouge">person</code> entity (<code class="highlighter-rouge">$c</code>) have a <code class="highlighter-rouge">function</code> resource called “newborn”?</li>
</ul>

<p>If so, the right hand side of the rules state that:</p>

<ul>
  <li>the two <code class="highlighter-rouge">person</code> entities <code class="highlighter-rouge">$p</code> and <code class="highlighter-rouge">$c</code> are in a <code class="highlighter-rouge">parentship</code> relation where <code class="highlighter-rouge">$p</code> is the parent and <code class="highlighter-rouge">$c</code> is the child.</li>
</ul>

<p>Use of inference has made information that was in the dataset, but not explicit, easy to retrieve. For example, we can make a query to determine children who have the same name as their parents:</p>

<pre><code class="language-graql">match (parent: $p, child: $c); $p has firstname $n; $c has firstname $n;
</code></pre>

<p>In the genealogy-graph example, there should be three results returned. William, John and Mary are names shared between pairs of parents and children.</p>

<h3 id="example-2-specific-relations-between-parents-and-children">Example 2: Specific relations between parents and children</h3>

<p>We have just described the Grakn rules to infer <code class="highlighter-rouge">parentship</code> relations between <code class="highlighter-rouge">person</code> entities, but we have not identified the specific details of the parent (are they the mother or the father?) nor of the child (a son or a daughter?). The following rules add new roles to the <code class="highlighter-rouge">parentship</code> and assign the to the appropriate entities:</p>

<pre><code class="language-graql">$genderizeParentships1 isa inference-rule
lhs
{(parent: $p, child: $c) isa parentship;
$p has gender "male";
$c has gender "male";
}
rhs
{(father: $p, son: $c) isa parentship;};

$genderizeParentships2 isa inference-rule
lhs
{(parent: $p, child: $c) isa parentship;
$p has gender "male";
$c has gender "female";
}
rhs
{(father: $p, daughter: $c) isa parentship;};

$genderizeParentships3 isa inference-rule
lhs
{(parent: $p, child: $c) isa parentship;
$p has gender "female";
$c has gender "male";
}
rhs
{(mother: $p, son: $c) isa parentship;};

$genderizeParentships4 isa inference-rule
lhs
{(parent: $p, child: $c) isa parentship;
$p has gender "female";
$c has gender "female";
}
rhs
{(mother: $p, daughter: $c) isa parentship;};
</code></pre>

<p>The four rules can be broken down as follows:</p>

<ul>
  <li>LHS: In the <code class="highlighter-rouge">parentship</code> relation between child <code class="highlighter-rouge">$c</code> and parent <code class="highlighter-rouge">$p</code>, do they both have a <code class="highlighter-rouge">gender</code> resource that is <code class="highlighter-rouge">male</code>?
    <ul>
      <li>RHS: The <code class="highlighter-rouge">parentship</code> relation is between <code class="highlighter-rouge">father</code> and <code class="highlighter-rouge">son</code></li>
    </ul>
  </li>
  <li>LHS: In the <code class="highlighter-rouge">parentship</code> relation between child <code class="highlighter-rouge">$c</code> and parent <code class="highlighter-rouge">$p</code>, does <code class="highlighter-rouge">$c</code> have a <code class="highlighter-rouge">gender</code> resource that is <code class="highlighter-rouge">female</code> and <code class="highlighter-rouge">$p</code> have a <code class="highlighter-rouge">gender</code> resource that is <code class="highlighter-rouge">male</code>?
    <ul>
      <li>RHS: The <code class="highlighter-rouge">parentship</code> relation is between <code class="highlighter-rouge">father</code> and <code class="highlighter-rouge">daughter</code></li>
    </ul>
  </li>
  <li>LHS: In the <code class="highlighter-rouge">parentship</code> relation between child <code class="highlighter-rouge">$c</code> and parent <code class="highlighter-rouge">$p</code>, does <code class="highlighter-rouge">$c</code> have a <code class="highlighter-rouge">gender</code> resource that is <code class="highlighter-rouge">male</code> and <code class="highlighter-rouge">$p</code> have a <code class="highlighter-rouge">gender</code> resource that is <code class="highlighter-rouge">female</code>?
    <ul>
      <li>RHS: The <code class="highlighter-rouge">parentship</code> relation is between <code class="highlighter-rouge">mother</code> and <code class="highlighter-rouge">son</code></li>
    </ul>
  </li>
  <li>LHS: In the <code class="highlighter-rouge">parentship</code> relation between child <code class="highlighter-rouge">$c</code> and parent <code class="highlighter-rouge">$p</code>, do both have a <code class="highlighter-rouge">gender</code> resource that is <code class="highlighter-rouge">female</code>?
    <ul>
      <li>RHS: The <code class="highlighter-rouge">parentship</code> relation is between <code class="highlighter-rouge">mother</code> and <code class="highlighter-rouge">daughter</code></li>
    </ul>
  </li>
</ul>

<p>Now we have even more information from the data. Previously we made a query to determine children who have the same name as their parents. Now, we can make a query to determine just the sons who have the same name as their fathers:</p>

<pre><code class="language-graql">match (father: $p, son: $c) isa parentship; $p has firstname $n; $c has firstname $n;
</code></pre>

<p>In the genealogy-graph example, there should be two results returned. William and John are names shared between father/son pairs.</p>

<h3 id="example-3-a-grandparentship-relation">Example 3: A <code class="highlighter-rouge">grandparentship</code> relation</h3>

<p>The <em>rules.gql</em> file for the genealogy dataset contains a number of rules for setting up family relationships, such as siblings, cousins, in-laws and the following, which sets up a relation called <code class="highlighter-rouge">grandparentship</code>:</p>

<pre><code class="language-graql">$parentsOfParentsAreGrandparents isa inference-rule
lhs
{(parent:$p, child: $gc) isa parentship;
(parent: $gp, child: $p) isa parentship;
}
rhs
{(grandparent: $gp, grandchild: $gc) isa grandparentship;};
</code></pre>

<p>Here, the left hand side rules check two statements:</p>

<ul>
  <li>does <code class="highlighter-rouge">$p</code> play the <code class="highlighter-rouge">parent</code> role in a <code class="highlighter-rouge">parentship</code> relation, with (<code class="highlighter-rouge">$gc</code>) playing the <code class="highlighter-rouge">child</code> role?</li>
  <li>does <code class="highlighter-rouge">$p</code> also play the <code class="highlighter-rouge">child</code> role in a <code class="highlighter-rouge">parentship</code> relation, with (<code class="highlighter-rouge">$gp</code>) playing the <code class="highlighter-rouge">parent</code> role?</li>
</ul>

<p>If so, the right hand side of the rules state that:</p>

<ul>
  <li><code class="highlighter-rouge">$gp</code> and <code class="highlighter-rouge">$gc</code> are in a <code class="highlighter-rouge">grandparentship</code> relation, where <code class="highlighter-rouge">$gp</code> plays the <code class="highlighter-rouge">grandparent</code> role and <code class="highlighter-rouge">$gc</code> plays the <code class="highlighter-rouge">grandchild</code> role.</li>
</ul>

<p>Some additional rules can add more specifics to the <code class="highlighter-rouge">grandparentship</code> and assign the entities to the roles <code class="highlighter-rouge">grandson</code>, <code class="highlighter-rouge">granddaughter</code>, <code class="highlighter-rouge">grandmother</code> and <code class="highlighter-rouge">grandfather</code>:</p>

<pre><code class="language-graql">$grandParents1 isa inference-rule
lhs
{($p, son: $gc) isa parentship;
(father: $gp, $p) isa parentship;
}
rhs
{(grandfather: $gp, grandson: $gc) isa grandparentship;};

$grandParents2 isa inference-rule
lhs
{($p, daughter: $gc) isa parentship;
(father: $gp, $p) isa parentship;
}
rhs
{(grandfather: $gp, granddaughter: $gc) isa grandparentship;};

$grandParents3 isa inference-rule
lhs
{($p, daughter: $gc) isa parentship;
(mother: $gp, $p) isa parentship;
}
rhs
{(grandmother: $gp, granddaughter: $gc) isa grandparentship;};

$grandParents4 isa inference-rule
lhs
{($p, son: $gc) isa parentship;
(mother: $gp, $p) isa parentship;
}
rhs
{(grandmother: $gp, grandson: $gc) isa grandparentship;};
</code></pre>

<p>This allows us to query, for example, which grandfather/grandson pairs share the same name:</p>

<pre><code class="language-graql">match (grandfather: $x, grandson: $y) isa grandparentship; $x has firstname $n; $y has firstname $n;
</code></pre>

<p>In the genealogy-graph example, there should be three results returned. George, Jacob and John are names shared between grandfather/grandson pairs.</p>

<p><img src="/images/match-grandfather-grandson-names.png" alt="Person query" /></p>

<h2 id="where-next">Where Next?</h2>

<p>This example has illustrated the basics of the inference rules used by the Grakn reasoner. Having read it, you may want to further study our documentation about <a href="../graql/graql-rules.html">Graql Rules</a> and further investigate the <a href="./CSV-migration.html">example that imports the genealogy data from CSV format into Grakn</a>.</p>

<p>We will be using the genealogy data throughout our documentation. For an overview, please see our <a href="https://blog.grakn.ai/family-matters-1bb639396a24#.uelgekrn2">Family Matters</a> blog post.</p>

<h2 id="comments">Comments</h2>
<p>Want to leave a comment? Visit <a href="https://github.com/graknlabs/docs/issues/27" target="_blank">the issues on Github for this page</a> (you’ll need a GitHub account). You are also welcome to contribute to our documentation directly via the “Edit me” button at the top of the page.</p>



    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="/pages/tag_reasoner.html" class="btn btn-default navbar-btn cursorNorm" role="button">reasoner</a>
        
        
        
        <a href="/pages/tag_examples.html" class="btn btn-default navbar-btn cursorNorm" role="button">examples</a>
        
        
        
    </div>

    

</div>

<!-- <hr class="shaded"/> -->

<footer class="row">
    <div class="col-lg-4 footer">
        <span class="footer-header">Get in touch</span>
        <p>
            <a class="slack" href="https://grakn.ai/slack.html">
                <svg><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="#slack"></use></svg> Grakn on Slack
            </a>
            <br>
            <a rel="me" class="github" href="https://github.com/graknlabs/grakn" target="_blank">
                <svg><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="#github"></use></svg> Grakn on GitHub
            </a>
            <br><br>
            <a href="mailto:info@grakn.ai">info@grakn.ai</a><br>
            Unit 22, 8 Hornsey Street<br>
            London, UK, N7 8EG
        </p>
        <br>
        <p>© 2016 <a href="https://grakn.ai">Grakn Labs Ltd</a></p>
        <!-- &copy;2017 GRAKN.AI. All rights reserved. <br />
        <span>Page last updated:</span> January 2017<br/> Site last generated: Jan 17, 2017 <br />
        <p><img src="images/company_logo.png" alt="Company logo"/></p> -->
    </div>
    <div class="col-lg-2 footer">
        <span class="footer-header">Get Started</span>
        <ul>
            <li><a href="/pages/platform/index.html">Introduction</a></li>
            <li><a href="/pages/documentation/get-started/setup-guide.html">Install</a></li>
            <li><a href="/pages/documentation/the-basics/quickstart-tutorial.html">Quickstart</a></li>
        </ul>
    </div>
    <div class="col-lg-2 footer">
        <span class="footer-header">Resources</span>
        <ul>
            <li><a href="/pages/index.html">Documentation</a></li>
            <li><a rel="me" href="https://github.com/graknlabs/grakn" target="_blank">GitHub</a></li>
            <li><a href="https://grakn.ai/javadocs.html">Javadoc</a></li>
            <li><a href="https://grakn.ai/community.html">Community</a></li>
        </ul>
    </div>
    <div class="col-lg-2 footer">
        <span class="footer-header">Community</span>
        <ul>
            <li><a rel="me" href="https://discuss.grakn.ai">Discussion</a></li>
            <li><a rel="me" href="https://stackoverflow.com/questions/tagged/graql+or+grakn" target="_blank">Stack Overflow</a></li>
            <li><a href="https://grakn.ai/slack.html">Slack</a></li>
            <li><a rel="me" href="https://twitter.com/graknlabs" target="_blank">Twitter</a></li>
        </ul>
    </div>
    <div class="col-lg-2 footer">
        <span class="footer-header">Company</span>
        <ul>
            <li><a rel="me" href="https://blog.grakn.ai" target="_blank">Blog</a></li>
            <li><a href="https://grakn.ai/careers.html">Careers</a></li>
            <li><a href="https://grakn.ai/about.html">About</a></li>
        </ul>
    </div>
</footer>


        </div>
    </div>
</div>
<!-- /.container -->
    </div>

</body>

</html>
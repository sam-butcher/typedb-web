<h1 id="quickstart-tutorial">Quickstart Tutorial</h1>

<p>This tutorial has been designed to teach you how to load both an ontology and
some data into a Mindmaps Graph. To do this we’re going to model how
philosophers are related!</p>

<p>Don’t worry if you’ve already loaded some data into your graph. A Mindmaps
Graph can contain as many ontologies as you want.</p>

<blockquote>
  <p>Skip this box if you will be using Graql exclusively. For this tutorial we
will be creating an instance of Mindmaps graph which will use Tinkergraph as
the storage backend. <a href="http://www.tinkerpop.com/docs/3.0.0.M1/">TinkerGraph</a>
is a simple in memory graph. This is how you can initialise a Mindmaps Graph
with a TinkerGraph backend:</p>

  <div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">MindmapsGraphFactory</span> <span class="n">mindmapsGraphFactory</span> <span class="o">=</span> <span class="n">MindmapsTinkerGraphFactory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">MindmapsGraph</span> <span class="n">mindmapsGraph</span> <span class="o">=</span> <span class="n">mindmapsGraphFactory</span><span class="o">.</span><span class="na">newGraph</span><span class="o">();</span>
</code></pre>
  </div>
  <p>A TitanGraph Backend can be started with:
<code class="highlighter-rouge">java
MindmapsGraphFactory mindmapsGraphFactory = MindmapsTitanGraphFactory.getInstance();
MindmapsGraph mindmapsGraph = mindmapsGraphFactory.newGraph(\"../conf/titan-cassandra-es.properties\");
</code></p>
</blockquote>

<h2 id="concepts">Concepts</h2>

<blockquote>
  <p>The examples provided with mindmaps.zip contains this quickstart tutorial.</p>
</blockquote>

<p>We’ll first add an ontology element - an entity type <code class="highlighter-rouge">person</code>…</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="n">bin</span><span class="o">/</span><span class="n">graql</span><span class="p">.</span><span class="n">sh</span>
<span class="k">insert</span> <span class="n">person</span> <span class="n">isa</span> <span class="n">entity</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">EntityType</span> <span class="n">person</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntityType</span><span class="o">(</span><span class="s">"person"</span><span class="o">);</span>
</code></pre>
</div>

<p>…and a bunch of ancient Greeks:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="nv">"Socrates"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Plato"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Aristotle"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Alexander"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Entity</span> <span class="n">socrates</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"Socrates"</span><span class="o">,</span> <span class="n">person</span><span class="o">);</span>
<span class="n">Entity</span> <span class="n">plato</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"Plato"</span><span class="o">,</span> <span class="n">person</span><span class="o">);</span>
<span class="n">Entity</span> <span class="n">aristotle</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"Aristotle"</span><span class="o">,</span> <span class="n">person</span><span class="o">);</span>
<span class="n">Entity</span> <span class="n">alexander</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"Alexander"</span><span class="o">,</span> <span class="n">person</span><span class="o">);</span>
</code></pre>
</div>

<blockquote>
  <p><strong>Ancient History</strong></p>

  <p>Graql shell maintains a history of past commands with the ‘up’ and ‘down’
arrows. You can also autocomplete keywords, type and variable names using
‘tab’!”</p>
</blockquote>

<p><img src="/docs/images/phil.png" alt="" /></p>

<p>Now we’ve created a super-simple graph, with one concept type and four concept
instances.</p>

<blockquote>
  <p><strong>Types</strong></p>

  <p>Every concept needs a type, using <code class="highlighter-rouge">isa</code>. <code class="highlighter-rouge">Plato</code> <code class="highlighter-rouge">is a</code> <code class="highlighter-rouge">person</code> and <code class="highlighter-rouge">person</code>
<code class="highlighter-rouge">is a</code> <code class="highlighter-rouge">entity-type</code>.</p>
</blockquote>

<p>We’ll quickly check our data has loaded:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">match</span> <span class="err">$</span><span class="n">p</span> <span class="n">isa</span> <span class="n">person</span>

<span class="err">$</span><span class="n">p</span> <span class="n">id</span> <span class="nv">"Aristotle"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
<span class="err">$</span><span class="n">p</span> <span class="n">id</span> <span class="nv">"Plato"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
<span class="err">$</span><span class="n">p</span> <span class="n">id</span> <span class="nv">"Socrates"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
<span class="err">$</span><span class="n">p</span> <span class="n">id</span> <span class="nv">"Alexander"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Instances of Person:"</span><span class="o">);</span>
<span class="n">person</span><span class="o">.</span><span class="na">instances</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">.</span><span class="na">getId</span><span class="o">()));</span>
</code></pre>
</div>

<blockquote>
  <p><strong>Variables</strong></p>

  <p>Graql variables start with a <code class="highlighter-rouge">$</code>. They represent “wildcards”, and are
returned as results in <code class="highlighter-rouge">match</code> queries. A variable name can contain
alphanumeric characters, dashes and underscores.</p>
</blockquote>

<p>Next, let’s add some <code class="highlighter-rouge">schools</code> of thought:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="n">school</span> <span class="n">isa</span> <span class="n">entity</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Peripateticism"</span> <span class="n">isa</span> <span class="n">school</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Platonism"</span> <span class="n">isa</span> <span class="n">school</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Idealism"</span> <span class="n">isa</span> <span class="n">school</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Cynicism"</span> <span class="n">isa</span> <span class="n">school</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">EntityType</span> <span class="n">school</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntityType</span><span class="o">(</span><span class="s">"school"</span><span class="o">);</span>
<span class="n">Entity</span> <span class="n">peripateticism</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"Peripateticism"</span><span class="o">,</span> <span class="n">school</span><span class="o">);</span>
<span class="n">Entity</span> <span class="n">platonism</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"Platonism"</span><span class="o">,</span> <span class="n">school</span><span class="o">);</span>
<span class="n">Entity</span> <span class="n">idealism</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"Idealism"</span><span class="o">,</span> <span class="n">school</span><span class="o">);</span>
<span class="n">Entity</span> <span class="n">cynicism</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"Cynicism"</span><span class="o">,</span> <span class="n">school</span><span class="o">);</span>
</code></pre>
</div>

<p>And look up one:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">match</span> <span class="err">$</span><span class="n">cyn</span> <span class="n">id</span> <span class="nv">"Cynicism"</span>

<span class="err">$</span><span class="n">cyn</span> <span class="n">id</span> <span class="nv">"Cynicism"</span> <span class="n">isa</span> <span class="n">school</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">getEntity</span><span class="o">(</span><span class="s">"Cynicism"</span><span class="o">).</span><span class="na">getId</span><span class="o">();</span>
</code></pre>
</div>

<h2 id="relations">Relations</h2>

<p>How do we define a “philosopher”? Very smart people have argued for a very long
time about this, but we’re going to put our fingers in our ears and say a
philosopher is someone who practices a philosophy.</p>

<p>First, we define a <code class="highlighter-rouge">relation-type</code> called <code class="highlighter-rouge">practice</code> that relates a
<code class="highlighter-rouge">philosopher</code> to their <code class="highlighter-rouge">philosophy</code>:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="n">practice</span> <span class="n">isa</span> <span class="n">relation</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">philosopher</span> <span class="n">isa</span> <span class="k">role</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">philosophy</span> <span class="n">isa</span> <span class="k">role</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">practice</span> <span class="n">has</span><span class="o">-</span><span class="k">role</span> <span class="n">philosopher</span><span class="p">,</span> <span class="n">has</span><span class="o">-</span><span class="k">role</span> <span class="n">philosophy</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">RoleType</span> <span class="n">philosopher</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"philosopher"</span><span class="o">);</span>
<span class="n">RoleType</span> <span class="n">philosophy</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"philosophy"</span><span class="o">);</span>
<span class="n">RelationType</span> <span class="n">practice</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelationType</span><span class="o">(</span><span class="s">"practice"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">hasRole</span><span class="o">(</span><span class="n">philosopher</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="n">philosophy</span><span class="o">);</span>
</code></pre>
</div>

<blockquote>
  <p><strong>I don’t like typing!</strong></p>

  <p>Commas are totally optional in query patterns, the <code class="highlighter-rouge">has-role</code> line above
could be rewritten as:
<code class="highlighter-rouge">sql
insert practice has-role philosopher has-role philosophy
</code>
Similarly, we could insert <code class="highlighter-rouge">practice</code> like this:
<code class="highlighter-rouge">sql
insert practice, isa relation-type;
</code></p>
</blockquote>

<p>A <code class="highlighter-rouge">person</code> can be a <code class="highlighter-rouge">philosopher</code> and a <code class="highlighter-rouge">school</code> can be a <code class="highlighter-rouge">philosophy</code>:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="n">person</span> <span class="n">plays</span><span class="o">-</span><span class="k">role</span> <span class="n">philosopher</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">school</span> <span class="n">plays</span><span class="o">-</span><span class="k">role</span> <span class="n">philosophy</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">person</span><span class="o">.</span><span class="na">playsRole</span><span class="o">(</span><span class="n">philosopher</span><span class="o">);</span>
<span class="n">school</span><span class="o">.</span><span class="na">playsRole</span><span class="o">(</span><span class="n">philosophy</span><span class="o">);</span>
</code></pre>
</div>

<blockquote>
  <p><strong>graql commit -am “changed some stuff”</strong></p>

  <p>The changes you’ve made to the graph haven’t been saved yet! Type <code class="highlighter-rouge">commit</code> in
the Graql shell to commit any changes.</p>
</blockquote>

<p>Let’s relate some <code class="highlighter-rouge">philosophers</code> to their <code class="highlighter-rouge">philosophies</code>:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="p">(</span><span class="n">philosopher</span> <span class="nv">"Socrates"</span><span class="p">,</span> <span class="n">philosophy</span> <span class="nv">"Platonism"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">practice</span><span class="p">;</span>
<span class="k">insert</span> <span class="p">(</span><span class="n">philosopher</span> <span class="nv">"Plato"</span><span class="p">,</span> <span class="n">philosophy</span> <span class="nv">"Idealism"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">practice</span><span class="p">;</span>
<span class="k">insert</span> <span class="p">(</span><span class="n">philosopher</span> <span class="nv">"Plato"</span><span class="p">,</span> <span class="n">philosophy</span> <span class="nv">"Platonism"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">practice</span><span class="p">;</span>
<span class="k">insert</span> <span class="p">(</span><span class="n">philosopher</span> <span class="nv">"Aristotle"</span><span class="p">,</span> <span class="n">philosophy</span> <span class="nv">"Peripateticism"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">practice</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">practice</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">philosopher</span><span class="o">,</span> <span class="n">socrates</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">philosophy</span><span class="o">,</span> <span class="n">platonisim</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">practice</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">philosopher</span><span class="o">,</span> <span class="n">plato</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">philosophy</span><span class="o">,</span> <span class="n">idealism</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">practice</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">philosopher</span><span class="o">,</span> <span class="n">plato</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">philosophy</span><span class="o">,</span> <span class="n">platonisim</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">practice</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">philosopher</span><span class="o">,</span> <span class="n">aristotle</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">philosophy</span><span class="o">,</span> <span class="n">peripateticism</span><span class="o">);</span>
</code></pre>
</div>

<p><img src="/docs/images/practice.png" alt="" /></p>

<p>A relation comprises of pairs of role types and role players. For example,
<code class="highlighter-rouge">Plato</code> is playing the role of <code class="highlighter-rouge">philosopher</code>. Our relations also have a type
just like normal concepts.</p>

<p>Now we can query for all our Platonists:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">match</span> <span class="p">(</span><span class="n">philosopher</span> <span class="err">$</span><span class="n">phil</span><span class="p">,</span> <span class="nv">"Platonism"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">practice</span><span class="p">;</span>

<span class="err">$</span><span class="n">phil</span> <span class="n">id</span> <span class="nv">"Socrates"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
<span class="err">$</span><span class="n">phil</span> <span class="n">id</span> <span class="nv">"Plato"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">platonisim</span><span class="o">.</span><span class="na">relations</span><span class="o">(</span><span class="n">philosophy</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">relation</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">relation</span><span class="o">.</span><span class="na">rolePlayers</span><span class="o">().</span><span class="na">values</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">rolePlayer</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">rolePlayer</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">platonisim</span><span class="o">))</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"    -&gt; "</span> <span class="o">+</span> <span class="n">rolePlayer</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="o">});</span>
<span class="o">});</span>
</code></pre>
</div>

<blockquote>
  <p><strong>In Plain English…</strong></p>

  <p>This query can be read as “get me philosophers in a practice relationship
with Platonism.”</p>

  <p>We didn’t specify the role of <code class="highlighter-rouge">Platonism</code> in this query, or the type of
<code class="highlighter-rouge">$phil</code>, which is totally fine! Roles and types can be omitted in queries.
For example, the query <code class="highlighter-rouge">match ($x, $y)</code> is a valid query (that will
find <em>everything</em> in a relationship with <em>anything</em>).</p>
</blockquote>

<p>Next let’s talk about the relationships between our philosophers. Socrates
taught Plato, Plato taught Aristotle and Aristotle even taught Alexander the
Great!</p>

<p>First, our ontology:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="n">education</span> <span class="n">isa</span> <span class="n">relation</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">teacher</span> <span class="n">isa</span> <span class="k">role</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">student</span> <span class="n">isa</span> <span class="k">role</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">education</span> <span class="n">has</span><span class="o">-</span><span class="k">role</span> <span class="n">teacher</span><span class="p">,</span> <span class="n">has</span><span class="o">-</span><span class="k">role</span> <span class="n">student</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">person</span> <span class="n">plays</span><span class="o">-</span><span class="k">role</span> <span class="n">teacher</span><span class="p">,</span> <span class="n">plays</span><span class="o">-</span><span class="k">role</span> <span class="n">student</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">RoleType</span> <span class="n">teacher</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"teacher"</span><span class="o">);</span>
<span class="n">RoleType</span> <span class="n">student</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"student"</span><span class="o">);</span>
<span class="n">RelationType</span> <span class="n">education</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelationType</span><span class="o">(</span><span class="s">"education"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">hasRole</span><span class="o">(</span><span class="n">teacher</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="n">student</span><span class="o">);</span>
<span class="n">person</span><span class="o">.</span><span class="na">playsRole</span><span class="o">(</span><span class="n">teacher</span><span class="o">).</span><span class="na">playsRole</span><span class="o">(</span><span class="n">student</span><span class="o">);</span>
</code></pre>
</div>

<p>Second, our data:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="p">(</span><span class="n">teacher</span> <span class="nv">"Socrates"</span><span class="p">,</span> <span class="n">student</span> <span class="nv">"Plato"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">education</span><span class="p">;</span>
<span class="k">insert</span> <span class="p">(</span><span class="n">teacher</span> <span class="nv">"Plato"</span><span class="p">,</span> <span class="n">student</span> <span class="nv">"Aristotle"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">education</span><span class="p">;</span>
<span class="k">insert</span> <span class="p">(</span><span class="n">teacher</span> <span class="nv">"Aristotle"</span><span class="p">,</span> <span class="n">student</span> <span class="nv">"Alexander"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">education</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">education</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">teacher</span><span class="o">,</span> <span class="n">socrates</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">student</span><span class="o">,</span> <span class="n">plato</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">education</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">teacher</span><span class="o">,</span> <span class="n">plato</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">student</span><span class="o">,</span> <span class="n">aristotle</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">education</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">teacher</span><span class="o">,</span> <span class="n">aristotle</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">student</span><span class="o">,</span> <span class="n">alexander</span><span class="o">);</span>
</code></pre>
</div>

<blockquote>
  <p><strong>Aristotle’s Teacher</strong></p>

  <p>Try writing a query to see who taught Aristotle. Include all the roles and
types (<code class="highlighter-rouge">teacher</code>, <code class="highlighter-rouge">student</code> and <code class="highlighter-rouge">education</code>), then remove them one by one to
see when the results change!</p>
</blockquote>

<h2 id="resources">Resources</h2>

<p>Some people have special titles and epithets and we want to talk about that!
So, we’ll create some resource types that can be attached to a person:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="n">title</span> <span class="n">isa</span> <span class="n">resource</span><span class="o">-</span><span class="k">type</span><span class="p">,</span> <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">epithet</span> <span class="n">isa</span> <span class="n">resource</span><span class="o">-</span><span class="k">type</span><span class="p">,</span> <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">person</span> <span class="n">has</span><span class="o">-</span><span class="n">resource</span> <span class="n">title</span><span class="p">,</span> <span class="n">has</span><span class="o">-</span><span class="n">resource</span> <span class="n">epithet</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">RoleType</span> <span class="n">hasTitleOwner</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"has-title-owner"</span><span class="o">);</span>
<span class="n">RoleType</span> <span class="n">hasTitleValue</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"has-title-value"</span><span class="o">);</span>
<span class="n">RelationType</span> <span class="n">hasTitle</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelationType</span><span class="o">(</span><span class="s">"has-title"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">hasRole</span><span class="o">(</span><span class="n">hasTitleOwner</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="n">hasTitleValue</span><span class="o">);</span>

<span class="n">RoleType</span> <span class="n">hasEpithetOwner</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"has-epithet-owner"</span><span class="o">);</span>
<span class="n">RoleType</span> <span class="n">hasEpithetValue</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"has-epithet-value"</span><span class="o">);</span>
<span class="n">RelationType</span> <span class="n">hasEpithet</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelationType</span><span class="o">(</span><span class="s">"has-epithet"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">hasRole</span><span class="o">(</span><span class="n">hasEpithetOwner</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="n">hasEpithetValue</span><span class="o">);</span>

<span class="n">ResourceType</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">title</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putResourceType</span><span class="o">(</span><span class="s">"title"</span><span class="o">,</span> <span class="n">Data</span><span class="o">.</span><span class="na">STRING</span><span class="o">).</span><span class="na">playsRole</span><span class="o">(</span><span class="n">hasTitleValue</span><span class="o">);</span>
<span class="n">ResourceType</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">epithet</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putResourceType</span><span class="o">(</span><span class="s">"epithet"</span><span class="o">,</span> <span class="n">Data</span><span class="o">.</span><span class="na">STRING</span><span class="o">).</span><span class="na">playsRole</span><span class="o">(</span><span class="n">hasEpithetValue</span><span class="o">);</span>

<span class="n">person</span><span class="o">.</span><span class="na">playsRole</span><span class="o">(</span><span class="n">hasTitleOwner</span><span class="o">).</span><span class="na">playsRole</span><span class="o">(</span><span class="n">hasEpithetValue</span><span class="o">);</span>
</code></pre>
</div>

<p>Let’s make Alexander “Great”!</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="nv">"Alexander"</span> <span class="n">has</span> <span class="n">epithet</span> <span class="nv">"The Great"</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Resource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">theGreat</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putResource</span><span class="o">(</span><span class="s">"The Great"</span><span class="o">,</span> <span class="n">epithet</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">hasEpithet</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasEpithetOwner</span><span class="o">,</span> <span class="n">alexander</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasEpithetValue</span><span class="o">,</span> <span class="n">theGreat</span><span class="o">);</span>
</code></pre>
</div>

<p>This is a quick way to add a relation between <code class="highlighter-rouge">Alexander</code> and an <code class="highlighter-rouge">epithet</code> with
value <code class="highlighter-rouge">"The Great"</code>.</p>

<p><img src="/docs/images/epithet.png" alt="" /></p>

<p>Let’s add the rest of Alexander’s titles while we’re at it:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="nv">"Alexander"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"Hegemon"</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Alexander"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"King of Macedon"</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Alexander"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"King of Persia"</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Alexander"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"Pharaoh of Egypt"</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"Alexander"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"Lord of Asia"</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Resource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">hegemon</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putResource</span><span class="o">(</span><span class="s">"Hegemon"</span><span class="o">,</span> <span class="n">title</span><span class="o">);</span>
<span class="n">Resource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">kingOfMacedon</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putResource</span><span class="o">(</span><span class="s">"King of Macedon"</span><span class="o">,</span> <span class="n">title</span><span class="o">);</span>
<span class="n">Resource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">shahOfPersia</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putResource</span><span class="o">(</span><span class="s">"Shah of Persia"</span><span class="o">,</span> <span class="n">title</span><span class="o">);</span>
<span class="n">Resource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">pharaohOfEgypt</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putResource</span><span class="o">(</span><span class="s">"Pharaoh of Egypt"</span><span class="o">,</span> <span class="n">title</span><span class="o">);</span>
<span class="n">Resource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">lordOfAsia</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putResource</span><span class="o">(</span><span class="s">"Lord of Asia"</span><span class="o">,</span> <span class="n">title</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">hasTitle</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleOwner</span><span class="o">,</span> <span class="n">alexander</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleValue</span><span class="o">,</span> <span class="n">hegemon</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">hasTitle</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleOwner</span><span class="o">,</span> <span class="n">alexander</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleValue</span><span class="o">,</span> <span class="n">kingOfMacedon</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">hasTitle</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleOwner</span><span class="o">,</span> <span class="n">alexander</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleValue</span><span class="o">,</span> <span class="n">shahOfPersia</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">hasTitle</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleOwner</span><span class="o">,</span> <span class="n">alexander</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleValue</span><span class="o">,</span> <span class="n">pharaohOfEgypt</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">hasTitle</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleOwner</span><span class="o">,</span> <span class="n">alexander</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">hasTitleValue</span><span class="o">,</span> <span class="n">lordOfAsia</span><span class="o">);</span>
</code></pre>
</div>

<p>Now we can query for people, with their id and titles:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">match</span> <span class="err">$</span><span class="n">x</span> <span class="n">isa</span> <span class="n">person</span> <span class="k">select</span> <span class="err">$</span><span class="n">x</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">has</span> <span class="n">title</span><span class="p">)</span>

<span class="err">$</span><span class="n">x</span> <span class="n">id</span> <span class="nv">"Socrates"</span><span class="p">;</span>
<span class="err">$</span><span class="n">x</span> <span class="n">id</span> <span class="nv">"Plato"</span><span class="p">;</span>
<span class="err">$</span><span class="n">x</span> <span class="n">id</span> <span class="nv">"Aristotle"</span><span class="p">;</span>
<span class="err">$</span><span class="n">x</span> <span class="n">id</span> <span class="nv">"Alexander"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"Pharaoh of Egypt"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"Hegeon"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"Shah of Persia"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"King of Macedon"</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"Lord of Asia"</span><span class="p">;</span>
</code></pre>
</div>

<p>Wait, who’s the Pharaoh again?</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">match</span> <span class="err">$</span><span class="n">pharaoh</span> <span class="n">has</span> <span class="n">title</span> <span class="nv">"Pharaoh of Egypt"</span>

<span class="err">$</span><span class="n">pharaoh</span> <span class="n">id</span> <span class="nv">"Alexander"</span> <span class="n">isa</span> <span class="n">person</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">pharaohOfEgypt</span><span class="o">.</span><span class="na">ownerInstances</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">instance</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"    -&gt;"</span> <span class="o">+</span> <span class="n">instance</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
<span class="o">});</span> <span class="c1">//Pssssstttt Graql is much better at querying relationships!!</span>
</code></pre>
</div>

<blockquote>
  <p><strong>Predicates</strong></p>

  <p>When querying for an id, value or resource you can use predicates as well as
direct values. For example, <code class="highlighter-rouge">has epithet contains "Great"</code>. See if you can
write a query for everyone with a title containing “King”.</p>
</blockquote>

<h2 id="relations-as-role-players">Relations as Role players</h2>

<p>Philosophers know lots of things. We should probably include this in our
ontology.</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="n">knowledge</span> <span class="n">isa</span> <span class="n">relation</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">thinker</span> <span class="n">isa</span> <span class="k">role</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">thought</span> <span class="n">isa</span> <span class="k">role</span><span class="o">-</span><span class="k">type</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">knowledge</span> <span class="n">has</span><span class="o">-</span><span class="k">role</span> <span class="n">thinker</span><span class="p">,</span> <span class="n">has</span><span class="o">-</span><span class="k">role</span> <span class="n">thought</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">fact</span> <span class="n">isa</span> <span class="n">entity</span><span class="o">-</span><span class="k">type</span><span class="p">,</span> <span class="n">plays</span><span class="o">-</span><span class="k">role</span> <span class="n">thought</span><span class="p">;</span>
<span class="k">insert</span> <span class="n">person</span> <span class="n">plays</span><span class="o">-</span><span class="k">role</span> <span class="n">thinker</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">RoleType</span> <span class="n">thinker</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"thinker"</span><span class="o">);</span>
<span class="n">RoleType</span> <span class="n">thought</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRoleType</span><span class="o">(</span><span class="s">"thought"</span><span class="o">);</span>
<span class="n">RelationType</span> <span class="n">knowledge</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelationType</span><span class="o">(</span><span class="s">"knowledge"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">hasRole</span><span class="o">(</span><span class="n">thinker</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="n">thought</span><span class="o">);</span>
<span class="n">EntityType</span> <span class="n">fact</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntitytType</span><span class="o">(</span><span class="s">"fact"</span><span class="o">).</span><span class="na">playsRole</span><span class="o">(</span><span class="n">thought</span><span class="o">);</span>
<span class="n">person</span><span class="o">.</span><span class="na">playsRole</span><span class="o">(</span><span class="n">thinker</span><span class="o">);</span>
</code></pre>
</div>

<p>Aristotle knew some astronomy, Plato knew a lot about caves and Socrates didn’t
really know anything at all.</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="nv">"sun-fact"</span> <span class="n">isa</span> <span class="n">fact</span><span class="p">,</span> <span class="n">value</span> <span class="nv">"The Sun is bigger than the Earth"</span><span class="p">;</span>
<span class="k">insert</span> <span class="p">(</span><span class="n">thinker</span> <span class="nv">"Aristotle"</span><span class="p">,</span> <span class="n">thought</span> <span class="nv">"sun-fact"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">knowledge</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"cave-fact"</span> <span class="n">isa</span> <span class="n">fact</span><span class="p">,</span> <span class="n">value</span> <span class="nv">"Caves are mostly pretty dark"</span><span class="p">;</span>
<span class="k">insert</span> <span class="p">(</span><span class="n">thinker</span> <span class="nv">"Plato"</span><span class="p">,</span> <span class="n">thought</span> <span class="nv">"cave-fact"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">knowledge</span><span class="p">;</span>
<span class="k">insert</span> <span class="nv">"nothing"</span> <span class="n">isa</span> <span class="n">fact</span><span class="p">;</span>
<span class="k">insert</span> <span class="p">(</span><span class="n">thinker</span> <span class="nv">"Socrates"</span><span class="p">,</span> <span class="n">thought</span> <span class="nv">"nothing"</span><span class="p">)</span> <span class="n">isa</span> <span class="n">knowledge</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Entity</span> <span class="n">sunFact</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"sun-fact"</span><span class="o">,</span> <span class="n">fact</span><span class="o">).</span><span class="na">setValue</span><span class="o">(</span><span class="s">"The Sun is bigger than the Earth"</span><span class="o">);</span>
<span class="n">Entity</span> <span class="n">caveFact</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"cave-fact"</span><span class="o">,</span> <span class="n">fact</span><span class="o">).</span><span class="na">setValue</span><span class="o">(</span><span class="s">"Caves are mostly pretty dark"</span><span class="o">);</span>
<span class="n">Entity</span> <span class="n">nothing</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putEntity</span><span class="o">(</span><span class="s">"nothing"</span><span class="o">,</span> <span class="n">fact</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">knowledge</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">thinker</span><span class="o">,</span> <span class="n">aristotle</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">thought</span><span class="o">,</span> <span class="n">sunFact</span><span class="o">);</span>
<span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">knowledge</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">thinker</span><span class="o">,</span> <span class="n">plato</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">thought</span><span class="o">,</span> <span class="n">caveFact</span><span class="o">);</span>
<span class="n">Relation</span> <span class="n">socratesKnowsNothing</span> <span class="o">=</span> <span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">knowledge</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">thinker</span><span class="o">,</span> <span class="n">socrates</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">thought</span><span class="o">,</span> <span class="n">nothing</span><span class="o">);</span>
</code></pre>
</div>

<p>A relation is actually just a special kind of instance. Just like how
<code class="highlighter-rouge">Socrates</code> can be a role player, relations themselves can also be role players.</p>

<p>For example, Socrates knew nothing, but he also <em>knew</em> that he knew nothing!</p>

<p>First, we have to state that someone can think about their own knowledge:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">insert</span> <span class="n">knowledge</span> <span class="n">plays</span><span class="o">-</span><span class="k">role</span> <span class="n">thought</span><span class="p">;</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">knowledge</span><span class="o">.</span><span class="na">playsRole</span><span class="o">(</span><span class="n">thought</span><span class="o">);</span>
</code></pre>
</div>

<p>We can now give Socrates one final piece of knowledge:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">match</span> <span class="err">$</span><span class="n">socratesKnowsNothing</span> <span class="p">(</span><span class="nv">"Socrates"</span><span class="p">,</span> <span class="nv">"nothing"</span><span class="p">)</span> <span class="k">insert</span> <span class="p">(</span><span class="n">thinker</span> <span class="nv">"Socrates"</span><span class="p">,</span> <span class="n">thought</span> <span class="err">$</span><span class="n">socratesKnowsNothing</span><span class="p">)</span> <span class="n">isa</span> <span class="n">knowledge</span>
</code></pre>
</div>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">mindmapsGraph</span><span class="o">.</span><span class="na">putRelation</span><span class="o">(</span><span class="n">knowledge</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">thinker</span><span class="o">,</span> <span class="n">socrates</span><span class="o">).</span><span class="na">putRolePlayer</span><span class="o">(</span><span class="n">thought</span><span class="o">,</span> <span class="n">socratesKnowsNothing</span><span class="o">);</span>
</code></pre>
</div>

<p>Here, <code class="highlighter-rouge">socratesKnowsNothing</code> is the relation between <code class="highlighter-rouge">Socrates</code> and <code class="highlighter-rouge">nothing</code>.
We then put <code class="highlighter-rouge">socratesKnowsNothing</code> in a <em>new</em> <code class="highlighter-rouge">knowledge</code> relation as a role
player.</p>

<p>Finally, we’ll check out everything Socrates knows:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">match</span> <span class="p">(</span><span class="nv">"Socrates"</span><span class="p">,</span> <span class="err">$</span><span class="n">x</span><span class="p">)</span> <span class="n">isa</span> <span class="n">knowledge</span>

<span class="err">$</span><span class="n">x</span> <span class="n">id</span> <span class="nv">"nothing"</span> <span class="n">isa</span> <span class="n">fact</span><span class="p">;</span>
<span class="err">$</span><span class="n">x</span> <span class="n">id</span> <span class="nv">"knowledge-e387d27c-4f5e-11e6-beb8-9e71128cae77"</span> <span class="n">isa</span> <span class="n">knowledge</span><span class="p">;</span>
</code></pre>
</div>

<blockquote>
  <p><strong>knowledge-ohmygod-whatisthat-???</strong></p>

  <p>If you don’t provide an ID for something such as a relation, it will get an
automatically generated ID.</p>
</blockquote>

<p><img src="/docs/images/knowledge.png" alt="" /></p>

<blockquote>
  <p><strong>When Persisting The Data To Disk</strong></p>

  <p>Once you done make sure to use <code class="highlighter-rouge">mindmaps.sh stop &amp;&amp; mindmaps.sh clean</code> if you
would like to clean your graph quickly. <strong>Warning :</strong> This will delete all
your graphs.</p>
</blockquote>


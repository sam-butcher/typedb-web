(function(b,c){"object"===typeof module&&"object"===typeof module.exports?module.exports=b.document?c(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return c(b)}:c(b)})("undefined"!==typeof window?window:this,function(b,c){function d(b){var c=!!b&&"length"in b&&b.length,f=F.type(b);return"function"===f||F.isWindow(b)?!1:"array"===f||0===c||"number"===typeof c&&0<c&&c-1 in b}function g(b,c,f){if(F.isFunction(c))return F.grep(b,function(b,g){return!!c.call(b,
g,b)!==f});if(c.nodeType)return F.grep(b,function(b){return b===c!==f});if("string"===typeof c){if(Ha.test(c))return F.filter(c,b,f);c=F.filter(c,b)}return F.grep(b,function(b){return-1<za.call(c,b)!==f})}function f(b,c){for(;(b=b[c])&&1!==b.nodeType;);return b}function h(b){var c={};F.each(b.match(Ia)||[],function(b,f){c[f]=!0});return c}function k(){aa.removeEventListener("DOMContentLoaded",k);b.removeEventListener("load",k);F.ready()}function l(){this.expando=F.expando+l.uid++}function m(b,c,f){if(void 0===
f&&1===b.nodeType)if(f="data-"+c.replace(ta,"-$&").toLowerCase(),f=b.getAttribute(f),"string"===typeof f){try{f="true"===f?!0:"false"===f?!1:"null"===f?null:+f+""===f?+f:ga.test(f)?F.parseJSON(f):f}catch(g){}Aa.set(b,c,f)}else f=void 0;return f}function t(b,c,f,g){var d,h=1,k=20,l=g?function(){return g.cur()}:function(){return F.css(b,c,"")},m=l(),n=f&&f[3]||(F.cssNumber[c]?"":"px"),p=(F.cssNumber[c]||"px"!==n&&+m)&&Va.exec(F.css(b,c));if(p&&p[3]!==n){n=n||p[3];f=f||[];p=+m||1;do h=h||".5",p/=h,F.style(b,
c,p+n);while(h!==(h=l()/m)&&1!==h&&--k)}f&&(p=+p||+m||0,d=f[1]?p+(f[1]+1)*f[2]:+f[2],g&&(g.unit=n,g.start=p,g.end=d));return d}function u(b,c){var f="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName(c||"*"):"undefined"!==typeof b.querySelectorAll?b.querySelectorAll(c||"*"):[];return void 0===c||c&&F.nodeName(b,c)?F.merge([b],f):f}function q(b,c){for(var f=0,g=b.length;f<g;f++)ia.set(b[f],"globalEval",!c||ia.get(c[f],"globalEval"))}function n(b,c,f,g,d){for(var h,k,l,m=c.createDocumentFragment(),
n=[],p=0,r=b.length;p<r;p++)if((h=b[p])||0===h)if("object"===F.type(h))F.merge(n,h.nodeType?[h]:h);else if(Na.test(h)){k=k||m.appendChild(c.createElement("div"));l=(Rb.exec(h)||["",""])[1].toLowerCase();l=Ga[l]||Ga._default;k.innerHTML=l[1]+F.htmlPrefilter(h)+l[2];for(l=l[0];l--;)k=k.lastChild;F.merge(n,k.childNodes);k=m.firstChild;k.textContent=""}else n.push(c.createTextNode(h));m.textContent="";for(p=0;h=n[p++];)if(g&&-1<F.inArray(h,g))d&&d.push(h);else if(b=F.contains(h.ownerDocument,h),k=u(m.appendChild(h),
"script"),b&&q(k),f)for(l=0;h=k[l++];)Wa.test(h.type||"")&&f.push(h);return m}function r(){return!0}function p(){return!1}function w(){try{return aa.activeElement}catch(b){}}function v(b,c,f,g,d,h){var k,l;if("object"===typeof c){"string"!==typeof f&&(g=g||f,f=void 0);for(l in c)v(b,l,f,g,c[l],h);return b}null==g&&null==d?(d=f,g=f=void 0):null==d&&("string"===typeof f?(d=g,g=void 0):(d=g,g=f,f=void 0));if(!1===d)d=p;else if(!d)return b;1===h&&(k=d,d=function(b){F().off(b);return k.apply(this,arguments)},
d.guid=k.guid||(k.guid=F.guid++));return b.each(function(){F.event.add(this,c,d,g,f)})}function y(b,c){return F.nodeName(b,"table")&&F.nodeName(11!==c.nodeType?c:c.firstChild,"tr")?b.getElementsByTagName("tbody")[0]||b.appendChild(b.ownerDocument.createElement("tbody")):b}function A(b){b.type=(null!==b.getAttribute("type"))+"/"+b.type;return b}function x(b){var c=xc.exec(b.type);c?b.type=c[1]:b.removeAttribute("type");return b}function z(b,c){var f,g,d,h;if(1===c.nodeType){if(ia.hasData(b)&&(h=ia.access(b),
f=ia.set(c,h),h=h.events))for(d in delete f.handle,f.events={},h)for(f=0,g=h[d].length;f<g;f++)F.event.add(c,d,h[d][f]);Aa.hasData(b)&&(d=Aa.access(b),d=F.extend({},d),Aa.set(c,d))}}function D(b,c,f,g){c=qa.apply([],c);var d,h,k,l,m=0,p=b.length,r=p-1,q=c[0],t=F.isFunction(q);if(t||1<p&&"string"===typeof q&&!fa.checkClone&&ib.test(q))return b.each(function(d){var h=b.eq(d);t&&(c[0]=q.call(this,d,h.html()));D(h,c,f,g)});if(p&&(d=n(c,b[0].ownerDocument,!1,b,g),h=d.firstChild,1===d.childNodes.length&&
(d=h),h||g)){h=F.map(u(d,"script"),A);for(k=h.length;m<p;m++)l=d,m!==r&&(l=F.clone(l,!0,!0),k&&F.merge(h,u(l,"script"))),f.call(b[m],l,m);if(k)for(d=h[h.length-1].ownerDocument,F.map(h,x),m=0;m<k;m++)l=h[m],Wa.test(l.type||"")&&!ia.access(l,"globalEval")&&F.contains(d,l)&&(l.src?F._evalUrl&&F._evalUrl(l.src):F.globalEval(l.textContent.replace(Cb,"")))}return b}function B(b,c,f){for(var g=c?F.filter(c,b):b,d=0;null!=(c=g[d]);d++)f||1!==c.nodeType||F.cleanData(u(c)),c.parentNode&&(f&&F.contains(c.ownerDocument,
c)&&q(u(c,"script")),c.parentNode.removeChild(c));return b}function C(b,c){var f=F(c.createElement(b)).appendTo(c.body),g=F.css(f[0],"display");f.detach();return g}function E(b){var c=aa,f=Db[b];f||(f=C(b,c),"none"!==f&&f||(Qa=(Qa||F("<iframe frameborder='0' width='0' height='0'/>")).appendTo(c.documentElement),c=Qa[0].contentDocument,c.write(),c.close(),f=C(b,c),Qa.detach()),Db[b]=f);return f}function G(b,c,f){var g,d,h=b.style;d=(f=f||dc(b))?f.getPropertyValue(c)||f[c]:void 0;""!==d&&void 0!==d||
F.contains(b.ownerDocument,b)||(d=F.style(b,c));f&&!fa.pixelMarginRight()&&ec.test(d)&&Sb.test(c)&&(b=h.width,c=h.minWidth,g=h.maxWidth,h.minWidth=h.maxWidth=h.width=d,d=f.width,h.width=b,h.minWidth=c,h.maxWidth=g);return void 0!==d?d+"":d}function H(b,c){return{get:function(){if(b())delete this.get;else return(this.get=c).apply(this,arguments)}}}function I(b){if(b in Tc)return b;for(var c=b[0].toUpperCase()+b.slice(1),f=Uc.length;f--;)if(b=Uc[f]+c,b in Tc)return b}function L(b,c,f){return(b=Va.exec(c))?
Math.max(0,b[2]-(f||0))+(b[3]||"px"):c}function J(b,c,f,g,d){c=f===(g?"border":"content")?4:"width"===c?1:0;for(var h=0;4>c;c+=2)"margin"===f&&(h+=F.css(b,f+Ta[c],!0,d)),g?("content"===f&&(h-=F.css(b,"padding"+Ta[c],!0,d)),"margin"!==f&&(h-=F.css(b,"border"+Ta[c]+"Width",!0,d))):(h+=F.css(b,"padding"+Ta[c],!0,d),"padding"!==f&&(h+=F.css(b,"border"+Ta[c]+"Width",!0,d)));return h}function K(c,f,d){var g=!0,h="width"===f?c.offsetWidth:c.offsetHeight,k=dc(c),l="border-box"===F.css(c,"boxSizing",!1,k);
aa.msFullscreenElement&&b.top!==b&&c.getClientRects().length&&(h=Math.round(100*c.getBoundingClientRect()[f]));if(0>=h||null==h){h=G(c,f,k);if(0>h||null==h)h=c.style[f];if(ec.test(h))return h;g=l&&(fa.boxSizingReliable()||h===c.style[f]);h=parseFloat(h)||0}return h+J(c,f,d||(l?"border":"content"),g,k)+"px"}function M(b,c){for(var f,d,g,h=[],k=0,l=b.length;k<l;k++)d=b[k],d.style&&(h[k]=ia.get(d,"olddisplay"),f=d.style.display,c?(h[k]||"none"!==f||(d.style.display=""),""===d.style.display&&jb(d)&&(h[k]=
ia.access(d,"olddisplay",E(d.nodeName)))):(g=jb(d),"none"===f&&g||ia.set(d,"olddisplay",g?f:F.css(d,"display"))));for(k=0;k<l;k++)d=b[k],!d.style||c&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=c?h[k]||"":"none");return b}function P(b,c,f,d,g){return new P.prototype.init(b,c,f,d,g)}function N(){b.setTimeout(function(){db=void 0});return db=F.now()}function S(b,c){var f,d=0,g={height:b};for(c=c?1:0;4>d;d+=2-c)f=Ta[d],g["margin"+f]=g["padding"+f]=b;c&&(g.opacity=g.width=b);return g}
function U(b,c,f){for(var d,g=(V.tweeners[c]||[]).concat(V.tweeners["*"]),h=0,k=g.length;h<k;h++)if(d=g[h].call(f,c,b))return d}function W(b,c){var f,d,g,h,k;for(f in b)if(d=F.camelCase(f),g=c[d],h=b[f],F.isArray(h)&&(g=h[1],h=b[f]=h[0]),f!==d&&(b[d]=h,delete b[f]),(k=F.cssHooks[d])&&"expand"in k)for(f in h=k.expand(h),delete b[d],h)f in b||(b[f]=h[f],c[f]=g);else c[d]=g}function V(b,c,f){var d,g=0,h=V.prefilters.length,k=F.Deferred().always(function(){delete l.elem}),l=function(){if(d)return!1;for(var c=
db||N(),c=Math.max(0,m.startTime+m.duration-c),f=1-(c/m.duration||0),g=0,h=m.tweens.length;g<h;g++)m.tweens[g].run(f);k.notifyWith(b,[m,f,c]);if(1>f&&h)return c;k.resolveWith(b,[m]);return!1},m=k.promise({elem:b,props:F.extend({},c),opts:F.extend(!0,{specialEasing:{},easing:F.easing._default},f),originalProperties:c,originalOptions:f,startTime:db||N(),duration:f.duration,tweens:[],createTween:function(c,f){var d=F.Tween(b,m.opts,c,f,m.opts.specialEasing[c]||m.opts.easing);m.tweens.push(d);return d},
stop:function(c){var f=0,g=c?m.tweens.length:0;if(d)return this;for(d=!0;f<g;f++)m.tweens[f].run(1);c?(k.notifyWith(b,[m,1,0]),k.resolveWith(b,[m,c])):k.rejectWith(b,[m,c]);return this}});f=m.props;for(W(f,m.opts.specialEasing);g<h;g++)if(c=V.prefilters[g].call(m,b,f,m.opts))return F.isFunction(c.stop)&&(F._queueHooks(m.elem,m.opts.queue).stop=F.proxy(c.stop,c)),c;F.map(f,U,m);F.isFunction(m.opts.start)&&m.opts.start.call(b,m);F.fx.timer(F.extend(l,{elem:b,anim:m,queue:m.opts.queue}));return m.progress(m.opts.progress).done(m.opts.done,
m.opts.complete).fail(m.opts.fail).always(m.opts.always)}function X(b){return b.getAttribute&&b.getAttribute("class")||""}function ea(b){return function(c,f){"string"!==typeof c&&(f=c,c="*");var d,g=0,h=c.toLowerCase().match(Ia)||[];if(F.isFunction(f))for(;d=h[g++];)"+"===d[0]?(d=d.slice(1)||"*",(b[d]=b[d]||[]).unshift(f)):(b[d]=b[d]||[]).push(f)}}function da(b,c,f,d){function g(l){var m;h[l]=!0;F.each(b[l]||[],function(b,l){var n=l(c,f,d);if("string"===typeof n&&!k&&!h[n])return c.dataTypes.unshift(n),
g(n),!1;if(k)return!(m=n)});return m}var h={},k=b===ub;return g(c.dataTypes[0])||!h["*"]&&g("*")}function R(b,c){var f,d,g=F.ajaxSettings.flatOptions||{};for(f in c)void 0!==c[f]&&((g[f]?b:d||(d={}))[f]=c[f]);d&&F.extend(!0,b,d);return b}function Y(b,c,f,d){var g;if(F.isArray(c))F.each(c,function(c,g){f||Vc.test(b)?d(b,g):Y(b+"["+("object"===typeof g&&null!=g?c:"")+"]",g,f,d)});else if(f||"object"!==F.type(c))d(b,c);else for(g in c)Y(b+"["+g+"]",c[g],f,d)}function ba(b){return F.isWindow(b)?b:9===
b.nodeType&&b.defaultView}var ca=[],aa=b.document,Z=ca.slice,qa=ca.concat,ma=ca.push,za=ca.indexOf,va={},oa=va.toString,ua=va.hasOwnProperty,fa={},F=function(b,c){return new F.fn.init(b,c)},Ba=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ra=/^-ms-/,na=/-([\da-z])/gi,wa=function(b,c){return c.toUpperCase()};F.fn=F.prototype={jquery:"2.2.1",constructor:F,selector:"",length:0,toArray:function(){return Z.call(this)},get:function(b){return null!=b?0>b?this[b+this.length]:this[b]:Z.call(this)},pushStack:function(b){b=
F.merge(this.constructor(),b);b.prevObject=this;b.context=this.context;return b},each:function(b){return F.each(this,b)},map:function(b){return this.pushStack(F.map(this,function(c,f){return b.call(c,f,c)}))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var c=this.length;b=+b+(0>b?c:0);return this.pushStack(0<=b&&b<c?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:ma,
sort:ca.sort,splice:ca.splice};F.extend=F.fn.extend=function(){var b,c,f,d,g,h=arguments[0]||{},k=1,l=arguments.length,m=!1;"boolean"===typeof h&&(m=h,h=arguments[k]||{},k++);"object"===typeof h||F.isFunction(h)||(h={});k===l&&(h=this,k--);for(;k<l;k++)if(null!=(b=arguments[k]))for(c in b)f=h[c],d=b[c],h!==d&&(m&&d&&(F.isPlainObject(d)||(g=F.isArray(d)))?(g?(g=!1,f=f&&F.isArray(f)?f:[]):f=f&&F.isPlainObject(f)?f:{},h[c]=F.extend(m,f,d)):void 0!==d&&(h[c]=d));return h};F.extend({expando:"jQuery"+("2.2.1"+
Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===F.type(b)},isArray:Array.isArray,isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var c=b&&b.toString();return!F.isArray(b)&&0<=c-parseFloat(c)+1},isPlainObject:function(b){return"object"!==F.type(b)||b.nodeType||F.isWindow(b)||b.constructor&&!ua.call(b.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(b){for(var c in b)return!1;
return!0},type:function(b){return null==b?b+"":"object"===typeof b||"function"===typeof b?va[oa.call(b)]||"object":typeof b},globalEval:function(b){var c;c=eval;if(b=F.trim(b))1===b.indexOf("use strict")?(c=aa.createElement("script"),c.text=b,aa.head.appendChild(c).parentNode.removeChild(c)):c(b)},camelCase:function(b){return b.replace(ra,"ms-").replace(na,wa)},nodeName:function(b,c){return b.nodeName&&b.nodeName.toLowerCase()===c.toLowerCase()},each:function(b,c){var f,g=0;if(d(b))for(f=b.length;g<
f&&!1!==c.call(b[g],g,b[g]);g++);else for(g in b)if(!1===c.call(b[g],g,b[g]))break;return b},trim:function(b){return null==b?"":(b+"").replace(Ba,"")},makeArray:function(b,c){var f=c||[];null!=b&&(d(Object(b))?F.merge(f,"string"===typeof b?[b]:b):ma.call(f,b));return f},inArray:function(b,c,f){return null==c?-1:za.call(c,b,f)},merge:function(b,c){for(var f=+c.length,d=0,g=b.length;d<f;d++)b[g++]=c[d];b.length=g;return b},grep:function(b,c,f){for(var d=[],g=0,h=b.length,k=!f;g<h;g++)f=!c(b[g],g),f!==
k&&d.push(b[g]);return d},map:function(b,c,f){var g,h,k=0,l=[];if(d(b))for(g=b.length;k<g;k++)h=c(b[k],k,f),null!=h&&l.push(h);else for(k in b)h=c(b[k],k,f),null!=h&&l.push(h);return qa.apply([],l)},guid:1,proxy:function(b,c){var f,d;"string"===typeof c&&(f=b[c],c=b,b=f);if(F.isFunction(b))return d=Z.call(arguments,2),f=function(){return b.apply(c||this,d.concat(Z.call(arguments)))},f.guid=b.guid=b.guid||F.guid++,f},now:Date.now,support:fa});"function"===typeof Symbol&&(F.fn[Symbol.iterator]=ca[Symbol.iterator]);
F.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,c){va["[object "+c+"]"]=c.toLowerCase()});var Oa=function(b){function c(b,f,d,g){var h,k,l,m,n,r=f&&f.ownerDocument,t=f?f.nodeType:9;d=d||[];if("string"!==typeof b||!b||1!==t&&9!==t&&11!==t)return d;if(!g&&((f?f.ownerDocument||f:X)!==S&&I(f),f=f||S,F)){if(11!==t&&(m=va.exec(b)))if(h=m[1])if(9===t)if(k=f.getElementById(h)){if(k.id===h)return d.push(k),d}else return d;else{if(r&&(k=r.getElementById(h))&&
V(f,k)&&k.id===h)return d.push(k),d}else{if(m[2])return da.apply(d,f.getElementsByTagName(b)),d;if((h=m[3])&&D.getElementsByClassName&&f.getElementsByClassName)return da.apply(d,f.getElementsByClassName(h)),d}if(!(!D.qsa||ea[b+" "]||J&&J.test(b))){if(1!==t)r=f,n=b;else if("object"!==f.nodeName.toLowerCase()){(l=f.getAttribute("id"))?l=l.replace(db,"\\$&"):f.setAttribute("id",l=W);m=E(b);h=m.length;for(k=kc.test(l)?"#"+l:"[id='"+l+"']";h--;)m[h]=k+" "+q(m[h]);n=m.join(",");r=Db.test(b)&&p(f.parentNode)||
f}if(n)try{return da.apply(d,r.querySelectorAll(n)),d}catch(v){}finally{l===W&&f.removeAttribute("id")}}}return N(b.replace(Cb,"$1"),f,d,g)}function f(){function b(f,d){c.push(f+" ")>B.cacheLength&&delete b[c.shift()];return b[f+" "]=d}var c=[];return b}function d(b){b[W]=!0;return b}function g(b){var c=S.createElement("div");try{return!!b(c)}catch(f){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function h(b,c){for(var f=b.split("|"),d=f.length;d--;)B.attrHandle[f[d]]=c}function k(b,
c){var f=c&&b,d=f&&1===b.nodeType&&1===c.nodeType&&(~c.sourceIndex||-2147483648)-(~b.sourceIndex||-2147483648);if(d)return d;if(f)for(;f=f.nextSibling;)if(f===c)return-1;return b?1:-1}function l(b){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===b}}function m(b){return function(c){var f=c.nodeName.toLowerCase();return("input"===f||"button"===f)&&c.type===b}}function n(b){return d(function(c){c=+c;return d(function(f,d){for(var g,h=b([],f.length,c),k=h.length;k--;)f[g=h[k]]&&
(f[g]=!(d[g]=f[g]))})})}function p(b){return b&&"undefined"!==typeof b.getElementsByTagName&&b}function r(){}function q(b){for(var c=0,f=b.length,d="";c<f;c++)d+=b[c].value;return d}function t(b,c,f){var d=c.dir,g=f&&"parentNode"===d,h=R++;return c.first?function(c,f,h){for(;c=c[d];)if(1===c.nodeType||g)return b(c,f,h)}:function(c,f,k){var l,m,n=[Na,h];if(k)for(;c=c[d];){if((1===c.nodeType||g)&&b(c,f,k))return!0}else for(;c=c[d];)if(1===c.nodeType||g){m=c[W]||(c[W]={});m=m[c.uniqueID]||(m[c.uniqueID]=
{});if((l=m[d])&&l[0]===Na&&l[1]===h)return n[2]=l[2];m[d]=n;if(n[2]=b(c,f,k))return!0}}}function v(b){return 1<b.length?function(c,f,d){for(var g=b.length;g--;)if(!b[g](c,f,d))return!1;return!0}:b[0]}function w(b,c,f,d,g){for(var h,k=[],l=0,m=b.length,n=null!=c;l<m;l++)if(h=b[l])if(!f||f(h,d,g))k.push(h),n&&c.push(l);return k}function u(b,f,g,h,k,l){h&&!h[W]&&(h=u(h));k&&!k[W]&&(k=u(k,l));return d(function(d,l,m,n){var p,r,q=[],t=[],v=l.length,u;if(!(u=d)){u=f||"*";for(var y=m.nodeType?[m]:m,x=[],
A=0,D=y.length;A<D;A++)c(u,y[A],x);u=x}u=!b||!d&&f?u:w(u,q,b,m,n);y=g?k||(d?b:v||h)?[]:l:u;g&&g(u,y,m,n);if(h)for(p=w(y,t),h(p,[],m,n),m=p.length;m--;)if(r=p[m])y[t[m]]=!(u[t[m]]=r);if(d){if(k||b){if(k){p=[];for(m=y.length;m--;)(r=y[m])&&p.push(u[m]=r);k(null,y=[],p,n)}for(m=y.length;m--;)(r=y[m])&&-1<(p=k?ib(d,r):q[m])&&(d[p]=!(l[p]=r))}}else y=w(y===l?y.splice(v,y.length):y),k?k(null,l,y,n):da.apply(l,y)})}function y(b){var c,f,d,g=b.length,h=B.relative[b[0].type];f=h||B.relative[" "];for(var k=
h?1:0,l=t(function(b){return b===c},f,!0),m=t(function(b){return-1<ib(c,b)},f,!0),n=[function(b,f,d){b=!h&&(d||f!==G)||((c=f).nodeType?l(b,f,d):m(b,f,d));c=null;return b}];k<g;k++)if(f=B.relative[b[k].type])n=[t(v(n),f)];else{f=B.filter[b[k].type].apply(null,b[k].matches);if(f[W]){for(d=++k;d<g&&!B.relative[b[d].type];d++);return u(1<k&&v(n),1<k&&q(b.slice(0,k-1).concat({value:" "===b[k-2].type?"*":""})).replace(Cb,"$1"),f,k<d&&y(b.slice(k,d)),d<g&&y(b=b.slice(d)),d<g&&q(b))}n.push(f)}return v(n)}
function x(b,f){var g=0<f.length,h=0<b.length,k=function(d,k,l,m,n){var p,r,q,t=0,v="0",u=d&&[],y=[],x=G,A=d||h&&B.find.TAG("*",n),D=Na+=null==x?1:Math.random()||.1,z=A.length;for(n&&(G=k===S||k||n);v!==z&&null!=(p=A[v]);v++){if(h&&p){r=0;k||p.ownerDocument===S||(I(p),l=!F);for(;q=b[r++];)if(q(p,k||S,l)){m.push(p);break}n&&(Na=D)}g&&((p=!q&&p)&&t--,d&&u.push(p))}t+=v;if(g&&v!==t){for(r=0;q=f[r++];)q(u,y,k,l);if(d){if(0<t)for(;v--;)u[v]||y[v]||(y[v]=aa.call(m));y=w(y)}da.apply(m,y);n&&!d&&0<y.length&&
1<t+f.length&&c.uniqueSort(m)}n&&(Na=D,G=x);return u};return g?d(k):k}var A,D,B,z,C,E,M,N,G,P,H,I,S,U,F,J,L,K,V,W="sizzle"+1*new Date,X=b.document,Na=0,R=0,Q=f(),Ma=f(),ea=f(),Tb=function(b,c){b===c&&(H=!0);return 0},Z={}.hasOwnProperty,Y=[],aa=Y.pop,ba=Y.push,da=Y.push,nb=Y.slice,ib=function(b,c){for(var f=0,d=b.length;f<d;f++)if(b[f]===c)return f;return-1},ca=RegExp("[\\x20\\t\\r\\n\\f]+","g"),Cb=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),xc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
qa=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Fb=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),fa=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,kc=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,ma={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ga=/^(?:input|select|textarea|button)$/i,ia=/^h\d$/i,za=
/^[^{]+\{\s*\[native \w/,va=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Db=/[+~]/,db=/'|\\/g,Qa=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),oa=function(b,c,f){b="0x"+c-65536;return b!==b||f?c:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,b&1023|56320)},Sb=function(){I()};try{da.apply(Y=nb.call(X.childNodes),X.childNodes),Y[X.childNodes.length].nodeType}catch(Eb){da={apply:Y.length?function(b,c){ba.apply(b,nb.call(c))}:function(b,c){for(var f=b.length,d=
0;b[f++]=c[d++];);b.length=f-1}}}D=c.support={};C=c.isXML=function(b){return(b=b&&(b.ownerDocument||b).documentElement)?"HTML"!==b.nodeName:!1};I=c.setDocument=function(b){var c;b=b?b.ownerDocument||b:X;if(b===S||9!==b.nodeType||!b.documentElement)return S;S=b;U=S.documentElement;F=!C(S);(c=S.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",Sb,!1):c.attachEvent&&c.attachEvent("onunload",Sb));D.attributes=g(function(b){b.className="i";return!b.getAttribute("className")});D.getElementsByTagName=
g(function(b){b.appendChild(S.createComment(""));return!b.getElementsByTagName("*").length});D.getElementsByClassName=za.test(S.getElementsByClassName);D.getById=g(function(b){U.appendChild(b).id=W;return!S.getElementsByName||!S.getElementsByName(W).length});D.getById?(B.find.ID=function(b,c){if("undefined"!==typeof c.getElementById&&F){var f=c.getElementById(b);return f?[f]:[]}},B.filter.ID=function(b){var c=b.replace(Qa,oa);return function(b){return b.getAttribute("id")===c}}):(delete B.find.ID,
B.filter.ID=function(b){var c=b.replace(Qa,oa);return function(b){return(b="undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===c}});B.find.TAG=D.getElementsByTagName?function(b,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(b);if(D.qsa)return c.querySelectorAll(b)}:function(b,c){var f,d=[],g=0,h=c.getElementsByTagName(b);if("*"===b){for(;f=h[g++];)1===f.nodeType&&d.push(f);return d}return h};B.find.CLASS=D.getElementsByClassName&&function(b,
c){if("undefined"!==typeof c.getElementsByClassName&&F)return c.getElementsByClassName(b)};L=[];J=[];if(D.qsa=za.test(S.querySelectorAll))g(function(b){U.appendChild(b).innerHTML="<a id='"+W+"'></a><select id='"+W+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||J.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+W+"-]").length||J.push("~=");b.querySelectorAll(":checked").length||J.push(":checked");b.querySelectorAll("a#"+W+"+*").length||J.push(".#.+[+~]")}),g(function(b){var c=S.createElement("input");c.setAttribute("type","hidden");b.appendChild(c).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&J.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");b.querySelectorAll(":enabled").length||J.push(":enabled",":disabled");b.querySelectorAll("*,:x");J.push(",.*:")});(D.matchesSelector=
za.test(K=U.matches||U.webkitMatchesSelector||U.mozMatchesSelector||U.oMatchesSelector||U.msMatchesSelector))&&g(function(b){D.disconnectedMatch=K.call(b,"div");K.call(b,"[s!='']:x");L.push("!=",":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")});
J=J.length&&new RegExp(J.join("|"));L=L.length&&new RegExp(L.join("|"));V=(c=za.test(U.compareDocumentPosition))||za.test(U.contains)?function(b,c){var f=9===b.nodeType?b.documentElement:b,d=c&&c.parentNode;return b===d||!!(d&&1===d.nodeType&&(f.contains?f.contains(d):b.compareDocumentPosition&&b.compareDocumentPosition(d)&16))}:function(b,c){if(c)for(;c=c.parentNode;)if(c===b)return!0;return!1};Tb=c?function(b,c){if(b===c)return H=!0,0;var f=!b.compareDocumentPosition-!c.compareDocumentPosition;
if(f)return f;f=(b.ownerDocument||b)===(c.ownerDocument||c)?b.compareDocumentPosition(c):1;return f&1||!D.sortDetached&&c.compareDocumentPosition(b)===f?b===S||b.ownerDocument===X&&V(X,b)?-1:c===S||c.ownerDocument===X&&V(X,c)?1:P?ib(P,b)-ib(P,c):0:f&4?-1:1}:function(b,c){if(b===c)return H=!0,0;var f,d=0;f=b.parentNode;var g=c.parentNode,h=[b],l=[c];if(!f||!g)return b===S?-1:c===S?1:f?-1:g?1:P?ib(P,b)-ib(P,c):0;if(f===g)return k(b,c);for(f=b;f=f.parentNode;)h.unshift(f);for(f=c;f=f.parentNode;)l.unshift(f);
for(;h[d]===l[d];)d++;return d?k(h[d],l[d]):h[d]===X?-1:l[d]===X?1:0};return S};c.matches=function(b,f){return c(b,null,null,f)};c.matchesSelector=function(b,f){(b.ownerDocument||b)!==S&&I(b);f=f.replace(Fb,"='$1']");if(!(!D.matchesSelector||!F||ea[f+" "]||L&&L.test(f)||J&&J.test(f)))try{var d=K.call(b,f);if(d||D.disconnectedMatch||b.document&&11!==b.document.nodeType)return d}catch(g){}return 0<c(f,S,null,[b]).length};c.contains=function(b,c){(b.ownerDocument||b)!==S&&I(b);return V(b,c)};c.attr=
function(b,c){(b.ownerDocument||b)!==S&&I(b);var f=B.attrHandle[c.toLowerCase()],f=f&&Z.call(B.attrHandle,c.toLowerCase())?f(b,c,!F):void 0;return void 0!==f?f:D.attributes||!F?b.getAttribute(c):(f=b.getAttributeNode(c))&&f.specified?f.value:null};c.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};c.uniqueSort=function(b){var c,f=[],d=0,g=0;H=!D.detectDuplicates;P=!D.sortStable&&b.slice(0);b.sort(Tb);if(H){for(;c=b[g++];)c===b[g]&&(d=f.push(g));for(;d--;)b.splice(f[d],
1)}P=null;return b};z=c.getText=function(b){var c,f="",d=0;c=b.nodeType;if(!c)for(;c=b[d++];)f+=z(c);else if(1===c||9===c||11===c){if("string"===typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)f+=z(b)}else if(3===c||4===c)return b.nodeValue;return f};B=c.selectors={cacheLength:50,createPseudo:d,match:ma,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){b[1]=
b[1].replace(Qa,oa);b[3]=(b[3]||b[4]||b[5]||"").replace(Qa,oa);"~="===b[2]&&(b[3]=" "+b[3]+" ");return b.slice(0,4)},CHILD:function(b){b[1]=b[1].toLowerCase();"nth"===b[1].slice(0,3)?(b[3]||c.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&c.error(b[0]);return b},PSEUDO:function(b){var c,f=!b[6]&&b[2];if(ma.CHILD.test(b[0]))return null;b[3]?b[2]=b[4]||b[5]||"":f&&fa.test(f)&&(c=E(f,!0))&&(c=f.indexOf(")",f.length-c)-f.length)&&(b[0]=b[0].slice(0,
c),b[2]=f.slice(0,c));return b.slice(0,3)}},filter:{TAG:function(b){var c=b.replace(Qa,oa).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===c}},CLASS:function(b){var c=Q[b+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"),Q(b,function(b){return c.test("string"===typeof b.className&&b.className||"undefined"!==typeof b.getAttribute&&b.getAttribute("class")||"")}))},ATTR:function(b,f,d){return function(g){g=c.attr(g,
b);if(null==g)return"!="===f;if(!f)return!0;g+="";return"="===f?g===d:"!="===f?g!==d:"^="===f?d&&0===g.indexOf(d):"*="===f?d&&-1<g.indexOf(d):"$="===f?d&&g.slice(-d.length)===d:"~="===f?-1<(" "+g.replace(ca," ")+" ").indexOf(d):"|="===f?g===d||g.slice(0,d.length+1)===d+"-":!1}},CHILD:function(b,c,f,d,g){var h="nth"!==b.slice(0,3),k="last"!==b.slice(-4),l="of-type"===c;return 1===d&&0===g?function(b){return!!b.parentNode}:function(c,f,m){var n,p,r,q,t;f=h!==k?"nextSibling":"previousSibling";var v=
c.parentNode,w=l&&c.nodeName.toLowerCase();m=!m&&!l;n=!1;if(v){if(h){for(;f;){for(r=c;r=r[f];)if(l?r.nodeName.toLowerCase()===w:1===r.nodeType)return!1;t=f="only"===b&&!t&&"nextSibling"}return!0}t=[k?v.firstChild:v.lastChild];if(k&&m)for(r=v,p=r[W]||(r[W]={}),p=p[r.uniqueID]||(p[r.uniqueID]={}),n=p[b]||[],n=(q=n[0]===Na&&n[1])&&n[2],r=q&&v.childNodes[q];r=++q&&r&&r[f]||(n=q=0)||t.pop();){if(1===r.nodeType&&++n&&r===c){p[b]=[Na,q,n];break}}else if(m&&(r=c,p=r[W]||(r[W]={}),p=p[r.uniqueID]||(p[r.uniqueID]=
{}),n=p[b]||[],n=q=n[0]===Na&&n[1]),!1===n)for(;(r=++q&&r&&r[f]||(n=q=0)||t.pop())&&((l?r.nodeName.toLowerCase()!==w:1!==r.nodeType)||!++n||(m&&(p=r[W]||(r[W]={}),p=p[r.uniqueID]||(p[r.uniqueID]={}),p[b]=[Na,n]),r!==c)););n-=g;return n===d||0===n%d&&0<=n/d}}},PSEUDO:function(b,f){var g,h=B.pseudos[b]||B.setFilters[b.toLowerCase()]||c.error("unsupported pseudo: "+b);return h[W]?h(f):1<h.length?(g=[b,b,"",f],B.setFilters.hasOwnProperty(b.toLowerCase())?d(function(b,c){for(var d,g=h(b,f),k=g.length;k--;)d=
ib(b,g[k]),b[d]=!(c[d]=g[k])}):function(b){return h(b,0,g)}):h}},pseudos:{not:d(function(b){var c=[],f=[],g=M(b.replace(Cb,"$1"));return g[W]?d(function(b,c,f,d){d=g(b,null,d,[]);for(var h=b.length;h--;)if(f=d[h])b[h]=!(c[h]=f)}):function(b,d,h){c[0]=b;g(c,null,h,f);c[0]=null;return!f.pop()}}),has:d(function(b){return function(f){return 0<c(b,f).length}}),contains:d(function(b){b=b.replace(Qa,oa);return function(c){return-1<(c.textContent||c.innerText||z(c)).indexOf(b)}}),lang:d(function(b){kc.test(b||
"")||c.error("unsupported lang: "+b);b=b.replace(Qa,oa).toLowerCase();return function(c){var f;do if(f=F?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return f=f.toLowerCase(),f===b||0===f.indexOf(b+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(c){var f=b.location&&b.location.hash;return f&&f.slice(1)===c.id},root:function(b){return b===U},focus:function(b){return b===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(b.type||b.href||~b.tabIndex)},enabled:function(b){return!1===
b.disabled},disabled:function(b){return!0===b.disabled},checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===c&&!!b.selected},selected:function(b){b.parentNode&&b.parentNode.selectedIndex;return!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!B.pseudos.empty(b)},header:function(b){return ia.test(b.nodeName)},input:function(b){return ga.test(b.nodeName)},button:function(b){var c=
b.nodeName.toLowerCase();return"input"===c&&"button"===b.type||"button"===c},text:function(b){var c;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(c=b.getAttribute("type"))||"text"===c.toLowerCase())},first:n(function(){return[0]}),last:n(function(b,c){return[c-1]}),eq:n(function(b,c,f){return[0>f?f+c:f]}),even:n(function(b,c){for(var f=0;f<c;f+=2)b.push(f);return b}),odd:n(function(b,c){for(var f=1;f<c;f+=2)b.push(f);return b}),lt:n(function(b,c,f){for(c=0>f?f+c:f;0<=--c;)b.push(c);
return b}),gt:n(function(b,c,f){for(f=0>f?f+c:f;++f<c;)b.push(f);return b})}};B.pseudos.nth=B.pseudos.eq;for(A in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})B.pseudos[A]=l(A);for(A in{submit:!0,reset:!0})B.pseudos[A]=m(A);r.prototype=B.filters=B.pseudos;B.setFilters=new r;E=c.tokenize=function(b,f){var d,g,h,k,l,m,n;if(l=Ma[b+" "])return f?0:l.slice(0);l=b;m=[];for(n=B.preFilter;l;){if(!d||(g=xc.exec(l)))g&&(l=l.slice(g[0].length)||l),m.push(h=[]);d=!1;if(g=qa.exec(l))d=g.shift(),h.push({value:d,
type:g[0].replace(Cb," ")}),l=l.slice(d.length);for(k in B.filter)!(g=ma[k].exec(l))||n[k]&&!(g=n[k](g))||(d=g.shift(),h.push({value:d,type:k,matches:g}),l=l.slice(d.length));if(!d)break}return f?l.length:l?c.error(b):Ma(b,m).slice(0)};M=c.compile=function(b,c){var f,d=[],g=[],h=ea[b+" "];if(!h){c||(c=E(b));for(f=c.length;f--;)h=y(c[f]),h[W]?d.push(h):g.push(h);h=ea(b,x(g,d));h.selector=b}return h};N=c.select=function(b,c,f,d){var g,h,k,l,m="function"===typeof b&&b,n=!d&&E(b=m.selector||b);f=f||[];
if(1===n.length){h=n[0]=n[0].slice(0);if(2<h.length&&"ID"===(k=h[0]).type&&D.getById&&9===c.nodeType&&F&&B.relative[h[1].type]){c=(B.find.ID(k.matches[0].replace(Qa,oa),c)||[])[0];if(!c)return f;m&&(c=c.parentNode);b=b.slice(h.shift().value.length)}for(g=ma.needsContext.test(b)?0:h.length;g--;){k=h[g];if(B.relative[l=k.type])break;if(l=B.find[l])if(d=l(k.matches[0].replace(Qa,oa),Db.test(h[0].type)&&p(c.parentNode)||c)){h.splice(g,1);b=d.length&&q(h);if(!b)return da.apply(f,d),f;break}}}(m||M(b,n))(d,
c,!F,f,!c||Db.test(b)&&p(c.parentNode)||c);return f};D.sortStable=W.split("").sort(Tb).join("")===W;D.detectDuplicates=!!H;I();D.sortDetached=g(function(b){return b.compareDocumentPosition(S.createElement("div"))&1});g(function(b){b.innerHTML="<a href='#'></a>";return"#"===b.firstChild.getAttribute("href")})||h("type|href|height|width",function(b,c,f){if(!f)return b.getAttribute(c,"type"===c.toLowerCase()?1:2)});D.attributes&&g(function(b){b.innerHTML="<input/>";b.firstChild.setAttribute("value",
"");return""===b.firstChild.getAttribute("value")})||h("value",function(b,c,f){if(!f&&"input"===b.nodeName.toLowerCase())return b.defaultValue});g(function(b){return null==b.getAttribute("disabled")})||h("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,c,f){var d;if(!f)return!0===b[c]?c.toLowerCase():(d=b.getAttributeNode(c))&&d.specified?d.value:null});return c}(b);F.find=Oa;F.expr=Oa.selectors;F.expr[":"]=F.expr.pseudos;
F.uniqueSort=F.unique=Oa.uniqueSort;F.text=Oa.getText;F.isXMLDoc=Oa.isXML;F.contains=Oa.contains;var Ja=function(b,c,f){for(var d=[],g=void 0!==f;(b=b[c])&&9!==b.nodeType;)if(1===b.nodeType){if(g&&F(b).is(f))break;d.push(b)}return d},$a=function(b,c){for(var f=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&f.push(b);return f},Da=F.expr.match.needsContext,Xa=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ha=/^.[^:#\[\.,]*$/;F.filter=function(b,c,f){var d=c[0];f&&(b=":not("+b+")");return 1===c.length&&1===d.nodeType?
F.find.matchesSelector(d,b)?[d]:[]:F.find.matches(b,F.grep(c,function(b){return 1===b.nodeType}))};F.fn.extend({find:function(b){var c,f=this.length,d=[],g=this;if("string"!==typeof b)return this.pushStack(F(b).filter(function(){for(c=0;c<f;c++)if(F.contains(g[c],this))return!0}));for(c=0;c<f;c++)F.find(b,g[c],d);d=this.pushStack(1<f?F.unique(d):d);d.selector=this.selector?this.selector+" "+b:b;return d},filter:function(b){return this.pushStack(g(this,b||[],!1))},not:function(b){return this.pushStack(g(this,
b||[],!0))},is:function(b){return!!g(this,"string"===typeof b&&Da.test(b)?F(b):b||[],!1).length}});var Ya,ab=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(F.fn.init=function(b,c,f){var d;if(!b)return this;f=f||Ya;if("string"===typeof b){d="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:ab.exec(b);if(!d||!d[1]&&c)return!c||c.jquery?(c||f).find(b):this.constructor(c).find(b);if(d[1]){if(c=c instanceof F?c[0]:c,F.merge(this,F.parseHTML(d[1],c&&c.nodeType?c.ownerDocument||c:aa,!0)),Xa.test(d[1])&&
F.isPlainObject(c))for(d in c)if(F.isFunction(this[d]))this[d](c[d]);else this.attr(d,c[d])}else(c=aa.getElementById(d[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=aa,this.selector=b;return this}if(b.nodeType)return this.context=this[0]=b,this.length=1,this;if(F.isFunction(b))return void 0!==f.ready?f.ready(b):b(F);void 0!==b.selector&&(this.selector=b.selector,this.context=b.context);return F.makeArray(b,this)}).prototype=F.fn;Ya=F(aa);var Ka=/^(?:parents|prev(?:Until|All))/,pa={children:!0,
contents:!0,next:!0,prev:!0};F.fn.extend({has:function(b){var c=F(b,this),f=c.length;return this.filter(function(){for(var b=0;b<f;b++)if(F.contains(this,c[b]))return!0})},closest:function(b,c){for(var f,d=0,g=this.length,h=[],k=Da.test(b)||"string"!==typeof b?F(b,c||this.context):0;d<g;d++)for(f=this[d];f&&f!==c;f=f.parentNode)if(11>f.nodeType&&(k?-1<k.index(f):1===f.nodeType&&F.find.matchesSelector(f,b))){h.push(f);break}return this.pushStack(1<h.length?F.uniqueSort(h):h)},index:function(b){return b?
"string"===typeof b?za.call(F(b),this[0]):za.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,c){return this.pushStack(F.uniqueSort(F.merge(this.get(),F(b,c))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});F.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Ja(b,"parentNode")},parentsUntil:function(b,c,f){return Ja(b,"parentNode",f)},next:function(b){return f(b,
"nextSibling")},prev:function(b){return f(b,"previousSibling")},nextAll:function(b){return Ja(b,"nextSibling")},prevAll:function(b){return Ja(b,"previousSibling")},nextUntil:function(b,c,f){return Ja(b,"nextSibling",f)},prevUntil:function(b,c,f){return Ja(b,"previousSibling",f)},siblings:function(b){return $a((b.parentNode||{}).firstChild,b)},children:function(b){return $a(b.firstChild)},contents:function(b){return b.contentDocument||F.merge([],b.childNodes)}},function(b,c){F.fn[b]=function(f,d){var g=
F.map(this,c,f);"Until"!==b.slice(-5)&&(d=f);d&&"string"===typeof d&&(g=F.filter(d,g));1<this.length&&(pa[b]||F.uniqueSort(g),Ka.test(b)&&g.reverse());return this.pushStack(g)}});var Ia=/\S+/g;F.Callbacks=function(b){b="string"===typeof b?h(b):F.extend({},b);var c,f,d,g,k=[],l=[],m=-1,n=function(){g=b.once;for(d=c=!0;l.length;m=-1)for(f=l.shift();++m<k.length;)!1===k[m].apply(f[0],f[1])&&b.stopOnFalse&&(m=k.length,f=!1);b.memory||(f=!1);c=!1;g&&(k=f?[]:"")},p={add:function(){k&&(f&&!c&&(m=k.length-
1,l.push(f)),function wc(c){F.each(c,function(c,f){F.isFunction(f)?b.unique&&p.has(f)||k.push(f):f&&f.length&&"string"!==F.type(f)&&wc(f)})}(arguments),f&&!c&&n());return this},remove:function(){F.each(arguments,function(b,c){for(var f;-1<(f=F.inArray(c,k,f));)k.splice(f,1),f<=m&&m--});return this},has:function(b){return b?-1<F.inArray(b,k):0<k.length},empty:function(){k&&(k=[]);return this},disable:function(){g=l=[];k=f="";return this},disabled:function(){return!k},lock:function(){g=l=[];f||(k=f=
"");return this},locked:function(){return!!g},fireWith:function(b,f){g||(f=f||[],f=[b,f.slice?f.slice():f],l.push(f),c||n());return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!d}};return p};F.extend({Deferred:function(b){var c=[["resolve","done",F.Callbacks("once memory"),"resolved"],["reject","fail",F.Callbacks("once memory"),"rejected"],["notify","progress",F.Callbacks("memory")]],f="pending",d={state:function(){return f},always:function(){g.done(arguments).fail(arguments);
return this},then:function(){var b=arguments;return F.Deferred(function(f){F.each(c,function(c,h){var k=F.isFunction(b[c])&&b[c];g[h[1]](function(){var b=k&&k.apply(this,arguments);if(b&&F.isFunction(b.promise))b.promise().progress(f.notify).done(f.resolve).fail(f.reject);else f[h[0]+"With"](this===d?f.promise():this,k?[b]:arguments)})});b=null}).promise()},promise:function(b){return null!=b?F.extend(b,d):d}},g={};d.pipe=d.then;F.each(c,function(b,h){var k=h[2],l=h[3];d[h[1]]=k.add;l&&k.add(function(){f=
l},c[b^1][2].disable,c[2][2].lock);g[h[0]]=function(){g[h[0]+"With"](this===g?d:this,arguments);return this};g[h[0]+"With"]=k.fireWith});d.promise(g);b&&b.call(g,g);return g},when:function(b){var c=0,f=Z.call(arguments),d=f.length,g=1!==d||b&&F.isFunction(b.promise)?d:0,h=1===g?b:F.Deferred(),k=function(b,c,f){return function(d){c[b]=this;f[b]=1<arguments.length?Z.call(arguments):d;f===l?h.notifyWith(c,f):--g||h.resolveWith(c,f)}},l,m,n;if(1<d)for(l=Array(d),m=Array(d),n=Array(d);c<d;c++)f[c]&&F.isFunction(f[c].promise)?
f[c].promise().progress(k(c,m,l)).done(k(c,n,f)).fail(h.reject):--g;g||h.resolveWith(n,f);return h.promise()}});var Ra;F.fn.ready=function(b){F.ready.promise().done(b);return this};F.extend({isReady:!1,readyWait:1,holdReady:function(b){b?F.readyWait++:F.ready(!0)},ready:function(b){(!0===b?--F.readyWait:F.isReady)||(F.isReady=!0,!0!==b&&0<--F.readyWait||(Ra.resolveWith(aa,[F]),F.fn.triggerHandler&&(F(aa).triggerHandler("ready"),F(aa).off("ready"))))}});F.ready.promise=function(c){Ra||(Ra=F.Deferred(),
"complete"===aa.readyState||"loading"!==aa.readyState&&!aa.documentElement.doScroll?b.setTimeout(F.ready):(aa.addEventListener("DOMContentLoaded",k),b.addEventListener("load",k)));return Ra.promise(c)};F.ready.promise();var Q=function(b,c,f,d,g,h,k){var l=0,m=b.length,n=null==f;if("object"===F.type(f))for(l in g=!0,f)Q(b,c,l,f[l],!0,h,k);else if(void 0!==d&&(g=!0,F.isFunction(d)||(k=!0),n&&(k?(c.call(b,d),c=null):(n=c,c=function(b,c,f){return n.call(F(b),f)})),c))for(;l<m;l++)c(b[l],f,k?d:d.call(b[l],
l,c(b[l],f)));return g?b:n?c.call(b):m?c(b[0],f):h},sa=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};l.uid=1;l.prototype={register:function(b,c){var f=c||{};b.nodeType?b[this.expando]=f:Object.defineProperty(b,this.expando,{value:f,writable:!0,configurable:!0});return b[this.expando]},cache:function(b){if(!sa(b))return{};var c=b[this.expando];c||(c={},sa(b)&&(b.nodeType?b[this.expando]=c:Object.defineProperty(b,this.expando,{value:c,configurable:!0})));return c},set:function(b,
c,f){var d;b=this.cache(b);if("string"===typeof c)b[c]=f;else for(d in c)b[d]=c[d];return b},get:function(b,c){return void 0===c?this.cache(b):b[this.expando]&&b[this.expando][c]},access:function(b,c,f){if(void 0===c||c&&"string"===typeof c&&void 0===f)return f=this.get(b,c),void 0!==f?f:this.get(b,F.camelCase(c));this.set(b,c,f);return void 0!==f?f:c},remove:function(b,c){var f,d,g=b[this.expando];if(void 0!==g){if(void 0===c)this.register(b);else for(F.isArray(c)?d=c.concat(c.map(F.camelCase)):
(f=F.camelCase(c),c in g?d=[c,f]:(d=f,d=d in g?[d]:d.match(Ia)||[])),f=d.length;f--;)delete g[d[f]];if(void 0===c||F.isEmptyObject(g))b.nodeType?b[this.expando]=void 0:delete b[this.expando]}},hasData:function(b){b=b[this.expando];return void 0!==b&&!F.isEmptyObject(b)}};var ia=new l,Aa=new l,ga=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ta=/[A-Z]/g;F.extend({hasData:function(b){return Aa.hasData(b)||ia.hasData(b)},data:function(b,c,f){return Aa.access(b,c,f)},removeData:function(b,c){Aa.remove(b,c)},_data:function(b,
c,f){return ia.access(b,c,f)},_removeData:function(b,c){ia.remove(b,c)}});F.fn.extend({data:function(b,c){var f,d,g,h=this[0],k=h&&h.attributes;if(void 0===b){if(this.length&&(g=Aa.get(h),1===h.nodeType&&!ia.get(h,"hasDataAttrs"))){for(f=k.length;f--;)k[f]&&(d=k[f].name,0===d.indexOf("data-")&&(d=F.camelCase(d.slice(5)),m(h,d,g[d])));ia.set(h,"hasDataAttrs",!0)}return g}return"object"===typeof b?this.each(function(){Aa.set(this,b)}):Q(this,function(c){var f,d;if(h&&void 0===c){f=Aa.get(h,b)||Aa.get(h,
b.replace(ta,"-$&").toLowerCase());if(void 0!==f)return f;d=F.camelCase(b);f=Aa.get(h,d);if(void 0!==f)return f;f=m(h,d,void 0);if(void 0!==f)return f}else d=F.camelCase(b),this.each(function(){var f=Aa.get(this,d);Aa.set(this,d,c);-1<b.indexOf("-")&&void 0!==f&&Aa.set(this,b,c)})},null,c,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){Aa.remove(this,b)})}});F.extend({queue:function(b,c,f){var d;if(b)return c=(c||"fx")+"queue",d=ia.get(b,c),f&&(!d||F.isArray(f)?d=ia.access(b,
c,F.makeArray(f)):d.push(f)),d||[]},dequeue:function(b,c){c=c||"fx";var f=F.queue(b,c),d=f.length,g=f.shift(),h=F._queueHooks(b,c),k=function(){F.dequeue(b,c)};"inprogress"===g&&(g=f.shift(),d--);g&&("fx"===c&&f.unshift("inprogress"),delete h.stop,g.call(b,k,h));!d&&h&&h.empty.fire()},_queueHooks:function(b,c){var f=c+"queueHooks";return ia.get(b,f)||ia.access(b,f,{empty:F.Callbacks("once memory").add(function(){ia.remove(b,[c+"queue",f])})})}});F.fn.extend({queue:function(b,c){var f=2;"string"!==
typeof b&&(c=b,b="fx",f--);return arguments.length<f?F.queue(this[0],b):void 0===c?this:this.each(function(){var f=F.queue(this,b,c);F._queueHooks(this,b);"fx"===b&&"inprogress"!==f[0]&&F.dequeue(this,b)})},dequeue:function(b){return this.each(function(){F.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,c){var f,d=1,g=F.Deferred(),h=this,k=this.length,l=function(){--d||g.resolveWith(h,[h])};"string"!==typeof b&&(c=b,b=void 0);for(b=b||"fx";k--;)(f=ia.get(h[k],
b+"queueHooks"))&&f.empty&&(d++,f.empty.add(l));l();return g.promise(c)}});var eb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Va=new RegExp("^(?:([+-])=|)("+eb+")([a-z%]*)$","i"),Ta=["Top","Right","Bottom","Left"],jb=function(b,c){b=c||b;return"none"===F.css(b,"display")||!F.contains(b.ownerDocument,b)},jc=/^(?:checkbox|radio)$/i,Rb=/<([\w:-]+)/,Wa=/^$|\/(?:java|ecma)script/i,Ga={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ga.optgroup=Ga.option;Ga.tbody=Ga.tfoot=Ga.colgroup=Ga.caption=Ga.thead;Ga.th=Ga.td;var Na=/<|&#?\w+;/;(function(){var b=aa.createDocumentFragment().appendChild(aa.createElement("div")),c=aa.createElement("input");c.setAttribute("type","radio");c.setAttribute("checked","checked");c.setAttribute("name","t");b.appendChild(c);fa.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;
b.innerHTML="<textarea>x</textarea>";fa.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue})();var Tb=/^key/,Ma=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,nb=/^([^.]*)(?:\.(.+)|)/;F.event={global:{},add:function(b,c,f,d,g){var h,k,l,m,n,p,r,q,t;if(n=ia.get(b))for(f.handler&&(h=f,f=h.handler,g=h.selector),f.guid||(f.guid=F.guid++),(m=n.events)||(m=n.events={}),(k=n.handle)||(k=n.handle=function(c){return"undefined"!==typeof F&&F.event.triggered!==c.type?F.event.dispatch.apply(b,arguments):
void 0}),c=(c||"").match(Ia)||[""],n=c.length;n--;)l=nb.exec(c[n])||[],q=p=l[1],t=(l[2]||"").split(".").sort(),q&&(l=F.event.special[q]||{},q=(g?l.delegateType:l.bindType)||q,l=F.event.special[q]||{},p=F.extend({type:q,origType:p,data:d,handler:f,guid:f.guid,selector:g,needsContext:g&&F.expr.match.needsContext.test(g),namespace:t.join(".")},h),(r=m[q])||(r=m[q]=[],r.delegateCount=0,l.setup&&!1!==l.setup.call(b,d,t,k)||b.addEventListener&&b.addEventListener(q,k)),l.add&&(l.add.call(b,p),p.handler.guid||
(p.handler.guid=f.guid)),g?r.splice(r.delegateCount++,0,p):r.push(p),F.event.global[q]=!0)},remove:function(b,c,f,d,g){var h,k,l,m,n,p,r,q,t,v,w,u=ia.hasData(b)&&ia.get(b);if(u&&(m=u.events)){c=(c||"").match(Ia)||[""];for(n=c.length;n--;)if(l=nb.exec(c[n])||[],t=w=l[1],v=(l[2]||"").split(".").sort(),t){r=F.event.special[t]||{};t=(d?r.delegateType:r.bindType)||t;q=m[t]||[];l=l[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)");for(k=h=q.length;h--;)p=q[h],!g&&w!==p.origType||f&&f.guid!==p.guid||
l&&!l.test(p.namespace)||d&&d!==p.selector&&("**"!==d||!p.selector)||(q.splice(h,1),p.selector&&q.delegateCount--,r.remove&&r.remove.call(b,p));k&&!q.length&&(r.teardown&&!1!==r.teardown.call(b,v,u.handle)||F.removeEvent(b,t,u.handle),delete m[t])}else for(t in m)F.event.remove(b,t+c[n],f,d,!0);F.isEmptyObject(m)&&ia.remove(b,"handle events")}},dispatch:function(b){b=F.event.fix(b);var c,f,d,g,h=[],k=Z.call(arguments);c=(ia.get(this,"events")||{})[b.type]||[];var l=F.event.special[b.type]||{};k[0]=
b;b.delegateTarget=this;if(!l.preDispatch||!1!==l.preDispatch.call(this,b)){h=F.event.handlers.call(this,b,c);for(c=0;(g=h[c++])&&!b.isPropagationStopped();)for(b.currentTarget=g.elem,f=0;(d=g.handlers[f++])&&!b.isImmediatePropagationStopped();)if(!b.rnamespace||b.rnamespace.test(d.namespace))b.handleObj=d,b.data=d.data,d=((F.event.special[d.origType]||{}).handle||d.handler).apply(g.elem,k),void 0!==d&&!1===(b.result=d)&&(b.preventDefault(),b.stopPropagation());l.postDispatch&&l.postDispatch.call(this,
b);return b.result}},handlers:function(b,c){var f,d,g,h,k=[],l=c.delegateCount,m=b.target;if(l&&m.nodeType&&("click"!==b.type||isNaN(b.button)||1>b.button))for(;m!==this;m=m.parentNode||this)if(1===m.nodeType&&(!0!==m.disabled||"click"!==b.type)){d=[];for(f=0;f<l;f++)h=c[f],g=h.selector+" ",void 0===d[g]&&(d[g]=h.needsContext?-1<F(g,this).index(m):F.find(g,this,null,[m]).length),d[g]&&d.push(h);d.length&&k.push({elem:m,handlers:d})}l<c.length&&k.push({elem:this,handlers:c.slice(l)});return k},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(b,c){null==b.which&&(b.which=null!=c.charCode?c.charCode:c.keyCode);return b}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b,c){var f,d,g=c.button;null==b.pageX&&null!=c.clientX&&(f=b.target.ownerDocument||aa,d=f.documentElement,f=f.body,b.pageX=c.clientX+(d&&d.scrollLeft||f&&f.scrollLeft||0)-(d&&d.clientLeft||f&&f.clientLeft||0),b.pageY=
c.clientY+(d&&d.scrollTop||f&&f.scrollTop||0)-(d&&d.clientTop||f&&f.clientTop||0));b.which||void 0===g||(b.which=g&1?1:g&2?3:g&4?2:0);return b}},fix:function(b){if(b[F.expando])return b;var c,f,d;c=b.type;var g=b,h=this.fixHooks[c];h||(this.fixHooks[c]=h=Ma.test(c)?this.mouseHooks:Tb.test(c)?this.keyHooks:{});d=h.props?this.props.concat(h.props):this.props;b=new F.Event(g);for(c=d.length;c--;)f=d[c],b[f]=g[f];b.target||(b.target=aa);3===b.target.nodeType&&(b.target=b.target.parentNode);return h.filter?
h.filter(b,g):b},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===w()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&F.nodeName(this,"input"))return this.click(),!1},_default:function(b){return F.nodeName(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=
b.result)}}}};F.removeEvent=function(b,c,f){b.removeEventListener&&b.removeEventListener(c,f)};F.Event=function(b,c){if(!(this instanceof F.Event))return new F.Event(b,c);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?r:p):this.type=b;c&&F.extend(this,c);this.timeStamp=b&&b.timeStamp||F.now();this[F.expando]=!0};F.Event.prototype={constructor:F.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,
preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=r;b&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=r;b&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=r;b&&b.stopImmediatePropagation();this.stopPropagation()}};F.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,c){F.event.special[b]={delegateType:c,
bindType:c,handle:function(b){var f,d=b.relatedTarget,g=b.handleObj;if(!d||d!==this&&!F.contains(this,d))b.type=g.origType,f=g.handler.apply(this,arguments),b.type=c;return f}}});F.fn.extend({on:function(b,c,f,d){return v(this,b,c,f,d)},one:function(b,c,f,d){return v(this,b,c,f,d,1)},off:function(b,c,f){var d;if(b&&b.preventDefault&&b.handleObj)return d=b.handleObj,F(b.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"===typeof b){for(d in b)this.off(d,
c,b[d]);return this}if(!1===c||"function"===typeof c)f=c,c=void 0;!1===f&&(f=p);return this.each(function(){F.event.remove(this,b,f,c)})}});var Fb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,kc=/<script|<style|<link/i,ib=/checked\s*(?:[^=]|=\s*.checked.)/i,xc=/^true\/(.*)/,Cb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;F.extend({htmlPrefilter:function(b){return b.replace(Fb,"<$1></$2>")},clone:function(b,c,f){var d,g,h,k,l=b.cloneNode(!0),m=F.contains(b.ownerDocument,
b);if(!(fa.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||F.isXMLDoc(b)))for(k=u(l),h=u(b),d=0,g=h.length;d<g;d++){var n=h[d],p=k[d],r=p.nodeName.toLowerCase();if("input"===r&&jc.test(n.type))p.checked=n.checked;else if("input"===r||"textarea"===r)p.defaultValue=n.defaultValue}if(c)if(f)for(h=h||u(b),k=k||u(l),d=0,g=h.length;d<g;d++)z(h[d],k[d]);else z(b,l);k=u(l,"script");0<k.length&&q(k,!m&&u(b,"script"));return l},cleanData:function(b){for(var c,f,d,g=F.event.special,h=0;void 0!==(f=b[h]);h++)if(sa(f)){if(c=
f[ia.expando]){if(c.events)for(d in c.events)g[d]?F.event.remove(f,d):F.removeEvent(f,d,c.handle);f[ia.expando]=void 0}f[Aa.expando]&&(f[Aa.expando]=void 0)}}});F.fn.extend({domManip:D,detach:function(b){return B(this,b,!0)},remove:function(b){return B(this,b)},text:function(b){return Q(this,function(b){return void 0===b?F.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=b})},null,b,arguments.length)},append:function(){return D(this,
arguments,function(b){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||y(this,b).appendChild(b)})},prepend:function(){return D(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=y(this,b);c.insertBefore(b,c.firstChild)}})},before:function(){return D(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return D(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},
empty:function(){for(var b,c=0;null!=(b=this[c]);c++)1===b.nodeType&&(F.cleanData(u(b,!1)),b.textContent="");return this},clone:function(b,c){b=null==b?!1:b;c=null==c?b:c;return this.map(function(){return F.clone(this,b,c)})},html:function(b){return Q(this,function(b){var c=this[0]||{},f=0,d=this.length;if(void 0===b&&1===c.nodeType)return c.innerHTML;if("string"===typeof b&&!kc.test(b)&&!Ga[(Rb.exec(b)||["",""])[1].toLowerCase()]){b=F.htmlPrefilter(b);try{for(;f<d;f++)c=this[f]||{},1===c.nodeType&&
(F.cleanData(u(c,!1)),c.innerHTML=b);c=0}catch(g){}}c&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=[];return D(this,arguments,function(c){var f=this.parentNode;0>F.inArray(this,b)&&(F.cleanData(u(this)),f&&f.replaceChild(c,this))},b)}});F.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){F.fn[b]=function(b){for(var f=[],d=F(b),g=d.length-1,h=0;h<=g;h++)b=h===g?this:this.clone(!0),F(d[h])[c](b),
ma.apply(f,b.get());return this.pushStack(f)}});var Qa,Db={HTML:"block",BODY:"block"},Sb=/^margin/,ec=new RegExp("^("+eb+")(?!px)[a-z%]+$","i"),dc=function(c){var f=c.ownerDocument.defaultView;f&&f.opener||(f=b);return f.getComputedStyle(c)},lc=function(b,c,f,d){var g,h={};for(g in c)h[g]=b.style[g],b.style[g]=c[g];f=f.apply(b,d||[]);for(g in c)b.style[g]=h[g];return f},Ub=aa.documentElement;(function(){function c(){l.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
l.innerHTML="";Ub.appendChild(k);var m=b.getComputedStyle(l);f="1%"!==m.top;h="2px"===m.marginLeft;d="4px"===m.width;l.style.marginRight="50%";g="4px"===m.marginRight;Ub.removeChild(k)}var f,d,g,h,k=aa.createElement("div"),l=aa.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",fa.clearCloneStyle="content-box"===l.style.backgroundClip,k.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
k.appendChild(l),F.extend(fa,{pixelPosition:function(){c();return f},boxSizingReliable:function(){null==d&&c();return d},pixelMarginRight:function(){null==d&&c();return g},reliableMarginLeft:function(){null==d&&c();return h},reliableMarginRight:function(){var c,f=l.appendChild(aa.createElement("div"));f.style.cssText=l.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";f.style.marginRight=f.style.width="0";l.style.width="1px";Ub.appendChild(k);
c=!parseFloat(b.getComputedStyle(f).marginRight);Ub.removeChild(k);l.removeChild(f);return c}}))})();var Zd=/^(none|table(?!-c[ea]).+)/,$d={position:"absolute",visibility:"hidden",display:"block"},ad={letterSpacing:"0",fontWeight:"400"},Uc=["Webkit","O","Moz","ms"],Tc=aa.createElement("div").style;F.extend({cssHooks:{opacity:{get:function(b,c){if(c){var f=G(b,"opacity");return""===f?"1":f}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,
lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,c,f,d){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var g,h,k,l=F.camelCase(c),m=b.style;c=F.cssProps[l]||(F.cssProps[l]=I(l)||l);k=F.cssHooks[c]||F.cssHooks[l];if(void 0!==f)h=typeof f,"string"===h&&(g=Va.exec(f))&&g[1]&&(f=t(b,c,g),h="number"),null!=f&&f===f&&("number"===h&&(f+=g&&g[3]||(F.cssNumber[l]?"":"px")),fa.clearCloneStyle||""!==f||0!==c.indexOf("background")||(m[c]=
"inherit"),k&&"set"in k&&void 0===(f=k.set(b,f,d))||(m[c]=f));else return k&&"get"in k&&void 0!==(g=k.get(b,!1,d))?g:m[c]}},css:function(b,c,f,d){var g,h;h=F.camelCase(c);c=F.cssProps[h]||(F.cssProps[h]=I(h)||h);(h=F.cssHooks[c]||F.cssHooks[h])&&"get"in h&&(g=h.get(b,!0,f));void 0===g&&(g=G(b,c,d));"normal"===g&&c in ad&&(g=ad[c]);return""===f||f?(b=parseFloat(g),!0===f||isFinite(b)?b||0:g):g}});F.each(["height","width"],function(b,c){F.cssHooks[c]={get:function(b,f,d){if(f)return Zd.test(F.css(b,
"display"))&&0===b.offsetWidth?lc(b,$d,function(){return K(b,c,d)}):K(b,c,d)},set:function(b,f,d){var g,h=d&&dc(b);(d=d&&J(b,c,d,"border-box"===F.css(b,"boxSizing",!1,h),h))&&(g=Va.exec(f))&&"px"!==(g[3]||"px")&&(b.style[c]=f,f=F.css(b,c));return L(b,f,d)}}});F.cssHooks.marginLeft=H(fa.reliableMarginLeft,function(b,c){if(c)return(parseFloat(G(b,"marginLeft"))||b.getBoundingClientRect().left-lc(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});F.cssHooks.marginRight=H(fa.reliableMarginRight,
function(b,c){if(c)return lc(b,{display:"inline-block"},G,[b,"marginRight"])});F.each({margin:"",padding:"",border:"Width"},function(b,c){F.cssHooks[b+c]={expand:function(f){var d=0,g={};for(f="string"===typeof f?f.split(" "):[f];4>d;d++)g[b+Ta[d]+c]=f[d]||f[d-2]||f[0];return g}};Sb.test(b)||(F.cssHooks[b+c].set=L)});F.fn.extend({css:function(b,c){return Q(this,function(b,c,f){var d,g={},h=0;if(F.isArray(c)){f=dc(b);for(d=c.length;h<d;h++)g[c[h]]=F.css(b,c[h],!1,f);return g}return void 0!==f?F.style(b,
c,f):F.css(b,c)},b,c,1<arguments.length)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(b){return"boolean"===typeof b?b?this.show():this.hide():this.each(function(){jb(this)?F(this).show():F(this).hide()})}});F.Tween=P;P.prototype={constructor:P,init:function(b,c,f,d,g,h){this.elem=b;this.prop=f;this.easing=g||F.easing._default;this.options=c;this.start=this.now=this.cur();this.end=d;this.unit=h||(F.cssNumber[f]?"":"px")},cur:function(){var b=P.propHooks[this.prop];
return b&&b.get?b.get(this):P.propHooks._default.get(this)},run:function(b){var c,f=P.propHooks[this.prop];this.pos=this.options.duration?c=F.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):c=b;this.now=(this.end-this.start)*c+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);f&&f.set?f.set(this):P.propHooks._default.set(this);return this}};P.prototype.init.prototype=P.prototype;P.propHooks={_default:{get:function(b){return 1!==b.elem.nodeType||
null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(b=F.css(b.elem,b.prop,""))&&"auto"!==b?b:0},set:function(b){if(F.fx.step[b.prop])F.fx.step[b.prop](b);else 1!==b.elem.nodeType||null==b.elem.style[F.cssProps[b.prop]]&&!F.cssHooks[b.prop]?b.elem[b.prop]=b.now:F.style(b.elem,b.prop,b.now+b.unit)}}};P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};F.easing={linear:function(b){return b},swing:function(b){return.5-
Math.cos(b*Math.PI)/2},_default:"swing"};F.fx=P.prototype.init;F.fx.step={};var db,Vb,mc=/^(?:toggle|show|hide)$/,Fc=/queueHooks$/;F.Animation=F.extend(V,{tweeners:{"*":[function(b,c){var f=this.createTween(b,c);t(f.elem,b,Va.exec(c),f);return f}]},tweener:function(b,c){F.isFunction(b)?(c=b,b=["*"]):b=b.match(Ia);for(var f,d=0,g=b.length;d<g;d++)f=b[d],V.tweeners[f]=V.tweeners[f]||[],V.tweeners[f].unshift(c)},prefilters:[function(b,c,f){var d,g,h,k,l,m,n=this,p={},r=b.style,q=b.nodeType&&jb(b),t=
ia.get(b,"fxshow");f.queue||(k=F._queueHooks(b,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,n.always(function(){n.always(function(){k.unqueued--;F.queue(b,"fx").length||k.empty.fire()})}));1===b.nodeType&&("height"in c||"width"in c)&&(f.overflow=[r.overflow,r.overflowX,r.overflowY],m=F.css(b,"display"),g="none"===m?ia.get(b,"olddisplay")||E(b.nodeName):m,"inline"===g&&"none"===F.css(b,"float")&&(r.display="inline-block"));f.overflow&&
(r.overflow="hidden",n.always(function(){r.overflow=f.overflow[0];r.overflowX=f.overflow[1];r.overflowY=f.overflow[2]}));for(d in c)if(g=c[d],mc.exec(g)){delete c[d];h=h||"toggle"===g;if(g===(q?"hide":"show"))if("show"===g&&t&&void 0!==t[d])q=!0;else continue;p[d]=t&&t[d]||F.style(b,d)}else m=void 0;if(F.isEmptyObject(p))"inline"===("none"===m?E(b.nodeName):m)&&(r.display=m);else for(d in t?"hidden"in t&&(q=t.hidden):t=ia.access(b,"fxshow",{}),h&&(t.hidden=!q),q?F(b).show():n.done(function(){F(b).hide()}),
n.done(function(){var c;ia.remove(b,"fxshow");for(c in p)F.style(b,c,p[c])}),p)c=U(q?t[d]:0,d,n),d in t||(t[d]=c.start,q&&(c.end=c.start,c.start="width"===d||"height"===d?1:0))}],prefilter:function(b,c){c?V.prefilters.unshift(b):V.prefilters.push(b)}});F.speed=function(b,c,f){var d=b&&"object"===typeof b?F.extend({},b):{complete:f||!f&&c||F.isFunction(b)&&b,duration:b,easing:f&&c||c&&!F.isFunction(c)&&c};d.duration=F.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in F.fx.speeds?F.fx.speeds[d.duration]:
F.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){F.isFunction(d.old)&&d.old.call(this);d.queue&&F.dequeue(this,d.queue)};return d};F.fn.extend({fadeTo:function(b,c,f,d){return this.filter(jb).css("opacity",0).show().end().animate({opacity:c},b,f,d)},animate:function(b,c,f,d){var g=F.isEmptyObject(b),h=F.speed(c,f,d);c=function(){var c=V(this,F.extend({},b),h);(g||ia.get(this,"finish"))&&c.stop(!0)};c.finish=c;return g||!1===h.queue?this.each(c):
this.queue(h.queue,c)},stop:function(b,c,f){var d=function(b){var c=b.stop;delete b.stop;c(f)};"string"!==typeof b&&(f=c,c=b,b=void 0);c&&!1!==b&&this.queue(b||"fx",[]);return this.each(function(){var c=!0,g=null!=b&&b+"queueHooks",h=F.timers,k=ia.get(this);if(g)k[g]&&k[g].stop&&d(k[g]);else for(g in k)k[g]&&k[g].stop&&Fc.test(g)&&d(k[g]);for(g=h.length;g--;)h[g].elem!==this||null!=b&&h[g].queue!==b||(h[g].anim.stop(f),c=!1,h.splice(g,1));!c&&f||F.dequeue(this,b)})},finish:function(b){!1!==b&&(b=
b||"fx");return this.each(function(){var c,f=ia.get(this),d=f[b+"queue"];c=f[b+"queueHooks"];var g=F.timers,h=d?d.length:0;f.finish=!0;F.queue(this,b,[]);c&&c.stop&&c.stop.call(this,!0);for(c=g.length;c--;)g[c].elem===this&&g[c].queue===b&&(g[c].anim.stop(!0),g.splice(c,1));for(c=0;c<h;c++)d[c]&&d[c].finish&&d[c].finish.call(this);delete f.finish})}});F.each(["toggle","show","hide"],function(b,c){var f=F.fn[c];F.fn[c]=function(b,d,g){return null==b||"boolean"===typeof b?f.apply(this,arguments):this.animate(S(c,
!0),b,d,g)}});F.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,c){F.fn[b]=function(b,f,d){return this.animate(c,b,f,d)}});F.timers=[];F.fx.tick=function(){var b,c=0,f=F.timers;for(db=F.now();c<f.length;c++)b=f[c],b()||f[c]!==b||f.splice(c--,1);f.length||F.fx.stop();db=void 0};F.fx.timer=function(b){F.timers.push(b);b()?F.fx.start():F.timers.pop()};F.fx.interval=13;F.fx.start=function(){Vb||
(Vb=b.setInterval(F.fx.tick,F.fx.interval))};F.fx.stop=function(){b.clearInterval(Vb);Vb=null};F.fx.speeds={slow:600,fast:200,_default:400};F.fn.delay=function(c,f){c=F.fx?F.fx.speeds[c]||c:c;return this.queue(f||"fx",function(f,d){var g=b.setTimeout(f,c);d.stop=function(){b.clearTimeout(g)}})};(function(){var b=aa.createElement("input"),c=aa.createElement("select"),f=c.appendChild(aa.createElement("option"));b.type="checkbox";fa.checkOn=""!==b.value;fa.optSelected=f.selected;c.disabled=!0;fa.optDisabled=
!f.disabled;b=aa.createElement("input");b.value="t";b.type="radio";fa.radioValue="t"===b.value})();var Gc,Wb=F.expr.attrHandle;F.fn.extend({attr:function(b,c){return Q(this,F.attr,b,c,1<arguments.length)},removeAttr:function(b){return this.each(function(){F.removeAttr(this,b)})}});F.extend({attr:function(b,c,f){var d,g,h=b.nodeType;if(3!==h&&8!==h&&2!==h){if("undefined"===typeof b.getAttribute)return F.prop(b,c,f);1===h&&F.isXMLDoc(b)||(c=c.toLowerCase(),g=F.attrHooks[c]||(F.expr.match.bool.test(c)?
Gc:void 0));if(void 0!==f){if(null===f){F.removeAttr(b,c);return}if(g&&"set"in g&&void 0!==(d=g.set(b,f,c)))return d;b.setAttribute(c,f+"");return f}if(g&&"get"in g&&null!==(d=g.get(b,c)))return d;d=F.find.attr(b,c);return null==d?void 0:d}},attrHooks:{type:{set:function(b,c){if(!fa.radioValue&&"radio"===c&&F.nodeName(b,"input")){var f=b.value;b.setAttribute("type",c);f&&(b.value=f);return c}}}},removeAttr:function(b,c){var f,d,g=0,h=c&&c.match(Ia);if(h&&1===b.nodeType)for(;f=h[g++];)d=F.propFix[f]||
f,F.expr.match.bool.test(f)&&(b[d]=!1),b.removeAttribute(f)}});Gc={set:function(b,c,f){!1===c?F.removeAttr(b,f):b.setAttribute(f,f);return f}};F.each(F.expr.match.bool.source.match(/\w+/g),function(b,c){var f=Wb[c]||F.find.attr;Wb[c]=function(b,c,d){var g,h;d||(h=Wb[c],Wb[c]=g,g=null!=f(b,c,d)?c.toLowerCase():null,Wb[c]=h);return g}});var wb=/^(?:input|select|textarea|button)$/i,nc=/^(?:a|area)$/i;F.fn.extend({prop:function(b,c){return Q(this,F.prop,b,c,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[F.propFix[b]||
b]})}});F.extend({prop:function(b,c,f){var d,g,h=b.nodeType;if(3!==h&&8!==h&&2!==h)return 1===h&&F.isXMLDoc(b)||(c=F.propFix[c]||c,g=F.propHooks[c]),void 0!==f?g&&"set"in g&&void 0!==(d=g.set(b,f,c))?d:b[c]=f:g&&"get"in g&&null!==(d=g.get(b,c))?d:b[c]},propHooks:{tabIndex:{get:function(b){var c=F.find.attr(b,"tabindex");return c?parseInt(c,10):wb.test(b.nodeName)||nc.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});fa.optSelected||(F.propHooks.selected={get:function(b){(b=
b.parentNode)&&b.parentNode&&b.parentNode.selectedIndex;return null}});F.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){F.propFix[this.toLowerCase()]=this});var ob=/[\t\r\n\f]/g;F.fn.extend({addClass:function(b){var c,f,d,g,h,k,l=0;if(F.isFunction(b))return this.each(function(c){F(this).addClass(b.call(this,c,X(this)))});if("string"===typeof b&&b)for(c=b.match(Ia)||[];f=this[l++];)if(g=X(f),d=1===f.nodeType&&(" "+
g+" ").replace(ob," ")){for(k=0;h=c[k++];)0>d.indexOf(" "+h+" ")&&(d+=h+" ");d=F.trim(d);g!==d&&f.setAttribute("class",d)}return this},removeClass:function(b){var c,f,d,g,h,k,l=0;if(F.isFunction(b))return this.each(function(c){F(this).removeClass(b.call(this,c,X(this)))});if(!arguments.length)return this.attr("class","");if("string"===typeof b&&b)for(c=b.match(Ia)||[];f=this[l++];)if(g=X(f),d=1===f.nodeType&&(" "+g+" ").replace(ob," ")){for(k=0;h=c[k++];)for(;-1<d.indexOf(" "+h+" ");)d=d.replace(" "+
h+" "," ");d=F.trim(d);g!==d&&f.setAttribute("class",d)}return this},toggleClass:function(b,c){var f=typeof b;return"boolean"===typeof c&&"string"===f?c?this.addClass(b):this.removeClass(b):F.isFunction(b)?this.each(function(f){F(this).toggleClass(b.call(this,f,X(this),c),c)}):this.each(function(){var c,d,g,h;if("string"===f)for(d=0,g=F(this),h=b.match(Ia)||[];c=h[d++];)g.hasClass(c)?g.removeClass(c):g.addClass(c);else if(void 0===b||"boolean"===f)(c=X(this))&&ia.set(this,"__className__",c),this.setAttribute&&
this.setAttribute("class",c||!1===b?"":ia.get(this,"__className__")||"")})},hasClass:function(b){var c,f=0;for(b=" "+b+" ";c=this[f++];)if(1===c.nodeType&&-1<(" "+X(c)+" ").replace(ob," ").indexOf(b))return!0;return!1}});var Hc=/\r/g;F.fn.extend({val:function(b){var c,f,d,g=this[0];if(arguments.length)return d=F.isFunction(b),this.each(function(f){1===this.nodeType&&(f=d?b.call(this,f,F(this).val()):b,null==f?f="":"number"===typeof f?f+="":F.isArray(f)&&(f=F.map(f,function(b){return null==b?"":b+
""})),c=F.valHooks[this.type]||F.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,f,"value")||(this.value=f))});if(g){if((c=F.valHooks[g.type]||F.valHooks[g.nodeName.toLowerCase()])&&"get"in c&&void 0!==(f=c.get(g,"value")))return f;f=g.value;return"string"===typeof f?f.replace(Hc,""):null==f?"":f}}});F.extend({valHooks:{option:{get:function(b){return F.trim(b.value)}},select:{get:function(b){for(var c,f=b.options,d=b.selectedIndex,g=(b="select-one"===b.type||0>d)?null:[],h=
b?d+1:f.length,k=0>d?h:b?d:0;k<h;k++)if(c=f[k],!(!c.selected&&k!==d||(fa.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&F.nodeName(c.parentNode,"optgroup"))){c=F(c).val();if(b)return c;g.push(c)}return g},set:function(b,c){for(var f,d,g=b.options,h=F.makeArray(c),k=g.length;k--;)if(d=g[k],d.selected=-1<F.inArray(F.valHooks.option.get(d),h))f=!0;f||(b.selectedIndex=-1);return h}}}});F.each(["radio","checkbox"],function(){F.valHooks[this]={set:function(b,c){if(F.isArray(c))return b.checked=
-1<F.inArray(F(b).val(),c)}};fa.checkOn||(F.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var Xb=/^(?:focusinfocus|focusoutblur)$/;F.extend(F.event,{trigger:function(c,f,d,g){var h,k,l,m,n,p,r=[d||aa],q=ua.call(c,"type")?c.type:c;p=ua.call(c,"namespace")?c.namespace.split("."):[];k=h=d=d||aa;if(3!==d.nodeType&&8!==d.nodeType&&!Xb.test(q+F.event.triggered)&&(-1<q.indexOf(".")&&(p=q.split("."),q=p.shift(),p.sort()),m=0>q.indexOf(":")&&"on"+q,c=c[F.expando]?c:
new F.Event(q,"object"===typeof c&&c),c.isTrigger=g?2:3,c.namespace=p.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=d),f=null==f?[c]:F.makeArray(f,[c]),p=F.event.special[q]||{},g||!p.trigger||!1!==p.trigger.apply(d,f))){if(!g&&!p.noBubble&&!F.isWindow(d)){l=p.delegateType||q;Xb.test(l+q)||(k=k.parentNode);for(;k;k=k.parentNode)r.push(k),h=k;h===(d.ownerDocument||aa)&&r.push(h.defaultView||h.parentWindow||b)}for(h=
0;(k=r[h++])&&!c.isPropagationStopped();)c.type=1<h?l:p.bindType||q,(n=(ia.get(k,"events")||{})[c.type]&&ia.get(k,"handle"))&&n.apply(k,f),(n=m&&k[m])&&n.apply&&sa(k)&&(c.result=n.apply(k,f),!1===c.result&&c.preventDefault());c.type=q;g||c.isDefaultPrevented()||p._default&&!1!==p._default.apply(r.pop(),f)||!sa(d)||!m||!F.isFunction(d[q])||F.isWindow(d)||((h=d[m])&&(d[m]=null),F.event.triggered=q,d[q](),F.event.triggered=void 0,h&&(d[m]=h));return c.result}},simulate:function(b,c,f){b=F.extend(new F.Event,
f,{type:b,isSimulated:!0});F.event.trigger(b,null,c);b.isDefaultPrevented()&&f.preventDefault()}});F.fn.extend({trigger:function(b,c){return this.each(function(){F.event.trigger(b,c,this)})},triggerHandler:function(b,c){var f=this[0];if(f)return F.event.trigger(b,c,f,!0)}});F.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(b,
c){F.fn[c]=function(b,f){return 0<arguments.length?this.on(c,null,b,f):this.trigger(c)}});F.fn.extend({hover:function(b,c){return this.mouseenter(b).mouseleave(c||b)}});fa.focusin="onfocusin"in b;fa.focusin||F.each({focus:"focusin",blur:"focusout"},function(b,c){var f=function(b){F.event.simulate(c,b.target,F.event.fix(b))};F.event.special[c]={setup:function(){var d=this.ownerDocument||this,g=ia.access(d,c);g||d.addEventListener(b,f,!0);ia.access(d,c,(g||0)+1)},teardown:function(){var d=this.ownerDocument||
this,g=ia.access(d,c)-1;g?ia.access(d,c,g):(d.removeEventListener(b,f,!0),ia.remove(d,c))}}});var pb=b.location,Gb=F.now(),Hb=/\?/;F.parseJSON=function(b){return JSON.parse(b+"")};F.parseXML=function(c){var f;if(!c||"string"!==typeof c)return null;try{f=(new b.DOMParser).parseFromString(c,"text/xml")}catch(d){f=void 0}f&&!f.getElementsByTagName("parsererror").length||F.error("Invalid XML: "+c);return f};var Ic=/#.*$/,Ib=/([?&])_=[^&]*/,bd=/^(.*?):[ \t]*([^\r\n]*)$/mg,cd=/^(?:GET|HEAD)$/,ae=/^\/\//,
Jc={},ub={},Kc="*/".concat("*"),oc=aa.createElement("a");oc.href=pb.href;F.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pb.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},
responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":F.parseJSON,"text xml":F.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,c){return c?R(R(b,F.ajaxSettings),c):R(F.ajaxSettings,b)},ajaxPrefilter:ea(Jc),ajaxTransport:ea(ub),ajax:function(c,f){function d(c,f,l,n){var r,x,A,B;B=f;if(2!==D){D=2;m&&b.clearTimeout(m);g=void 0;k=n||"";z.readyState=0<c?4:0;n=200<=c&&300>c||304===c;if(l){A=q;for(var C=z,E,M,N,G,
P=A.contents,H=A.dataTypes;"*"===H[0];)H.shift(),void 0===E&&(E=A.mimeType||C.getResponseHeader("Content-Type"));if(E)for(M in P)if(P[M]&&P[M].test(E)){H.unshift(M);break}if(H[0]in l)N=H[0];else{for(M in l){if(!H[0]||A.converters[M+" "+H[0]]){N=M;break}G||(G=M)}N=N||G}N?(N!==H[0]&&H.unshift(N),A=l[N]):A=void 0}a:{l=q;E=A;M=z;N=n;var S,I,U,C={},P=l.dataTypes.slice();if(P[1])for(I in l.converters)C[I.toLowerCase()]=l.converters[I];for(G=P.shift();G;)if(l.responseFields[G]&&(M[l.responseFields[G]]=E),
!U&&N&&l.dataFilter&&(E=l.dataFilter(E,l.dataType)),U=G,G=P.shift())if("*"===G)G=U;else if("*"!==U&&U!==G){I=C[U+" "+G]||C["* "+G];if(!I)for(S in C)if(A=S.split(" "),A[1]===G&&(I=C[U+" "+A[0]]||C["* "+A[0]])){!0===I?I=C[S]:!0!==C[S]&&(G=A[0],P.unshift(A[1]));break}if(!0!==I)if(I&&l["throws"])E=I(E);else try{E=I(E)}catch(J){A={state:"parsererror",error:I?J:"No conversion from "+U+" to "+G};break a}}A={state:"success",data:E}}if(n)q.ifModified&&((B=z.getResponseHeader("Last-Modified"))&&(F.lastModified[h]=
B),(B=z.getResponseHeader("etag"))&&(F.etag[h]=B)),204===c||"HEAD"===q.type?B="nocontent":304===c?B="notmodified":(B=A.state,r=A.data,x=A.error,n=!x);else if(x=B,c||!B)B="error",0>c&&(c=0);z.status=c;z.statusText=(f||B)+"";n?w.resolveWith(t,[r,B,z]):w.rejectWith(t,[z,B,x]);z.statusCode(y);y=void 0;p&&v.trigger(n?"ajaxSuccess":"ajaxError",[z,q,n?r:x]);u.fireWith(t,[z,B]);p&&(v.trigger("ajaxComplete",[z,q]),--F.active||F.event.trigger("ajaxStop"))}}"object"===typeof c&&(f=c,c=void 0);f=f||{};var g,
h,k,l,m,n,p,r,q=F.ajaxSetup({},f),t=q.context||q,v=q.context&&(t.nodeType||t.jquery)?F(t):F.event,w=F.Deferred(),u=F.Callbacks("once memory"),y=q.statusCode||{},x={},A={},D=0,B="canceled",z={readyState:0,getResponseHeader:function(b){var c;if(2===D){if(!l)for(l={};c=bd.exec(k);)l[c[1].toLowerCase()]=c[2];c=l[b.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return 2===D?k:null},setRequestHeader:function(b,c){var f=b.toLowerCase();D||(b=A[f]=A[f]||b,x[b]=c);return this},overrideMimeType:function(b){D||
(q.mimeType=b);return this},statusCode:function(b){var c;if(b)if(2>D)for(c in b)y[c]=[y[c],b[c]];else z.always(b[z.status]);return this},abort:function(b){b=b||B;g&&g.abort(b);d(0,b);return this}};w.promise(z).complete=u.add;z.success=z.done;z.error=z.fail;q.url=((c||q.url||pb.href)+"").replace(Ic,"").replace(ae,pb.protocol+"//");q.type=f.method||f.type||q.method||q.type;q.dataTypes=F.trim(q.dataType||"*").toLowerCase().match(Ia)||[""];if(null==q.crossDomain){n=aa.createElement("a");try{n.href=q.url,
n.href=n.href,q.crossDomain=oc.protocol+"//"+oc.host!==n.protocol+"//"+n.host}catch(C){q.crossDomain=!0}}q.data&&q.processData&&"string"!==typeof q.data&&(q.data=F.param(q.data,q.traditional));da(Jc,q,f,z);if(2===D)return z;(p=F.event&&q.global)&&0===F.active++&&F.event.trigger("ajaxStart");q.type=q.type.toUpperCase();q.hasContent=!cd.test(q.type);h=q.url;q.hasContent||(q.data&&(h=q.url+=(Hb.test(h)?"&":"?")+q.data,delete q.data),!1===q.cache&&(q.url=Ib.test(h)?h.replace(Ib,"$1_="+Gb++):h+(Hb.test(h)?
"&":"?")+"_="+Gb++));q.ifModified&&(F.lastModified[h]&&z.setRequestHeader("If-Modified-Since",F.lastModified[h]),F.etag[h]&&z.setRequestHeader("If-None-Match",F.etag[h]));(q.data&&q.hasContent&&!1!==q.contentType||f.contentType)&&z.setRequestHeader("Content-Type",q.contentType);z.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+("*"!==q.dataTypes[0]?", "+Kc+"; q=0.01":""):q.accepts["*"]);for(r in q.headers)z.setRequestHeader(r,q.headers[r]);if(q.beforeSend&&
(!1===q.beforeSend.call(t,z,q)||2===D))return z.abort();B="abort";for(r in{success:1,error:1,complete:1})z[r](q[r]);if(g=da(ub,q,f,z)){z.readyState=1;p&&v.trigger("ajaxSend",[z,q]);if(2===D)return z;q.async&&0<q.timeout&&(m=b.setTimeout(function(){z.abort("timeout")},q.timeout));try{D=1,g.send(x,d)}catch(C){if(2>D)d(-1,C);else throw C;}}else d(-1,"No Transport");return z},getJSON:function(b,c,f){return F.get(b,c,f,"json")},getScript:function(b,c){return F.get(b,void 0,c,"script")}});F.each(["get",
"post"],function(b,c){F[c]=function(b,f,d,g){F.isFunction(f)&&(g=g||d,d=f,f=void 0);return F.ajax(F.extend({url:b,type:c,dataType:g,data:f,success:d},F.isPlainObject(b)&&b))}});F._evalUrl=function(b){return F.ajax({url:b,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};F.fn.extend({wrapAll:function(b){var c;if(F.isFunction(b))return this.each(function(c){F(this).wrapAll(b.call(this,c))});this[0]&&(c=F(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),
c.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this));return this},wrapInner:function(b){return F.isFunction(b)?this.each(function(c){F(this).wrapInner(b.call(this,c))}):this.each(function(){var c=F(this),f=c.contents();f.length?f.wrapAll(b):c.append(b)})},wrap:function(b){var c=F.isFunction(b);return this.each(function(f){F(this).wrapAll(c?b.call(this,f):b)})},unwrap:function(){return this.parent().each(function(){F.nodeName(this,"body")||F(this).replaceWith(this.childNodes)}).end()}});
F.expr.filters.hidden=function(b){return!F.expr.filters.visible(b)};F.expr.filters.visible=function(b){return 0<b.offsetWidth||0<b.offsetHeight||0<b.getClientRects().length};var pc=/%20/g,Vc=/\[\]$/,dd=/\r?\n/g,ed=/^(?:submit|button|image|reset|file)$/i,be=/^(?:input|select|textarea|keygen)/i;F.param=function(b,c){var f,d=[],g=function(b,c){c=F.isFunction(c)?c():null==c?"":c;d[d.length]=encodeURIComponent(b)+"="+encodeURIComponent(c)};void 0===c&&(c=F.ajaxSettings&&F.ajaxSettings.traditional);if(F.isArray(b)||
b.jquery&&!F.isPlainObject(b))F.each(b,function(){g(this.name,this.value)});else for(f in b)Y(f,b[f],c,g);return d.join("&").replace(pc,"+")};F.fn.extend({serialize:function(){return F.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=F.prop(this,"elements");return b?F.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!F(this).is(":disabled")&&be.test(this.nodeName)&&!ed.test(b)&&(this.checked||!jc.test(b))}).map(function(b,c){var f=F(this).val();
return null==f?null:F.isArray(f)?F.map(f,function(b){return{name:c.name,value:b.replace(dd,"\r\n")}}):{name:c.name,value:f.replace(dd,"\r\n")}}).get()}});F.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(c){}};var ce={0:200,1223:204},Jb=F.ajaxSettings.xhr();fa.cors=!!Jb&&"withCredentials"in Jb;fa.ajax=Jb=!!Jb;F.ajaxTransport(function(c){var f,d;if(fa.cors||Jb&&!c.crossDomain)return{send:function(g,h){var k,l=c.xhr();l.open(c.type,c.url,c.async,c.username,c.password);if(c.xhrFields)for(k in c.xhrFields)l[k]=
c.xhrFields[k];c.mimeType&&l.overrideMimeType&&l.overrideMimeType(c.mimeType);c.crossDomain||g["X-Requested-With"]||(g["X-Requested-With"]="XMLHttpRequest");for(k in g)l.setRequestHeader(k,g[k]);f=function(b){return function(){f&&(f=d=l.onload=l.onerror=l.onabort=l.onreadystatechange=null,"abort"===b?l.abort():"error"===b?"number"!==typeof l.status?h(0,"error"):h(l.status,l.statusText):h(ce[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!==typeof l.responseText?{binary:l.response}:
{text:l.responseText},l.getAllResponseHeaders()))}};l.onload=f();d=l.onerror=f("error");void 0!==l.onabort?l.onabort=d:l.onreadystatechange=function(){4===l.readyState&&b.setTimeout(function(){f&&d()})};f=f("abort");try{l.send(c.hasContent&&c.data||null)}catch(m){if(f)throw m;}},abort:function(){f&&f()}}});F.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){F.globalEval(b);
return b}}});F.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});F.ajaxTransport("script",function(b){if(b.crossDomain){var c,f;return{send:function(d,g){c=F("<script>").prop({charset:b.scriptCharset,src:b.url}).on("load error",f=function(b){c.remove();f=null;b&&g("error"===b.type?404:200,b.type)});aa.head.appendChild(c[0])},abort:function(){f&&f()}}}});var Lc=[],Yb=/(=)\?(?=&|$)|\?\?/;F.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=Lc.pop()||
F.expando+"_"+Gb++;this[b]=!0;return b}});F.ajaxPrefilter("json jsonp",function(c,f,d){var g,h,k,l=!1!==c.jsonp&&(Yb.test(c.url)?"url":"string"===typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yb.test(c.data)&&"data");if(l||"jsonp"===c.dataTypes[0])return g=c.jsonpCallback=F.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,l?c[l]=c[l].replace(Yb,"$1"+g):!1!==c.jsonp&&(c.url+=(Hb.test(c.url)?"&":"?")+c.jsonp+"="+g),c.converters["script json"]=function(){k||
F.error(g+" was not called");return k[0]},c.dataTypes[0]="json",h=b[g],b[g]=function(){k=arguments},d.always(function(){void 0===h?F(b).removeProp(g):b[g]=h;c[g]&&(c.jsonpCallback=f.jsonpCallback,Lc.push(g));k&&F.isFunction(h)&&h(k[0]);k=h=void 0}),"script"});fa.createHTMLDocument=function(){var b=aa.implementation.createHTMLDocument("").body;b.innerHTML="<form></form><form></form>";return 2===b.childNodes.length}();F.parseHTML=function(b,c,f){if(!b||"string"!==typeof b)return null;"boolean"===typeof c&&
(f=c,c=!1);c=c||(fa.createHTMLDocument?aa.implementation.createHTMLDocument(""):aa);var d=Xa.exec(b);f=!f&&[];if(d)return[c.createElement(d[1])];d=n([b],c,f);f&&f.length&&F(f).remove();return F.merge([],d.childNodes)};var Mc=F.fn.load;F.fn.load=function(b,c,f){if("string"!==typeof b&&Mc)return Mc.apply(this,arguments);var d,g,h,k=this,l=b.indexOf(" ");-1<l&&(d=F.trim(b.slice(l)),b=b.slice(0,l));F.isFunction(c)?(f=c,c=void 0):c&&"object"===typeof c&&(g="POST");0<k.length&&F.ajax({url:b,type:g||"GET",
dataType:"html",data:c}).done(function(b){h=arguments;k.html(d?F("<div>").append(F.parseHTML(b)).find(d):b)}).always(f&&function(b,c){k.each(function(){f.apply(k,h||[b.responseText,c,b])})});return this};F.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,c){F.fn[c]=function(b){return this.on(c,b)}});F.expr.filters.animated=function(b){return F.grep(F.timers,function(c){return b===c.elem}).length};F.offset={setOffset:function(b,c,f){var d,g,h,k=F.css(b,"position"),
l=F(b),m={};"static"===k&&(b.style.position="relative");h=l.offset();g=F.css(b,"top");d=F.css(b,"left");("absolute"===k||"fixed"===k)&&-1<(g+d).indexOf("auto")?(d=l.position(),g=d.top,d=d.left):(g=parseFloat(g)||0,d=parseFloat(d)||0);F.isFunction(c)&&(c=c.call(b,f,F.extend({},h)));null!=c.top&&(m.top=c.top-h.top+g);null!=c.left&&(m.left=c.left-h.left+d);"using"in c?c.using.call(b,m):l.css(m)}};F.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(c){F.offset.setOffset(this,
b,c)});var c,f;f=this[0];var d={top:0,left:0},g=f&&f.ownerDocument;if(g){c=g.documentElement;if(!F.contains(c,f))return d;d=f.getBoundingClientRect();f=ba(g);return{top:d.top+f.pageYOffset-c.clientTop,left:d.left+f.pageXOffset-c.clientLeft}}},position:function(){if(this[0]){var b,c,f=this[0],d={top:0,left:0};"fixed"===F.css(f,"position")?c=f.getBoundingClientRect():(b=this.offsetParent(),c=this.offset(),F.nodeName(b[0],"html")||(d=b.offset()),d.top+=F.css(b[0],"borderTopWidth",!0),d.left+=F.css(b[0],
"borderLeftWidth",!0));return{top:c.top-d.top-F.css(f,"marginTop",!0),left:c.left-d.left-F.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===F.css(b,"position");)b=b.offsetParent;return b||Ub})}});F.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var f="pageYOffset"===c;F.fn[b]=function(d){return Q(this,function(b,d,g){var h=ba(b);if(void 0===g)return h?h[c]:b[d];h?h.scrollTo(f?h.pageXOffset:g,f?g:h.pageYOffset):
b[d]=g},b,d,arguments.length)}});F.each(["top","left"],function(b,c){F.cssHooks[c]=H(fa.pixelPosition,function(b,f){if(f)return f=G(b,c),ec.test(f)?F(b).position()[c]+"px":f})});F.each({Height:"height",Width:"width"},function(b,c){F.each({padding:"inner"+b,content:c,"":"outer"+b},function(f,d){F.fn[d]=function(d,g){var h=arguments.length&&(f||"boolean"!==typeof d),k=f||(!0===d||!0===g?"margin":"border");return Q(this,function(c,f,d){return F.isWindow(c)?c.document.documentElement["client"+b]:9===
c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+b],f["scroll"+b],c.body["offset"+b],f["offset"+b],f["client"+b])):void 0===d?F.css(c,f,k):F.style(c,f,d,k)},c,h?d:void 0,h,null)}})});F.fn.extend({bind:function(b,c,f){return this.on(b,null,c,f)},unbind:function(b,c){return this.off(b,null,c)},delegate:function(b,c,f,d){return this.on(c,b,f,d)},undelegate:function(b,c,f){return 1===arguments.length?this.off(b,"**"):this.off(c,b||"**",f)},size:function(){return this.length}});F.fn.andSelf=F.fn.addBack;
"function"===typeof define&&define.amd&&define("jquery",[],function(){return F});var de=b.jQuery,ee=b.$;F.noConflict=function(c){b.$===F&&(b.$=ee);c&&b.jQuery===F&&(b.jQuery=de);return F};c||(b.jQuery=b.$=F);return F});function atvImg(){function b(b){return 0<b?1:0===b?0:-1}function c(c,f,d,g,h,k){var l=f_scrollTop(),m=f_scrollLeft(),n=f?c.touches[0].pageX:c.pageX,p=f?c.touches[0].pageY:c.pageY,r=d.getBoundingClientRect(),q=d.clientWidth||d.offsetWidth||d.scrollWidth,t=d.clientHeight||d.offsetHeight||d.scrollHeight;c=160/q;f=.52-(n-r.left-m)/q;var v=.52-(p-r.top-l)/t,w=p-r.top-l-t/2,n=n-r.left-m-q/2;f=.6<Math.abs(f)?.6*b(f):f;v=.6<Math.abs(v)?.6*b(v):v;n=140<Math.abs(n)?140*b(n):n;w=140<Math.abs(w)?140*b(w):w;m=
"rotateX("+.1*(w-v)*c+"deg) rotateY("+.07*(f-n)*c+"deg) translateZ(20px)";n=180*Math.atan2(w,n)/Math.PI-90;0>n&&(n+=360);d.firstChild.classList.contains("over")&&(m+=" scale3d(0.98, 0.98, 0.98)");d.firstChild.style.webkitTransform=m;d.firstChild.style.transform=m;l=p-r.top-l;d=1.2*d.offsetHeight;k.style.background="linear-gradient("+n+"deg, rgba(255,255,255,"+(l>d?d:l)/t*.24+") 0%,rgba(255,255,255,0) 80%)";k.style.webkitTransform="translateX("+f*h-.1+"px) translateY("+v*h-.1+"px)";k.style.transform=
"translateX("+f*h-.1+"px) translateY("+v*h-.1+"px)";k=h;for(d=0;d<h;d++)g[d].style.webkitTransform="translateX("+2.5*d/c*k*f+"px) translateY("+2.5*d/c*h*v+"px)",g[d].style.transform="translateX("+2.5*d/c*k*f+"px) translateY("+2.5*d/c*h*v+"px)",k--}function d(b){var c=Math.random();b=b.getElementsByClassName("bg")[0];b.classList.remove("fly");b.classList.remove("fade");0<c&&.5>c||0===c?b.classList.add("fly"):b.classList.add("fade")}function g(b,c,f,d,g){b=c.firstChild;b.classList.remove("over");b.style.webkitTransform=
"";b.style.transform="";g.style.cssText="";for(g=0;g<d;g++)f[g].style.webkitTransform="",f[g].style.transform=""}var f=document;f.getElementsByTagName("body");var h=window,k=f.querySelectorAll(".atvImg"),l=k.length,m="ontouchstart"in h||navigator.msMaxTouchPoints;if(!(0>=l)){for(var t=0;t<l;t++){var u=k[t],q=u.querySelectorAll(".atvImg-layer"),n=q.length;if(!(0>=n)){for(;u.firstChild;)u.removeChild(u.firstChild);var r=f.createElement("div"),p=f.createElement("div"),w=f.createElement("div"),v=f.createElement("div"),
y=[];u.id="atvImg__"+t;r.className="atvImg-container";p.className="atvImg-shine";w.className="atvImg-shadow";v.className="atvImg-layers";for(var A=0;A<n;A++){var x=f.createElement("div");if("true"===q[A].getAttribute("data-text"))x.innerHTML=q[A].innerHTML;else{var z=q[A].getAttribute("data-img");x.style.backgroundImage="url("+z+")"}x.className="atvImg-rendered-layer";x.setAttribute("data-layer",A);v.appendChild(x);if(1<q[A].classList.length)for(z=0;z<q[A].classList.length;z++)"atvImg-layer"!==q[A].classList[z]&&
x.classList.add(q[A].classList[z]);y.push(x)}r.appendChild(w);r.appendChild(v);r.appendChild(p);u.appendChild(r);q=u.clientWidth||u.offsetWidth||u.scrollWidth;u.style.webkitTransform="perspective("+3*q+"px)";u.style.transform="perspective("+3*q+"px)";m?(h.preventScroll=!1,function(b,f,m,n){u.addEventListener("touchmove",function(d){h.preventScroll&&d.preventDefault();c(d,!0,b,f,m,n)});u.addEventListener("touchstart",function(c){h.preventScroll=!1;for(c=0;c<l;c++)k[c].firstChild.classList.remove("over");
b.firstChild.classList.add("over");d(b.firstChild)});u.addEventListener("touchend",function(c){h.preventScroll=!1;g(c,b,f,m,n)})}(u,y,n,p)):function(b,f,h,k){u.addEventListener("mousemove",function(d){c(d,!1,b,f,h,k)});u.addEventListener("mouseenter",function(c){b.firstChild.classList.add("over");d(b.firstChild)});u.addEventListener("mouseleave",function(c){g(c,b,f,h,k)})}(u,y,n,p)}}window.addEventListener("contextmenu",function(b){for(b=0;b<l;b++)k[b].firstChild.classList.remove("over")},!1)}};var THREE={REVISION:"77"};"function"===typeof define&&define.amd?define("three",THREE):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=THREE);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(b){return 0>b?-1:0<b?1:+b});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});
void 0===Object.assign&&function(){Object.assign=function(b){if(void 0===b||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(b),d=1;d<arguments.length;d++){var g=arguments[d];if(void 0!==g&&null!==g)for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}return c}}();
Object.assign(THREE,{MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},CullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,FrontSide:0,BackSide:1,DoubleSide:2,FlatShading:1,SmoothShading:2,NoColors:0,FaceColors:1,VertexColors:2,NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,AddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,
MaxEquation:104,ZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,DstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,NeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,MultiplyOperation:0,MixOperation:1,AddOperation:2,NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,Uncharted2ToneMapping:3,
CineonToneMapping:4,UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,UnsignedByteType:1009,
ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,UnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,AlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,RGBEFormat:THREE.RGBAFormat,DepthFormat:1026,RGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,RGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,
RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,RGB_ETC1_Format:2151,LoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,LinearEncoding:3E3,sRGBEncoding:3001,GammaEncoding:3007,RGBEEncoding:3002,LogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,BasicDepthPacking:3200,
RGBADepthPacking:3201});THREE.Color=function(b,c,d){return void 0===c&&void 0===d?this.set(b):this.setRGB(b,c,d)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(b){b instanceof THREE.Color?this.copy(b):"number"===typeof b?this.setHex(b):"string"===typeof b&&this.setStyle(b);return this},setScalar:function(b){this.b=this.g=this.r=b},setHex:function(b){b=Math.floor(b);this.r=(b>>16&255)/255;this.g=(b>>8&255)/255;this.b=(b&255)/255;return this},setRGB:function(b,c,d){this.r=b;this.g=c;this.b=d;return this},setHSL:function(){function b(b,d,g){0>g&&(g+=1);1<g&&--g;return g<1/6?b+6*(d-b)*g:
.5>g?d:g<2/3?b+6*(d-b)*(2/3-g):b}return function(c,d,g){c=THREE.Math.euclideanModulo(c,1);d=THREE.Math.clamp(d,0,1);g=THREE.Math.clamp(g,0,1);0===d?this.r=this.g=this.b=g:(d=.5>=g?g*(1+d):g+d-g*d,g=2*g-d,this.r=b(g,d,c+1/3),this.g=b(g,d,c),this.b=b(g,d,c-1/3));return this}}(),setStyle:function(b){function c(c){void 0!==c&&1>parseFloat(c)&&console.warn("THREE.Color: Alpha component of "+b+" will be ignored.")}var d;if(d=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var g=d[2];switch(d[1]){case "rgb":case "rgba":if(d=
/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(g))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,c(d[5]),this;if(d=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(g))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,c(d[5]),this;break;case "hsl":case "hsla":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(g)){var g=
parseFloat(d[1])/360,f=parseInt(d[2],10)/100,h=parseInt(d[3],10)/100;c(d[5]);return this.setHSL(g,f,h)}}}else if(d=/^\#([A-Fa-f0-9]+)$/.exec(b)){d=d[1];g=d.length;if(3===g)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,this;if(6===g)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,this}b&&0<b.length&&
(d=THREE.ColorKeywords[b],void 0!==d?this.setHex(d):console.warn("THREE.Color: Unknown color "+b));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(b){this.r=b.r;this.g=b.g;this.b=b.b;return this},copyGammaToLinear:function(b,c){void 0===c&&(c=2);this.r=Math.pow(b.r,c);this.g=Math.pow(b.g,c);this.b=Math.pow(b.b,c);return this},copyLinearToGamma:function(b,c){void 0===c&&(c=2);var d=0<c?1/c:1;this.r=Math.pow(b.r,d);this.g=Math.pow(b.g,d);this.b=Math.pow(b.b,
d);return this},convertGammaToLinear:function(){var b=this.r,c=this.g,d=this.b;this.r=b*b;this.g=c*c;this.b=d*d;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(b){b=b||{h:0,s:0,l:0};var c=this.r,d=this.g,g=this.b,f=Math.max(c,d,g),h=Math.min(c,d,g),k,l=
(h+f)/2;if(h===f)h=k=0;else{var m=f-h,h=.5>=l?m/(f+h):m/(2-f-h);switch(f){case c:k=(d-g)/m+(d<g?6:0);break;case d:k=(g-c)/m+2;break;case g:k=(c-d)/m+4}k/=6}b.h=k;b.s=h;b.l=l;return b},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(b,c,d){var g=this.getHSL();g.h+=b;g.s+=c;g.l+=d;this.setHSL(g.h,g.s,g.l);return this},add:function(b){this.r+=b.r;this.g+=b.g;this.b+=b.b;return this},addColors:function(b,c){this.r=b.r+c.r;this.g=b.g+c.g;this.b=
b.b+c.b;return this},addScalar:function(b){this.r+=b;this.g+=b;this.b+=b;return this},multiply:function(b){this.r*=b.r;this.g*=b.g;this.b*=b.b;return this},multiplyScalar:function(b){this.r*=b;this.g*=b;this.b*=b;return this},lerp:function(b,c){this.r+=(b.r-this.r)*c;this.g+=(b.g-this.g)*c;this.b+=(b.b-this.b)*c;return this},equals:function(b){return b.r===this.r&&b.g===this.g&&b.b===this.b},fromArray:function(b,c){void 0===c&&(c=0);this.r=b[c];this.g=b[c+1];this.b=b[c+2];return this},toArray:function(b,
c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this.r;b[c+1]=this.g;b[c+2]=this.b;return b}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(b,c,d,g){this._x=b||0;this._y=c||0;this._z=d||0;this._w=void 0!==g?g:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(b){this._x=b;this.onChangeCallback()},get y(){return this._y},set y(b){this._y=b;this.onChangeCallback()},get z(){return this._z},set z(b){this._z=b;this.onChangeCallback()},get w(){return this._w},set w(b){this._w=b;this.onChangeCallback()},set:function(b,c,d,g){this._x=b;this._y=c;this._z=d;this._w=g;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},
copy:function(b){this._x=b.x;this._y=b.y;this._z=b.z;this._w=b.w;this.onChangeCallback();return this},setFromEuler:function(b,c){if(!1===b instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var d=Math.cos(b._x/2),g=Math.cos(b._y/2),f=Math.cos(b._z/2),h=Math.sin(b._x/2),k=Math.sin(b._y/2),l=Math.sin(b._z/2),m=b.order;"XYZ"===m?(this._x=h*g*f+d*k*l,this._y=d*k*f-h*g*l,this._z=d*g*l+h*k*f,this._w=d*g*f-h*k*l):"YXZ"===
m?(this._x=h*g*f+d*k*l,this._y=d*k*f-h*g*l,this._z=d*g*l-h*k*f,this._w=d*g*f+h*k*l):"ZXY"===m?(this._x=h*g*f-d*k*l,this._y=d*k*f+h*g*l,this._z=d*g*l+h*k*f,this._w=d*g*f-h*k*l):"ZYX"===m?(this._x=h*g*f-d*k*l,this._y=d*k*f+h*g*l,this._z=d*g*l-h*k*f,this._w=d*g*f+h*k*l):"YZX"===m?(this._x=h*g*f+d*k*l,this._y=d*k*f+h*g*l,this._z=d*g*l-h*k*f,this._w=d*g*f-h*k*l):"XZY"===m&&(this._x=h*g*f-d*k*l,this._y=d*k*f-h*g*l,this._z=d*g*l+h*k*f,this._w=d*g*f+h*k*l);if(!1!==c)this.onChangeCallback();return this},setFromAxisAngle:function(b,
c){var d=c/2,g=Math.sin(d);this._x=b.x*g;this._y=b.y*g;this._z=b.z*g;this._w=Math.cos(d);this.onChangeCallback();return this},setFromRotationMatrix:function(b){var c=b.elements,d=c[0];b=c[4];var g=c[8],f=c[1],h=c[5],k=c[9],l=c[2],m=c[6],c=c[10],t=d+h+c;0<t?(d=.5/Math.sqrt(t+1),this._w=.25/d,this._x=(m-k)*d,this._y=(g-l)*d,this._z=(f-b)*d):d>h&&d>c?(d=2*Math.sqrt(1+d-h-c),this._w=(m-k)/d,this._x=.25*d,this._y=(b+f)/d,this._z=(g+l)/d):h>c?(d=2*Math.sqrt(1+h-d-c),this._w=(g-l)/d,this._x=(b+f)/d,this._y=
.25*d,this._z=(k+m)/d):(d=2*Math.sqrt(1+c-d-h),this._w=(f-b)/d,this._x=(g+l)/d,this._y=(k+m)/d,this._z=.25*d);this.onChangeCallback();return this},setFromUnitVectors:function(){var b,c;return function(d,g){void 0===b&&(b=new THREE.Vector3);c=d.dot(g)+1;1E-6>c?(c=0,Math.abs(d.x)>Math.abs(d.z)?b.set(-d.y,d.x,0):b.set(0,-d.z,d.y)):b.crossVectors(d,g);this._x=b.x;this._y=b.y;this._z=b.z;this._w=c;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(b){return this._x*b._x+this._y*b._y+this._z*b._z+this._w*b._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var b=this.length();0===b?(this._z=this._y=this._x=0,this._w=1):(b=1/b,this._x*=b,this._y*=b,this._z*=b,this._w*=b);this.onChangeCallback();return this},
multiply:function(b,c){return void 0!==c?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(b,c)):this.multiplyQuaternions(this,b)},premultiply:function(b){return this.multiplyQuaternions(b,this)},multiplyQuaternions:function(b,c){var d=b._x,g=b._y,f=b._z,h=b._w,k=c._x,l=c._y,m=c._z,t=c._w;this._x=d*t+h*k+g*m-f*l;this._y=g*t+h*l+f*k-d*m;this._z=f*t+h*m+d*l-g*k;this._w=h*t-d*k-g*l-f*m;this.onChangeCallback();
return this},slerp:function(b,c){if(0===c)return this;if(1===c)return this.copy(b);var d=this._x,g=this._y,f=this._z,h=this._w,k=h*b._w+d*b._x+g*b._y+f*b._z;0>k?(this._w=-b._w,this._x=-b._x,this._y=-b._y,this._z=-b._z,k=-k):this.copy(b);if(1<=k)return this._w=h,this._x=d,this._y=g,this._z=f,this;var l=Math.sqrt(1-k*k);if(.001>Math.abs(l))return this._w=.5*(h+this._w),this._x=.5*(d+this._x),this._y=.5*(g+this._y),this._z=.5*(f+this._z),this;var m=Math.atan2(l,k),k=Math.sin((1-c)*m)/l,l=Math.sin(c*
m)/l;this._w=h*k+this._w*l;this._x=d*k+this._x*l;this._y=g*k+this._y*l;this._z=f*k+this._z*l;this.onChangeCallback();return this},equals:function(b){return b._x===this._x&&b._y===this._y&&b._z===this._z&&b._w===this._w},fromArray:function(b,c){void 0===c&&(c=0);this._x=b[c];this._y=b[c+1];this._z=b[c+2];this._w=b[c+3];this.onChangeCallback();return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this._x;b[c+1]=this._y;b[c+2]=this._z;b[c+3]=this._w;return b},onChange:function(b){this.onChangeCallback=
b;return this},onChangeCallback:function(){}};
Object.assign(THREE.Quaternion,{slerp:function(b,c,d,g){return d.copy(b).slerp(c,g)},slerpFlat:function(b,c,d,g,f,h,k){var l=d[g+0],m=d[g+1],t=d[g+2];d=d[g+3];g=f[h+0];var u=f[h+1],q=f[h+2];f=f[h+3];if(d!==f||l!==g||m!==u||t!==q){h=1-k;var n=l*g+m*u+t*q+d*f,r=0<=n?1:-1,p=1-n*n;p>Number.EPSILON&&(p=Math.sqrt(p),n=Math.atan2(p,n*r),h=Math.sin(h*n)/p,k=Math.sin(k*n)/p);r*=k;l=l*h+g*r;m=m*h+u*r;t=t*h+q*r;d=d*h+f*r;h===1-k&&(k=1/Math.sqrt(l*l+m*m+t*t+d*d),l*=k,m*=k,t*=k,d*=k)}b[c]=l;b[c+1]=m;b[c+2]=t;
b[c+3]=d}});THREE.Vector2=function(b,c){this.x=b||0;this.y=c||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(b){this.x=b},get height(){return this.y},set height(b){this.y=b},set:function(b,c){this.x=b;this.y=c;return this},setScalar:function(b){this.y=this.x=b;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setComponent:function(b,c){switch(b){case 0:this.x=c;break;case 1:this.y=c;break;default:throw Error("index is out of range: "+b);}},getComponent:function(b){switch(b){case 0:return this.x;
case 1:return this.y;default:throw Error("index is out of range: "+b);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(b){this.x=b.x;this.y=b.y;return this},add:function(b,c){if(void 0!==c)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(b,c);this.x+=b.x;this.y+=b.y;return this},addScalar:function(b){this.x+=b;this.y+=b;return this},addVectors:function(b,c){this.x=b.x+c.x;this.y=b.y+c.y;return this},
addScaledVector:function(b,c){this.x+=b.x*c;this.y+=b.y*c;return this},sub:function(b,c){if(void 0!==c)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(b,c);this.x-=b.x;this.y-=b.y;return this},subScalar:function(b){this.x-=b;this.y-=b;return this},subVectors:function(b,c){this.x=b.x-c.x;this.y=b.y-c.y;return this},multiply:function(b){this.x*=b.x;this.y*=b.y;return this},multiplyScalar:function(b){isFinite(b)?(this.x*=b,
this.y*=b):this.y=this.x=0;return this},divide:function(b){this.x/=b.x;this.y/=b.y;return this},divideScalar:function(b){return this.multiplyScalar(1/b)},min:function(b){this.x=Math.min(this.x,b.x);this.y=Math.min(this.y,b.y);return this},max:function(b){this.x=Math.max(this.x,b.x);this.y=Math.max(this.y,b.y);return this},clamp:function(b,c){this.x=Math.max(b.x,Math.min(c.x,this.x));this.y=Math.max(b.y,Math.min(c.y,this.y));return this},clampScalar:function(){var b,c;return function(d,g){void 0===
b&&(b=new THREE.Vector2,c=new THREE.Vector2);b.set(d,d);c.set(g,g);return this.clamp(b,c)}}(),clampLength:function(b,c){var d=this.length();return this.multiplyScalar(Math.max(b,Math.min(c,d))/d)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);
this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(b){return this.x*b.x+this.y*b.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var b=Math.atan2(this.y,this.x);0>b&&(b+=2*Math.PI);return b},
distanceTo:function(b){return Math.sqrt(this.distanceToSquared(b))},distanceToSquared:function(b){var c=this.x-b.x;b=this.y-b.y;return c*c+b*b},setLength:function(b){return this.multiplyScalar(b/this.length())},lerp:function(b,c){this.x+=(b.x-this.x)*c;this.y+=(b.y-this.y)*c;return this},lerpVectors:function(b,c,d){return this.subVectors(c,b).multiplyScalar(d).add(b)},equals:function(b){return b.x===this.x&&b.y===this.y},fromArray:function(b,c){void 0===c&&(c=0);this.x=b[c];this.y=b[c+1];return this},
toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this.x;b[c+1]=this.y;return b},fromAttribute:function(b,c,d){void 0===d&&(d=0);c=c*b.itemSize+d;this.x=b.array[c];this.y=b.array[c+1];return this},rotateAround:function(b,c){var d=Math.cos(c),g=Math.sin(c),f=this.x-b.x,h=this.y-b.y;this.x=f*d-h*g+b.x;this.y=f*g+h*d+b.y;return this}};THREE.Vector3=function(b,c,d){this.x=b||0;this.y=c||0;this.z=d||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(b,c,d){this.x=b;this.y=c;this.z=d;return this},setScalar:function(b){this.z=this.y=this.x=b;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setZ:function(b){this.z=b;return this},setComponent:function(b,c){switch(b){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;default:throw Error("index is out of range: "+b);}},getComponent:function(b){switch(b){case 0:return this.x;case 1:return this.y;
case 2:return this.z;default:throw Error("index is out of range: "+b);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(b){this.x=b.x;this.y=b.y;this.z=b.z;return this},add:function(b,c){if(void 0!==c)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(b,c);this.x+=b.x;this.y+=b.y;this.z+=b.z;return this},addScalar:function(b){this.x+=b;this.y+=b;this.z+=b;return this},addVectors:function(b,
c){this.x=b.x+c.x;this.y=b.y+c.y;this.z=b.z+c.z;return this},addScaledVector:function(b,c){this.x+=b.x*c;this.y+=b.y*c;this.z+=b.z*c;return this},sub:function(b,c){if(void 0!==c)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(b,c);this.x-=b.x;this.y-=b.y;this.z-=b.z;return this},subScalar:function(b){this.x-=b;this.y-=b;this.z-=b;return this},subVectors:function(b,c){this.x=b.x-c.x;this.y=b.y-c.y;this.z=b.z-c.z;return this},
multiply:function(b,c){if(void 0!==c)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(b,c);this.x*=b.x;this.y*=b.y;this.z*=b.z;return this},multiplyScalar:function(b){isFinite(b)?(this.x*=b,this.y*=b,this.z*=b):this.z=this.y=this.x=0;return this},multiplyVectors:function(b,c){this.x=b.x*c.x;this.y=b.y*c.y;this.z=b.z*c.z;return this},applyEuler:function(){var b;return function(c){!1===c instanceof THREE.Euler&&
console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");void 0===b&&(b=new THREE.Quaternion);return this.applyQuaternion(b.setFromEuler(c))}}(),applyAxisAngle:function(){var b;return function(c,d){void 0===b&&(b=new THREE.Quaternion);return this.applyQuaternion(b.setFromAxisAngle(c,d))}}(),applyMatrix3:function(b){var c=this.x,d=this.y,g=this.z;b=b.elements;this.x=b[0]*c+b[3]*d+b[6]*g;this.y=b[1]*c+b[4]*d+b[7]*g;this.z=b[2]*c+b[5]*d+b[8]*g;return this},
applyMatrix4:function(b){var c=this.x,d=this.y,g=this.z;b=b.elements;this.x=b[0]*c+b[4]*d+b[8]*g+b[12];this.y=b[1]*c+b[5]*d+b[9]*g+b[13];this.z=b[2]*c+b[6]*d+b[10]*g+b[14];return this},applyProjection:function(b){var c=this.x,d=this.y,g=this.z;b=b.elements;var f=1/(b[3]*c+b[7]*d+b[11]*g+b[15]);this.x=(b[0]*c+b[4]*d+b[8]*g+b[12])*f;this.y=(b[1]*c+b[5]*d+b[9]*g+b[13])*f;this.z=(b[2]*c+b[6]*d+b[10]*g+b[14])*f;return this},applyQuaternion:function(b){var c=this.x,d=this.y,g=this.z,f=b.x,h=b.y,k=b.z;b=
b.w;var l=b*c+h*g-k*d,m=b*d+k*c-f*g,t=b*g+f*d-h*c,c=-f*c-h*d-k*g;this.x=l*b+c*-f+m*-k-t*-h;this.y=m*b+c*-h+t*-f-l*-k;this.z=t*b+c*-k+l*-h-m*-f;return this},project:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.multiplyMatrices(c.projectionMatrix,b.getInverse(c.matrixWorld));return this.applyProjection(b)}}(),unproject:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.multiplyMatrices(c.matrixWorld,b.getInverse(c.projectionMatrix));return this.applyProjection(b)}}(),
transformDirection:function(b){var c=this.x,d=this.y,g=this.z;b=b.elements;this.x=b[0]*c+b[4]*d+b[8]*g;this.y=b[1]*c+b[5]*d+b[9]*g;this.z=b[2]*c+b[6]*d+b[10]*g;return this.normalize()},divide:function(b){this.x/=b.x;this.y/=b.y;this.z/=b.z;return this},divideScalar:function(b){return this.multiplyScalar(1/b)},min:function(b){this.x=Math.min(this.x,b.x);this.y=Math.min(this.y,b.y);this.z=Math.min(this.z,b.z);return this},max:function(b){this.x=Math.max(this.x,b.x);this.y=Math.max(this.y,b.y);this.z=
Math.max(this.z,b.z);return this},clamp:function(b,c){this.x=Math.max(b.x,Math.min(c.x,this.x));this.y=Math.max(b.y,Math.min(c.y,this.y));this.z=Math.max(b.z,Math.min(c.z,this.z));return this},clampScalar:function(){var b,c;return function(d,g){void 0===b&&(b=new THREE.Vector3,c=new THREE.Vector3);b.set(d,d,d);c.set(g,g,g);return this.clamp(b,c)}}(),clampLength:function(b,c){var d=this.length();return this.multiplyScalar(Math.max(b,Math.min(c,d))/d)},floor:function(){this.x=Math.floor(this.x);this.y=
Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=
-this.y;this.z=-this.z;return this},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(b){return this.multiplyScalar(b/this.length())},lerp:function(b,c){this.x+=(b.x-this.x)*c;this.y+=
(b.y-this.y)*c;this.z+=(b.z-this.z)*c;return this},lerpVectors:function(b,c,d){return this.subVectors(c,b).multiplyScalar(d).add(b)},cross:function(b,c){if(void 0!==c)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(b,c);var d=this.x,g=this.y,f=this.z;this.x=g*b.z-f*b.y;this.y=f*b.x-d*b.z;this.z=d*b.y-g*b.x;return this},crossVectors:function(b,c){var d=b.x,g=b.y,f=b.z,h=c.x,k=c.y,l=c.z;this.x=g*l-f*k;this.y=f*h-d*l;
this.z=d*k-g*h;return this},projectOnVector:function(){var b,c;return function(d){void 0===b&&(b=new THREE.Vector3);b.copy(d).normalize();c=this.dot(b);return this.copy(b).multiplyScalar(c)}}(),projectOnPlane:function(){var b;return function(c){void 0===b&&(b=new THREE.Vector3);b.copy(this).projectOnVector(c);return this.sub(b)}}(),reflect:function(){var b;return function(c){void 0===b&&(b=new THREE.Vector3);return this.sub(b.copy(c).multiplyScalar(2*this.dot(c)))}}(),angleTo:function(b){b=this.dot(b)/
Math.sqrt(this.lengthSq()*b.lengthSq());return Math.acos(THREE.Math.clamp(b,-1,1))},distanceTo:function(b){return Math.sqrt(this.distanceToSquared(b))},distanceToSquared:function(b){var c=this.x-b.x,d=this.y-b.y;b=this.z-b.z;return c*c+d*d+b*b},setFromSpherical:function(b){var c=Math.sin(b.phi)*b.radius;this.x=c*Math.sin(b.theta);this.y=Math.cos(b.phi)*b.radius;this.z=c*Math.cos(b.theta);return this},setFromMatrixPosition:function(b){return this.setFromMatrixColumn(b,3)},setFromMatrixScale:function(b){var c=
this.setFromMatrixColumn(b,0).length(),d=this.setFromMatrixColumn(b,1).length();b=this.setFromMatrixColumn(b,2).length();this.x=c;this.y=d;this.z=b;return this},setFromMatrixColumn:function(b,c){if("number"===typeof b){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var d=b;b=c;c=d}return this.fromArray(b.elements,4*c)},equals:function(b){return b.x===this.x&&b.y===this.y&&b.z===this.z},fromArray:function(b,c){void 0===c&&(c=0);this.x=b[c];this.y=b[c+1];this.z=b[c+
2];return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this.x;b[c+1]=this.y;b[c+2]=this.z;return b},fromAttribute:function(b,c,d){void 0===d&&(d=0);c=c*b.itemSize+d;this.x=b.array[c];this.y=b.array[c+1];this.z=b.array[c+2];return this}};THREE.Vector4=function(b,c,d,g){this.x=b||0;this.y=c||0;this.z=d||0;this.w=void 0!==g?g:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(b,c,d,g){this.x=b;this.y=c;this.z=d;this.w=g;return this},setScalar:function(b){this.w=this.z=this.y=this.x=b;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setZ:function(b){this.z=b;return this},setW:function(b){this.w=b;return this},setComponent:function(b,c){switch(b){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;case 3:this.w=c;break;default:throw Error("index is out of range: "+
b);}},getComponent:function(b){switch(b){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+b);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(b){this.x=b.x;this.y=b.y;this.z=b.z;this.w=void 0!==b.w?b.w:1;return this},add:function(b,c){if(void 0!==c)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(b,c);
this.x+=b.x;this.y+=b.y;this.z+=b.z;this.w+=b.w;return this},addScalar:function(b){this.x+=b;this.y+=b;this.z+=b;this.w+=b;return this},addVectors:function(b,c){this.x=b.x+c.x;this.y=b.y+c.y;this.z=b.z+c.z;this.w=b.w+c.w;return this},addScaledVector:function(b,c){this.x+=b.x*c;this.y+=b.y*c;this.z+=b.z*c;this.w+=b.w*c;return this},sub:function(b,c){if(void 0!==c)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(b,c);this.x-=
b.x;this.y-=b.y;this.z-=b.z;this.w-=b.w;return this},subScalar:function(b){this.x-=b;this.y-=b;this.z-=b;this.w-=b;return this},subVectors:function(b,c){this.x=b.x-c.x;this.y=b.y-c.y;this.z=b.z-c.z;this.w=b.w-c.w;return this},multiplyScalar:function(b){isFinite(b)?(this.x*=b,this.y*=b,this.z*=b,this.w*=b):this.w=this.z=this.y=this.x=0;return this},applyMatrix4:function(b){var c=this.x,d=this.y,g=this.z,f=this.w;b=b.elements;this.x=b[0]*c+b[4]*d+b[8]*g+b[12]*f;this.y=b[1]*c+b[5]*d+b[9]*g+b[13]*f;this.z=
b[2]*c+b[6]*d+b[10]*g+b[14]*f;this.w=b[3]*c+b[7]*d+b[11]*g+b[15]*f;return this},divideScalar:function(b){return this.multiplyScalar(1/b)},setAxisAngleFromQuaternion:function(b){this.w=2*Math.acos(b.w);var c=Math.sqrt(1-b.w*b.w);1E-4>c?(this.x=1,this.z=this.y=0):(this.x=b.x/c,this.y=b.y/c,this.z=b.z/c);return this},setAxisAngleFromRotationMatrix:function(b){var c,d,g;b=b.elements;var f=b[0];g=b[4];var h=b[8],k=b[1],l=b[5],m=b[9];d=b[2];c=b[6];var t=b[10];if(.01>Math.abs(g-k)&&.01>Math.abs(h-d)&&.01>
Math.abs(m-c)){if(.1>Math.abs(g+k)&&.1>Math.abs(h+d)&&.1>Math.abs(m+c)&&.1>Math.abs(f+l+t-3))return this.set(1,0,0,0),this;b=Math.PI;f=(f+1)/2;l=(l+1)/2;t=(t+1)/2;g=(g+k)/4;h=(h+d)/4;m=(m+c)/4;f>l&&f>t?.01>f?(c=0,g=d=.707106781):(c=Math.sqrt(f),d=g/c,g=h/c):l>t?.01>l?(c=.707106781,d=0,g=.707106781):(d=Math.sqrt(l),c=g/d,g=m/d):.01>t?(d=c=.707106781,g=0):(g=Math.sqrt(t),c=h/g,d=m/g);this.set(c,d,g,b);return this}b=Math.sqrt((c-m)*(c-m)+(h-d)*(h-d)+(k-g)*(k-g));.001>Math.abs(b)&&(b=1);this.x=(c-m)/
b;this.y=(h-d)/b;this.z=(k-g)/b;this.w=Math.acos((f+l+t-1)/2);return this},min:function(b){this.x=Math.min(this.x,b.x);this.y=Math.min(this.y,b.y);this.z=Math.min(this.z,b.z);this.w=Math.min(this.w,b.w);return this},max:function(b){this.x=Math.max(this.x,b.x);this.y=Math.max(this.y,b.y);this.z=Math.max(this.z,b.z);this.w=Math.max(this.w,b.w);return this},clamp:function(b,c){this.x=Math.max(b.x,Math.min(c.x,this.x));this.y=Math.max(b.y,Math.min(c.y,this.y));this.z=Math.max(b.z,Math.min(c.z,this.z));
this.w=Math.max(b.w,Math.min(c.w,this.w));return this},clampScalar:function(){var b,c;return function(d,g){void 0===b&&(b=new THREE.Vector4,c=new THREE.Vector4);b.set(d,d,d,d);c.set(g,g,g,g);return this.clamp(b,c)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=
Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(b){return this.x*b.x+this.y*b.y+this.z*
b.z+this.w*b.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(b){return this.multiplyScalar(b/this.length())},lerp:function(b,c){this.x+=(b.x-this.x)*c;this.y+=(b.y-this.y)*c;this.z+=(b.z-
this.z)*c;this.w+=(b.w-this.w)*c;return this},lerpVectors:function(b,c,d){return this.subVectors(c,b).multiplyScalar(d).add(b)},equals:function(b){return b.x===this.x&&b.y===this.y&&b.z===this.z&&b.w===this.w},fromArray:function(b,c){void 0===c&&(c=0);this.x=b[c];this.y=b[c+1];this.z=b[c+2];this.w=b[c+3];return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this.x;b[c+1]=this.y;b[c+2]=this.z;b[c+3]=this.w;return b},fromAttribute:function(b,c,d){void 0===d&&(d=0);c=c*b.itemSize+
d;this.x=b.array[c];this.y=b.array[c+1];this.z=b.array[c+2];this.w=b.array[c+3];return this}};THREE.Euler=function(b,c,d,g){this._x=b||0;this._y=c||0;this._z=d||0;this._order=g||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(b){this._x=b;this.onChangeCallback()},get y(){return this._y},set y(b){this._y=b;this.onChangeCallback()},get z(){return this._z},set z(b){this._z=b;this.onChangeCallback()},get order(){return this._order},set order(b){this._order=b;this.onChangeCallback()},set:function(b,c,d,g){this._x=b;this._y=c;this._z=d;this._order=g||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,
this._y,this._z,this._order)},copy:function(b){this._x=b._x;this._y=b._y;this._z=b._z;this._order=b._order;this.onChangeCallback();return this},setFromRotationMatrix:function(b,c,d){var g=THREE.Math.clamp,f=b.elements;b=f[0];var h=f[4],k=f[8],l=f[1],m=f[5],t=f[9],u=f[2],q=f[6],f=f[10];c=c||this._order;"XYZ"===c?(this._y=Math.asin(g(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-t,f),this._z=Math.atan2(-h,b)):(this._x=Math.atan2(q,m),this._z=0)):"YXZ"===c?(this._x=Math.asin(-g(t,-1,1)),.99999>Math.abs(t)?
(this._y=Math.atan2(k,f),this._z=Math.atan2(l,m)):(this._y=Math.atan2(-u,b),this._z=0)):"ZXY"===c?(this._x=Math.asin(g(q,-1,1)),.99999>Math.abs(q)?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-h,m)):(this._y=0,this._z=Math.atan2(l,b))):"ZYX"===c?(this._y=Math.asin(-g(u,-1,1)),.99999>Math.abs(u)?(this._x=Math.atan2(q,f),this._z=Math.atan2(l,b)):(this._x=0,this._z=Math.atan2(-h,m))):"YZX"===c?(this._z=Math.asin(g(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(-t,m),this._y=Math.atan2(-u,b)):(this._x=
0,this._y=Math.atan2(k,f))):"XZY"===c?(this._z=Math.asin(-g(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(q,m),this._y=Math.atan2(k,b)):(this._x=Math.atan2(-t,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+c);this._order=c;if(!1!==d)this.onChangeCallback();return this},setFromQuaternion:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Matrix4);b.makeRotationFromQuaternion(c);return this.setFromRotationMatrix(b,d,g)}}(),setFromVector3:function(b,
c){return this.set(b.x,b.y,b.z,c||this._order)},reorder:function(){var b=new THREE.Quaternion;return function(c){b.setFromEuler(this);return this.setFromQuaternion(b,c)}}(),equals:function(b){return b._x===this._x&&b._y===this._y&&b._z===this._z&&b._order===this._order},fromArray:function(b){this._x=b[0];this._y=b[1];this._z=b[2];void 0!==b[3]&&(this._order=b[3]);this.onChangeCallback();return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this._x;b[c+1]=this._y;b[c+2]=this._z;
b[c+3]=this._order;return b},toVector3:function(b){return b?b.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(b){this.onChangeCallback=b;return this},onChangeCallback:function(){}};THREE.Line3=function(b,c){this.start=void 0!==b?b:new THREE.Vector3;this.end=void 0!==c?c:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(b,c){this.start.copy(b);this.end.copy(c);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.start.copy(b.start);this.end.copy(b.end);return this},center:function(b){return(b||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(b){return(b||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
at:function(b,c){var d=c||new THREE.Vector3;return this.delta(d).multiplyScalar(b).add(this.start)},closestPointToPointParameter:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d,g){b.subVectors(d,this.start);c.subVectors(this.end,this.start);var f=c.dot(c),f=c.dot(b)/f;g&&(f=THREE.Math.clamp(f,0,1));return f}}(),closestPointToPoint:function(b,c,d){b=this.closestPointToPointParameter(b,c);d=d||new THREE.Vector3;return this.delta(d).multiplyScalar(b).add(this.start)},applyMatrix4:function(b){this.start.applyMatrix4(b);
this.end.applyMatrix4(b);return this},equals:function(b){return b.start.equals(this.start)&&b.end.equals(this.end)}};THREE.Box2=function(b,c){this.min=void 0!==b?b:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==c?c:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(b,c){this.min.copy(b);this.max.copy(c);return this},setFromPoints:function(b){this.makeEmpty();for(var c=0,d=b.length;c<d;c++)this.expandByPoint(b[c]);return this},setFromCenterAndSize:function(){var b=new THREE.Vector2;return function(c,d){var g=b.copy(d).multiplyScalar(.5);this.min.copy(c).sub(g);this.max.copy(c).add(g);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.min.copy(b.min);this.max.copy(b.max);
return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(b){return(b||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(b){return(b||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(b){this.min.min(b);this.max.max(b);return this},expandByVector:function(b){this.min.sub(b);this.max.add(b);return this},expandByScalar:function(b){this.min.addScalar(-b);
this.max.addScalar(b);return this},containsPoint:function(b){return b.x<this.min.x||b.x>this.max.x||b.y<this.min.y||b.y>this.max.y?!1:!0},containsBox:function(b){return this.min.x<=b.min.x&&b.max.x<=this.max.x&&this.min.y<=b.min.y&&b.max.y<=this.max.y?!0:!1},getParameter:function(b,c){return(c||new THREE.Vector2).set((b.x-this.min.x)/(this.max.x-this.min.x),(b.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(b){return b.max.x<this.min.x||b.min.x>this.max.x||b.max.y<this.min.y||b.min.y>
this.max.y?!1:!0},clampPoint:function(b,c){return(c||new THREE.Vector2).copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var b=new THREE.Vector2;return function(c){return b.copy(c).clamp(this.min,this.max).sub(c).length()}}(),intersect:function(b){this.min.max(b.min);this.max.min(b.max);return this},union:function(b){this.min.min(b.min);this.max.max(b.max);return this},translate:function(b){this.min.add(b);this.max.add(b);return this},equals:function(b){return b.min.equals(this.min)&&
b.max.equals(this.max)}};THREE.Box3=function(b,c){this.min=void 0!==b?b:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==c?c:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(b,c){this.min.copy(b);this.max.copy(c);return this},setFromArray:function(b){for(var c=Infinity,d=Infinity,g=Infinity,f=-Infinity,h=-Infinity,k=-Infinity,l=0,m=b.length;l<m;l+=3){var t=b[l],u=b[l+1],q=b[l+2];t<c&&(c=t);u<d&&(d=u);q<g&&(g=q);t>f&&(f=t);u>h&&(h=u);q>k&&(k=q)}this.min.set(c,d,g);this.max.set(f,h,k)},setFromPoints:function(b){this.makeEmpty();for(var c=0,d=b.length;c<d;c++)this.expandByPoint(b[c]);return this},setFromCenterAndSize:function(){var b=
new THREE.Vector3;return function(c,d){var g=b.copy(d).multiplyScalar(.5);this.min.copy(c).sub(g);this.max.copy(c).add(g);return this}}(),setFromObject:function(){var b=new THREE.Vector3;return function(c){var d=this;c.updateMatrixWorld(!0);this.makeEmpty();c.traverse(function(c){var f=c.geometry;if(void 0!==f)if(f instanceof THREE.Geometry)for(var h=f.vertices,f=0,k=h.length;f<k;f++)b.copy(h[f]),b.applyMatrix4(c.matrixWorld),d.expandByPoint(b);else if(f instanceof THREE.BufferGeometry&&void 0!==
f.attributes.position)for(h=f.attributes.position.array,f=0,k=h.length;f<k;f+=3)b.fromArray(h,f),b.applyMatrix4(c.matrixWorld),d.expandByPoint(b)});return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.min.copy(b.min);this.max.copy(b.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},
center:function(b){return(b||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(b){return(b||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(b){this.min.min(b);this.max.max(b);return this},expandByVector:function(b){this.min.sub(b);this.max.add(b);return this},expandByScalar:function(b){this.min.addScalar(-b);this.max.addScalar(b);return this},containsPoint:function(b){return b.x<this.min.x||b.x>this.max.x||b.y<this.min.y||b.y>this.max.y||b.z<
this.min.z||b.z>this.max.z?!1:!0},containsBox:function(b){return this.min.x<=b.min.x&&b.max.x<=this.max.x&&this.min.y<=b.min.y&&b.max.y<=this.max.y&&this.min.z<=b.min.z&&b.max.z<=this.max.z?!0:!1},getParameter:function(b,c){return(c||new THREE.Vector3).set((b.x-this.min.x)/(this.max.x-this.min.x),(b.y-this.min.y)/(this.max.y-this.min.y),(b.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(b){return b.max.x<this.min.x||b.min.x>this.max.x||b.max.y<this.min.y||b.min.y>this.max.y||b.max.z<
this.min.z||b.min.z>this.max.z?!1:!0},intersectsSphere:function(){var b;return function(c){void 0===b&&(b=new THREE.Vector3);this.clampPoint(c.center,b);return b.distanceToSquared(c.center)<=c.radius*c.radius}}(),intersectsPlane:function(b){var c,d;0<b.normal.x?(c=b.normal.x*this.min.x,d=b.normal.x*this.max.x):(c=b.normal.x*this.max.x,d=b.normal.x*this.min.x);0<b.normal.y?(c+=b.normal.y*this.min.y,d+=b.normal.y*this.max.y):(c+=b.normal.y*this.max.y,d+=b.normal.y*this.min.y);0<b.normal.z?(c+=b.normal.z*
this.min.z,d+=b.normal.z*this.max.z):(c+=b.normal.z*this.max.z,d+=b.normal.z*this.min.z);return c<=b.constant&&d>=b.constant},clampPoint:function(b,c){return(c||new THREE.Vector3).copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var b=new THREE.Vector3;return function(c){return b.copy(c).clamp(this.min,this.max).sub(c).length()}}(),getBoundingSphere:function(){var b=new THREE.Vector3;return function(c){c=c||new THREE.Sphere;c.center=this.center();c.radius=.5*this.size(b).length();return c}}(),
intersect:function(b){this.min.max(b.min);this.max.min(b.max);this.isEmpty()&&this.makeEmpty();return this},union:function(b){this.min.min(b.min);this.max.max(b.max);return this},applyMatrix4:function(){var b=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(c){if(this.isEmpty())return this;b[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(c);b[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(c);
b[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(c);b[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(c);b[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(c);b[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(c);b[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(c);b[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(c);this.setFromPoints(b);return this}}(),translate:function(b){this.min.add(b);this.max.add(b);return this},equals:function(b){return b.min.equals(this.min)&&
b.max.equals(this.max)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(b,c,d,g,f,h,k,l,m){var t=this.elements;t[0]=b;t[1]=g;t[2]=k;t[3]=c;t[4]=f;t[5]=l;t[6]=d;t[7]=h;t[8]=m;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(b){b=b.elements;this.set(b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8]);return this},setFromMatrix4:function(b){b=b.elements;this.set(b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10]);
return this},applyToVector3Array:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Vector3);void 0===d&&(d=0);void 0===g&&(g=c.length);for(var f=0;f<g;f+=3,d+=3)b.fromArray(c,d),b.applyMatrix3(this),b.toArray(c,d);return c}}(),applyToBuffer:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Vector3);void 0===d&&(d=0);void 0===g&&(g=c.length/c.itemSize);for(var f=0;f<g;f++,d++)b.x=c.getX(d),b.y=c.getY(d),b.z=c.getZ(d),b.applyMatrix3(this),c.setXYZ(b.x,b.y,b.z);return c}}(),
multiplyScalar:function(b){var c=this.elements;c[0]*=b;c[3]*=b;c[6]*=b;c[1]*=b;c[4]*=b;c[7]*=b;c[2]*=b;c[5]*=b;c[8]*=b;return this},determinant:function(){var b=this.elements,c=b[0],d=b[1],g=b[2],f=b[3],h=b[4],k=b[5],l=b[6],m=b[7],b=b[8];return c*h*b-c*k*m-d*f*b+d*k*l+g*f*m-g*h*l},getInverse:function(b,c){b instanceof THREE.Matrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var d=b.elements,g=this.elements,f=d[0],h=d[1],k=d[2],l=d[3],m=d[4],t=d[5],u=d[6],q=d[7],
d=d[8],n=d*m-t*q,r=t*u-d*l,p=q*l-m*u,w=f*n+h*r+k*p;if(0===w){if(c)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return this.identity()}w=1/w;g[0]=n*w;g[1]=(k*q-d*h)*w;g[2]=(t*h-k*m)*w;g[3]=r*w;g[4]=(d*f-k*u)*w;g[5]=(k*l-t*f)*w;g[6]=p*w;g[7]=(h*u-q*f)*w;g[8]=(m*f-h*l)*w;return this},transpose:function(){var b,c=this.elements;b=c[1];c[1]=c[3];c[3]=b;b=c[2];c[2]=c[6];c[6]=b;b=c[5];c[5]=
c[7];c[7]=b;return this},flattenToArrayOffset:function(b,c){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");return this.toArray(b,c)},getNormalMatrix:function(b){return this.setFromMatrix4(b).getInverse(this).transpose()},transposeIntoArray:function(b){var c=this.elements;b[0]=c[0];b[1]=c[3];b[2]=c[6];b[3]=c[1];b[4]=c[4];b[5]=c[7];b[6]=c[2];b[7]=c[5];b[8]=c[8];return this},fromArray:function(b){this.elements.set(b);return this},toArray:function(b,c){void 0===
b&&(b=[]);void 0===c&&(c=0);var d=this.elements;b[c]=d[0];b[c+1]=d[1];b[c+2]=d[2];b[c+3]=d[3];b[c+4]=d[4];b[c+5]=d[5];b[c+6]=d[6];b[c+7]=d[7];b[c+8]=d[8];return b}};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(b,c,d,g,f,h,k,l,m,t,u,q,n,r,p,w){var v=this.elements;v[0]=b;v[4]=c;v[8]=d;v[12]=g;v[1]=f;v[5]=h;v[9]=k;v[13]=l;v[2]=m;v[6]=t;v[10]=u;v[14]=q;v[3]=n;v[7]=r;v[11]=p;v[15]=w;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(b){this.elements.set(b.elements);return this},copyPosition:function(b){var c=this.elements;b=b.elements;
c[12]=b[12];c[13]=b[13];c[14]=b[14];return this},extractBasis:function(b,c,d){b.setFromMatrixColumn(this,0);c.setFromMatrixColumn(this,1);d.setFromMatrixColumn(this,2);return this},makeBasis:function(b,c,d){this.set(b.x,c.x,d.x,0,b.y,c.y,d.y,0,b.z,c.z,d.z,0,0,0,0,1);return this},extractRotation:function(){var b;return function(c){void 0===b&&(b=new THREE.Vector3);var d=this.elements,g=c.elements,f=1/b.setFromMatrixColumn(c,0).length(),h=1/b.setFromMatrixColumn(c,1).length();c=1/b.setFromMatrixColumn(c,
2).length();d[0]=g[0]*f;d[1]=g[1]*f;d[2]=g[2]*f;d[4]=g[4]*h;d[5]=g[5]*h;d[6]=g[6]*h;d[8]=g[8]*c;d[9]=g[9]*c;d[10]=g[10]*c;return this}}(),makeRotationFromEuler:function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=this.elements,d=b.x,g=b.y,f=b.z,h=Math.cos(d),d=Math.sin(d),k=Math.cos(g),g=Math.sin(g),l=Math.cos(f),f=Math.sin(f);if("XYZ"===b.order){b=h*l;var m=h*f,t=d*l,u=d*f;c[0]=k*l;c[4]=
-k*f;c[8]=g;c[1]=m+t*g;c[5]=b-u*g;c[9]=-d*k;c[2]=u-b*g;c[6]=t+m*g;c[10]=h*k}else"YXZ"===b.order?(b=k*l,m=k*f,t=g*l,u=g*f,c[0]=b+u*d,c[4]=t*d-m,c[8]=h*g,c[1]=h*f,c[5]=h*l,c[9]=-d,c[2]=m*d-t,c[6]=u+b*d,c[10]=h*k):"ZXY"===b.order?(b=k*l,m=k*f,t=g*l,u=g*f,c[0]=b-u*d,c[4]=-h*f,c[8]=t+m*d,c[1]=m+t*d,c[5]=h*l,c[9]=u-b*d,c[2]=-h*g,c[6]=d,c[10]=h*k):"ZYX"===b.order?(b=h*l,m=h*f,t=d*l,u=d*f,c[0]=k*l,c[4]=t*g-m,c[8]=b*g+u,c[1]=k*f,c[5]=u*g+b,c[9]=m*g-t,c[2]=-g,c[6]=d*k,c[10]=h*k):"YZX"===b.order?(b=h*k,m=h*
g,t=d*k,u=d*g,c[0]=k*l,c[4]=u-b*f,c[8]=t*f+m,c[1]=f,c[5]=h*l,c[9]=-d*l,c[2]=-g*l,c[6]=m*f+t,c[10]=b-u*f):"XZY"===b.order&&(b=h*k,m=h*g,t=d*k,u=d*g,c[0]=k*l,c[4]=-f,c[8]=g*l,c[1]=b*f+u,c[5]=h*l,c[9]=m*f-t,c[2]=t*f-m,c[6]=d*l,c[10]=u*f+b);c[3]=0;c[7]=0;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this},makeRotationFromQuaternion:function(b){var c=this.elements,d=b.x,g=b.y,f=b.z,h=b.w,k=d+d,l=g+g,m=f+f;b=d*k;var t=d*l,d=d*m,u=g*l,g=g*m,f=f*m,k=h*k,l=h*l,h=h*m;c[0]=1-(u+f);c[4]=t-h;c[8]=d+l;c[1]=t+
h;c[5]=1-(b+f);c[9]=g-k;c[2]=d-l;c[6]=g+k;c[10]=1-(b+u);c[3]=0;c[7]=0;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this},lookAt:function(){var b,c,d;return function(g,f,h){void 0===b&&(b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3);var k=this.elements;d.subVectors(g,f).normalize();0===d.lengthSq()&&(d.z=1);b.crossVectors(h,d).normalize();0===b.lengthSq()&&(d.z+=1E-4,b.crossVectors(h,d).normalize());c.crossVectors(d,b);k[0]=b.x;k[4]=c.x;k[8]=d.x;k[1]=b.y;k[5]=c.y;k[9]=d.y;k[2]=b.z;
k[6]=c.z;k[10]=d.z;return this}}(),multiply:function(b,c){return void 0!==c?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(b,c)):this.multiplyMatrices(this,b)},premultiply:function(b){return this.multiplyMatrices(b,this)},multiplyMatrices:function(b,c){var d=b.elements,g=c.elements,f=this.elements,h=d[0],k=d[4],l=d[8],m=d[12],t=d[1],u=d[5],q=d[9],n=d[13],r=d[2],p=d[6],w=d[10],v=d[14],y=d[3],A=d[7],x=d[11],d=d[15],
z=g[0],D=g[4],B=g[8],C=g[12],E=g[1],G=g[5],H=g[9],I=g[13],L=g[2],J=g[6],K=g[10],M=g[14],P=g[3],N=g[7],S=g[11],g=g[15];f[0]=h*z+k*E+l*L+m*P;f[4]=h*D+k*G+l*J+m*N;f[8]=h*B+k*H+l*K+m*S;f[12]=h*C+k*I+l*M+m*g;f[1]=t*z+u*E+q*L+n*P;f[5]=t*D+u*G+q*J+n*N;f[9]=t*B+u*H+q*K+n*S;f[13]=t*C+u*I+q*M+n*g;f[2]=r*z+p*E+w*L+v*P;f[6]=r*D+p*G+w*J+v*N;f[10]=r*B+p*H+w*K+v*S;f[14]=r*C+p*I+w*M+v*g;f[3]=y*z+A*E+x*L+d*P;f[7]=y*D+A*G+x*J+d*N;f[11]=y*B+A*H+x*K+d*S;f[15]=y*C+A*I+x*M+d*g;return this},multiplyToArray:function(b,c,
d){var g=this.elements;this.multiplyMatrices(b,c);d[0]=g[0];d[1]=g[1];d[2]=g[2];d[3]=g[3];d[4]=g[4];d[5]=g[5];d[6]=g[6];d[7]=g[7];d[8]=g[8];d[9]=g[9];d[10]=g[10];d[11]=g[11];d[12]=g[12];d[13]=g[13];d[14]=g[14];d[15]=g[15];return this},multiplyScalar:function(b){var c=this.elements;c[0]*=b;c[4]*=b;c[8]*=b;c[12]*=b;c[1]*=b;c[5]*=b;c[9]*=b;c[13]*=b;c[2]*=b;c[6]*=b;c[10]*=b;c[14]*=b;c[3]*=b;c[7]*=b;c[11]*=b;c[15]*=b;return this},applyToVector3Array:function(){var b;return function(c,d,g){void 0===b&&
(b=new THREE.Vector3);void 0===d&&(d=0);void 0===g&&(g=c.length);for(var f=0;f<g;f+=3,d+=3)b.fromArray(c,d),b.applyMatrix4(this),b.toArray(c,d);return c}}(),applyToBuffer:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Vector3);void 0===d&&(d=0);void 0===g&&(g=c.length/c.itemSize);for(var f=0;f<g;f++,d++)b.x=c.getX(d),b.y=c.getY(d),b.z=c.getZ(d),b.applyMatrix4(this),c.setXYZ(b.x,b.y,b.z);return c}}(),determinant:function(){var b=this.elements,c=b[0],d=b[4],g=b[8],f=b[12],h=b[1],k=
b[5],l=b[9],m=b[13],t=b[2],u=b[6],q=b[10],n=b[14];return b[3]*(+f*l*u-g*m*u-f*k*q+d*m*q+g*k*n-d*l*n)+b[7]*(+c*l*n-c*m*q+f*h*q-g*h*n+g*m*t-f*l*t)+b[11]*(+c*m*u-c*k*n-f*h*u+d*h*n+f*k*t-d*m*t)+b[15]*(-g*k*t-c*l*u+c*k*q+g*h*u-d*h*q+d*l*t)},transpose:function(){var b=this.elements,c;c=b[1];b[1]=b[4];b[4]=c;c=b[2];b[2]=b[8];b[8]=c;c=b[6];b[6]=b[9];b[9]=c;c=b[3];b[3]=b[12];b[12]=c;c=b[7];b[7]=b[13];b[13]=c;c=b[11];b[11]=b[14];b[14]=c;return this},flattenToArrayOffset:function(b,c){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");
return this.toArray(b,c)},getPosition:function(){var b;return function(){void 0===b&&(b=new THREE.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return b.setFromMatrixColumn(this,3)}}(),setPosition:function(b){var c=this.elements;c[12]=b.x;c[13]=b.y;c[14]=b.z;return this},getInverse:function(b,c){var d=this.elements,g=b.elements,f=g[0],h=g[1],k=g[2],l=g[3],m=g[4],t=g[5],u=g[6],q=g[7],n=g[8],r=g[9],p=g[10],w=g[11],v=g[12],
y=g[13],A=g[14],g=g[15],x=r*A*q-y*p*q+y*u*w-t*A*w-r*u*g+t*p*g,z=v*p*q-n*A*q-v*u*w+m*A*w+n*u*g-m*p*g,D=n*y*q-v*r*q+v*t*w-m*y*w-n*t*g+m*r*g,B=v*r*u-n*y*u-v*t*p+m*y*p+n*t*A-m*r*A,C=f*x+h*z+k*D+l*B;if(0===C){if(c)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return this.identity()}C=1/C;d[0]=x*C;d[1]=(y*p*l-r*A*l-y*k*w+h*A*w+r*k*g-h*p*g)*C;d[2]=(t*A*l-y*u*l+y*k*q-h*A*q-t*k*g+h*u*g)*C;d[3]=
(r*u*l-t*p*l-r*k*q+h*p*q+t*k*w-h*u*w)*C;d[4]=z*C;d[5]=(n*A*l-v*p*l+v*k*w-f*A*w-n*k*g+f*p*g)*C;d[6]=(v*u*l-m*A*l-v*k*q+f*A*q+m*k*g-f*u*g)*C;d[7]=(m*p*l-n*u*l+n*k*q-f*p*q-m*k*w+f*u*w)*C;d[8]=D*C;d[9]=(v*r*l-n*y*l-v*h*w+f*y*w+n*h*g-f*r*g)*C;d[10]=(m*y*l-v*t*l+v*h*q-f*y*q-m*h*g+f*t*g)*C;d[11]=(n*t*l-m*r*l-n*h*q+f*r*q+m*h*w-f*t*w)*C;d[12]=B*C;d[13]=(n*y*k-v*r*k+v*h*p-f*y*p-n*h*A+f*r*A)*C;d[14]=(v*t*k-m*y*k-v*h*u+f*y*u+m*h*A-f*t*A)*C;d[15]=(m*r*k-n*t*k+n*h*u-f*r*u-m*h*p+f*t*p)*C;return this},scale:function(b){var c=
this.elements,d=b.x,g=b.y;b=b.z;c[0]*=d;c[4]*=g;c[8]*=b;c[1]*=d;c[5]*=g;c[9]*=b;c[2]*=d;c[6]*=g;c[10]*=b;c[3]*=d;c[7]*=g;c[11]*=b;return this},getMaxScaleOnAxis:function(){var b=this.elements;return Math.sqrt(Math.max(b[0]*b[0]+b[1]*b[1]+b[2]*b[2],b[4]*b[4]+b[5]*b[5]+b[6]*b[6],b[8]*b[8]+b[9]*b[9]+b[10]*b[10]))},makeTranslation:function(b,c,d){this.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1);return this},makeRotationX:function(b){var c=Math.cos(b);b=Math.sin(b);this.set(1,0,0,0,0,c,-b,0,0,b,c,0,0,0,0,1);
return this},makeRotationY:function(b){var c=Math.cos(b);b=Math.sin(b);this.set(c,0,b,0,0,1,0,0,-b,0,c,0,0,0,0,1);return this},makeRotationZ:function(b){var c=Math.cos(b);b=Math.sin(b);this.set(c,-b,0,0,b,c,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(b,c){var d=Math.cos(c),g=Math.sin(c),f=1-d,h=b.x,k=b.y,l=b.z,m=f*h,t=f*k;this.set(m*h+d,m*k-g*l,m*l+g*k,0,m*k+g*l,t*k+d,t*l-g*h,0,m*l-g*k,t*l+g*h,f*l*l+d,0,0,0,0,1);return this},makeScale:function(b,c,d){this.set(b,0,0,0,0,c,0,0,0,0,d,
0,0,0,0,1);return this},compose:function(b,c,d){this.makeRotationFromQuaternion(c);this.scale(d);this.setPosition(b);return this},decompose:function(){var b,c;return function(d,g,f){void 0===b&&(b=new THREE.Vector3,c=new THREE.Matrix4);var h=this.elements,k=b.set(h[0],h[1],h[2]).length(),l=b.set(h[4],h[5],h[6]).length(),m=b.set(h[8],h[9],h[10]).length();0>this.determinant()&&(k=-k);d.x=h[12];d.y=h[13];d.z=h[14];c.elements.set(this.elements);d=1/k;var h=1/l,t=1/m;c.elements[0]*=d;c.elements[1]*=d;
c.elements[2]*=d;c.elements[4]*=h;c.elements[5]*=h;c.elements[6]*=h;c.elements[8]*=t;c.elements[9]*=t;c.elements[10]*=t;g.setFromRotationMatrix(c);f.x=k;f.y=l;f.z=m;return this}}(),makeFrustum:function(b,c,d,g,f,h){var k=this.elements;k[0]=2*f/(c-b);k[4]=0;k[8]=(c+b)/(c-b);k[12]=0;k[1]=0;k[5]=2*f/(g-d);k[9]=(g+d)/(g-d);k[13]=0;k[2]=0;k[6]=0;k[10]=-(h+f)/(h-f);k[14]=-2*h*f/(h-f);k[3]=0;k[7]=0;k[11]=-1;k[15]=0;return this},makePerspective:function(b,c,d,g){b=d*Math.tan(THREE.Math.DEG2RAD*b*.5);var f=
-b;return this.makeFrustum(f*c,b*c,f,b,d,g)},makeOrthographic:function(b,c,d,g,f,h){var k=this.elements,l=1/(c-b),m=1/(d-g),t=1/(h-f);k[0]=2*l;k[4]=0;k[8]=0;k[12]=-((c+b)*l);k[1]=0;k[5]=2*m;k[9]=0;k[13]=-((d+g)*m);k[2]=0;k[6]=0;k[10]=-2*t;k[14]=-((h+f)*t);k[3]=0;k[7]=0;k[11]=0;k[15]=1;return this},equals:function(b){var c=this.elements;b=b.elements;for(var d=0;16>d;d++)if(c[d]!==b[d])return!1;return!0},fromArray:function(b){this.elements.set(b);return this},toArray:function(b,c){void 0===b&&(b=[]);
void 0===c&&(c=0);var d=this.elements;b[c]=d[0];b[c+1]=d[1];b[c+2]=d[2];b[c+3]=d[3];b[c+4]=d[4];b[c+5]=d[5];b[c+6]=d[6];b[c+7]=d[7];b[c+8]=d[8];b[c+9]=d[9];b[c+10]=d[10];b[c+11]=d[11];b[c+12]=d[12];b[c+13]=d[13];b[c+14]=d[14];b[c+15]=d[15];return b}};THREE.Ray=function(b,c){this.origin=void 0!==b?b:new THREE.Vector3;this.direction=void 0!==c?c:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(b,c){this.origin.copy(b);this.direction.copy(c);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.origin.copy(b.origin);this.direction.copy(b.direction);return this},at:function(b,c){return(c||new THREE.Vector3).copy(this.direction).multiplyScalar(b).add(this.origin)},lookAt:function(b){this.direction.copy(b).sub(this.origin).normalize();return this},recast:function(){var b=new THREE.Vector3;return function(c){this.origin.copy(this.at(c,
b));return this}}(),closestPointToPoint:function(b,c){var d=c||new THREE.Vector3;d.subVectors(b,this.origin);var g=d.dot(this.direction);return 0>g?d.copy(this.origin):d.copy(this.direction).multiplyScalar(g).add(this.origin)},distanceToPoint:function(b){return Math.sqrt(this.distanceSqToPoint(b))},distanceSqToPoint:function(){var b=new THREE.Vector3;return function(c){var d=b.subVectors(c,this.origin).dot(this.direction);if(0>d)return this.origin.distanceToSquared(c);b.copy(this.direction).multiplyScalar(d).add(this.origin);
return b.distanceToSquared(c)}}(),distanceSqToSegment:function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(g,f,h,k){b.copy(g).add(f).multiplyScalar(.5);c.copy(f).sub(g).normalize();d.copy(this.origin).sub(b);var l=.5*g.distanceTo(f),m=-this.direction.dot(c),t=d.dot(this.direction),u=-d.dot(c),q=d.lengthSq(),n=Math.abs(1-m*m),r;0<n?(g=m*u-t,f=m*t-u,r=l*n,0<=g?f>=-r?f<=r?(l=1/n,g*=l,f*=l,m=g*(g+m*f+2*t)+f*(m*g+f+2*u)+q):(f=l,g=Math.max(0,-(m*f+t)),m=-g*g+f*(f+2*
u)+q):(f=-l,g=Math.max(0,-(m*f+t)),m=-g*g+f*(f+2*u)+q):f<=-r?(g=Math.max(0,-(-m*l+t)),f=0<g?-l:Math.min(Math.max(-l,-u),l),m=-g*g+f*(f+2*u)+q):f<=r?(g=0,f=Math.min(Math.max(-l,-u),l),m=f*(f+2*u)+q):(g=Math.max(0,-(m*l+t)),f=0<g?l:Math.min(Math.max(-l,-u),l),m=-g*g+f*(f+2*u)+q)):(f=0<m?-l:l,g=Math.max(0,-(m*f+t)),m=-g*g+f*(f+2*u)+q);h&&h.copy(this.direction).multiplyScalar(g).add(this.origin);k&&k.copy(c).multiplyScalar(f).add(b);return m}}(),intersectSphere:function(){var b=new THREE.Vector3;return function(c,
d){b.subVectors(c.center,this.origin);var g=b.dot(this.direction),f=b.dot(b)-g*g,h=c.radius*c.radius;if(f>h)return null;h=Math.sqrt(h-f);f=g-h;g+=h;return 0>f&&0>g?null:0>f?this.at(g,d):this.at(f,d)}}(),intersectsSphere:function(b){return this.distanceToPoint(b.center)<=b.radius},distanceToPlane:function(b){var c=b.normal.dot(this.direction);if(0===c)return 0===b.distanceToPoint(this.origin)?0:null;b=-(this.origin.dot(b.normal)+b.constant)/c;return 0<=b?b:null},intersectPlane:function(b,c){var d=
this.distanceToPlane(b);return null===d?null:this.at(d,c)},intersectsPlane:function(b){var c=b.distanceToPoint(this.origin);return 0===c||0>b.normal.dot(this.direction)*c?!0:!1},intersectBox:function(b,c){var d,g,f,h,k;g=1/this.direction.x;h=1/this.direction.y;k=1/this.direction.z;var l=this.origin;0<=g?(d=(b.min.x-l.x)*g,g*=b.max.x-l.x):(d=(b.max.x-l.x)*g,g*=b.min.x-l.x);0<=h?(f=(b.min.y-l.y)*h,h*=b.max.y-l.y):(f=(b.max.y-l.y)*h,h*=b.min.y-l.y);if(d>h||f>g)return null;if(f>d||d!==d)d=f;if(h<g||g!==
g)g=h;0<=k?(f=(b.min.z-l.z)*k,k*=b.max.z-l.z):(f=(b.max.z-l.z)*k,k*=b.min.z-l.z);if(d>k||f>g)return null;if(f>d||d!==d)d=f;if(k<g||g!==g)g=k;return 0>g?null:this.at(0<=d?d:g,c)},intersectsBox:function(){var b=new THREE.Vector3;return function(c){return null!==this.intersectBox(c,b)}}(),intersectTriangle:function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3,g=new THREE.Vector3;return function(f,h,k,l,m){c.subVectors(h,f);d.subVectors(k,f);g.crossVectors(c,d);h=this.direction.dot(g);
if(0<h){if(l)return null;l=1}else if(0>h)l=-1,h=-h;else return null;b.subVectors(this.origin,f);f=l*this.direction.dot(d.crossVectors(b,d));if(0>f)return null;k=l*this.direction.dot(c.cross(b));if(0>k||f+k>h)return null;f=-l*b.dot(g);return 0>f?null:this.at(f/h,m)}}(),applyMatrix4:function(b){this.direction.add(this.origin).applyMatrix4(b);this.origin.applyMatrix4(b);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(b){return b.origin.equals(this.origin)&&b.direction.equals(this.direction)}};
THREE.Sphere=function(b,c){this.center=void 0!==b?b:new THREE.Vector3;this.radius=void 0!==c?c:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(b,c){this.center.copy(b);this.radius=c;return this},setFromPoints:function(){var b=new THREE.Box3;return function(c,d){var g=this.center;void 0!==d?g.copy(d):b.setFromPoints(c).center(g);for(var f=0,h=0,k=c.length;h<k;h++)f=Math.max(f,g.distanceToSquared(c[h]));this.radius=Math.sqrt(f);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.center.copy(b.center);this.radius=b.radius;return this},
empty:function(){return 0>=this.radius},containsPoint:function(b){return b.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(b){return b.distanceTo(this.center)-this.radius},intersectsSphere:function(b){var c=this.radius+b.radius;return b.center.distanceToSquared(this.center)<=c*c},intersectsBox:function(b){return b.intersectsSphere(this)},intersectsPlane:function(b){return Math.abs(this.center.dot(b.normal)-b.constant)<=this.radius},clampPoint:function(b,c){var d=
this.center.distanceToSquared(b),g=c||new THREE.Vector3;g.copy(b);d>this.radius*this.radius&&(g.sub(this.center).normalize(),g.multiplyScalar(this.radius).add(this.center));return g},getBoundingBox:function(b){b=b||new THREE.Box3;b.set(this.center,this.center);b.expandByScalar(this.radius);return b},applyMatrix4:function(b){this.center.applyMatrix4(b);this.radius*=b.getMaxScaleOnAxis();return this},translate:function(b){this.center.add(b);return this},equals:function(b){return b.center.equals(this.center)&&
b.radius===this.radius}};THREE.Frustum=function(b,c,d,g,f,h){this.planes=[void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==g?g:new THREE.Plane,void 0!==f?f:new THREE.Plane,void 0!==h?h:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(b,c,d,g,f,h){var k=this.planes;k[0].copy(b);k[1].copy(c);k[2].copy(d);k[3].copy(g);k[4].copy(f);k[5].copy(h);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){for(var c=this.planes,d=0;6>d;d++)c[d].copy(b.planes[d]);return this},setFromMatrix:function(b){var c=this.planes,d=b.elements;b=d[0];var g=d[1],f=d[2],h=d[3],k=d[4],l=d[5],m=d[6],t=d[7],u=d[8],q=d[9],n=d[10],r=d[11],p=d[12],w=d[13],v=d[14],
d=d[15];c[0].setComponents(h-b,t-k,r-u,d-p).normalize();c[1].setComponents(h+b,t+k,r+u,d+p).normalize();c[2].setComponents(h+g,t+l,r+q,d+w).normalize();c[3].setComponents(h-g,t-l,r-q,d-w).normalize();c[4].setComponents(h-f,t-m,r-n,d-v).normalize();c[5].setComponents(h+f,t+m,r+n,d+v).normalize();return this},intersectsObject:function(){var b=new THREE.Sphere;return function(c){var d=c.geometry;null===d.boundingSphere&&d.computeBoundingSphere();b.copy(d.boundingSphere).applyMatrix4(c.matrixWorld);return this.intersectsSphere(b)}}(),
intersectsSprite:function(){var b=new THREE.Sphere;return function(c){b.center.set(0,0,0);b.radius=.7071067811865476;b.applyMatrix4(c.matrixWorld);return this.intersectsSphere(b)}}(),intersectsSphere:function(b){var c=this.planes,d=b.center;b=-b.radius;for(var g=0;6>g;g++)if(c[g].distanceToPoint(d)<b)return!1;return!0},intersectsBox:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d){for(var g=this.planes,f=0;6>f;f++){var h=g[f];b.x=0<h.normal.x?d.min.x:d.max.x;c.x=0<h.normal.x?
d.max.x:d.min.x;b.y=0<h.normal.y?d.min.y:d.max.y;c.y=0<h.normal.y?d.max.y:d.min.y;b.z=0<h.normal.z?d.min.z:d.max.z;c.z=0<h.normal.z?d.max.z:d.min.z;var k=h.distanceToPoint(b),h=h.distanceToPoint(c);if(0>k&&0>h)return!1}return!0}}(),containsPoint:function(b){for(var c=this.planes,d=0;6>d;d++)if(0>c[d].distanceToPoint(b))return!1;return!0}};THREE.Plane=function(b,c){this.normal=void 0!==b?b:new THREE.Vector3(1,0,0);this.constant=void 0!==c?c:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(b,c){this.normal.copy(b);this.constant=c;return this},setComponents:function(b,c,d,g){this.normal.set(b,c,d);this.constant=g;return this},setFromNormalAndCoplanarPoint:function(b,c){this.normal.copy(b);this.constant=-c.dot(this.normal);return this},setFromCoplanarPoints:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d,g,f){g=b.subVectors(f,g).cross(c.subVectors(d,g)).normalize();this.setFromNormalAndCoplanarPoint(g,
d);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.normal.copy(b.normal);this.constant=b.constant;return this},normalize:function(){var b=1/this.normal.length();this.normal.multiplyScalar(b);this.constant*=b;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(b){return this.normal.dot(b)+this.constant},distanceToSphere:function(b){return this.distanceToPoint(b.center)-b.radius},projectPoint:function(b,
c){return this.orthoPoint(b,c).sub(b).negate()},orthoPoint:function(b,c){var d=this.distanceToPoint(b);return(c||new THREE.Vector3).copy(this.normal).multiplyScalar(d)},intersectLine:function(){var b=new THREE.Vector3;return function(c,d){var g=d||new THREE.Vector3,f=c.delta(b),h=this.normal.dot(f);if(0===h){if(0===this.distanceToPoint(c.start))return g.copy(c.start)}else return h=-(c.start.dot(this.normal)+this.constant)/h,0>h||1<h?void 0:g.copy(f).multiplyScalar(h).add(c.start)}}(),intersectsLine:function(b){var c=
this.distanceToPoint(b.start);b=this.distanceToPoint(b.end);return 0>c&&0<b||0>b&&0<c},intersectsBox:function(b){return b.intersectsPlane(this)},intersectsSphere:function(b){return b.intersectsPlane(this)},coplanarPoint:function(b){return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,g){var f=this.coplanarPoint(b).applyMatrix4(d),h=g||c.getNormalMatrix(d),h=this.normal.applyMatrix3(h).normalize();
this.constant=-f.dot(h);return this}}(),translate:function(b){this.constant-=b.dot(this.normal);return this},equals:function(b){return b.normal.equals(this.normal)&&b.constant===this.constant}};THREE.Spherical=function(b,c,d){this.radius=void 0!==b?b:1;this.phi=void 0!==c?c:0;this.theta=void 0!==d?d:0;return this};
THREE.Spherical.prototype={constructor:THREE.Spherical,set:function(b,c,d){this.radius=b;this.phi=c;this.theta=d;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.radius.copy(b.radius);this.phi.copy(b.phi);this.theta.copy(b.theta);return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(b){this.radius=b.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(b.x,b.z),this.phi=
Math.acos(THREE.Math.clamp(b.y/this.radius,-1,1)));return this}};
THREE.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=Array(36),d=0,g;return function(){for(var f=0;36>f;f++)8===f||13===f||18===f||23===f?c[f]="-":14===f?c[f]="4":(2>=d&&(d=33554432+16777216*Math.random()|0),g=d&15,d>>=4,c[f]=b[19===f?g&3|8:g]);return c.join("")}}(),clamp:function(b,c,d){return Math.max(c,Math.min(d,b))},euclideanModulo:function(b,c){return(b%c+c)%c},mapLinear:function(b,c,d,
g,f){return g+(b-c)*(f-g)/(d-c)},smoothstep:function(b,c,d){if(b<=c)return 0;if(b>=d)return 1;b=(b-c)/(d-c);return b*b*(3-2*b)},smootherstep:function(b,c,d){if(b<=c)return 0;if(b>=d)return 1;b=(b-c)/(d-c);return b*b*b*(b*(6*b-15)+10)},random16:function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()},randInt:function(b,c){return b+Math.floor(Math.random()*(c-b+1))},randFloat:function(b,c){return b+Math.random()*(c-b)},randFloatSpread:function(b){return b*
(.5-Math.random())},degToRad:function(b){return b*THREE.Math.DEG2RAD},radToDeg:function(b){return b*THREE.Math.RAD2DEG},isPowerOfTwo:function(b){return 0===(b&b-1)&&0!==b},nearestPowerOfTwo:function(b){return Math.pow(2,Math.round(Math.log(b)/Math.LN2))},nextPowerOfTwo:function(b){b--;b|=b>>1;b|=b>>2;b|=b>>4;b|=b>>8;b|=b>>16;b++;return b}};
THREE.Spline=function(b){function c(b,c,f,d,g,h,k){b=.5*(f-b);d=.5*(d-c);return(2*(c-f)+b+d)*k+(-3*(c-f)-2*b-d)*h+b*g+c}this.points=b;var d=[],g={x:0,y:0,z:0},f,h,k,l,m,t,u,q,n;this.initFromArray=function(b){this.points=[];for(var c=0;c<b.length;c++)this.points[c]={x:b[c][0],y:b[c][1],z:b[c][2]}};this.getPoint=function(b){f=(this.points.length-1)*b;h=Math.floor(f);k=f-h;d[0]=0===h?h:h-1;d[1]=h;d[2]=h>this.points.length-2?this.points.length-1:h+1;d[3]=h>this.points.length-3?this.points.length-1:h+
2;t=this.points[d[0]];u=this.points[d[1]];q=this.points[d[2]];n=this.points[d[3]];l=k*k;m=k*l;g.x=c(t.x,u.x,q.x,n.x,k,l,m);g.y=c(t.y,u.y,q.y,n.y,k,l,m);g.z=c(t.z,u.z,q.z,n.z,k,l,m);return g};this.getControlPointsArray=function(){var b,c,f=this.points.length,d=[];for(b=0;b<f;b++)c=this.points[b],d[b]=[c.x,c.y,c.z];return d};this.getLength=function(b){var c,f,d,g=c=c=0,h=new THREE.Vector3,k=new THREE.Vector3,l=[],m=0;l[0]=0;b||(b=100);f=this.points.length*b;h.copy(this.points[0]);for(b=1;b<f;b++)c=
b/f,d=this.getPoint(c),k.copy(d),m+=k.distanceTo(h),h.copy(d),c*=this.points.length-1,c=Math.floor(c),c!==g&&(l[c]=m,g=c);l[l.length]=m;return{chunks:l,total:m}};this.reparametrizeByArcLength=function(b){var c,f,d,g,h,k,l=[],m=new THREE.Vector3,n=this.getLength();l.push(m.copy(this.points[0]).clone());for(c=1;c<this.points.length;c++){f=n.chunks[c]-n.chunks[c-1];k=Math.ceil(b*f/n.total);g=(c-1)/(this.points.length-1);h=c/(this.points.length-1);for(f=1;f<k-1;f++)d=g+1/k*f*(h-g),d=this.getPoint(d),
l.push(m.copy(d).clone());l.push(m.copy(this.points[c]).clone())}this.points=l}};THREE.Triangle=function(b,c,d){this.a=void 0!==b?b:new THREE.Vector3;this.b=void 0!==c?c:new THREE.Vector3;this.c=void 0!==d?d:new THREE.Vector3};THREE.Triangle.normal=function(){var b=new THREE.Vector3;return function(c,d,g,f){f=f||new THREE.Vector3;f.subVectors(g,d);b.subVectors(c,d);f.cross(b);c=f.lengthSq();return 0<c?f.multiplyScalar(1/Math.sqrt(c)):f.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(g,f,h,k,l){b.subVectors(k,f);c.subVectors(h,f);d.subVectors(g,f);g=b.dot(b);f=b.dot(c);h=b.dot(d);var m=c.dot(c);k=c.dot(d);var t=g*m-f*f;l=l||new THREE.Vector3;if(0===t)return l.set(-2,-1,-1);t=1/t;m=(m*h-f*k)*t;g=(g*k-f*h)*t;return l.set(1-m-g,g,m)}}();
THREE.Triangle.containsPoint=function(){var b=new THREE.Vector3;return function(c,d,g,f){c=THREE.Triangle.barycoordFromPoint(c,d,g,f,b);return 0<=c.x&&0<=c.y&&1>=c.x+c.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(b,c,d){this.a.copy(b);this.b.copy(c);this.c.copy(d);return this},setFromPointsAndIndices:function(b,c,d,g){this.a.copy(b[c]);this.b.copy(b[d]);this.c.copy(b[g]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.a.copy(b.a);this.b.copy(b.b);this.c.copy(b.c);return this},area:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(){b.subVectors(this.c,this.b);c.subVectors(this.a,
this.b);return.5*b.cross(c).length()}}(),midpoint:function(b){return(b||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(b){return THREE.Triangle.normal(this.a,this.b,this.c,b)},plane:function(b){return(b||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(b,c){return THREE.Triangle.barycoordFromPoint(b,this.a,this.b,this.c,c)},containsPoint:function(b){return THREE.Triangle.containsPoint(b,this.a,this.b,this.c)},
closestPointToPoint:function(){var b,c,d,g;return function(f,h){void 0===b&&(b=new THREE.Plane,c=[new THREE.Line3,new THREE.Line3,new THREE.Line3],d=new THREE.Vector3,g=new THREE.Vector3);var k=h||new THREE.Vector3,l=Infinity;b.setFromCoplanarPoints(this.a,this.b,this.c);b.projectPoint(f,d);if(!0===this.containsPoint(d))k.copy(d);else{c[0].set(this.a,this.b);c[1].set(this.b,this.c);c[2].set(this.c,this.a);for(var m=0;m<c.length;m++){c[m].closestPointToPoint(d,!0,g);var t=d.distanceToSquared(g);t<
l&&(l=t,k.copy(g))}}return k}}(),equals:function(b){return b.a.equals(this.a)&&b.b.equals(this.b)&&b.c.equals(this.c)}};THREE.Interpolant=function(b,c,d,g){this.parameterPositions=b;this._cachedIndex=0;this.resultBuffer=void 0!==g?g:new c.constructor(d);this.sampleValues=c;this.valueSize=d};
THREE.Interpolant.prototype={constructor:THREE.Interpolant,evaluate:function(b){var c=this.parameterPositions,d=this._cachedIndex,g=c[d],f=c[d-1];a:{b:{c:{d:if(!(b<g)){for(var h=d+2;;){if(void 0===g){if(b<f)break d;this._cachedIndex=d=c.length;return this.afterEnd_(d-1,b,f)}if(d===h)break;f=g;g=c[++d];if(b<g)break b}g=c.length;break c}if(b>=f)break a;else{h=c[1];b<h&&(d=2,f=h);for(h=d-2;;){if(void 0===f)return this._cachedIndex=0,this.beforeStart_(0,b,g);if(d===h)break;g=f;f=c[--d-1];if(b>=f)break b}g=
d;d=0}}for(;d<g;)f=d+g>>>1,b<c[f]?g=f:d=f+1;g=c[d];f=c[d-1];if(void 0===f)return this._cachedIndex=0,this.beforeStart_(0,b,g);if(void 0===g)return this._cachedIndex=d=c.length,this.afterEnd_(d-1,f,b)}this._cachedIndex=d;this.intervalChanged_(d,f,g)}return this.interpolate_(d,f,b,g)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(b){var c=this.resultBuffer,d=this.sampleValues,g=this.valueSize;b*=g;for(var f=0;f!==g;++f)c[f]=
d[b+f];return c},interpolate_:function(b,c,d,g){throw Error("call to abstract method");},intervalChanged_:function(b,c,d){}};Object.assign(THREE.Interpolant.prototype,{beforeStart_:THREE.Interpolant.prototype.copySampleValue_,afterEnd_:THREE.Interpolant.prototype.copySampleValue_});THREE.CubicInterpolant=function(b,c,d,g){THREE.Interpolant.call(this,b,c,d,g);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0};
THREE.CubicInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.CubicInterpolant,DefaultSettings_:{endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},intervalChanged_:function(b,c,d){var g=this.parameterPositions,f=b-2,h=b+1,k=g[f],l=g[h];if(void 0===k)switch(this.getSettings_().endingStart){case THREE.ZeroSlopeEnding:f=b;k=2*c-d;break;case THREE.WrapAroundEnding:f=g.length-2;k=c+g[f]-g[f+1];break;default:f=b,k=d}if(void 0===l)switch(this.getSettings_().endingEnd){case THREE.ZeroSlopeEnding:h=
b;l=2*d-c;break;case THREE.WrapAroundEnding:h=1;l=d+g[1]-g[0];break;default:h=b-1,l=c}b=.5*(d-c);g=this.valueSize;this._weightPrev=b/(c-k);this._weightNext=b/(l-d);this._offsetPrev=f*g;this._offsetNext=h*g},interpolate_:function(b,c,d,g){var f=this.resultBuffer,h=this.sampleValues,k=this.valueSize;b*=k;var l=b-k,m=this._offsetPrev,t=this._offsetNext,u=this._weightPrev,q=this._weightNext,n=(d-c)/(g-c);d=n*n;g=d*n;c=-u*g+2*u*d-u*n;u=(1+u)*g+(-1.5-2*u)*d+(-.5+u)*n+1;n=(-1-q)*g+(1.5+q)*d+.5*n;q=q*g-q*
d;for(d=0;d!==k;++d)f[d]=c*h[m+d]+u*h[l+d]+n*h[b+d]+q*h[t+d];return f}});THREE.DiscreteInterpolant=function(b,c,d,g){THREE.Interpolant.call(this,b,c,d,g)};THREE.DiscreteInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.DiscreteInterpolant,interpolate_:function(b,c,d,g){return this.copySampleValue_(b-1)}});THREE.LinearInterpolant=function(b,c,d,g){THREE.Interpolant.call(this,b,c,d,g)};
THREE.LinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.LinearInterpolant,interpolate_:function(b,c,d,g){var f=this.resultBuffer,h=this.sampleValues,k=this.valueSize;b*=k;var l=b-k;c=(d-c)/(g-c);d=1-c;for(g=0;g!==k;++g)f[g]=h[l+g]*d+h[b+g]*c;return f}});THREE.QuaternionLinearInterpolant=function(b,c,d,g){THREE.Interpolant.call(this,b,c,d,g)};
THREE.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.QuaternionLinearInterpolant,interpolate_:function(b,c,d,g){var f=this.resultBuffer,h=this.sampleValues,k=this.valueSize;b*=k;c=(d-c)/(g-c);for(d=b+k;b!==d;b+=4)THREE.Quaternion.slerpFlat(f,0,h,b-k,h,b,c);return f}});THREE.Clock=function(b){this.autoStart=void 0!==b?b:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=(performance||Date).now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var b=0;this.autoStart&&!this.running&&this.start();if(this.running){var c=(performance||Date).now(),b=(c-this.oldTime)/1E3;this.oldTime=c;this.elapsedTime+=b}return b}};THREE.EventDispatcher=function(){};
Object.assign(THREE.EventDispatcher.prototype,{addEventListener:function(b,c){void 0===this._listeners&&(this._listeners={});var d=this._listeners;void 0===d[b]&&(d[b]=[]);-1===d[b].indexOf(c)&&d[b].push(c)},hasEventListener:function(b,c){if(void 0===this._listeners)return!1;var d=this._listeners;return void 0!==d[b]&&-1!==d[b].indexOf(c)?!0:!1},removeEventListener:function(b,c){if(void 0!==this._listeners){var d=this._listeners[b];if(void 0!==d){var g=d.indexOf(c);-1!==g&&d.splice(g,1)}}},dispatchEvent:function(b){if(void 0!==
this._listeners){var c=this._listeners[b.type];if(void 0!==c){b.target=this;for(var d=[],g=0,f=c.length,g=0;g<f;g++)d[g]=c[g];for(g=0;g<f;g++)d[g].call(this,b)}}}});THREE.Layers=function(){this.mask=1};THREE.Layers.prototype={constructor:THREE.Layers,set:function(b){this.mask=1<<b},enable:function(b){this.mask|=1<<b},toggle:function(b){this.mask^=1<<b},disable:function(b){this.mask&=~(1<<b)},test:function(b){return 0!==(this.mask&b.mask)}};
(function(b){function c(b,c){return b.distance-c.distance}function d(b,c,h,k){if(!1!==b.visible&&(b.raycast(c,h),!0===k)){b=b.children;k=0;for(var l=b.length;k<l;k++)d(b[k],c,h,!0)}}b.Raycaster=function(c,f,d,k){this.ray=new b.Ray(c,f);this.near=d||0;this.far=k||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})};
b.Raycaster.prototype={constructor:b.Raycaster,linePrecision:1,set:function(b,c){this.ray.set(b,c)},setFromCamera:function(c,f){f instanceof b.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(f.matrixWorld),this.ray.direction.set(c.x,c.y,.5).unproject(f).sub(this.ray.origin).normalize()):f instanceof b.OrthographicCamera?(this.ray.origin.set(c.x,c.y,-1).unproject(f),this.ray.direction.set(0,0,-1).transformDirection(f.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},
intersectObject:function(b,f){var h=[];d(b,this,h,f);h.sort(c);return h},intersectObjects:function(b,f){var h=[];if(!1===Array.isArray(b))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),h;for(var k=0,l=b.length;k<l;k++)d(b[k],this,h,f);h.sort(c);return h}}})(THREE);
THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var b=new THREE.Vector3,c=new THREE.Euler,d=new THREE.Quaternion,g=new THREE.Vector3(1,1,1);c.onChange(function(){d.setFromEuler(c,!1)});d.onChange(function(){c.setFromQuaternion(d,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:b},rotation:{enumerable:!0,
value:c},quaternion:{enumerable:!0,value:d},scale:{enumerable:!0,value:g},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}});this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new THREE.Layers;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};
THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);THREE.Object3D.DefaultMatrixAutoUpdate=!0;
Object.assign(THREE.Object3D.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(b){this.matrix.multiplyMatrices(b,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(b,c){this.quaternion.setFromAxisAngle(b,c)},setRotationFromEuler:function(b){this.quaternion.setFromEuler(b,!0)},setRotationFromMatrix:function(b){this.quaternion.setFromRotationMatrix(b)},setRotationFromQuaternion:function(b){this.quaternion.copy(b)},rotateOnAxis:function(){var b=
new THREE.Quaternion;return function(c,d){b.setFromAxisAngle(c,d);this.quaternion.multiply(b);return this}}(),rotateX:function(){var b=new THREE.Vector3(1,0,0);return function(c){return this.rotateOnAxis(b,c)}}(),rotateY:function(){var b=new THREE.Vector3(0,1,0);return function(c){return this.rotateOnAxis(b,c)}}(),rotateZ:function(){var b=new THREE.Vector3(0,0,1);return function(c){return this.rotateOnAxis(b,c)}}(),translateOnAxis:function(){var b=new THREE.Vector3;return function(c,d){b.copy(c).applyQuaternion(this.quaternion);
this.position.add(b.multiplyScalar(d));return this}}(),translateX:function(){var b=new THREE.Vector3(1,0,0);return function(c){return this.translateOnAxis(b,c)}}(),translateY:function(){var b=new THREE.Vector3(0,1,0);return function(c){return this.translateOnAxis(b,c)}}(),translateZ:function(){var b=new THREE.Vector3(0,0,1);return function(c){return this.translateOnAxis(b,c)}}(),localToWorld:function(b){return b.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var b=new THREE.Matrix4;return function(c){return c.applyMatrix4(b.getInverse(this.matrixWorld))}}(),
lookAt:function(){var b=new THREE.Matrix4;return function(c){b.lookAt(c,this.position,this.up);this.quaternion.setFromRotationMatrix(b)}}(),add:function(b){if(1<arguments.length){for(var c=0;c<arguments.length;c++)this.add(arguments[c]);return this}if(b===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",b),this;b instanceof THREE.Object3D?(null!==b.parent&&b.parent.remove(b),b.parent=this,b.dispatchEvent({type:"added"}),this.children.push(b)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",
b);return this},remove:function(b){if(1<arguments.length)for(var c=0;c<arguments.length;c++)this.remove(arguments[c]);c=this.children.indexOf(b);-1!==c&&(b.parent=null,b.dispatchEvent({type:"removed"}),this.children.splice(c,1))},getObjectById:function(b){return this.getObjectByProperty("id",b)},getObjectByName:function(b){return this.getObjectByProperty("name",b)},getObjectByProperty:function(b,c){if(this[b]===c)return this;for(var d=0,g=this.children.length;d<g;d++){var f=this.children[d].getObjectByProperty(b,
c);if(void 0!==f)return f}},getWorldPosition:function(b){b=b||new THREE.Vector3;this.updateMatrixWorld(!0);return b.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d){d=d||new THREE.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(b,d,c);return d}}(),getWorldRotation:function(){var b=new THREE.Quaternion;return function(c){c=c||new THREE.Euler;this.getWorldQuaternion(b);return c.setFromQuaternion(b,
this.rotation.order,!1)}}(),getWorldScale:function(){var b=new THREE.Vector3,c=new THREE.Quaternion;return function(d){d=d||new THREE.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(b,c,d);return d}}(),getWorldDirection:function(){var b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.getWorldQuaternion(b);return c.set(0,0,1).applyQuaternion(b)}}(),raycast:function(){},traverse:function(b){b(this);for(var c=this.children,d=0,g=c.length;d<g;d++)c[d].traverse(b)},traverseVisible:function(b){if(!1!==
this.visible){b(this);for(var c=this.children,d=0,g=c.length;d<g;d++)c[d].traverseVisible(b)}},traverseAncestors:function(b){var c=this.parent;null!==c&&(b(c),c.traverseAncestors(b))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(b){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===b)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;for(var c=0,d=this.children.length;c<d;c++)this.children[c].updateMatrixWorld(b)},toJSON:function(b){function c(b){var c=[],f;for(f in b){var d=b[f];delete d.metadata;c.push(d)}return c}var d=void 0===b||""===b,g={};d&&(b={geometries:{},materials:{},textures:{},images:{}},g.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var f={};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);"{}"!==JSON.stringify(this.userData)&&
(f.userData=this.userData);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);f.matrix=this.matrix.toArray();void 0!==this.geometry&&(void 0===b.geometries[this.geometry.uuid]&&(b.geometries[this.geometry.uuid]=this.geometry.toJSON(b)),f.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===b.materials[this.material.uuid]&&(b.materials[this.material.uuid]=this.material.toJSON(b)),f.material=this.material.uuid);if(0<this.children.length){f.children=
[];for(var h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(b).object)}if(d){var d=c(b.geometries),h=c(b.materials),k=c(b.textures);b=c(b.images);0<d.length&&(g.geometries=d);0<h.length&&(g.materials=h);0<k.length&&(g.textures=k);0<b.length&&(g.images=b)}g.object=f;return g},clone:function(b){return(new this.constructor).copy(this,b)},copy:function(b,c){void 0===c&&(c=!0);this.name=b.name;this.up.copy(b.up);this.position.copy(b.position);this.quaternion.copy(b.quaternion);this.scale.copy(b.scale);
this.matrix.copy(b.matrix);this.matrixWorld.copy(b.matrixWorld);this.matrixAutoUpdate=b.matrixAutoUpdate;this.matrixWorldNeedsUpdate=b.matrixWorldNeedsUpdate;this.visible=b.visible;this.castShadow=b.castShadow;this.receiveShadow=b.receiveShadow;this.frustumCulled=b.frustumCulled;this.renderOrder=b.renderOrder;this.userData=JSON.parse(JSON.stringify(b.userData));if(!0===c)for(var d=0;d<b.children.length;d++)this.add(b.children[d].clone());return this}});THREE.Object3DIdCount=0;
THREE.Face3=function(b,c,d,g,f,h){this.a=b;this.b=c;this.c=d;this.normal=g instanceof THREE.Vector3?g:new THREE.Vector3;this.vertexNormals=Array.isArray(g)?g:[];this.color=f instanceof THREE.Color?f:new THREE.Color;this.vertexColors=Array.isArray(f)?f:[];this.materialIndex=void 0!==h?h:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.a=b.a;this.b=b.b;this.c=b.c;this.normal.copy(b.normal);this.color.copy(b.color);this.materialIndex=b.materialIndex;for(var c=0,d=b.vertexNormals.length;c<d;c++)this.vertexNormals[c]=b.vertexNormals[c].clone();c=0;for(d=b.vertexColors.length;c<d;c++)this.vertexColors[c]=b.vertexColors[c].clone();return this}};
THREE.BufferAttribute=function(b,c,d){this.uuid=THREE.Math.generateUUID();this.array=b;this.itemSize=c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0;this.normalized=!0===d};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(b){!0===b&&this.version++},setDynamic:function(b){this.dynamic=b;return this},copy:function(b){this.array=new b.array.constructor(b.array);this.itemSize=b.itemSize;this.dynamic=b.dynamic;return this},copyAt:function(b,c,d){b*=this.itemSize;d*=c.itemSize;for(var g=0,f=this.itemSize;g<f;g++)this.array[b+g]=c.array[d+g];return this},copyArray:function(b){this.array.set(b);
return this},copyColorsArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];void 0===h&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",g),h=new THREE.Color);c[d++]=h.r;c[d++]=h.g;c[d++]=h.b}return this},copyIndicesArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];c[d++]=h.a;c[d++]=h.b;c[d++]=h.c}return this},copyVector2sArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",
g),h=new THREE.Vector2);c[d++]=h.x;c[d++]=h.y}return this},copyVector3sArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",g),h=new THREE.Vector3);c[d++]=h.x;c[d++]=h.y;c[d++]=h.z}return this},copyVector4sArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",g),h=new THREE.Vector4);
c[d++]=h.x;c[d++]=h.y;c[d++]=h.z;c[d++]=h.w}return this},set:function(b,c){void 0===c&&(c=0);this.array.set(b,c);return this},getX:function(b){return this.array[b*this.itemSize]},setX:function(b,c){this.array[b*this.itemSize]=c;return this},getY:function(b){return this.array[b*this.itemSize+1]},setY:function(b,c){this.array[b*this.itemSize+1]=c;return this},getZ:function(b){return this.array[b*this.itemSize+2]},setZ:function(b,c){this.array[b*this.itemSize+2]=c;return this},getW:function(b){return this.array[b*
this.itemSize+3]},setW:function(b,c){this.array[b*this.itemSize+3]=c;return this},setXY:function(b,c,d){b*=this.itemSize;this.array[b+0]=c;this.array[b+1]=d;return this},setXYZ:function(b,c,d,g){b*=this.itemSize;this.array[b+0]=c;this.array[b+1]=d;this.array[b+2]=g;return this},setXYZW:function(b,c,d,g,f){b*=this.itemSize;this.array[b+0]=c;this.array[b+1]=d;this.array[b+2]=g;this.array[b+3]=f;return this},clone:function(){return(new this.constructor).copy(this)}};
THREE.Int8Attribute=function(b,c){return new THREE.BufferAttribute(new Int8Array(b),c)};THREE.Uint8Attribute=function(b,c){return new THREE.BufferAttribute(new Uint8Array(b),c)};THREE.Uint8ClampedAttribute=function(b,c){return new THREE.BufferAttribute(new Uint8ClampedArray(b),c)};THREE.Int16Attribute=function(b,c){return new THREE.BufferAttribute(new Int16Array(b),c)};THREE.Uint16Attribute=function(b,c){return new THREE.BufferAttribute(new Uint16Array(b),c)};
THREE.Int32Attribute=function(b,c){return new THREE.BufferAttribute(new Int32Array(b),c)};THREE.Uint32Attribute=function(b,c){return new THREE.BufferAttribute(new Uint32Array(b),c)};THREE.Float32Attribute=function(b,c){return new THREE.BufferAttribute(new Float32Array(b),c)};THREE.Float64Attribute=function(b,c){return new THREE.BufferAttribute(new Float64Array(b),c)};
THREE.DynamicBufferAttribute=function(b,c){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new THREE.BufferAttribute(b,c)).setDynamic(!0)};THREE.InstancedBufferAttribute=function(b,c,d){THREE.BufferAttribute.call(this,b,c);this.meshPerAttribute=d||1};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute;
THREE.InstancedBufferAttribute.prototype.copy=function(b){THREE.BufferAttribute.prototype.copy.call(this,b);this.meshPerAttribute=b.meshPerAttribute;return this};THREE.InterleavedBuffer=function(b,c){this.uuid=THREE.Math.generateUUID();this.array=b;this.stride=c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(b){!0===b&&this.version++},setDynamic:function(b){this.dynamic=b;return this},copy:function(b){this.array=new b.array.constructor(b.array);this.stride=b.stride;this.dynamic=b.dynamic;return this},copyAt:function(b,c,d){b*=this.stride;d*=c.stride;for(var g=0,f=this.stride;g<f;g++)this.array[b+g]=c.array[d+g];return this},set:function(b,
c){void 0===c&&(c=0);this.array.set(b,c);return this},clone:function(){return(new this.constructor).copy(this)}};THREE.InstancedInterleavedBuffer=function(b,c,d){THREE.InterleavedBuffer.call(this,b,c);this.meshPerAttribute=d||1};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;
THREE.InstancedInterleavedBuffer.prototype.copy=function(b){THREE.InterleavedBuffer.prototype.copy.call(this,b);this.meshPerAttribute=b.meshPerAttribute;return this};THREE.InterleavedBufferAttribute=function(b,c,d){this.uuid=THREE.Math.generateUUID();this.data=b;this.itemSize=c;this.offset=d};
THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.data.count},setX:function(b,c){this.data.array[b*this.data.stride+this.offset]=c;return this},setY:function(b,c){this.data.array[b*this.data.stride+this.offset+1]=c;return this},setZ:function(b,c){this.data.array[b*this.data.stride+this.offset+2]=c;return this},
setW:function(b,c){this.data.array[b*this.data.stride+this.offset+3]=c;return this},getX:function(b){return this.data.array[b*this.data.stride+this.offset]},getY:function(b){return this.data.array[b*this.data.stride+this.offset+1]},getZ:function(b){return this.data.array[b*this.data.stride+this.offset+2]},getW:function(b){return this.data.array[b*this.data.stride+this.offset+3]},setXY:function(b,c,d){b=b*this.data.stride+this.offset;this.data.array[b+0]=c;this.data.array[b+1]=d;return this},setXYZ:function(b,
c,d,g){b=b*this.data.stride+this.offset;this.data.array[b+0]=c;this.data.array[b+1]=d;this.data.array[b+2]=g;return this},setXYZW:function(b,c,d,g,f){b=b*this.data.stride+this.offset;this.data.array[b+0]=c;this.data.array[b+1]=d;this.data.array[b+2]=g;this.data.array[b+3]=f;return this}};
THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=
this.verticesNeedUpdate=!1};
Object.assign(THREE.Geometry.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(b){for(var c=(new THREE.Matrix3).getNormalMatrix(b),d=0,g=this.vertices.length;d<g;d++)this.vertices[d].applyMatrix4(b);d=0;for(g=this.faces.length;d<g;d++){b=this.faces[d];b.normal.applyMatrix3(c).normalize();for(var f=0,h=b.vertexNormals.length;f<h;f++)b.vertexNormals[f].applyMatrix3(c).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();
this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationX(c);this.applyMatrix(b);return this}}(),rotateY:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationY(c);this.applyMatrix(b);return this}}(),rotateZ:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationZ(c);this.applyMatrix(b);return this}}(),translate:function(){var b;return function(c,
d,g){void 0===b&&(b=new THREE.Matrix4);b.makeTranslation(c,d,g);this.applyMatrix(b);return this}}(),scale:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Matrix4);b.makeScale(c,d,g);this.applyMatrix(b);return this}}(),lookAt:function(){var b;return function(c){void 0===b&&(b=new THREE.Object3D);b.lookAt(c);b.updateMatrix();this.applyMatrix(b.matrix)}}(),fromBufferGeometry:function(b){function c(b,c,f,g){var h=void 0!==k?[u[b].clone(),u[c].clone(),u[f].clone()]:[],p=void 0!==l?[d.colors[b].clone(),
d.colors[c].clone(),d.colors[f].clone()]:[];g=new THREE.Face3(b,c,f,h,p,g);d.faces.push(g);void 0!==m&&d.faceVertexUvs[0].push([q[b].clone(),q[c].clone(),q[f].clone()]);void 0!==t&&d.faceVertexUvs[1].push([n[b].clone(),n[c].clone(),n[f].clone()])}var d=this,g=null!==b.index?b.index.array:void 0,f=b.attributes,h=f.position.array,k=void 0!==f.normal?f.normal.array:void 0,l=void 0!==f.color?f.color.array:void 0,m=void 0!==f.uv?f.uv.array:void 0,t=void 0!==f.uv2?f.uv2.array:void 0;void 0!==t&&(this.faceVertexUvs[1]=
[]);for(var u=[],q=[],n=[],r=f=0;f<h.length;f+=3,r+=2)d.vertices.push(new THREE.Vector3(h[f],h[f+1],h[f+2])),void 0!==k&&u.push(new THREE.Vector3(k[f],k[f+1],k[f+2])),void 0!==l&&d.colors.push(new THREE.Color(l[f],l[f+1],l[f+2])),void 0!==m&&q.push(new THREE.Vector2(m[r],m[r+1])),void 0!==t&&n.push(new THREE.Vector2(t[r],t[r+1]));if(void 0!==g)if(h=b.groups,0<h.length)for(f=0;f<h.length;f++)for(var p=h[f],w=p.start,v=p.count,r=w,w=w+v;r<w;r+=3)c(g[r],g[r+1],g[r+2],p.materialIndex);else for(f=0;f<
g.length;f+=3)c(g[f],g[f+1],g[f+2]);else for(f=0;f<h.length/3;f+=3)c(f,f+1,f+2);this.computeFaceNormals();null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone());null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var b=this.boundingBox.center().negate();this.translate(b.x,b.y,b.z);return b},normalize:function(){this.computeBoundingSphere();var b=this.boundingSphere.center,c=this.boundingSphere.radius,c=0===c?1:1/
c,d=new THREE.Matrix4;d.set(c,0,0,-c*b.x,0,c,0,-c*b.y,0,0,c,-c*b.z,0,0,0,1);this.applyMatrix(d);return this},computeFaceNormals:function(){for(var b=new THREE.Vector3,c=new THREE.Vector3,d=0,g=this.faces.length;d<g;d++){var f=this.faces[d],h=this.vertices[f.a],k=this.vertices[f.b];b.subVectors(this.vertices[f.c],k);c.subVectors(h,k);b.cross(c);b.normalize();f.normal.copy(b)}},computeVertexNormals:function(b){void 0===b&&(b=!0);var c,d,g;g=Array(this.vertices.length);c=0;for(d=this.vertices.length;c<
d;c++)g[c]=new THREE.Vector3;if(b){var f,h,k,l=new THREE.Vector3,m=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],f=this.vertices[d.a],h=this.vertices[d.b],k=this.vertices[d.c],l.subVectors(k,h),m.subVectors(f,h),l.cross(m),g[d.a].add(l),g[d.b].add(l),g[d.c].add(l)}else for(b=0,c=this.faces.length;b<c;b++)d=this.faces[b],g[d.a].add(d.normal),g[d.b].add(d.normal),g[d.c].add(d.normal);c=0;for(d=this.vertices.length;c<d;c++)g[c].normalize();b=0;for(c=this.faces.length;b<c;b++)d=
this.faces[b],f=d.vertexNormals,3===f.length?(f[0].copy(g[d.a]),f[1].copy(g[d.b]),f[2].copy(g[d.c])):(f[0]=g[d.a].clone(),f[1]=g[d.b].clone(),f[2]=g[d.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var b,c,d,g,f;d=0;for(g=this.faces.length;d<g;d++)for(f=this.faces[d],f.__originalFaceNormal?f.__originalFaceNormal.copy(f.normal):f.__originalFaceNormal=f.normal.clone(),f.__originalVertexNormals||(f.__originalVertexNormals=[]),b=0,c=f.vertexNormals.length;b<
c;b++)f.__originalVertexNormals[b]?f.__originalVertexNormals[b].copy(f.vertexNormals[b]):f.__originalVertexNormals[b]=f.vertexNormals[b].clone();var h=new THREE.Geometry;h.faces=this.faces;b=0;for(c=this.morphTargets.length;b<c;b++){if(!this.morphNormals[b]){this.morphNormals[b]={};this.morphNormals[b].faceNormals=[];this.morphNormals[b].vertexNormals=[];f=this.morphNormals[b].faceNormals;var k=this.morphNormals[b].vertexNormals,l,m;d=0;for(g=this.faces.length;d<g;d++)l=new THREE.Vector3,m={a:new THREE.Vector3,
b:new THREE.Vector3,c:new THREE.Vector3},f.push(l),k.push(m)}k=this.morphNormals[b];h.vertices=this.morphTargets[b].vertices;h.computeFaceNormals();h.computeVertexNormals();d=0;for(g=this.faces.length;d<g;d++)f=this.faces[d],l=k.faceNormals[d],m=k.vertexNormals[d],l.copy(f.normal),m.a.copy(f.vertexNormals[0]),m.b.copy(f.vertexNormals[1]),m.c.copy(f.vertexNormals[2])}d=0;for(g=this.faces.length;d<g;d++)f=this.faces[d],f.normal=f.__originalFaceNormal,f.vertexNormals=f.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},
computeLineDistances:function(){for(var b=0,c=this.vertices,d=0,g=c.length;d<g;d++)0<d&&(b+=c[d].distanceTo(c[d-1])),this.lineDistances[d]=b},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(b,c,d){if(!1===b instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
b);else{var g,f=this.vertices.length,h=this.vertices,k=b.vertices,l=this.faces,m=b.faces,t=this.faceVertexUvs[0];b=b.faceVertexUvs[0];void 0===d&&(d=0);void 0!==c&&(g=(new THREE.Matrix3).getNormalMatrix(c));for(var u=0,q=k.length;u<q;u++){var n=k[u].clone();void 0!==c&&n.applyMatrix4(c);h.push(n)}u=0;for(q=m.length;u<q;u++){var k=m[u],r,p=k.vertexNormals,w=k.vertexColors,n=new THREE.Face3(k.a+f,k.b+f,k.c+f);n.normal.copy(k.normal);void 0!==g&&n.normal.applyMatrix3(g).normalize();c=0;for(h=p.length;c<
h;c++)r=p[c].clone(),void 0!==g&&r.applyMatrix3(g).normalize(),n.vertexNormals.push(r);n.color.copy(k.color);c=0;for(h=w.length;c<h;c++)r=w[c],n.vertexColors.push(r.clone());n.materialIndex=k.materialIndex+d;l.push(n)}u=0;for(q=b.length;u<q;u++)if(d=b[u],g=[],void 0!==d){c=0;for(h=d.length;c<h;c++)g.push(d[c].clone());t.push(g)}}},mergeMesh:function(b){!1===b instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",b):(b.matrixAutoUpdate&&b.updateMatrix(),
this.merge(b.geometry,b.matrix))},mergeVertices:function(){var b={},c=[],d=[],g,f=Math.pow(10,4),h,k;h=0;for(k=this.vertices.length;h<k;h++)g=this.vertices[h],g=Math.round(g.x*f)+"_"+Math.round(g.y*f)+"_"+Math.round(g.z*f),void 0===b[g]?(b[g]=h,c.push(this.vertices[h]),d[h]=c.length-1):d[h]=d[b[g]];b=[];h=0;for(k=this.faces.length;h<k;h++)for(f=this.faces[h],f.a=d[f.a],f.b=d[f.b],f.c=d[f.c],f=[f.a,f.b,f.c],g=0;3>g;g++)if(f[g]===f[(g+1)%3]){b.push(h);break}for(h=b.length-1;0<=h;h--)for(f=b[h],this.faces.splice(f,
1),d=0,k=this.faceVertexUvs.length;d<k;d++)this.faceVertexUvs[d].splice(f,1);h=this.vertices.length-c.length;this.vertices=c;return h},sortFacesByMaterialIndex:function(){for(var b=this.faces,c=b.length,d=0;d<c;d++)b[d]._id=d;b.sort(function(b,c){return b.materialIndex-c.materialIndex});var g=this.faceVertexUvs[0],f=this.faceVertexUvs[1],h,k;g&&g.length===c&&(h=[]);f&&f.length===c&&(k=[]);for(d=0;d<c;d++){var l=b[d]._id;h&&h.push(g[l]);k&&k.push(f[l])}h&&(this.faceVertexUvs[0]=h);k&&(this.faceVertexUvs[1]=
k)},toJSON:function(){function b(b,c,f){return f?b|1<<c:b&~(1<<c)}function c(b){var c=b.x.toString()+b.y.toString()+b.z.toString();if(void 0!==t[c])return t[c];t[c]=m.length/3;m.push(b.x,b.y,b.z);return t[c]}function d(b){var c=b.r.toString()+b.g.toString()+b.b.toString();if(void 0!==q[c])return q[c];q[c]=u.length;u.push(b.getHex());return q[c]}function g(b){var c=b.x.toString()+b.y.toString();if(void 0!==r[c])return r[c];r[c]=n.length/2;n.push(b.x,b.y);return r[c]}var f={metadata:{version:4.4,type:"Geometry",
generator:"Geometry.toJSON"}};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);if(void 0!==this.parameters){var h=this.parameters,k;for(k in h)void 0!==h[k]&&(f[k]=h[k]);return f}h=[];for(k=0;k<this.vertices.length;k++){var l=this.vertices[k];h.push(l.x,l.y,l.z)}var l=[],m=[],t={},u=[],q={},n=[],r={};for(k=0;k<this.faces.length;k++){var p=this.faces[k],w=void 0!==this.faceVertexUvs[0][k],v=0<p.normal.length(),y=0<p.vertexNormals.length,A=1!==p.color.r||1!==p.color.g||1!==p.color.b,
x=0<p.vertexColors.length,z=0,z=b(z,0,0),z=b(z,1,!0),z=b(z,2,!1),z=b(z,3,w),z=b(z,4,v),z=b(z,5,y),z=b(z,6,A),z=b(z,7,x);l.push(z);l.push(p.a,p.b,p.c);l.push(p.materialIndex);w&&(w=this.faceVertexUvs[0][k],l.push(g(w[0]),g(w[1]),g(w[2])));v&&l.push(c(p.normal));y&&(v=p.vertexNormals,l.push(c(v[0]),c(v[1]),c(v[2])));A&&l.push(d(p.color));x&&(p=p.vertexColors,l.push(d(p[0]),d(p[1]),d(p[2])))}f.data={};f.data.vertices=h;f.data.normals=m;0<u.length&&(f.data.colors=u);0<n.length&&(f.data.uvs=[n]);f.data.faces=
l;return f},clone:function(){return(new THREE.Geometry).copy(this)},copy:function(b){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var c=b.vertices,d=0,g=c.length;d<g;d++)this.vertices.push(c[d].clone());c=b.faces;d=0;for(g=c.length;d<g;d++)this.faces.push(c[d].clone());d=0;for(g=b.faceVertexUvs.length;d<g;d++){c=b.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]);for(var f=0,h=c.length;f<h;f++){for(var k=c[f],l=[],m=0,t=k.length;m<t;m++)l.push(k[m].clone());
this.faceVertexUvs[d].push(l)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.GeometryIdCount=0;
THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};
Object.assign(THREE.DirectGeometry.prototype,THREE.EventDispatcher.prototype,{computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(b){var c,
d=[],g;b=b.faces;for(var f=0;f<b.length;f++){var h=b[f];h.materialIndex!==g&&(g=h.materialIndex,void 0!==c&&(c.count=3*f-c.start,d.push(c)),c={start:3*f,materialIndex:g})}void 0!==c&&(c.count=3*f-c.start,d.push(c));this.groups=d},fromGeometry:function(b){var c=b.faces,d=b.vertices,g=b.faceVertexUvs,f=g[0]&&0<g[0].length,h=g[1]&&0<g[1].length,k=b.morphTargets,l=k.length,m;if(0<l){m=[];for(var t=0;t<l;t++)m[t]=[];this.morphTargets.position=m}var u=b.morphNormals,q=u.length,n;if(0<q){n=[];for(t=0;t<
q;t++)n[t]=[];this.morphTargets.normal=n}for(var r=b.skinIndices,p=b.skinWeights,w=r.length===d.length,v=p.length===d.length,t=0;t<c.length;t++){var y=c[t];this.vertices.push(d[y.a],d[y.b],d[y.c]);var A=y.vertexNormals;3===A.length?this.normals.push(A[0],A[1],A[2]):(A=y.normal,this.normals.push(A,A,A));A=y.vertexColors;3===A.length?this.colors.push(A[0],A[1],A[2]):(A=y.color,this.colors.push(A,A,A));!0===f&&(A=g[0][t],void 0!==A?this.uvs.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
t),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));!0===h&&(A=g[1][t],void 0!==A?this.uvs2.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",t),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));for(A=0;A<l;A++){var x=k[A].vertices;m[A].push(x[y.a],x[y.b],x[y.c])}for(A=0;A<q;A++)x=u[A].vertexNormals[t],n[A].push(x.a,x.b,x.c);w&&this.skinIndices.push(r[y.a],r[y.b],r[y.c]);v&&this.skinWeights.push(p[y.a],p[y.b],
p[y.c])}this.computeGroups(b);this.verticesNeedUpdate=b.verticesNeedUpdate;this.normalsNeedUpdate=b.normalsNeedUpdate;this.colorsNeedUpdate=b.colorsNeedUpdate;this.uvsNeedUpdate=b.uvsNeedUpdate;this.groupsNeedUpdate=b.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};
Object.assign(THREE.BufferGeometry.prototype,THREE.EventDispatcher.prototype,{getIndex:function(){return this.index},setIndex:function(b){this.index=b},addAttribute:function(b,c,d){if(!1===c instanceof THREE.BufferAttribute&&!1===c instanceof THREE.InterleavedBufferAttribute)console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(b,new THREE.BufferAttribute(c,d));else if("index"===b)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
this.setIndex(c);else return this.attributes[b]=c,this},getAttribute:function(b){return this.attributes[b]},removeAttribute:function(b){delete this.attributes[b];return this},addGroup:function(b,c,d){this.groups.push({start:b,count:c,materialIndex:void 0!==d?d:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(b,c){this.drawRange.start=b;this.drawRange.count=c},applyMatrix:function(b){var c=this.attributes.position;void 0!==c&&(b.applyToVector3Array(c.array),c.needsUpdate=!0);c=this.attributes.normal;
void 0!==c&&((new THREE.Matrix3).getNormalMatrix(b).applyToVector3Array(c.array),c.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationX(c);this.applyMatrix(b);return this}}(),rotateY:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationY(c);this.applyMatrix(b);return this}}(),rotateZ:function(){var b;
return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationZ(c);this.applyMatrix(b);return this}}(),translate:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Matrix4);b.makeTranslation(c,d,g);this.applyMatrix(b);return this}}(),scale:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Matrix4);b.makeScale(c,d,g);this.applyMatrix(b);return this}}(),lookAt:function(){var b;return function(c){void 0===b&&(b=new THREE.Object3D);b.lookAt(c);b.updateMatrix();this.applyMatrix(b.matrix)}}(),
center:function(){this.computeBoundingBox();var b=this.boundingBox.center().negate();this.translate(b.x,b.y,b.z);return b},setFromObject:function(b){var c=b.geometry;if(b instanceof THREE.Points||b instanceof THREE.Line){b=new THREE.Float32Attribute(3*c.vertices.length,3);var d=new THREE.Float32Attribute(3*c.colors.length,3);this.addAttribute("position",b.copyVector3sArray(c.vertices));this.addAttribute("color",d.copyColorsArray(c.colors));c.lineDistances&&c.lineDistances.length===c.vertices.length&&
(b=new THREE.Float32Attribute(c.lineDistances.length,1),this.addAttribute("lineDistance",b.copyArray(c.lineDistances)));null!==c.boundingSphere&&(this.boundingSphere=c.boundingSphere.clone());null!==c.boundingBox&&(this.boundingBox=c.boundingBox.clone())}else b instanceof THREE.Mesh&&c instanceof THREE.Geometry&&this.fromGeometry(c);return this},updateFromObject:function(b){var c=b.geometry;if(b instanceof THREE.Mesh){var d=c.__directGeometry;if(void 0===d)return this.fromGeometry(c);d.verticesNeedUpdate=
c.verticesNeedUpdate;d.normalsNeedUpdate=c.normalsNeedUpdate;d.colorsNeedUpdate=c.colorsNeedUpdate;d.uvsNeedUpdate=c.uvsNeedUpdate;d.groupsNeedUpdate=c.groupsNeedUpdate;c.verticesNeedUpdate=!1;c.normalsNeedUpdate=!1;c.colorsNeedUpdate=!1;c.uvsNeedUpdate=!1;c.groupsNeedUpdate=!1;c=d}!0===c.verticesNeedUpdate&&(d=this.attributes.position,void 0!==d&&(d.copyVector3sArray(c.vertices),d.needsUpdate=!0),c.verticesNeedUpdate=!1);!0===c.normalsNeedUpdate&&(d=this.attributes.normal,void 0!==d&&(d.copyVector3sArray(c.normals),
d.needsUpdate=!0),c.normalsNeedUpdate=!1);!0===c.colorsNeedUpdate&&(d=this.attributes.color,void 0!==d&&(d.copyColorsArray(c.colors),d.needsUpdate=!0),c.colorsNeedUpdate=!1);c.uvsNeedUpdate&&(d=this.attributes.uv,void 0!==d&&(d.copyVector2sArray(c.uvs),d.needsUpdate=!0),c.uvsNeedUpdate=!1);c.lineDistancesNeedUpdate&&(d=this.attributes.lineDistance,void 0!==d&&(d.copyArray(c.lineDistances),d.needsUpdate=!0),c.lineDistancesNeedUpdate=!1);c.groupsNeedUpdate&&(c.computeGroups(b.geometry),this.groups=
c.groups,c.groupsNeedUpdate=!1);return this},fromGeometry:function(b){b.__directGeometry=(new THREE.DirectGeometry).fromGeometry(b);return this.fromDirectGeometry(b.__directGeometry)},fromDirectGeometry:function(b){var c=new Float32Array(3*b.vertices.length);this.addAttribute("position",(new THREE.BufferAttribute(c,3)).copyVector3sArray(b.vertices));0<b.normals.length&&(c=new Float32Array(3*b.normals.length),this.addAttribute("normal",(new THREE.BufferAttribute(c,3)).copyVector3sArray(b.normals)));
0<b.colors.length&&(c=new Float32Array(3*b.colors.length),this.addAttribute("color",(new THREE.BufferAttribute(c,3)).copyColorsArray(b.colors)));0<b.uvs.length&&(c=new Float32Array(2*b.uvs.length),this.addAttribute("uv",(new THREE.BufferAttribute(c,2)).copyVector2sArray(b.uvs)));0<b.uvs2.length&&(c=new Float32Array(2*b.uvs2.length),this.addAttribute("uv2",(new THREE.BufferAttribute(c,2)).copyVector2sArray(b.uvs2)));0<b.indices.length&&(c=new (65535<b.vertices.length?Uint32Array:Uint16Array)(3*b.indices.length),
this.setIndex((new THREE.BufferAttribute(c,1)).copyIndicesArray(b.indices)));this.groups=b.groups;for(var d in b.morphTargets){for(var c=[],g=b.morphTargets[d],f=0,h=g.length;f<h;f++){var k=g[f],l=new THREE.Float32Attribute(3*k.length,3);c.push(l.copyVector3sArray(k))}this.morphAttributes[d]=c}0<b.skinIndices.length&&(d=new THREE.Float32Attribute(4*b.skinIndices.length,4),this.addAttribute("skinIndex",d.copyVector4sArray(b.skinIndices)));0<b.skinWeights.length&&(d=new THREE.Float32Attribute(4*b.skinWeights.length,
4),this.addAttribute("skinWeight",d.copyVector4sArray(b.skinWeights)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var b=this.attributes.position.array;void 0!==b?this.boundingBox.setFromArray(b):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&
console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var b=new THREE.Box3,c=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var d=this.attributes.position.array;if(d){var g=this.boundingSphere.center;b.setFromArray(d);b.center(g);for(var f=0,h=0,k=d.length;h<k;h+=3)c.fromArray(d,h),f=Math.max(f,g.distanceToSquared(c));
this.boundingSphere.radius=Math.sqrt(f);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var b=this.index,c=this.attributes,d=this.groups;if(c.position){var g=c.position.array;if(void 0===c.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(g.length),3));else for(var f=c.normal.array,
h=0,k=f.length;h<k;h++)f[h]=0;var f=c.normal.array,l,m,t,u=new THREE.Vector3,q=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3,p=new THREE.Vector3;if(b){b=b.array;0===d.length&&this.addGroup(0,b.length);for(var w=0,v=d.length;w<v;++w)for(h=d[w],k=h.start,l=h.count,h=k,k+=l;h<k;h+=3)l=3*b[h+0],m=3*b[h+1],t=3*b[h+2],u.fromArray(g,l),q.fromArray(g,m),n.fromArray(g,t),r.subVectors(n,q),p.subVectors(u,q),r.cross(p),f[l]+=r.x,f[l+1]+=r.y,f[l+2]+=r.z,f[m]+=r.x,f[m+1]+=r.y,f[m+2]+=r.z,f[t]+=r.x,
f[t+1]+=r.y,f[t+2]+=r.z}else for(h=0,k=g.length;h<k;h+=9)u.fromArray(g,h),q.fromArray(g,h+3),n.fromArray(g,h+6),r.subVectors(n,q),p.subVectors(u,q),r.cross(p),f[h]=r.x,f[h+1]=r.y,f[h+2]=r.z,f[h+3]=r.x,f[h+4]=r.y,f[h+5]=r.z,f[h+6]=r.x,f[h+7]=r.y,f[h+8]=r.z;this.normalizeNormals();c.normal.needsUpdate=!0}},merge:function(b,c){if(!1===b instanceof THREE.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",b);else{void 0===c&&(c=0);var d=this.attributes,
g;for(g in d)if(void 0!==b.attributes[g])for(var f=d[g].array,h=b.attributes[g],k=h.array,l=0,h=h.itemSize*c;l<k.length;l++,h++)f[h]=k[l];return this}},normalizeNormals:function(){for(var b=this.attributes.normal.array,c,d,g,f=0,h=b.length;f<h;f+=3)c=b[f],d=b[f+1],g=b[f+2],c=1/Math.sqrt(c*c+d*d+g*g),b[f]*=c,b[f+1]*=c,b[f+2]*=c},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var b=new THREE.BufferGeometry,
c=this.index.array,d=this.attributes,g;for(g in d){for(var f=d[g],h=f.array,f=f.itemSize,k=new h.constructor(c.length*f),l=0,m=0,t=0,u=c.length;t<u;t++)for(var l=c[t]*f,q=0;q<f;q++)k[m++]=h[l++];b.addAttribute(g,new THREE.BufferAttribute(k,f))}return b},toJSON:function(){var b={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};b.uuid=this.uuid;b.type=this.type;""!==this.name&&(b.name=this.name);if(void 0!==this.parameters){var c=this.parameters,d;for(d in c)void 0!==
c[d]&&(b[d]=c[d]);return b}b.data={attributes:{}};var g=this.index;null!==g&&(c=Array.prototype.slice.call(g.array),b.data.index={type:g.array.constructor.name,array:c});g=this.attributes;for(d in g){var f=g[d],c=Array.prototype.slice.call(f.array);b.data.attributes[d]={itemSize:f.itemSize,type:f.array.constructor.name,array:c,normalized:f.normalized}}d=this.groups;0<d.length&&(b.data.groups=JSON.parse(JSON.stringify(d)));d=this.boundingSphere;null!==d&&(b.data.boundingSphere={center:d.center.toArray(),
radius:d.radius});return b},clone:function(){return(new THREE.BufferGeometry).copy(this)},copy:function(b){var c=b.index;null!==c&&this.setIndex(c.clone());var c=b.attributes,d;for(d in c)this.addAttribute(d,c[d].clone());b=b.groups;d=0;for(c=b.length;d<c;d++){var g=b[d];this.addGroup(g.start,g.count,g.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.BufferGeometry.MaxIndex=65535;
THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;THREE.InstancedBufferGeometry.prototype.addGroup=function(b,c,d){this.groups.push({start:b,count:c,instances:d})};
THREE.InstancedBufferGeometry.prototype.copy=function(b){var c=b.index;null!==c&&this.setIndex(c.clone());var c=b.attributes,d;for(d in c)this.addAttribute(d,c[d].clone());b=b.groups;d=0;for(c=b.length;d<c;d++){var g=b[d];this.addGroup(g.start,g.count,g.instances)}return this};THREE.Uniform=function(b,c){"string"===typeof b&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),b=c);this.value=b;this.dynamic=!1};
THREE.Uniform.prototype={constructor:THREE.Uniform,onUpdate:function(b){this.dynamic=!0;this.onUpdateCallback=b;return this}};THREE.AnimationAction=function(){throw Error("THREE.AnimationAction: Use mixer.clipAction for construction.");};
THREE.AnimationAction._new=function(b,c,d){this._mixer=b;this._clip=c;this._localRoot=d||null;b=c.tracks;c=b.length;d=Array(c);for(var g={endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},f=0;f!==c;++f){var h=b[f].createInterpolant(null);d[f]=h;h.settings=g}this._interpolantSettings=g;this._interpolants=d;this._propertyBindings=Array(c);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=THREE.LoopRepeat;this._loopCount=
-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0};
THREE.AnimationAction._new.prototype={constructor:THREE.AnimationAction._new,play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},
startAt:function(b){this._startTime=b;return this},setLoop:function(b,c){this.loop=b;this.repetitions=c;return this},setEffectiveWeight:function(b){this.weight=b;this._effectiveWeight=this.enabled?b:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(b){return this._scheduleFading(b,0,1)},fadeOut:function(b){return this._scheduleFading(b,1,0)},crossFadeFrom:function(b,c,d){b.fadeOut(c);this.fadeIn(c);if(d){d=this._clip.duration;var g=b._clip.duration,
f=d/g;b.warp(1,g/d,c);this.warp(f,1,c)}return this},crossFadeTo:function(b,c,d){return b.crossFadeFrom(this,c,d)},stopFading:function(){var b=this._weightInterpolant;null!==b&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(b));return this},setEffectiveTimeScale:function(b){this.timeScale=b;this._effectiveTimeScale=this.paused?0:b;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(b){this.timeScale=this._clip.duration/
b;return this.stopWarping()},syncWith:function(b){this.time=b.time;this.timeScale=b.timeScale;return this.stopWarping()},halt:function(b){return this.warp(this._effectiveTimeScale,0,b)},warp:function(b,c,d){var g=this._mixer,f=g.time,h=this._timeScaleInterpolant,k=this.timeScale;null===h&&(this._timeScaleInterpolant=h=g._lendControlInterpolant());g=h.parameterPositions;h=h.sampleValues;g[0]=f;g[1]=f+d;h[0]=b/k;h[1]=c/k;return this},stopWarping:function(){var b=this._timeScaleInterpolant;null!==b&&
(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(b));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(b,c,d,g){var f=this._startTime;if(null!==f){c=(b-f)*d;if(0>c||0===d)return;this._startTime=null;c*=d}c*=this._updateTimeScale(b);d=this._updateTime(c);b=this._updateWeight(b);if(0<b){c=this._interpolants;for(var f=this._propertyBindings,h=0,k=c.length;h!==
k;++h)c[h].evaluate(d),f[h].accumulate(g,b)}},_updateWeight:function(b){var c=0;if(this.enabled){var c=this.weight,d=this._weightInterpolant;if(null!==d){var g=d.evaluate(b)[0],c=c*g;b>d.parameterPositions[1]&&(this.stopFading(),0===g&&(this.enabled=!1))}}return this._effectiveWeight=c},_updateTimeScale:function(b){var c=0;if(!this.paused){var c=this.timeScale,d=this._timeScaleInterpolant;if(null!==d){var g=d.evaluate(b)[0],c=c*g;b>d.parameterPositions[1]&&(this.stopWarping(),0===c?this.paused=!0:
this.timeScale=c)}}return this._effectiveTimeScale=c},_updateTime:function(b){var c=this.time+b;if(0===b)return c;var d=this._clip.duration,g=this.loop,f=this._loopCount;if(g===THREE.LoopOnce)a:{if(-1===f&&(this.loopCount=0,this._setEndings(!0,!0,!1)),c>=d)c=d;else if(0>c)c=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>b?-1:1})}else{g=g===THREE.LoopPingPong;-1===f&&(0<=b?(f=0,this._setEndings(!0,0===this.repetitions,
g)):this._setEndings(0===this.repetitions,!0,g));if(c>=d||0>c){var h=Math.floor(c/d),c=c-d*h,f=f+Math.abs(h),k=this.repetitions-f;0>k?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,c=0<b?d:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<b?1:-1})):(0===k?(b=0>b,this._setEndings(b,!b,g)):this._setEndings(!1,!1,g),this._loopCount=f,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h}))}if(g&&1===(f&1))return this.time=c,d-c}return this.time=c},_setEndings:function(b,
c,d){var g=this._interpolantSettings;d?(g.endingStart=THREE.ZeroSlopeEnding,g.endingEnd=THREE.ZeroSlopeEnding):(g.endingStart=b?this.zeroSlopeAtStart?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding,g.endingEnd=c?this.zeroSlopeAtEnd?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding)},_scheduleFading:function(b,c,d){var g=this._mixer,f=g.time,h=this._weightInterpolant;null===h&&(this._weightInterpolant=h=g._lendControlInterpolant());g=h.parameterPositions;
h=h.sampleValues;g[0]=f;h[0]=c;g[1]=f+b;h[1]=d;return this}};THREE.AnimationClip=function(b,c,d){this.name=b;this.tracks=d;this.duration=void 0!==c?c:-1;this.uuid=THREE.Math.generateUUID();0>this.duration&&this.resetDuration();this.trim();this.optimize()};
THREE.AnimationClip.prototype={constructor:THREE.AnimationClip,resetDuration:function(){for(var b=0,c=0,d=this.tracks.length;c!==d;++c)var g=this.tracks[c],b=Math.max(b,g.times[g.times.length-1]);this.duration=b},trim:function(){for(var b=0;b<this.tracks.length;b++)this.tracks[b].trim(0,this.duration);return this},optimize:function(){for(var b=0;b<this.tracks.length;b++)this.tracks[b].optimize();return this}};
Object.assign(THREE.AnimationClip,{parse:function(b){for(var c=[],d=b.tracks,g=1/(b.fps||1),f=0,h=d.length;f!==h;++f)c.push(THREE.KeyframeTrack.parse(d[f]).scale(g));return new THREE.AnimationClip(b.name,b.duration,c)},toJSON:function(b){var c=[],d=b.tracks;b={name:b.name,duration:b.duration,tracks:c};for(var g=0,f=d.length;g!==f;++g)c.push(THREE.KeyframeTrack.toJSON(d[g]));return b},CreateFromMorphTargetSequence:function(b,c,d,g){for(var f=c.length,h=[],k=0;k<f;k++){var l=[],m=[];l.push((k+f-1)%
f,k,(k+1)%f);m.push(0,1,0);var t=THREE.AnimationUtils.getKeyframeOrder(l),l=THREE.AnimationUtils.sortedArray(l,1,t),m=THREE.AnimationUtils.sortedArray(m,1,t);g||0!==l[0]||(l.push(f),m.push(m[0]));h.push((new THREE.NumberKeyframeTrack(".morphTargetInfluences["+c[k].name+"]",l,m)).scale(1/d))}return new THREE.AnimationClip(b,-1,h)},findByName:function(b,c){var d=b;Array.isArray(b)||(d=b.geometry&&b.geometry.animations||b.animations);for(var g=0;g<d.length;g++)if(d[g].name===c)return d[g];return null},
CreateClipsFromMorphTargetSequences:function(b,c,d){for(var g={},f=/^([\w-]*?)([\d]+)$/,h=0,k=b.length;h<k;h++){var l=b[h],m=l.name.match(f);if(m&&1<m.length){var t=m[1];(m=g[t])||(g[t]=m=[]);m.push(l)}}b=[];for(t in g)b.push(THREE.AnimationClip.CreateFromMorphTargetSequence(t,g[t],c,d));return b},parseAnimation:function(b,c,d){if(!b)return console.error("  no animation in JSONLoader data"),null;d=function(b,c,f,d,g){if(0!==f.length){var h=[],k=[];THREE.AnimationUtils.flattenJSON(f,h,k,d);0!==h.length&&
g.push(new b(c,h,k))}};var g=[],f=b.name||"default",h=b.length||-1,k=b.fps||30;b=b.hierarchy||[];for(var l=0;l<b.length;l++){var m=b[l].keys;if(m&&0!==m.length)if(m[0].morphTargets){for(var h={},t=0;t<m.length;t++)if(m[t].morphTargets)for(var u=0;u<m[t].morphTargets.length;u++)h[m[t].morphTargets[u]]=-1;for(var q in h){for(var n=[],r=[],u=0;u!==m[t].morphTargets.length;++u){var p=m[t];n.push(p.time);r.push(p.morphTarget===q?1:0)}g.push(new THREE.NumberKeyframeTrack(".morphTargetInfluence["+q+"]",
n,r))}h=h.length*(k||1)}else t=".bones["+c[l].name+"]",d(THREE.VectorKeyframeTrack,t+".position",m,"pos",g),d(THREE.QuaternionKeyframeTrack,t+".quaternion",m,"rot",g),d(THREE.VectorKeyframeTrack,t+".scale",m,"scl",g)}return 0===g.length?null:new THREE.AnimationClip(f,h,g)}});THREE.AnimationMixer=function(b){this._root=b;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1};
Object.assign(THREE.AnimationMixer.prototype,THREE.EventDispatcher.prototype,{clipAction:function(b,c){var d=c||this._root,g=d.uuid,f="string"===typeof b?THREE.AnimationClip.findByName(d,b):b,d=null!==f?f.uuid:b,h=this._actionsByClip[d],k=null;if(void 0!==h){k=h.actionByRoot[g];if(void 0!==k)return k;k=h.knownActions[0];null===f&&(f=k._clip)}if(null===f)return null;f=new THREE.AnimationMixer._Action(this,f,c);this._bindAction(f,k);this._addInactiveAction(f,d,g);return f},existingAction:function(b,
c){var d=c||this._root,g=d.uuid,d="string"===typeof b?THREE.AnimationClip.findByName(d,b):b,d=this._actionsByClip[d?d.uuid:b];return void 0!==d?d.actionByRoot[g]||null:null},stopAllAction:function(){for(var b=this._actions,c=this._nActiveActions,d=this._bindings,g=this._nActiveBindings,f=this._nActiveBindings=this._nActiveActions=0;f!==c;++f)b[f].reset();for(f=0;f!==g;++f)d[f].useCount=0;return this},update:function(b){b*=this.timeScale;for(var c=this._actions,d=this._nActiveActions,g=this.time+=
b,f=Math.sign(b),h=this._accuIndex^=1,k=0;k!==d;++k){var l=c[k];l.enabled&&l._update(g,b,f,h)}b=this._bindings;c=this._nActiveBindings;for(k=0;k!==c;++k)b[k].apply(h);return this},getRoot:function(){return this._root},uncacheClip:function(b){var c=this._actions;b=b.uuid;var d=this._actionsByClip,g=d[b];if(void 0!==g){for(var g=g.knownActions,f=0,h=g.length;f!==h;++f){var k=g[f];this._deactivateAction(k);var l=k._cacheIndex,m=c[c.length-1];k._cacheIndex=null;k._byClipCacheIndex=null;m._cacheIndex=
l;c[l]=m;c.pop();this._removeInactiveBindingsForAction(k)}delete d[b]}},uncacheRoot:function(b){b=b.uuid;var c=this._actionsByClip,d;for(d in c){var g=c[d].actionByRoot[b];void 0!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}d=this._bindingsByRootAndName[b];if(void 0!==d)for(var f in d)b=d[f],b.restoreOriginalState(),this._removeInactiveBinding(b)},uncacheAction:function(b,c){var d=this.existingAction(b,c);null!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}});
THREE.AnimationMixer._Action=THREE.AnimationAction._new;
Object.assign(THREE.AnimationMixer.prototype,{_bindAction:function(b,c){var d=b._localRoot||this._root,g=b._clip.tracks,f=g.length,h=b._propertyBindings,k=b._interpolants,l=d.uuid,m=this._bindingsByRootAndName,t=m[l];void 0===t&&(t={},m[l]=t);for(m=0;m!==f;++m){var u=g[m],q=u.name,n=t[q];if(void 0===n){n=h[m];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,l,q));continue}n=new THREE.PropertyMixer(THREE.PropertyBinding.create(d,q,c&&c._propertyBindings[m].binding.parsedPath),
u.ValueTypeName,u.getValueSize());++n.referenceCount;this._addInactiveBinding(n,l,q)}h[m]=n;k[m].resultBuffer=n.buffer}},_activateAction:function(b){if(!this._isActiveAction(b)){if(null===b._cacheIndex){var c=(b._localRoot||this._root).uuid,d=b._clip.uuid,g=this._actionsByClip[d];this._bindAction(b,g&&g.knownActions[0]);this._addInactiveAction(b,d,c)}c=b._propertyBindings;d=0;for(g=c.length;d!==g;++d){var f=c[d];0===f.useCount++&&(this._lendBinding(f),f.saveOriginalState())}this._lendAction(b)}},
_deactivateAction:function(b){if(this._isActiveAction(b)){for(var c=b._propertyBindings,d=0,g=c.length;d!==g;++d){var f=c[d];0===--f.useCount&&(f.restoreOriginalState(),this._takeBackBinding(f))}this._takeBackAction(b)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var b=this;this.stats={actions:{get total(){return b._actions.length},
get inUse(){return b._nActiveActions}},bindings:{get total(){return b._bindings.length},get inUse(){return b._nActiveBindings}},controlInterpolants:{get total(){return b._controlInterpolants.length},get inUse(){return b._nActiveControlInterpolants}}}},_isActiveAction:function(b){b=b._cacheIndex;return null!==b&&b<this._nActiveActions},_addInactiveAction:function(b,c,d){var g=this._actions,f=this._actionsByClip,h=f[c];void 0===h?(h={knownActions:[b],actionByRoot:{}},b._byClipCacheIndex=0,f[c]=h):(c=
h.knownActions,b._byClipCacheIndex=c.length,c.push(b));b._cacheIndex=g.length;g.push(b);h.actionByRoot[d]=b},_removeInactiveAction:function(b){var c=this._actions,d=c[c.length-1],g=b._cacheIndex;d._cacheIndex=g;c[g]=d;c.pop();b._cacheIndex=null;var d=b._clip.uuid,g=this._actionsByClip,f=g[d],h=f.knownActions,k=h[h.length-1],l=b._byClipCacheIndex;k._byClipCacheIndex=l;h[l]=k;h.pop();b._byClipCacheIndex=null;delete f.actionByRoot[(c._localRoot||this._root).uuid];0===h.length&&delete g[d];this._removeInactiveBindingsForAction(b)},
_removeInactiveBindingsForAction:function(b){b=b._propertyBindings;for(var c=0,d=b.length;c!==d;++c){var g=b[c];0===--g.referenceCount&&this._removeInactiveBinding(g)}},_lendAction:function(b){var c=this._actions,d=b._cacheIndex,g=this._nActiveActions++,f=c[g];b._cacheIndex=g;c[g]=b;f._cacheIndex=d;c[d]=f},_takeBackAction:function(b){var c=this._actions,d=b._cacheIndex,g=--this._nActiveActions,f=c[g];b._cacheIndex=g;c[g]=b;f._cacheIndex=d;c[d]=f},_addInactiveBinding:function(b,c,d){var g=this._bindingsByRootAndName,
f=g[c],h=this._bindings;void 0===f&&(f={},g[c]=f);f[d]=b;b._cacheIndex=h.length;h.push(b)},_removeInactiveBinding:function(b){var c=this._bindings,d=b.binding,g=d.rootNode.uuid,d=d.path,f=this._bindingsByRootAndName,h=f[g],k=c[c.length-1];b=b._cacheIndex;k._cacheIndex=b;c[b]=k;c.pop();delete h[d];a:{for(var l in h)break a;delete f[g]}},_lendBinding:function(b){var c=this._bindings,d=b._cacheIndex,g=this._nActiveBindings++,f=c[g];b._cacheIndex=g;c[g]=b;f._cacheIndex=d;c[d]=f},_takeBackBinding:function(b){var c=
this._bindings,d=b._cacheIndex,g=--this._nActiveBindings,f=c[g];b._cacheIndex=g;c[g]=b;f._cacheIndex=d;c[d]=f},_lendControlInterpolant:function(){var b=this._controlInterpolants,c=this._nActiveControlInterpolants++,d=b[c];void 0===d&&(d=new THREE.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),d.__cacheIndex=c,b[c]=d);return d},_takeBackControlInterpolant:function(b){var c=this._controlInterpolants,d=b.__cacheIndex,g=--this._nActiveControlInterpolants,
f=c[g];b.__cacheIndex=g;c[g]=b;f.__cacheIndex=d;c[d]=f},_controlInterpolantsResultBuffer:new Float32Array(1)});
THREE.AnimationObjectGroup=function(b){this.uuid=THREE.Math.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var c={};this._indicesByUUID=c;for(var d=0,g=arguments.length;d!==g;++d)c[arguments[d].uuid]=d;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var f=this;this.stats={objects:{get total(){return f._objects.length},get inUse(){return this.total-f.nCachedObjects_}},get bindingsPerObject(){return f._bindings.length}}};
THREE.AnimationObjectGroup.prototype={constructor:THREE.AnimationObjectGroup,add:function(b){for(var c=this._objects,d=c.length,g=this.nCachedObjects_,f=this._indicesByUUID,h=this._paths,k=this._parsedPaths,l=this._bindings,m=l.length,t=0,u=arguments.length;t!==u;++t){var q=arguments[t],n=q.uuid,r=f[n];if(void 0===r){r=d++;f[n]=r;c.push(q);for(var n=0,p=m;n!==p;++n)l[n].push(new THREE.PropertyBinding(q,h[n],k[n]))}else if(r<g){var w=c[r],v=--g,p=c[v];f[p.uuid]=r;c[r]=p;f[n]=v;c[v]=q;n=0;for(p=m;n!==
p;++n){var y=l[n],A=y[r];y[r]=y[v];void 0===A&&(A=new THREE.PropertyBinding(q,h[n],k[n]));y[v]=A}}else c[r]!==w&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=g},remove:function(b){for(var c=this._objects,d=this.nCachedObjects_,g=this._indicesByUUID,f=this._bindings,h=f.length,k=0,l=arguments.length;k!==l;++k){var m=arguments[k],t=m.uuid,u=g[t];if(void 0!==u&&u>=d){var q=d++,n=c[q];g[n.uuid]=
u;c[u]=n;g[t]=q;c[q]=m;m=0;for(t=h;m!==t;++m){var n=f[m],r=n[u];n[u]=n[q];n[q]=r}}}this.nCachedObjects_=d},uncache:function(b){for(var c=this._objects,d=c.length,g=this.nCachedObjects_,f=this._indicesByUUID,h=this._bindings,k=h.length,l=0,m=arguments.length;l!==m;++l){var t=arguments[l].uuid,u=f[t];if(void 0!==u)if(delete f[t],u<g){var t=--g,q=c[t],n=--d,r=c[n];f[q.uuid]=u;c[u]=q;f[r.uuid]=t;c[t]=r;c.pop();q=0;for(r=k;q!==r;++q){var p=h[q],w=p[n];p[u]=p[t];p[t]=w;p.pop()}}else for(n=--d,r=c[n],f[r.uuid]=
u,c[u]=r,c.pop(),q=0,r=k;q!==r;++q)p=h[q],p[u]=p[n],p.pop()}this.nCachedObjects_=g},subscribe_:function(b,c){var d=this._bindingsIndicesByPath,g=d[b],f=this._bindings;if(void 0!==g)return f[g];var h=this._paths,k=this._parsedPaths,l=this._objects,m=this.nCachedObjects_,t=Array(l.length),g=f.length;d[b]=g;h.push(b);k.push(c);f.push(t);d=m;for(g=l.length;d!==g;++d)t[d]=new THREE.PropertyBinding(l[d],b,c);return t},unsubscribe_:function(b){var c=this._bindingsIndicesByPath,d=c[b];if(void 0!==d){var g=
this._paths,f=this._parsedPaths,h=this._bindings,k=h.length-1,l=h[k];c[b[k]]=d;h[d]=l;h.pop();f[d]=f[k];f.pop();g[d]=g[k];g.pop()}}};
THREE.AnimationUtils={arraySlice:function(b,c,d){return THREE.AnimationUtils.isTypedArray(b)?new b.constructor(b.subarray(c,d)):b.slice(c,d)},convertArray:function(b,c,d){return!b||!d&&b.constructor===c?b:"number"===typeof c.BYTES_PER_ELEMENT?new c(b):Array.prototype.slice.call(b)},isTypedArray:function(b){return ArrayBuffer.isView(b)&&!(b instanceof DataView)},getKeyframeOrder:function(b){for(var c=b.length,d=Array(c),g=0;g!==c;++g)d[g]=g;d.sort(function(c,d){return b[c]-b[d]});return d},sortedArray:function(b,
c,d){for(var g=b.length,f=new b.constructor(g),h=0,k=0;k!==g;++h)for(var l=d[h]*c,m=0;m!==c;++m)f[k++]=b[l+m];return f},flattenJSON:function(b,c,d,g){for(var f=1,h=b[0];void 0!==h&&void 0===h[g];)h=b[f++];if(void 0!==h){var k=h[g];if(void 0!==k)if(Array.isArray(k)){do k=h[g],void 0!==k&&(c.push(h.time),d.push.apply(d,k)),h=b[f++];while(void 0!==h)}else if(void 0!==k.toArray){do k=h[g],void 0!==k&&(c.push(h.time),k.toArray(d,d.length)),h=b[f++];while(void 0!==h)}else{do k=h[g],void 0!==k&&(c.push(h.time),
d.push(k)),h=b[f++];while(void 0!==h)}}}};THREE.KeyframeTrack=function(b,c,d,g){if(void 0===b)throw Error("track name is undefined");if(void 0===c||0===c.length)throw Error("no keyframes in track named "+b);this.name=b;this.times=THREE.AnimationUtils.convertArray(c,this.TimeBufferType);this.values=THREE.AnimationUtils.convertArray(d,this.ValueBufferType);this.setInterpolation(g||this.DefaultInterpolation);this.validate();this.optimize()};
THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(b){return new THREE.DiscreteInterpolant(this.times,this.values,this.getValueSize(),b)},InterpolantFactoryMethodLinear:function(b){return new THREE.LinearInterpolant(this.times,this.values,this.getValueSize(),b)},InterpolantFactoryMethodSmooth:function(b){return new THREE.CubicInterpolant(this.times,
this.values,this.getValueSize(),b)},setInterpolation:function(b){var c;switch(b){case THREE.InterpolateDiscrete:c=this.InterpolantFactoryMethodDiscrete;break;case THREE.InterpolateLinear:c=this.InterpolantFactoryMethodLinear;break;case THREE.InterpolateSmooth:c=this.InterpolantFactoryMethodSmooth}if(void 0===c){c="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(b!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);
else throw Error(c);console.warn(c)}else this.createInterpolant=c},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return THREE.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return THREE.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return THREE.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(b){if(0!==b)for(var c=this.times,d=0,g=c.length;d!==g;++d)c[d]+=b;return this},
scale:function(b){if(1!==b)for(var c=this.times,d=0,g=c.length;d!==g;++d)c[d]*=b;return this},trim:function(b,c){for(var d=this.times,g=d.length,f=0,h=g-1;f!==g&&d[f]<b;)++f;for(;-1!==h&&d[h]>c;)--h;++h;if(0!==f||h!==g)f>=h&&(h=Math.max(h,1),f=h-1),g=this.getValueSize(),this.times=THREE.AnimationUtils.arraySlice(d,f,h),this.values=THREE.AnimationUtils.arraySlice(this.values,f*g,h*g);return this},validate:function(){var b=!0,c=this.getValueSize();0!==c-Math.floor(c)&&(console.error("invalid value size in track",
this),b=!1);var d=this.times,c=this.values,g=d.length;0===g&&(console.error("track is empty",this),b=!1);for(var f=null,h=0;h!==g;h++){var k=d[h];if("number"===typeof k&&isNaN(k)){console.error("time is not a valid number",this,h,k);b=!1;break}if(null!==f&&f>k){console.error("out of order keys",this,h,k,f);b=!1;break}f=k}if(void 0!==c&&THREE.AnimationUtils.isTypedArray(c))for(h=0,d=c.length;h!==d;++h)if(g=c[h],isNaN(g)){console.error("value is not a valid number",this,h,g);b=!1;break}return b},optimize:function(){for(var b=
this.times,c=this.values,d=this.getValueSize(),g=1,f=1,h=b.length-1;f<=h;++f){var k=!1,l=b[f];if(l!==b[f+1]&&(1!==f||l!==l[0]))for(var m=f*d,t=m-d,u=m+d,l=0;l!==d;++l){var q=c[m+l];if(q!==c[t+l]||q!==c[u+l]){k=!0;break}}if(k){if(f!==g)for(b[g]=b[f],k=f*d,m=g*d,l=0;l!==d;++l)c[m+l]=c[k+l];++g}}g!==b.length&&(this.times=THREE.AnimationUtils.arraySlice(b,0,g),this.values=THREE.AnimationUtils.arraySlice(c,0,g*d));return this}};
Object.assign(THREE.KeyframeTrack,{parse:function(b){if(void 0===b.type)throw Error("track type undefined, can not parse");var c=THREE.KeyframeTrack._getTrackTypeForValueTypeName(b.type);if(void 0===b.times){var d=[],g=[];THREE.AnimationUtils.flattenJSON(b.keys,d,g,"value");b.times=d;b.values=g}return void 0!==c.parse?c.parse(b):new c(b.name,b.times,b.values,b.interpolation)},toJSON:function(b){var c=b.constructor;if(void 0!==c.toJSON)c=c.toJSON(b);else{var c={name:b.name,times:THREE.AnimationUtils.convertArray(b.times,
Array),values:THREE.AnimationUtils.convertArray(b.values,Array)},d=b.getInterpolation();d!==b.DefaultInterpolation&&(c.interpolation=d)}c.type=b.ValueTypeName;return c},_getTrackTypeForValueTypeName:function(b){switch(b.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return THREE.NumberKeyframeTrack;case "vector":case "vector2":case "vector3":case "vector4":return THREE.VectorKeyframeTrack;case "color":return THREE.ColorKeyframeTrack;case "quaternion":return THREE.QuaternionKeyframeTrack;
case "bool":case "boolean":return THREE.BooleanKeyframeTrack;case "string":return THREE.StringKeyframeTrack}throw Error("Unsupported typeName: "+b);}});THREE.PropertyBinding=function(b,c,d){this.path=c;this.parsedPath=d||THREE.PropertyBinding.parseTrackName(c);this.node=THREE.PropertyBinding.findNode(b,this.parsedPath.nodeName)||b;this.rootNode=b};
THREE.PropertyBinding.prototype={constructor:THREE.PropertyBinding,getValue:function(b,c){this.bind();this.getValue(b,c)},setValue:function(b,c){this.bind();this.setValue(b,c)},bind:function(){var b=this.node,c=this.parsedPath,d=c.objectName,g=c.propertyName,f=c.propertyIndex;b||(this.node=b=THREE.PropertyBinding.findNode(this.rootNode,c.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(b){if(d){var h=c.objectIndex;switch(d){case "materials":if(!b.material){console.error("  can not bind to material as node does not have a material",
this);return}if(!b.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}b=b.material.materials;break;case "bones":if(!b.skeleton){console.error("  can not bind to bones as node does not have a skeleton",this);return}b=b.skeleton.bones;for(d=0;d<b.length;d++)if(b[d].name===h){h=d;break}break;default:if(void 0===b[d]){console.error("  can not bind to objectName of node, undefined",this);return}b=b[d]}if(void 0!==h){if(void 0===
b[h]){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,b);return}b=b[h]}}if(h=b[g]){c=this.Versioning.None;void 0!==b.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=b):void 0!==b.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=b);d=this.BindingType.Direct;if(void 0!==f){if("morphTargetInfluences"===g){if(!b.geometry){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",
this);return}if(!b.geometry.morphTargets){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);return}for(d=0;d<this.node.geometry.morphTargets.length;d++)if(b.geometry.morphTargets[d].name===f){f=d;break}}d=this.BindingType.ArrayElement;this.resolvedProperty=h;this.propertyIndex=f}else void 0!==h.fromArray&&void 0!==h.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=h):void 0!==h.length?(d=this.BindingType.EntireArray,this.resolvedProperty=
h):this.propertyName=g;this.getValue=this.GetterByBindingType[d];this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}else console.error("  trying to update property for track: "+c.nodeName+"."+g+" but it wasn't found.",b)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}};
Object.assign(THREE.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:THREE.PropertyBinding.prototype.getValue,_setValue_unbound:THREE.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(b,c){b[c]=this.node[this.propertyName]},function(b,c){for(var d=this.resolvedProperty,g=0,f=d.length;g!==f;++g)b[c++]=
d[g]},function(b,c){b[c]=this.resolvedProperty[this.propertyIndex]},function(b,c){this.resolvedProperty.toArray(b,c)}],SetterByBindingTypeAndVersioning:[[function(b,c){this.node[this.propertyName]=b[c]},function(b,c){this.node[this.propertyName]=b[c];this.targetObject.needsUpdate=!0},function(b,c){this.node[this.propertyName]=b[c];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(b,c){for(var d=this.resolvedProperty,g=0,f=d.length;g!==f;++g)d[g]=b[c++]},function(b,c){for(var d=this.resolvedProperty,
g=0,f=d.length;g!==f;++g)d[g]=b[c++];this.targetObject.needsUpdate=!0},function(b,c){for(var d=this.resolvedProperty,g=0,f=d.length;g!==f;++g)d[g]=b[c++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(b,c){this.resolvedProperty[this.propertyIndex]=b[c]},function(b,c){this.resolvedProperty[this.propertyIndex]=b[c];this.targetObject.needsUpdate=!0},function(b,c){this.resolvedProperty[this.propertyIndex]=b[c];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(b,c){this.resolvedProperty.fromArray(b,
c)},function(b,c){this.resolvedProperty.fromArray(b,c);this.targetObject.needsUpdate=!0},function(b,c){this.resolvedProperty.fromArray(b,c);this.targetObject.matrixWorldNeedsUpdate=!0}]]});THREE.PropertyBinding.Composite=function(b,c,d){d=d||THREE.PropertyBinding.parseTrackName(c);this._targetGroup=b;this._bindings=b.subscribe_(c,d)};
THREE.PropertyBinding.Composite.prototype={constructor:THREE.PropertyBinding.Composite,getValue:function(b,c){this.bind();var d=this._bindings[this._targetGroup.nCachedObjects_];void 0!==d&&d.getValue(b,c)},setValue:function(b,c){for(var d=this._bindings,g=this._targetGroup.nCachedObjects_,f=d.length;g!==f;++g)d[g].setValue(b,c)},bind:function(){for(var b=this._bindings,c=this._targetGroup.nCachedObjects_,d=b.length;c!==d;++c)b[c].bind()},unbind:function(){for(var b=this._bindings,c=this._targetGroup.nCachedObjects_,
d=b.length;c!==d;++c)b[c].unbind()}};THREE.PropertyBinding.create=function(b,c,d){return b instanceof THREE.AnimationObjectGroup?new THREE.PropertyBinding.Composite(b,c,d):new THREE.PropertyBinding(b,c,d)};
THREE.PropertyBinding.parseTrackName=function(b){var c=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,d=c.exec(b);if(!d)throw Error("cannot parse trackName at all: "+b);d.index===c.lastIndex&&c.lastIndex++;c={nodeName:d[3],objectName:d[5],objectIndex:d[7],propertyName:d[9],propertyIndex:d[11]};if(null===c.propertyName||0===c.propertyName.length)throw Error("can not parse propertyName from trackName: "+b);return c};
THREE.PropertyBinding.findNode=function(b,c){if(!c||""===c||"root"===c||"."===c||-1===c||c===b.name||c===b.uuid)return b;if(b.skeleton){var d=function(b){for(var d=0;d<b.bones.length;d++){var g=b.bones[d];if(g.name===c)return g}return null}(b.skeleton);if(d)return d}if(b.children){var g=function(b){for(var d=0;d<b.length;d++){var k=b[d];if(k.name===c||k.uuid===c||(k=g(k.children)))return k}return null};if(d=g(b.children))return d}return null};
THREE.PropertyMixer=function(b,c,d){this.binding=b;this.valueSize=d;b=Float64Array;switch(c){case "quaternion":c=this._slerp;break;case "string":case "bool":b=Array;c=this._select;break;default:c=this._lerp}this.buffer=new b(4*d);this._mixBufferRegion=c;this.referenceCount=this.useCount=this.cumulativeWeight=0};
THREE.PropertyMixer.prototype={constructor:THREE.PropertyMixer,accumulate:function(b,c){var d=this.buffer,g=this.valueSize,f=b*g+g,h=this.cumulativeWeight;if(0===h){for(h=0;h!==g;++h)d[f+h]=d[h];h=c}else h+=c,this._mixBufferRegion(d,f,0,c/h,g);this.cumulativeWeight=h},apply:function(b){var c=this.valueSize,d=this.buffer;b=b*c+c;var g=this.cumulativeWeight,f=this.binding;this.cumulativeWeight=0;1>g&&this._mixBufferRegion(d,b,3*c,1-g,c);for(var g=c,h=c+c;g!==h;++g)if(d[g]!==d[g+c]){f.setValue(d,b);
break}},saveOriginalState:function(){var b=this.buffer,c=this.valueSize,d=3*c;this.binding.getValue(b,d);for(var g=c;g!==d;++g)b[g]=b[d+g%c];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(b,c,d,g,f){if(.5<=g)for(g=0;g!==f;++g)b[c+g]=b[d+g]},_slerp:function(b,c,d,g,f){THREE.Quaternion.slerpFlat(b,c,b,c,b,d,g)},_lerp:function(b,c,d,g,f){for(var h=1-g,k=0;k!==f;++k){var l=c+k;b[l]=b[l]*h+b[d+k]*g}}};
THREE.BooleanKeyframeTrack=function(b,c,d){THREE.KeyframeTrack.call(this,b,c,d)};THREE.BooleanKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});THREE.ColorKeyframeTrack=function(b,c,d,g){THREE.KeyframeTrack.call(this,b,c,d,g)};
THREE.ColorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.ColorKeyframeTrack,ValueTypeName:"color"});THREE.NumberKeyframeTrack=function(b,c,d,g){THREE.KeyframeTrack.call(this,b,c,d,g)};THREE.NumberKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.NumberKeyframeTrack,ValueTypeName:"number"});THREE.QuaternionKeyframeTrack=function(b,c,d,g){THREE.KeyframeTrack.call(this,b,c,d,g)};
THREE.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodLinear:function(b){return new THREE.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),b)},InterpolantFactoryMethodSmooth:void 0});THREE.StringKeyframeTrack=function(b,c,d,g){THREE.KeyframeTrack.call(this,b,c,d,g)};
THREE.StringKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});THREE.VectorKeyframeTrack=function(b,c,d,g){THREE.KeyframeTrack.call(this,b,c,d,g)};
THREE.VectorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.VectorKeyframeTrack,ValueTypeName:"vector"});
THREE.Audio=function(b){THREE.Object3D.call(this);this.type="Audio";this.context=b.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(b.getInput());this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]};
THREE.Audio.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Audio,getOutput:function(){return this.gain},setNodeSource:function(b){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=b;this.connect();return this},setBuffer:function(b){this.source.buffer=b;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else{var b=this.context.createBufferSource();b.buffer=this.source.buffer;b.loop=this.source.loop;b.onended=this.source.onended;b.start(0,this.startTime);b.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=b;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.startTime=this.context.currentTime,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.source.stop(),this.startTime=0,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var b=1,c=this.filters.length;b<c;b++)this.filters[b-1].connect(this.filters[b]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var b=1,c=this.filters.length;b<c;b++)this.filters[b-1].disconnect(this.filters[b]);
this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(b){b||(b=[]);!0===this.isPlaying?(this.disconnect(),this.filters=b,this.connect()):this.filters=b;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(b){return this.setFilters(b?[b]:[])},setPlaybackRate:function(b){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.playbackRate=b,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(b){!1===this.hasPlaybackControl?console.warn("THREE.Audio: this Audio has no playback control."):this.source.loop=b},getVolume:function(){return this.gain.gain.value},
setVolume:function(b){this.gain.gain.value=b;return this}});THREE.AudioAnalyser=function(b,c){this.analyser=b.context.createAnalyser();this.analyser.fftSize=void 0!==c?c:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);b.getOutput().connect(this.analyser)};
Object.assign(THREE.AudioAnalyser.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var b=0,c=this.getFrequencyData(),d=0;d<c.length;d++)b+=c[d];return b/c.length}});Object.defineProperty(THREE,"AudioContext",{get:function(){var b;return function(){void 0===b&&(b=new (window.AudioContext||window.webkitAudioContext));return b}}()});
THREE.PositionalAudio=function(b){THREE.Audio.call(this,b);this.panner=this.context.createPanner();this.panner.connect(this.gain)};
THREE.PositionalAudio.prototype=Object.assign(Object.create(THREE.Audio.prototype),{constructor:THREE.PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(b){this.panner.refDistance=b},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(b){this.panner.rolloffFactor=b},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(b){this.panner.distanceModel=
b},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(b){this.panner.maxDistance=b},updateMatrixWorld:function(){var b=new THREE.Vector3;return function(c){THREE.Object3D.prototype.updateMatrixWorld.call(this,c);b.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(b.x,b.y,b.z)}}()});
THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=THREE.AudioContext;this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null};
THREE.AudioListener.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(b){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):
this.gain.disconnect(this.context.destination);this.filter=b;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(b){this.gain.gain.value=b},updateMatrixWorld:function(){var b=new THREE.Vector3,c=new THREE.Quaternion,d=new THREE.Vector3,g=new THREE.Vector3;return function(f){THREE.Object3D.prototype.updateMatrixWorld.call(this,f);f=this.context.listener;var h=this.up;this.matrixWorld.decompose(b,
c,d);g.set(0,0,-1).applyQuaternion(c);f.setPosition(b.x,b.y,b.z);f.setOrientation(g.x,g.y,g.z,h.x,h.y,h.z)}}()});THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.constructor=THREE.Camera;
THREE.Camera.prototype.getWorldDirection=function(){var b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.getWorldQuaternion(b);return c.set(0,0,-1).applyQuaternion(b)}}();THREE.Camera.prototype.lookAt=function(){var b=new THREE.Matrix4;return function(c){b.lookAt(this.position,c,this.up);this.quaternion.setFromRotationMatrix(b)}}();THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)};
THREE.Camera.prototype.copy=function(b){THREE.Object3D.prototype.copy.call(this,b);this.matrixWorldInverse.copy(b.matrixWorldInverse);this.projectionMatrix.copy(b.projectionMatrix);return this};
THREE.CubeCamera=function(b,c,d){THREE.Object3D.call(this);this.type="CubeCamera";var g=new THREE.PerspectiveCamera(90,1,b,c);g.up.set(0,-1,0);g.lookAt(new THREE.Vector3(1,0,0));this.add(g);var f=new THREE.PerspectiveCamera(90,1,b,c);f.up.set(0,-1,0);f.lookAt(new THREE.Vector3(-1,0,0));this.add(f);var h=new THREE.PerspectiveCamera(90,1,b,c);h.up.set(0,0,1);h.lookAt(new THREE.Vector3(0,1,0));this.add(h);var k=new THREE.PerspectiveCamera(90,1,b,c);k.up.set(0,0,-1);k.lookAt(new THREE.Vector3(0,-1,0));
this.add(k);var l=new THREE.PerspectiveCamera(90,1,b,c);l.up.set(0,-1,0);l.lookAt(new THREE.Vector3(0,0,1));this.add(l);var m=new THREE.PerspectiveCamera(90,1,b,c);m.up.set(0,-1,0);m.lookAt(new THREE.Vector3(0,0,-1));this.add(m);this.renderTarget=new THREE.WebGLRenderTargetCube(d,d,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(b,c){null===this.parent&&this.updateMatrixWorld();var d=this.renderTarget,n=d.texture.generateMipmaps;d.texture.generateMipmaps=
!1;d.activeCubeFace=0;b.render(c,g,d);d.activeCubeFace=1;b.render(c,f,d);d.activeCubeFace=2;b.render(c,h,d);d.activeCubeFace=3;b.render(c,k,d);d.activeCubeFace=4;b.render(c,l,d);d.texture.generateMipmaps=n;d.activeCubeFace=5;b.render(c,m,d);b.setRenderTarget(null)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;
THREE.OrthographicCamera=function(b,c,d,g,f,h){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=b;this.right=c;this.top=d;this.bottom=g;this.near=void 0!==f?f:.1;this.far=void 0!==h?h:2E3;this.updateProjectionMatrix()};
THREE.OrthographicCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.OrthographicCamera,copy:function(b){THREE.Camera.prototype.copy.call(this,b);this.left=b.left;this.right=b.right;this.top=b.top;this.bottom=b.bottom;this.near=b.near;this.far=b.far;this.zoom=b.zoom;return this},updateProjectionMatrix:function(){var b=(this.right-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),d=(this.right+this.left)/2,g=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(d-
b,d+b,g+c,g-c,this.near,this.far)},toJSON:function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.zoom=this.zoom;b.object.left=this.left;b.object.right=this.right;b.object.top=this.top;b.object.bottom=this.bottom;b.object.near=this.near;b.object.far=this.far;return b}});
THREE.PerspectiveCamera=function(b,c,d,g){THREE.Camera.call(this);this.type="PerspectiveCamera";this.fov=void 0!==b?b:50;this.zoom=1;this.near=void 0!==d?d:.1;this.far=void 0!==g?g:2E3;this.focus=10;this.aspect=void 0!==c?c:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.PerspectiveCamera,copy:function(b){THREE.Camera.prototype.copy.call(this,b);this.fov=b.fov;this.zoom=b.zoom;this.near=b.near;this.far=b.far;this.focus=b.focus;this.aspect=b.aspect;this.view=null===b.view?null:Object.assign({},b.view);this.filmGauge=b.filmGauge;this.filmOffset=b.filmOffset;return this},setFocalLength:function(b){b=.5*this.getFilmHeight()/b;this.fov=2*THREE.Math.RAD2DEG*Math.atan(b);
this.updateProjectionMatrix()},getFocalLength:function(){var b=Math.tan(.5*THREE.Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/b},getEffectiveFOV:function(){return 2*THREE.Math.RAD2DEG*Math.atan(Math.tan(.5*THREE.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(b,c,d,g,f,h){this.aspect=b/c;this.view={fullWidth:b,fullHeight:c,offsetX:d,offsetY:g,
width:f,height:h};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var b=this.near,c=b*Math.tan(.5*THREE.Math.DEG2RAD*this.fov)/this.zoom,d=2*c,g=this.aspect*d,f=-.5*g,h=this.view;if(null!==h)var k=h.fullWidth,l=h.fullHeight,f=f+h.offsetX*g/k,c=c-h.offsetY*d/l,g=h.width/k*g,d=h.height/l*d;h=this.filmOffset;0!==h&&(f+=b*h/this.getFilmWidth());this.projectionMatrix.makeFrustum(f,f+g,c-d,c,b,this.far)},toJSON:function(b){b=
THREE.Object3D.prototype.toJSON.call(this,b);b.object.fov=this.fov;b.object.zoom=this.zoom;b.object.near=this.near;b.object.far=this.far;b.object.focus=this.focus;b.object.aspect=this.aspect;null!==this.view&&(b.object.view=Object.assign({},this.view));b.object.filmGauge=this.filmGauge;b.object.filmOffset=this.filmOffset;return b}});
THREE.StereoCamera=function(){this.type="StereoCamera";this.aspect=1;this.cameraL=new THREE.PerspectiveCamera;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new THREE.PerspectiveCamera;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1};
Object.assign(THREE.StereoCamera.prototype,{update:function(){var b,c,d,g,f,h=new THREE.Matrix4,k=new THREE.Matrix4;return function(l){if(b!==l.focus||c!==l.fov||d!==l.aspect*this.aspect||g!==l.near||f!==l.far){b=l.focus;c=l.fov;d=l.aspect*this.aspect;g=l.near;f=l.far;var m=l.projectionMatrix.clone(),t=.032*g/b,u=g*Math.tan(THREE.Math.DEG2RAD*c*.5),q,n;k.elements[12]=-.032;h.elements[12]=.032;q=-u*d+t;n=u*d+t;m.elements[0]=2*g/(n-q);m.elements[8]=(n+q)/(n-q);this.cameraL.projectionMatrix.copy(m);
q=-u*d-t;n=u*d-t;m.elements[0]=2*g/(n-q);m.elements[8]=(n+q)/(n-q);this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(k);this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(h)}}()});THREE.Light=function(b,c){THREE.Object3D.call(this);this.type="Light";this.color=new THREE.Color(b);this.intensity=void 0!==c?c:1;this.receiveShadow=void 0};
THREE.Light.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Light,copy:function(b){THREE.Object3D.prototype.copy.call(this,b);this.color.copy(b.color);this.intensity=b.intensity;return this},toJSON:function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.color=this.color.getHex();b.object.intensity=this.intensity;void 0!==this.groundColor&&(b.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(b.object.distance=this.distance);void 0!==
this.angle&&(b.object.angle=this.angle);void 0!==this.decay&&(b.object.decay=this.decay);void 0!==this.penumbra&&(b.object.penumbra=this.penumbra);return b}});THREE.LightShadow=function(b){this.camera=b;this.bias=0;this.radius=1;this.mapSize=new THREE.Vector2(512,512);this.map=null;this.matrix=new THREE.Matrix4};Object.assign(THREE.LightShadow.prototype,{copy:function(b){this.camera=b.camera.clone();this.bias=b.bias;this.radius=b.radius;this.mapSize.copy(b.mapSize);return this},clone:function(){return(new this.constructor).copy(this)}});
THREE.AmbientLight=function(b,c){THREE.Light.call(this,b,c);this.type="AmbientLight";this.castShadow=void 0};THREE.AmbientLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.AmbientLight});THREE.DirectionalLight=function(b,c){THREE.Light.call(this,b,c);this.type="DirectionalLight";this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D;this.shadow=new THREE.DirectionalLightShadow};
THREE.DirectionalLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.DirectionalLight,copy:function(b){THREE.Light.prototype.copy.call(this,b);this.target=b.target.clone();this.shadow=b.shadow.clone();return this}});THREE.DirectionalLightShadow=function(b){THREE.LightShadow.call(this,new THREE.OrthographicCamera(-5,5,5,-5,.5,500))};THREE.DirectionalLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.DirectionalLightShadow});
THREE.HemisphereLight=function(b,c,d){THREE.Light.call(this,b,d);this.type="HemisphereLight";this.castShadow=void 0;this.position.set(0,1,0);this.updateMatrix();this.groundColor=new THREE.Color(c)};THREE.HemisphereLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.HemisphereLight,copy:function(b){THREE.Light.prototype.copy.call(this,b);this.groundColor.copy(b.groundColor);return this}});
THREE.PointLight=function(b,c,d,g){THREE.Light.call(this,b,c);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(b){this.intensity=b/(4*Math.PI)}});this.distance=void 0!==d?d:0;this.decay=void 0!==g?g:1;this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(90,1,.5,500))};
THREE.PointLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.PointLight,copy:function(b){THREE.Light.prototype.copy.call(this,b);this.distance=b.distance;this.decay=b.decay;this.shadow=b.shadow.clone();return this}});
THREE.SpotLight=function(b,c,d,g,f,h){THREE.Light.call(this,b,c);this.type="SpotLight";this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(b){this.intensity=b/Math.PI}});this.distance=void 0!==d?d:0;this.angle=void 0!==g?g:Math.PI/3;this.penumbra=void 0!==f?f:0;this.decay=void 0!==h?h:1;this.shadow=new THREE.SpotLightShadow};
THREE.SpotLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.SpotLight,copy:function(b){THREE.Light.prototype.copy.call(this,b);this.distance=b.distance;this.angle=b.angle;this.penumbra=b.penumbra;this.decay=b.decay;this.target=b.target.clone();this.shadow=b.shadow.clone();return this}});THREE.SpotLightShadow=function(){THREE.LightShadow.call(this,new THREE.PerspectiveCamera(50,1,.5,500))};
THREE.SpotLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.SpotLightShadow,update:function(b){var c=2*THREE.Math.RAD2DEG*b.angle,d=this.mapSize.width/this.mapSize.height;b=b.distance||500;var g=this.camera;if(c!==g.fov||d!==g.aspect||b!==g.far)g.fov=c,g.aspect=d,g.far=b,g.updateProjectionMatrix()}});THREE.AudioLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.AudioLoader.prototype={constructor:THREE.AudioLoader,load:function(b,c,d,g){var f=new THREE.XHRLoader(this.manager);f.setResponseType("arraybuffer");f.load(b,function(b){THREE.AudioContext.decodeAudioData(b,function(b){c(b)})},d,g)}};THREE.Cache={enabled:!1,files:{},add:function(b,c){!1!==this.enabled&&(this.files[b]=c)},get:function(b){if(!1!==this.enabled)return this.files[b]},remove:function(b){delete this.files[b]},clear:function(){this.files={}}};
THREE.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(b){b=b.split("/");if(1===b.length)return"./";b.pop();return b.join("/")+"/"},initMaterials:function(b,c,d){for(var g=[],f=0;f<b.length;++f)g[f]=this.createMaterial(b[f],c,d);return g},createMaterial:function(){var b,c,d;return function(g,f,h){function k(b,d,g,k,m){b=f+b;var t=THREE.Loader.Handlers.get(b);null!==t?b=t.load(b):(c.setCrossOrigin(h),b=c.load(b));void 0!==d&&(b.repeat.fromArray(d),1!==d[0]&&(b.wrapS=
THREE.RepeatWrapping),1!==d[1]&&(b.wrapT=THREE.RepeatWrapping));void 0!==g&&b.offset.fromArray(g);void 0!==k&&("repeat"===k[0]&&(b.wrapS=THREE.RepeatWrapping),"mirror"===k[0]&&(b.wrapS=THREE.MirroredRepeatWrapping),"repeat"===k[1]&&(b.wrapT=THREE.RepeatWrapping),"mirror"===k[1]&&(b.wrapT=THREE.MirroredRepeatWrapping));void 0!==m&&(b.anisotropy=m);d=THREE.Math.generateUUID();l[d]=b;return d}void 0===b&&(b=new THREE.Color);void 0===c&&(c=new THREE.TextureLoader);void 0===d&&(d=new THREE.MaterialLoader);
var l={},m={uuid:THREE.Math.generateUUID(),type:"MeshLambertMaterial"},t;for(t in g){var u=g[t];switch(t){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":m.name=u;break;case "blending":m.blending=THREE[u];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",t,"is no longer supported.");break;case "colorDiffuse":m.color=b.fromArray(u).getHex();break;case "colorSpecular":m.specular=b.fromArray(u).getHex();break;case "colorEmissive":m.emissive=
b.fromArray(u).getHex();break;case "specularCoef":m.shininess=u;break;case "shading":"basic"===u.toLowerCase()&&(m.type="MeshBasicMaterial");"phong"===u.toLowerCase()&&(m.type="MeshPhongMaterial");break;case "mapDiffuse":m.map=k(u,g.mapDiffuseRepeat,g.mapDiffuseOffset,g.mapDiffuseWrap,g.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapLight":m.lightMap=k(u,g.mapLightRepeat,g.mapLightOffset,g.mapLightWrap,g.mapLightAnisotropy);
break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":m.aoMap=k(u,g.mapAORepeat,g.mapAOOffset,g.mapAOWrap,g.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;case "mapBump":m.bumpMap=k(u,g.mapBumpRepeat,g.mapBumpOffset,g.mapBumpWrap,g.mapBumpAnisotropy);break;case "mapBumpScale":m.bumpScale=u;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;
case "mapNormal":m.normalMap=k(u,g.mapNormalRepeat,g.mapNormalOffset,g.mapNormalWrap,g.mapNormalAnisotropy);break;case "mapNormalFactor":m.normalScale=[u,u];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":m.specularMap=k(u,g.mapSpecularRepeat,g.mapSpecularOffset,g.mapSpecularWrap,g.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;case "mapAlpha":m.alphaMap=
k(u,g.mapAlphaRepeat,g.mapAlphaOffset,g.mapAlphaWrap,g.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":m.side=THREE.BackSide;break;case "doubleSided":m.side=THREE.DoubleSide;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");m.opacity=u;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":m[t]=
u;break;case "vertexColors":!0===u&&(m.vertexColors=THREE.VertexColors);"face"===u&&(m.vertexColors=THREE.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",t,u)}}"MeshBasicMaterial"===m.type&&delete m.emissive;"MeshPhongMaterial"!==m.type&&delete m.specular;1>m.opacity&&(m.transparent=!0);d.setTextures(l);return d.parse(m)}}()};
THREE.Loader.Handlers={handlers:[],add:function(b,c){this.handlers.push(b,c)},get:function(b){for(var c=this.handlers,d=0,g=c.length;d<g;d+=2){var f=c[d+1];if(c[d].test(b))return f}return null}};THREE.XHRLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(b,c,d,g){void 0!==this.path&&(b=this.path+b);var f=this,h=THREE.Cache.get(b);if(void 0!==h)return c&&setTimeout(function(){c(h)},0),h;var k=new XMLHttpRequest;k.overrideMimeType("text/plain");k.open("GET",b,!0);k.addEventListener("load",function(d){var h=d.target.response;THREE.Cache.add(b,h);200===this.status?(c&&c(h),f.manager.itemEnd(b)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),c&&c(h),f.manager.itemEnd(b)):
(g&&g(d),f.manager.itemError(b))},!1);void 0!==d&&k.addEventListener("progress",function(b){d(b)},!1);k.addEventListener("error",function(c){g&&g(c);f.manager.itemError(b)},!1);void 0!==this.responseType&&(k.responseType=this.responseType);void 0!==this.withCredentials&&(k.withCredentials=this.withCredentials);k.send(null);f.manager.itemStart(b);return k},setPath:function(b){this.path=b},setResponseType:function(b){this.responseType=b},setWithCredentials:function(b){this.withCredentials=b}};
THREE.FontLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};THREE.FontLoader.prototype={constructor:THREE.FontLoader,load:function(b,c,d,g){var f=this;(new THREE.XHRLoader(this.manager)).load(b,function(b){var d;try{d=JSON.parse(b)}catch(g){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),d=JSON.parse(b.substring(65,b.length-2))}b=f.parse(d);c&&c(b)},d,g)},parse:function(b){return new THREE.Font(b)}};
THREE.ImageLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(b,c,d,g){void 0!==this.path&&(b=this.path+b);var f=this,h=THREE.Cache.get(b);if(void 0!==h)return f.manager.itemStart(b),c?setTimeout(function(){c(h);f.manager.itemEnd(b)},0):f.manager.itemEnd(b),h;var k=document.createElement("img");k.addEventListener("load",function(d){THREE.Cache.add(b,this);c&&c(this);f.manager.itemEnd(b)},!1);void 0!==d&&k.addEventListener("progress",function(b){d(b)},!1);k.addEventListener("error",function(c){g&&
g(c);f.manager.itemError(b)},!1);void 0!==this.crossOrigin&&(k.crossOrigin=this.crossOrigin);f.manager.itemStart(b);k.src=b;return k},setCrossOrigin:function(b){this.crossOrigin=b},setPath:function(b){this.path=b}};THREE.JSONLoader=function(b){"boolean"===typeof b&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),b=void 0);this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this.withCredentials=!1};
THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,get statusDomElement(){void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div"));console.warn("THREE.JSONLoader: .statusDomElement has been removed.");return this._statusDomElement},load:function(b,c,d,g){var f=this,h=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(b),k=new THREE.XHRLoader(this.manager);k.setWithCredentials(this.withCredentials);k.load(b,
function(d){d=JSON.parse(d);var g=d.metadata;if(void 0!==g&&(g=g.type,void 0!==g)){if("object"===g.toLowerCase()){console.error("THREE.JSONLoader: "+b+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===g.toLowerCase()){console.error("THREE.JSONLoader: "+b+" should be loaded with THREE.SceneLoader instead.");return}}d=f.parse(d,h);c(d.geometry,d.materials)},d,g)},setTexturePath:function(b){this.texturePath=b},parse:function(b,c){var d=new THREE.Geometry,g=void 0!==b.scale?1/
b.scale:1;(function(c){var g,k,l,m,t,u,q,n,r,p,w,v,y,A=b.faces;u=b.vertices;var x=b.normals,z=b.colors,D=0;if(void 0!==b.uvs){for(g=0;g<b.uvs.length;g++)b.uvs[g].length&&D++;for(g=0;g<D;g++)d.faceVertexUvs[g]=[]}m=0;for(t=u.length;m<t;)g=new THREE.Vector3,g.x=u[m++]*c,g.y=u[m++]*c,g.z=u[m++]*c,d.vertices.push(g);m=0;for(t=A.length;m<t;)if(c=A[m++],r=c&1,l=c&2,g=c&8,q=c&16,p=c&32,u=c&64,c&=128,r){r=new THREE.Face3;r.a=A[m];r.b=A[m+1];r.c=A[m+3];w=new THREE.Face3;w.a=A[m+1];w.b=A[m+2];w.c=A[m+3];m+=
4;l&&(l=A[m++],r.materialIndex=l,w.materialIndex=l);l=d.faces.length;if(g)for(g=0;g<D;g++)for(v=b.uvs[g],d.faceVertexUvs[g][l]=[],d.faceVertexUvs[g][l+1]=[],k=0;4>k;k++)n=A[m++],y=v[2*n],n=v[2*n+1],y=new THREE.Vector2(y,n),2!==k&&d.faceVertexUvs[g][l].push(y),0!==k&&d.faceVertexUvs[g][l+1].push(y);q&&(q=3*A[m++],r.normal.set(x[q++],x[q++],x[q]),w.normal.copy(r.normal));if(p)for(g=0;4>g;g++)q=3*A[m++],p=new THREE.Vector3(x[q++],x[q++],x[q]),2!==g&&r.vertexNormals.push(p),0!==g&&w.vertexNormals.push(p);
u&&(u=A[m++],u=z[u],r.color.setHex(u),w.color.setHex(u));if(c)for(g=0;4>g;g++)u=A[m++],u=z[u],2!==g&&r.vertexColors.push(new THREE.Color(u)),0!==g&&w.vertexColors.push(new THREE.Color(u));d.faces.push(r);d.faces.push(w)}else{r=new THREE.Face3;r.a=A[m++];r.b=A[m++];r.c=A[m++];l&&(l=A[m++],r.materialIndex=l);l=d.faces.length;if(g)for(g=0;g<D;g++)for(v=b.uvs[g],d.faceVertexUvs[g][l]=[],k=0;3>k;k++)n=A[m++],y=v[2*n],n=v[2*n+1],y=new THREE.Vector2(y,n),d.faceVertexUvs[g][l].push(y);q&&(q=3*A[m++],r.normal.set(x[q++],
x[q++],x[q]));if(p)for(g=0;3>g;g++)q=3*A[m++],p=new THREE.Vector3(x[q++],x[q++],x[q]),r.vertexNormals.push(p);u&&(u=A[m++],r.color.setHex(z[u]));if(c)for(g=0;3>g;g++)u=A[m++],r.vertexColors.push(new THREE.Color(z[u]));d.faces.push(r)}})(g);(function(){var c=void 0!==b.influencesPerVertex?b.influencesPerVertex:2;if(b.skinWeights)for(var g=0,k=b.skinWeights.length;g<k;g+=c)d.skinWeights.push(new THREE.Vector4(b.skinWeights[g],1<c?b.skinWeights[g+1]:0,2<c?b.skinWeights[g+2]:0,3<c?b.skinWeights[g+3]:
0));if(b.skinIndices)for(g=0,k=b.skinIndices.length;g<k;g+=c)d.skinIndices.push(new THREE.Vector4(b.skinIndices[g],1<c?b.skinIndices[g+1]:0,2<c?b.skinIndices[g+2]:0,3<c?b.skinIndices[g+3]:0));d.bones=b.bones;d.bones&&0<d.bones.length&&(d.skinWeights.length!==d.skinIndices.length||d.skinIndices.length!==d.vertices.length)&&console.warn("When skinning, number of vertices ("+d.vertices.length+"), skinIndices ("+d.skinIndices.length+"), and skinWeights ("+d.skinWeights.length+") should match.")})();(function(c){if(void 0!==
b.morphTargets)for(var g=0,k=b.morphTargets.length;g<k;g++){d.morphTargets[g]={};d.morphTargets[g].name=b.morphTargets[g].name;d.morphTargets[g].vertices=[];for(var l=d.morphTargets[g].vertices,m=b.morphTargets[g].vertices,t=0,u=m.length;t<u;t+=3){var q=new THREE.Vector3;q.x=m[t]*c;q.y=m[t+1]*c;q.z=m[t+2]*c;l.push(q)}}if(void 0!==b.morphColors&&0<b.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),c=d.faces,l=b.morphColors[0].colors,
g=0,k=c.length;g<k;g++)c[g].color.fromArray(l,3*g)})(g);(function(){var c=[],g=[];void 0!==b.animation&&g.push(b.animation);void 0!==b.animations&&(b.animations.length?g=g.concat(b.animations):g.push(b.animations));for(var k=0;k<g.length;k++){var l=THREE.AnimationClip.parseAnimation(g[k],d.bones);l&&c.push(l)}d.morphTargets&&(g=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(d.morphTargets,10),c=c.concat(g));0<c.length&&(d.animations=c)})();d.computeFaceNormals();d.computeBoundingSphere();
if(void 0===b.materials||0===b.materials.length)return{geometry:d};g=THREE.Loader.prototype.initMaterials(b.materials,c,this.crossOrigin);return{geometry:d,materials:g}}};
THREE.LoadingManager=function(b,c,d){var g=this,f=!1,h=0,k=0;this.onStart=void 0;this.onLoad=b;this.onProgress=c;this.onError=d;this.itemStart=function(b){k++;if(!1===f&&void 0!==g.onStart)g.onStart(b,h,k);f=!0};this.itemEnd=function(b){h++;if(void 0!==g.onProgress)g.onProgress(b,h,k);if(h===k&&(f=!1,void 0!==g.onLoad))g.onLoad()};this.itemError=function(b){if(void 0!==g.onError)g.onError(b)}};THREE.DefaultLoadingManager=new THREE.LoadingManager;
THREE.BufferGeometryLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(b,c,d,g){var f=this;(new THREE.XHRLoader(f.manager)).load(b,function(b){c(f.parse(JSON.parse(b)))},d,g)},parse:function(b){var c=new THREE.BufferGeometry,d=b.data.index,g={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==d&&(d=
new g[d.type](d.array),c.setIndex(new THREE.BufferAttribute(d,1)));var f=b.data.attributes,h;for(h in f){var k=f[h],d=new g[k.type](k.array);c.addAttribute(h,new THREE.BufferAttribute(d,k.itemSize,k.normalized))}g=b.data.groups||b.data.drawcalls||b.data.offsets;if(void 0!==g)for(h=0,d=g.length;h!==d;++h)f=g[h],c.addGroup(f.start,f.count,f.materialIndex);b=b.data.boundingSphere;void 0!==b&&(g=new THREE.Vector3,void 0!==b.center&&g.fromArray(b.center),c.boundingSphere=new THREE.Sphere(g,b.radius));
return c}};THREE.MaterialLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this.textures={}};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(b,c,d,g){var f=this;(new THREE.XHRLoader(f.manager)).load(b,function(b){c(f.parse(JSON.parse(b)))},d,g)},setTextures:function(b){this.textures=b},getTexture:function(b){var c=this.textures;void 0===c[b]&&console.warn("THREE.MaterialLoader: Undefined texture",b);return c[b]},parse:function(b){var c=new THREE[b.type];void 0!==b.uuid&&(c.uuid=b.uuid);void 0!==b.name&&(c.name=b.name);void 0!==b.color&&c.color.setHex(b.color);
void 0!==b.roughness&&(c.roughness=b.roughness);void 0!==b.metalness&&(c.metalness=b.metalness);void 0!==b.emissive&&c.emissive.setHex(b.emissive);void 0!==b.specular&&c.specular.setHex(b.specular);void 0!==b.shininess&&(c.shininess=b.shininess);void 0!==b.uniforms&&(c.uniforms=b.uniforms);void 0!==b.vertexShader&&(c.vertexShader=b.vertexShader);void 0!==b.fragmentShader&&(c.fragmentShader=b.fragmentShader);void 0!==b.vertexColors&&(c.vertexColors=b.vertexColors);void 0!==b.shading&&(c.shading=b.shading);
void 0!==b.blending&&(c.blending=b.blending);void 0!==b.side&&(c.side=b.side);void 0!==b.opacity&&(c.opacity=b.opacity);void 0!==b.transparent&&(c.transparent=b.transparent);void 0!==b.alphaTest&&(c.alphaTest=b.alphaTest);void 0!==b.depthTest&&(c.depthTest=b.depthTest);void 0!==b.depthWrite&&(c.depthWrite=b.depthWrite);void 0!==b.colorWrite&&(c.colorWrite=b.colorWrite);void 0!==b.wireframe&&(c.wireframe=b.wireframe);void 0!==b.wireframeLinewidth&&(c.wireframeLinewidth=b.wireframeLinewidth);void 0!==
b.size&&(c.size=b.size);void 0!==b.sizeAttenuation&&(c.sizeAttenuation=b.sizeAttenuation);void 0!==b.map&&(c.map=this.getTexture(b.map));void 0!==b.alphaMap&&(c.alphaMap=this.getTexture(b.alphaMap),c.transparent=!0);void 0!==b.bumpMap&&(c.bumpMap=this.getTexture(b.bumpMap));void 0!==b.bumpScale&&(c.bumpScale=b.bumpScale);void 0!==b.normalMap&&(c.normalMap=this.getTexture(b.normalMap));if(void 0!==b.normalScale){var d=b.normalScale;!1===Array.isArray(d)&&(d=[d,d]);c.normalScale=(new THREE.Vector2).fromArray(d)}void 0!==
b.displacementMap&&(c.displacementMap=this.getTexture(b.displacementMap));void 0!==b.displacementScale&&(c.displacementScale=b.displacementScale);void 0!==b.displacementBias&&(c.displacementBias=b.displacementBias);void 0!==b.roughnessMap&&(c.roughnessMap=this.getTexture(b.roughnessMap));void 0!==b.metalnessMap&&(c.metalnessMap=this.getTexture(b.metalnessMap));void 0!==b.emissiveMap&&(c.emissiveMap=this.getTexture(b.emissiveMap));void 0!==b.emissiveIntensity&&(c.emissiveIntensity=b.emissiveIntensity);
void 0!==b.specularMap&&(c.specularMap=this.getTexture(b.specularMap));void 0!==b.envMap&&(c.envMap=this.getTexture(b.envMap),c.combine=THREE.MultiplyOperation);b.reflectivity&&(c.reflectivity=b.reflectivity);void 0!==b.lightMap&&(c.lightMap=this.getTexture(b.lightMap));void 0!==b.lightMapIntensity&&(c.lightMapIntensity=b.lightMapIntensity);void 0!==b.aoMap&&(c.aoMap=this.getTexture(b.aoMap));void 0!==b.aoMapIntensity&&(c.aoMapIntensity=b.aoMapIntensity);if(void 0!==b.materials)for(var d=0,g=b.materials.length;d<
g;d++)c.materials.push(this.parse(b.materials[d]));return c}};THREE.ObjectLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this.texturePath=""};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(b,c,d,g){""===this.texturePath&&(this.texturePath=b.substring(0,b.lastIndexOf("/")+1));var f=this;(new THREE.XHRLoader(f.manager)).load(b,function(b){f.parse(JSON.parse(b),c)},d,g)},setTexturePath:function(b){this.texturePath=b},setCrossOrigin:function(b){this.crossOrigin=b},parse:function(b,c){var d=this.parseGeometries(b.geometries),g=this.parseImages(b.images,function(){void 0!==c&&c(f)}),g=this.parseTextures(b.textures,
g),g=this.parseMaterials(b.materials,g),f=this.parseObject(b.object,d,g);b.animations&&(f.animations=this.parseAnimations(b.animations));void 0!==b.images&&0!==b.images.length||void 0===c||c(f);return f},parseGeometries:function(b){var c={};if(void 0!==b)for(var d=new THREE.JSONLoader,g=new THREE.BufferGeometryLoader,f=0,h=b.length;f<h;f++){var k,l=b[f];switch(l.type){case "PlaneGeometry":case "PlaneBufferGeometry":k=new THREE[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":k=
new THREE[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":k=new THREE[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":k=new THREE[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":k=new THREE[l.type](l.radius,l.height,l.radialSegments,
l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":k=new THREE[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case "DodecahedronGeometry":case "IcosahedronGeometry":case "OctahedronGeometry":case "TetrahedronGeometry":k=new THREE[l.type](l.radius,l.detail);break;case "RingGeometry":case "RingBufferGeometry":k=new THREE[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,
l.thetaStart,l.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":k=new THREE[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":k=new THREE[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case "LatheGeometry":case "LatheBufferGeometry":k=new THREE[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case "BufferGeometry":k=g.parse(l);break;case "Geometry":k=d.parse(l.data,this.texturePath).geometry;
break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}k.uuid=l.uuid;void 0!==l.name&&(k.name=l.name);c[l.uuid]=k}return c},parseMaterials:function(b,c){var d={};if(void 0!==b){var g=new THREE.MaterialLoader;g.setTextures(c);for(var f=0,h=b.length;f<h;f++){var k=g.parse(b[f]);d[k.uuid]=k}}return d},parseAnimations:function(b){for(var c=[],d=0;d<b.length;d++){var g=THREE.AnimationClip.parse(b[d]);c.push(g)}return c},parseImages:function(b,c){function d(b){g.manager.itemStart(b);
return k.load(b,function(){g.manager.itemEnd(b)})}var g=this,f={};if(void 0!==b&&0<b.length){var h=new THREE.LoadingManager(c),k=new THREE.ImageLoader(h);k.setCrossOrigin(this.crossOrigin);for(var h=0,l=b.length;h<l;h++){var m=b[h],t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m.url)?m.url:g.texturePath+m.url;f[m.uuid]=d(t)}}return f},parseTextures:function(b,c){function d(b){if("number"===typeof b)return b;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",b);return THREE[b]}
var g={};if(void 0!==b)for(var f=0,h=b.length;f<h;f++){var k=b[f];void 0===k.image&&console.warn('THREE.ObjectLoader: No "image" specified for',k.uuid);void 0===c[k.image]&&console.warn("THREE.ObjectLoader: Undefined image",k.image);var l=new THREE.Texture(c[k.image]);l.needsUpdate=!0;l.uuid=k.uuid;void 0!==k.name&&(l.name=k.name);void 0!==k.mapping&&(l.mapping=d(k.mapping));void 0!==k.offset&&(l.offset=new THREE.Vector2(k.offset[0],k.offset[1]));void 0!==k.repeat&&(l.repeat=new THREE.Vector2(k.repeat[0],
k.repeat[1]));void 0!==k.minFilter&&(l.minFilter=d(k.minFilter));void 0!==k.magFilter&&(l.magFilter=d(k.magFilter));void 0!==k.anisotropy&&(l.anisotropy=k.anisotropy);Array.isArray(k.wrap)&&(l.wrapS=d(k.wrap[0]),l.wrapT=d(k.wrap[1]));g[k.uuid]=l}return g},parseObject:function(){var b=new THREE.Matrix4;return function(c,d,g){function f(b){void 0===d[b]&&console.warn("THREE.ObjectLoader: Undefined geometry",b);return d[b]}function h(b){if(void 0!==b)return void 0===g[b]&&console.warn("THREE.ObjectLoader: Undefined material",
b),g[b]}var k;switch(c.type){case "Scene":k=new THREE.Scene;break;case "PerspectiveCamera":k=new THREE.PerspectiveCamera(c.fov,c.aspect,c.near,c.far);void 0!==c.focus&&(k.focus=c.focus);void 0!==c.zoom&&(k.zoom=c.zoom);void 0!==c.filmGauge&&(k.filmGauge=c.filmGauge);void 0!==c.filmOffset&&(k.filmOffset=c.filmOffset);void 0!==c.view&&(k.view=Object.assign({},c.view));break;case "OrthographicCamera":k=new THREE.OrthographicCamera(c.left,c.right,c.top,c.bottom,c.near,c.far);break;case "AmbientLight":k=
new THREE.AmbientLight(c.color,c.intensity);break;case "DirectionalLight":k=new THREE.DirectionalLight(c.color,c.intensity);break;case "PointLight":k=new THREE.PointLight(c.color,c.intensity,c.distance,c.decay);break;case "SpotLight":k=new THREE.SpotLight(c.color,c.intensity,c.distance,c.angle,c.penumbra,c.decay);break;case "HemisphereLight":k=new THREE.HemisphereLight(c.color,c.groundColor,c.intensity);break;case "Mesh":k=f(c.geometry);var l=h(c.material);k=k.bones&&0<k.bones.length?new THREE.SkinnedMesh(k,
l):new THREE.Mesh(k,l);break;case "LOD":k=new THREE.LOD;break;case "Line":k=new THREE.Line(f(c.geometry),h(c.material),c.mode);break;case "PointCloud":case "Points":k=new THREE.Points(f(c.geometry),h(c.material));break;case "Sprite":k=new THREE.Sprite(h(c.material));break;case "Group":k=new THREE.Group;break;default:k=new THREE.Object3D}k.uuid=c.uuid;void 0!==c.name&&(k.name=c.name);void 0!==c.matrix?(b.fromArray(c.matrix),b.decompose(k.position,k.quaternion,k.scale)):(void 0!==c.position&&k.position.fromArray(c.position),
void 0!==c.rotation&&k.rotation.fromArray(c.rotation),void 0!==c.scale&&k.scale.fromArray(c.scale));void 0!==c.castShadow&&(k.castShadow=c.castShadow);void 0!==c.receiveShadow&&(k.receiveShadow=c.receiveShadow);void 0!==c.visible&&(k.visible=c.visible);void 0!==c.userData&&(k.userData=c.userData);if(void 0!==c.children)for(var m in c.children)k.add(this.parseObject(c.children[m],d,g));if("LOD"===c.type)for(c=c.levels,l=0;l<c.length;l++){var t=c[l];m=k.getObjectByProperty("uuid",t.object);void 0!==
m&&k.addLevel(m,t.distance)}return k}}()};THREE.TextureLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(b,c,d,g){var f=new THREE.Texture,h=new THREE.ImageLoader(this.manager);h.setCrossOrigin(this.crossOrigin);h.setPath(this.path);h.load(b,function(b){f.image=b;f.needsUpdate=!0;void 0!==c&&c(f)},d,g);return f},setCrossOrigin:function(b){this.crossOrigin=b},setPath:function(b){this.path=b}};
THREE.CubeTextureLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.CubeTextureLoader.prototype={constructor:THREE.CubeTextureLoader,load:function(b,c,d,g){function f(f){k.load(b[f],function(b){h.images[f]=b;l++;6===l&&(h.needsUpdate=!0,c&&c(h))},void 0,g)}var h=new THREE.CubeTexture,k=new THREE.ImageLoader(this.manager);k.setCrossOrigin(this.crossOrigin);k.setPath(this.path);var l=0;for(d=0;d<b.length;++d)f(d);return h},setCrossOrigin:function(b){this.crossOrigin=b},setPath:function(b){this.path=b}};
THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this._parser=null};
THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(b,c,d,g){var f=this,h=new THREE.DataTexture,k=new THREE.XHRLoader(this.manager);k.setResponseType("arraybuffer");k.load(b,function(b){if(b=f._parser(b))void 0!==b.image?h.image=b.image:void 0!==b.data&&(h.image.width=b.width,h.image.height=b.height,h.image.data=b.data),h.wrapS=void 0!==b.wrapS?b.wrapS:THREE.ClampToEdgeWrapping,h.wrapT=void 0!==b.wrapT?b.wrapT:THREE.ClampToEdgeWrapping,h.magFilter=void 0!==b.magFilter?
b.magFilter:THREE.LinearFilter,h.minFilter=void 0!==b.minFilter?b.minFilter:THREE.LinearMipMapLinearFilter,h.anisotropy=void 0!==b.anisotropy?b.anisotropy:1,void 0!==b.format&&(h.format=b.format),void 0!==b.type&&(h.type=b.type),void 0!==b.mipmaps&&(h.mipmaps=b.mipmaps),1===b.mipmapCount&&(h.minFilter=THREE.LinearFilter),h.needsUpdate=!0,c&&c(h,b)},d,g);return h}};THREE.CompressedTextureLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this._parser=null};
THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(b,c,d,g){function f(f){m.load(b[f],function(b){b=h._parser(b,!0);k[f]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps};t+=1;6===t&&(1===b.mipmapCount&&(l.minFilter=THREE.LinearFilter),l.format=b.format,l.needsUpdate=!0,c&&c(l))},d,g)}var h=this,k=[],l=new THREE.CompressedTexture;l.image=k;var m=new THREE.XHRLoader(this.manager);m.setPath(this.path);m.setResponseType("arraybuffer");if(Array.isArray(b))for(var t=
0,u=0,q=b.length;u<q;++u)f(u);else m.load(b,function(b){b=h._parser(b,!0);if(b.isCubemap)for(var f=b.mipmaps.length/b.mipmapCount,d=0;d<f;d++){k[d]={mipmaps:[]};for(var g=0;g<b.mipmapCount;g++)k[d].mipmaps.push(b.mipmaps[d*b.mipmapCount+g]),k[d].format=b.format,k[d].width=b.width,k[d].height=b.height}else l.image.width=b.width,l.image.height=b.height,l.mipmaps=b.mipmaps;1===b.mipmapCount&&(l.minFilter=THREE.LinearFilter);l.format=b.format;l.needsUpdate=!0;c&&c(l)},d,g);return l},setPath:function(b){this.path=
b}};
THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=THREE.NormalBlending;this.side=THREE.FrontSide;this.shading=THREE.SmoothShading;this.vertexColors=THREE.NoColors;this.opacity=1;this.transparent=!1;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=
null;this.depthFunc=THREE.LessEqualDepth;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=!1;this.overdraw=0;this._needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(b){!0===b&&this.update();this._needsUpdate=b},setValues:function(b){if(void 0!==b)for(var c in b){var d=b[c];if(void 0===d)console.warn("THREE.Material: '"+c+"' parameter is undefined.");else{var g=this[c];void 0===g?console.warn("THREE."+this.type+": '"+c+"' is not a property of this material."):g instanceof THREE.Color?g.set(d):g instanceof THREE.Vector3&&d instanceof THREE.Vector3?g.copy(d):
this[c]="overdraw"===c?Number(d):d}}},toJSON:function(b){function c(b){var c=[],d;for(d in b){var g=b[d];delete g.metadata;c.push(g)}return c}var d=void 0===b;d&&(b={textures:{},images:{}});var g={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};g.uuid=this.uuid;g.type=this.type;""!==this.name&&(g.name=this.name);this.color instanceof THREE.Color&&(g.color=this.color.getHex());.5!==this.roughness&&(g.roughness=this.roughness);.5!==this.metalness&&(g.metalness=this.metalness);this.emissive instanceof
THREE.Color&&(g.emissive=this.emissive.getHex());this.specular instanceof THREE.Color&&(g.specular=this.specular.getHex());void 0!==this.shininess&&(g.shininess=this.shininess);this.map instanceof THREE.Texture&&(g.map=this.map.toJSON(b).uuid);this.alphaMap instanceof THREE.Texture&&(g.alphaMap=this.alphaMap.toJSON(b).uuid);this.lightMap instanceof THREE.Texture&&(g.lightMap=this.lightMap.toJSON(b).uuid);this.bumpMap instanceof THREE.Texture&&(g.bumpMap=this.bumpMap.toJSON(b).uuid,g.bumpScale=this.bumpScale);
this.normalMap instanceof THREE.Texture&&(g.normalMap=this.normalMap.toJSON(b).uuid,g.normalScale=this.normalScale.toArray());this.displacementMap instanceof THREE.Texture&&(g.displacementMap=this.displacementMap.toJSON(b).uuid,g.displacementScale=this.displacementScale,g.displacementBias=this.displacementBias);this.roughnessMap instanceof THREE.Texture&&(g.roughnessMap=this.roughnessMap.toJSON(b).uuid);this.metalnessMap instanceof THREE.Texture&&(g.metalnessMap=this.metalnessMap.toJSON(b).uuid);
this.emissiveMap instanceof THREE.Texture&&(g.emissiveMap=this.emissiveMap.toJSON(b).uuid);this.specularMap instanceof THREE.Texture&&(g.specularMap=this.specularMap.toJSON(b).uuid);this.envMap instanceof THREE.Texture&&(g.envMap=this.envMap.toJSON(b).uuid,g.reflectivity=this.reflectivity);void 0!==this.size&&(g.size=this.size);void 0!==this.sizeAttenuation&&(g.sizeAttenuation=this.sizeAttenuation);this.blending!==THREE.NormalBlending&&(g.blending=this.blending);this.shading!==THREE.SmoothShading&&
(g.shading=this.shading);this.side!==THREE.FrontSide&&(g.side=this.side);this.vertexColors!==THREE.NoColors&&(g.vertexColors=this.vertexColors);1>this.opacity&&(g.opacity=this.opacity);!0===this.transparent&&(g.transparent=this.transparent);0<this.alphaTest&&(g.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(g.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(g.wireframe=this.wireframe);1<this.wireframeLinewidth&&(g.wireframeLinewidth=this.wireframeLinewidth);d&&(d=c(b.textures),
b=c(b.images),0<d.length&&(g.textures=d),0<b.length&&(g.images=b));return g},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.name=b.name;this.fog=b.fog;this.lights=b.lights;this.blending=b.blending;this.side=b.side;this.vertexColors=b.vertexColors;this.opacity=b.opacity;this.transparent=b.transparent;this.blendSrc=b.blendSrc;this.blendDst=b.blendDst;this.blendEquation=b.blendEquation;this.blendSrcAlpha=b.blendSrcAlpha;this.blendDstAlpha=b.blendDstAlpha;this.blendEquationAlpha=
b.blendEquationAlpha;this.depthFunc=b.depthFunc;this.depthTest=b.depthTest;this.depthWrite=b.depthWrite;this.colorWrite=b.colorWrite;this.precision=b.precision;this.polygonOffset=b.polygonOffset;this.polygonOffsetFactor=b.polygonOffsetFactor;this.polygonOffsetUnits=b.polygonOffsetUnits;this.alphaTest=b.alphaTest;this.premultipliedAlpha=b.premultipliedAlpha;this.overdraw=b.overdraw;this.visible=b.visible;this.clipShadows=b.clipShadows;b=b.clippingPlanes;var c=null;if(null!==b)for(var d=b.length,c=
Array(d),g=0;g!==d;++g)c[g]=b[g].clone();this.clippingPlanes=c;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};Object.assign(THREE.Material.prototype,THREE.EventDispatcher.prototype);THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(b){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(b)};
THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;THREE.LineBasicMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.linewidth=b.linewidth;this.linecap=b.linecap;this.linejoin=b.linejoin;return this};
THREE.LineDashedMaterial=function(b){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.lights=!1;this.setValues(b)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;
THREE.LineDashedMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.linewidth=b.linewidth;this.scale=b.scale;this.dashSize=b.dashSize;this.gapSize=b.gapSize;return this};
THREE.MeshBasicMaterial=function(b){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new THREE.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(b)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;
THREE.MeshBasicMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;
this.skinning=b.skinning;this.morphTargets=b.morphTargets;return this};THREE.MeshDepthMaterial=function(b){THREE.Material.call(this);this.type="MeshDepthMaterial";this.depthPacking=THREE.BasicDepthPacking;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(b)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;THREE.MeshDepthMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.depthPacking=b.depthPacking;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.map=b.map;this.alphaMap=b.alphaMap;this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;return this};
THREE.MeshLambertMaterial=function(b){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new THREE.Color(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;
THREE.MeshLambertMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissive.copy(b.emissive);this.emissiveMap=b.emissiveMap;this.emissiveIntensity=b.emissiveIntensity;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=
b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};THREE.MeshNormalMaterial=function(b){THREE.Material.call(this,b);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=this.lights=this.fog=!1;this.setValues(b)};
THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;THREE.MeshNormalMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;return this};
THREE.MeshPhongMaterial=function(b){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new THREE.Color(16777215);this.specular=new THREE.Color(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;
THREE.MeshPhongMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.specular.copy(b.specular);this.shininess=b.shininess;this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissive.copy(b.emissive);this.emissiveMap=b.emissiveMap;this.emissiveIntensity=b.emissiveIntensity;this.bumpMap=b.bumpMap;this.bumpScale=b.bumpScale;this.normalMap=b.normalMap;this.normalScale.copy(b.normalScale);
this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.skinning=b.skinning;this.morphTargets=b.morphTargets;
this.morphNormals=b.morphNormals;return this};
THREE.MeshStandardMaterial=function(b){THREE.Material.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new THREE.Color(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=
1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)};THREE.MeshStandardMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshStandardMaterial.prototype.constructor=THREE.MeshStandardMaterial;
THREE.MeshStandardMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.defines={STANDARD:""};this.color.copy(b.color);this.roughness=b.roughness;this.metalness=b.metalness;this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissive.copy(b.emissive);this.emissiveMap=b.emissiveMap;this.emissiveIntensity=b.emissiveIntensity;this.bumpMap=b.bumpMap;this.bumpScale=b.bumpScale;this.normalMap=
b.normalMap;this.normalScale.copy(b.normalScale);this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.roughnessMap=b.roughnessMap;this.metalnessMap=b.metalnessMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.envMapIntensity=b.envMapIntensity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;
this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};THREE.MeshPhysicalMaterial=function(b){THREE.MeshStandardMaterial.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.setValues(b)};THREE.MeshPhysicalMaterial.prototype=Object.create(THREE.MeshStandardMaterial.prototype);THREE.MeshPhysicalMaterial.prototype.constructor=THREE.MeshPhysicalMaterial;
THREE.MeshPhysicalMaterial.prototype.copy=function(b){THREE.MeshStandardMaterial.prototype.copy.call(this,b);this.defines={PHYSICAL:""};this.reflectivity=b.reflectivity;return this};THREE.MultiMaterial=function(b){this.uuid=THREE.Math.generateUUID();this.type="MultiMaterial";this.materials=b instanceof Array?b:[];this.visible=!0};
THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(b){for(var c={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},d=this.materials,g=0,f=d.length;g<f;g++){var h=d[g].toJSON(b);delete h.metadata;c.materials.push(h)}c.visible=this.visible;return c},clone:function(){for(var b=new this.constructor,c=0;c<this.materials.length;c++)b.materials.push(this.materials[c].clone());b.visible=this.visible;return b}};
THREE.PointsMaterial=function(b){THREE.Material.call(this);this.type="PointsMaterial";this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(b)};THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial;
THREE.PointsMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.size=b.size;this.sizeAttenuation=b.sizeAttenuation;return this};
THREE.ShaderMaterial=function(b){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,
drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==b&&(void 0!==b.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(b))};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;
THREE.ShaderMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.fragmentShader=b.fragmentShader;this.vertexShader=b.vertexShader;this.uniforms=THREE.UniformsUtils.clone(b.uniforms);this.defines=b.defines;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.lights=b.lights;this.clipping=b.clipping;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;this.extensions=b.extensions;return this};
THREE.ShaderMaterial.prototype.toJSON=function(b){b=THREE.Material.prototype.toJSON.call(this,b);b.uniforms=this.uniforms;b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;return b};THREE.RawShaderMaterial=function(b){THREE.ShaderMaterial.call(this,b);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial;
THREE.SpriteMaterial=function(b){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(b)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial;THREE.SpriteMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.rotation=b.rotation;return this};
THREE.ShadowMaterial=function(){THREE.ShaderMaterial.call(this,{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.lights,{opacity:{value:1}}]),vertexShader:THREE.ShaderChunk.shadow_vert,fragmentShader:THREE.ShaderChunk.shadow_frag});this.transparent=this.lights=!0;Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(b){this.uniforms.opacity.value=b}}})};THREE.ShadowMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);
THREE.ShadowMaterial.prototype.constructor=THREE.ShadowMaterial;
THREE.Texture=function(b,c,d,g,f,h,k,l,m,t){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==b?b:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==c?c:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==d?d:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==g?g:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==f?f:THREE.LinearFilter;this.minFilter=void 0!==h?h:THREE.LinearMipMapLinearFilter;
this.anisotropy=void 0!==m?m:1;this.format=void 0!==k?k:THREE.RGBAFormat;this.type=void 0!==l?l:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==t?t:THREE.LinearEncoding;this.version=0;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(b){!0===b&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.image=b.image;this.mipmaps=b.mipmaps.slice(0);this.mapping=b.mapping;this.wrapS=b.wrapS;this.wrapT=b.wrapT;this.magFilter=b.magFilter;this.minFilter=b.minFilter;this.anisotropy=b.anisotropy;this.format=b.format;this.type=b.type;this.offset.copy(b.offset);this.repeat.copy(b.repeat);this.generateMipmaps=b.generateMipmaps;this.premultiplyAlpha=
b.premultiplyAlpha;this.flipY=b.flipY;this.unpackAlignment=b.unpackAlignment;this.encoding=b.encoding;return this},toJSON:function(b){if(void 0!==b.textures[this.uuid])return b.textures[this.uuid];var c={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};
if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=THREE.Math.generateUUID());if(void 0===b.images[d.uuid]){var g=b.images,f=d.uuid,h=d.uuid,k;void 0!==d.toDataURL?k=d:(k=document.createElement("canvas"),k.width=d.width,k.height=d.height,k.getContext("2d").drawImage(d,0,0,d.width,d.height));k=2048<k.width||2048<k.height?k.toDataURL("image/jpeg",.6):k.toDataURL("image/png");g[f]={uuid:h,url:k}}c.image=d.uuid}return b.textures[this.uuid]=c},dispose:function(){this.dispatchEvent({type:"dispose"})},
transformUv:function(b){if(this.mapping===THREE.UVMapping){b.multiply(this.repeat);b.add(this.offset);if(0>b.x||1<b.x)switch(this.wrapS){case THREE.RepeatWrapping:b.x-=Math.floor(b.x);break;case THREE.ClampToEdgeWrapping:b.x=0>b.x?0:1;break;case THREE.MirroredRepeatWrapping:b.x=1===Math.abs(Math.floor(b.x)%2)?Math.ceil(b.x)-b.x:b.x-Math.floor(b.x)}if(0>b.y||1<b.y)switch(this.wrapT){case THREE.RepeatWrapping:b.y-=Math.floor(b.y);break;case THREE.ClampToEdgeWrapping:b.y=0>b.y?0:1;break;case THREE.MirroredRepeatWrapping:b.y=
1===Math.abs(Math.floor(b.y)%2)?Math.ceil(b.y)-b.y:b.y-Math.floor(b.y)}this.flipY&&(b.y=1-b.y)}}};Object.assign(THREE.Texture.prototype,THREE.EventDispatcher.prototype);THREE.TextureIdCount=0;
THREE.DepthTexture=function(b,c,d,g,f,h,k,l,m){THREE.Texture.call(this,null,g,f,h,k,l,THREE.DepthFormat,d,m);this.image={width:b,height:c};this.type=void 0!==d?d:THREE.UnsignedShortType;this.magFilter=void 0!==k?k:THREE.NearestFilter;this.minFilter=void 0!==l?l:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DepthTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DepthTexture.prototype.constructor=THREE.DepthTexture;
THREE.CanvasTexture=function(b,c,d,g,f,h,k,l,m){THREE.Texture.call(this,b,c,d,g,f,h,k,l,m);this.needsUpdate=!0};THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture;THREE.CubeTexture=function(b,c,d,g,f,h,k,l,m,t){b=void 0!==b?b:[];c=void 0!==c?c:THREE.CubeReflectionMapping;THREE.Texture.call(this,b,c,d,g,f,h,k,l,m,t);this.flipY=!1};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;Object.defineProperty(THREE.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(b){this.image=b}});THREE.CompressedTexture=function(b,c,d,g,f,h,k,l,m,t,u,q){THREE.Texture.call(this,null,h,k,l,m,t,g,f,u,q);this.image={width:c,height:d};this.mipmaps=b;this.generateMipmaps=this.flipY=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;
THREE.DataTexture=function(b,c,d,g,f,h,k,l,m,t,u,q){THREE.Texture.call(this,null,h,k,l,m,t,g,f,u,q);this.image={data:b,width:c,height:d};this.magFilter=void 0!==m?m:THREE.NearestFilter;this.minFilter=void 0!==t?t:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;
THREE.VideoTexture=function(b,c,d,g,f,h,k,l,m){function t(){requestAnimationFrame(t);b.readyState>=b.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}THREE.Texture.call(this,b,c,d,g,f,h,k,l,m);this.generateMipmaps=!1;var u=this;t()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Group});
THREE.Points=function(b,c){THREE.Object3D.call(this);this.type="Points";this.geometry=void 0!==b?b:new THREE.BufferGeometry;this.material=void 0!==c?c:new THREE.PointsMaterial({color:16777215*Math.random()})};
THREE.Points.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Points,raycast:function(){var b=new THREE.Matrix4,c=new THREE.Ray,d=new THREE.Sphere;return function(g,f){function h(b,d){var h=c.distanceSqToPoint(b);if(h<u){var l=c.closestPointToPoint(b);l.applyMatrix4(m);var n=g.ray.origin.distanceTo(l);n<g.near||n>g.far||f.push({distance:n,distanceToRay:Math.sqrt(h),point:l.clone(),index:d,face:null,object:k})}}var k=this,l=this.geometry,m=this.matrixWorld,t=g.params.Points.threshold;
null===l.boundingSphere&&l.computeBoundingSphere();d.copy(l.boundingSphere);d.applyMatrix4(m);if(!1!==g.ray.intersectsSphere(d)){b.getInverse(m);c.copy(g.ray).applyMatrix4(b);var t=t/((this.scale.x+this.scale.y+this.scale.z)/3),u=t*t,t=new THREE.Vector3;if(l instanceof THREE.BufferGeometry){var q=l.index,l=l.attributes.position.array;if(null!==q)for(var n=q.array,q=0,r=n.length;q<r;q++){var p=n[q];t.fromArray(l,3*p);h(t,p)}else for(q=0,n=l.length/3;q<n;q++)t.fromArray(l,3*q),h(t,q)}else for(t=l.vertices,
q=0,n=t.length;q<n;q++)h(t[q],q)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.Line=function(b,c,d){if(1===d)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(b,c);THREE.Object3D.call(this);this.type="Line";this.geometry=void 0!==b?b:new THREE.BufferGeometry;this.material=void 0!==c?c:new THREE.LineBasicMaterial({color:16777215*Math.random()})};
THREE.Line.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Line,raycast:function(){var b=new THREE.Matrix4,c=new THREE.Ray,d=new THREE.Sphere;return function(g,f){var h=g.linePrecision,h=h*h,k=this.geometry,l=this.matrixWorld;null===k.boundingSphere&&k.computeBoundingSphere();d.copy(k.boundingSphere);d.applyMatrix4(l);if(!1!==g.ray.intersectsSphere(d)){b.getInverse(l);c.copy(g.ray).applyMatrix4(b);var m=new THREE.Vector3,t=new THREE.Vector3,l=new THREE.Vector3,u=
new THREE.Vector3,q=this instanceof THREE.LineSegments?2:1;if(k instanceof THREE.BufferGeometry){var n=k.index,r=k.attributes.position.array;if(null!==n)for(var n=n.array,k=0,p=n.length-1;k<p;k+=q){var w=n[k+1];m.fromArray(r,3*n[k]);t.fromArray(r,3*w);w=c.distanceSqToSegment(m,t,u,l);w>h||(u.applyMatrix4(this.matrixWorld),w=g.ray.origin.distanceTo(u),w<g.near||w>g.far||f.push({distance:w,point:l.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this}))}else for(k=0,p=
r.length/3-1;k<p;k+=q)m.fromArray(r,3*k),t.fromArray(r,3*k+3),w=c.distanceSqToSegment(m,t,u,l),w>h||(u.applyMatrix4(this.matrixWorld),w=g.ray.origin.distanceTo(u),w<g.near||w>g.far||f.push({distance:w,point:l.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this}))}else if(k instanceof THREE.Geometry)for(m=k.vertices,t=m.length,k=0;k<t-1;k+=q)w=c.distanceSqToSegment(m[k],m[k+1],u,l),w>h||(u.applyMatrix4(this.matrixWorld),w=g.ray.origin.distanceTo(u),w<g.near||w>g.far||
f.push({distance:w,point:l.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.LineSegments=function(b,c){THREE.Line.call(this,b,c);this.type="LineSegments"};THREE.LineSegments.prototype=Object.assign(Object.create(THREE.Line.prototype),{constructor:THREE.LineSegments});
THREE.Mesh=function(b,c){THREE.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==b?b:new THREE.BufferGeometry;this.material=void 0!==c?c:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.drawMode=THREE.TrianglesDrawMode;this.updateMorphTargets()};
THREE.Mesh.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Mesh,setDrawMode:function(b){this.drawMode=b},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var b=0,c=this.geometry.morphTargets.length;b<c;b++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[b].name]=b}},getMorphTargetIndexByName:function(b){if(void 0!==
this.morphTargetDictionary[b])return this.morphTargetDictionary[b];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+b+" does not exist. Returning 0.");return 0},raycast:function(){function b(b,c,f,d,g,h,k){THREE.Triangle.barycoordFromPoint(b,c,f,d,w);g.multiplyScalar(w.x);h.multiplyScalar(w.y);k.multiplyScalar(w.z);g.add(h).add(k);return g.clone()}function c(b,c,f,d,g,h,k){var l=b.material;if(null===(l.side===THREE.BackSide?f.intersectTriangle(h,g,d,!0,k):f.intersectTriangle(d,g,
h,l.side!==THREE.DoubleSide,k)))return null;y.copy(k);y.applyMatrix4(b.matrixWorld);f=c.ray.origin.distanceTo(y);return f<c.near||f>c.far?null:{distance:f,point:y.clone(),object:b}}function d(f,d,g,h,q,t,w,u){k.fromArray(h,3*t);l.fromArray(h,3*w);m.fromArray(h,3*u);if(f=c(f,d,g,k,l,m,v))q&&(n.fromArray(q,2*t),r.fromArray(q,2*w),p.fromArray(q,2*u),f.uv=b(v,k,l,m,n,r,p)),f.face=new THREE.Face3(t,w,u,THREE.Triangle.normal(k,l,m)),f.faceIndex=t;return f}var g=new THREE.Matrix4,f=new THREE.Ray,h=new THREE.Sphere,
k=new THREE.Vector3,l=new THREE.Vector3,m=new THREE.Vector3,t=new THREE.Vector3,u=new THREE.Vector3,q=new THREE.Vector3,n=new THREE.Vector2,r=new THREE.Vector2,p=new THREE.Vector2,w=new THREE.Vector3,v=new THREE.Vector3,y=new THREE.Vector3;return function(w,y){var z=this.geometry,D=this.material,B=this.matrixWorld;if(void 0!==D&&(null===z.boundingSphere&&z.computeBoundingSphere(),h.copy(z.boundingSphere),h.applyMatrix4(B),!1!==w.ray.intersectsSphere(h)&&(g.getInverse(B),f.copy(w.ray).applyMatrix4(g),
null===z.boundingBox||!1!==f.intersectsBox(z.boundingBox)))){var C,E;if(z instanceof THREE.BufferGeometry){var G,H,D=z.index,B=z.attributes,z=B.position.array;void 0!==B.uv&&(C=B.uv.array);if(null!==D)for(var B=D.array,I=0,L=B.length;I<L;I+=3){if(D=B[I],G=B[I+1],H=B[I+2],E=d(this,w,f,z,C,D,G,H))E.faceIndex=Math.floor(I/3),y.push(E)}else for(I=0,L=z.length;I<L;I+=9)if(D=I/3,G=D+1,H=D+2,E=d(this,w,f,z,C,D,G,H))E.index=D,y.push(E)}else if(z instanceof THREE.Geometry){var J,K,B=D instanceof THREE.MultiMaterial,
I=!0===B?D.materials:null,L=z.vertices;G=z.faces;H=z.faceVertexUvs[0];0<H.length&&(C=H);for(var M=0,P=G.length;M<P;M++){var N=G[M];E=!0===B?I[N.materialIndex]:D;if(void 0!==E){H=L[N.a];J=L[N.b];K=L[N.c];if(!0===E.morphTargets){E=z.morphTargets;var S=this.morphTargetInfluences;k.set(0,0,0);l.set(0,0,0);m.set(0,0,0);for(var U=0,W=E.length;U<W;U++){var V=S[U];if(0!==V){var X=E[U].vertices;k.addScaledVector(t.subVectors(X[N.a],H),V);l.addScaledVector(u.subVectors(X[N.b],J),V);m.addScaledVector(q.subVectors(X[N.c],
K),V)}}k.add(H);l.add(J);m.add(K);H=k;J=l;K=m}if(E=c(this,w,f,H,J,K,v))C&&(S=C[M],n.copy(S[0]),r.copy(S[1]),p.copy(S[2]),E.uv=b(v,H,J,K,n,r,p)),E.face=N,E.faceIndex=M,y.push(E)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.Bone=function(b){THREE.Object3D.call(this);this.type="Bone";this.skin=b};
THREE.Bone.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Bone,copy:function(b){THREE.Object3D.prototype.copy.call(this,b);this.skin=b.skin;return this}});
THREE.Skeleton=function(b,c,d){this.useVertexTexture=void 0!==d?d:!0;this.identityMatrix=new THREE.Matrix4;b=b||[];this.bones=b.slice(0);this.useVertexTexture?(b=Math.sqrt(4*this.bones.length),b=THREE.Math.nextPowerOfTwo(Math.ceil(b)),this.boneTextureHeight=this.boneTextureWidth=b=Math.max(b,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)):
this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===c)this.calculateInverses();else if(this.bones.length===c.length)this.boneInverses=c.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],c=0,b=this.bones.length;c<b;c++)this.boneInverses.push(new THREE.Matrix4)};
Object.assign(THREE.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var b=0,c=this.bones.length;b<c;b++){var d=new THREE.Matrix4;this.bones[b]&&d.getInverse(this.bones[b].matrixWorld);this.boneInverses.push(d)}},pose:function(){for(var b,c=0,d=this.bones.length;c<d;c++)(b=this.bones[c])&&b.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(d=this.bones.length;c<d;c++)if(b=this.bones[c])b.parent?(b.matrix.getInverse(b.parent.matrixWorld),b.matrix.multiply(b.matrixWorld)):
b.matrix.copy(b.matrixWorld),b.matrix.decompose(b.position,b.quaternion,b.scale)},update:function(){var b=new THREE.Matrix4;return function(){for(var c=0,d=this.bones.length;c<d;c++)b.multiplyMatrices(this.bones[c]?this.bones[c].matrixWorld:this.identityMatrix,this.boneInverses[c]),b.toArray(this.boneMatrices,16*c);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}});
THREE.SkinnedMesh=function(b,c,d){THREE.Mesh.call(this,b,c);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;b=[];if(this.geometry&&void 0!==this.geometry.bones){for(var g,f=0,h=this.geometry.bones.length;f<h;++f)g=this.geometry.bones[f],c=new THREE.Bone(this),b.push(c),c.name=g.name,c.position.fromArray(g.pos),c.quaternion.fromArray(g.rotq),void 0!==g.scl&&c.scale.fromArray(g.scl);f=0;for(h=this.geometry.bones.length;f<h;++f)g=
this.geometry.bones[f],-1!==g.parent&&null!==g.parent&&void 0!==b[g.parent]?b[g.parent].add(b[f]):this.add(b[f])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(b,void 0,d),this.matrixWorld)};
THREE.SkinnedMesh.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.SkinnedMesh,bind:function(b,c){this.skeleton=b;void 0===c&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),c=this.matrixWorld);this.bindMatrix.copy(c);this.bindMatrixInverse.getInverse(c)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry instanceof THREE.Geometry)for(var b=0;b<this.geometry.skinWeights.length;b++){var c=this.geometry.skinWeights[b],d=
1/c.lengthManhattan();Infinity!==d?c.multiplyScalar(d):c.set(1,0,0,0)}else if(this.geometry instanceof THREE.BufferGeometry)for(var c=new THREE.Vector4,g=this.geometry.attributes.skinWeight,b=0;b<g.count;b++)c.x=g.getX(b),c.y=g.getY(b),c.z=g.getZ(b),c.w=g.getW(b),d=1/c.lengthManhattan(),Infinity!==d?c.multiplyScalar(d):c.set(1,0,0,0),g.setXYZW(b,c.x,c.y,c.z,c.w)},updateMatrixWorld:function(b){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):
"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material,this.useVertexTexture)).copy(this)}});THREE.LOD=function(){THREE.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})};
THREE.LOD.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LOD,copy:function(b){THREE.Object3D.prototype.copy.call(this,b,!1);b=b.levels;for(var c=0,d=b.length;c<d;c++){var g=b[c];this.addLevel(g.object.clone(),g.distance)}return this},addLevel:function(b,c){void 0===c&&(c=0);c=Math.abs(c);for(var d=this.levels,g=0;g<d.length&&!(c<d[g].distance);g++);d.splice(g,0,{distance:c,object:b});this.add(b)},getObjectForDistance:function(b){for(var c=this.levels,d=1,g=c.length;d<
g&&!(b<c[d].distance);d++);return c[d-1].object},raycast:function(){var b=new THREE.Vector3;return function(c,d){b.setFromMatrixPosition(this.matrixWorld);var g=c.ray.origin.distanceTo(b);this.getObjectForDistance(g).raycast(c,d)}}(),update:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d){var g=this.levels;if(1<g.length){b.setFromMatrixPosition(d.matrixWorld);c.setFromMatrixPosition(this.matrixWorld);d=b.distanceTo(c);g[0].object.visible=!0;for(var f=1,h=g.length;f<h;f++)if(d>=
g[f].distance)g[f-1].object.visible=!1,g[f].object.visible=!0;else break;for(;f<h;f++)g[f].object.visible=!1}}}(),toJSON:function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.levels=[];for(var c=this.levels,d=0,g=c.length;d<g;d++){var f=c[d];b.object.levels.push({object:f.object.uuid,distance:f.distance})}return b}});THREE.Sprite=function(b){THREE.Object3D.call(this);this.type="Sprite";this.material=void 0!==b?b:new THREE.SpriteMaterial};
THREE.Sprite.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Sprite,raycast:function(){var b=new THREE.Vector3;return function(c,d){b.setFromMatrixPosition(this.matrixWorld);var g=c.ray.distanceSqToPoint(b);g>this.scale.x*this.scale.y/4||d.push({distance:Math.sqrt(g),point:this.position,face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});
THREE.LensFlare=function(b,c,d,g,f){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==b&&this.add(b,c,d,g,f)};
THREE.LensFlare.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LensFlare,copy:function(b){THREE.Object3D.prototype.copy.call(this,b);this.positionScreen.copy(b.positionScreen);this.customUpdateCallback=b.customUpdateCallback;for(var c=0,d=b.lensFlares.length;c<d;c++)this.lensFlares.push(b.lensFlares[c]);return this},add:function(b,c,d,g,f,h){void 0===c&&(c=-1);void 0===d&&(d=0);void 0===h&&(h=1);void 0===f&&(f=new THREE.Color(16777215));void 0===g&&(g=THREE.NormalBlending);
d=Math.min(d,Math.max(0,d));this.lensFlares.push({texture:b,size:c,distance:d,x:0,y:0,z:0,scale:1,rotation:0,opacity:h,color:f,blending:g})},updateLensFlares:function(){var b,c=this.lensFlares.length,d,g=2*-this.positionScreen.x,f=2*-this.positionScreen.y;for(b=0;b<c;b++)d=this.lensFlares[b],d.x=this.positionScreen.x+g*d.distance,d.y=this.positionScreen.y+f*d.distance,d.wantedRotation=d.x*Math.PI*.25,d.rotation+=.25*(d.wantedRotation-d.rotation)}});
THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;
THREE.Scene.prototype.copy=function(b,c){THREE.Object3D.prototype.copy.call(this,b,c);null!==b.fog&&(this.fog=b.fog.clone());null!==b.overrideMaterial&&(this.overrideMaterial=b.overrideMaterial.clone());this.autoUpdate=b.autoUpdate;this.matrixAutoUpdate=b.matrixAutoUpdate;return this};THREE.Fog=function(b,c,d){this.name="";this.color=new THREE.Color(b);this.near=void 0!==c?c:1;this.far=void 0!==d?d:1E3};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};
THREE.FogExp2=function(b,c){this.name="";this.color=new THREE.Color(b);this.density=void 0!==c?c:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n";
THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";
THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n";THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n";THREE.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";
THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";
THREE.ShaderChunk.clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n";THREE.ShaderChunk.clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";
THREE.ShaderChunk.clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";THREE.ShaderChunk.clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";
THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";THREE.ShaderChunk.common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n";
THREE.ShaderChunk.cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";
THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n";THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";
THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n";THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";THREE.ShaderChunk.encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n";
THREE.ShaderChunk.encodings_fragment="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";
THREE.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";
THREE.ShaderChunk.envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";THREE.ShaderChunk.envmap_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";
THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";
THREE.ShaderChunk.lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";
THREE.ShaderChunk.lights_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal = 1.0;\n\t\t#endif\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal = 1.0;\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";
THREE.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";THREE.ShaderChunk.lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";
THREE.ShaderChunk.lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.16 * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#endif\n";THREE.ShaderChunk.lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t#endif\n};\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n";
THREE.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\n#endif\n";
THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif";THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";
THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n";
THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n";THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n";THREE.ShaderChunk.metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n";
THREE.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";
THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";
THREE.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";
THREE.ShaderChunk.packing="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthoDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat OrthoDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";
THREE.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n";THREE.ShaderChunk.roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n";
THREE.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";
THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";
THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";
THREE.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";
THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";
THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";THREE.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n";
THREE.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";
THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";
THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n";THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n";
THREE.UniformsUtils={merge:function(b){for(var c={},d=0;d<b.length;d++){var g=this.clone(b[d]),f;for(f in g)c[f]=g[f]}return c},clone:function(b){var c={},d;for(d in b){c[d]={};for(var g in b[d]){var f=b[d][g];f instanceof THREE.Color||f instanceof THREE.Vector2||f instanceof THREE.Vector3||f instanceof THREE.Vector4||f instanceof THREE.Matrix3||f instanceof THREE.Matrix4||f instanceof THREE.Texture?c[d][g]=f.clone():Array.isArray(f)?c[d][g]=f.slice():c[d][g]=f}}return c}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"1f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"1f",value:-1},reflectivity:{type:"1f",value:1},refractionRatio:{type:"1f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"1f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"1f",
value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"1f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"1f",value:1},displacementBias:{type:"1f",value:0}},roughnessmap:{roughnessMap:{type:"t",value:null}},metalnessmap:{metalnessMap:{type:"t",value:null}},fog:{fogDensity:{type:"1f",value:2.5E-4},fogNear:{type:"1f",
value:1},fogFar:{type:"1f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"3fv",value:[]},directionalLights:{type:"sa",value:[],properties:{direction:{type:"v3"},color:{type:"c"},shadow:{type:"1i"},shadowBias:{type:"1f"},shadowRadius:{type:"1f"},shadowMapSize:{type:"v2"}}},directionalShadowMap:{type:"tv",value:[]},directionalShadowMatrix:{type:"m4v",value:[]},spotLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},direction:{type:"v3"},
distance:{type:"1f"},coneCos:{type:"1f"},penumbraCos:{type:"1f"},decay:{type:"1f"},shadow:{type:"1i"},shadowBias:{type:"1f"},shadowRadius:{type:"1f"},shadowMapSize:{type:"v2"}}},spotShadowMap:{type:"tv",value:[]},spotShadowMatrix:{type:"m4v",value:[]},pointLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},decay:{type:"1f"},distance:{type:"1f"},shadow:{type:"1i"},shadowBias:{type:"1f"},shadowRadius:{type:"1f"},shadowMapSize:{type:"v2"}}},pointShadowMap:{type:"tv",value:[]},
pointShadowMatrix:{type:"m4v",value:[]},hemisphereLights:{type:"sa",value:[],properties:{direction:{type:"v3"},skyColor:{type:"c"},groundColor:{type:"c"}}}},points:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"1f",value:1},size:{type:"1f",value:1},scale:{type:"1f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)}}};THREE.ShaderChunk.cube_frag="uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\t#include <logdepthbuf_fragment>\n}\n";
THREE.ShaderChunk.cube_vert="varying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";THREE.ShaderChunk.depth_frag="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";
THREE.ShaderChunk.depth_vert="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.distanceRGBA_frag="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n";THREE.ShaderChunk.distanceRGBA_vert="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n";
THREE.ShaderChunk.equirect_frag="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <logdepthbuf_fragment>\n}\n";
THREE.ShaderChunk.equirect_vert="varying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";THREE.ShaderChunk.linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshbasic_vert="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n";
THREE.ShaderChunk.meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.meshphysical_frag="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshphysical_vert="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.normal_frag="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n";THREE.ShaderChunk.normal_vert="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.points_vert="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.shadow_frag="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n";THREE.ShaderChunk.shadow_vert="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog]),vertexShader:THREE.ShaderChunk.meshbasic_vert,fragmentShader:THREE.ShaderChunk.meshbasic_frag},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{type:"c",value:new THREE.Color(0)}}]),vertexShader:THREE.ShaderChunk.meshlambert_vert,
fragmentShader:THREE.ShaderChunk.meshlambert_frag},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"1f",value:30}}]),vertexShader:THREE.ShaderChunk.meshphong_vert,
fragmentShader:THREE.ShaderChunk.meshphong_frag},standard:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.roughnessmap,THREE.UniformsLib.metalnessmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{type:"c",value:new THREE.Color(0)},roughness:{type:"1f",value:.5},metalness:{type:"1f",value:0},
envMapIntensity:{type:"1f",value:1}}]),vertexShader:THREE.ShaderChunk.meshphysical_vert,fragmentShader:THREE.ShaderChunk.meshphysical_frag},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.fog]),vertexShader:THREE.ShaderChunk.points_vert,fragmentShader:THREE.ShaderChunk.points_frag},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"1f",value:1},dashSize:{type:"1f",value:1},totalSize:{type:"1f",value:2}}]),
vertexShader:THREE.ShaderChunk.linedashed_vert,fragmentShader:THREE.ShaderChunk.linedashed_frag},depth:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.displacementmap]),vertexShader:THREE.ShaderChunk.depth_vert,fragmentShader:THREE.ShaderChunk.depth_frag},normal:{uniforms:{opacity:{type:"1f",value:1}},vertexShader:THREE.ShaderChunk.normal_vert,fragmentShader:THREE.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"1f",value:-1}},vertexShader:THREE.ShaderChunk.cube_vert,
fragmentShader:THREE.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"1f",value:-1}},vertexShader:THREE.ShaderChunk.equirect_vert,fragmentShader:THREE.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new THREE.Vector3}},vertexShader:THREE.ShaderChunk.distanceRGBA_vert,fragmentShader:THREE.ShaderChunk.distanceRGBA_frag}};
THREE.ShaderLib.physical={uniforms:THREE.UniformsUtils.merge([THREE.ShaderLib.standard.uniforms,{}]),vertexShader:THREE.ShaderChunk.meshphysical_vert,fragmentShader:THREE.ShaderChunk.meshphysical_frag};
THREE.WebGLRenderer=function(b){function c(b,c,f,d){!0===P&&(b*=d,c*=d,f*=d);ga.clearColor(b,c,f,d)}function d(){ga.init();ga.scissor(za.copy(wa).multiplyScalar(na));ga.viewport(oa.copy(Ja).multiplyScalar(na));c(fa.r,fa.g,fa.b,F)}function g(){ma=ba=null;qa="";Z=-1;ga.reset()}function f(b){b.preventDefault();g();d();ta.clear()}function h(b){b=b.target;b.removeEventListener("dispose",h);a:{var c=ta.get(b);if(b.image&&c.__image__webglTextureCube)Q.deleteTexture(c.__image__webglTextureCube);else{if(void 0===
c.__webglInit)break a;Q.deleteTexture(c.__webglTexture)}ta["delete"](b)}Ia.textures--}function k(b){b=b.target;b.removeEventListener("dispose",k);var c=ta.get(b),f=ta.get(b.texture);if(b){void 0!==f.__webglTexture&&Q.deleteTexture(f.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b instanceof THREE.WebGLRenderTargetCube)for(f=0;6>f;f++)Q.deleteFramebuffer(c.__webglFramebuffer[f]),c.__webglDepthbuffer&&Q.deleteRenderbuffer(c.__webglDepthbuffer[f]);else Q.deleteFramebuffer(c.__webglFramebuffer),
c.__webglDepthbuffer&&Q.deleteRenderbuffer(c.__webglDepthbuffer);ta["delete"](b.texture);ta["delete"](b)}Ia.textures--}function l(b){b=b.target;b.removeEventListener("dispose",l);m(b);ta["delete"](b)}function m(b){var c=ta.get(b).program;b.program=void 0;void 0!==c&&Va.releaseProgram(c)}function t(b,c){return Math.abs(c[0])-Math.abs(b[0])}function u(b,c){return b.object.renderOrder!==c.object.renderOrder?b.object.renderOrder-c.object.renderOrder:b.material.id!==c.material.id?b.material.id-c.material.id:
b.z!==c.z?b.z-c.z:b.id-c.id}function q(b,c){return b.object.renderOrder!==c.object.renderOrder?b.object.renderOrder-c.object.renderOrder:b.z!==c.z?c.z-b.z:b.id-c.id}function n(b,c,f,d,g){var h;f.transparent?(d=V,h=++X):(d=U,h=++W);h=d[h];void 0!==h?(h.id=b.id,h.object=b,h.geometry=c,h.material=f,h.z=Ka.z,h.group=g):(h={id:b.id,object:b,geometry:c,material:f,z:Ka.z,group:g},d.push(h))}function r(b){if(!$a.intersectsSphere(b))return!1;var c=Da.numPlanes;if(0===c)return!0;var f=Y.clippingPlanes,d=b.center;
b=-b.radius;var g=0;do if(f[g].distanceToPoint(d)<b)return!1;while(++g!==c);return!0}function p(b,c){if(!1!==b.visible){if(b.layers.test(c.layers))if(b instanceof THREE.Light)S.push(b);else if(b instanceof THREE.Sprite){var f;(f=!1===b.frustumCulled)||(Ya.center.set(0,0,0),Ya.radius=.7071067811865476,Ya.applyMatrix4(b.matrixWorld),f=!0===r(Ya));f&&da.push(b)}else if(b instanceof THREE.LensFlare)R.push(b);else if(b instanceof THREE.ImmediateRenderObject)!0===Y.sortObjects&&(Ka.setFromMatrixPosition(b.matrixWorld),
Ka.applyProjection(ab)),n(b,null,b.material,Ka.z,null);else if(b instanceof THREE.Mesh||b instanceof THREE.Line||b instanceof THREE.Points)if(b instanceof THREE.SkinnedMesh&&b.skeleton.update(),(f=!1===b.frustumCulled)||(f=b.geometry,null===f.boundingSphere&&f.computeBoundingSphere(),Ya.copy(f.boundingSphere).applyMatrix4(b.matrixWorld),f=!0===r(Ya)),f){var d=b.material;if(!0===d.visible)if(!0===Y.sortObjects&&(Ka.setFromMatrixPosition(b.matrixWorld),Ka.applyProjection(ab)),f=eb.update(b),d instanceof
THREE.MultiMaterial)for(var g=f.groups,h=d.materials,d=0,k=g.length;d<k;d++){var l=g[d],m=h[l.materialIndex];!0===m.visible&&n(b,f,m,Ka.z,l)}else n(b,f,d,Ka.z,null)}f=b.children;d=0;for(k=f.length;d<k;d++)p(f[d],c)}}function w(b,c,f,d){for(var g=0,h=b.length;g<h;g++){var k=b[g],l=k.object,m=k.geometry,n=void 0===d?k.material:d,k=k.group;l.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,l.matrixWorld);l.normalMatrix.getNormalMatrix(l.modelViewMatrix);if(l instanceof THREE.ImmediateRenderObject){v(n);
var p=y(c,f,n,l);qa="";l.render(function(b){Y.renderBufferImmediate(b,p,n)})}else Y.renderBufferDirect(c,f,m,n,l,k)}}function v(b){b.side!==THREE.DoubleSide?ga.enable(Q.CULL_FACE):ga.disable(Q.CULL_FACE);ga.setFlipSided(b.side===THREE.BackSide);!0===b.transparent?ga.setBlending(b.blending,b.blendEquation,b.blendSrc,b.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha,b.premultipliedAlpha):ga.setBlending(THREE.NoBlending);ga.setDepthFunc(b.depthFunc);ga.setDepthTest(b.depthTest);ga.setDepthWrite(b.depthWrite);
ga.setColorWrite(b.colorWrite);ga.setPolygonOffset(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits)}function y(b,c,f,d){ua=0;var g=ta.get(f);Xa&&((Ha||b!==ma)&&Da.setState(f.clippingPlanes,f.clipShadows,b,g,b===ma&&f.id===Z),void 0!==g.numClippingPlanes&&g.numClippingPlanes!==Da.numPlanes&&(f.needsUpdate=!0));void 0===g.program&&(f.needsUpdate=!0);void 0!==g.lightsHash&&g.lightsHash!==pa.hash&&(f.needsUpdate=!0);if(f.needsUpdate){a:{var h=ta.get(f),k=Va.getParameters(f,pa,c,Da.numPlanes,
d),n=Va.getProgramCode(f,k),p=h.program,r=!0;if(void 0===p)f.addEventListener("dispose",l);else if(p.code!==n)m(f);else if(void 0!==k.shaderID)break a;else r=!1;r&&(k.shaderID?(p=THREE.ShaderLib[k.shaderID],h.__webglShader={name:f.type,uniforms:THREE.UniformsUtils.clone(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}):h.__webglShader={name:f.type,uniforms:f.uniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader},f.__webglShader=h.__webglShader,p=Va.acquireProgram(f,
k,n),h.program=p,f.program=p);k=p.getAttributes();if(f.morphTargets)for(n=f.numSupportedMorphTargets=0;n<Y.maxMorphTargets;n++)0<=k["morphTarget"+n]&&f.numSupportedMorphTargets++;if(f.morphNormals)for(n=f.numSupportedMorphNormals=0;n<Y.maxMorphNormals;n++)0<=k["morphNormal"+n]&&f.numSupportedMorphNormals++;k=h.__webglShader.uniforms;(f instanceof THREE.ShaderMaterial||f instanceof THREE.RawShaderMaterial)&&!0!==f.clipping||(h.numClippingPlanes=Da.numPlanes,k.clippingPlanes=Da.uniform);f.lights&&(h.lightsHash=
pa.hash,k.ambientLightColor.value=pa.ambient,k.directionalLights.value=pa.directional,k.spotLights.value=pa.spot,k.pointLights.value=pa.point,k.hemisphereLights.value=pa.hemi,k.directionalShadowMap.value=pa.directionalShadowMap,k.directionalShadowMatrix.value=pa.directionalShadowMatrix,k.spotShadowMap.value=pa.spotShadowMap,k.spotShadowMatrix.value=pa.spotShadowMatrix,k.pointShadowMap.value=pa.pointShadowMap,k.pointShadowMatrix.value=pa.pointShadowMatrix);n=h.program.getUniforms();n=THREE.WebGLUniforms.seqWithValue(n.seq,
k);h.uniformsList=n;h.dynamicUniforms=THREE.WebGLUniforms.splitDynamic(n,k)}f.needsUpdate=!1}var q=!1,r=p=!1,h=g.program,n=h.getUniforms(),k=g.__webglShader.uniforms;h.id!==ba&&(Q.useProgram(h.program),ba=h.id,r=p=q=!0);f.id!==Z&&(Z=f.id,p=!0);if(q||b!==ma){n.set(Q,b,"projectionMatrix");Aa.logarithmicDepthBuffer&&n.setValue(Q,"logDepthBufFC",2/(Math.log(b.far+1)/Math.LN2));b!==ma&&(ma=b,r=p=!0);if(f instanceof THREE.ShaderMaterial||f instanceof THREE.MeshPhongMaterial||f instanceof THREE.MeshStandardMaterial||
f.envMap)q=n.map.cameraPosition,void 0!==q&&q.setValue(Q,Ka.setFromMatrixPosition(b.matrixWorld));(f instanceof THREE.MeshPhongMaterial||f instanceof THREE.MeshLambertMaterial||f instanceof THREE.MeshBasicMaterial||f instanceof THREE.MeshStandardMaterial||f instanceof THREE.ShaderMaterial||f.skinning)&&n.setValue(Q,"viewMatrix",b.matrixWorldInverse);n.set(Q,Y,"toneMappingExposure");n.set(Q,Y,"toneMappingWhitePoint")}f.skinning&&(n.setOptional(Q,d,"bindMatrix"),n.setOptional(Q,d,"bindMatrixInverse"),
q=d.skeleton)&&(Aa.floatVertexTextures&&q.useVertexTexture?(n.set(Q,q,"boneTexture"),n.set(Q,q,"boneTextureWidth"),n.set(Q,q,"boneTextureHeight")):n.setOptional(Q,q,"boneMatrices"));if(p){f.lights&&(p=r,k.ambientLightColor.needsUpdate=p,k.directionalLights.needsUpdate=p,k.pointLights.needsUpdate=p,k.spotLights.needsUpdate=p,k.hemisphereLights.needsUpdate=p);c&&f.fog&&(k.fogColor.value=c.color,c instanceof THREE.Fog?(k.fogNear.value=c.near,k.fogFar.value=c.far):c instanceof THREE.FogExp2&&(k.fogDensity.value=
c.density));if(f instanceof THREE.MeshBasicMaterial||f instanceof THREE.MeshLambertMaterial||f instanceof THREE.MeshPhongMaterial||f instanceof THREE.MeshStandardMaterial||f instanceof THREE.MeshDepthMaterial){k.opacity.value=f.opacity;k.diffuse.value=f.color;f.emissive&&k.emissive.value.copy(f.emissive).multiplyScalar(f.emissiveIntensity);k.map.value=f.map;k.specularMap.value=f.specularMap;k.alphaMap.value=f.alphaMap;f.aoMap&&(k.aoMap.value=f.aoMap,k.aoMapIntensity.value=f.aoMapIntensity);var t;
f.map?t=f.map:f.specularMap?t=f.specularMap:f.displacementMap?t=f.displacementMap:f.normalMap?t=f.normalMap:f.bumpMap?t=f.bumpMap:f.roughnessMap?t=f.roughnessMap:f.metalnessMap?t=f.metalnessMap:f.alphaMap?t=f.alphaMap:f.emissiveMap&&(t=f.emissiveMap);void 0!==t&&(t instanceof THREE.WebGLRenderTarget&&(t=t.texture),c=t.offset,t=t.repeat,k.offsetRepeat.value.set(c.x,c.y,t.x,t.y));k.envMap.value=f.envMap;k.flipEnvMap.value=f.envMap instanceof THREE.CubeTexture?-1:1;k.reflectivity.value=f.reflectivity;
k.refractionRatio.value=f.refractionRatio}f instanceof THREE.LineBasicMaterial?(k.diffuse.value=f.color,k.opacity.value=f.opacity):f instanceof THREE.LineDashedMaterial?(k.diffuse.value=f.color,k.opacity.value=f.opacity,k.dashSize.value=f.dashSize,k.totalSize.value=f.dashSize+f.gapSize,k.scale.value=f.scale):f instanceof THREE.PointsMaterial?(k.diffuse.value=f.color,k.opacity.value=f.opacity,k.size.value=f.size*na,k.scale.value=.5*H.clientHeight,k.map.value=f.map,null!==f.map&&(t=f.map.offset,f=f.map.repeat,
k.offsetRepeat.value.set(t.x,t.y,f.x,f.y))):f instanceof THREE.MeshLambertMaterial?(f.lightMap&&(k.lightMap.value=f.lightMap,k.lightMapIntensity.value=f.lightMapIntensity),f.emissiveMap&&(k.emissiveMap.value=f.emissiveMap)):f instanceof THREE.MeshPhongMaterial?(k.specular.value=f.specular,k.shininess.value=Math.max(f.shininess,1E-4),f.lightMap&&(k.lightMap.value=f.lightMap,k.lightMapIntensity.value=f.lightMapIntensity),f.emissiveMap&&(k.emissiveMap.value=f.emissiveMap),f.bumpMap&&(k.bumpMap.value=
f.bumpMap,k.bumpScale.value=f.bumpScale),f.normalMap&&(k.normalMap.value=f.normalMap,k.normalScale.value.copy(f.normalScale)),f.displacementMap&&(k.displacementMap.value=f.displacementMap,k.displacementScale.value=f.displacementScale,k.displacementBias.value=f.displacementBias)):f instanceof THREE.MeshPhysicalMaterial?A(k,f):f instanceof THREE.MeshStandardMaterial?A(k,f):f instanceof THREE.MeshDepthMaterial?f.displacementMap&&(k.displacementMap.value=f.displacementMap,k.displacementScale.value=f.displacementScale,
k.displacementBias.value=f.displacementBias):f instanceof THREE.MeshNormalMaterial&&(k.opacity.value=f.opacity);THREE.WebGLUniforms.upload(Q,g.uniformsList,k,Y)}n.set(Q,d,"modelViewMatrix");n.set(Q,d,"normalMatrix");n.setValue(Q,"modelMatrix",d.matrixWorld);g=g.dynamicUniforms;null!==g&&(THREE.WebGLUniforms.evalDynamic(g,k,d,b),THREE.WebGLUniforms.upload(Q,g,k,Y));return h}function A(b,c){b.roughness.value=c.roughness;b.metalness.value=c.metalness;c.roughnessMap&&(b.roughnessMap.value=c.roughnessMap);
c.metalnessMap&&(b.metalnessMap.value=c.metalnessMap);c.lightMap&&(b.lightMap.value=c.lightMap,b.lightMapIntensity.value=c.lightMapIntensity);c.emissiveMap&&(b.emissiveMap.value=c.emissiveMap);c.bumpMap&&(b.bumpMap.value=c.bumpMap,b.bumpScale.value=c.bumpScale);c.normalMap&&(b.normalMap.value=c.normalMap,b.normalScale.value.copy(c.normalScale));c.displacementMap&&(b.displacementMap.value=c.displacementMap,b.displacementScale.value=c.displacementScale,b.displacementBias.value=c.displacementBias);c.envMap&&
(b.envMapIntensity.value=c.envMapIntensity)}function x(b,c,f){f?(Q.texParameteri(b,Q.TEXTURE_WRAP_S,G(c.wrapS)),Q.texParameteri(b,Q.TEXTURE_WRAP_T,G(c.wrapT)),Q.texParameteri(b,Q.TEXTURE_MAG_FILTER,G(c.magFilter)),Q.texParameteri(b,Q.TEXTURE_MIN_FILTER,G(c.minFilter))):(Q.texParameteri(b,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(b,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),c.wrapS===THREE.ClampToEdgeWrapping&&c.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",
c),Q.texParameteri(b,Q.TEXTURE_MAG_FILTER,E(c.magFilter)),Q.texParameteri(b,Q.TEXTURE_MIN_FILTER,E(c.minFilter)),c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",c));!(f=ia.get("EXT_texture_filter_anisotropic"))||c.type===THREE.FloatType&&null===ia.get("OES_texture_float_linear")||c.type===THREE.HalfFloatType&&null===ia.get("OES_texture_half_float_linear")||
!(1<c.anisotropy||ta.get(c).__currentAnisotropy)||(Q.texParameterf(b,f.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(c.anisotropy,Y.getMaxAnisotropy())),ta.get(c).__currentAnisotropy=c.anisotropy)}function z(b,c){if(b.width>c||b.height>c){var f=c/Math.max(b.width,b.height),d=document.createElement("canvas");d.width=Math.floor(b.width*f);d.height=Math.floor(b.height*f);d.getContext("2d").drawImage(b,0,0,b.width,b.height,0,0,d.width,d.height);console.warn("THREE.WebGLRenderer: image is too big ("+b.width+"x"+
b.height+"). Resized to "+d.width+"x"+d.height,b);return d}return b}function D(b){return THREE.Math.isPowerOfTwo(b.width)&&THREE.Math.isPowerOfTwo(b.height)}function B(b,c,f,d){var g=G(c.texture.format),h=G(c.texture.type);ga.texImage2D(d,0,g,c.width,c.height,0,g,h,null);Q.bindFramebuffer(Q.FRAMEBUFFER,b);Q.framebufferTexture2D(Q.FRAMEBUFFER,f,d,ta.get(c.texture).__webglTexture,0);Q.bindFramebuffer(Q.FRAMEBUFFER,null)}function C(b,c){Q.bindRenderbuffer(Q.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?
(Q.renderbufferStorage(Q.RENDERBUFFER,Q.DEPTH_COMPONENT16,c.width,c.height),Q.framebufferRenderbuffer(Q.FRAMEBUFFER,Q.DEPTH_ATTACHMENT,Q.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(Q.renderbufferStorage(Q.RENDERBUFFER,Q.DEPTH_STENCIL,c.width,c.height),Q.framebufferRenderbuffer(Q.FRAMEBUFFER,Q.DEPTH_STENCIL_ATTACHMENT,Q.RENDERBUFFER,b)):Q.renderbufferStorage(Q.RENDERBUFFER,Q.RGBA4,c.width,c.height);Q.bindRenderbuffer(Q.RENDERBUFFER,null)}function E(b){return b===THREE.NearestFilter||b===THREE.NearestMipMapNearestFilter||
b===THREE.NearestMipMapLinearFilter?Q.NEAREST:Q.LINEAR}function G(b){var c;if(b===THREE.RepeatWrapping)return Q.REPEAT;if(b===THREE.ClampToEdgeWrapping)return Q.CLAMP_TO_EDGE;if(b===THREE.MirroredRepeatWrapping)return Q.MIRRORED_REPEAT;if(b===THREE.NearestFilter)return Q.NEAREST;if(b===THREE.NearestMipMapNearestFilter)return Q.NEAREST_MIPMAP_NEAREST;if(b===THREE.NearestMipMapLinearFilter)return Q.NEAREST_MIPMAP_LINEAR;if(b===THREE.LinearFilter)return Q.LINEAR;if(b===THREE.LinearMipMapNearestFilter)return Q.LINEAR_MIPMAP_NEAREST;
if(b===THREE.LinearMipMapLinearFilter)return Q.LINEAR_MIPMAP_LINEAR;if(b===THREE.UnsignedByteType)return Q.UNSIGNED_BYTE;if(b===THREE.UnsignedShort4444Type)return Q.UNSIGNED_SHORT_4_4_4_4;if(b===THREE.UnsignedShort5551Type)return Q.UNSIGNED_SHORT_5_5_5_1;if(b===THREE.UnsignedShort565Type)return Q.UNSIGNED_SHORT_5_6_5;if(b===THREE.ByteType)return Q.BYTE;if(b===THREE.ShortType)return Q.SHORT;if(b===THREE.UnsignedShortType)return Q.UNSIGNED_SHORT;if(b===THREE.IntType)return Q.INT;if(b===THREE.UnsignedIntType)return Q.UNSIGNED_INT;
if(b===THREE.FloatType)return Q.FLOAT;c=ia.get("OES_texture_half_float");if(null!==c&&b===THREE.HalfFloatType)return c.HALF_FLOAT_OES;if(b===THREE.AlphaFormat)return Q.ALPHA;if(b===THREE.RGBFormat)return Q.RGB;if(b===THREE.RGBAFormat)return Q.RGBA;if(b===THREE.LuminanceFormat)return Q.LUMINANCE;if(b===THREE.LuminanceAlphaFormat)return Q.LUMINANCE_ALPHA;if(b===THREE.DepthFormat)return Q.DEPTH_COMPONENT;if(b===THREE.AddEquation)return Q.FUNC_ADD;if(b===THREE.SubtractEquation)return Q.FUNC_SUBTRACT;
if(b===THREE.ReverseSubtractEquation)return Q.FUNC_REVERSE_SUBTRACT;if(b===THREE.ZeroFactor)return Q.ZERO;if(b===THREE.OneFactor)return Q.ONE;if(b===THREE.SrcColorFactor)return Q.SRC_COLOR;if(b===THREE.OneMinusSrcColorFactor)return Q.ONE_MINUS_SRC_COLOR;if(b===THREE.SrcAlphaFactor)return Q.SRC_ALPHA;if(b===THREE.OneMinusSrcAlphaFactor)return Q.ONE_MINUS_SRC_ALPHA;if(b===THREE.DstAlphaFactor)return Q.DST_ALPHA;if(b===THREE.OneMinusDstAlphaFactor)return Q.ONE_MINUS_DST_ALPHA;if(b===THREE.DstColorFactor)return Q.DST_COLOR;
if(b===THREE.OneMinusDstColorFactor)return Q.ONE_MINUS_DST_COLOR;if(b===THREE.SrcAlphaSaturateFactor)return Q.SRC_ALPHA_SATURATE;c=ia.get("WEBGL_compressed_texture_s3tc");if(null!==c){if(b===THREE.RGB_S3TC_DXT1_Format)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(b===THREE.RGBA_S3TC_DXT1_Format)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(b===THREE.RGBA_S3TC_DXT3_Format)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(b===THREE.RGBA_S3TC_DXT5_Format)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}c=ia.get("WEBGL_compressed_texture_pvrtc");
if(null!==c){if(b===THREE.RGB_PVRTC_4BPPV1_Format)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(b===THREE.RGB_PVRTC_2BPPV1_Format)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(b===THREE.RGBA_PVRTC_4BPPV1_Format)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(b===THREE.RGBA_PVRTC_2BPPV1_Format)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}c=ia.get("WEBGL_compressed_texture_etc1");if(null!==c&&b===THREE.RGB_ETC1_Format)return c.COMPRESSED_RGB_ETC1_WEBGL;c=ia.get("EXT_blend_minmax");if(null!==c){if(b===THREE.MinEquation)return c.MIN_EXT;
if(b===THREE.MaxEquation)return c.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);b=b||{};var H=void 0!==b.canvas?b.canvas:document.createElement("canvas"),I=void 0!==b.context?b.context:null,L=void 0!==b.alpha?b.alpha:!1,J=void 0!==b.depth?b.depth:!0,K=void 0!==b.stencil?b.stencil:!0,M=void 0!==b.antialias?b.antialias:!1,P=void 0!==b.premultipliedAlpha?b.premultipliedAlpha:!0,N=void 0!==b.preserveDrawingBuffer?b.preserveDrawingBuffer:!1,S=[],U=[],W=-1,V=[],X=-1,ea=new Float32Array(8),
da=[],R=[];this.domElement=H;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMapping=THREE.LinearToneMapping;this.toneMappingWhitePoint=this.toneMappingExposure=1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;var Y=this,ba=null,ca=null,aa=null,Z=-1,qa="",ma=null,
za=new THREE.Vector4,va=null,oa=new THREE.Vector4,ua=0,fa=new THREE.Color(0),F=0,Ba=H.width,ra=H.height,na=1,wa=new THREE.Vector4(0,0,Ba,ra),Oa=!1,Ja=new THREE.Vector4(0,0,Ba,ra),$a=new THREE.Frustum,Da=new THREE.WebGLClipping,Xa=!1,Ha=!1,Ya=new THREE.Sphere,ab=new THREE.Matrix4,Ka=new THREE.Vector3,pa={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},
Ia={geometries:0,textures:0},Ra={calls:0,vertices:0,faces:0,points:0};this.info={render:Ra,memory:Ia,programs:null};var Q;try{L={alpha:L,depth:J,stencil:K,antialias:M,premultipliedAlpha:P,preserveDrawingBuffer:N};Q=I||H.getContext("webgl",L)||H.getContext("experimental-webgl",L);if(null===Q){if(null!==H.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context.";}void 0===Q.getShaderPrecisionFormat&&(Q.getShaderPrecisionFormat=function(){return{rangeMin:1,
rangeMax:1,precision:1}});H.addEventListener("webglcontextlost",f,!1)}catch(Na){console.error("THREE.WebGLRenderer: "+Na)}var sa="undefined"!==typeof WebGL2RenderingContext&&Q instanceof WebGL2RenderingContext,ia=new THREE.WebGLExtensions(Q);ia.get("WEBGL_depth_texture");ia.get("OES_texture_float");ia.get("OES_texture_float_linear");ia.get("OES_texture_half_float");ia.get("OES_texture_half_float_linear");ia.get("OES_standard_derivatives");ia.get("ANGLE_instanced_arrays");ia.get("OES_element_index_uint")&&
(THREE.BufferGeometry.MaxIndex=4294967296);var Aa=new THREE.WebGLCapabilities(Q,ia,b),ga=new THREE.WebGLState(Q,ia,G),ta=new THREE.WebGLProperties,eb=new THREE.WebGLObjects(Q,ta,this.info),Va=new THREE.WebGLPrograms(this,Aa),Ta=new THREE.WebGLLights;this.info.programs=Va.programs;var jb=new THREE.WebGLBufferRenderer(Q,ia,Ra),jc=new THREE.WebGLIndexedBufferRenderer(Q,ia,Ra);d();this.context=Q;this.capabilities=Aa;this.extensions=ia;this.properties=ta;this.state=ga;var Rb=new THREE.WebGLShadowMap(this,
pa,eb);this.shadowMap=Rb;var Wa=new THREE.SpritePlugin(this,da),Ga=new THREE.LensFlarePlugin(this,R);this.getContext=function(){return Q};this.getContextAttributes=function(){return Q.getContextAttributes()};this.forceContextLoss=function(){ia.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){var b;return function(){if(void 0!==b)return b;var c=ia.get("EXT_texture_filter_anisotropic");return b=null!==c?Q.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}();this.getPrecision=
function(){return Aa.precision};this.getPixelRatio=function(){return na};this.setPixelRatio=function(b){void 0!==b&&(na=b,this.setSize(Ja.z,Ja.w,!1))};this.getSize=function(){return{width:Ba,height:ra}};this.setSize=function(b,c,f){Ba=b;ra=c;H.width=b*na;H.height=c*na;!1!==f&&(H.style.width=b+"px",H.style.height=c+"px");this.setViewport(0,0,b,c)};this.setViewport=function(b,c,f,d){ga.viewport(Ja.set(b,c,f,d))};this.setScissor=function(b,c,f,d){ga.scissor(wa.set(b,c,f,d))};this.setScissorTest=function(b){ga.setScissorTest(Oa=
b)};this.getClearColor=function(){return fa};this.setClearColor=function(b,f){fa.set(b);F=void 0!==f?f:1;c(fa.r,fa.g,fa.b,F)};this.getClearAlpha=function(){return F};this.setClearAlpha=function(b){F=b;c(fa.r,fa.g,fa.b,F)};this.clear=function(b,c,f){var d=0;if(void 0===b||b)d|=Q.COLOR_BUFFER_BIT;if(void 0===c||c)d|=Q.DEPTH_BUFFER_BIT;if(void 0===f||f)d|=Q.STENCIL_BUFFER_BIT;Q.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=
function(){this.clear(!1,!1,!0)};this.clearTarget=function(b,c,f,d){this.setRenderTarget(b);this.clear(c,f,d)};this.resetGLState=g;this.dispose=function(){H.removeEventListener("webglcontextlost",f,!1)};this.renderBufferImmediate=function(b,c,f){ga.initAttributes();var d=ta.get(b);b.hasPositions&&!d.position&&(d.position=Q.createBuffer());b.hasNormals&&!d.normal&&(d.normal=Q.createBuffer());b.hasUvs&&!d.uv&&(d.uv=Q.createBuffer());b.hasColors&&!d.color&&(d.color=Q.createBuffer());c=c.getAttributes();
b.hasPositions&&(Q.bindBuffer(Q.ARRAY_BUFFER,d.position),Q.bufferData(Q.ARRAY_BUFFER,b.positionArray,Q.DYNAMIC_DRAW),ga.enableAttribute(c.position),Q.vertexAttribPointer(c.position,3,Q.FLOAT,!1,0,0));if(b.hasNormals){Q.bindBuffer(Q.ARRAY_BUFFER,d.normal);if("MeshPhongMaterial"!==f.type&&"MeshStandardMaterial"!==f.type&&"MeshPhysicalMaterial"!==f.type&&f.shading===THREE.FlatShading)for(var g=0,h=3*b.count;g<h;g+=9){var k=b.normalArray,l=(k[g+0]+k[g+3]+k[g+6])/3,m=(k[g+1]+k[g+4]+k[g+7])/3,n=(k[g+2]+
k[g+5]+k[g+8])/3;k[g+0]=l;k[g+1]=m;k[g+2]=n;k[g+3]=l;k[g+4]=m;k[g+5]=n;k[g+6]=l;k[g+7]=m;k[g+8]=n}Q.bufferData(Q.ARRAY_BUFFER,b.normalArray,Q.DYNAMIC_DRAW);ga.enableAttribute(c.normal);Q.vertexAttribPointer(c.normal,3,Q.FLOAT,!1,0,0)}b.hasUvs&&f.map&&(Q.bindBuffer(Q.ARRAY_BUFFER,d.uv),Q.bufferData(Q.ARRAY_BUFFER,b.uvArray,Q.DYNAMIC_DRAW),ga.enableAttribute(c.uv),Q.vertexAttribPointer(c.uv,2,Q.FLOAT,!1,0,0));b.hasColors&&f.vertexColors!==THREE.NoColors&&(Q.bindBuffer(Q.ARRAY_BUFFER,d.color),Q.bufferData(Q.ARRAY_BUFFER,
b.colorArray,Q.DYNAMIC_DRAW),ga.enableAttribute(c.color),Q.vertexAttribPointer(c.color,3,Q.FLOAT,!1,0,0));ga.disableUnusedAttributes();Q.drawArrays(Q.TRIANGLES,0,b.count);b.count=0};this.renderBufferDirect=function(b,c,f,d,g,h){v(d);var k=y(b,c,d,g),l=!1;b=f.id+"_"+k.id+"_"+d.wireframe;b!==qa&&(qa=b,l=!0);c=g.morphTargetInfluences;if(void 0!==c){b=[];for(var m=0,l=c.length;m<l;m++){var n=c[m];b.push([n,m])}b.sort(t);8<b.length&&(b.length=8);for(var p=f.morphAttributes,m=0,l=b.length;m<l;m++)n=b[m],
ea[m]=n[0],0!==n[0]?(c=n[1],!0===d.morphTargets&&p.position&&f.addAttribute("morphTarget"+m,p.position[c]),!0===d.morphNormals&&p.normal&&f.addAttribute("morphNormal"+m,p.normal[c])):(!0===d.morphTargets&&f.removeAttribute("morphTarget"+m),!0===d.morphNormals&&f.removeAttribute("morphNormal"+m));k.getUniforms().setValue(Q,"morphTargetInfluences",ea);l=!0}c=f.index;m=f.attributes.position;!0===d.wireframe&&(c=eb.getWireframeAttribute(f));null!==c?(b=jc,b.setIndex(c)):b=jb;if(l){a:{var l=void 0,r;if(f instanceof
THREE.InstancedBufferGeometry&&(r=ia.get("ANGLE_instanced_arrays"),null===r)){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");break a}void 0===l&&(l=0);ga.initAttributes();var n=f.attributes,k=k.getAttributes(),p=d.defaultAttributeValues,q;for(q in k){var w=k[q];if(0<=w){var u=n[q];if(void 0!==u){var x=Q.FLOAT,A=u.array,D=u.normalized;A instanceof Float32Array?x=Q.FLOAT:A instanceof Float64Array?
console.warn("Unsupported data buffer format: Float64Array"):A instanceof Uint16Array?x=Q.UNSIGNED_SHORT:A instanceof Int16Array?x=Q.SHORT:A instanceof Uint32Array?x=Q.UNSIGNED_INT:A instanceof Int32Array?x=Q.INT:A instanceof Int8Array?x=Q.BYTE:A instanceof Uint8Array&&(x=Q.UNSIGNED_BYTE);var A=u.itemSize,B=eb.getAttributeBuffer(u);if(u instanceof THREE.InterleavedBufferAttribute){var z=u.data,C=z.stride,u=u.offset;z instanceof THREE.InstancedInterleavedBuffer?(ga.enableAttributeAndDivisor(w,z.meshPerAttribute,
r),void 0===f.maxInstancedCount&&(f.maxInstancedCount=z.meshPerAttribute*z.count)):ga.enableAttribute(w);Q.bindBuffer(Q.ARRAY_BUFFER,B);Q.vertexAttribPointer(w,A,x,D,C*z.array.BYTES_PER_ELEMENT,(l*C+u)*z.array.BYTES_PER_ELEMENT)}else u instanceof THREE.InstancedBufferAttribute?(ga.enableAttributeAndDivisor(w,u.meshPerAttribute,r),void 0===f.maxInstancedCount&&(f.maxInstancedCount=u.meshPerAttribute*u.count)):ga.enableAttribute(w),Q.bindBuffer(Q.ARRAY_BUFFER,B),Q.vertexAttribPointer(w,A,x,D,0,l*A*
u.array.BYTES_PER_ELEMENT)}else if(void 0!==p&&(x=p[q],void 0!==x))switch(x.length){case 2:Q.vertexAttrib2fv(w,x);break;case 3:Q.vertexAttrib3fv(w,x);break;case 4:Q.vertexAttrib4fv(w,x);break;default:Q.vertexAttrib1fv(w,x)}}}ga.disableUnusedAttributes()}null!==c&&Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,eb.getAttributeBuffer(c))}r=Infinity;null!==c?r=c.count:void 0!==m&&(r=m.count);c=f.drawRange.start;m=null!==h?h.start:0;q=Math.max(0,c,m);h=Math.max(0,Math.min(0+r,c+f.drawRange.count,m+(null!==h?h.count:
Infinity))-1-q+1);if(g instanceof THREE.Mesh)if(!0===d.wireframe)ga.setLineWidth(d.wireframeLinewidth*(null===ca?na:1)),b.setMode(Q.LINES);else switch(g.drawMode){case THREE.TrianglesDrawMode:b.setMode(Q.TRIANGLES);break;case THREE.TriangleStripDrawMode:b.setMode(Q.TRIANGLE_STRIP);break;case THREE.TriangleFanDrawMode:b.setMode(Q.TRIANGLE_FAN)}else g instanceof THREE.Line?(d=d.linewidth,void 0===d&&(d=1),ga.setLineWidth(d*(null===ca?na:1)),g instanceof THREE.LineSegments?b.setMode(Q.LINES):b.setMode(Q.LINE_STRIP)):
g instanceof THREE.Points&&b.setMode(Q.POINTS);f instanceof THREE.InstancedBufferGeometry?0<f.maxInstancedCount&&b.renderInstances(f,q,h):b.render(q,h)};this.render=function(b,c,f,d){if(!1===c instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var g=b.fog;qa="";Z=-1;ma=null;!0===b.autoUpdate&&b.updateMatrixWorld();null===c.parent&&c.updateMatrixWorld();c.matrixWorldInverse.getInverse(c.matrixWorld);ab.multiplyMatrices(c.projectionMatrix,
c.matrixWorldInverse);$a.setFromMatrix(ab);S.length=0;X=W=-1;da.length=0;R.length=0;Ha=this.localClippingEnabled;Xa=Da.init(this.clippingPlanes,Ha,c);p(b,c);U.length=W+1;V.length=X+1;!0===Y.sortObjects&&(U.sort(u),V.sort(q));Xa&&Da.beginShadows();for(var h=S,k=0,l=0,m=h.length;l<m;l++){var n=h[l];n.castShadow&&(pa.shadows[k++]=n)}pa.shadows.length=k;Rb.render(b,c);for(var h=S,r=n=0,t=0,v,y,x,A,B=c.matrixWorldInverse,z=0,C=0,E=0,M=0,k=0,l=h.length;k<l;k++)if(m=h[k],v=m.color,y=m.intensity,x=m.distance,
A=m.shadow&&m.shadow.map?m.shadow.map.texture:null,m instanceof THREE.AmbientLight)n+=v.r*y,r+=v.g*y,t+=v.b*y;else if(m instanceof THREE.DirectionalLight){var N=Ta.get(m);N.color.copy(m.color).multiplyScalar(m.intensity);N.direction.setFromMatrixPosition(m.matrixWorld);Ka.setFromMatrixPosition(m.target.matrixWorld);N.direction.sub(Ka);N.direction.transformDirection(B);if(N.shadow=m.castShadow)N.shadowBias=m.shadow.bias,N.shadowRadius=m.shadow.radius,N.shadowMapSize=m.shadow.mapSize;pa.directionalShadowMap[z]=
A;pa.directionalShadowMatrix[z]=m.shadow.matrix;pa.directional[z++]=N}else if(m instanceof THREE.SpotLight){N=Ta.get(m);N.position.setFromMatrixPosition(m.matrixWorld);N.position.applyMatrix4(B);N.color.copy(v).multiplyScalar(y);N.distance=x;N.direction.setFromMatrixPosition(m.matrixWorld);Ka.setFromMatrixPosition(m.target.matrixWorld);N.direction.sub(Ka);N.direction.transformDirection(B);N.coneCos=Math.cos(m.angle);N.penumbraCos=Math.cos(m.angle*(1-m.penumbra));N.decay=0===m.distance?0:m.decay;if(N.shadow=
m.castShadow)N.shadowBias=m.shadow.bias,N.shadowRadius=m.shadow.radius,N.shadowMapSize=m.shadow.mapSize;pa.spotShadowMap[E]=A;pa.spotShadowMatrix[E]=m.shadow.matrix;pa.spot[E++]=N}else if(m instanceof THREE.PointLight){N=Ta.get(m);N.position.setFromMatrixPosition(m.matrixWorld);N.position.applyMatrix4(B);N.color.copy(m.color).multiplyScalar(m.intensity);N.distance=m.distance;N.decay=0===m.distance?0:m.decay;if(N.shadow=m.castShadow)N.shadowBias=m.shadow.bias,N.shadowRadius=m.shadow.radius,N.shadowMapSize=
m.shadow.mapSize;pa.pointShadowMap[C]=A;void 0===pa.pointShadowMatrix[C]&&(pa.pointShadowMatrix[C]=new THREE.Matrix4);Ka.setFromMatrixPosition(m.matrixWorld).negate();pa.pointShadowMatrix[C].identity().setPosition(Ka);pa.point[C++]=N}else m instanceof THREE.HemisphereLight&&(N=Ta.get(m),N.direction.setFromMatrixPosition(m.matrixWorld),N.direction.transformDirection(B),N.direction.normalize(),N.skyColor.copy(m.color).multiplyScalar(y),N.groundColor.copy(m.groundColor).multiplyScalar(y),pa.hemi[M++]=
N);pa.ambient[0]=n;pa.ambient[1]=r;pa.ambient[2]=t;pa.directional.length=z;pa.spot.length=E;pa.point.length=C;pa.hemi.length=M;pa.hash=z+","+C+","+E+","+M+","+pa.shadows.length;Xa&&Da.endShadows();Ra.calls=0;Ra.vertices=0;Ra.faces=0;Ra.points=0;void 0===f&&(f=null);this.setRenderTarget(f);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);b.overrideMaterial?(d=b.overrideMaterial,w(U,c,g,d),w(V,c,g,d)):(ga.setBlending(THREE.NoBlending),w(U,c,g),w(V,c,g));
Wa.render(b,c);Ga.render(b,c,oa);f&&(b=f.texture,b.generateMipmaps&&D(f)&&b.minFilter!==THREE.NearestFilter&&b.minFilter!==THREE.LinearFilter&&(b=f instanceof THREE.WebGLRenderTargetCube?Q.TEXTURE_CUBE_MAP:Q.TEXTURE_2D,f=ta.get(f.texture).__webglTexture,ga.bindTexture(b,f),Q.generateMipmap(b),ga.bindTexture(b,null)));ga.setDepthTest(!0);ga.setDepthWrite(!0);ga.setColorWrite(!0)}};this.setFaceCulling=function(b,c){ga.setCullFace(b);ga.setFlipSided(c===THREE.FrontFaceDirectionCW)};this.allocTextureUnit=
function(){var b=ua;b>=Aa.maxTextures&&console.warn("WebGLRenderer: trying to use "+b+" texture units while this GPU supports only "+Aa.maxTextures);ua+=1;return b};this.setTexture2D=function(){var b=!1;return function(c,f){c instanceof THREE.WebGLRenderTarget&&(b||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),b=!0),c=c.texture);var d=c,g=ta.get(d);if(0<d.version&&g.__version!==d.version){var k=d.image;if(void 0===k)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",
d);else if(!1===k.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",d);else{void 0===g.__webglInit&&(g.__webglInit=!0,d.addEventListener("dispose",h),g.__webglTexture=Q.createTexture(),Ia.textures++);ga.activeTexture(Q.TEXTURE0+f);ga.bindTexture(Q.TEXTURE_2D,g.__webglTexture);Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,d.flipY);Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.premultiplyAlpha);Q.pixelStorei(Q.UNPACK_ALIGNMENT,d.unpackAlignment);var l=z(d.image,
Aa.maxTextureSize);if((d.wrapS!==THREE.ClampToEdgeWrapping||d.wrapT!==THREE.ClampToEdgeWrapping||d.minFilter!==THREE.NearestFilter&&d.minFilter!==THREE.LinearFilter)&&!1===D(l))if(k=l,k instanceof HTMLImageElement||k instanceof HTMLCanvasElement){var m=document.createElement("canvas");m.width=THREE.Math.nearestPowerOfTwo(k.width);m.height=THREE.Math.nearestPowerOfTwo(k.height);m.getContext("2d").drawImage(k,0,0,m.width,m.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+k.width+
"x"+k.height+"). Resized to "+m.width+"x"+m.height,k);l=m}else l=k;var k=D(l),m=G(d.format),n=G(d.type);x(Q.TEXTURE_2D,d,k);var p=d.mipmaps;if(d instanceof THREE.DepthTexture){p=Q.DEPTH_COMPONENT;if(d.type===THREE.FloatType){if(!sa)throw Error("Float Depth Texture only supported in WebGL2.0");p=Q.DEPTH_COMPONENT32F}else sa&&(p=Q.DEPTH_COMPONENT16);ga.texImage2D(Q.TEXTURE_2D,0,p,l.width,l.height,0,m,n,null)}else if(d instanceof THREE.DataTexture)if(0<p.length&&k){for(var r=0,q=p.length;r<q;r++)l=p[r],
ga.texImage2D(Q.TEXTURE_2D,r,m,l.width,l.height,0,m,n,l.data);d.generateMipmaps=!1}else ga.texImage2D(Q.TEXTURE_2D,0,m,l.width,l.height,0,m,n,l.data);else if(d instanceof THREE.CompressedTexture)for(r=0,q=p.length;r<q;r++)l=p[r],d.format!==THREE.RGBAFormat&&d.format!==THREE.RGBFormat?-1<ga.getCompressedTextureFormats().indexOf(m)?ga.compressedTexImage2D(Q.TEXTURE_2D,r,m,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
ga.texImage2D(Q.TEXTURE_2D,r,m,l.width,l.height,0,m,n,l.data);else if(0<p.length&&k){r=0;for(q=p.length;r<q;r++)l=p[r],ga.texImage2D(Q.TEXTURE_2D,r,m,m,n,l);d.generateMipmaps=!1}else ga.texImage2D(Q.TEXTURE_2D,0,m,m,n,l);d.generateMipmaps&&k&&Q.generateMipmap(Q.TEXTURE_2D);g.__version=d.version;if(d.onUpdate)d.onUpdate(d)}}else ga.activeTexture(Q.TEXTURE0+f),ga.bindTexture(Q.TEXTURE_2D,g.__webglTexture)}}();this.setTexture=function(){var b=!1;return function(c,f){b||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),
b=!0);Y.setTexture2D(c,f)}}();this.setTextureCube=function(){var b=!1;return function(c,f){c instanceof THREE.WebGLRenderTargetCube&&(b||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),b=!0),c=c.texture);if(c instanceof THREE.CubeTexture||Array.isArray(c.image)&&6===c.image.length){var d=c,g=ta.get(d);if(6===d.image.length)if(0<d.version&&g.__version!==d.version){g.__image__webglTextureCube||(d.addEventListener("dispose",
h),g.__image__webglTextureCube=Q.createTexture(),Ia.textures++);ga.activeTexture(Q.TEXTURE0+f);ga.bindTexture(Q.TEXTURE_CUBE_MAP,g.__image__webglTextureCube);Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,d.flipY);for(var k=d instanceof THREE.CompressedTexture,l=d.image[0]instanceof THREE.DataTexture,m=[],n=0;6>n;n++)m[n]=!Y.autoScaleCubemaps||k||l?l?d.image[n].image:d.image[n]:z(d.image[n],Aa.maxCubemapSize);var p=D(m[0]),r=G(d.format),q=G(d.type);x(Q.TEXTURE_CUBE_MAP,d,p);for(n=0;6>n;n++)if(k)for(var t,v=
m[n].mipmaps,w=0,u=v.length;w<u;w++)t=v[w],d.format!==THREE.RGBAFormat&&d.format!==THREE.RGBFormat?-1<ga.getCompressedTextureFormats().indexOf(r)?ga.compressedTexImage2D(Q.TEXTURE_CUBE_MAP_POSITIVE_X+n,w,r,t.width,t.height,0,t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ga.texImage2D(Q.TEXTURE_CUBE_MAP_POSITIVE_X+n,w,r,t.width,t.height,0,r,q,t.data);else l?ga.texImage2D(Q.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,r,m[n].width,m[n].height,
0,r,q,m[n].data):ga.texImage2D(Q.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,r,r,q,m[n]);d.generateMipmaps&&p&&Q.generateMipmap(Q.TEXTURE_CUBE_MAP);g.__version=d.version;if(d.onUpdate)d.onUpdate(d)}else ga.activeTexture(Q.TEXTURE0+f),ga.bindTexture(Q.TEXTURE_CUBE_MAP,g.__image__webglTextureCube)}else d=c,ga.activeTexture(Q.TEXTURE0+f),ga.bindTexture(Q.TEXTURE_CUBE_MAP,ta.get(d).__webglTexture)}}();this.getCurrentRenderTarget=function(){return ca};this.setRenderTarget=function(b){if((ca=b)&&void 0===ta.get(b).__webglFramebuffer){var c=
ta.get(b),f=ta.get(b.texture);b.addEventListener("dispose",k);f.__webglTexture=Q.createTexture();Ia.textures++;var d=b instanceof THREE.WebGLRenderTargetCube,g=THREE.Math.isPowerOfTwo(b.width)&&THREE.Math.isPowerOfTwo(b.height);if(d){c.__webglFramebuffer=[];for(var h=0;6>h;h++)c.__webglFramebuffer[h]=Q.createFramebuffer()}else c.__webglFramebuffer=Q.createFramebuffer();if(d){ga.bindTexture(Q.TEXTURE_CUBE_MAP,f.__webglTexture);x(Q.TEXTURE_CUBE_MAP,b.texture,g);for(h=0;6>h;h++)B(c.__webglFramebuffer[h],
b,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+h);b.texture.generateMipmaps&&g&&Q.generateMipmap(Q.TEXTURE_CUBE_MAP);ga.bindTexture(Q.TEXTURE_CUBE_MAP,null)}else ga.bindTexture(Q.TEXTURE_2D,f.__webglTexture),x(Q.TEXTURE_2D,b.texture,g),B(c.__webglFramebuffer,b,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D),b.texture.generateMipmaps&&g&&Q.generateMipmap(Q.TEXTURE_2D),ga.bindTexture(Q.TEXTURE_2D,null);if(b.depthBuffer){c=ta.get(b);f=b instanceof THREE.WebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");
if(b instanceof THREE.WebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");Q.bindFramebuffer(Q.FRAMEBUFFER,c.__webglFramebuffer);if(!(b.depthTexture instanceof THREE.DepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");ta.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=
!0);Y.setTexture2D(b.depthTexture,0);c=ta.get(b.depthTexture).__webglTexture;Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.DEPTH_ATTACHMENT,Q.TEXTURE_2D,c,0)}else if(f)for(c.__webglDepthbuffer=[],f=0;6>f;f++)Q.bindFramebuffer(Q.FRAMEBUFFER,c.__webglFramebuffer[f]),c.__webglDepthbuffer[f]=Q.createRenderbuffer(),C(c.__webglDepthbuffer[f],b);else Q.bindFramebuffer(Q.FRAMEBUFFER,c.__webglFramebuffer),c.__webglDepthbuffer=Q.createRenderbuffer(),C(c.__webglDepthbuffer,b);Q.bindFramebuffer(Q.FRAMEBUFFER,null)}}c=
b instanceof THREE.WebGLRenderTargetCube;b?(f=ta.get(b),f=c?f.__webglFramebuffer[b.activeCubeFace]:f.__webglFramebuffer,za.copy(b.scissor),va=b.scissorTest,oa.copy(b.viewport)):(f=null,za.copy(wa).multiplyScalar(na),va=Oa,oa.copy(Ja).multiplyScalar(na));aa!==f&&(Q.bindFramebuffer(Q.FRAMEBUFFER,f),aa=f);ga.scissor(za);ga.setScissorTest(va);ga.viewport(oa);c&&(c=ta.get(b.texture),Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+b.activeCubeFace,c.__webglTexture,
b.activeMipMapLevel))};this.readRenderTargetPixels=function(b,c,f,d,g,h){if(!1===b instanceof THREE.WebGLRenderTarget)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var k=ta.get(b).__webglFramebuffer;if(k){var l=!1;k!==aa&&(Q.bindFramebuffer(Q.FRAMEBUFFER,k),l=!0);try{var m=b.texture;m.format!==THREE.RGBAFormat&&G(m.format)!==Q.getParameter(Q.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
m.type===THREE.UnsignedByteType||G(m.type)===Q.getParameter(Q.IMPLEMENTATION_COLOR_READ_TYPE)||m.type===THREE.FloatType&&ia.get("WEBGL_color_buffer_float")||m.type===THREE.HalfFloatType&&ia.get("EXT_color_buffer_half_float")?Q.checkFramebufferStatus(Q.FRAMEBUFFER)===Q.FRAMEBUFFER_COMPLETE?0<=c&&c<=b.width-d&&0<=f&&f<=b.height-g&&Q.readPixels(c,f,d,g,G(m.format),G(m.type),h):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{l&&Q.bindFramebuffer(Q.FRAMEBUFFER,aa)}}}}};
THREE.WebGLRenderTarget=function(b,c,d){this.uuid=THREE.Math.generateUUID();this.width=b;this.height=c;this.scissor=new THREE.Vector4(0,0,b,c);this.scissorTest=!1;this.viewport=new THREE.Vector4(0,0,b,c);d=d||{};void 0===d.minFilter&&(d.minFilter=THREE.LinearFilter);this.texture=new THREE.Texture(void 0,void 0,d.wrapS,d.wrapT,d.magFilter,d.minFilter,d.format,d.type,d.anisotropy,d.encoding);this.depthBuffer=void 0!==d.depthBuffer?d.depthBuffer:!0;this.stencilBuffer=void 0!==d.stencilBuffer?d.stencilBuffer:
!0;this.depthTexture=null};
Object.assign(THREE.WebGLRenderTarget.prototype,THREE.EventDispatcher.prototype,{setSize:function(b,c){if(this.width!==b||this.height!==c)this.width=b,this.height=c,this.dispose();this.viewport.set(0,0,b,c);this.scissor.set(0,0,b,c)},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.width=b.width;this.height=b.height;this.viewport.copy(b.viewport);this.texture=b.texture.clone();this.depthBuffer=b.depthBuffer;this.stencilBuffer=b.stencilBuffer;this.depthTexture=b.depthTexture;
return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.WebGLRenderTargetCube=function(b,c,d){THREE.WebGLRenderTarget.call(this,b,c,d);this.activeMipMapLevel=this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;
THREE.WebGLBufferRenderer=function(b,c,d){var g;this.setMode=function(b){g=b};this.render=function(c,h){b.drawArrays(g,c,h);d.calls++;d.vertices+=h;g===b.TRIANGLES&&(d.faces+=h/3)};this.renderInstances=function(f){var h=c.get("ANGLE_instanced_arrays");if(null===h)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var k=f.attributes.position,l=0,l=k instanceof THREE.InterleavedBufferAttribute?k.data.count:
k.count;h.drawArraysInstancedANGLE(g,0,l,f.maxInstancedCount);d.calls++;d.vertices+=l*f.maxInstancedCount;g===b.TRIANGLES&&(d.faces+=f.maxInstancedCount*l/3)}}};
THREE.WebGLClipping=function(){function b(){t.value!==g&&(t.value=g,t.needsUpdate=0<f);d.numPlanes=f}function c(b,c,f,g){var h=null!==b?b.length:0,k=null;if(0!==h){k=t.value;if(!0!==g||null===k){g=f+4*h;c=c.matrixWorldInverse;m.getNormalMatrix(c);if(null===k||k.length<g)k=new Float32Array(g);for(g=0;g!==h;++g,f+=4)l.copy(b[g]).applyMatrix4(c,m),l.normal.toArray(k,f),k[f+3]=l.constant}t.value=k;t.needsUpdate=!0}d.numPlanes=h;return k}var d=this,g=null,f=0,h=!1,k=!1,l=new THREE.Plane,m=new THREE.Matrix3,
t={value:null,needsUpdate:!1};this.uniform=t;this.numPlanes=0;this.init=function(b,d,k){var l=0!==b.length||d||0!==f||h;h=d;g=c(b,k,0);f=b.length;return l};this.beginShadows=function(){k=!0;c(null)};this.endShadows=function(){k=!1;b()};this.setState=function(d,l,m,r,p){if(!h||null===d||0===d.length||k&&!l)k?c(null):b();else{l=k?0:f;var w=4*l,v=r.clippingState||null;t.value=v;v=c(d,m,w,p);for(d=0;d!==w;++d)v[d]=g[d];r.clippingState=v;this.numPlanes+=l}}};
THREE.WebGLIndexedBufferRenderer=function(b,c,d){var g,f,h;this.setMode=function(b){g=b};this.setIndex=function(d){d.array instanceof Uint32Array&&c.get("OES_element_index_uint")?(f=b.UNSIGNED_INT,h=4):(f=b.UNSIGNED_SHORT,h=2)};this.render=function(c,l){b.drawElements(g,l,f,c*h);d.calls++;d.vertices+=l;g===b.TRIANGLES&&(d.faces+=l/3)};this.renderInstances=function(k,l,m){var t=c.get("ANGLE_instanced_arrays");null===t?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
(t.drawElementsInstancedANGLE(g,m,f,l*h,k.maxInstancedCount),d.calls++,d.vertices+=m*k.maxInstancedCount,g===b.TRIANGLES&&(d.faces+=k.maxInstancedCount*m/3))}};
THREE.WebGLExtensions=function(b){var c={};this.get=function(d){if(void 0!==c[d])return c[d];var g;switch(d){case "WEBGL_depth_texture":g=b.getExtension("WEBGL_depth_texture")||b.getExtension("MOZ_WEBGL_depth_texture")||b.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":g=b.getExtension("EXT_texture_filter_anisotropic")||b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":g=
b.getExtension("WEBGL_compressed_texture_s3tc")||b.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":g=b.getExtension("WEBGL_compressed_texture_pvrtc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":g=b.getExtension("WEBGL_compressed_texture_etc1");break;default:g=b.getExtension(d)}null===g&&console.warn("THREE.WebGLRenderer: "+d+" extension not supported.");
return c[d]=g}};
THREE.WebGLCapabilities=function(b,c,d){function g(c){if("highp"===c){if(0<b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.HIGH_FLOAT).precision&&0<b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT).precision)return"highp";c="mediump"}return"mediump"===c&&0<b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.MEDIUM_FLOAT).precision&&0<b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT).precision?"mediump":"lowp"}this.getMaxPrecision=g;this.precision=void 0!==d.precision?d.precision:"highp";
this.logarithmicDepthBuffer=void 0!==d.logarithmicDepthBuffer?d.logarithmicDepthBuffer:!1;this.maxTextures=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=b.getParameter(b.MAX_TEXTURE_SIZE);this.maxCubemapSize=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=b.getParameter(b.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=b.getParameter(b.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=b.getParameter(b.MAX_VARYING_VECTORS);
this.maxFragmentUniforms=b.getParameter(b.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!c.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;d=g(this.precision);d!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",d,"instead."),this.precision=d);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!c.get("EXT_frag_depth"))};
THREE.WebGLGeometries=function(b,c,d){function g(b){var l=b.target;b=h[l.id];null!==b.index&&f(b.index);var m=b.attributes,t;for(t in m)f(m[t]);l.removeEventListener("dispose",g);delete h[l.id];t=c.get(l);t.wireframe&&f(t.wireframe);c["delete"](l);l=c.get(b);l.wireframe&&f(l.wireframe);c["delete"](b);d.memory.geometries--}function f(f){var d;d=f instanceof THREE.InterleavedBufferAttribute?c.get(f.data).__webglBuffer:c.get(f).__webglBuffer;void 0!==d&&(b.deleteBuffer(d),f instanceof THREE.InterleavedBufferAttribute?
c["delete"](f.data):c["delete"](f))}var h={};this.get=function(b){var c=b.geometry;if(void 0!==h[c.id])return h[c.id];c.addEventListener("dispose",g);var f;c instanceof THREE.BufferGeometry?f=c:c instanceof THREE.Geometry&&(void 0===c._bufferGeometry&&(c._bufferGeometry=(new THREE.BufferGeometry).setFromObject(b)),f=c._bufferGeometry);h[c.id]=f;d.memory.geometries++;return f}};
THREE.WebGLLights=function(){var b={};this.get=function(c){if(void 0!==b[c.id])return b[c.id];var d;switch(c.type){case "DirectionalLight":d={direction:new THREE.Vector3,color:new THREE.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "SpotLight":d={position:new THREE.Vector3,direction:new THREE.Vector3,color:new THREE.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "PointLight":d=
{position:new THREE.Vector3,color:new THREE.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "HemisphereLight":d={direction:new THREE.Vector3,skyColor:new THREE.Color,groundColor:new THREE.Color}}return b[c.id]=d}};
THREE.WebGLObjects=function(b,c,d){function g(f,d){var g=f instanceof THREE.InterleavedBufferAttribute?f.data:f,h=c.get(g);void 0===h.__webglBuffer?(h.__webglBuffer=b.createBuffer(),b.bindBuffer(d,h.__webglBuffer),b.bufferData(d,g.array,g.dynamic?b.DYNAMIC_DRAW:b.STATIC_DRAW),h.version=g.version):h.version!==g.version&&(b.bindBuffer(d,h.__webglBuffer),!1===g.dynamic||-1===g.updateRange.count?b.bufferSubData(d,0,g.array):0===g.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
(b.bufferSubData(d,g.updateRange.offset*g.array.BYTES_PER_ELEMENT,g.array.subarray(g.updateRange.offset,g.updateRange.offset+g.updateRange.count)),g.updateRange.count=0),h.version=g.version)}function f(b,c,f){if(c>f){var d=c;c=f;f=d}d=b[c];return void 0===d?(b[c]=[f],!0):-1===d.indexOf(f)?(d.push(f),!0):!1}var h=new THREE.WebGLGeometries(b,c,d);this.getAttributeBuffer=function(b){return b instanceof THREE.InterleavedBufferAttribute?c.get(b.data).__webglBuffer:c.get(b).__webglBuffer};this.getWireframeAttribute=
function(d){var h=c.get(d);if(void 0!==h.wireframe)return h.wireframe;var m=[],t=d.index,u=d.attributes;d=u.position;if(null!==t)for(var u={},t=t.array,q=0,n=t.length;q<n;q+=3){var r=t[q+0],p=t[q+1],w=t[q+2];f(u,r,p)&&m.push(r,p);f(u,p,w)&&m.push(p,w);f(u,w,r)&&m.push(w,r)}else for(t=u.position.array,q=0,n=t.length/3-1;q<n;q+=3)r=q+0,p=q+1,w=q+2,m.push(r,p,p,w,w,r);m=new THREE.BufferAttribute(new (65535<d.count?Uint32Array:Uint16Array)(m),1);g(m,b.ELEMENT_ARRAY_BUFFER);return h.wireframe=m};this.update=
function(c){var f=h.get(c);c.geometry instanceof THREE.Geometry&&f.updateFromObject(c);c=f.index;var d=f.attributes;null!==c&&g(c,b.ELEMENT_ARRAY_BUFFER);for(var t in d)g(d[t],b.ARRAY_BUFFER);c=f.morphAttributes;for(t in c)for(var d=c[t],u=0,q=d.length;u<q;u++)g(d[u],b.ARRAY_BUFFER);return f}};
THREE.WebGLProgram=function(){function b(b){switch(b){case THREE.LinearEncoding:return["Linear","( value )"];case THREE.sRGBEncoding:return["sRGB","( value )"];case THREE.RGBEEncoding:return["RGBE","( value )"];case THREE.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case THREE.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case THREE.RGBDEncoding:return["RGBD","( value, 256.0 )"];case THREE.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+
b);}}function c(c,f){var d=b(f);return"vec4 "+c+"( vec4 value ) { return "+d[0]+"ToLinear"+d[1]+"; }"}function d(c,f){var d=b(f);return"vec4 "+c+"( vec4 value ) { return LinearTo"+d[0]+d[1]+"; }"}function g(b,c){var f;switch(c){case THREE.LinearToneMapping:f="Linear";break;case THREE.ReinhardToneMapping:f="Reinhard";break;case THREE.Uncharted2ToneMapping:f="Uncharted2";break;case THREE.CineonToneMapping:f="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+c);}return"vec3 "+b+
"( vec3 color ) { return "+f+"ToneMapping( color ); }"}function f(b,c,f){b=b||{};return[b.derivatives||c.envMapCubeUV||c.bumpMap||c.normalMap||c.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(b.fragDepth||c.logarithmicDepthBuffer)&&f.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",b.drawBuffers&&f.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(b.shaderTextureLOD||c.envMap)&&f.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":
""].filter(k).join("\n")}function h(b){var c=[],f;for(f in b){var d=b[f];!1!==d&&c.push("#define "+f+" "+d)}return c.join("\n")}function k(b){return""!==b}function l(b,c){return b.replace(/NUM_DIR_LIGHTS/g,c.numDirLights).replace(/NUM_SPOT_LIGHTS/g,c.numSpotLights).replace(/NUM_POINT_LIGHTS/g,c.numPointLights).replace(/NUM_HEMI_LIGHTS/g,c.numHemiLights)}function m(b){return b.replace(/#include +<([\w\d.]+)>/g,function(b,c){var f=THREE.ShaderChunk[c];if(void 0===f)throw Error("Can not resolve #include <"+
c+">");return m(f)})}function t(b){return b.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(b,c,f,d){b="";for(c=parseInt(c);c<parseInt(f);c++)b+=d.replace(/\[ i \]/g,"[ "+c+" ]");return b})}var u=0;return function(b,n,r,p){var w=b.context,v=r.extensions,y=r.defines,A=r.__webglShader.vertexShader,x=r.__webglShader.fragmentShader,z="SHADOWMAP_TYPE_BASIC";p.shadowMapType===THREE.PCFShadowMap?z="SHADOWMAP_TYPE_PCF":p.shadowMapType===THREE.PCFSoftShadowMap&&(z="SHADOWMAP_TYPE_PCF_SOFT");
var D="ENVMAP_TYPE_CUBE",B="ENVMAP_MODE_REFLECTION",C="ENVMAP_BLENDING_MULTIPLY";if(p.envMap){switch(r.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:D="ENVMAP_TYPE_CUBE";break;case THREE.CubeUVReflectionMapping:case THREE.CubeUVRefractionMapping:D="ENVMAP_TYPE_CUBE_UV";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:D="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:D="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:B=
"ENVMAP_MODE_REFRACTION"}switch(r.combine){case THREE.MultiplyOperation:C="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:C="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:C="ENVMAP_BLENDING_ADD"}}var E=0<b.gammaFactor?b.gammaFactor:1,v=f(v,p,b.extensions),G=h(y),H=w.createProgram();r instanceof THREE.RawShaderMaterial?z=y="":(y=["precision "+p.precision+" float;","precision "+p.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,G,p.supportsVertexTextures?"#define VERTEX_TEXTURES":
"","#define GAMMA_FACTOR "+E,"#define MAX_BONES "+p.maxBones,p.map?"#define USE_MAP":"",p.envMap?"#define USE_ENVMAP":"",p.envMap?"#define "+B:"",p.lightMap?"#define USE_LIGHTMAP":"",p.aoMap?"#define USE_AOMAP":"",p.emissiveMap?"#define USE_EMISSIVEMAP":"",p.bumpMap?"#define USE_BUMPMAP":"",p.normalMap?"#define USE_NORMALMAP":"",p.displacementMap&&p.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",p.specularMap?"#define USE_SPECULARMAP":"",p.roughnessMap?"#define USE_ROUGHNESSMAP":"",p.metalnessMap?
"#define USE_METALNESSMAP":"",p.alphaMap?"#define USE_ALPHAMAP":"",p.vertexColors?"#define USE_COLOR":"",p.flatShading?"#define FLAT_SHADED":"",p.skinning?"#define USE_SKINNING":"",p.useVertexTexture?"#define BONE_TEXTURE":"",p.morphTargets?"#define USE_MORPHTARGETS":"",p.morphNormals&&!1===p.flatShading?"#define USE_MORPHNORMALS":"",p.doubleSided?"#define DOUBLE_SIDED":"",p.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+p.numClippingPlanes,p.shadowMapEnabled?"#define USE_SHADOWMAP":
"",p.shadowMapEnabled?"#define "+z:"",p.sizeAttenuation?"#define USE_SIZEATTENUATION":"",p.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",p.logarithmicDepthBuffer&&b.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR",
"\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;",
"\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(k).join("\n"),z=[v,"precision "+p.precision+" float;","precision "+p.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,G,p.alphaTest?"#define ALPHATEST "+p.alphaTest:"","#define GAMMA_FACTOR "+E,p.useFog&&p.fog?"#define USE_FOG":"",p.useFog&&p.fogExp?"#define FOG_EXP2":"",p.map?"#define USE_MAP":"",p.envMap?"#define USE_ENVMAP":"",p.envMap?"#define "+D:"",p.envMap?
"#define "+B:"",p.envMap?"#define "+C:"",p.lightMap?"#define USE_LIGHTMAP":"",p.aoMap?"#define USE_AOMAP":"",p.emissiveMap?"#define USE_EMISSIVEMAP":"",p.bumpMap?"#define USE_BUMPMAP":"",p.normalMap?"#define USE_NORMALMAP":"",p.specularMap?"#define USE_SPECULARMAP":"",p.roughnessMap?"#define USE_ROUGHNESSMAP":"",p.metalnessMap?"#define USE_METALNESSMAP":"",p.alphaMap?"#define USE_ALPHAMAP":"",p.vertexColors?"#define USE_COLOR":"",p.flatShading?"#define FLAT_SHADED":"",p.doubleSided?"#define DOUBLE_SIDED":
"",p.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+p.numClippingPlanes,p.shadowMapEnabled?"#define USE_SHADOWMAP":"",p.shadowMapEnabled?"#define "+z:"",p.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",p.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",p.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",p.logarithmicDepthBuffer&&b.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",p.envMap&&b.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":
"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",p.toneMapping!==THREE.NoToneMapping?"#define TONE_MAPPING":"",p.toneMapping!==THREE.NoToneMapping?THREE.ShaderChunk.tonemapping_pars_fragment:"",p.toneMapping!==THREE.NoToneMapping?g("toneMapping",p.toneMapping):"",p.outputEncoding||p.mapEncoding||p.envMapEncoding||p.emissiveMapEncoding?THREE.ShaderChunk.encodings_pars_fragment:"",p.mapEncoding?c("mapTexelToLinear",p.mapEncoding):"",p.envMapEncoding?c("envMapTexelToLinear",p.envMapEncoding):
"",p.emissiveMapEncoding?c("emissiveMapTexelToLinear",p.emissiveMapEncoding):"",p.outputEncoding?d("linearToOutputTexel",p.outputEncoding):"",p.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(k).join("\n"));A=m(A,p);A=l(A,p);x=m(x,p);x=l(x,p);!1===r instanceof THREE.ShaderMaterial&&(A=t(A),x=t(x));x=z+x;A=THREE.WebGLShader(w,w.VERTEX_SHADER,y+A);x=THREE.WebGLShader(w,w.FRAGMENT_SHADER,x);w.attachShader(H,A);w.attachShader(H,x);void 0!==r.index0AttributeName?w.bindAttribLocation(H,
0,r.index0AttributeName):!0===p.morphTargets&&w.bindAttribLocation(H,0,"position");w.linkProgram(H);p=w.getProgramInfoLog(H);D=w.getShaderInfoLog(A);B=w.getShaderInfoLog(x);E=C=!0;if(!1===w.getProgramParameter(H,w.LINK_STATUS))C=!1,console.error("THREE.WebGLProgram: shader error: ",w.getError(),"gl.VALIDATE_STATUS",w.getProgramParameter(H,w.VALIDATE_STATUS),"gl.getProgramInfoLog",p,D,B);else if(""!==p)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",p);else if(""===D||""===B)E=!1;E&&(this.diagnostics=
{runnable:C,material:r,programLog:p,vertexShader:{log:D,prefix:y},fragmentShader:{log:B,prefix:z}});w.deleteShader(A);w.deleteShader(x);var I;this.getUniforms=function(){void 0===I&&(I=new THREE.WebGLUniforms(w,H,b));return I};var L;this.getAttributes=function(){if(void 0===L){for(var b={},c=w.getProgramParameter(H,w.ACTIVE_ATTRIBUTES),f=0;f<c;f++){var d=w.getActiveAttrib(H,f).name;b[d]=w.getAttribLocation(H,d)}L=b}return L};this.destroy=function(){w.deleteProgram(H);this.program=void 0};Object.defineProperties(this,
{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=u++;this.code=n;this.usedTimes=1;this.program=H;this.vertexShader=A;this.fragmentShader=x;return this}}();
THREE.WebGLPrograms=function(b,c){function d(b,c){var f;b?b instanceof THREE.Texture?f=b.encoding:b instanceof THREE.WebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),f=b.texture.encoding):f=THREE.LinearEncoding;f===THREE.LinearEncoding&&c&&(f=THREE.GammaEncoding);return f}var g=[],f={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",
MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},h="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes depthPacking".split(" ");
this.getParameters=function(g,h,m,t,u){var q=f[g.type],n;c.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture?n=1024:(n=Math.floor((c.maxVertexUniforms-20)/4),void 0!==u&&u instanceof THREE.SkinnedMesh&&(n=Math.min(u.skeleton.bones.length,n),n<u.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+u.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)")));var r=b.getPrecision();null!==g.precision&&(r=c.getMaxPrecision(g.precision),r!==
g.precision&&console.warn("THREE.WebGLProgram.getParameters:",g.precision,"not supported, using",r,"instead."));var p=b.getCurrentRenderTarget();return{shaderID:q,precision:r,supportsVertexTextures:c.vertexTextures,outputEncoding:d(p?p.texture:null,b.gammaOutput),map:!!g.map,mapEncoding:d(g.map,b.gammaInput),envMap:!!g.envMap,envMapMode:g.envMap&&g.envMap.mapping,envMapEncoding:d(g.envMap,b.gammaInput),envMapCubeUV:!!g.envMap&&(g.envMap.mapping===THREE.CubeUVReflectionMapping||g.envMap.mapping===
THREE.CubeUVRefractionMapping),lightMap:!!g.lightMap,aoMap:!!g.aoMap,emissiveMap:!!g.emissiveMap,emissiveMapEncoding:d(g.emissiveMap,b.gammaInput),bumpMap:!!g.bumpMap,normalMap:!!g.normalMap,displacementMap:!!g.displacementMap,roughnessMap:!!g.roughnessMap,metalnessMap:!!g.metalnessMap,specularMap:!!g.specularMap,alphaMap:!!g.alphaMap,combine:g.combine,vertexColors:g.vertexColors,fog:m,useFog:g.fog,fogExp:m instanceof THREE.FogExp2,flatShading:g.shading===THREE.FlatShading,sizeAttenuation:g.sizeAttenuation,
logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:g.skinning,maxBones:n,useVertexTexture:c.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:g.morphTargets,morphNormals:g.morphNormals,maxMorphTargets:b.maxMorphTargets,maxMorphNormals:b.maxMorphNormals,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numHemiLights:h.hemi.length,numClippingPlanes:t,shadowMapEnabled:b.shadowMap.enabled&&u.receiveShadow&&0<h.shadows.length,shadowMapType:b.shadowMap.type,
toneMapping:b.toneMapping,physicallyCorrectLights:b.physicallyCorrectLights,premultipliedAlpha:g.premultipliedAlpha,alphaTest:g.alphaTest,doubleSided:g.side===THREE.DoubleSide,flipSided:g.side===THREE.BackSide,depthPacking:void 0!==g.depthPacking?g.depthPacking:!1}};this.getProgramCode=function(b,c){var f=[];c.shaderID?f.push(c.shaderID):(f.push(b.fragmentShader),f.push(b.vertexShader));if(void 0!==b.defines)for(var d in b.defines)f.push(d),f.push(b.defines[d]);for(d=0;d<h.length;d++)f.push(c[h[d]]);
return f.join()};this.acquireProgram=function(c,f,d){for(var h,u=0,q=g.length;u<q;u++){var n=g[u];if(n.code===d){h=n;++h.usedTimes;break}}void 0===h&&(h=new THREE.WebGLProgram(b,d,c,f),g.push(h));return h};this.releaseProgram=function(b){if(0===--b.usedTimes){var c=g.indexOf(b);g[c]=g[g.length-1];g.pop();b.destroy()}};this.programs=g};
THREE.WebGLProperties=function(){var b={};this.get=function(c){c=c.uuid;var d=b[c];void 0===d&&(d={},b[c]=d);return d};this["delete"]=function(c){delete b[c.uuid]};this.clear=function(){b={}}};
THREE.WebGLShader=function(){function b(b){b=b.split("\n");for(var d=0;d<b.length;d++)b[d]=d+1+": "+b[d];return b.join("\n")}return function(c,d,g){var f=c.createShader(d);c.shaderSource(f,g);c.compileShader(f);!1===c.getShaderParameter(f,c.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==c.getShaderInfoLog(f)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",d===c.VERTEX_SHADER?"vertex":"fragment",c.getShaderInfoLog(f),b(g));return f}}();
THREE.WebGLShadowMap=function(b,c,d){function g(c,f,d,g){var h=c.geometry,k=null,k=p,l=c.customDepthMaterial;d&&(k=w,l=c.customDistanceMaterial);l?k=l:(c=c instanceof THREE.SkinnedMesh&&f.skinning,l=0,void 0!==h.morphTargets&&0<h.morphTargets.length&&f.morphTargets&&(l|=1),c&&(l|=2),k=k[l]);b.localClippingEnabled&&!0===f.clipShadows&&0!==f.clippingPlanes.length&&(l=k.uuid,h=f.uuid,c=v[l],void 0===c&&(c={},v[l]=c),l=c[h],void 0===l&&(l=k.clone(),c[h]=l),k=l);k.visible=f.visible;k.wireframe=f.wireframe;
h=f.side;H.renderSingleSided&&h==THREE.DoubleSide&&(h=THREE.FrontSide);H.renderReverseSided&&(h===THREE.FrontSide?h=THREE.BackSide:h===THREE.BackSide&&(h=THREE.FrontSide));k.side=h;k.clipShadows=f.clipShadows;k.clippingPlanes=f.clippingPlanes;k.wireframeLinewidth=f.wireframeLinewidth;k.linewidth=f.linewidth;d&&void 0!==k.uniforms.lightPos&&k.uniforms.lightPos.value.copy(g);return k}function f(b,c,d){if(!1!==b.visible){b.layers.test(c.layers)&&(b instanceof THREE.Mesh||b instanceof THREE.Line||b instanceof
THREE.Points)&&b.castShadow&&(!1===b.frustumCulled||!0===l.intersectsObject(b))&&!0===b.material.visible&&(b.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,b.matrixWorld),r.push(b));b=b.children;for(var g=0,h=b.length;g<h;g++)f(b[g],c,d)}}var h=b.context,k=b.state,l=new THREE.Frustum,m=new THREE.Matrix4,t=c.shadows,u=new THREE.Vector2,q=new THREE.Vector3,n=new THREE.Vector3,r=[],p=Array(4),w=Array(4),v={},y=[new THREE.Vector3(1,0,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,
0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(0,-1,0)],A=[new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1)],x=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4];c=new THREE.MeshDepthMaterial;c.depthPacking=THREE.RGBADepthPacking;c.clipping=!0;for(var z=THREE.ShaderLib.distanceRGBA,D=THREE.UniformsUtils.clone(z.uniforms),B=0;4!==B;++B){var C=
0!==(B&1),E=0!==(B&2),G=c.clone();G.morphTargets=C;G.skinning=E;p[B]=G;C=new THREE.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:D,vertexShader:z.vertexShader,fragmentShader:z.fragmentShader,morphTargets:C,skinning:E,clipping:!0});w[B]=C}var H=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=THREE.PCFShadowMap;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(c,p){if(!1!==H.enabled&&(!1!==H.autoUpdate||!1!==H.needsUpdate)&&0!==t.length){k.clearColor(1,
1,1,1);k.disable(h.BLEND);k.setDepthTest(!0);k.setScissorTest(!1);for(var v,w,D=0,B=t.length;D<B;D++){var z=t[D],C=z.shadow;if(void 0===C)console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");else{var E=C.camera;u.copy(C.mapSize);if(z instanceof THREE.PointLight){v=6;w=!0;var G=u.x,V=u.y;x[0].set(2*G,V,G,V);x[1].set(0,V,G,V);x[2].set(3*G,V,G,V);x[3].set(G,V,G,V);x[4].set(3*G,0,G,V);x[5].set(G,0,G,V);u.x*=4;u.y*=2}else v=1,w=!1;null===C.map&&(C.map=new THREE.WebGLRenderTarget(u.x,u.y,{minFilter:THREE.NearestFilter,
magFilter:THREE.NearestFilter,format:THREE.RGBAFormat}),E.updateProjectionMatrix());C instanceof THREE.SpotLightShadow&&C.update(z);G=C.map;C=C.matrix;n.setFromMatrixPosition(z.matrixWorld);E.position.copy(n);b.setRenderTarget(G);b.clear();for(G=0;G<v;G++){w?(q.copy(E.position),q.add(y[G]),E.up.copy(A[G]),E.lookAt(q),k.viewport(x[G])):(q.setFromMatrixPosition(z.target.matrixWorld),E.lookAt(q));E.updateMatrixWorld();E.matrixWorldInverse.getInverse(E.matrixWorld);C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,
0,0,0,1);C.multiply(E.projectionMatrix);C.multiply(E.matrixWorldInverse);m.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse);l.setFromMatrix(m);r.length=0;f(c,p,E);for(var V=0,X=r.length;V<X;V++){var ea=r[V],da=d.update(ea),R=ea.material;if(R instanceof THREE.MultiMaterial)for(var Y=da.groups,R=R.materials,ba=0,ca=Y.length;ba<ca;ba++){var aa=Y[ba],Z=R[aa.materialIndex];!0===Z.visible&&(Z=g(ea,Z,w,n),b.renderBufferDirect(E,null,da,Z,ea,aa))}else Z=g(ea,R,w,n),b.renderBufferDirect(E,null,da,
Z,ea,null)}}}}v=b.getClearColor();w=b.getClearAlpha();b.setClearColor(v,w);H.needsUpdate=!1}}};
THREE.WebGLState=function(b,c,d){function g(c,f,d){var g=new Uint8Array(3),h=b.createTexture();b.bindTexture(c,h);b.texParameteri(c,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(c,b.TEXTURE_MAG_FILTER,b.NEAREST);for(c=0;c<d;c++)b.texImage2D(f+c,0,b.RGB,1,1,0,b.RGB,b.UNSIGNED_BYTE,g);return h}var f=this;this.buffers={color:new THREE.WebGLColorBuffer(b,this),depth:new THREE.WebGLDepthBuffer(b,this),stencil:new THREE.WebGLStencilBuffer(b,this)};var h=b.getParameter(b.MAX_VERTEX_ATTRIBS),k=new Uint8Array(h),
l=new Uint8Array(h),m=new Uint8Array(h),t={},u=null,q=null,n=null,r=null,p=null,w=null,v=null,y=null,A=!1,x=null,z=null,D=null,B=null,C=null,E=null,G=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS),H=null,I={},L=new THREE.Vector4,J=new THREE.Vector4,K={};K[b.TEXTURE_2D]=g(b.TEXTURE_2D,b.TEXTURE_2D,1);K[b.TEXTURE_CUBE_MAP]=g(b.TEXTURE_CUBE_MAP,b.TEXTURE_CUBE_MAP_POSITIVE_X,6);this.init=function(){this.clearColor(0,0,0,1);this.clearDepth(1);this.clearStencil(0);this.enable(b.DEPTH_TEST);this.setDepthFunc(THREE.LessEqualDepth);
this.setFlipSided(!1);this.setCullFace(THREE.CullFaceBack);this.enable(b.CULL_FACE);this.enable(b.BLEND);this.setBlending(THREE.NormalBlending)};this.initAttributes=function(){for(var b=0,c=k.length;b<c;b++)k[b]=0};this.enableAttribute=function(f){k[f]=1;0===l[f]&&(b.enableVertexAttribArray(f),l[f]=1);0!==m[f]&&(c.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(f,0),m[f]=0)};this.enableAttributeAndDivisor=function(c,f,d){k[c]=1;0===l[c]&&(b.enableVertexAttribArray(c),l[c]=1);m[c]!==f&&(d.vertexAttribDivisorANGLE(c,
f),m[c]=f)};this.disableUnusedAttributes=function(){for(var c=0,f=l.length;c!==f;++c)l[c]!==k[c]&&(b.disableVertexAttribArray(c),l[c]=0)};this.enable=function(c){!0!==t[c]&&(b.enable(c),t[c]=!0)};this.disable=function(c){!1!==t[c]&&(b.disable(c),t[c]=!1)};this.getCompressedTextureFormats=function(){if(null===u&&(u=[],c.get("WEBGL_compressed_texture_pvrtc")||c.get("WEBGL_compressed_texture_s3tc")||c.get("WEBGL_compressed_texture_etc1")))for(var f=b.getParameter(b.COMPRESSED_TEXTURE_FORMATS),d=0;d<
f.length;d++)u.push(f[d]);return u};this.setBlending=function(c,f,g,h,k,l,m,t){if(c!==THREE.NoBlending){this.enable(b.BLEND);if(c!==q||t!==A)c===THREE.AdditiveBlending?t?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ONE,b.ONE,b.ONE,b.ONE)):(b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE)):c===THREE.SubtractiveBlending?t?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ZERO,b.ZERO,b.ONE_MINUS_SRC_COLOR,b.ONE_MINUS_SRC_ALPHA)):(b.blendEquation(b.FUNC_ADD),
b.blendFunc(b.ZERO,b.ONE_MINUS_SRC_COLOR)):c===THREE.MultiplyBlending?t?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ZERO,b.SRC_COLOR,b.ZERO,b.SRC_ALPHA)):(b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.SRC_COLOR)):t?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ONE,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA)):(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA)),
q=c,A=t;if(c===THREE.CustomBlending){k=k||f;l=l||g;m=m||h;if(f!==n||k!==w)b.blendEquationSeparate(d(f),d(k)),n=f,w=k;if(g!==r||h!==p||l!==v||m!==y)b.blendFuncSeparate(d(g),d(h),d(l),d(m)),r=g,p=h,v=l,y=m}else y=v=w=p=r=n=null}else this.disable(b.BLEND),q=c};this.setColorWrite=function(b){this.buffers.color.setMask(b)};this.setDepthTest=function(b){this.buffers.depth.setTest(b)};this.setDepthWrite=function(b){this.buffers.depth.setMask(b)};this.setDepthFunc=function(b){this.buffers.depth.setFunc(b)};
this.setStencilTest=function(b){this.buffers.stencil.setTest(b)};this.setStencilWrite=function(b){this.buffers.stencil.setMask(b)};this.setStencilFunc=function(b,c,f){this.buffers.stencil.setFunc(b,c,f)};this.setStencilOp=function(b,c,f){this.buffers.stencil.setOp(b,c,f)};this.setFlipSided=function(c){x!==c&&(c?b.frontFace(b.CW):b.frontFace(b.CCW),x=c)};this.setCullFace=function(c){c!==THREE.CullFaceNone?(this.enable(b.CULL_FACE),c!==z&&(c===THREE.CullFaceBack?b.cullFace(b.BACK):c===THREE.CullFaceFront?
b.cullFace(b.FRONT):b.cullFace(b.FRONT_AND_BACK))):this.disable(b.CULL_FACE);z=c};this.setLineWidth=function(c){c!==D&&(b.lineWidth(c),D=c)};this.setPolygonOffset=function(c,f,d){if(c){if(this.enable(b.POLYGON_OFFSET_FILL),B!==f||C!==d)b.polygonOffset(f,d),B=f,C=d}else this.disable(b.POLYGON_OFFSET_FILL)};this.getScissorTest=function(){return E};this.setScissorTest=function(c){(E=c)?this.enable(b.SCISSOR_TEST):this.disable(b.SCISSOR_TEST)};this.activeTexture=function(c){void 0===c&&(c=b.TEXTURE0+
G-1);H!==c&&(b.activeTexture(c),H=c)};this.bindTexture=function(c,d){null===H&&f.activeTexture();var g=I[H];void 0===g&&(g={type:void 0,texture:void 0},I[H]=g);if(g.type!==c||g.texture!==d)b.bindTexture(c,d||K[c]),g.type=c,g.texture=d};this.compressedTexImage2D=function(){try{b.compressedTexImage2D.apply(b,arguments)}catch(c){console.error(c)}};this.texImage2D=function(){try{b.texImage2D.apply(b,arguments)}catch(c){console.error(c)}};this.clearColor=function(b,c,f,d){this.buffers.color.setClear(b,
c,f,d)};this.clearDepth=function(b){this.buffers.depth.setClear(b)};this.clearStencil=function(b){this.buffers.stencil.setClear(b)};this.scissor=function(c){!1===L.equals(c)&&(b.scissor(c.x,c.y,c.z,c.w),L.copy(c))};this.viewport=function(c){!1===J.equals(c)&&(b.viewport(c.x,c.y,c.z,c.w),J.copy(c))};this.reset=function(){for(var c=0;c<l.length;c++)1===l[c]&&(b.disableVertexAttribArray(c),l[c]=0);t={};H=u=null;I={};z=x=q=null;this.buffers.color.reset();this.buffers.depth.reset();this.buffers.stencil.reset()}};
THREE.WebGLColorBuffer=function(b,c){var d=!1,g=new THREE.Vector4,f=null,h=new THREE.Vector4;this.setMask=function(c){f===c||d||(b.colorMask(c,c,c,c),f=c)};this.setLocked=function(b){d=b};this.setClear=function(c,f,d,t){g.set(c,f,d,t);!1===h.equals(g)&&(b.clearColor(c,f,d,t),h.copy(g))};this.reset=function(){d=!1;f=null;h=new THREE.Vector4}};
THREE.WebGLDepthBuffer=function(b,c){var d=!1,g=null,f=null,h=null;this.setTest=function(f){f?c.enable(b.DEPTH_TEST):c.disable(b.DEPTH_TEST)};this.setMask=function(c){g===c||d||(b.depthMask(c),g=c)};this.setFunc=function(c){if(f!==c){if(c)switch(c){case THREE.NeverDepth:b.depthFunc(b.NEVER);break;case THREE.AlwaysDepth:b.depthFunc(b.ALWAYS);break;case THREE.LessDepth:b.depthFunc(b.LESS);break;case THREE.LessEqualDepth:b.depthFunc(b.LEQUAL);break;case THREE.EqualDepth:b.depthFunc(b.EQUAL);break;case THREE.GreaterEqualDepth:b.depthFunc(b.GEQUAL);
break;case THREE.GreaterDepth:b.depthFunc(b.GREATER);break;case THREE.NotEqualDepth:b.depthFunc(b.NOTEQUAL);break;default:b.depthFunc(b.LEQUAL)}else b.depthFunc(b.LEQUAL);f=c}};this.setLocked=function(b){d=b};this.setClear=function(c){h!==c&&(b.clearDepth(c),h=c)};this.reset=function(){d=!1;h=f=g=null}};
THREE.WebGLStencilBuffer=function(b,c){var d=!1,g=null,f=null,h=null,k=null,l=null,m=null,t=null,u=null;this.setTest=function(f){f?c.enable(b.STENCIL_TEST):c.disable(b.STENCIL_TEST)};this.setMask=function(c){g===c||d||(b.stencilMask(c),g=c)};this.setFunc=function(c,d,g){if(f!==c||h!==d||k!==g)b.stencilFunc(c,d,g),f=c,h=d,k=g};this.setOp=function(c,f,d){if(l!==c||m!==f||t!==d)b.stencilOp(c,f,d),l=c,m=f,t=d};this.setLocked=function(b){d=b};this.setClear=function(c){u!==c&&(b.clearStencil(c),u=c)};this.reset=
function(){d=!1;u=t=m=l=k=h=f=g=null}};
THREE.WebGLUniforms=function(){var b=[],c=[],d=function(c,f,d){var g=c[0];if(0>=g||0<g)return c;var h=f*d,k=b[h];void 0===k&&(k=new Float32Array(h),b[h]=k);if(0!==f)for(g.toArray(k,0),g=1,h=0;g!==f;++g)h+=d,c[g].toArray(k,h);return k},g=function(b,f){var d=c[f];void 0===d&&(d=new Int32Array(f),c[f]=d);for(var g=0;g!==f;++g)d[g]=b.allocTextureUnit();return d},f=function(b,c){b.uniform1f(this.addr,c)},h=function(b,c){b.uniform1i(this.addr,c)},k=function(b,c){void 0===c.x?b.uniform2fv(this.addr,c):b.uniform2f(this.addr,
c.x,c.y)},l=function(b,c){void 0!==c.x?b.uniform3f(this.addr,c.x,c.y,c.z):void 0!==c.r?b.uniform3f(this.addr,c.r,c.g,c.b):b.uniform3fv(this.addr,c)},m=function(b,c){void 0===c.x?b.uniform4fv(this.addr,c):b.uniform4f(this.addr,c.x,c.y,c.z,c.w)},t=function(b,c){b.uniformMatrix2fv(this.addr,!1,c.elements||c)},u=function(b,c){b.uniformMatrix3fv(this.addr,!1,c.elements||c)},q=function(b,c){b.uniformMatrix4fv(this.addr,!1,c.elements||c)},n=function(b,c,f){var d=f.allocTextureUnit();b.uniform1i(this.addr,
d);c&&f.setTexture2D(c,d)},r=function(b,c,f){var d=f.allocTextureUnit();b.uniform1i(this.addr,d);c&&f.setTextureCube(c,d)},p=function(b,c){b.uniform2iv(this.addr,c)},w=function(b,c){b.uniform3iv(this.addr,c)},v=function(b,c){b.uniform4iv(this.addr,c)},y=function(b){switch(b){case 5126:return f;case 35664:return k;case 35665:return l;case 35666:return m;case 35674:return t;case 35675:return u;case 35676:return q;case 35678:return n;case 35680:return r;case 5124:case 35670:return h;case 35667:case 35671:return p;
case 35668:case 35672:return w;case 35669:case 35673:return v}},A=function(b,c){b.uniform1fv(this.addr,c)},x=function(b,c){b.uniform1iv(this.addr,c)},z=function(b,c){b.uniform2fv(this.addr,d(c,this.size,2))},D=function(b,c){b.uniform3fv(this.addr,d(c,this.size,3))},B=function(b,c){b.uniform4fv(this.addr,d(c,this.size,4))},C=function(b,c){b.uniformMatrix2fv(this.addr,!1,d(c,this.size,4))},E=function(b,c){b.uniformMatrix3fv(this.addr,!1,d(c,this.size,9))},G=function(b,c){b.uniformMatrix4fv(this.addr,
!1,d(c,this.size,16))},H=function(b,c,f){var d=c.length,h=g(f,d);b.uniform1iv(this.addr,h);for(b=0;b!==d;++b){var k=c[b];k&&f.setTexture2D(k,h[b])}},I=function(b,c,f){var d=c.length,h=g(f,d);b.uniform1iv(this.addr,h);for(b=0;b!==d;++b){var k=c[b];k&&f.setTextureCube(k,h[b])}},L=function(b){switch(b){case 5126:return A;case 35664:return z;case 35665:return D;case 35666:return B;case 35674:return C;case 35675:return E;case 35676:return G;case 35678:return H;case 35680:return I;case 5124:case 35670:return x;
case 35667:case 35671:return p;case 35668:case 35672:return w;case 35669:case 35673:return v}},J=function(b,c,f){this.id=b;this.addr=f;this.setValue=y(c.type)},K=function(b,c,f){this.id=b;this.addr=f;this.size=c.size;this.setValue=L(c.type)},M=function(b){this.id=b;this.seq=[];this.map={}};M.prototype.setValue=function(b,c){for(var f=this.seq,d=0,g=f.length;d!==g;++d){var h=f[d];h.setValue(b,c[h.id])}};var P=/([\w\d_]+)(\])?(\[|\.)?/g,N=function(b,c,f){this.seq=[];this.map={};this.renderer=f;f=b.getProgramParameter(c,
b.ACTIVE_UNIFORMS);for(var d=0;d!==f;++d){var g=b.getActiveUniform(c,d),h=b.getUniformLocation(c,g.name),k=this,l=g.name,m=l.length;for(P.lastIndex=0;;){var n=P.exec(l),p=P.lastIndex,r=n[1],q=n[3];"]"===n[2]&&(r|=0);if(void 0===q||"["===q&&p+2===m){l=k;g=void 0===q?new J(r,g,h):new K(r,g,h);l.seq.push(g);l.map[g.id]=g;break}else q=k.map[r],void 0===q&&(q=new M(r),r=k,k=q,r.seq.push(k),r.map[k.id]=k),k=q}}};N.prototype.setValue=function(b,c,f){c=this.map[c];void 0!==c&&c.setValue(b,f,this.renderer)};
N.prototype.set=function(b,c,f){var d=this.map[f];void 0!==d&&d.setValue(b,c[f],this.renderer)};N.prototype.setOptional=function(b,c,f){c=c[f];void 0!==c&&this.setValue(b,f,c)};N.upload=function(b,c,f,d){for(var g=0,h=c.length;g!==h;++g){var k=c[g],l=f[k.id];!1!==l.needsUpdate&&k.setValue(b,l.value,d)}};N.seqWithValue=function(b,c){for(var f=[],d=0,g=b.length;d!==g;++d){var h=b[d];h.id in c&&f.push(h)}return f};N.splitDynamic=function(b,c){for(var f=null,d=b.length,g=0,h=0;h!==d;++h){var k=b[h],l=
c[k.id];l&&!0===l.dynamic?(null===f&&(f=[]),f.push(k)):(g<h&&(b[g]=k),++g)}g<d&&(b.length=g);return f};N.evalDynamic=function(b,c,f,d){for(var g=0,h=b.length;g!==h;++g){var k=c[b[g].id],l=k.onUpdateCallback;void 0!==l&&l.call(k,f,d)}};return N}();
THREE.LensFlarePlugin=function(b,c){var d,g,f,h,k,l,m,t,u,q,n=b.context,r=b.state,p,w,v,y,A,x;this.render=function(z,D,B){if(0!==c.length){z=new THREE.Vector3;var C=B.w/B.z,E=.5*B.z,G=.5*B.w,H=16/B.w,I=new THREE.Vector2(H*C,H),L=new THREE.Vector3(1,1,0),J=new THREE.Vector2(1,1),K=new THREE.Box2;K.min.set(0,0);K.max.set(B.z-16,B.w-16);if(void 0===y){var H=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),M=new Uint16Array([0,1,2,0,2,3]);p=n.createBuffer();w=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,
p);n.bufferData(n.ARRAY_BUFFER,H,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,w);n.bufferData(n.ELEMENT_ARRAY_BUFFER,M,n.STATIC_DRAW);A=n.createTexture();x=n.createTexture();r.bindTexture(n.TEXTURE_2D,A);n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,
n.NEAREST);r.bindTexture(n.TEXTURE_2D,x);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,16,16,0,n.RGBA,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);var H=v={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},M=n.createProgram(),P=n.createShader(n.FRAGMENT_SHADER),
N=n.createShader(n.VERTEX_SHADER),S="precision "+b.getPrecision()+" float;\n";n.shaderSource(P,S+H.fragmentShader);n.shaderSource(N,S+H.vertexShader);n.compileShader(P);n.compileShader(N);n.attachShader(M,P);n.attachShader(M,N);n.linkProgram(M);y=M;u=n.getAttribLocation(y,"position");q=n.getAttribLocation(y,"uv");d=n.getUniformLocation(y,"renderType");g=n.getUniformLocation(y,"map");f=n.getUniformLocation(y,"occlusionMap");h=n.getUniformLocation(y,"opacity");k=n.getUniformLocation(y,"color");l=n.getUniformLocation(y,
"scale");m=n.getUniformLocation(y,"rotation");t=n.getUniformLocation(y,"screenPosition")}n.useProgram(y);r.initAttributes();r.enableAttribute(u);r.enableAttribute(q);r.disableUnusedAttributes();n.uniform1i(f,0);n.uniform1i(g,1);n.bindBuffer(n.ARRAY_BUFFER,p);n.vertexAttribPointer(u,2,n.FLOAT,!1,16,0);n.vertexAttribPointer(q,2,n.FLOAT,!1,16,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,w);r.disable(n.CULL_FACE);r.setDepthWrite(!1);M=0;for(P=c.length;M<P;M++)if(H=16/B.w,I.set(H*C,H),N=c[M],z.set(N.matrixWorld.elements[12],
N.matrixWorld.elements[13],N.matrixWorld.elements[14]),z.applyMatrix4(D.matrixWorldInverse),z.applyProjection(D.projectionMatrix),L.copy(z),J.x=B.x+L.x*E+E-8,J.y=B.y+L.y*G+G-8,!0===K.containsPoint(J)){r.activeTexture(n.TEXTURE0);r.bindTexture(n.TEXTURE_2D,null);r.activeTexture(n.TEXTURE1);r.bindTexture(n.TEXTURE_2D,A);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,J.x,J.y,16,16,0);n.uniform1i(d,0);n.uniform2f(l,I.x,I.y);n.uniform3f(t,L.x,L.y,L.z);r.disable(n.BLEND);r.enable(n.DEPTH_TEST);n.drawElements(n.TRIANGLES,
6,n.UNSIGNED_SHORT,0);r.activeTexture(n.TEXTURE0);r.bindTexture(n.TEXTURE_2D,x);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,J.x,J.y,16,16,0);n.uniform1i(d,1);r.disable(n.DEPTH_TEST);r.activeTexture(n.TEXTURE1);r.bindTexture(n.TEXTURE_2D,A);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);N.positionScreen.copy(L);N.customUpdateCallback?N.customUpdateCallback(N):N.updateLensFlares();n.uniform1i(d,2);r.enable(n.BLEND);for(var S=0,U=N.lensFlares.length;S<U;S++){var W=N.lensFlares[S];.001<W.opacity&&.001<W.scale&&
(L.x=W.x,L.y=W.y,L.z=W.z,H=W.size*W.scale/B.w,I.x=H*C,I.y=H,n.uniform3f(t,L.x,L.y,L.z),n.uniform2f(l,I.x,I.y),n.uniform1f(m,W.rotation),n.uniform1f(h,W.opacity),n.uniform3f(k,W.color.r,W.color.g,W.color.b),r.setBlending(W.blending,W.blendEquation,W.blendSrc,W.blendDst),b.setTexture2D(W.texture,1),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}}r.enable(n.CULL_FACE);r.enable(n.DEPTH_TEST);r.setDepthWrite(!0);b.resetGLState()}}};
THREE.SpritePlugin=function(b,c){var d,g,f,h,k,l,m,t,u,q,n,r,p,w,v,y,A;function x(b,c){return b.renderOrder!==c.renderOrder?b.renderOrder-c.renderOrder:b.z!==c.z?c.z-b.z:c.id-b.id}var z=b.context,D=b.state,B,C,E,G,H=new THREE.Vector3,I=new THREE.Quaternion,L=new THREE.Vector3;this.render=function(J,K){if(0!==c.length){if(void 0===E){var M=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),P=new Uint16Array([0,1,2,0,2,3]);B=z.createBuffer();C=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,
B);z.bufferData(z.ARRAY_BUFFER,M,z.STATIC_DRAW);z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,C);z.bufferData(z.ELEMENT_ARRAY_BUFFER,P,z.STATIC_DRAW);var M=z.createProgram(),P=z.createShader(z.VERTEX_SHADER),N=z.createShader(z.FRAGMENT_SHADER);z.shaderSource(P,["precision "+b.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
z.shaderSource(N,["precision "+b.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
z.compileShader(P);z.compileShader(N);z.attachShader(M,P);z.attachShader(M,N);z.linkProgram(M);E=M;y=z.getAttribLocation(E,"position");A=z.getAttribLocation(E,"uv");d=z.getUniformLocation(E,"uvOffset");g=z.getUniformLocation(E,"uvScale");f=z.getUniformLocation(E,"rotation");h=z.getUniformLocation(E,"scale");k=z.getUniformLocation(E,"color");l=z.getUniformLocation(E,"map");m=z.getUniformLocation(E,"opacity");t=z.getUniformLocation(E,"modelViewMatrix");u=z.getUniformLocation(E,"projectionMatrix");q=
z.getUniformLocation(E,"fogType");n=z.getUniformLocation(E,"fogDensity");r=z.getUniformLocation(E,"fogNear");p=z.getUniformLocation(E,"fogFar");w=z.getUniformLocation(E,"fogColor");v=z.getUniformLocation(E,"alphaTest");M=document.createElement("canvas");M.width=8;M.height=8;P=M.getContext("2d");P.fillStyle="white";P.fillRect(0,0,8,8);G=new THREE.Texture(M);G.needsUpdate=!0}z.useProgram(E);D.initAttributes();D.enableAttribute(y);D.enableAttribute(A);D.disableUnusedAttributes();D.disable(z.CULL_FACE);
D.enable(z.BLEND);z.bindBuffer(z.ARRAY_BUFFER,B);z.vertexAttribPointer(y,2,z.FLOAT,!1,16,0);z.vertexAttribPointer(A,2,z.FLOAT,!1,16,8);z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,C);z.uniformMatrix4fv(u,!1,K.projectionMatrix.elements);D.activeTexture(z.TEXTURE0);z.uniform1i(l,0);P=M=0;(N=J.fog)?(z.uniform3f(w,N.color.r,N.color.g,N.color.b),N instanceof THREE.Fog?(z.uniform1f(r,N.near),z.uniform1f(p,N.far),z.uniform1i(q,1),P=M=1):N instanceof THREE.FogExp2&&(z.uniform1f(n,N.density),z.uniform1i(q,2),P=M=2)):
(z.uniform1i(q,0),P=M=0);for(var N=0,S=c.length;N<S;N++){var U=c[N];U.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,U.matrixWorld);U.z=-U.modelViewMatrix.elements[14]}c.sort(x);for(var W=[],N=0,S=c.length;N<S;N++){var U=c[N],V=U.material;z.uniform1f(v,V.alphaTest);z.uniformMatrix4fv(t,!1,U.modelViewMatrix.elements);U.matrixWorld.decompose(H,I,L);W[0]=L.x;W[1]=L.y;U=0;J.fog&&V.fog&&(U=P);M!==U&&(z.uniform1i(q,U),M=U);null!==V.map?(z.uniform2f(d,V.map.offset.x,V.map.offset.y),z.uniform2f(g,
V.map.repeat.x,V.map.repeat.y)):(z.uniform2f(d,0,0),z.uniform2f(g,1,1));z.uniform1f(m,V.opacity);z.uniform3f(k,V.color.r,V.color.g,V.color.b);z.uniform1f(f,V.rotation);z.uniform2fv(h,W);D.setBlending(V.blending,V.blendEquation,V.blendSrc,V.blendDst);D.setDepthTest(V.depthTest);D.setDepthWrite(V.depthWrite);V.map?b.setTexture2D(V.map,0):b.setTexture2D(G,0);z.drawElements(z.TRIANGLES,6,z.UNSIGNED_SHORT,0)}D.enable(z.CULL_FACE);b.resetGLState()}}};
Object.assign(THREE,{Face4:function(b,c,d,g,f,h,k){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(b,c,d,f,h,k)},LineStrip:0,LinePieces:1,MeshFaceMaterial:THREE.MultiMaterial,PointCloud:function(b,c){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new THREE.Points(b,c)},Particle:THREE.Sprite,ParticleSystem:function(b,c){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new THREE.Points(b,
c)},PointCloudMaterial:function(b){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(b)},ParticleBasicMaterial:function(b){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(b)},ParticleSystemMaterial:function(b){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(b)},Vertex:function(b,c,d){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");
return new THREE.Vector3(b,c,d)}});Object.assign(THREE.Box2.prototype,{empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(b){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(b)}});
Object.assign(THREE.Box3.prototype,{empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(b){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(b)},isIntersectionSphere:function(b){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(b)}});
Object.assign(THREE.Matrix3.prototype,{multiplyVector3:function(b){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return b.applyMatrix3(this)},multiplyVector3Array:function(b){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(b)}});
Object.assign(THREE.Matrix4.prototype,{extractPosition:function(b){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(b)},setRotationFromQuaternion:function(b){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(b)},multiplyVector3:function(b){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return b.applyProjection(this)},multiplyVector4:function(b){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return b.applyMatrix4(this)},multiplyVector3Array:function(b){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(b)},rotateAxis:function(b){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
b.transformDirection(this)},crossVector:function(b){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return b.applyMatrix4(this)},translate:function(b){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(b){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(b){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(b){console.error("THREE.Matrix4: .rotateZ() has been removed.")},
rotateByAxis:function(b,c){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}});Object.assign(THREE.Plane.prototype,{isIntersectionLine:function(b){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(b)}});Object.assign(THREE.Quaternion.prototype,{multiplyVector3:function(b){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return b.applyQuaternion(this)}});
Object.assign(THREE.Ray.prototype,{isIntersectionBox:function(b){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(b)},isIntersectionPlane:function(b){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(b)},isIntersectionSphere:function(b){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(b)}});
Object.assign(THREE.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(b){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(b)},
getScaleFromMatrix:function(b){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(b)},getColumnFromMatrix:function(b,c){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(c,b)}});
Object.assign(THREE.Object3D.prototype,{getChildByName:function(b){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(b)},renderDepth:function(b){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(b,c){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(c,b)}});
Object.defineProperties(THREE.Object3D.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(b){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=b}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(b){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});
Object.defineProperties(THREE.LOD.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});THREE.PerspectiveCamera.prototype.setLens=function(b,c){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==c&&(this.filmGauge=c);this.setFocalLength(b)};
Object.defineProperties(THREE.Light.prototype,{onlyShadow:{set:function(b){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(b){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=b}},shadowCameraLeft:{set:function(b){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=b}},shadowCameraRight:{set:function(b){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");
this.shadow.camera.right=b}},shadowCameraTop:{set:function(b){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=b}},shadowCameraBottom:{set:function(b){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=b}},shadowCameraNear:{set:function(b){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=b}},shadowCameraFar:{set:function(b){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");
this.shadow.camera.far=b}},shadowCameraVisible:{set:function(b){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(b){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=b}},shadowDarkness:{set:function(b){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(b){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");
this.shadow.mapSize.width=b}},shadowMapHeight:{set:function(b){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=b}}});Object.defineProperties(THREE.BufferAttribute.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length}}});
Object.assign(THREE.BufferGeometry.prototype,{addIndex:function(b){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(b)},addDrawCall:function(b,c,d){void 0!==d&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(b,c)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},
computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(THREE.BufferGeometry.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});
Object.defineProperties(THREE.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(b){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE."+this.type+": .wrapRGB has been removed.");return new THREE.Color}}});
Object.defineProperties(THREE.MeshPhongMaterial.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(b){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});
Object.defineProperties(THREE.ShaderMaterial.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(b){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=b}}});
THREE.EventDispatcher.prototype=Object.assign(Object.create({constructor:THREE.EventDispatcher,apply:function(b){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in.");Object.assign(b,this)}}),THREE.EventDispatcher.prototype);
Object.assign(THREE.WebGLRenderer.prototype,{supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},
supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(b){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");
this.setScissorTest(b)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});
Object.defineProperties(THREE.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=b}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=b}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");
this.shadowMap.cullFace=b}}});Object.defineProperties(THREE.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?THREE.CullFaceFront:THREE.CullFaceBack},set:function(b){b=b!==THREE.CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+b+".");this.renderReverseSided=b}}});
Object.defineProperties(THREE.WebGLRenderTarget.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(b){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=b}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(b){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=
b}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(b){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=b}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(b){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=
b}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(b){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=b}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(b){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=
b}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(b){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=b}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(b){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=b}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
return this.texture.type},set:function(b){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=b}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(b){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=b}}});
Object.assign(THREE.Audio.prototype,{load:function(b){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var c=this;(new THREE.AudioLoader).load(b,function(b){c.setBuffer(b)});return this}});Object.assign(THREE.AudioAnalyser.prototype,{getData:function(b){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()}});
THREE.GeometryUtils={merge:function(b,c,d){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var g;c instanceof THREE.Mesh&&(c.matrixAutoUpdate&&c.updateMatrix(),g=c.matrix,c=c.geometry);b.merge(c,g,d)},center:function(b){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return b.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(b,c,d,g){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var f=new THREE.TextureLoader;f.setCrossOrigin(this.crossOrigin);b=f.load(b,d,void 0,g);c&&(b.mapping=c);return b},loadTextureCube:function(b,c,d,g){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var f=new THREE.CubeTextureLoader;f.setCrossOrigin(this.crossOrigin);b=f.load(b,
d,void 0,g);c&&(b.mapping=c);return b},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(b,c){console.warn("THREE.Projector: .projectVector() is now vector.project().");b.project(c)};this.unprojectVector=function(b,c){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");b.unproject(c)};this.pickingRay=function(b,c){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};
THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};
THREE.CurveUtils={tangentQuadraticBezier:function(b,c,d,g){return 2*(1-b)*(d-c)+2*b*(g-d)},tangentCubicBezier:function(b,c,d,g,f){return-3*c*(1-b)*(1-b)+3*d*(1-b)*(1-b)-6*b*d*(1-b)+6*b*g*(1-b)-3*b*b*g+3*b*b*f},tangentSpline:function(b,c,d,g,f){return 6*b*b-6*b+(3*b*b-4*b+1)+(-6*b*b+6*b)+(3*b*b-2*b)},interpolate:function(b,c,d,g,f){b=.5*(d-b);g=.5*(g-c);var h=f*f;return(2*c-2*d+b+g)*f*h+(-3*c+3*d-2*b-g)*h+b*f+c}};
THREE.SceneUtils={createMultiMaterialObject:function(b,c){for(var d=new THREE.Group,g=0,f=c.length;g<f;g++)d.add(new THREE.Mesh(b,c[g]));return d},detach:function(b,c,d){b.applyMatrix(c.matrixWorld);c.remove(b);d.add(b)},attach:function(b,c,d){var g=new THREE.Matrix4;g.getInverse(d.matrixWorld);b.applyMatrix(g);c.remove(b);d.add(b)}};
THREE.ShapeUtils={area:function(b){for(var c=b.length,d=0,g=c-1,f=0;f<c;g=f++)d+=b[g].x*b[f].y-b[f].x*b[g].y;return.5*d},triangulate:function(){return function(b,c){var d=b.length;if(3>d)return null;var g=[],f=[],h=[],k,l,m;if(0<THREE.ShapeUtils.area(b))for(l=0;l<d;l++)f[l]=l;else for(l=0;l<d;l++)f[l]=d-1-l;var t=2*d;for(l=d-1;2<d;){if(0>=t--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}k=l;d<=k&&(k=0);l=k+1;d<=l&&(l=0);m=l+1;d<=m&&(m=0);var u;a:{var q=
u=void 0,n=void 0,r=void 0,p=void 0,w=void 0,v=void 0,y=void 0,A=void 0,q=b[f[k]].x,n=b[f[k]].y,r=b[f[l]].x,p=b[f[l]].y,w=b[f[m]].x,v=b[f[m]].y;if(Number.EPSILON>(r-q)*(v-n)-(p-n)*(w-q))u=!1;else{var x=void 0,z=void 0,D=void 0,B=void 0,C=void 0,E=void 0,G=void 0,H=void 0,I=void 0,L=void 0,I=H=G=A=y=void 0,x=w-r,z=v-p,D=q-w,B=n-v,C=r-q,E=p-n;for(u=0;u<d;u++)if(y=b[f[u]].x,A=b[f[u]].y,!(y===q&&A===n||y===r&&A===p||y===w&&A===v)&&(G=y-q,H=A-n,I=y-r,L=A-p,y-=w,A-=v,I=x*L-z*I,G=C*H-E*G,H=D*A-B*y,I>=-Number.EPSILON&&
H>=-Number.EPSILON&&G>=-Number.EPSILON)){u=!1;break a}u=!0}}if(u){g.push([b[f[k]],b[f[l]],b[f[m]]]);h.push([f[k],f[l],f[m]]);k=l;for(m=l+1;m<d;k++,m++)f[k]=f[m];d--;t=2*d}}return c?h:g}}(),triangulateShape:function(b,c){function d(b,c,f){return b.x!==c.x?b.x<c.x?b.x<=f.x&&f.x<=c.x:c.x<=f.x&&f.x<=b.x:b.y<c.y?b.y<=f.y&&f.y<=c.y:c.y<=f.y&&f.y<=b.y}function g(b,c,f,g,h){var k=c.x-b.x,l=c.y-b.y,m=g.x-f.x,q=g.y-f.y,t=b.x-f.x,u=b.y-f.y,C=l*m-k*q,E=l*t-k*u;if(Math.abs(C)>Number.EPSILON){if(0<C){if(0>E||E>
C)return[];m=q*t-m*u;if(0>m||m>C)return[]}else{if(0<E||E<C)return[];m=q*t-m*u;if(0<m||m<C)return[]}if(0===m)return!h||0!==E&&E!==C?[b]:[];if(m===C)return!h||0!==E&&E!==C?[c]:[];if(0===E)return[f];if(E===C)return[g];h=m/C;return[{x:b.x+h*k,y:b.y+h*l}]}if(0!==E||q*t!==m*u)return[];l=0===k&&0===l;m=0===m&&0===q;if(l&&m)return b.x!==f.x||b.y!==f.y?[]:[b];if(l)return d(f,g,b)?[b]:[];if(m)return d(b,c,f)?[f]:[];0!==k?(b.x<c.x?(k=b,m=b.x,l=c,b=c.x):(k=c,m=c.x,l=b,b=b.x),f.x<g.x?(c=f,C=f.x,q=g,f=g.x):(c=
g,C=g.x,q=f,f=f.x)):(b.y<c.y?(k=b,m=b.y,l=c,b=c.y):(k=c,m=c.y,l=b,b=b.y),f.y<g.y?(c=f,C=f.y,q=g,f=g.y):(c=g,C=g.y,q=f,f=f.y));return m<=C?b<C?[]:b===C?h?[]:[c]:b<=f?[c,l]:[c,q]:m>f?[]:m===f?h?[]:[k]:b<=f?[k,l]:[k,q]}function f(b,c,f,d){var g=c.x-b.x,h=c.y-b.y;c=f.x-b.x;f=f.y-b.y;var k=d.x-b.x;d=d.y-b.y;b=g*f-h*c;g=g*d-h*k;return Math.abs(b)>Number.EPSILON?(c=k*f-d*c,0<b?0<=g&&0<=c:0<=g||0<=c):0<g}var h,k,l,m,t,u={};l=b.concat();h=0;for(k=c.length;h<k;h++)Array.prototype.push.apply(l,c[h]);h=0;for(k=
l.length;h<k;h++)t=l[h].x+":"+l[h].y,void 0!==u[t]&&console.warn("THREE.Shape: Duplicate point",t),u[t]=h;h=function(b,c){function d(b,c){var g=l.length-1,h=b-1;0>h&&(h=g);var k=b+1;k>g&&(k=0);g=f(l[b],l[h],l[k],m[c]);if(!g)return!1;g=m.length-1;h=c-1;0>h&&(h=g);k=c+1;k>g&&(k=0);return(g=f(m[c],m[h],m[k],l[b]))?!0:!1}function h(b,c){var f,d;for(f=0;f<l.length;f++)if(d=f+1,d%=l.length,d=g(b,c,l[f],l[d],!0),0<d.length)return!0;return!1}function k(b,f){var d,h,l,m;for(d=0;d<q.length;d++)for(h=c[q[d]],
l=0;l<h.length;l++)if(m=l+1,m%=h.length,m=g(b,f,h[l],h[m],!0),0<m.length)return!0;return!1}var l=b.concat(),m,q=[],t,u,B,C,E,G=[],H,I,L,J=0;for(t=c.length;J<t;J++)q.push(J);H=0;for(var K=2*q.length;0<q.length;){K--;if(0>K){console.log("Infinite Loop! Holes left:"+q.length+", Probably Hole outside Shape!");break}for(u=H;u<l.length;u++){B=l[u];t=-1;for(J=0;J<q.length;J++)if(C=q[J],E=B.x+":"+B.y+":"+C,void 0===G[E]){m=c[C];for(I=0;I<m.length;I++)if(C=m[I],d(u,I)&&!h(B,C)&&!k(B,C)){t=I;q.splice(J,1);
H=l.slice(0,u+1);C=l.slice(u);I=m.slice(t);L=m.slice(0,t+1);l=H.concat(I).concat(L).concat(C);H=u;break}if(0<=t)break;G[E]=!0}if(0<=t)break}}return l}(b,c);var q=THREE.ShapeUtils.triangulate(h,!1);h=0;for(k=q.length;h<k;h++)for(m=q[h],l=0;3>l;l++)t=m[l].x+":"+m[l].y,t=u[t],void 0!==t&&(m[l]=t);return q.concat()},isClockWise:function(b){return 0>THREE.ShapeUtils.area(b)},b2:function(){return function(b,c,d,g){var f=1-b;return f*f*c+2*(1-b)*b*d+b*b*g}}(),b3:function(){return function(b,c,d,g,f){var h=
1-b,k=1-b;return h*h*h*c+3*k*k*b*d+3*(1-b)*b*b*g+b*b*b*f}}()};THREE.Curve=function(){};
THREE.Curve.prototype={constructor:THREE.Curve,getPoint:function(b){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null},getPointAt:function(b){b=this.getUtoTmapping(b);return this.getPoint(b)},getPoints:function(b){b||(b=5);var c,d=[];for(c=0;c<=b;c++)d.push(this.getPoint(c/b));return d},getSpacedPoints:function(b){b||(b=5);var c,d=[];for(c=0;c<=b;c++)d.push(this.getPointAt(c/b));return d},getLength:function(){var b=this.getLengths();return b[b.length-1]},getLengths:function(b){b||
(b=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===b+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var c=[],d,g=this.getPoint(0),f,h=0;c.push(0);for(f=1;f<=b;f++)d=this.getPoint(f/b),h+=d.distanceTo(g),c.push(h),g=d;return this.cacheArcLengths=c},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(b,c){var d=this.getLengths(),g=0,f=d.length,h;h=c?c:b*d[f-1];for(var k=0,l=f-
1,m;k<=l;)if(g=Math.floor(k+(l-k)/2),m=d[g]-h,0>m)k=g+1;else if(0<m)l=g-1;else{l=g;break}g=l;if(d[g]===h)return g/(f-1);k=d[g];return d=(g+(h-k)/(d[g+1]-k))/(f-1)},getTangent:function(b){var c=b-1E-4;b+=1E-4;0>c&&(c=0);1<b&&(b=1);c=this.getPoint(c);return this.getPoint(b).clone().sub(c).normalize()},getTangentAt:function(b){b=this.getUtoTmapping(b);return this.getTangent(b)}};
THREE.Curve.create=function(b,c){b.prototype=Object.create(THREE.Curve.prototype);b.prototype.constructor=b;b.prototype.getPoint=c;return b};THREE.CurvePath=function(){this.curves=[];this.autoClose=!1};
THREE.CurvePath.prototype=Object.assign(Object.create(THREE.Curve.prototype),{constructor:THREE.CurvePath,add:function(b){this.curves.push(b)},closePath:function(){var b=this.curves[0].getPoint(0),c=this.curves[this.curves.length-1].getPoint(1);b.equals(c)||this.curves.push(new THREE.LineCurve(c,b))},getPoint:function(b){for(var c=b*this.getLength(),d=this.getCurveLengths(),g=0;g<d.length;){if(d[g]>=c)return b=this.curves[g],c=1-(d[g]-c)/b.getLength(),b.getPointAt(c);g++}return null},getLength:function(){var b=
this.getCurveLengths();return b[b.length-1]},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var b=[],c=0,d=0,g=this.curves.length;d<g;d++)c+=this.curves[d].getLength(),b.push(c);return this.cacheLengths=b},createPointsGeometry:function(b){b=this.getPoints(b);return this.createGeometry(b)},createSpacedPointsGeometry:function(b){b=this.getSpacedPoints(b);return this.createGeometry(b)},createGeometry:function(b){for(var c=new THREE.Geometry,
d=0,g=b.length;d<g;d++){var f=b[d];c.vertices.push(new THREE.Vector3(f.x,f.y,f.z||0))}return c}});THREE.Font=function(b){this.data=b};
Object.assign(THREE.Font.prototype,{generateShapes:function(b,c,d){void 0===c&&(c=100);void 0===d&&(d=4);var g=this.data;b=String(b).split("");var f=c/g.resolution,h=0;c=[];for(var k=0;k<b.length;k++){var l;l=f;var m=h,t=g.glyphs[b[k]]||g.glyphs["?"];if(t){var u=new THREE.Path,q=[],n=THREE.ShapeUtils.b2,r=THREE.ShapeUtils.b3,p=void 0,w=void 0,v=w=p=void 0,y=void 0,A=void 0,x=void 0,z=void 0,D=void 0,y=void 0;if(t.o)for(var B=t._cachedOutline||(t._cachedOutline=t.o.split(" ")),C=0,E=B.length;C<E;)switch(B[C++]){case "m":p=
B[C++]*l+m;w=B[C++]*l;u.moveTo(p,w);break;case "l":p=B[C++]*l+m;w=B[C++]*l;u.lineTo(p,w);break;case "q":p=B[C++]*l+m;w=B[C++]*l;A=B[C++]*l+m;x=B[C++]*l;u.quadraticCurveTo(A,x,p,w);if(y=q[q.length-1])for(var v=y.x,y=y.y,G=1;G<=d;G++){var H=G/d;n(H,v,A,p);n(H,y,x,w)}break;case "b":if(p=B[C++]*l+m,w=B[C++]*l,A=B[C++]*l+m,x=B[C++]*l,z=B[C++]*l+m,D=B[C++]*l,u.bezierCurveTo(A,x,z,D,p,w),y=q[q.length-1])for(v=y.x,y=y.y,G=1;G<=d;G++)H=G/d,r(H,v,A,z,p),r(H,y,x,D,w)}l={offset:t.ha*l,path:u}}else l=void 0;h+=
l.offset;c.push(l.path)}d=[];g=0;for(b=c.length;g<b;g++)Array.prototype.push.apply(d,c[g].toShapes());return d}});THREE.Path=function(b){THREE.CurvePath.call(this);this.actions=[];b&&this.fromPoints(b)};
THREE.Path.prototype=Object.assign(Object.create(THREE.CurvePath.prototype),{constructor:THREE.Path,fromPoints:function(b){this.moveTo(b[0].x,b[0].y);for(var c=1,d=b.length;c<d;c++)this.lineTo(b[c].x,b[c].y)},moveTo:function(b,c){this.actions.push({action:"moveTo",args:[b,c]})},lineTo:function(b,c){var d=this.actions[this.actions.length-1].args,d=new THREE.LineCurve(new THREE.Vector2(d[d.length-2],d[d.length-1]),new THREE.Vector2(b,c));this.curves.push(d);this.actions.push({action:"lineTo",args:[b,
c]})},quadraticCurveTo:function(b,c,d,g){var f=this.actions[this.actions.length-1].args,f=new THREE.QuadraticBezierCurve(new THREE.Vector2(f[f.length-2],f[f.length-1]),new THREE.Vector2(b,c),new THREE.Vector2(d,g));this.curves.push(f);this.actions.push({action:"quadraticCurveTo",args:[b,c,d,g]})},bezierCurveTo:function(b,c,d,g,f,h){var k=this.actions[this.actions.length-1].args,k=new THREE.CubicBezierCurve(new THREE.Vector2(k[k.length-2],k[k.length-1]),new THREE.Vector2(b,c),new THREE.Vector2(d,g),
new THREE.Vector2(f,h));this.curves.push(k);this.actions.push({action:"bezierCurveTo",args:[b,c,d,g,f,h]})},splineThru:function(b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,d=[new THREE.Vector2(d[d.length-2],d[d.length-1])];Array.prototype.push.apply(d,b);d=new THREE.SplineCurve(d);this.curves.push(d);this.actions.push({action:"splineThru",args:c})},arc:function(b,c,d,g,f,h){var k=this.actions[this.actions.length-1].args;this.absarc(b+k[k.length-2],c+k[k.length-
1],d,g,f,h)},absarc:function(b,c,d,g,f,h){this.absellipse(b,c,d,d,g,f,h)},ellipse:function(b,c,d,g,f,h,k,l){var m=this.actions[this.actions.length-1].args;this.absellipse(b+m[m.length-2],c+m[m.length-1],d,g,f,h,k,l)},absellipse:function(b,c,d,g,f,h,k,l){var m=[b,c,d,g,f,h,k,l||0];b=new THREE.EllipseCurve(b,c,d,g,f,h,k,l);this.curves.push(b);b=b.getPoint(1);m.push(b.x);m.push(b.y);this.actions.push({action:"ellipse",args:m})},getSpacedPoints:function(b){b||(b=40);for(var c=[],d=0;d<b;d++)c.push(this.getPoint(d/
b));this.autoClose&&c.push(c[0]);return c},getPoints:function(b){b=b||12;for(var c=THREE.ShapeUtils.b2,d=THREE.ShapeUtils.b3,g=[],f,h,k,l,m,t,u,q,n,r,p=0,w=this.actions.length;p<w;p++){n=this.actions[p];var v=n.args;switch(n.action){case "moveTo":g.push(new THREE.Vector2(v[0],v[1]));break;case "lineTo":g.push(new THREE.Vector2(v[0],v[1]));break;case "quadraticCurveTo":f=v[2];h=v[3];m=v[0];t=v[1];0<g.length?(n=g[g.length-1],u=n.x,q=n.y):(n=this.actions[p-1].args,u=n[n.length-2],q=n[n.length-1]);for(v=
1;v<=b;v++)r=v/b,n=c(r,u,m,f),r=c(r,q,t,h),g.push(new THREE.Vector2(n,r));break;case "bezierCurveTo":f=v[4];h=v[5];m=v[0];t=v[1];k=v[2];l=v[3];0<g.length?(n=g[g.length-1],u=n.x,q=n.y):(n=this.actions[p-1].args,u=n[n.length-2],q=n[n.length-1]);for(v=1;v<=b;v++)r=v/b,n=d(r,u,m,k,f),r=d(r,q,t,l,h),g.push(new THREE.Vector2(n,r));break;case "splineThru":n=this.actions[p-1].args;r=[new THREE.Vector2(n[n.length-2],n[n.length-1])];n=b*v[0].length;r=r.concat(v[0]);r=new THREE.SplineCurve(r);for(v=1;v<=n;v++)g.push(r.getPointAt(v/
n));break;case "arc":f=v[0];h=v[1];t=v[2];k=v[3];n=v[4];m=!!v[5];u=n-k;q=2*b;for(v=1;v<=q;v++)r=v/q,m||(r=1-r),r=k+r*u,n=f+t*Math.cos(r),r=h+t*Math.sin(r),g.push(new THREE.Vector2(n,r));break;case "ellipse":f=v[0];h=v[1];t=v[2];l=v[3];k=v[4];n=v[5];m=!!v[6];var y=v[7];u=n-k;q=2*b;var A,x;0!==y&&(A=Math.cos(y),x=Math.sin(y));for(v=1;v<=q;v++){r=v/q;m||(r=1-r);r=k+r*u;n=f+t*Math.cos(r);r=h+l*Math.sin(r);if(0!==y){var z=n;n=(z-f)*A-(r-h)*x+f;r=(z-f)*x+(r-h)*A+h}g.push(new THREE.Vector2(n,r))}}}b=g[g.length-
1];Math.abs(b.x-g[0].x)<Number.EPSILON&&Math.abs(b.y-g[0].y)<Number.EPSILON&&g.splice(g.length-1,1);this.autoClose&&g.push(g[0]);return g},toShapes:function(b,c){function d(b){for(var c=[],f=0,d=b.length;f<d;f++){var g=b[f],h=new THREE.Shape;h.actions=g.actions;h.curves=g.curves;c.push(h)}return c}function g(b,c){for(var f=c.length,d=!1,g=f-1,h=0;h<f;g=h++){var k=c[g],l=c[h],m=l.x-k.x,n=l.y-k.y;if(Math.abs(n)>Number.EPSILON){if(0>n&&(k=c[h],m=-m,l=c[g],n=-n),!(b.y<k.y||b.y>l.y))if(b.y===k.y){if(b.x===
k.x)return!0}else{g=n*(b.x-k.x)-m*(b.y-k.y);if(0===g)return!0;0>g||(d=!d)}}else if(b.y===k.y&&(l.x<=b.x&&b.x<=k.x||k.x<=b.x&&b.x<=l.x))return!0}return d}var f=THREE.ShapeUtils.isClockWise,h=function(b){for(var c=[],f=new THREE.Path,d=0,g=b.length;d<g;d++){var h=b[d],k=h.args,h=h.action;"moveTo"===h&&0!==f.actions.length&&(c.push(f),f=new THREE.Path);f[h].apply(f,k)}0!==f.actions.length&&c.push(f);return c}(this.actions);if(0===h.length)return[];if(!0===c)return d(h);var k,l,m,t=[];if(1===h.length)return l=
h[0],m=new THREE.Shape,m.actions=l.actions,m.curves=l.curves,t.push(m),t;var u=!f(h[0].getPoints()),u=b?!u:u;m=[];var q=[],n=[],r=0,p;q[r]=void 0;n[r]=[];for(var w=0,v=h.length;w<v;w++)l=h[w],p=l.getPoints(),k=f(p),(k=b?!k:k)?(!u&&q[r]&&r++,q[r]={s:new THREE.Shape,p:p},q[r].s.actions=l.actions,q[r].s.curves=l.curves,u&&r++,n[r]=[]):n[r].push({h:l,p:p[0]});if(!q[0])return d(h);if(1<q.length){w=!1;l=[];f=0;for(h=q.length;f<h;f++)m[f]=[];f=0;for(h=q.length;f<h;f++)for(k=n[f],u=0;u<k.length;u++){r=k[u];
p=!0;for(v=0;v<q.length;v++)g(r.p,q[v].p)&&(f!==v&&l.push({froms:f,tos:v,hole:u}),p?(p=!1,m[v].push(r)):w=!0);p&&m[f].push(r)}0<l.length&&(w||(n=m))}w=0;for(f=q.length;w<f;w++)for(m=q[w].s,t.push(m),l=n[w],h=0,k=l.length;h<k;h++)m.holes.push(l[h].h);return t}});THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};
THREE.Shape.prototype=Object.assign(Object.create(THREE.Path.prototype),{constructor:THREE.Shape,extrude:function(b){return new THREE.ExtrudeGeometry(this,b)},makeGeometry:function(b){return new THREE.ShapeGeometry(this,b)},getPointsHoles:function(b){for(var c=[],d=0,g=this.holes.length;d<g;d++)c[d]=this.holes[d].getPoints(b);return c},extractAllPoints:function(b){return{shape:this.getPoints(b),holes:this.getPointsHoles(b)}},extractPoints:function(b){return this.extractAllPoints(b)}});
THREE.LineCurve=function(b,c){this.v1=b;this.v2=c};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.constructor=THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(b){var c=this.v2.clone().sub(this.v1);c.multiplyScalar(b).add(this.v1);return c};THREE.LineCurve.prototype.getPointAt=function(b){return this.getPoint(b)};THREE.LineCurve.prototype.getTangent=function(b){return this.v2.clone().sub(this.v1).normalize()};
THREE.QuadraticBezierCurve=function(b,c,d){this.v0=b;this.v1=c;this.v2=d};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve;THREE.QuadraticBezierCurve.prototype.getPoint=function(b){var c=THREE.ShapeUtils.b2;return new THREE.Vector2(c(b,this.v0.x,this.v1.x,this.v2.x),c(b,this.v0.y,this.v1.y,this.v2.y))};
THREE.QuadraticBezierCurve.prototype.getTangent=function(b){var c=THREE.CurveUtils.tangentQuadraticBezier;return(new THREE.Vector2(c(b,this.v0.x,this.v1.x,this.v2.x),c(b,this.v0.y,this.v1.y,this.v2.y))).normalize()};THREE.CubicBezierCurve=function(b,c,d,g){this.v0=b;this.v1=c;this.v2=d;this.v3=g};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;
THREE.CubicBezierCurve.prototype.getPoint=function(b){var c=THREE.ShapeUtils.b3;return new THREE.Vector2(c(b,this.v0.x,this.v1.x,this.v2.x,this.v3.x),c(b,this.v0.y,this.v1.y,this.v2.y,this.v3.y))};THREE.CubicBezierCurve.prototype.getTangent=function(b){var c=THREE.CurveUtils.tangentCubicBezier;return(new THREE.Vector2(c(b,this.v0.x,this.v1.x,this.v2.x,this.v3.x),c(b,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()};THREE.SplineCurve=function(b){this.points=void 0==b?[]:b};
THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;THREE.SplineCurve.prototype.getPoint=function(b){var c=this.points;b*=c.length-1;var d=Math.floor(b);b-=d;var g=c[0===d?d:d-1],f=c[d],h=c[d>c.length-2?c.length-1:d+1],c=c[d>c.length-3?c.length-1:d+2],d=THREE.CurveUtils.interpolate;return new THREE.Vector2(d(g.x,f.x,h.x,c.x,b),d(g.y,f.y,h.y,c.y,b))};
THREE.EllipseCurve=function(b,c,d,g,f,h,k,l){this.aX=b;this.aY=c;this.xRadius=d;this.yRadius=g;this.aStartAngle=f;this.aEndAngle=h;this.aClockwise=k;this.aRotation=l||0};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;
THREE.EllipseCurve.prototype.getPoint=function(b){var c=this.aEndAngle-this.aStartAngle;0>c&&(c+=2*Math.PI);c>2*Math.PI&&(c-=2*Math.PI);c=!0===this.aClockwise?this.aEndAngle+(1-b)*(2*Math.PI-c):this.aStartAngle+b*c;b=this.aX+this.xRadius*Math.cos(c);var d=this.aY+this.yRadius*Math.sin(c);if(0!==this.aRotation){var c=Math.cos(this.aRotation),g=Math.sin(this.aRotation),f=b;b=(f-this.aX)*c-(d-this.aY)*g+this.aX;d=(f-this.aX)*g+(d-this.aY)*c+this.aY}return new THREE.Vector2(b,d)};
THREE.ArcCurve=function(b,c,d,g,f,h){THREE.EllipseCurve.call(this,b,c,d,d,g,f,h)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;THREE.LineCurve3=THREE.Curve.create(function(b,c){this.v1=b;this.v2=c},function(b){var c=new THREE.Vector3;c.subVectors(this.v2,this.v1);c.multiplyScalar(b);c.add(this.v1);return c});
THREE.QuadraticBezierCurve3=THREE.Curve.create(function(b,c,d){this.v0=b;this.v1=c;this.v2=d},function(b){var c=THREE.ShapeUtils.b2;return new THREE.Vector3(c(b,this.v0.x,this.v1.x,this.v2.x),c(b,this.v0.y,this.v1.y,this.v2.y),c(b,this.v0.z,this.v1.z,this.v2.z))});
THREE.CubicBezierCurve3=THREE.Curve.create(function(b,c,d,g){this.v0=b;this.v1=c;this.v2=d;this.v3=g},function(b){var c=THREE.ShapeUtils.b3;return new THREE.Vector3(c(b,this.v0.x,this.v1.x,this.v2.x,this.v3.x),c(b,this.v0.y,this.v1.y,this.v2.y,this.v3.y),c(b,this.v0.z,this.v1.z,this.v2.z,this.v3.z))});
THREE.SplineCurve3=THREE.Curve.create(function(b){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==b?[]:b},function(b){var c=this.points;b*=c.length-1;var d=Math.floor(b);b-=d;var g=c[0==d?d:d-1],f=c[d],h=c[d>c.length-2?c.length-1:d+1],c=c[d>c.length-3?c.length-1:d+2],d=THREE.CurveUtils.interpolate;return new THREE.Vector3(d(g.x,f.x,h.x,c.x,b),d(g.y,f.y,h.y,c.y,b),d(g.z,f.z,h.z,c.z,b))});
THREE.CatmullRomCurve3=function(){function b(){}var c=new THREE.Vector3,d=new b,g=new b,f=new b;b.prototype.init=function(b,c,f,d){this.c0=b;this.c1=f;this.c2=-3*b+3*c-2*f-d;this.c3=2*b-2*c+f+d};b.prototype.initNonuniformCatmullRom=function(b,c,f,d,g,u,q){b=((c-b)/g-(f-b)/(g+u)+(f-c)/u)*u;d=((f-c)/u-(d-c)/(u+q)+(d-f)/q)*u;this.init(c,f,b,d)};b.prototype.initCatmullRom=function(b,c,f,d,g){this.init(c,f,g*(f-b),g*(d-c))};b.prototype.calc=function(b){var c=b*b;return this.c0+this.c1*b+this.c2*c+this.c3*
c*b};return THREE.Curve.create(function(b){this.points=b||[];this.closed=!1},function(b){var k=this.points,l,m;m=k.length;2>m&&console.log("duh, you need at least 2 points");b*=m-(this.closed?0:1);l=Math.floor(b);b-=l;this.closed?l+=0<l?0:(Math.floor(Math.abs(l)/k.length)+1)*k.length:0===b&&l===m-1&&(l=m-2,b=1);var t,u,q;this.closed||0<l?t=k[(l-1)%m]:(c.subVectors(k[0],k[1]).add(k[0]),t=c);u=k[l%m];q=k[(l+1)%m];this.closed||l+2<m?k=k[(l+2)%m]:(c.subVectors(k[m-1],k[m-2]).add(k[m-1]),k=c);if(void 0===
this.type||"centripetal"===this.type||"chordal"===this.type){var n="chordal"===this.type?.5:.25;m=Math.pow(t.distanceToSquared(u),n);l=Math.pow(u.distanceToSquared(q),n);n=Math.pow(q.distanceToSquared(k),n);1E-4>l&&(l=1);1E-4>m&&(m=l);1E-4>n&&(n=l);d.initNonuniformCatmullRom(t.x,u.x,q.x,k.x,m,l,n);g.initNonuniformCatmullRom(t.y,u.y,q.y,k.y,m,l,n);f.initNonuniformCatmullRom(t.z,u.z,q.z,k.z,m,l,n)}else"catmullrom"===this.type&&(m=void 0!==this.tension?this.tension:.5,d.initCatmullRom(t.x,u.x,q.x,k.x,
m),g.initCatmullRom(t.y,u.y,q.y,k.y,m),f.initCatmullRom(t.z,u.z,q.z,k.z,m));return new THREE.Vector3(d.calc(b),g.calc(b),f.calc(b))})}();THREE.ClosedSplineCurve3=function(b){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.");THREE.CatmullRomCurve3.call(this,b);this.type="catmullrom";this.closed=!0};THREE.ClosedSplineCurve3.prototype=Object.create(THREE.CatmullRomCurve3.prototype);
THREE.BoxGeometry=function(b,c,d,g,f,h){THREE.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:b,height:c,depth:d,widthSegments:g,heightSegments:f,depthSegments:h};this.fromBufferGeometry(new THREE.BoxBufferGeometry(b,c,d,g,f,h));this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry;THREE.CubeGeometry=THREE.BoxGeometry;
THREE.BoxBufferGeometry=function(b,c,d,g,f,h){function k(b,c,f,d,g,h,k,m,t,L,J){var K=h/t,M=k/L,P=h/2,N=k/2,S=m/2;k=t+1;for(var U=L+1,W=h=0,V=new THREE.Vector3,X=0;X<U;X++)for(var ea=X*M-N,da=0;da<k;da++)V[b]=(da*K-P)*d,V[c]=ea*g,V[f]=S,q[p]=V.x,q[p+1]=V.y,q[p+2]=V.z,V[b]=0,V[c]=0,V[f]=0<m?1:-1,n[p]=V.x,n[p+1]=V.y,n[p+2]=V.z,r[w]=da/t,r[w+1]=1-X/L,p+=3,w+=2,h+=1;for(X=0;X<L;X++)for(da=0;da<t;da++)b=y+da+k*(X+1),c=y+(da+1)+k*(X+1),f=y+(da+1)+k*X,u[v]=y+da+k*X,u[v+1]=b,u[v+2]=f,u[v+3]=b,u[v+4]=c,u[v+
5]=f,v+=6,W+=6;l.addGroup(A,W,J);A+=W;y+=h}THREE.BufferGeometry.call(this);this.type="BoxBufferGeometry";this.parameters={width:b,height:c,depth:d,widthSegments:g,heightSegments:f,depthSegments:h};var l=this;g=Math.floor(g)||1;f=Math.floor(f)||1;h=Math.floor(h)||1;var m=function(b,c,f){b=0+(b+1)*(c+1)*2+(b+1)*(f+1)*2;return b+=(f+1)*(c+1)*2}(g,f,h),t=function(b,c,f){b=0+b*c*2+b*f*2;b+=f*c*2;return 6*b}(g,f,h),u=new (65535<t?Uint32Array:Uint16Array)(t),q=new Float32Array(3*m),n=new Float32Array(3*
m),r=new Float32Array(2*m),p=0,w=0,v=0,y=0,A=0;k("z","y","x",-1,-1,d,c,b,h,f,0);k("z","y","x",1,-1,d,c,-b,h,f,1);k("x","z","y",1,1,b,d,c,g,h,2);k("x","z","y",1,-1,b,d,-c,g,h,3);k("x","y","z",1,-1,b,c,d,g,f,4);k("x","y","z",-1,-1,b,c,-d,g,f,5);this.setIndex(new THREE.BufferAttribute(u,1));this.addAttribute("position",new THREE.BufferAttribute(q,3));this.addAttribute("normal",new THREE.BufferAttribute(n,3));this.addAttribute("uv",new THREE.BufferAttribute(r,2))};THREE.BoxBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.BoxBufferGeometry.prototype.constructor=THREE.BoxBufferGeometry;THREE.CircleGeometry=function(b,c,d,g){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:b,segments:c,thetaStart:d,thetaLength:g};this.fromBufferGeometry(new THREE.CircleBufferGeometry(b,c,d,g))};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;
THREE.CircleBufferGeometry=function(b,c,d,g){THREE.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:b,segments:c,thetaStart:d,thetaLength:g};b=b||50;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?d:0;g=void 0!==g?g:2*Math.PI;var f=c+2,h=new Float32Array(3*f),k=new Float32Array(3*f),f=new Float32Array(2*f);k[2]=1;f[0]=.5;f[1]=.5;for(var l=0,m=3,t=2;l<=c;l++,m+=3,t+=2){var u=d+l/c*g;h[m]=b*Math.cos(u);h[m+1]=b*Math.sin(u);k[m+2]=1;f[t]=(h[m]/b+1)/2;f[t+1]=(h[m+1]/b+1)/2}d=
[];for(m=1;m<=c;m++)d.push(m,m+1,0);this.setIndex(new THREE.BufferAttribute(new Uint16Array(d),1));this.addAttribute("position",new THREE.BufferAttribute(h,3));this.addAttribute("normal",new THREE.BufferAttribute(k,3));this.addAttribute("uv",new THREE.BufferAttribute(f,2));this.boundingSphere=new THREE.Sphere(new THREE.Vector3,b)};THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;
THREE.CylinderBufferGeometry=function(b,c,d,g,f,h,k,l){function m(f){var d,h,m,n=new THREE.Vector2,q=new THREE.Vector3,u=0,x=!0===f?b:c,K=!0===f?1:-1;h=y;for(d=1;d<=g;d++)p.setXYZ(y,0,z*K,0),w.setXYZ(y,0,K,0),n.x=.5,n.y=.5,v.setXY(y,n.x,n.y),y++;m=y;for(d=0;d<=g;d++){var M=d/g*l+k,P=Math.cos(M),M=Math.sin(M);q.x=x*M;q.y=z*K;q.z=x*P;p.setXYZ(y,q.x,q.y,q.z);w.setXYZ(y,0,K,0);n.x=.5*P+.5;n.y=.5*M*K+.5;v.setXY(y,n.x,n.y);y++}for(d=0;d<g;d++)n=h+d,q=m+d,!0===f?(r.setX(A,q),A++,r.setX(A,q+1)):(r.setX(A,
q+1),A++,r.setX(A,q)),A++,r.setX(A,n),A++,u+=3;t.addGroup(D,u,!0===f?1:2);D+=u}THREE.BufferGeometry.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:b,radiusBottom:c,height:d,radialSegments:g,heightSegments:f,openEnded:h,thetaStart:k,thetaLength:l};var t=this;b=void 0!==b?b:20;c=void 0!==c?c:20;d=void 0!==d?d:100;g=Math.floor(g)||8;f=Math.floor(f)||1;h=void 0!==h?h:!1;k=void 0!==k?k:0;l=void 0!==l?l:2*Math.PI;var u=0;!1===h&&(0<b&&u++,0<c&&u++);var q=function(){var b=(g+1)*
(f+1);!1===h&&(b+=(g+1)*u+g*u);return b}(),n=function(){var b=g*f*6;!1===h&&(b+=g*u*3);return b}(),r=new THREE.BufferAttribute(new (65535<n?Uint32Array:Uint16Array)(n),1),p=new THREE.BufferAttribute(new Float32Array(3*q),3),w=new THREE.BufferAttribute(new Float32Array(3*q),3),v=new THREE.BufferAttribute(new Float32Array(2*q),2),y=0,A=0,x=[],z=d/2,D=0;(function(){var h,m,n=new THREE.Vector3,q=new THREE.Vector3,u=0,I=(c-b)/d;for(m=0;m<=f;m++){var L=[],J=m/f,K=J*(c-b)+b;for(h=0;h<=g;h++){var M=h/g;q.x=
K*Math.sin(M*l+k);q.y=-J*d+z;q.z=K*Math.cos(M*l+k);p.setXYZ(y,q.x,q.y,q.z);n.copy(q);if(0===b&&0===m||0===c&&m===f)n.x=Math.sin(M*l+k),n.z=Math.cos(M*l+k);n.setY(Math.sqrt(n.x*n.x+n.z*n.z)*I).normalize();w.setXYZ(y,n.x,n.y,n.z);v.setXY(y,M,1-J);L.push(y);y++}x.push(L)}for(h=0;h<g;h++)for(m=0;m<f;m++)n=x[m+1][h],q=x[m+1][h+1],I=x[m][h+1],r.setX(A,x[m][h]),A++,r.setX(A,n),A++,r.setX(A,I),A++,r.setX(A,n),A++,r.setX(A,q),A++,r.setX(A,I),A++,u+=6;t.addGroup(D,u,0);D+=u})();!1===h&&(0<b&&m(!0),0<c&&m(!1));
this.setIndex(r);this.addAttribute("position",p);this.addAttribute("normal",w);this.addAttribute("uv",v)};THREE.CylinderBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CylinderBufferGeometry.prototype.constructor=THREE.CylinderBufferGeometry;
THREE.CylinderGeometry=function(b,c,d,g,f,h,k,l){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:b,radiusBottom:c,height:d,radialSegments:g,heightSegments:f,openEnded:h,thetaStart:k,thetaLength:l};this.fromBufferGeometry(new THREE.CylinderBufferGeometry(b,c,d,g,f,h,k,l));this.mergeVertices()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;
THREE.ConeBufferGeometry=function(b,c,d,g,f,h,k){THREE.CylinderBufferGeometry.call(this,0,b,c,d,g,f,h,k);this.type="ConeBufferGeometry";this.parameters={radius:b,height:c,radialSegments:d,heightSegments:g,thetaStart:h,thetaLength:k}};THREE.ConeBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.ConeBufferGeometry.prototype.constructor=THREE.ConeBufferGeometry;
THREE.ConeGeometry=function(b,c,d,g,f,h,k){THREE.CylinderGeometry.call(this,0,b,c,d,g,f,h,k);this.type="ConeGeometry";this.parameters={radius:b,height:c,radialSegments:d,heightSegments:g,openEnded:f,thetaStart:h,thetaLength:k}};THREE.ConeGeometry.prototype=Object.create(THREE.CylinderGeometry.prototype);THREE.ConeGeometry.prototype.constructor=THREE.ConeGeometry;
THREE.EdgesGeometry=function(b,c){function d(b,c){return b-c}THREE.BufferGeometry.call(this);var g=Math.cos(THREE.Math.DEG2RAD*(void 0!==c?c:1)),f=[0,0],h={},k=["a","b","c"],l;b instanceof THREE.BufferGeometry?(l=new THREE.Geometry,l.fromBufferGeometry(b)):l=b.clone();l.mergeVertices();l.computeFaceNormals();var m=l.vertices;l=l.faces;for(var t=0,u=l.length;t<u;t++)for(var q=l[t],n=0;3>n;n++){f[0]=q[k[n]];f[1]=q[k[(n+1)%3]];f.sort(d);var r=f.toString();void 0===h[r]?h[r]={vert1:f[0],vert2:f[1],face1:t,
face2:void 0}:h[r].face2=t}f=[];for(r in h)if(k=h[r],void 0===k.face2||l[k.face1].normal.dot(l[k.face2].normal)<=g)t=m[k.vert1],f.push(t.x),f.push(t.y),f.push(t.z),t=m[k.vert2],f.push(t.x),f.push(t.y),f.push(t.z);this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(f),3))};THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;
THREE.ExtrudeGeometry=function(b,c){"undefined"!==typeof b&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",b=Array.isArray(b)?b:[b],this.addShapeList(b,c),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(b,c){for(var d=b.length,g=0;g<d;g++)this.addShape(b[g],c)};
THREE.ExtrudeGeometry.prototype.addShape=function(b,c){function d(b,c,f){c||console.error("THREE.ExtrudeGeometry: vec does not exist");return c.clone().multiplyScalar(f).add(b)}function g(b,c,f){var d=1,d=b.x-c.x,g=b.y-c.y,h=f.x-b.x,k=f.y-b.y,l=d*d+g*g;if(Math.abs(d*k-g*h)>Number.EPSILON){var m=Math.sqrt(l),n=Math.sqrt(h*h+k*k),l=c.x-g/m;c=c.y+d/m;h=((f.x-k/n-l)*k-(f.y+h/n-c)*h)/(d*k-g*h);f=l+d*h-b.x;b=c+g*h-b.y;d=f*f+b*b;if(2>=d)return new THREE.Vector2(f,b);d=Math.sqrt(d/2)}else b=!1,d>Number.EPSILON?
h>Number.EPSILON&&(b=!0):d<-Number.EPSILON?h<-Number.EPSILON&&(b=!0):Math.sign(g)===Math.sign(k)&&(b=!0),b?(f=-g,b=d,d=Math.sqrt(l)):(f=d,b=g,d=Math.sqrt(l/2));return new THREE.Vector2(f/d,b/d)}function f(b,c){var f,d;for(X=b.length;0<=--X;){f=X;d=X-1;0>d&&(d=b.length-1);for(var g=0,h=r+2*u,g=0;g<h;g++){var k=U*g,l=U*(g+1),m=c+f+k,k=c+d+k,n=c+d+l,l=c+f+l,m=m+H,k=k+H,n=n+H,l=l+H;G.faces.push(new THREE.Face3(m,k,l,null,null,1));G.faces.push(new THREE.Face3(k,n,l,null,null,1));m=y.generateSideWallUV(G,
m,k,n,l);G.faceVertexUvs[0].push([m[0],m[1],m[3]]);G.faceVertexUvs[0].push([m[1],m[2],m[3]])}}}function h(b,c,f){G.vertices.push(new THREE.Vector3(b,c,f))}function k(b,c,f){b+=H;c+=H;f+=H;G.faces.push(new THREE.Face3(b,c,f,null,null,0));b=y.generateTopUV(G,b,c,f);G.faceVertexUvs[0].push(b)}var l=void 0!==c.amount?c.amount:100,m=void 0!==c.bevelThickness?c.bevelThickness:6,t=void 0!==c.bevelSize?c.bevelSize:m-2,u=void 0!==c.bevelSegments?c.bevelSegments:3,q=void 0!==c.bevelEnabled?c.bevelEnabled:!0,
n=void 0!==c.curveSegments?c.curveSegments:12,r=void 0!==c.steps?c.steps:1,p=c.extrudePath,w,v=!1,y=void 0!==c.UVGenerator?c.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,A,x,z,D;p&&(w=p.getSpacedPoints(r),v=!0,q=!1,A=void 0!==c.frames?c.frames:new THREE.TubeGeometry.FrenetFrames(p,r,!1),x=new THREE.Vector3,z=new THREE.Vector3,D=new THREE.Vector3);q||(t=m=u=0);var B,C,E,G=this,H=this.vertices.length,p=b.extractPoints(n),n=p.shape,I=p.holes;if(p=!THREE.ShapeUtils.isClockWise(n)){n=n.reverse();
C=0;for(E=I.length;C<E;C++)B=I[C],THREE.ShapeUtils.isClockWise(B)&&(I[C]=B.reverse());p=!1}var L=THREE.ShapeUtils.triangulateShape(n,I),J=n;C=0;for(E=I.length;C<E;C++)B=I[C],n=n.concat(B);var K,M,P,N,S,U=n.length,W,V=L.length,p=[],X=0;P=J.length;K=P-1;for(M=X+1;X<P;X++,K++,M++)K===P&&(K=0),M===P&&(M=0),p[X]=g(J[X],J[K],J[M]);var ea=[],da,R=p.concat();C=0;for(E=I.length;C<E;C++){B=I[C];da=[];X=0;P=B.length;K=P-1;for(M=X+1;X<P;X++,K++,M++)K===P&&(K=0),M===P&&(M=0),da[X]=g(B[X],B[K],B[M]);ea.push(da);
R=R.concat(da)}for(K=0;K<u;K++){P=K/u;N=m*(1-P);M=t*Math.sin(P*Math.PI/2);X=0;for(P=J.length;X<P;X++)S=d(J[X],p[X],M),h(S.x,S.y,-N);C=0;for(E=I.length;C<E;C++)for(B=I[C],da=ea[C],X=0,P=B.length;X<P;X++)S=d(B[X],da[X],M),h(S.x,S.y,-N)}M=t;for(X=0;X<U;X++)S=q?d(n[X],R[X],M):n[X],v?(z.copy(A.normals[0]).multiplyScalar(S.x),x.copy(A.binormals[0]).multiplyScalar(S.y),D.copy(w[0]).add(z).add(x),h(D.x,D.y,D.z)):h(S.x,S.y,0);for(P=1;P<=r;P++)for(X=0;X<U;X++)S=q?d(n[X],R[X],M):n[X],v?(z.copy(A.normals[P]).multiplyScalar(S.x),
x.copy(A.binormals[P]).multiplyScalar(S.y),D.copy(w[P]).add(z).add(x),h(D.x,D.y,D.z)):h(S.x,S.y,l/r*P);for(K=u-1;0<=K;K--){P=K/u;N=m*(1-P);M=t*Math.sin(P*Math.PI/2);X=0;for(P=J.length;X<P;X++)S=d(J[X],p[X],M),h(S.x,S.y,l+N);C=0;for(E=I.length;C<E;C++)for(B=I[C],da=ea[C],X=0,P=B.length;X<P;X++)S=d(B[X],da[X],M),v?h(S.x,S.y+w[r-1].y,w[r-1].x+N):h(S.x,S.y,l+N)}(function(){if(q){var b;b=0*U;for(X=0;X<V;X++)W=L[X],k(W[2]+b,W[1]+b,W[0]+b);b=r+2*u;b*=U;for(X=0;X<V;X++)W=L[X],k(W[0]+b,W[1]+b,W[2]+b)}else{for(X=
0;X<V;X++)W=L[X],k(W[2],W[1],W[0]);for(X=0;X<V;X++)W=L[X],k(W[0]+U*r,W[1]+U*r,W[2]+U*r)}})();(function(){var b=0;f(J,b);b+=J.length;C=0;for(E=I.length;C<E;C++)B=I[C],f(B,b),b+=B.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(b,c,d,g){b=b.vertices;c=b[c];d=b[d];g=b[g];return[new THREE.Vector2(c.x,c.y),new THREE.Vector2(d.x,d.y),new THREE.Vector2(g.x,g.y)]},generateSideWallUV:function(b,c,d,g,f){b=b.vertices;c=b[c];d=b[d];g=b[g];f=b[f];return.01>Math.abs(c.y-d.y)?[new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z),new THREE.Vector2(g.x,1-g.z),new THREE.Vector2(f.x,1-f.z)]:[new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,1-d.z),new THREE.Vector2(g.y,
1-g.z),new THREE.Vector2(f.y,1-f.z)]}};THREE.ShapeGeometry=function(b,c){THREE.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(b)&&(b=[b]);this.addShapeList(b,c);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;THREE.ShapeGeometry.prototype.addShapeList=function(b,c){for(var d=0,g=b.length;d<g;d++)this.addShape(b[d],c);return this};
THREE.ShapeGeometry.prototype.addShape=function(b,c){void 0===c&&(c={});var d=c.material,g=void 0===c.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:c.UVGenerator,f,h,k,l=this.vertices.length;f=b.extractPoints(void 0!==c.curveSegments?c.curveSegments:12);var m=f.shape,t=f.holes;if(!THREE.ShapeUtils.isClockWise(m))for(m=m.reverse(),f=0,h=t.length;f<h;f++)k=t[f],THREE.ShapeUtils.isClockWise(k)&&(t[f]=k.reverse());var u=THREE.ShapeUtils.triangulateShape(m,t);f=0;for(h=t.length;f<h;f++)k=t[f],m=m.concat(k);
t=m.length;h=u.length;for(f=0;f<t;f++)k=m[f],this.vertices.push(new THREE.Vector3(k.x,k.y,0));for(f=0;f<h;f++)t=u[f],m=t[0]+l,k=t[1]+l,t=t[2]+l,this.faces.push(new THREE.Face3(m,k,t,null,null,d)),this.faceVertexUvs[0].push(g.generateTopUV(this,m,k,t))};
THREE.LatheBufferGeometry=function(b,c,d,g){THREE.BufferGeometry.call(this);this.type="LatheBufferGeometry";this.parameters={points:b,segments:c,phiStart:d,phiLength:g};c=Math.floor(c)||12;d=d||0;g=g||2*Math.PI;g=THREE.Math.clamp(g,0,2*Math.PI);for(var f=(c+1)*b.length,h=c*b.length*6,k=new THREE.BufferAttribute(new (65535<h?Uint32Array:Uint16Array)(h),1),l=new THREE.BufferAttribute(new Float32Array(3*f),3),m=new THREE.BufferAttribute(new Float32Array(2*f),2),t=0,u=0,q=1/c,n=new THREE.Vector3,r=new THREE.Vector2,
f=0;f<=c;f++)for(var h=d+f*q*g,p=Math.sin(h),w=Math.cos(h),h=0;h<=b.length-1;h++)n.x=b[h].x*p,n.y=b[h].y,n.z=b[h].x*w,l.setXYZ(t,n.x,n.y,n.z),r.x=f/c,r.y=h/(b.length-1),m.setXY(t,r.x,r.y),t++;for(f=0;f<c;f++)for(h=0;h<b.length-1;h++)d=h+f*b.length,t=d+b.length,q=d+b.length+1,n=d+1,k.setX(u,d),u++,k.setX(u,t),u++,k.setX(u,n),u++,k.setX(u,t),u++,k.setX(u,q),u++,k.setX(u,n),u++;this.setIndex(k);this.addAttribute("position",l);this.addAttribute("uv",m);this.computeVertexNormals();if(g===2*Math.PI)for(g=
this.attributes.normal.array,k=new THREE.Vector3,l=new THREE.Vector3,m=new THREE.Vector3,d=c*b.length*3,h=f=0;f<b.length;f++,h+=3)k.x=g[h+0],k.y=g[h+1],k.z=g[h+2],l.x=g[d+h+0],l.y=g[d+h+1],l.z=g[d+h+2],m.addVectors(k,l).normalize(),g[h+0]=g[d+h+0]=m.x,g[h+1]=g[d+h+1]=m.y,g[h+2]=g[d+h+2]=m.z};THREE.LatheBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.LatheBufferGeometry.prototype.constructor=THREE.LatheBufferGeometry;
THREE.LatheGeometry=function(b,c,d,g){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:b,segments:c,phiStart:d,phiLength:g};this.fromBufferGeometry(new THREE.LatheBufferGeometry(b,c,d,g));this.mergeVertices()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;
THREE.PlaneGeometry=function(b,c,d,g){THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:b,height:c,widthSegments:d,heightSegments:g};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(b,c,d,g))};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;
THREE.PlaneBufferGeometry=function(b,c,d,g){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:b,height:c,widthSegments:d,heightSegments:g};var f=b/2,h=c/2;d=Math.floor(d)||1;g=Math.floor(g)||1;var k=d+1,l=g+1,m=b/d,t=c/g;c=new Float32Array(k*l*3);b=new Float32Array(k*l*3);for(var u=new Float32Array(k*l*2),q=0,n=0,r=0;r<l;r++)for(var p=r*t-h,w=0;w<k;w++)c[q]=w*m-f,c[q+1]=-p,b[q+2]=1,u[n]=w/d,u[n+1]=1-r/g,q+=3,n+=2;q=0;f=new (65535<c.length/3?Uint32Array:Uint16Array)(d*
g*6);for(r=0;r<g;r++)for(w=0;w<d;w++)h=w+k*(r+1),l=w+1+k*(r+1),m=w+1+k*r,f[q]=w+k*r,f[q+1]=h,f[q+2]=m,f[q+3]=h,f[q+4]=l,f[q+5]=m,q+=6;this.setIndex(new THREE.BufferAttribute(f,1));this.addAttribute("position",new THREE.BufferAttribute(c,3));this.addAttribute("normal",new THREE.BufferAttribute(b,3));this.addAttribute("uv",new THREE.BufferAttribute(u,2))};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;
THREE.RingBufferGeometry=function(b,c,d,g,f,h){THREE.BufferGeometry.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:b,outerRadius:c,thetaSegments:d,phiSegments:g,thetaStart:f,thetaLength:h};b=b||20;c=c||50;f=void 0!==f?f:0;h=void 0!==h?h:2*Math.PI;d=void 0!==d?Math.max(3,d):8;g=void 0!==g?Math.max(1,g):1;var k=(d+1)*(g+1),l=d*g*6,l=new THREE.BufferAttribute(new (65535<l?Uint32Array:Uint16Array)(l),1),m=new THREE.BufferAttribute(new Float32Array(3*k),3),t=new THREE.BufferAttribute(new Float32Array(3*
k),3),k=new THREE.BufferAttribute(new Float32Array(2*k),2),u=0,q=0,n,r=b,p=(c-b)/g,w=new THREE.Vector3,v=new THREE.Vector2,y;for(b=0;b<=g;b++){for(y=0;y<=d;y++)n=f+y/d*h,w.x=r*Math.cos(n),w.y=r*Math.sin(n),m.setXYZ(u,w.x,w.y,w.z),t.setXYZ(u,0,0,1),v.x=(w.x/c+1)/2,v.y=(w.y/c+1)/2,k.setXY(u,v.x,v.y),u++;r+=p}for(b=0;b<g;b++)for(c=b*(d+1),y=0;y<d;y++)f=n=y+c,h=n+d+1,u=n+d+2,n+=1,l.setX(q,f),q++,l.setX(q,h),q++,l.setX(q,u),q++,l.setX(q,f),q++,l.setX(q,u),q++,l.setX(q,n),q++;this.setIndex(l);this.addAttribute("position",
m);this.addAttribute("normal",t);this.addAttribute("uv",k)};THREE.RingBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.RingBufferGeometry.prototype.constructor=THREE.RingBufferGeometry;THREE.RingGeometry=function(b,c,d,g,f,h){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:b,outerRadius:c,thetaSegments:d,phiSegments:g,thetaStart:f,thetaLength:h};this.fromBufferGeometry(new THREE.RingBufferGeometry(b,c,d,g,f,h))};
THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;THREE.SphereGeometry=function(b,c,d,g,f,h,k){THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:b,widthSegments:c,heightSegments:d,phiStart:g,phiLength:f,thetaStart:h,thetaLength:k};this.fromBufferGeometry(new THREE.SphereBufferGeometry(b,c,d,g,f,h,k))};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;
THREE.SphereBufferGeometry=function(b,c,d,g,f,h,k){THREE.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:b,widthSegments:c,heightSegments:d,phiStart:g,phiLength:f,thetaStart:h,thetaLength:k};b=b||50;c=Math.max(3,Math.floor(c)||8);d=Math.max(2,Math.floor(d)||6);g=void 0!==g?g:0;f=void 0!==f?f:2*Math.PI;h=void 0!==h?h:0;k=void 0!==k?k:Math.PI;for(var l=h+k,m=(c+1)*(d+1),t=new THREE.BufferAttribute(new Float32Array(3*m),3),u=new THREE.BufferAttribute(new Float32Array(3*
m),3),m=new THREE.BufferAttribute(new Float32Array(2*m),2),q=0,n=[],r=new THREE.Vector3,p=0;p<=d;p++){for(var w=[],v=p/d,y=0;y<=c;y++){var A=y/c,x=-b*Math.cos(g+A*f)*Math.sin(h+v*k),z=b*Math.cos(h+v*k),D=b*Math.sin(g+A*f)*Math.sin(h+v*k);r.set(x,z,D).normalize();t.setXYZ(q,x,z,D);u.setXYZ(q,r.x,r.y,r.z);m.setXY(q,A,1-v);w.push(q);q++}n.push(w)}g=[];for(p=0;p<d;p++)for(y=0;y<c;y++)f=n[p][y+1],k=n[p][y],q=n[p+1][y],r=n[p+1][y+1],(0!==p||0<h)&&g.push(f,k,r),(p!==d-1||l<Math.PI)&&g.push(k,q,r);this.setIndex(new (65535<
t.count?THREE.Uint32Attribute:THREE.Uint16Attribute)(g,1));this.addAttribute("position",t);this.addAttribute("normal",u);this.addAttribute("uv",m);this.boundingSphere=new THREE.Sphere(new THREE.Vector3,b)};THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;
THREE.TextGeometry=function(b,c){c=c||{};var d=c.font;if(!1===d instanceof THREE.Font)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new THREE.Geometry;d=d.generateShapes(b,c.size,c.curveSegments);c.amount=void 0!==c.height?c.height:50;void 0===c.bevelThickness&&(c.bevelThickness=10);void 0===c.bevelSize&&(c.bevelSize=8);void 0===c.bevelEnabled&&(c.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,d,c);this.type="TextGeometry"};
THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TextGeometry.prototype.constructor=THREE.TextGeometry;
THREE.TorusBufferGeometry=function(b,c,d,g,f){THREE.BufferGeometry.call(this);this.type="TorusBufferGeometry";this.parameters={radius:b,tube:c,radialSegments:d,tubularSegments:g,arc:f};b=b||100;c=c||40;d=Math.floor(d)||8;g=Math.floor(g)||6;f=f||2*Math.PI;var h=(d+1)*(g+1),k=d*g*6,k=new (65535<k?Uint32Array:Uint16Array)(k),l=new Float32Array(3*h),m=new Float32Array(3*h),h=new Float32Array(2*h),t=0,u=0,q=0,n=new THREE.Vector3,r=new THREE.Vector3,p=new THREE.Vector3,w,v;for(w=0;w<=d;w++)for(v=0;v<=g;v++){var y=
v/g*f,A=w/d*Math.PI*2;r.x=(b+c*Math.cos(A))*Math.cos(y);r.y=(b+c*Math.cos(A))*Math.sin(y);r.z=c*Math.sin(A);l[t]=r.x;l[t+1]=r.y;l[t+2]=r.z;n.x=b*Math.cos(y);n.y=b*Math.sin(y);p.subVectors(r,n).normalize();m[t]=p.x;m[t+1]=p.y;m[t+2]=p.z;h[u]=v/g;h[u+1]=w/d;t+=3;u+=2}for(w=1;w<=d;w++)for(v=1;v<=g;v++)b=(g+1)*(w-1)+v-1,c=(g+1)*(w-1)+v,f=(g+1)*w+v,k[q]=(g+1)*w+v-1,k[q+1]=b,k[q+2]=f,k[q+3]=b,k[q+4]=c,k[q+5]=f,q+=6;this.setIndex(new THREE.BufferAttribute(k,1));this.addAttribute("position",new THREE.BufferAttribute(l,
3));this.addAttribute("normal",new THREE.BufferAttribute(m,3));this.addAttribute("uv",new THREE.BufferAttribute(h,2))};THREE.TorusBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusBufferGeometry.prototype.constructor=THREE.TorusBufferGeometry;
THREE.TorusGeometry=function(b,c,d,g,f){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:b,tube:c,radialSegments:d,tubularSegments:g,arc:f};this.fromBufferGeometry(new THREE.TorusBufferGeometry(b,c,d,g,f))};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;
THREE.TorusKnotBufferGeometry=function(b,c,d,g,f,h){function k(b,c,f,d,g){var h=Math.sin(b);c=f/c*b;f=Math.cos(c);g.x=d*(2+f)*.5*Math.cos(b);g.y=d*(2+f)*h*.5;g.z=d*Math.sin(c)*.5}THREE.BufferGeometry.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:b,tube:c,tubularSegments:d,radialSegments:g,p:f,q:h};b=b||100;c=c||40;d=Math.floor(d)||64;g=Math.floor(g)||8;f=f||2;h=h||3;var l=(g+1)*(d+1),m=g*d*6,m=new THREE.BufferAttribute(new (65535<m?Uint32Array:Uint16Array)(m),1),t=new THREE.BufferAttribute(new Float32Array(3*
l),3),u=new THREE.BufferAttribute(new Float32Array(3*l),3),l=new THREE.BufferAttribute(new Float32Array(2*l),2),q,n,r=0,p=0,w=new THREE.Vector3,v=new THREE.Vector3,y=new THREE.Vector2,A=new THREE.Vector3,x=new THREE.Vector3,z=new THREE.Vector3,D=new THREE.Vector3,B=new THREE.Vector3;for(q=0;q<=d;++q)for(n=q/d*f*Math.PI*2,k(n,f,h,b,A),k(n+.01,f,h,b,x),D.subVectors(x,A),B.addVectors(x,A),z.crossVectors(D,B),B.crossVectors(z,D),z.normalize(),B.normalize(),n=0;n<=g;++n){var C=n/g*Math.PI*2,E=-c*Math.cos(C),
C=c*Math.sin(C);w.x=A.x+(E*B.x+C*z.x);w.y=A.y+(E*B.y+C*z.y);w.z=A.z+(E*B.z+C*z.z);t.setXYZ(r,w.x,w.y,w.z);v.subVectors(w,A).normalize();u.setXYZ(r,v.x,v.y,v.z);y.x=q/d;y.y=n/g;l.setXY(r,y.x,y.y);r++}for(n=1;n<=d;n++)for(q=1;q<=g;q++)b=(g+1)*n+(q-1),c=(g+1)*n+q,f=(g+1)*(n-1)+q,m.setX(p,(g+1)*(n-1)+(q-1)),p++,m.setX(p,b),p++,m.setX(p,f),p++,m.setX(p,b),p++,m.setX(p,c),p++,m.setX(p,f),p++;this.setIndex(m);this.addAttribute("position",t);this.addAttribute("normal",u);this.addAttribute("uv",l)};
THREE.TorusKnotBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusKnotBufferGeometry.prototype.constructor=THREE.TorusKnotBufferGeometry;
THREE.TorusKnotGeometry=function(b,c,d,g,f,h,k){THREE.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:b,tube:c,tubularSegments:d,radialSegments:g,p:f,q:h};void 0!==k&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new THREE.TorusKnotBufferGeometry(b,c,d,g,f,h));this.mergeVertices()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;
THREE.TubeGeometry=function(b,c,d,g,f,h){THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:b,segments:c,radius:d,radialSegments:g,closed:f,taper:h};c=c||64;d=d||1;g=g||8;f=f||!1;h=h||THREE.TubeGeometry.NoTaper;var k=[],l,m,t=c+1,u,q,n,r,p,w=new THREE.Vector3,v,y,A;v=new THREE.TubeGeometry.FrenetFrames(b,c,f);y=v.normals;A=v.binormals;this.tangents=v.tangents;this.normals=y;this.binormals=A;for(v=0;v<t;v++)for(k[v]=[],u=v/(t-1),p=b.getPointAt(u),l=y[v],m=A[v],n=d*h(u),u=0;u<
g;u++)q=u/g*2*Math.PI,r=-n*Math.cos(q),q=n*Math.sin(q),w.copy(p),w.x+=r*l.x+q*m.x,w.y+=r*l.y+q*m.y,w.z+=r*l.z+q*m.z,k[v][u]=this.vertices.push(new THREE.Vector3(w.x,w.y,w.z))-1;for(v=0;v<c;v++)for(u=0;u<g;u++)h=f?(v+1)%c:v+1,t=(u+1)%g,b=k[v][u],d=k[h][u],h=k[h][t],t=k[v][t],w=new THREE.Vector2(v/c,u/g),y=new THREE.Vector2((v+1)/c,u/g),A=new THREE.Vector2((v+1)/c,(u+1)/g),l=new THREE.Vector2(v/c,(u+1)/g),this.faces.push(new THREE.Face3(b,d,t)),this.faceVertexUvs[0].push([w,y,l]),this.faces.push(new THREE.Face3(d,
h,t)),this.faceVertexUvs[0].push([y.clone(),A,l.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.NoTaper=function(b){return 1};THREE.TubeGeometry.SinusoidalTaper=function(b){return Math.sin(Math.PI*b)};
THREE.TubeGeometry.FrenetFrames=function(b,c,d){var g=new THREE.Vector3,f=[],h=[],k=[],l=new THREE.Vector3,m=new THREE.Matrix4;c+=1;var t,u,q;this.tangents=f;this.normals=h;this.binormals=k;for(t=0;t<c;t++)u=t/(c-1),f[t]=b.getTangentAt(u),f[t].normalize();h[0]=new THREE.Vector3;k[0]=new THREE.Vector3;b=Number.MAX_VALUE;t=Math.abs(f[0].x);u=Math.abs(f[0].y);q=Math.abs(f[0].z);t<=b&&(b=t,g.set(1,0,0));u<=b&&(b=u,g.set(0,1,0));q<=b&&g.set(0,0,1);l.crossVectors(f[0],g).normalize();h[0].crossVectors(f[0],
l);k[0].crossVectors(f[0],h[0]);for(t=1;t<c;t++)h[t]=h[t-1].clone(),k[t]=k[t-1].clone(),l.crossVectors(f[t-1],f[t]),l.length()>Number.EPSILON&&(l.normalize(),g=Math.acos(THREE.Math.clamp(f[t-1].dot(f[t]),-1,1)),h[t].applyMatrix4(m.makeRotationAxis(l,g))),k[t].crossVectors(f[t],h[t]);if(d)for(g=Math.acos(THREE.Math.clamp(h[0].dot(h[c-1]),-1,1)),g/=c-1,0<f[0].dot(l.crossVectors(h[0],h[c-1]))&&(g=-g),t=1;t<c;t++)h[t].applyMatrix4(m.makeRotationAxis(f[t],g*t)),k[t].crossVectors(f[t],h[t])};
THREE.PolyhedronGeometry=function(b,c,d,g){function f(b){var c=b.normalize().clone();c.index=m.vertices.push(c)-1;c.uv=new THREE.Vector2(Math.atan2(b.z,-b.x)/2/Math.PI+.5,1-(Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))/Math.PI+.5));return c}function h(b,c,f,d){d=new THREE.Face3(b.index,c.index,f.index,[b.clone(),c.clone(),f.clone()],void 0,d);m.faces.push(d);v.copy(b).add(c).add(f).divideScalar(3);d=Math.atan2(v.z,-v.x);m.faceVertexUvs[0].push([l(b.uv,b,d),l(c.uv,c,d),l(f.uv,f,d)])}function k(b,c){for(var d=
Math.pow(2,c),g=f(m.vertices[b.a]),k=f(m.vertices[b.b]),l=f(m.vertices[b.c]),n=[],p=b.materialIndex,r=0;r<=d;r++){n[r]=[];for(var q=f(g.clone().lerp(l,r/d)),t=f(k.clone().lerp(l,r/d)),v=d-r,w=0;w<=v;w++)n[r][w]=0===w&&r===d?q:f(q.clone().lerp(t,w/v))}for(r=0;r<d;r++)for(w=0;w<2*(d-r)-1;w++)g=Math.floor(w/2),0===w%2?h(n[r][g+1],n[r+1][g],n[r][g],p):h(n[r][g+1],n[r+1][g+1],n[r+1][g],p)}function l(b,c,f){0>f&&1===b.x&&(b=new THREE.Vector2(b.x-1,b.y));0===c.x&&0===c.z&&(b=new THREE.Vector2(f/2/Math.PI+
.5,b.y));return b.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:b,indices:c,radius:d,detail:g};d=d||1;g=g||0;for(var m=this,t=0,u=b.length;t<u;t+=3)f(new THREE.Vector3(b[t],b[t+1],b[t+2]));b=this.vertices;for(var q=[],n=t=0,u=c.length;t<u;t+=3,n++){var r=b[c[t]],p=b[c[t+1]],w=b[c[t+2]];q[n]=new THREE.Face3(r.index,p.index,w.index,[r.clone(),p.clone(),w.clone()],void 0,n)}for(var v=new THREE.Vector3,t=0,u=q.length;t<u;t++)k(q[t],g);t=0;for(u=this.faceVertexUvs[0].length;t<
u;t++)c=this.faceVertexUvs[0][t],g=c[0].x,b=c[1].x,q=c[2].x,n=Math.min(g,b,q),.9<Math.max(g,b,q)&&.1>n&&(.2>g&&(c[0].x+=1),.2>b&&(c[1].x+=1),.2>q&&(c[2].x+=1));t=0;for(u=this.vertices.length;t<u;t++)this.vertices[t].multiplyScalar(d);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,d)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;
THREE.DodecahedronGeometry=function(b,c){var d=(1+Math.sqrt(5))/2,g=1/d;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-g,-d,0,-g,d,0,g,-d,0,g,d,-g,-d,0,-g,d,0,g,-d,0,g,d,0,-d,0,-g,d,0,-g,-d,0,g,d,0,g],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,
12,14,1,14,5,1,5,9],b,c);this.type="DodecahedronGeometry";this.parameters={radius:b,detail:c}};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;
THREE.IcosahedronGeometry=function(b,c){var d=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,d,0,1,d,0,-1,-d,0,1,-d,0,0,-1,d,0,1,d,0,-1,-d,0,1,-d,d,0,-1,d,0,1,-d,0,-1,-d,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],b,c);this.type="IcosahedronGeometry";this.parameters={radius:b,detail:c}};THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);
THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry;THREE.OctahedronGeometry=function(b,c){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],b,c);this.type="OctahedronGeometry";this.parameters={radius:b,detail:c}};THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry;
THREE.TetrahedronGeometry=function(b,c){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],b,c);this.type="TetrahedronGeometry";this.parameters={radius:b,detail:c}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;
THREE.ParametricGeometry=function(b,c,d){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:b,slices:c,stacks:d};var g=this.vertices,f=this.faces,h=this.faceVertexUvs[0],k,l,m,t,u=c+1;for(k=0;k<=d;k++)for(t=k/d,l=0;l<=c;l++)m=l/c,m=b(m,t),g.push(m);var q,n,r,p;for(k=0;k<d;k++)for(l=0;l<c;l++)b=k*u+l,g=k*u+l+1,t=(k+1)*u+l+1,m=(k+1)*u+l,q=new THREE.Vector2(l/c,k/d),n=new THREE.Vector2((l+1)/c,k/d),r=new THREE.Vector2((l+1)/c,(k+1)/d),p=new THREE.Vector2(l/c,(k+1)/d),f.push(new THREE.Face3(b,
g,m)),h.push([q,n,p]),f.push(new THREE.Face3(g,t,m)),h.push([n.clone(),r,p.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;
THREE.WireframeGeometry=function(b){function c(b,c){return b-c}THREE.BufferGeometry.call(this);var d=[0,0],g={},f=["a","b","c"];if(b instanceof THREE.Geometry){var h=b.vertices,k=b.faces,l=0,m=new Uint32Array(6*k.length);b=0;for(var t=k.length;b<t;b++)for(var u=k[b],q=0;3>q;q++){d[0]=u[f[q]];d[1]=u[f[(q+1)%3]];d.sort(c);var n=d.toString();void 0===g[n]&&(m[2*l]=d[0],m[2*l+1]=d[1],g[n]=!0,l++)}d=new Float32Array(6*l);b=0;for(t=l;b<t;b++)for(q=0;2>q;q++)g=h[m[2*b+q]],l=6*b+3*q,d[l+0]=g.x,d[l+1]=g.y,
d[l+2]=g.z;this.addAttribute("position",new THREE.BufferAttribute(d,3))}else if(b instanceof THREE.BufferGeometry){if(null!==b.index){t=b.index.array;h=b.attributes.position;f=b.groups;l=0;0===f.length&&b.addGroup(0,t.length);m=new Uint32Array(2*t.length);k=0;for(u=f.length;k<u;++k){b=f[k];q=b.start;n=b.count;b=q;for(var r=q+n;b<r;b+=3)for(q=0;3>q;q++)d[0]=t[b+q],d[1]=t[b+(q+1)%3],d.sort(c),n=d.toString(),void 0===g[n]&&(m[2*l]=d[0],m[2*l+1]=d[1],g[n]=!0,l++)}d=new Float32Array(6*l);b=0;for(t=l;b<
t;b++)for(q=0;2>q;q++)l=6*b+3*q,g=m[2*b+q],d[l+0]=h.getX(g),d[l+1]=h.getY(g),d[l+2]=h.getZ(g)}else for(h=b.attributes.position.array,l=h.length/3,m=l/3,d=new Float32Array(6*l),b=0,t=m;b<t;b++)for(q=0;3>q;q++)l=18*b+6*q,m=9*b+3*q,d[l+0]=h[m],d[l+1]=h[m+1],d[l+2]=h[m+2],g=9*b+(q+1)%3*3,d[l+3]=h[g],d[l+4]=h[g+1],d[l+5]=h[g+2];this.addAttribute("position",new THREE.BufferAttribute(d,3))}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;THREE.AxisHelper=function(b){b=b||1;var c=new Float32Array([0,0,0,b,0,0,0,0,0,0,b,0,0,0,0,0,0,b]),d=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(c,3));b.addAttribute("color",new THREE.BufferAttribute(d,3));c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,b,c)};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;
THREE.ArrowHelper=function(){var b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,1,0],3));var c=new THREE.CylinderBufferGeometry(0,.5,1,5,1);c.translate(0,-.5,0);return function(d,g,f,h,k,l){THREE.Object3D.call(this);void 0===h&&(h=16776960);void 0===f&&(f=1);void 0===k&&(k=.2*f);void 0===l&&(l=.2*k);this.position.copy(g);this.line=new THREE.Line(b,new THREE.LineBasicMaterial({color:h}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new THREE.Mesh(c,
new THREE.MeshBasicMaterial({color:h}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(d);this.setLength(f,k,l)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;
THREE.ArrowHelper.prototype.setDirection=function(){var b=new THREE.Vector3,c;return function(d){.99999<d.y?this.quaternion.set(0,0,0,1):-.99999>d.y?this.quaternion.set(1,0,0,0):(b.set(d.z,0,-d.x).normalize(),c=Math.acos(d.y),this.quaternion.setFromAxisAngle(b,c))}}();THREE.ArrowHelper.prototype.setLength=function(b,c,d){void 0===c&&(c=.2*b);void 0===d&&(d=.2*c);this.line.scale.set(1,Math.max(0,b-c),1);this.line.updateMatrix();this.cone.scale.set(d,c,d);this.cone.position.y=b;this.cone.updateMatrix()};
THREE.ArrowHelper.prototype.setColor=function(b){this.line.material.color.copy(b);this.cone.material.color.copy(b)};THREE.BoxHelper=function(b){var c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),g=new THREE.BufferGeometry;g.setIndex(new THREE.BufferAttribute(c,1));g.addAttribute("position",new THREE.BufferAttribute(d,3));THREE.LineSegments.call(this,g,new THREE.LineBasicMaterial({color:16776960}));void 0!==b&&this.update(b)};THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.BoxHelper.prototype.constructor=THREE.BoxHelper;
THREE.BoxHelper.prototype.update=function(){var b=new THREE.Box3;return function(c){c instanceof THREE.Box3?b.copy(c):b.setFromObject(c);if(!b.isEmpty()){c=b.min;var d=b.max,g=this.geometry.attributes.position,f=g.array;f[0]=d.x;f[1]=d.y;f[2]=d.z;f[3]=c.x;f[4]=d.y;f[5]=d.z;f[6]=c.x;f[7]=c.y;f[8]=d.z;f[9]=d.x;f[10]=c.y;f[11]=d.z;f[12]=d.x;f[13]=d.y;f[14]=c.z;f[15]=c.x;f[16]=d.y;f[17]=c.z;f[18]=c.x;f[19]=c.y;f[20]=c.z;f[21]=d.x;f[22]=c.y;f[23]=c.z;g.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();
THREE.BoundingBoxHelper=function(b,c){var d=void 0!==c?c:8947848;this.object=b;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:d,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(b){function c(b,c,f){d(b,f);d(c,f)}function d(b,c){g.vertices.push(new THREE.Vector3);g.colors.push(new THREE.Color(c));void 0===h[b]&&(h[b]=[]);h[b].push(g.vertices.length-1)}var g=new THREE.Geometry,f=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),h={};c("n1","n2",16755200);c("n2","n4",16755200);c("n4","n3",16755200);c("n3","n1",16755200);c("f1","f2",16755200);c("f2","f4",16755200);c("f4","f3",16755200);c("f3","f1",16755200);c("n1","f1",16755200);
c("n2","f2",16755200);c("n3","f3",16755200);c("n4","f4",16755200);c("p","n1",16711680);c("p","n2",16711680);c("p","n3",16711680);c("p","n4",16711680);c("u1","u2",43775);c("u2","u3",43775);c("u3","u1",43775);c("c","t",16777215);c("p","c",3355443);c("cn1","cn2",3355443);c("cn3","cn4",3355443);c("cf1","cf2",3355443);c("cf3","cf4",3355443);THREE.LineSegments.call(this,g,f);this.camera=b;this.camera.updateProjectionMatrix();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;
THREE.CameraHelper.prototype.update=function(){function b(b,k,l,m){g.set(k,l,m).unproject(f);b=d[b];if(void 0!==b)for(k=0,l=b.length;k<l;k++)c.vertices[b[k]].copy(g)}var c,d,g=new THREE.Vector3,f=new THREE.Camera;return function(){c=this.geometry;d=this.pointMap;f.projectionMatrix.copy(this.camera.projectionMatrix);b("c",0,0,-1);b("t",0,0,1);b("n1",-1,-1,-1);b("n2",1,-1,-1);b("n3",-1,1,-1);b("n4",1,1,-1);b("f1",-1,-1,1);b("f2",1,-1,1);b("f3",-1,1,1);b("f4",1,1,1);b("u1",.7,1.1,-1);b("u2",-.7,1.1,
-1);b("u3",0,2,-1);b("cf1",-1,0,1);b("cf2",1,0,1);b("cf3",0,-1,1);b("cf4",0,1,1);b("cn1",-1,0,-1);b("cn2",1,0,-1);b("cn3",0,-1,-1);b("cn4",0,1,-1);c.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(b,c){THREE.Object3D.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;void 0===c&&(c=1);var d=new THREE.BufferGeometry;d.addAttribute("position",new THREE.Float32Attribute([-c,c,0,c,c,0,c,-c,0,-c,-c,0,-c,c,0],3));var g=new THREE.LineBasicMaterial({fog:!1});this.add(new THREE.Line(d,g));d=new THREE.BufferGeometry;d.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,0,1],3));this.add(new THREE.Line(d,
g));this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;THREE.DirectionalLightHelper.prototype.dispose=function(){var b=this.children[0],c=this.children[1];b.geometry.dispose();b.material.dispose();c.geometry.dispose();c.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(){b.setFromMatrixPosition(this.light.matrixWorld);c.setFromMatrixPosition(this.light.target.matrixWorld);d.subVectors(c,b);var g=this.children[0],f=this.children[1];g.lookAt(d);g.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);f.lookAt(d);f.scale.z=d.length()}}();
THREE.EdgesHelper=function(b,c,d){c=void 0!==c?c:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(b.geometry,d),new THREE.LineBasicMaterial({color:c}));this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;
THREE.FaceNormalsHelper=function(b,c,d,g){this.object=b;this.size=void 0!==c?c:1;b=void 0!==d?d:16776960;g=void 0!==g?g:1;c=0;d=this.object.geometry;d instanceof THREE.Geometry?c=d.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");d=new THREE.BufferGeometry;c=new THREE.Float32Attribute(6*c,3);d.addAttribute("position",c);THREE.LineSegments.call(this,d,new THREE.LineBasicMaterial({color:b,linewidth:g}));this.matrixAutoUpdate=
!1;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;
THREE.FaceNormalsHelper.prototype.update=function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0);d.getNormalMatrix(this.object.matrixWorld);for(var g=this.object.matrixWorld,f=this.geometry.attributes.position,h=this.object.geometry,k=h.vertices,h=h.faces,l=0,m=0,t=h.length;m<t;m++){var u=h[m],q=u.normal;b.copy(k[u.a]).add(k[u.b]).add(k[u.c]).divideScalar(3).applyMatrix4(g);c.copy(q).applyMatrix3(d).normalize().multiplyScalar(this.size).add(b);
f.setXYZ(l,b.x,b.y,b.z);l+=1;f.setXYZ(l,c.x,c.y,c.z);l+=1}f.needsUpdate=!0;return this}}();
THREE.GridHelper=function(b,c,d,g){d=new THREE.Color(void 0!==d?d:4473924);g=new THREE.Color(void 0!==g?g:8947848);for(var f=[],h=[],k=-b,l=0;k<=b;k+=c){f.push(-b,0,k,b,0,k);f.push(k,0,-b,k,0,b);var m=0===k?d:g;m.toArray(h,l);l+=3;m.toArray(h,l);l+=3;m.toArray(h,l);l+=3;m.toArray(h,l);l+=3}b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.Float32Attribute(f,3));b.addAttribute("color",new THREE.Float32Attribute(h,3));f=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,
b,f)};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.GridHelper.prototype.constructor=THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
THREE.HemisphereLightHelper=function(b,c){THREE.Object3D.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var d=new THREE.SphereGeometry(c,4,2);d.rotateX(-Math.PI/2);for(var g=0;8>g;g++)d.faces[g].color=this.colors[4>g?0:1];g=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(d,g);this.add(this.lightSphere);this.update()};
THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var b=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(b.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(b,c){this.light=b;this.light.updateMatrixWorld();var d=new THREE.SphereBufferGeometry(c,4,2),g=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});g.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,d,g);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;
THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(b){this.bones=this.getBoneList(b);for(var c=new THREE.Geometry,d=0;d<this.bones.length;d++)this.bones[d].parent instanceof THREE.Bone&&(c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3),c.colors.push(new THREE.Color(0,0,1)),c.colors.push(new THREE.Color(0,1,0)));c.dynamic=!0;d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,c,d);this.root=b;this.matrix=b.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(b){var c=[];b instanceof THREE.Bone&&c.push(b);for(var d=0;d<b.children.length;d++)c.push.apply(c,this.getBoneList(b.children[d]));return c};
THREE.SkeletonHelper.prototype.update=function(){for(var b=this.geometry,c=(new THREE.Matrix4).getInverse(this.root.matrixWorld),d=new THREE.Matrix4,g=0,f=0;f<this.bones.length;f++){var h=this.bones[f];h.parent instanceof THREE.Bone&&(d.multiplyMatrices(c,h.matrixWorld),b.vertices[g].setFromMatrixPosition(d),d.multiplyMatrices(c,h.parent.matrixWorld),b.vertices[g+1].setFromMatrixPosition(d),g+=2)}b.verticesNeedUpdate=!0;b.computeBoundingSphere()};
THREE.SpotLightHelper=function(b){THREE.Object3D.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;b=new THREE.BufferGeometry;for(var c=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],d=0,g=1;32>d;d++,g++){var f=d/32*Math.PI*2,h=g/32*Math.PI*2;c.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}b.addAttribute("position",new THREE.Float32Attribute(c,3));c=new THREE.LineBasicMaterial({fog:!1});this.cone=new THREE.LineSegments(b,
c);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};
THREE.SpotLightHelper.prototype.update=function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(){var d=this.light.distance?this.light.distance:1E3,g=d*Math.tan(this.light.angle);this.cone.scale.set(g,g,d);b.setFromMatrixPosition(this.light.matrixWorld);c.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(c.sub(b));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(b,c,d,g){this.object=b;this.size=void 0!==c?c:1;b=void 0!==d?d:16711680;g=void 0!==g?g:1;c=0;d=this.object.geometry;d instanceof THREE.Geometry?c=3*d.faces.length:d instanceof THREE.BufferGeometry&&(c=d.attributes.normal.count);d=new THREE.BufferGeometry;c=new THREE.Float32Attribute(6*c,3);d.addAttribute("position",c);THREE.LineSegments.call(this,d,new THREE.LineBasicMaterial({color:b,linewidth:g}));this.matrixAutoUpdate=!1;this.update()};
THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;
THREE.VertexNormalsHelper.prototype.update=function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Matrix3;return function(){var g=["a","b","c"];this.object.updateMatrixWorld(!0);d.getNormalMatrix(this.object.matrixWorld);var f=this.object.matrixWorld,h=this.geometry.attributes.position,k=this.object.geometry;if(k instanceof THREE.Geometry)for(var l=k.vertices,m=k.faces,t=k=0,u=m.length;t<u;t++)for(var q=m[t],n=0,r=q.vertexNormals.length;n<r;n++){var p=q.vertexNormals[n];b.copy(l[q[g[n]]]).applyMatrix4(f);
c.copy(p).applyMatrix3(d).normalize().multiplyScalar(this.size).add(b);h.setXYZ(k,b.x,b.y,b.z);k+=1;h.setXYZ(k,c.x,c.y,c.z);k+=1}else if(k instanceof THREE.BufferGeometry)for(g=k.attributes.position,l=k.attributes.normal,n=k=0,r=g.count;n<r;n++)b.set(g.getX(n),g.getY(n),g.getZ(n)).applyMatrix4(f),c.set(l.getX(n),l.getY(n),l.getZ(n)),c.applyMatrix3(d).normalize().multiplyScalar(this.size).add(b),h.setXYZ(k,b.x,b.y,b.z),k+=1,h.setXYZ(k,c.x,c.y,c.z),k+=1;h.needsUpdate=!0;return this}}();
THREE.WireframeHelper=function(b,c){var d=void 0!==c?c:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(b.geometry),new THREE.LineBasicMaterial({color:d}));this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;THREE.ImmediateRenderObject=function(b){THREE.Object3D.call(this);this.material=b;this.render=function(b){}};
THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;THREE.MorphBlendMesh=function(b,c){THREE.Mesh.call(this,b,c);this.animationsMap={};this.animationsList=[];var d=this.geometry.morphTargets.length;this.createAnimation("__default",0,d-1,d/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh;
THREE.MorphBlendMesh.prototype.createAnimation=function(b,c,d,g){c={start:c,end:d,length:d-c+1,fps:g,duration:(d-c)/g,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[b]=c;this.animationsList.push(c)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(b){for(var c=/([a-z]+)_?(\d+)/i,d,g={},f=this.geometry,h=0,k=f.morphTargets.length;h<k;h++){var l=f.morphTargets[h].name.match(c);if(l&&1<l.length){var m=l[1];g[m]||(g[m]={start:Infinity,end:-Infinity});l=g[m];h<l.start&&(l.start=h);h>l.end&&(l.end=h);d||(d=m)}}for(m in g)l=g[m],this.createAnimation(m,l.start,l.end,b);this.firstAnimation=d};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(b){if(b=this.animationsMap[b])b.direction=1,b.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(b){if(b=this.animationsMap[b])b.direction=-1,b.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(b,c){var d=this.animationsMap[b];d&&(d.fps=c,d.duration=(d.end-d.start)/d.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(b,c){var d=this.animationsMap[b];d&&(d.duration=c,d.fps=(d.end-d.start)/d.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(b,c){var d=this.animationsMap[b];d&&(d.weight=c)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(b,c){var d=this.animationsMap[b];d&&(d.time=c)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(b){var c=0;if(b=this.animationsMap[b])c=b.time;return c};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(b){var c=-1;if(b=this.animationsMap[b])c=b.duration;return c};THREE.MorphBlendMesh.prototype.playAnimation=function(b){var c=this.animationsMap[b];c?(c.time=0,c.active=!0):console.warn("THREE.MorphBlendMesh: animation["+b+"] undefined in .playAnimation()")};THREE.MorphBlendMesh.prototype.stopAnimation=function(b){if(b=this.animationsMap[b])b.active=!1};
THREE.MorphBlendMesh.prototype.update=function(b){for(var c=0,d=this.animationsList.length;c<d;c++){var g=this.animationsList[c];if(g.active){var f=g.duration/g.length;g.time+=g.direction*b;if(g.mirroredLoop){if(g.time>g.duration||0>g.time)g.direction*=-1,g.time>g.duration&&(g.time=g.duration,g.directionBackwards=!0),0>g.time&&(g.time=0,g.directionBackwards=!1)}else g.time%=g.duration,0>g.time&&(g.time+=g.duration);var h=g.start+THREE.Math.clamp(Math.floor(g.time/f),0,g.length-1),k=g.weight;h!==g.currentFrame&&
(this.morphTargetInfluences[g.lastFrame]=0,this.morphTargetInfluences[g.currentFrame]=1*k,this.morphTargetInfluences[h]=0,g.lastFrame=g.currentFrame,g.currentFrame=h);f=g.time%f/f;g.directionBackwards&&(f=1-f);g.currentFrame!==g.lastFrame?(this.morphTargetInfluences[g.currentFrame]=f*k,this.morphTargetInfluences[g.lastFrame]=(1-f)*k):this.morphTargetInfluences[g.currentFrame]=k}}};window.vanillaSmoothScroller={_data:{params:{}},getTargetNode:function(b){if(b.sourceEl==b.el)return b.el;b.el=b.el.parentNode;return this.getTargetNode(b)},getDocumentHeight:function(){var b=document.body,c=document.documentElement;return Math.max(b.scrollHeight,b.offsetHeight,c.clientHeight,c.scrollHeight,c.offsetHeight)},processDestination:function(b){return b?isNaN(b)?0<b.indexOf("%")?(b=parseInt(b,10),Math.floor(this.getDocumentHeight()/100*b)):"top"===b?0:"bottom"===b?this.getDocumentHeight()-
window.innerHeight:Math.floor((window.pageYOffset||document.documentElement.scrollTop)+document.querySelectorAll(b)[0].getBoundingClientRect().top):parseInt(b,10):!1},scroll:function(b){function c(){var b=window.vanillaSmoothScroller._data.params,f=b.destination,d=b.scrollMargin,g=b.scrollHeight,t=window.vanillaSmoothScroller.getDocumentHeight(),u=window.innerHeight,q=window.pageYOffset||document.documentElement.scrollTop,t=q<b.destination-b.gap&&q+u<t-b.scrollStep;b.scrollUp&&(d=b.scrollHeight,g=
b.scrollMargin,t=q>b.destination+b.gap&&q>b.scrollStep);t?(window.requestAnimationFrame(c),b.scrollCount+=1,b.scrollMargin=b.cosParameter-b.cosParameter*Math.cos(b.scrollCount*b.scrollStep),window.scrollTo(0,f+d-g)):window.scrollTo(0,b.destination)}b.preventDefault();var d=window.vanillaSmoothScroller,g=d._data,f;g.defaults={destination:0,duration:400,scrollUp:!0};b||(b={});b.target?f=d.getTargetNode({sourceEl:b.currentTarget,el:b.target}):b.nodeType||(f={dataset:b});g.params.destination=d.processDestination(f.dataset.to)||
g.defaults.destination;g.offset&&(g.params.destination="function"===typeof g.offset?g.params.destination-g.offset():g.params.destination-g.offset);g.params.duration=parseInt(f.dataset.duration,10)||g.defaults.duration;g.params.scrollUp=0<(window.pageYOffset||document.documentElement.scrollTop)-g.params.destination?!0:!1;g.params.scrollHeight=Math.abs((window.pageYOffset||document.documentElement.scrollTop)-g.params.destination);g.params.scrollStep=Math.PI/(g.params.duration/15);g.params.gap=Math.floor(100*
g.params.scrollStep);g.params.cosParameter=g.params.scrollHeight/2;g.params.scrollCount=0;g.params.scrollMargin=0;window.requestAnimationFrame(c);return!1},bind:function(b){if(!b||!b.selector)return!1;var c=this._data,d=[].slice.call(document.querySelectorAll(b.selector));c.offset=b.offset;for(c=d.length-1;0<=c;c--)d[c].addEventListener(b.event||"click",window.vanillaSmoothScroller.scroll,!1),b.event&&"click"!==b.event&&d[c].addEventListener("click",function(b){b.preventDefault();return!1},!1)}};(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"undefined"!==typeof exports?module.exports=b(require("jquery")):b(jQuery)})(function(b){var c=window.Slick||{},c=function(){var c=0;return function(g,f){var h;this.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:b(g),appendDots:b(g),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',
autoplay:!1,autoplaySpeed:3E3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(c,f){return b('<button type="button" data-role="none" role="button" tabindex="0" />').text(f+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,
slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1E3};this.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,
touchObject:{},transformsEnabled:!1,unslicked:!1};b.extend(this,this.initials);this.animProp=this.animType=this.activeBreakpoint=null;this.breakpoints=[];this.breakpointSettings=[];this.interrupted=this.focussed=this.cssTransitions=!1;this.hidden="hidden";this.paused=!0;this.respondTo=this.positionProp=null;this.rowCount=1;this.shouldClick=!0;this.$slider=b(g);this.transitionType=this.transformType=this.$slidesCache=null;this.visibilityChange="visibilitychange";this.windowWidth=0;this.windowTimer=
null;h=b(g).data("slick")||{};this.options=b.extend({},this.defaults,f,h);this.currentSlide=this.options.initialSlide;this.originalSettings=this.options;"undefined"!==typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange");this.autoPlay=b.proxy(this.autoPlay,this);this.autoPlayClear=b.proxy(this.autoPlayClear,this);this.autoPlayIterator=b.proxy(this.autoPlayIterator,
this);this.changeSlide=b.proxy(this.changeSlide,this);this.clickHandler=b.proxy(this.clickHandler,this);this.selectHandler=b.proxy(this.selectHandler,this);this.setPosition=b.proxy(this.setPosition,this);this.swipeHandler=b.proxy(this.swipeHandler,this);this.dragHandler=b.proxy(this.dragHandler,this);this.keyHandler=b.proxy(this.keyHandler,this);this.instanceUid=c++;this.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;this.registerBreakpoints();this.init(!0)}}();c.prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})};
c.prototype.addSlide=c.prototype.slickAdd=function(c,g,f){if("boolean"===typeof g)f=g,g=null;else if(0>g||g>=this.slideCount)return!1;this.unload();"number"===typeof g?0===g&&0===this.$slides.length?b(c).appendTo(this.$slideTrack):f?b(c).insertBefore(this.$slides.eq(g)):b(c).insertAfter(this.$slides.eq(g)):!0===f?b(c).prependTo(this.$slideTrack):b(c).appendTo(this.$slideTrack);this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);
this.$slides.each(function(c,f){b(f).attr("data-slick-index",c)});this.$slidesCache=this.$slides;this.reinit()};c.prototype.animateHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var b=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.animate({height:b},this.options.speed)}};c.prototype.animateSlide=function(c,g){var f={},h=this;h.animateHeight();!0===h.options.rtl&&!1===h.options.vertical&&(c=-c);!1===h.transformsEnabled?
!1===h.options.vertical?h.$slideTrack.animate({left:c},h.options.speed,h.options.easing,g):h.$slideTrack.animate({top:c},h.options.speed,h.options.easing,g):!1===h.cssTransitions?(!0===h.options.rtl&&(h.currentLeft=-h.currentLeft),b({animStart:h.currentLeft}).animate({animStart:c},{duration:h.options.speed,easing:h.options.easing,step:function(b){b=Math.ceil(b);f[h.animType]=!1===h.options.vertical?"translate("+b+"px, 0px)":"translate(0px,"+b+"px)";h.$slideTrack.css(f)},complete:function(){g&&g.call()}})):
(h.applyTransition(),c=Math.ceil(c),f[h.animType]=!1===h.options.vertical?"translate3d("+c+"px, 0px, 0px)":"translate3d(0px,"+c+"px, 0px)",h.$slideTrack.css(f),g&&setTimeout(function(){h.disableTransition();g.call()},h.options.speed))};c.prototype.getNavTarget=function(){var c=this.options.asNavFor;c&&null!==c&&(c=b(c).not(this.$slider));return c};c.prototype.asNavFor=function(c){var g=this.getNavTarget();null!==g&&"object"===typeof g&&g.each(function(){var f=b(this).slick("getSlick");f.unslicked||
f.slideHandler(c,!0)})};c.prototype.applyTransition=function(b){var c={};c[this.transitionType]=!1===this.options.fade?this.transformType+" "+this.options.speed+"ms "+this.options.cssEase:"opacity "+this.options.speed+"ms "+this.options.cssEase;!1===this.options.fade?this.$slideTrack.css(c):this.$slides.eq(b).css(c)};c.prototype.autoPlay=function(){this.autoPlayClear();this.slideCount>this.options.slidesToShow&&(this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed))};c.prototype.autoPlayClear=
function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)};c.prototype.autoPlayIterator=function(){var b=this.currentSlide+this.options.slidesToScroll;this.paused||this.interrupted||this.focussed||(!1===this.options.infinite&&(1===this.direction&&this.currentSlide+1===this.slideCount-1?this.direction=0:0===this.direction&&(b=this.currentSlide-this.options.slidesToScroll,0===this.currentSlide-1&&(this.direction=1))),this.slideHandler(b))};c.prototype.buildArrows=function(){!0===this.options.arrows&&
(this.$prevArrow=b(this.options.prevArrow).addClass("slick-arrow"),this.$nextArrow=b(this.options.nextArrow).addClass("slick-arrow"),this.slideCount>this.options.slidesToShow?(this.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),this.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.prependTo(this.options.appendArrows),this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.appendTo(this.options.appendArrows),
!0!==this.options.infinite&&this.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):this.$prevArrow.add(this.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))};c.prototype.buildDots=function(){var c,g;if(!0===this.options.dots&&this.slideCount>this.options.slidesToShow){this.$slider.addClass("slick-dotted");g=b("<ul />").addClass(this.options.dotsClass);for(c=0;c<=this.getDotCount();c+=1)g.append(b("<li />").append(this.options.customPaging.call(this,
this,c)));this.$dots=g.appendTo(this.options.appendDots);this.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}};c.prototype.buildOut=function(){this.$slides=this.$slider.children(this.options.slide+":not(.slick-cloned)").addClass("slick-slide");this.slideCount=this.$slides.length;this.$slides.each(function(c,g){b(g).attr("data-slick-index",c).data("originalStyling",b(g).attr("style")||"")});this.$slider.addClass("slick-slider");this.$slideTrack=0===this.slideCount?b('<div class="slick-track"/>').appendTo(this.$slider):
this.$slides.wrapAll('<div class="slick-track"/>').parent();this.$list=this.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent();this.$slideTrack.css("opacity",0);if(!0===this.options.centerMode||!0===this.options.swipeToSlide)this.options.slidesToScroll=1;b("img[data-lazy]",this.$slider).not("[src]").addClass("slick-loading");this.setupInfinite();this.buildArrows();this.buildDots();this.updateDots();this.setSlideClasses("number"===typeof this.currentSlide?this.currentSlide:0);
!0===this.options.draggable&&this.$list.addClass("draggable")};c.prototype.buildRows=function(){var b,c,f,h,k,l,m;h=document.createDocumentFragment();l=this.$slider.children();if(1<this.options.rows){m=this.options.slidesPerRow*this.options.rows;k=Math.ceil(l.length/m);for(b=0;b<k;b++){var t=document.createElement("div");for(c=0;c<this.options.rows;c++){var u=document.createElement("div");for(f=0;f<this.options.slidesPerRow;f++){var q=b*m+(c*this.options.slidesPerRow+f);l.get(q)&&u.appendChild(l.get(q))}t.appendChild(u)}h.appendChild(t)}this.$slider.empty().append(h);
this.$slider.children().children().children().css({width:100/this.options.slidesPerRow+"%",display:"inline-block"})}};c.prototype.checkResponsive=function(c,g){var f,h,k,l=!1;h=this.$slider.width();var m=window.innerWidth||b(window).width();"window"===this.respondTo?k=m:"slider"===this.respondTo?k=h:"min"===this.respondTo&&(k=Math.min(m,h));if(this.options.responsive&&this.options.responsive.length&&null!==this.options.responsive){h=null;for(f in this.breakpoints)this.breakpoints.hasOwnProperty(f)&&
(!1===this.originalSettings.mobileFirst?k<this.breakpoints[f]&&(h=this.breakpoints[f]):k>this.breakpoints[f]&&(h=this.breakpoints[f]));if(null!==h)if(null!==this.activeBreakpoint){if(h!==this.activeBreakpoint||g)this.activeBreakpoint=h,"unslick"===this.breakpointSettings[h]?this.unslick(h):(this.options=b.extend({},this.originalSettings,this.breakpointSettings[h]),!0===c&&(this.currentSlide=this.options.initialSlide),this.refresh(c)),l=h}else this.activeBreakpoint=h,"unslick"===this.breakpointSettings[h]?
this.unslick(h):(this.options=b.extend({},this.originalSettings,this.breakpointSettings[h]),!0===c&&(this.currentSlide=this.options.initialSlide),this.refresh(c)),l=h;else null!==this.activeBreakpoint&&(this.activeBreakpoint=null,this.options=this.originalSettings,!0===c&&(this.currentSlide=this.options.initialSlide),this.refresh(c),l=h);c||!1===l||this.$slider.trigger("breakpoint",[this,l])}};c.prototype.changeSlide=function(c,g){var f=b(c.currentTarget),h;f.is("a")&&c.preventDefault();f.is("li")||
(f=f.closest("li"));h=0!==this.slideCount%this.options.slidesToScroll?0:(this.slideCount-this.currentSlide)%this.options.slidesToScroll;switch(c.data.message){case "previous":f=0===h?this.options.slidesToScroll:this.options.slidesToShow-h;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide-f,!1,g);break;case "next":f=0===h?this.options.slidesToScroll:h;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide+f,!1,g);break;case "index":h=0===c.data.index?
0:c.data.index||f.index()*this.options.slidesToScroll,this.slideHandler(this.checkNavigable(h),!1,g),f.children().trigger("focus")}};c.prototype.checkNavigable=function(b){var c,f;c=this.getNavigableIndexes();f=0;if(b>c[c.length-1])b=c[c.length-1];else for(var h in c){if(b<c[h]){b=f;break}f=c[h]}return b};c.prototype.cleanUpEvents=function(){this.options.dots&&null!==this.$dots&&b("li",this.$dots).off("click.slick",this.changeSlide).off("mouseenter.slick",b.proxy(this.interrupt,this,!0)).off("mouseleave.slick",
b.proxy(this.interrupt,this,!1));this.$slider.off("focus.slick blur.slick");!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow&&this.$prevArrow.off("click.slick",this.changeSlide),this.$nextArrow&&this.$nextArrow.off("click.slick",this.changeSlide));this.$list.off("touchstart.slick mousedown.slick",this.swipeHandler);this.$list.off("touchmove.slick mousemove.slick",this.swipeHandler);this.$list.off("touchend.slick mouseup.slick",this.swipeHandler);this.$list.off("touchcancel.slick mouseleave.slick",
this.swipeHandler);this.$list.off("click.slick",this.clickHandler);b(document).off(this.visibilityChange,this.visibility);this.cleanUpSlideEvents();!0===this.options.accessibility&&this.$list.off("keydown.slick",this.keyHandler);!0===this.options.focusOnSelect&&b(this.$slideTrack).children().off("click.slick",this.selectHandler);b(window).off("orientationchange.slick.slick-"+this.instanceUid,this.orientationChange);b(window).off("resize.slick.slick-"+this.instanceUid,this.resize);b("[draggable!=true]",
this.$slideTrack).off("dragstart",this.preventDefault);b(window).off("load.slick.slick-"+this.instanceUid,this.setPosition);b(document).off("ready.slick.slick-"+this.instanceUid,this.setPosition)};c.prototype.cleanUpSlideEvents=function(){this.$list.off("mouseenter.slick",b.proxy(this.interrupt,this,!0));this.$list.off("mouseleave.slick",b.proxy(this.interrupt,this,!1))};c.prototype.cleanUpRows=function(){var b;1<this.options.rows&&(b=this.$slides.children().children(),b.removeAttr("style"),this.$slider.empty().append(b))};
c.prototype.clickHandler=function(b){!1===this.shouldClick&&(b.stopImmediatePropagation(),b.stopPropagation(),b.preventDefault())};c.prototype.destroy=function(c){this.autoPlayClear();this.touchObject={};this.cleanUpEvents();b(".slick-cloned",this.$slider).detach();this.$dots&&this.$dots.remove();this.$prevArrow&&this.$prevArrow.length&&(this.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),this.htmlExpr.test(this.options.prevArrow)&&
this.$prevArrow.remove());this.$nextArrow&&this.$nextArrow.length&&(this.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove());this.$slides&&(this.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){b(this).attr("style",b(this).data("originalStyling"))}),
this.$slideTrack.children(this.options.slide).detach(),this.$slideTrack.detach(),this.$list.detach(),this.$slider.append(this.$slides));this.cleanUpRows();this.$slider.removeClass("slick-slider");this.$slider.removeClass("slick-initialized");this.$slider.removeClass("slick-dotted");this.unslicked=!0;c||this.$slider.trigger("destroy",[this])};c.prototype.disableTransition=function(b){var c={};c[this.transitionType]="";!1===this.options.fade?this.$slideTrack.css(c):this.$slides.eq(b).css(c)};c.prototype.fadeSlide=
function(b,c){var f=this;!1===f.cssTransitions?(f.$slides.eq(b).css({zIndex:f.options.zIndex}),f.$slides.eq(b).animate({opacity:1},f.options.speed,f.options.easing,c)):(f.applyTransition(b),f.$slides.eq(b).css({opacity:1,zIndex:f.options.zIndex}),c&&setTimeout(function(){f.disableTransition(b);c.call()},f.options.speed))};c.prototype.fadeSlideOut=function(b){!1===this.cssTransitions?this.$slides.eq(b).animate({opacity:0,zIndex:this.options.zIndex-2},this.options.speed,this.options.easing):(this.applyTransition(b),
this.$slides.eq(b).css({opacity:0,zIndex:this.options.zIndex-2}))};c.prototype.filterSlides=c.prototype.slickFilter=function(b){null!==b&&(this.$slidesCache=this.$slides,this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.filter(b).appendTo(this.$slideTrack),this.reinit())};c.prototype.focusHandler=function(){var c=this;c.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(g){g.stopImmediatePropagation();var f=b(this);
setTimeout(function(){c.options.pauseOnFocus&&(c.focussed=f.is(":focus"),c.autoPlay())},0)})};c.prototype.getCurrent=c.prototype.slickCurrentSlide=function(){return this.currentSlide};c.prototype.getDotCount=function(){var b=0,c=0,f=0;if(!0===this.options.infinite)for(;b<this.slideCount;)++f,b=c+this.options.slidesToScroll,c+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;else if(!0===this.options.centerMode)f=this.slideCount;else for(;b<
this.slideCount;)++f,b=c+this.options.slidesToScroll,c+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;return f-1};c.prototype.getLeft=function(b){var c,f=0;this.slideOffset=0;c=this.$slides.first().outerHeight(!0);!0===this.options.infinite?(this.slideCount>this.options.slidesToShow&&(this.slideOffset=this.slideWidth*this.options.slidesToShow*-1,f=c*this.options.slidesToShow*-1),0!==this.slideCount%this.options.slidesToScroll&&b+this.options.slidesToScroll>
this.slideCount&&this.slideCount>this.options.slidesToShow&&(b>this.slideCount?(this.slideOffset=(this.options.slidesToShow-(b-this.slideCount))*this.slideWidth*-1,f=(this.options.slidesToShow-(b-this.slideCount))*c*-1):(this.slideOffset=this.slideCount%this.options.slidesToScroll*this.slideWidth*-1,f=this.slideCount%this.options.slidesToScroll*c*-1))):b+this.options.slidesToShow>this.slideCount&&(this.slideOffset=(b+this.options.slidesToShow-this.slideCount)*this.slideWidth,f=(b+this.options.slidesToShow-
this.slideCount)*c);this.slideCount<=this.options.slidesToShow&&(f=this.slideOffset=0);!0===this.options.centerMode&&!0===this.options.infinite?this.slideOffset+=this.slideWidth*Math.floor(this.options.slidesToShow/2)-this.slideWidth:!0===this.options.centerMode&&(this.slideOffset=0,this.slideOffset+=this.slideWidth*Math.floor(this.options.slidesToShow/2));c=!1===this.options.vertical?b*this.slideWidth*-1+this.slideOffset:b*c*-1+f;!0===this.options.variableWidth&&(f=this.slideCount<=this.options.slidesToShow||
!1===this.options.infinite?this.$slideTrack.children(".slick-slide").eq(b):this.$slideTrack.children(".slick-slide").eq(b+this.options.slidesToShow),c=!0===this.options.rtl?f[0]?-1*(this.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,!0===this.options.centerMode&&(f=this.slideCount<=this.options.slidesToShow||!1===this.options.infinite?this.$slideTrack.children(".slick-slide").eq(b):this.$slideTrack.children(".slick-slide").eq(b+this.options.slidesToShow+1),c=!0===this.options.rtl?
f[0]?-1*(this.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,c+=(this.$list.width()-f.outerWidth())/2));return c};c.prototype.getOption=c.prototype.slickGetOption=function(b){return this.options[b]};c.prototype.getNavigableIndexes=function(){var b=0,c=0,f=[],h;!1===this.options.infinite?h=this.slideCount:(b=-1*this.options.slidesToScroll,c=-1*this.options.slidesToScroll,h=2*this.slideCount);for(;b<h;)f.push(b),b=c+this.options.slidesToScroll,c+=this.options.slidesToScroll<=
this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;return f};c.prototype.getSlick=function(){return this};c.prototype.getSlideCount=function(){var c=this,g,f,h;h=!0===c.options.centerMode?c.slideWidth*Math.floor(c.options.slidesToShow/2):0;return!0===c.options.swipeToSlide?(c.$slideTrack.find(".slick-slide").each(function(g,l){if(l.offsetLeft-h+b(l).outerWidth()/2>-1*c.swipeLeft)return f=l,!1}),g=Math.abs(b(f).attr("data-slick-index")-c.currentSlide)||1):c.options.slidesToScroll};
c.prototype.goTo=c.prototype.slickGoTo=function(b,c){this.changeSlide({data:{message:"index",index:parseInt(b)}},c)};c.prototype.init=function(c){b(this.$slider).hasClass("slick-initialized")||(b(this.$slider).addClass("slick-initialized"),this.buildRows(),this.buildOut(),this.setProps(),this.startLoad(),this.loadSlider(),this.initializeEvents(),this.updateArrows(),this.updateDots(),this.checkResponsive(!0),this.focusHandler());c&&this.$slider.trigger("init",[this]);!0===this.options.accessibility&&
this.initADA();this.options.autoplay&&(this.paused=!1,this.autoPlay())};c.prototype.initADA=function(){var c=this;c.$slides.add(c.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"});c.$slideTrack.attr("role","listbox");c.$slides.not(c.$slideTrack.find(".slick-cloned")).each(function(g){b(this).attr({role:"option","aria-describedby":"slick-slide"+c.instanceUid+g+""})});null!==c.$dots&&c.$dots.attr("role","tablist").find("li").each(function(g){b(this).attr({role:"presentation",
"aria-selected":"false","aria-controls":"navigation"+c.instanceUid+g+"",id:"slick-slide"+c.instanceUid+g+""})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar");c.activateADA()};c.prototype.initArrowEvents=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},this.changeSlide),this.$nextArrow.off("click.slick").on("click.slick",
{message:"next"},this.changeSlide))};c.prototype.initDotEvents=function(){if(!0===this.options.dots&&this.slideCount>this.options.slidesToShow)b("li",this.$dots).on("click.slick",{message:"index"},this.changeSlide);if(!0===this.options.dots&&!0===this.options.pauseOnDotsHover)b("li",this.$dots).on("mouseenter.slick",b.proxy(this.interrupt,this,!0)).on("mouseleave.slick",b.proxy(this.interrupt,this,!1))};c.prototype.initSlideEvents=function(){this.options.pauseOnHover&&(this.$list.on("mouseenter.slick",
b.proxy(this.interrupt,this,!0)),this.$list.on("mouseleave.slick",b.proxy(this.interrupt,this,!1)))};c.prototype.initializeEvents=function(){this.initArrowEvents();this.initDotEvents();this.initSlideEvents();this.$list.on("touchstart.slick mousedown.slick",{action:"start"},this.swipeHandler);this.$list.on("touchmove.slick mousemove.slick",{action:"move"},this.swipeHandler);this.$list.on("touchend.slick mouseup.slick",{action:"end"},this.swipeHandler);this.$list.on("touchcancel.slick mouseleave.slick",
{action:"end"},this.swipeHandler);this.$list.on("click.slick",this.clickHandler);b(document).on(this.visibilityChange,b.proxy(this.visibility,this));if(!0===this.options.accessibility)this.$list.on("keydown.slick",this.keyHandler);if(!0===this.options.focusOnSelect)b(this.$slideTrack).children().on("click.slick",this.selectHandler);b(window).on("orientationchange.slick.slick-"+this.instanceUid,b.proxy(this.orientationChange,this));b(window).on("resize.slick.slick-"+this.instanceUid,b.proxy(this.resize,
this));b("[draggable!=true]",this.$slideTrack).on("dragstart",this.preventDefault);b(window).on("load.slick.slick-"+this.instanceUid,this.setPosition);b(document).on("ready.slick.slick-"+this.instanceUid,this.setPosition)};c.prototype.initUI=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.show(),this.$nextArrow.show());!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.show()};c.prototype.keyHandler=function(b){b.target.tagName.match("TEXTAREA|INPUT|SELECT")||
(37===b.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:!0===this.options.rtl?"next":"previous"}}):39===b.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:!0===this.options.rtl?"previous":"next"}}))};c.prototype.lazyLoad=function(){function c(f){b("img[data-lazy]",f).each(function(){var c=b(this),f=b(this).attr("data-lazy"),d=document.createElement("img");d.onload=function(){c.animate({opacity:0},100,function(){c.attr("src",f).animate({opacity:1},
200,function(){c.removeAttr("data-lazy").removeClass("slick-loading")});g.$slider.trigger("lazyLoaded",[g,c,f])})};d.onerror=function(){c.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");g.$slider.trigger("lazyLoadError",[g,c,f])};d.src=f})}var g=this,f,h;!0===g.options.centerMode?!0===g.options.infinite?(f=g.currentSlide+(g.options.slidesToShow/2+1),h=f+g.options.slidesToShow+2):(f=Math.max(0,g.currentSlide-(g.options.slidesToShow/2+1)),h=2+(g.options.slidesToShow/
2+1)+g.currentSlide):(f=g.options.infinite?g.options.slidesToShow+g.currentSlide:g.currentSlide,h=Math.ceil(f+g.options.slidesToShow),!0===g.options.fade&&(0<f&&f--,h<=g.slideCount&&h++));f=g.$slider.find(".slick-slide").slice(f,h);c(f);g.slideCount<=g.options.slidesToShow?(f=g.$slider.find(".slick-slide"),c(f)):g.currentSlide>=g.slideCount-g.options.slidesToShow?(f=g.$slider.find(".slick-cloned").slice(0,g.options.slidesToShow),c(f)):0===g.currentSlide&&(f=g.$slider.find(".slick-cloned").slice(-1*
g.options.slidesToShow),c(f))};c.prototype.loadSlider=function(){this.setPosition();this.$slideTrack.css({opacity:1});this.$slider.removeClass("slick-loading");this.initUI();"progressive"===this.options.lazyLoad&&this.progressiveLazyLoad()};c.prototype.next=c.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})};c.prototype.orientationChange=function(){this.checkResponsive();this.setPosition()};c.prototype.pause=c.prototype.slickPause=function(){this.autoPlayClear();this.paused=
!0};c.prototype.play=c.prototype.slickPlay=function(){this.autoPlay();this.options.autoplay=!0;this.interrupted=this.focussed=this.paused=!1};c.prototype.postSlide=function(b){this.unslicked||(this.$slider.trigger("afterChange",[this,b]),this.animating=!1,this.setPosition(),this.swipeLeft=null,this.options.autoplay&&this.autoPlay(),!0===this.options.accessibility&&this.initADA())};c.prototype.prev=c.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})};c.prototype.preventDefault=
function(b){b.preventDefault()};c.prototype.progressiveLazyLoad=function(c){c=c||1;var g=this,f=b("img[data-lazy]",g.$slider),h,k;f.length?(h=f.first(),k=h.attr("data-lazy"),f=document.createElement("img"),f.onload=function(){h.attr("src",k).removeAttr("data-lazy").removeClass("slick-loading");!0===g.options.adaptiveHeight&&g.setPosition();g.$slider.trigger("lazyLoaded",[g,h,k]);g.progressiveLazyLoad()},f.onerror=function(){3>c?setTimeout(function(){g.progressiveLazyLoad(c+1)},500):(h.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),
g.$slider.trigger("lazyLoadError",[g,h,k]),g.progressiveLazyLoad())},f.src=k):g.$slider.trigger("allImagesLoaded",[g])};c.prototype.refresh=function(c){var g;g=this.slideCount-this.options.slidesToShow;!this.options.infinite&&this.currentSlide>g&&(this.currentSlide=g);this.slideCount<=this.options.slidesToShow&&(this.currentSlide=0);g=this.currentSlide;this.destroy(!0);b.extend(this,this.initials,{currentSlide:g});this.init();c||this.changeSlide({data:{message:"index",index:g}},!1)};c.prototype.registerBreakpoints=
function(){var c=this,g,f,h,k=c.options.responsive||null;if("array"===b.type(k)&&k.length){c.respondTo=c.options.respondTo||"window";for(g in k)if(h=c.breakpoints.length-1,f=k[g].breakpoint,k.hasOwnProperty(g)){for(;0<=h;)c.breakpoints[h]&&c.breakpoints[h]===f&&c.breakpoints.splice(h,1),h--;c.breakpoints.push(f);c.breakpointSettings[f]=k[g].settings}c.breakpoints.sort(function(b,f){return c.options.mobileFirst?b-f:f-b})}};c.prototype.reinit=function(){this.$slides=this.$slideTrack.children(this.options.slide).addClass("slick-slide");
this.slideCount=this.$slides.length;this.currentSlide>=this.slideCount&&0!==this.currentSlide&&(this.currentSlide-=this.options.slidesToScroll);this.slideCount<=this.options.slidesToShow&&(this.currentSlide=0);this.registerBreakpoints();this.setProps();this.setupInfinite();this.buildArrows();this.updateArrows();this.initArrowEvents();this.buildDots();this.updateDots();this.initDotEvents();this.cleanUpSlideEvents();this.initSlideEvents();this.checkResponsive(!1,!0);if(!0===this.options.focusOnSelect)b(this.$slideTrack).children().on("click.slick",
this.selectHandler);this.setSlideClasses("number"===typeof this.currentSlide?this.currentSlide:0);this.setPosition();this.focusHandler();this.paused=!this.options.autoplay;this.autoPlay();this.$slider.trigger("reInit",[this])};c.prototype.resize=function(){var c=this;b(window).width()!==c.windowWidth&&(clearTimeout(c.windowDelay),c.windowDelay=window.setTimeout(function(){c.windowWidth=b(window).width();c.checkResponsive();c.unslicked||c.setPosition()},50))};c.prototype.removeSlide=c.prototype.slickRemove=
function(b,c,f){b="boolean"===typeof b?!0===b?0:this.slideCount-1:!0===c?--b:b;if(1>this.slideCount||0>b||b>this.slideCount-1)return!1;this.unload();!0===f?this.$slideTrack.children().remove():this.$slideTrack.children(this.options.slide).eq(b).remove();this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);this.$slidesCache=this.$slides;this.reinit()};c.prototype.setCSS=function(b){var c={},f,h;!0===
this.options.rtl&&(b=-b);f="left"==this.positionProp?Math.ceil(b)+"px":"0px";h="top"==this.positionProp?Math.ceil(b)+"px":"0px";c[this.positionProp]=b;!1!==this.transformsEnabled&&(c={},c[this.animType]=!1===this.cssTransitions?"translate("+f+", "+h+")":"translate3d("+f+", "+h+", 0px)");this.$slideTrack.css(c)};c.prototype.setDimensions=function(){!1===this.options.vertical?!0===this.options.centerMode&&this.$list.css({padding:"0px "+this.options.centerPadding}):(this.$list.height(this.$slides.first().outerHeight(!0)*
this.options.slidesToShow),!0===this.options.centerMode&&this.$list.css({padding:this.options.centerPadding+" 0px"}));this.listWidth=this.$list.width();this.listHeight=this.$list.height();!1===this.options.vertical&&!1===this.options.variableWidth?(this.slideWidth=Math.ceil(this.listWidth/this.options.slidesToShow),this.$slideTrack.width(Math.ceil(this.slideWidth*this.$slideTrack.children(".slick-slide").length))):!0===this.options.variableWidth?this.$slideTrack.width(5E3*this.slideCount):(this.slideWidth=
Math.ceil(this.listWidth),this.$slideTrack.height(Math.ceil(this.$slides.first().outerHeight(!0)*this.$slideTrack.children(".slick-slide").length)));var b=this.$slides.first().outerWidth(!0)-this.$slides.first().width();!1===this.options.variableWidth&&this.$slideTrack.children(".slick-slide").width(this.slideWidth-b)};c.prototype.setFade=function(){var c=this,g;c.$slides.each(function(f,h){g=c.slideWidth*f*-1;!0===c.options.rtl?b(h).css({position:"relative",right:g,top:0,zIndex:c.options.zIndex-
2,opacity:0}):b(h).css({position:"relative",left:g,top:0,zIndex:c.options.zIndex-2,opacity:0})});c.$slides.eq(c.currentSlide).css({zIndex:c.options.zIndex-1,opacity:1})};c.prototype.setHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var b=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.css("height",b)}};c.prototype.setOption=c.prototype.slickSetOption=function(c,g,f){var h=this,k,l,m,t=!1,u;"object"===b.type(c)?(l=c,t=
g,u="multiple"):"string"===b.type(c)&&(l=c,m=g,t=f,"responsive"===c&&"array"===b.type(g)?u="responsive":"undefined"!==typeof g&&(u="single"));if("single"===u)h.options[l]=m;else if("multiple"===u)b.each(l,function(b,c){h.options[b]=c});else if("responsive"===u)for(k in m)if("array"!==b.type(h.options.responsive))h.options.responsive=[m[k]];else{for(c=h.options.responsive.length-1;0<=c;)h.options.responsive[c].breakpoint===m[k].breakpoint&&h.options.responsive.splice(c,1),c--;h.options.responsive.push(m[k])}t&&
(h.unload(),h.reinit())};c.prototype.setPosition=function(){this.setDimensions();this.setHeight();!1===this.options.fade?this.setCSS(this.getLeft(this.currentSlide)):this.setFade();this.$slider.trigger("setPosition",[this])};c.prototype.setProps=function(){var b=document.body.style;this.positionProp=!0===this.options.vertical?"top":"left";"top"===this.positionProp?this.$slider.addClass("slick-vertical"):this.$slider.removeClass("slick-vertical");void 0===b.WebkitTransition&&void 0===b.MozTransition&&
void 0===b.msTransition||!0!==this.options.useCSS||(this.cssTransitions=!0);this.options.fade&&("number"===typeof this.options.zIndex?3>this.options.zIndex&&(this.options.zIndex=3):this.options.zIndex=this.defaults.zIndex);void 0!==b.OTransform&&(this.animType="OTransform",this.transformType="-o-transform",this.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(this.animType=!1));void 0!==b.MozTransform&&(this.animType="MozTransform",this.transformType="-moz-transform",
this.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(this.animType=!1));void 0!==b.webkitTransform&&(this.animType="webkitTransform",this.transformType="-webkit-transform",this.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(this.animType=!1));void 0!==b.msTransform&&(this.animType="msTransform",this.transformType="-ms-transform",this.transitionType="msTransition",void 0===b.msTransform&&(this.animType=!1));
void 0!==b.transform&&!1!==this.animType&&(this.transformType=this.animType="transform",this.transitionType="transition");this.transformsEnabled=this.options.useTransform&&null!==this.animType&&!1!==this.animType};c.prototype.setSlideClasses=function(b){var c,f,h;f=this.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");this.$slides.eq(b).addClass("slick-current");!0===this.options.centerMode?(c=Math.floor(this.options.slidesToShow/2),!0===
this.options.infinite&&(b>=c&&b<=this.slideCount-1-c?this.$slides.slice(b-c,b+c+1).addClass("slick-active").attr("aria-hidden","false"):(h=this.options.slidesToShow+b,f.slice(h-c+1,h+c+2).addClass("slick-active").attr("aria-hidden","false")),0===b?f.eq(f.length-1-this.options.slidesToShow).addClass("slick-center"):b===this.slideCount-1&&f.eq(this.options.slidesToShow).addClass("slick-center")),this.$slides.eq(b).addClass("slick-center")):0<=b&&b<=this.slideCount-this.options.slidesToShow?this.$slides.slice(b,
b+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):f.length<=this.options.slidesToShow?f.addClass("slick-active").attr("aria-hidden","false"):(c=this.slideCount%this.options.slidesToShow,h=!0===this.options.infinite?this.options.slidesToShow+b:b,this.options.slidesToShow==this.options.slidesToScroll&&this.slideCount-b<this.options.slidesToShow?f.slice(h-(this.options.slidesToShow-c),h+c).addClass("slick-active").attr("aria-hidden","false"):f.slice(h,h+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden",
"false"));"ondemand"===this.options.lazyLoad&&this.lazyLoad()};c.prototype.setupInfinite=function(){var c,g,f;!0===this.options.fade&&(this.options.centerMode=!1);if(!0===this.options.infinite&&!1===this.options.fade&&(g=null,this.slideCount>this.options.slidesToShow)){f=!0===this.options.centerMode?this.options.slidesToShow+1:this.options.slidesToShow;for(c=this.slideCount;c>this.slideCount-f;--c)g=c-1,b(this.$slides[g]).clone(!0).attr("id","").attr("data-slick-index",g-this.slideCount).prependTo(this.$slideTrack).addClass("slick-cloned");
for(c=0;c<f;c+=1)g=c,b(this.$slides[g]).clone(!0).attr("id","").attr("data-slick-index",g+this.slideCount).appendTo(this.$slideTrack).addClass("slick-cloned");this.$slideTrack.find(".slick-cloned").find("[id]").each(function(){b(this).attr("id","")})}};c.prototype.interrupt=function(b){b||this.autoPlay();this.interrupted=b};c.prototype.selectHandler=function(c){c=b(c.target).is(".slick-slide")?b(c.target):b(c.target).parents(".slick-slide");(c=parseInt(c.attr("data-slick-index")))||(c=0);this.slideCount<=
this.options.slidesToShow?(this.setSlideClasses(c),this.asNavFor(c)):this.slideHandler(c)};c.prototype.slideHandler=function(b,c,f){var h,k,l=null,m=this;!0===m.animating&&!0===m.options.waitForAnimate||!0===m.options.fade&&m.currentSlide===b||m.slideCount<=m.options.slidesToShow||(!1===(c||!1)&&m.asNavFor(b),h=b,l=m.getLeft(h),c=m.getLeft(m.currentSlide),m.currentLeft=null===m.swipeLeft?c:m.swipeLeft,!1===m.options.infinite&&!1===m.options.centerMode&&(0>b||b>m.getDotCount()*m.options.slidesToScroll)?
!1===m.options.fade&&(h=m.currentSlide,!0!==f?m.animateSlide(c,function(){m.postSlide(h)}):m.postSlide(h)):!1===m.options.infinite&&!0===m.options.centerMode&&(0>b||b>m.slideCount-m.options.slidesToScroll)?!1===m.options.fade&&(h=m.currentSlide,!0!==f?m.animateSlide(c,function(){m.postSlide(h)}):m.postSlide(h)):(m.options.autoplay&&clearInterval(m.autoPlayTimer),k=0>h?0!==m.slideCount%m.options.slidesToScroll?m.slideCount-m.slideCount%m.options.slidesToScroll:m.slideCount+h:h>=m.slideCount?0!==m.slideCount%
m.options.slidesToScroll?0:h-m.slideCount:h,m.animating=!0,m.$slider.trigger("beforeChange",[m,m.currentSlide,k]),b=m.currentSlide,m.currentSlide=k,m.setSlideClasses(m.currentSlide),m.options.asNavFor&&(c=m.getNavTarget(),c=c.slick("getSlick"),c.slideCount<=c.options.slidesToShow&&c.setSlideClasses(m.currentSlide)),m.updateDots(),m.updateArrows(),!0===m.options.fade?(!0!==f?(m.fadeSlideOut(b),m.fadeSlide(k,function(){m.postSlide(k)})):m.postSlide(k),m.animateHeight()):!0!==f?m.animateSlide(l,function(){m.postSlide(k)}):
m.postSlide(k)))};c.prototype.startLoad=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.hide(),this.$nextArrow.hide());!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.hide();this.$slider.addClass("slick-loading")};c.prototype.swipeDirection=function(){var b;b=Math.round(180*Math.atan2(this.touchObject.startY-this.touchObject.curY,this.touchObject.startX-this.touchObject.curX)/Math.PI);0>b&&(b=360-Math.abs(b));return 45>=
b&&0<=b||360>=b&&315<=b?!1===this.options.rtl?"left":"right":135<=b&&225>=b?!1===this.options.rtl?"right":"left":!0===this.options.verticalSwiping?35<=b&&135>=b?"down":"up":"vertical"};c.prototype.swipeEnd=function(b){var c;this.interrupted=this.dragging=!1;this.shouldClick=10<this.touchObject.swipeLength?!1:!0;if(void 0===this.touchObject.curX)return!1;!0===this.touchObject.edgeHit&&this.$slider.trigger("edge",[this,this.swipeDirection()]);if(this.touchObject.swipeLength>=this.touchObject.minSwipe){b=
this.swipeDirection();switch(b){case "left":case "down":c=this.options.swipeToSlide?this.checkNavigable(this.currentSlide+this.getSlideCount()):this.currentSlide+this.getSlideCount();this.currentDirection=0;break;case "right":case "up":c=this.options.swipeToSlide?this.checkNavigable(this.currentSlide-this.getSlideCount()):this.currentSlide-this.getSlideCount(),this.currentDirection=1}"vertical"!=b&&(this.slideHandler(c),this.touchObject={},this.$slider.trigger("swipe",[this,b]))}else this.touchObject.startX!==
this.touchObject.curX&&(this.slideHandler(this.currentSlide),this.touchObject={})};c.prototype.swipeHandler=function(b){if(!(!1===this.options.swipe||"ontouchend"in document&&!1===this.options.swipe||!1===this.options.draggable&&-1!==b.type.indexOf("mouse")))switch(this.touchObject.fingerCount=b.originalEvent&&void 0!==b.originalEvent.touches?b.originalEvent.touches.length:1,this.touchObject.minSwipe=this.listWidth/this.options.touchThreshold,!0===this.options.verticalSwiping&&(this.touchObject.minSwipe=
this.listHeight/this.options.touchThreshold),b.data.action){case "start":this.swipeStart(b);break;case "move":this.swipeMove(b);break;case "end":this.swipeEnd(b)}};c.prototype.swipeMove=function(b){var c,f,h;f=void 0!==b.originalEvent?b.originalEvent.touches:null;if(!this.dragging||f&&1!==f.length)return!1;c=this.getLeft(this.currentSlide);this.touchObject.curX=void 0!==f?f[0].pageX:b.clientX;this.touchObject.curY=void 0!==f?f[0].pageY:b.clientY;this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curX-
this.touchObject.startX,2)));!0===this.options.verticalSwiping&&(this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curY-this.touchObject.startY,2))));f=this.swipeDirection();if("vertical"!==f){void 0!==b.originalEvent&&4<this.touchObject.swipeLength&&b.preventDefault();h=(!1===this.options.rtl?1:-1)*(this.touchObject.curX>this.touchObject.startX?1:-1);!0===this.options.verticalSwiping&&(h=this.touchObject.curY>this.touchObject.startY?1:-1);b=this.touchObject.swipeLength;
this.touchObject.edgeHit=!1;!1===this.options.infinite&&(0===this.currentSlide&&"right"===f||this.currentSlide>=this.getDotCount()&&"left"===f)&&(b=this.touchObject.swipeLength*this.options.edgeFriction,this.touchObject.edgeHit=!0);this.swipeLeft=!1===this.options.vertical?c+b*h:c+b*(this.$list.height()/this.listWidth)*h;!0===this.options.verticalSwiping&&(this.swipeLeft=c+b*h);if(!0===this.options.fade||!1===this.options.touchMove)return!1;if(!0===this.animating)return this.swipeLeft=null,!1;this.setCSS(this.swipeLeft)}};
c.prototype.swipeStart=function(b){var c;this.interrupted=!0;if(1!==this.touchObject.fingerCount||this.slideCount<=this.options.slidesToShow)return this.touchObject={},!1;void 0!==b.originalEvent&&void 0!==b.originalEvent.touches&&(c=b.originalEvent.touches[0]);this.touchObject.startX=this.touchObject.curX=void 0!==c?c.pageX:b.clientX;this.touchObject.startY=this.touchObject.curY=void 0!==c?c.pageY:b.clientY;this.dragging=!0};c.prototype.unfilterSlides=c.prototype.slickUnfilter=function(){null!==
this.$slidesCache&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.appendTo(this.$slideTrack),this.reinit())};c.prototype.unload=function(){b(".slick-cloned",this.$slider).remove();this.$dots&&this.$dots.remove();this.$prevArrow&&this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.remove();this.$nextArrow&&this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove();this.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden",
"true").css("width","")};c.prototype.unslick=function(b){this.$slider.trigger("unslick",[this,b]);this.destroy()};c.prototype.updateArrows=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&!this.options.infinite&&(this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===this.currentSlide?(this.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled",
"false")):this.currentSlide>=this.slideCount-this.options.slidesToShow&&!1===this.options.centerMode?(this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):this.currentSlide>=this.slideCount-1&&!0===this.options.centerMode&&(this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))};c.prototype.updateDots=function(){null!==
this.$dots&&(this.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))};c.prototype.visibility=function(){this.options.autoplay&&(this.interrupted=document[this.hidden]?!0:!1)};b.fn.slick=function(){var b=arguments[0],g=Array.prototype.slice.call(arguments,1),f=this.length,h,k;for(h=0;h<f;h++)if("object"==typeof b||"undefined"==typeof b?this[h].slick=
new c(this[h],b):k=this[h].slick[b].apply(this[h].slick,g),"undefined"!=typeof k)return k;return this}});var _self="undefined"!==typeof window?window:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var b=/\blang(?:uage)?-(\w+)\b/i,c=0,d=_self.Prism={util:{encode:function(b){return b instanceof g?new g(b.type,d.util.encode(b.content),b.alias):"Array"===d.util.type(b)?b.map(d.util.encode):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).match(/\[object (\w+)\]/)[1]},objId:function(b){b.__id||
Object.defineProperty(b,"__id",{value:++c});return b.__id},clone:function(b){switch(d.util.type(b)){case "Object":var c={},f;for(f in b)b.hasOwnProperty(f)&&(c[f]=d.util.clone(b[f]));return c;case "Array":return b.map&&b.map(function(b){return d.util.clone(b)})}return b}},languages:{extend:function(b,c){var f=d.util.clone(d.languages[b]),g;for(g in c)f[g]=c[g];return f},insertBefore:function(b,c,f,g){g=g||d.languages;var t=g[b];if(2==arguments.length){f=arguments[1];for(var u in f)f.hasOwnProperty(u)&&
(t[u]=f[u]);return t}var q={},n;for(n in t)if(t.hasOwnProperty(n)){if(n==c)for(u in f)f.hasOwnProperty(u)&&(q[u]=f[u]);q[n]=t[n]}d.languages.DFS(d.languages,function(c,f){f===g[b]&&c!=b&&(this[c]=q)});return g[b]=q},DFS:function(b,c,f,g){g=g||{};for(var t in b)b.hasOwnProperty(t)&&((c.call(b,t,b[t],f||t),"Object"!==d.util.type(b[t])||g[d.util.objId(b[t])])?"Array"!==d.util.type(b[t])||g[d.util.objId(b[t])]||(g[d.util.objId(b[t])]=!0,d.languages.DFS(b[t],c,t,g)):(g[d.util.objId(b[t])]=!0,d.languages.DFS(b[t],
c,null,g)))}},plugins:{},highlightAll:function(b,c){var f={callback:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",f);for(var g=f.elements||document.querySelectorAll(f.selector),t=0,u;u=g[t++];)d.highlightElement(u,!0===b,f.callback)},highlightElement:function(c,f,g){for(var m,t,u=c;u&&!b.test(u.className);)u=u.parentNode;u&&(m=(u.className.match(b)||[,""])[1],t=d.languages[m]);c.className=c.className.replace(b,
"").replace(/\s+/g," ")+" language-"+m;u=c.parentNode;/pre/i.test(u.nodeName)&&(u.className=u.className.replace(b,"").replace(/\s+/g," ")+" language-"+m);var u=c.textContent,q={element:c,language:m,grammar:t,code:u};u&&t?(d.hooks.run("before-highlight",q),f&&_self.Worker?(c=new Worker(d.filename),c.onmessage=function(b){q.highlightedCode=b.data;d.hooks.run("before-insert",q);q.element.innerHTML=q.highlightedCode;g&&g.call(q.element);d.hooks.run("after-highlight",q);d.hooks.run("complete",q)},c.postMessage(JSON.stringify({language:q.language,
code:q.code,immediateClose:!0}))):(q.highlightedCode=d.highlight(q.code,q.grammar,q.language),d.hooks.run("before-insert",q),q.element.innerHTML=q.highlightedCode,g&&g.call(c),d.hooks.run("after-highlight",q),d.hooks.run("complete",q))):d.hooks.run("complete",q)},highlight:function(b,c,f){b=d.tokenize(b,c);return g.stringify(d.util.encode(b),f)},tokenize:function(b,c,f){f=d.Token;var g=[b],t=c.rest;if(t){for(var u in t)c[u]=t[u];delete c.rest}a:for(u in c)if(c.hasOwnProperty(u)&&c[u])for(var t=c[u],
t="Array"===d.util.type(t)?t:[t],q=0;q<t.length;++q)for(var n=t[q],r=n.inside,p=!!n.lookbehind,w=!!n.greedy,v=0,y=n.alias,n=n.pattern||n,A=0;A<g.length;A++){var x=g[A];if(g.length>b.length)break a;if(!(x instanceof f)){n.lastIndex=0;var z=n.exec(x),D=1;if(!z&&w&&A!=g.length-1){var D=g[A+1].matchedStr||g[A+1],B=x+D;A<g.length-2&&(B+=g[A+2].matchedStr||g[A+2]);n.lastIndex=0;z=n.exec(B);if(!z)continue;var C=z.index+(p?z[1].length:0);if(C>=x.length)continue;var E=z.index+z[0].length,x=x.length+D.length,
D=3;if(E<=x){if(g[A+1].greedy)continue;D=2;B=B.slice(0,x)}x=B}z&&(p&&(v=z[1].length),C=z.index+v,z=z[0].slice(v),E=C+z.length,B=x.slice(0,C),E=x.slice(E),D=[A,D],B&&D.push(B),z=new f(u,r?d.tokenize(z,r):z,y,z,w),D.push(z),E&&D.push(E),Array.prototype.splice.apply(g,D))}}return g},hooks:{all:{},add:function(b,c){var f=d.hooks.all;f[b]=f[b]||[];f[b].push(c)},run:function(b,c){var f=d.hooks.all[b];if(f&&f.length)for(var g=0,t;t=f[g++];)t(c)}}},g=d.Token=function(b,c,f,d,g){this.type=b;this.content=c;
this.alias=f;this.matchedStr=d||null;this.greedy=!!g};g.stringify=function(b,c,f){if("string"==typeof b)return b;if("Array"===d.util.type(b))return b.map(function(f){return g.stringify(f,c,b)}).join("");f={type:b.type,content:g.stringify(b.content,c,f),tag:"span",classes:["token",b.type],attributes:{},language:c,parent:f};"comment"==f.type&&(f.attributes.spellcheck="true");if(b.alias){var m="Array"===d.util.type(b.alias)?b.alias:[b.alias];Array.prototype.push.apply(f.classes,m)}d.hooks.run("wrap",
f);var m="",t;for(t in f.attributes)m+=(m?" ":"")+t+'="'+(f.attributes[t]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+m+">"+f.content+"</"+f.tag+">"};if(!_self.document){if(!_self.addEventListener)return _self.Prism;_self.addEventListener("message",function(b){b=JSON.parse(b.data);var c=b.language,f=b.immediateClose;_self.postMessage(d.highlight(b.code,d.languages[c],c));f&&_self.close()},!1);return _self.Prism}var f=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();
f&&(d.filename=f.src,document.addEventListener&&!f.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",d.highlightAll));return _self.Prism}();"undefined"!==typeof module&&module.exports&&(module.exports=Prism);"undefined"!==typeof global&&(global.Prism=Prism);
Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,
"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};
Prism.languages.java=Prism.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,
lookbehind:!0}});Prism.languages.insertBefore("java","function",{annotation:{alias:"punctuation",pattern:/(^|[^.])@\w+/,lookbehind:!0}});(function(){Prism.languages.graql={comment:{pattern:/#.*/,alias:"comment"},string:{pattern:/".*?"/,alias:"string"},keyword:{pattern:/(to|select|insert|delete|where|group|by|isa|has|as|value|id|of|plays-role|has-role|ako|limit|offset|order|format)(?![-\$a-zA-Z_0-9])/,alias:"keyword"},special:{pattern:/graql>|results>|\.\.\./},month:{pattern:/Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec(?!{-\$a-zA-Z_0-9})/,alias:"number"},variable:{pattern:/\$[a-zA-Z_][-a-zA-Z_0-9]*(?![-\$a-zA-Z_0-9])/,alias:"variable"},
type:{pattern:/[-a-zA-Z_][-a-zA-Z_0-9]*(?![-\$a-zA-Z_0-9])/,alias:"function"},number:{pattern:/[0-9]+(\.[0-9][0-9]*)?/,alias:"number"},operator:{pattern:/=|!=|>|<|>=|<=/,alias:"operator"}}})();!function(){function b(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function c(b,c){return b<c?-1:b>c?1:b>=c?0:NaN}function d(b){return null===b?NaN:+b}function g(b){return!isNaN(b)}function f(b){return{left:function(c,f,d,g){3>arguments.length&&(d=0);4>arguments.length&&(g=c.length);for(;d<g;){var h=d+g>>>1;0>b(c[h],f)?d=h+1:g=h}return d},right:function(c,f,d,g){3>arguments.length&&(d=0);4>arguments.length&&(g=c.length);for(;d<g;){var h=d+g>>>1;0<b(c[h],
f)?g=h:d=h+1}return d}}}function h(b){return b.length}function k(b,c){for(var f in c)Object.defineProperty(b.prototype,f,{value:c[f],enumerable:!1})}function l(){this._=Object.create(null)}function m(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function t(b){return"\x00"===(b+="")[0]?b.slice(1):b}function u(b){return m(b)in this._}function q(b){return(b=m(b))in this._&&delete this._[b]}function n(){var b=[],c;for(c in this._)b.push(t(c));return b}function r(){var b=0,c;for(c in this._)++b;
return b}function p(){for(var b in this._)return!1;return!0}function w(){this._=Object.create(null)}function v(b){return b}function y(b,c,f){return function(){var d=f.apply(c,arguments);return d===c?b:d}}function A(b,c){if(c in b)return c;c=c.charAt(0).toUpperCase()+c.slice(1);for(var f=0,d=wf.length;f<d;++f){var g=wf[f]+c;if(g in b)return g}}function x(){}function z(){}function D(b){function c(){for(var d=f,g=-1,h=d.length,k;++g<h;)(k=d[g].on)&&k.apply(this,arguments);return b}var f=[],d=new l;c.on=
function(c,g){var h=d.get(c),k;if(2>arguments.length)return h&&h.on;h&&(h.on=null,f=f.slice(0,k=f.indexOf(h)).concat(f.slice(k+1)),d.remove(c));g&&f.push(d.set(c,{on:g}));return b};return c}function B(){O.event.preventDefault()}function C(){for(var b=O.event,c;c=b.sourceEvent;)b=c;return b}function E(b){for(var c=new z,f=0,d=arguments.length;++f<d;)c[arguments[f]]=D(c);c.of=function(f,d){return function(g){try{var h=g.sourceEvent=O.event;g.target=b;O.event=g;c[g.type].apply(f,d)}finally{O.event=h}}};
return c}function G(b){fd(b,xa);return b}function H(b){return"function"===typeof b?b:function(){return he(b,this)}}function I(b){return"function"===typeof b?b:function(){return ie(b,this)}}function L(b,c){function f(){this.removeAttribute(b)}function d(){this.removeAttributeNS(b.space,b.local)}function g(){this.setAttribute(b,c)}function h(){this.setAttributeNS(b.space,b.local,c)}function k(){var f=c.apply(this,arguments);null==f?this.removeAttribute(b):this.setAttribute(b,f)}function l(){var f=c.apply(this,
arguments);null==f?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,f)}b=O.ns.qualify(b);return null==c?b.local?d:f:"function"===typeof c?b.local?l:k:b.local?h:g}function J(b){return b.trim().replace(/\s+/g," ")}function K(b){return new RegExp("(?:^|\\s+)"+O.requote(b)+"(?:\\s+|$)","g")}function M(b,c){function f(){for(var d=-1;++d<g;)b[d](this,c)}function d(){for(var f=-1,h=c.apply(this,arguments);++f<g;)b[f](this,h)}b=(b+"").trim().split(/^|\s+/).map(P);var g=b.length;
return"function"===typeof c?d:f}function P(b){var c=K(b);return function(f,d){if(g=f.classList)return d?g.add(b):g.remove(b);var g=f.getAttribute("class")||"";d?(c.lastIndex=0,c.test(g)||f.setAttribute("class",J(g+" "+b))):f.setAttribute("class",J(g.replace(c," ")))}}function N(b,c,f){function d(){this.style.removeProperty(b)}function g(){this.style.setProperty(b,c,f)}function h(){var d=c.apply(this,arguments);null==d?this.style.removeProperty(b):this.style.setProperty(b,d,f)}return null==c?d:"function"===
typeof c?h:g}function S(b,c){function f(){delete this[b]}function d(){this[b]=c}function g(){var f=c.apply(this,arguments);null==f?delete this[b]:this[b]=f}return null==c?f:"function"===typeof c?g:d}function U(b){function c(){var f=this.ownerDocument,d=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===d&&"http://www.w3.org/1999/xhtml"===f.documentElement.namespaceURI?f.createElement(b):f.createElementNS(d,b)}function f(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=O.ns.qualify(b)).local?f:c}function W(){var b=this.parentNode;b&&b.removeChild(this)}function V(b){return function(){return gd(this,b)}}function X(b){arguments.length||(b=c);return function(c,f){return c&&f?b(c.__data__,f.__data__):!c-!f}}function ea(b,c){for(var f=0,d=b.length;f<d;f++)for(var g=b[f],h=0,k=g.length,l;h<k;h++)(l=g[h])&&c(l,h,f);return b}function da(b){fd(b,xb);return b}function R(b){var c,f;return function(d,g,h){d=b[h].update;var k=d.length;h!=f&&(f=h,c=0);for(g>=c&&
(c=g+1);!(g=d[c])&&++c<k;);return g}}function Y(b,c,f){function d(){var c=this[k];c&&(this.removeEventListener(b,c,c.$),delete this[k])}function g(){var h=m(c,qb(arguments));d.call(this);this.addEventListener(b,this[k]=h,h.$=f);h._=c}function h(){var c=new RegExp("^__on([^.]+)"+O.requote(b)+"$"),f,d;for(d in this)if(f=d.match(c)){var g=this[d];this.removeEventListener(f[1],g,g.$);delete this[d]}}var k="__on"+b,l=b.indexOf("."),m=ba;0<l&&(b=b.slice(0,l));var n=je.get(b);n&&(b=n,m=ca);return l?c?g:
d:c?x:h}function ba(b,c){return function(f){var d=O.event;O.event=f;c[0]=this.__data__;try{b.apply(this,c)}finally{O.event=d}}}function ca(b,c){var f=ba(b,c);return function(b){var c=b.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||f.call(this,b)}}function aa(c){var f=".dragsuppress-"+ ++ih,d="click"+f,g=O.select(b(c)).on("touchmove"+f,B).on("dragstart"+f,B).on("selectstart"+f,B);null==Zb&&(Zb="onselectstart"in c?!1:A(c.style,"userSelect"));if(Zb){var h=(c&&(c.ownerDocument||c.document||
c).documentElement).style,k=h[Zb];h[Zb]="none"}return function(b){g.on(f,null);Zb&&(h[Zb]=k);if(b){var c=function(){g.on(d,null)};g.on(d,function(){B();c()},!0);setTimeout(c,0)}}}function Z(c,f){f.changedTouches&&(f=f.changedTouches[0]);var d=c.ownerSVGElement||c;if(d.createSVGPoint){var g=d.createSVGPoint();if(0>ke&&(d=b(c),d.scrollX||d.scrollY)){var d=O.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),h=d[0][0].getScreenCTM();ke=
!(h.f||h.e);d.remove()}ke?(g.x=f.pageX,g.y=f.pageY):(g.x=f.clientX,g.y=f.clientY);g=g.matrixTransform(c.getScreenCTM().inverse());return[g.x,g.y]}g=c.getBoundingClientRect();return[f.clientX-g.left-c.clientLeft,f.clientY-g.top-c.clientTop]}function qa(){return O.event.changedTouches[0].identifier}function ma(b,c,f){return(c[0]-b[0])*(f[1]-b[1])-(c[1]-b[1])*(f[0]-b[0])}function za(b){return 1<b?0:-1>b?ja:Math.acos(b)}function va(b){return 1<b?Ea:-1>b?-Ea:Math.asin(b)}function oa(b){return((b=Math.exp(b))+
1/b)/2}function ua(b){return(b=Math.sin(b/2))*b}function fa(){}function F(b,c,f){return this instanceof F?void(this.h=+b,this.s=+c,this.l=+f):2>arguments.length?b instanceof F?new F(b.h,b.s,b.l):Ka(""+b,pa,F):new F(b,c,f)}function Ba(b,c,f){function d(b){360<b?b-=360:0>b&&(b+=360);return 60>b?g+(h-g)*b/60:180>b?h:240>b?g+(h-g)*(240-b)/60:g}var g,h;b=isNaN(b)?0:0>(b%=360)?b+360:b;c=isNaN(c)?0:0>c?0:1<c?1:c;f=0>f?0:1<f?1:f;h=.5>=f?f*(1+c):f+c-f*c;g=2*f-h;return new Ha(Math.round(255*d(b+120)),Math.round(255*
d(b)),Math.round(255*d(b-120)))}function ra(b,c,f){return this instanceof ra?void(this.h=+b,this.c=+c,this.l=+f):2>arguments.length?b instanceof ra?new ra(b.h,b.c,b.l):b instanceof wa?Ja(b.l,b.a,b.b):Ja((b=Ia((b=O.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new ra(b,c,f)}function na(b,c,f){isNaN(b)&&(b=0);isNaN(c)&&(c=0);return new wa(f,Math.cos(b*=ka)*c,Math.sin(b)*c)}function wa(b,c,f){return this instanceof wa?void(this.l=+b,this.a=+c,this.b=+f):2>arguments.length?b instanceof wa?new wa(b.l,b.a,b.b):b instanceof
ra?na(b.h,b.c,b.l):Ia((b=Ha(b)).r,b.g,b.b):new wa(b,c,f)}function Oa(b,c,f){b=(b+16)/116;f=b-f/200;c=$a(b+c/500)*xf;b=$a(b)*yf;f=$a(f)*zf;return new Ha(Xa(3.2404542*c-1.5371385*b-.4985314*f),Xa(-.969266*c+1.8760108*b+.041556*f),Xa(.0556434*c-.2040259*b+1.0572252*f))}function Ja(b,c,f){return 0<b?new ra(Math.atan2(f,c)*Ca,Math.sqrt(c*c+f*f),b):new ra(NaN,NaN,b)}function $a(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Da(b){return.008856<b?Math.pow(b,1/3):7.787037*b+4/29}function Xa(b){return Math.round(255*
(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Ha(b,c,f){return this instanceof Ha?void(this.r=~~b,this.g=~~c,this.b=~~f):2>arguments.length?b instanceof Ha?new Ha(b.r,b.g,b.b):Ka(""+b,Ha,Ba):new Ha(b,c,f)}function Ya(b){return new Ha(b>>16,b>>8&255,b&255)+""}function ab(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function Ka(b,c,f){var d=0,g=0,h=0,k,l;if(k=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase()))switch(l=k[2].split(","),k[1]){case "hsl":return f(parseFloat(l[0]),
parseFloat(l[1])/100,parseFloat(l[2])/100);case "rgb":return c(Q(l[0]),Q(l[1]),Q(l[2]))}if(f=id.get(b))return c(f.r,f.g,f.b);null==b||"#"!==b.charAt(0)||isNaN(f=parseInt(b.slice(1),16))||(4===b.length?(d=(f&3840)>>4,d|=d>>4,g=f&240,g|=g>>4,h=f&15,h|=h<<4):7===b.length&&(d=(f&16711680)>>16,g=(f&65280)>>8,h=f&255));return c(d,g,h)}function pa(b,c,f){var d=Math.min(b/=255,c/=255,f/=255),g=Math.max(b,c,f),h=g-d,k=(g+d)/2;h?(d=.5>k?h/(g+d):h/(2-g-d),b=60*(b==g?(c-f)/h+(c<f?6:0):c==g?(f-b)/h+2:(b-c)/h+
4)):(b=NaN,d=0<k&&1>k?0:b);return new F(b,d,k)}function Ia(b,c,f){b=Ra(b);c=Ra(c);f=Ra(f);var d=Da((.4124564*b+.3575761*c+.1804375*f)/xf),g=Da((.2126729*b+.7151522*c+.072175*f)/yf);b=Da((.0193339*b+.119192*c+.9503041*f)/zf);return wa(116*g-16,500*(d-g),200*(g-b))}function Ra(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Q(b){var c=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*c):c}function sa(b){return"function"===typeof b?b:function(){return b}}function ia(b){return function(c,
f,d){2===arguments.length&&"function"===typeof f&&(d=f,f=null);return Aa(c,f,b,d)}}function Aa(b,c,f,d){function g(){var b=m.status,c,d;if(d=!b)d=(d=m.responseType)&&"text"!==d?m.response:m.responseText;if(d||200<=b&&300>b||304===b){try{c=f.call(h,m)}catch(l){k.error.call(h,l);return}k.load.call(h,c)}else k.error.call(h,m)}var h={},k=O.dispatch("beforesend","progress","load","error"),l={},m=new XMLHttpRequest,n=null;!this.XDomainRequest||"withCredentials"in m||!/^(http(s)?:)?\/\//.test(b)||(m=new XDomainRequest);
"onload"in m?m.onload=m.onerror=g:m.onreadystatechange=function(){3<m.readyState&&g()};m.onprogress=function(b){var c=O.event;O.event=b;try{k.progress.call(h,m)}finally{O.event=c}};h.header=function(b,c){b=(b+"").toLowerCase();if(2>arguments.length)return l[b];null==c?delete l[b]:l[b]=c+"";return h};h.mimeType=function(b){if(!arguments.length)return c;c=null==b?null:b+"";return h};h.responseType=function(b){if(!arguments.length)return n;n=b;return h};h.response=function(b){f=b;return h};["get","post"].forEach(function(b){h[b]=
function(){return h.send.apply(h,[b].concat(qb(arguments)))}});h.send=function(f,d,g){2===arguments.length&&"function"===typeof d&&(g=d,d=null);m.open(f,b,!0);null==c||"accept"in l||(l.accept=c+",*/*");if(m.setRequestHeader)for(var p in l)m.setRequestHeader(p,l[p]);null!=c&&m.overrideMimeType&&m.overrideMimeType(c);null!=n&&(m.responseType=n);if(null!=g)h.on("error",g).on("load",function(b){g(null,b)});k.beforesend.call(h,m);m.send(null==d?null:d);return h};h.abort=function(){m.abort();return h};
O.rebind(h,k,"on");return null==d?h:h.get(ga(d))}function ga(b){return 1===b.length?function(c,f){b(null==c?f:null)}:b}function ta(b,c,f){var d=arguments.length;2>d&&(c=0);3>d&&(f=Date.now());d={c:b,t:f+c,n:null};jd?jd.n=d:kd=d;jd=d;ld||(md=clearTimeout(md),ld=1,Af(eb));return d}function eb(){var b=Va(),b=Ta()-b;24<b?(isFinite(b)&&(clearTimeout(md),md=setTimeout(eb,b)),ld=0):(ld=1,Af(eb))}function Va(){for(var b=Date.now(),c=kd;c;)b>=c.t&&c.c(b-c.t)&&(c.c=null),c=c.n;return b}function Ta(){for(var b,
c=kd,f=Infinity;c;)c.c?(c.t<f&&(f=c.t),c=(b=c).n):c=b?b.n=c.n:kd=c.n;jd=b;return f}function jb(b,c){return c-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function jc(b){var c=b.decimal,f=b.thousands,d=b.grouping,g=b.currency,h=d&&f?function(b,c){for(var g=b.length,h=[],k=0,l=d[0],m=0;0<g&&0<l;){m+l+1>c&&(l=Math.max(1,c-m));h.push(b.substring(g-=l,g+l));if((m+=l+1)>c)break;l=d[k=(k+1)%d.length]}return h.reverse().join(f)}:v;return function(b){b=Bf.exec(b);var f=b[1]||" ",d=b[2]||">",k=b[3]||"-",l=b[4]||
"",m=b[5],n=+b[6],p=b[7],r=b[8],q=b[9],ya=1,t="",v="",w=!1,u=!0;r&&(r=+r.substring(1));if(m||"0"===f&&"="===d)m=f="0",d="=";switch(q){case "n":p=!0;q="g";break;case "%":ya=100;v="%";q="f";break;case "p":ya=100;v="%";q="r";break;case "b":case "o":case "x":case "X":"#"===l&&(t="0"+q.toLowerCase());case "c":u=!1;case "d":w=!0;r=0;break;case "s":ya=-1,q="r"}"$"===l&&(t=g[0],v=g[1]);"r"!=q||r||(q="g");if(null!=r)if("g"==q)r=Math.max(1,Math.min(21,r));else if("e"==q||"f"==q)r=Math.max(0,Math.min(20,r));
var q=jh.get(q)||Rb,y=m&&p;return function(b){var g=v;if(w&&b%1)return"";var l=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===k?"":k;0>ya?(g=O.formatPrefix(b,r),b=g.scale(b),g=g.symbol+v):b*=ya;b=q(b,r);var A=b.lastIndexOf("."),x;0>A?(A=u?b.lastIndexOf("e"):-1,0>A?(x=b,b=""):(x=b.substring(0,A),b=b.substring(A))):(x=b.substring(0,A),b=c+b.substring(A+1));!m&&p&&(x=h(x,Infinity));var A=t.length+x.length+b.length+(y?0:l.length),D=A<n?Array(A=n-A+1).join(f):"";y&&(x=h(D+x,D.length?n-b.length:Infinity));l+=t;b=x+
b;return("<"===d?l+b+D:">"===d?D+l+b:"^"===d?D.substring(0,A>>=1)+l+b+D.substring(A):l+(y?b:D+b))+g}}}function Rb(b){return b+""}function Wa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ga(b,c,f){function d(c){var f=b(c),g=h(f,1);return c-f<g-c?f:g}function g(f){c(f=b(new Pa(f-1)),1);return f}function h(b,f){c(b=new Pa(+b),f);return b}function k(b,d,h){b=g(b);var l=[];if(1<h)for(;b<d;)f(b)%h||l.push(new Date(+b)),c(b,1);else for(;b<d;)l.push(new Date(+b)),
c(b,1);return l}b.floor=b;b.round=d;b.ceil=g;b.offset=h;b.range=k;var l=b.utc=Na(b);l.floor=l;l.round=Na(d);l.ceil=Na(g);l.offset=Na(h);l.range=function(b,c,f){try{Pa=Wa;var d=new Wa;d._=b;return k(d,c,f)}finally{Pa=Date}};return b}function Na(b){return function(c,f){try{Pa=Wa;var d=new Wa;d._=c;return b(d,f)._}finally{Pa=Date}}}function Tb(b){function c(b){function d(c){for(var f=[],h=-1,k=0,l,m;++h<g;)if(37===b.charCodeAt(h)){f.push(b.slice(k,h));null!=(l=Cf[k=b.charAt(++h)])&&(k=b.charAt(++h));
if(m=D[k])k=m(c,null==l?"e"===k?" ":"0":l);f.push(k);k=h+1}f.push(b.slice(k,h));return f.join("")}var g=b.length;d.parse=function(c){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(d,b,c,0)!=c.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);c=null!=d.Z&&Pa!==Wa;var g=new (c?Wa:Pa);"j"in d?g.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d);
g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L);return c?g._:g};d.toString=function(){return b};return d}function f(b,c,d,g){for(var h,k=0,l=c.length,m=d.length;k<l;){if(g>=m)return-1;h=c.charCodeAt(k++);if(37===h){if(h=c.charAt(k++),h=B[h in Cf?c.charAt(k++):h],!h||0>(g=h(b,d,g)))return-1}else if(h!=d.charCodeAt(g++))return-1}return g}var d=b.dateTime,g=b.date,h=b.time,k=b.periods,l=b.days,m=b.shortDays,n=b.months,p=b.shortMonths;c.utc=function(b){function f(b){try{Pa=Wa;var c=new Pa;c._=b;return d(c)}finally{Pa=
Date}}var d=c(b);f.parse=function(b){try{Pa=Wa;var c=d.parse(b);return c&&c._}finally{Pa=Date}};f.toString=d.toString;return f};c.multi=c.utc.multi=Tc;var r=O.map(),q=nb(l),t=Fb(l),v=nb(m),w=Fb(m),u=nb(n),y=Fb(n),A=nb(p),x=Fb(p);k.forEach(function(b,c){r.set(b.toLowerCase(),c)});var D={a:function(b){return m[b.getDay()]},A:function(b){return l[b.getDay()]},b:function(b){return p[b.getMonth()]},B:function(b){return n[b.getMonth()]},c:c(d),d:function(b,c){return Ma(b.getDate(),c,2)},e:function(b,c){return Ma(b.getDate(),
c,2)},H:function(b,c){return Ma(b.getHours(),c,2)},I:function(b,c){return Ma(b.getHours()%12||12,c,2)},j:function(b,c){return Ma(1+ha.dayOfYear(b),c,3)},L:function(b,c){return Ma(b.getMilliseconds(),c,3)},m:function(b,c){return Ma(b.getMonth()+1,c,2)},M:function(b,c){return Ma(b.getMinutes(),c,2)},p:function(b){return k[+(12<=b.getHours())]},S:function(b,c){return Ma(b.getSeconds(),c,2)},U:function(b,c){return Ma(ha.sundayOfYear(b),c,2)},w:function(b){return b.getDay()},W:function(b,c){return Ma(ha.mondayOfYear(b),
c,2)},x:c(g),X:c(h),y:function(b,c){return Ma(b.getFullYear()%100,c,2)},Y:function(b,c){return Ma(b.getFullYear()%1E4,c,4)},Z:ad,"%":function(){return"%"}},B={a:function(b,c,f){v.lastIndex=0;return(c=v.exec(c.slice(f)))?(b.w=w.get(c[0].toLowerCase()),f+c[0].length):-1},A:function(b,c,f){q.lastIndex=0;return(c=q.exec(c.slice(f)))?(b.w=t.get(c[0].toLowerCase()),f+c[0].length):-1},b:function(b,c,f){A.lastIndex=0;return(c=A.exec(c.slice(f)))?(b.m=x.get(c[0].toLowerCase()),f+c[0].length):-1},B:function(b,
c,f){u.lastIndex=0;return(c=u.exec(c.slice(f)))?(b.m=y.get(c[0].toLowerCase()),f+c[0].length):-1},c:function(b,c,d){return f(b,D.c.toString(),c,d)},d:ec,e:ec,H:lc,I:lc,j:dc,L:$d,m:Sb,M:Ub,p:function(b,c,f){c=r.get(c.slice(f,f+=2).toLowerCase());return null==c?-1:(b.p=c,f)},S:Zd,U:ib,w:kc,W:xc,x:function(b,c,d){return f(b,D.x.toString(),c,d)},X:function(b,c,d){return f(b,D.X.toString(),c,d)},y:Qa,Y:Cb,Z:Db,"%":Uc};return c}function Ma(b,c,f){var d=0>b?"-":"";b=(d?-b:b)+"";var g=b.length;return d+(g<
f?Array(f-g+1).join(c)+b:b)}function nb(b){return new RegExp("^(?:"+b.map(O.requote).join("|")+")","i")}function Fb(b){for(var c=new l,f=-1,d=b.length;++f<d;)c.set(b[f].toLowerCase(),f);return c}function kc(b,c,f){Fa.lastIndex=0;return(c=Fa.exec(c.slice(f,f+1)))?(b.w=+c[0],f+c[0].length):-1}function ib(b,c,f){Fa.lastIndex=0;return(c=Fa.exec(c.slice(f)))?(b.U=+c[0],f+c[0].length):-1}function xc(b,c,f){Fa.lastIndex=0;return(c=Fa.exec(c.slice(f)))?(b.W=+c[0],f+c[0].length):-1}function Cb(b,c,f){Fa.lastIndex=
0;return(c=Fa.exec(c.slice(f,f+4)))?(b.y=+c[0],f+c[0].length):-1}function Qa(b,c,f){Fa.lastIndex=0;if(c=Fa.exec(c.slice(f,f+2))){var d=+c[0];b=(b.y=d+(68<d?1900:2E3),f+c[0].length)}else b=-1;return b}function Db(b,c,f){return/^[+-]\d{4}$/.test(c=c.slice(f,f+5))?(b.Z=-c,f+5):-1}function Sb(b,c,f){Fa.lastIndex=0;return(c=Fa.exec(c.slice(f,f+2)))?(b.m=c[0]-1,f+c[0].length):-1}function ec(b,c,f){Fa.lastIndex=0;return(c=Fa.exec(c.slice(f,f+2)))?(b.d=+c[0],f+c[0].length):-1}function dc(b,c,f){Fa.lastIndex=
0;return(c=Fa.exec(c.slice(f,f+3)))?(b.j=+c[0],f+c[0].length):-1}function lc(b,c,f){Fa.lastIndex=0;return(c=Fa.exec(c.slice(f,f+2)))?(b.H=+c[0],f+c[0].length):-1}function Ub(b,c,f){Fa.lastIndex=0;return(c=Fa.exec(c.slice(f,f+2)))?(b.M=+c[0],f+c[0].length):-1}function Zd(b,c,f){Fa.lastIndex=0;return(c=Fa.exec(c.slice(f,f+2)))?(b.S=+c[0],f+c[0].length):-1}function $d(b,c,f){Fa.lastIndex=0;return(c=Fa.exec(c.slice(f,f+3)))?(b.L=+c[0],f+c[0].length):-1}function ad(b){var c=b.getTimezoneOffset();b=0<c?
"-":"+";var f=la(c)/60|0,c=la(c)%60;return b+Ma(f,"0",2)+Ma(c,"0",2)}function Uc(b,c,f){Df.lastIndex=0;return(b=Df.exec(c.slice(f,f+1)))?f+b[0].length:-1}function Tc(b){for(var c=b.length,f=-1;++f<c;)b[f][0]=this(b[f][0]);return function(c){for(var f=0,d=b[f];!d[1](c);)d=b[++f];return d[0](c)}}function db(){}function Vb(b,c,f){var d=f.s=b+c,g=d-b;f.t=b-(d-g)+(c-g)}function mc(b,c){if(b&&Ef.hasOwnProperty(b.type))Ef[b.type](b,c)}function Fc(b,c,f){var d=-1;f=b.length-f;var g;for(c.lineStart();++d<
f;)g=b[d],c.point(g[0],g[1],g[2]);c.lineEnd()}function Gc(b,c){var f=-1,d=b.length;for(c.polygonStart();++f<d;)Fc(b[f],c,1);c.polygonEnd()}function Wb(){function b(c,f){c*=ka;f=f*ka/2+ja/4;var k=c-d,l=0<=k?1:-1,k=l*k,m=Math.cos(f),n=Math.sin(f),p=h*n;$b.add(Math.atan2(p*l*Math.sin(k),g*m+p*Math.cos(k)));d=c;g=m;h=n}var c,f,d,g,h;bb.point=function(k,l){bb.point=b;d=(c=k)*ka;g=Math.cos(l=(f=l)*ka/2+ja/4);h=Math.sin(l)};bb.lineEnd=function(){b(c,f)}}function wb(b){var c=b[0];b=b[1];var f=Math.cos(b);
return[f*Math.cos(c),f*Math.sin(c),Math.sin(b)]}function nc(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]}function ob(b,c){return[b[1]*c[2]-b[2]*c[1],b[2]*c[0]-b[0]*c[2],b[0]*c[1]-b[1]*c[0]]}function Hc(b,c){b[0]+=c[0];b[1]+=c[1];b[2]+=c[2]}function Xb(b,c){return[b[0]*c,b[1]*c,b[2]*c]}function pb(b){var c=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=c;b[1]/=c;b[2]/=c}function Gb(b){return[Math.atan2(b[1],b[0]),va(b[2])]}function Hb(b,c){return 1E-6>la(b[0]-c[0])&&1E-6>la(b[1]-c[1])}function Ic(b,c){b*=
ka;var f=Math.cos(c*=ka);Ib(f*Math.cos(b),f*Math.sin(b),Math.sin(c))}function Ib(b,c,f){++Nc;yb+=(b-yb)/Nc;zb+=(c-zb)/Nc;rb+=(f-rb)/Nc}function bd(){function b(g,h){g*=ka;var k=Math.cos(h*=ka),l=k*Math.cos(g),k=k*Math.sin(g),m=Math.sin(h),n=Math.atan2(Math.sqrt((n=f*m-d*k)*n+(n=d*l-c*m)*n+(n=c*k-f*l)*n),c*l+f*k+d*m);qc+=n;fb+=n*(c+(c=l));gb+=n*(f+(f=k));Za+=n*(d+(d=m));Ib(c,f,d)}var c,f,d;kb.point=function(g,h){g*=ka;var k=Math.cos(h*=ka);c=k*Math.cos(g);f=k*Math.sin(g);d=Math.sin(h);kb.point=b;Ib(c,
f,d)}}function cd(){kb.point=Ic}function ae(){function b(c,f){c*=ka;var k=Math.cos(f*=ka),l=k*Math.cos(c),k=k*Math.sin(c),m=Math.sin(f),n=g*m-h*k,p=h*l-d*m,r=d*k-g*l,q=Math.sqrt(n*n+p*p+r*r),t=d*l+g*k+h*m,ya=q&&-za(t)/q,q=Math.atan2(q,t);Lb+=ya*n;Mb+=ya*p;sb+=ya*r;qc+=q;fb+=q*(d+(d=l));gb+=q*(g+(g=k));Za+=q*(h+(h=m));Ib(d,g,h)}var c,f,d,g,h;kb.point=function(k,l){c=k;f=l;kb.point=b;k*=ka;var m=Math.cos(l*=ka);d=m*Math.cos(k);g=m*Math.sin(k);h=Math.sin(l);Ib(d,g,h)};kb.lineEnd=function(){b(c,f);kb.lineEnd=
cd;kb.point=Ic}}function Jc(b,c){function f(d,g){return d=b(d,g),c(d[0],d[1])}b.invert&&c.invert&&(f.invert=function(f,d){return f=c.invert(f,d),f&&b.invert(f[0],f[1])});return f}function ub(){return!0}function Kc(b,c,f,d,g){var h=[],k=[];b.forEach(function(b){if(!(0>=(c=b.length-1))){var c,f=b[0],d=b[c];if(Hb(f,d)){g.lineStart();for(d=0;d<c;++d)g.point((f=b[d])[0],f[1]);g.lineEnd()}else c=new pc(f,b,null,!0),f=new pc(f,null,c,!1),c.o=f,h.push(c),k.push(f),c=new pc(d,b,null,!1),f=new pc(d,null,c,
!0),c.o=f,h.push(c),k.push(f)}});k.sort(c);oc(h);oc(k);if(h.length){b=0;c=f;for(f=k.length;b<f;++b)k[b].e=c=!c;c=h[0];for(var l,m;;){for(var n=c,p=!0;n.v;)if((n=n.n)===c)return;l=n.z;g.lineStart();do{n.v=n.o.v=!0;if(n.e){if(p)for(b=0,f=l.length;b<f;++b)g.point((m=l[b])[0],m[1]);else d(n.x,n.n.x,1,g);n=n.n}else{if(p)for(l=n.p.z,b=l.length-1;0<=b;--b)g.point((m=l[b])[0],m[1]);else d(n.x,n.p.x,-1,g);n=n.p}n=n.o;l=n.z;p=!p}while(!n.v);g.lineEnd()}}}function oc(b){if(c=b.length){for(var c,f=0,d=b[0],g;++f<
c;)d.n=g=b[f],g.p=d,d=g;d.n=g=b[0];g.p=d}}function pc(b,c,f,d){this.x=b;this.z=c;this.o=f;this.e=d;this.v=!1;this.n=this.p=null}function Vc(b,c,f,d){return function(g,h){function k(c,f){var d=g(c,f);b(c=d[0],f=d[1])&&h.point(c,f)}function l(b,c){var f=g(b,c);t.point(f[0],f[1])}function m(){w.point=l;t.lineStart()}function n(){w.point=k;t.lineEnd()}function p(b,c){B.push([b,c]);var f=g(b,c);A.point(f[0],f[1])}function r(){A.lineStart();B=[]}function q(){p(B[0][0],B[0][1]);A.lineEnd();var b=A.clean(),
c=y.buffer(),f=c.length;B.pop();D.push(B);B=null;if(f)if(b&1){var b=c[0],f=b.length-1,c=-1,d;if(0<f){x||(h.polygonStart(),x=!0);for(h.lineStart();++c<f;)h.point((d=b[c])[0],d[1]);h.lineEnd()}}else 1<f&&b&2&&c.push(c.pop().concat(c.shift())),u.push(c.filter(dd))}var t=c(h),v=g.invert(d[0],d[1]),w={point:k,lineStart:m,lineEnd:n,polygonStart:function(){w.point=p;w.lineStart=r;w.lineEnd=q;u=[];D=[]},polygonEnd:function(){w.point=k;w.lineStart=m;w.lineEnd=n;u=O.merge(u);var b,c=v;b=D;var d=c[0],g=c[1],
l=[Math.sin(d),-Math.cos(d),0],p=0,r=0;$b.reset();for(var q=0,t=b.length;q<t;++q){var ya=b[q],y=ya.length;if(y)for(var A=ya[0],B=A[0],c=A[1]/2+ja/4,z=Math.sin(c),Ua=Math.cos(c),C=1;;){C===y&&(C=0);var c=ya[C],E=c[0],Kb=c[1]/2+ja/4,M=Math.sin(Kb),Kb=Math.cos(Kb),N=E-B,ge=0<=N?1:-1,G=ge*N,P=G>ja,z=z*M;$b.add(Math.atan2(z*ge*Math.sin(G),Ua*Kb+z*Math.cos(G)));p+=P?N+ge*cb:N;P^B>=d^E>=d&&(A=ob(wb(A),wb(c)),pb(A),B=ob(l,A),pb(B),B=(P^0<=N?-1:1)*va(B[2]),g>B||g===B&&(A[0]||A[1]))&&(r+=P^0<=N?1:-1);if(!C++)break;
B=E;z=M;Ua=Kb;A=c}}b=(-1E-6>p||1E-6>p&&0>$b)^r&1;u.length?(x||(h.polygonStart(),x=!0),Kc(u,be,b,f,h)):b&&(x||(h.polygonStart(),x=!0),h.lineStart(),f(null,null,1,h),h.lineEnd());x&&(h.polygonEnd(),x=!1);u=D=null},sphere:function(){h.polygonStart();h.lineStart();f(null,null,1,h);h.lineEnd();h.polygonEnd()}},u,y=ed(),A=c(y),x=!1,D,B;return w}}function dd(b){return 1<b.length}function ed(){var b=[],c;return{lineStart:function(){b.push(c=[])},point:function(b,f){c.push([b,f])},lineEnd:x,buffer:function(){var f=
b;b=[];c=null;return f},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function be(b,c){return(0>(b=b.x)[0]?b[1]-Ea-1E-6:Ea-b[1])-(0>(c=c.x)[0]?c[1]-Ea-1E-6:Ea-c[1])}function ce(b){function c(b,f){return Math.cos(b)*Math.cos(f)>g}function f(b,c,d){var h=wb(b),k=wb(c),l=[1,0,0],k=ob(h,k),m=nc(k,k),h=k[0],n=m-h*h;if(!n)return!d&&b;m=g*m/n;n=-g*h/n;h=ob(l,k);l=Xb(l,m);k=Xb(k,n);Hc(l,k);k=nc(l,h);m=nc(h,h);n=k*k-m*(nc(l,l)-1);if(!(0>n)){var p=Math.sqrt(n),n=Xb(h,(-k-p)/m);Hc(n,l);n=
Gb(n);if(!d)return n;d=b[0];var r=c[0];b=b[1];c=c[1];var q;r<d&&(q=d,d=r,r=q);var t=r-d,ya=1E-6>la(t-ja);!ya&&c<b&&(q=b,b=c,c=q);if(ya||1E-6>t?ya?0<b+c^n[1]<(1E-6>la(n[0]-d)?b:c):b<=n[1]&&n[1]<=c:t>ja^(d<=n[0]&&n[0]<=r))return c=Xb(h,(-k+p)/m),Hc(c,l),[n,Gb(c)]}}function d(c,f){var g=h?b:ja-b,k=0;c<-g?k|=1:c>g&&(k|=2);f<-g?k|=4:f>g&&(k|=8);return k}var g=Math.cos(b),h=0<g,k=1E-6<la(g),l=Wd(b,6*ka);return Vc(c,function(b){var g,l,m,n,p;return{lineStart:function(){n=m=!1;p=1},point:function(r,q){var t=
[r,q],ya,v=c(r,q),w=h?v?0:d(r,q):v?d(r+(0>r?ja:-ja),q):0;!g&&(n=m=v)&&b.lineStart();v!==m&&(ya=f(g,t),Hb(g,ya)||Hb(t,ya))&&(t[0]+=1E-6,t[1]+=1E-6,v=c(t[0],t[1]));if(v!==m)p=0,v?(b.lineStart(),ya=f(t,g),b.point(ya[0],ya[1])):(ya=f(g,t),b.point(ya[0],ya[1]),b.lineEnd()),g=ya;else if(k&&g&&h^v){var u;w&l||!(u=f(t,g,!0))||(p=0,h?(b.lineStart(),b.point(u[0][0],u[0][1]),b.point(u[1][0],u[1][1]),b.lineEnd()):(b.point(u[1][0],u[1][1]),b.lineEnd(),b.lineStart(),b.point(u[0][0],u[0][1])))}!v||g&&Hb(g,t)||b.point(t[0],
t[1]);g=t;m=v;l=w},lineEnd:function(){m&&b.lineEnd();g=null},clean:function(){return p|(n&&m)<<1}}},l,h?[0,-b]:[-ja,b-ja])}function Jb(b,c,f,d){return function(g){var h=g.a,k=g.b,l=h.x,h=h.y,m=0,n=1,p=k.x-l,k=k.y-h,r;r=b-l;if(p||!(0<r)){r/=p;if(0>p){if(r<m)return;r<n&&(n=r)}else if(0<p){if(r>n)return;r>m&&(m=r)}r=f-l;if(p||!(0>r)){r/=p;if(0>p){if(r>n)return;r>m&&(m=r)}else if(0<p){if(r<m)return;r<n&&(n=r)}r=c-h;if(k||!(0<r)){r/=k;if(0>k){if(r<m)return;r<n&&(n=r)}else if(0<k){if(r>n)return;r>m&&(m=
r)}r=d-h;if(k||!(0>r)){r/=k;if(0>k){if(r>n)return;r>m&&(m=r)}else if(0<k){if(r<m)return;r<n&&(n=r)}0<m&&(g.a={x:l+m*p,y:h+m*k});1>n&&(g.b={x:l+n*p,y:h+n*k});return g}}}}}}function Lc(b,c,f,d){function g(d,h){return 1E-6>la(d[0]-b)?0<h?0:3:1E-6>la(d[0]-f)?0<h?2:1:1E-6>la(d[1]-c)?0<h?1:0:0<h?3:2}function h(b,c){return k(b.x,c.x)}function k(b,c){var f=g(b,1),d=g(c,1);return f!==d?f-d:0===f?c[1]-b[1]:1===f?b[0]-c[0]:2===f?b[1]-c[1]:c[0]-b[0]}return function(l){function m(h,l,n,p){var r=0,q=0;if(null==
h||(r=g(h,n))!==(q=g(l,n))||0>k(h,l)^0<n){do p.point(0===r||3===r?b:f,1<r?d:c);while((r=(r+n+4)%4)!==q)}else p.point(l[0],l[1])}function n(g,h){b<=g&&g<=f&&c<=h&&h<=d&&l.point(g,h)}function p(g,h){g=Math.max(-1E9,Math.min(1E9,g));h=Math.max(-1E9,Math.min(1E9,h));var k=b<=g&&g<=f&&c<=h&&h<=d;w&&u.push([g,h]);if(E)A=g,x=h,D=k,E=!1,k&&(l.lineStart(),l.point(g,h));else if(k&&C)l.point(g,h);else{var m={a:{x:B,y:z},b:{x:g,y:h}};t(m)?(C||(l.lineStart(),l.point(m.a.x,m.a.y)),l.point(m.b.x,m.b.y),k||l.lineEnd(),
M=!1):k&&(l.lineStart(),l.point(g,h),M=!1)}B=g;z=h;C=k}var r=l,q=ed(),t=Jb(b,c,f,d),v,w,u,y={point:n,lineStart:function(){y.point=p;w&&w.push(u=[]);E=!0;C=!1;B=z=NaN},lineEnd:function(){v&&(p(A,x),D&&C&&q.rejoin(),v.push(q.buffer()));y.point=n;C&&l.lineEnd()},polygonStart:function(){l=q;v=[];w=[];M=!0},polygonEnd:function(){l=r;v=O.merge(v);var c;c=[b,d];for(var f=0,g=w.length,k=c[1],n=0;n<g;++n)for(var p=1,q=w[n],t=q.length,y=q[0],A;p<t;++p)A=q[p],y[1]<=k?A[1]>k&&0<ma(y,A,c)&&++f:A[1]<=k&&0>ma(y,
A,c)&&--f,y=A;c=0!==f;f=M&&c;g=v.length;if(f||g)l.polygonStart(),f&&(l.lineStart(),m(null,null,1,l),l.lineEnd()),g&&Kc(v,h,c,m,l),l.polygonEnd();v=w=u=null}},A,x,D,B,z,C,E,M;return y}}function Yb(b){var c=0,f=ja/3,d=wc(b);b=d(c,f);b.parallels=function(b){return arguments.length?d(c=b[0]*ja/180,f=b[1]*ja/180):[c/ja*180,f/ja*180]};return b}function Mc(b,c){function f(b,c){var d=Math.sqrt(h-2*g*Math.sin(c))/g;return[d*Math.sin(b*=g),k-d*Math.cos(b)]}var d=Math.sin(b),g=(d+Math.sin(c))/2,h=1+d*(2*g-d),
k=Math.sqrt(h)/g;f.invert=function(b,c){var f=k-c;return[Math.atan2(b,f)/g,va((h-(b*b+f*f)*g*g)/(2*g))]};return f}function de(){function b(c,f){nd+=g*c-d*f;d=c;g=f}var c,f,d,g;Nb.point=function(h,k){Nb.point=b;c=d=h;f=g=k};Nb.lineEnd=function(){b(c,f)}}function ee(){function b(c,f){k.push("M",c,",",f,h)}function c(b,d){k.push("M",b,",",d);l.point=f}function f(b,c){k.push("L",b,",",c)}function d(){l.point=b}function g(){k.push("Z")}var h=Oe(4.5),k=[],l={point:b,lineStart:function(){l.point=c},lineEnd:d,
polygonStart:function(){l.lineEnd=g},polygonEnd:function(){l.lineEnd=d;l.point=b},pointRadius:function(b){h=Oe(b);return l},result:function(){if(k.length){var b=k.join("");k=[];return b}}};return l}function Oe(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function Qb(b,c){yb+=b;zb+=c;++rb}function Pe(){function b(d,g){var h=d-c,k=g-f,h=Math.sqrt(h*h+k*k);fb+=h*(c+d)/2;gb+=h*(f+g)/2;Za+=h;Qb(c=d,f=g)}var c,f;lb.point=function(d,g){lb.point=b;Qb(c=d,f=g)}}function Qe(){lb.point=
Qb}function Kg(){function b(c,f){var h=c-d,k=f-g,h=Math.sqrt(h*h+k*k);fb+=h*(d+c)/2;gb+=h*(g+f)/2;Za+=h;h=g*c-d*f;Lb+=h*(d+c);Mb+=h*(g+f);sb+=3*h;Qb(d=c,g=f)}var c,f,d,g;lb.point=function(h,k){lb.point=b;Qb(c=d=h,f=g=k)};lb.lineEnd=function(){b(c,f)}}function Lg(b){function c(f,d){b.moveTo(f+k,d);b.arc(f,d,k,0,cb)}function f(c,g){b.moveTo(c,g);l.point=d}function d(c,f){b.lineTo(c,f)}function g(){l.point=c}function h(){b.closePath()}var k=4.5,l={point:c,lineStart:function(){l.point=f},lineEnd:g,polygonStart:function(){l.lineEnd=
h},polygonEnd:function(){l.lineEnd=g;l.point=c},pointRadius:function(b){k=b;return l},result:x};return l}function Re(b){function c(b){return(l?d:f)(b)}function f(c){return Te(c,function(f,d){f=b(f,d);c.point(f[0],f[1])})}function d(c){function f(d,g){d=b(d,g);c.point(d[0],d[1])}function h(){x=NaN;C.point=k;c.lineStart()}function k(f,d){var h=wb([f,d]),m=b(f,d);g(x,D,A,B,z,Ua,x=m[0],D=m[1],A=f,B=h[0],z=h[1],Ua=h[2],l,c);c.point(x,D)}function m(){C.point=f;c.lineEnd()}function n(){h();C.point=p;C.lineEnd=
r}function p(b,c){k(q=b,c);t=x;v=D;w=B;u=z;y=Ua;C.point=k}function r(){g(x,D,A,B,z,Ua,t,v,q,w,u,y,l,c);C.lineEnd=m;m()}var q,t,v,w,u,y,A,x,D,B,z,Ua,C={point:f,lineStart:h,lineEnd:m,polygonStart:function(){c.polygonStart();C.lineStart=n},polygonEnd:function(){c.polygonEnd();C.lineStart=h}};return C}function g(c,f,d,l,m,n,p,r,q,t,v,w,u,y){var A=p-c,x=r-f,D=A*A+x*x;if(D>4*h&&u--){var B=l+t,z=m+v,Ua=n+w,C=Math.sqrt(B*B+z*z+Ua*Ua),E=Math.asin(Ua/=C),fe=1E-6>la(la(Ua)-1)||1E-6>la(d-q)?(d+q)/2:Math.atan2(z,
B),M=b(fe,E),E=M[0],M=M[1],Kb=E-c,N=M-f,G=x*Kb-A*N;if(G*G/D>h||.3<la((A*Kb+x*N)/D-.5)||l*t+m*v+n*w<k)g(c,f,d,l,m,n,E,M,fe,B/=C,z/=C,Ua,u,y),y.point(E,M),g(E,M,fe,B,z,Ua,p,r,q,t,v,w,u,y)}}var h=.5,k=Math.cos(30*ka),l=16;c.precision=function(b){if(!arguments.length)return Math.sqrt(h);l=0<(h=b*b)&&16;return c};return c}function Mg(b){var c=Re(function(c,f){return b([c*Ca,f*Ca])});return function(b){return Ue(c(b))}}function Se(b){this.stream=b}function Te(b,c){return{point:c,sphere:function(){b.sphere()},
lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function Bb(b){return wc(function(){return b})()}function wc(b){function c(b){b=l(b[0]*ka,b[1]*ka);return[b[0]*n+A,x-b[1]*n]}function f(b){return(b=l.invert((b[0]-A)/n,(x-b[1])/n))&&[b[0]*Ca,b[1]*Ca]}function d(){l=Jc(k=Vd(w,u,y),h);var b=h(q,t);A=p-b[0]*n;x=r+b[1]*n;return g()}function g(){E&&(E.valid=!1,E=null);return c}var h,k,l,m=Re(function(b,c){b=
h(b,c);return[b[0]*n+A,x-b[1]*n]}),n=150,p=480,r=250,q=0,t=0,w=0,u=0,y=0,A,x,D=Ff,B=v,z=null,C=null,E;c.stream=function(b){E&&(E.valid=!1);E=Ue(D(k,m(B(b))));E.valid=!0;return E};c.clipAngle=function(b){if(!arguments.length)return z;D=null==b?(z=b,Ff):ce((z=+b)*ka);return g()};c.clipExtent=function(b){if(!arguments.length)return C;B=(C=b)?Lc(b[0][0],b[0][1],b[1][0],b[1][1]):v;return g()};c.scale=function(b){if(!arguments.length)return n;n=+b;return d()};c.translate=function(b){if(!arguments.length)return[p,
r];p=+b[0];r=+b[1];return d()};c.center=function(b){if(!arguments.length)return[q*Ca,t*Ca];q=b[0]%360*ka;t=b[1]%360*ka;return d()};c.rotate=function(b){if(!arguments.length)return[w*Ca,u*Ca,y*Ca];w=b[0]%360*ka;u=b[1]%360*ka;y=2<b.length?b[2]%360*ka:0;return d()};O.rebind(c,m,"precision");return function(){h=b.apply(this,arguments);c.invert=h.invert&&f;return d()}}function Ue(b){return Te(b,function(c,f){b.point(c*ka,f*ka)})}function yc(b,c){return[b,c]}function Ve(b,c){return[b>ja?b-cb:b<-ja?b+cb:
b,c]}function Vd(b,c,f){return b?c||f?Jc(jf(b),lf(c,f)):jf(b):c||f?lf(c,f):Ve}function ef(b){return function(c,f){return c+=b,[c>ja?c-cb:c<-ja?c+cb:c,f]}}function jf(b){var c=ef(b);c.invert=ef(-b);return c}function lf(b,c){function f(b,c){var l=Math.cos(c),m=Math.cos(b)*l,l=Math.sin(b)*l,n=Math.sin(c),p=n*d+m*g;return[Math.atan2(l*h-p*k,m*d-n*g),va(p*h+l*k)]}var d=Math.cos(b),g=Math.sin(b),h=Math.cos(c),k=Math.sin(c);f.invert=function(b,c){var f=Math.cos(c),l=Math.cos(b)*f,f=Math.sin(b)*f,m=Math.sin(c),
n=m*h-f*k;return[Math.atan2(f*h+m*k,l*d+n*g),va(n*d-l*g)]};return f}function Wd(b,c){var f=Math.cos(b),d=Math.sin(b);return function(g,h,k,l){var m=k*c;if(null!=g){if(g=Ze(f,g),h=Ze(f,h),0<k?g<h:g>h)g+=k*cb}else g=b+k*cb,h=b-.5*m;for(var n;0<k?g>h:g<h;g-=m)l.point((n=Gb([f,-d*Math.cos(g),-d*Math.sin(g)]))[0],n[1])}}function Ze(b,c){var f=wb(c);f[0]-=b;pb(f);var d=za(-f[1]);return((0>-f[2]?-d:d)+2*Math.PI-1E-6)%(2*Math.PI)}function cf(b,c,f){var d=O.range(b,c-1E-6,f).concat(c);return function(b){return d.map(function(c){return[b,
c]})}}function nf(b,c,f){var d=O.range(b,c-1E-6,f).concat(c);return function(b){return d.map(function(c){return[c,b]})}}function Xd(b){return b.source}function Rd(b){return b.target}function bh(b,c,f,d){var g=Math.cos(c),h=Math.sin(c),k=Math.cos(d),l=Math.sin(d),m=g*Math.cos(b),n=g*Math.sin(b),p=k*Math.cos(f),r=k*Math.sin(f),q=2*Math.asin(Math.sqrt(ua(d-c)+g*k*ua(f-b))),t=1/Math.sin(q);f=q?function(b){var c=Math.sin(b*=q)*t;b=Math.sin(q-b)*t;var f=b*m+c*p,d=b*n+c*r;return[Math.atan2(d,f)*Ca,Math.atan2(b*
h+c*l,Math.sqrt(f*f+d*d))*Ca]}:function(){return[b*Ca,c*Ca]};f.distance=q;return f}function Cc(b,c){function f(c,d){var g=Math.cos(d),h=b(Math.cos(c)*g);return[h*g*Math.sin(c),h*Math.sin(d)]}f.invert=function(b,f){var d=Math.sqrt(b*b+f*f),g=c(d),h=Math.sin(g);return[Math.atan2(b*h,d*Math.cos(g)),Math.asin(d&&f*h/d)]};return f}function kf(b,c){function f(b,c){0<h?c<-Ea+1E-6&&(c=-Ea+1E-6):c>Ea-1E-6&&(c=Ea-1E-6);var d=h/Math.pow(Math.tan(ja/4+c/2),g);return[d*Math.sin(g*b),h-d*Math.cos(g*b)]}var d=Math.cos(b),
g=b===c?Math.sin(b):Math.log(d/Math.cos(c))/Math.log(Math.tan(ja/4+c/2)/Math.tan(ja/4+b/2)),h=d*Math.pow(Math.tan(ja/4+b/2),g)/g;if(!g)return Yc;f.invert=function(b,c){var f=h-c;return[Math.atan2(b,f)/g,2*Math.atan(Math.pow(h/((0<g?1:0>g?-1:0)*Math.sqrt(b*b+f*f)),1/g))-Ea]};return f}function of(b,c){function f(b,c){var d=h-c;return[d*Math.sin(g*b),h-d*Math.cos(g*b)]}var d=Math.cos(b),g=b===c?Math.sin(b):(d-Math.cos(c))/(c-b),h=d/g+b;if(1E-6>la(g))return yc;f.invert=function(b,c){var f=h-c;return[Math.atan2(b,
f)/g,h-(0<g?1:0>g?-1:0)*Math.sqrt(b*b+f*f)]};return f}function Yc(b,c){return[b,Math.log(Math.tan(ja/4+c/2))]}function Ye(b){var c=Bb(b),f=c.scale,d=c.translate,g=c.clipExtent,h;c.scale=function(){var b=f.apply(c,arguments);return b===c?h?c.clipExtent(null):c:b};c.translate=function(){var b=d.apply(c,arguments);return b===c?h?c.clipExtent(null):c:b};c.clipExtent=function(b){var k=g.apply(c,arguments);if(k===c){if(h=null==b){var l=ja*f(),m=d();g([[m[0]-l,m[1]-l],[m[0]+l,m[1]+l]])}}else h&&(k=null);
return k};return c.clipExtent(null)}function Od(b,c){return[Math.log(Math.tan(ja/4+c/2)),-b]}function gc(b){return b[0]}function zc(b){return b[1]}function af(b){for(var c=b.length,f=[0,1],d=2,g=2;g<c;g++){for(;1<d&&0>=ma(b[f[d-2]],b[f[d-1]],b[g]);)--d;f[d++]=g}return f.slice(0,d)}function ch(b,c){return b[0]-c[0]||b[1]-c[1]}function Yd(b,c,f){return(f[0]-c[0])*(b[1]-c[1])<(f[1]-c[1])*(b[0]-c[0])}function Pd(b,c,f,d){var g=b[0],h=f[0],k=c[0]-g,l=d[0]-h;b=b[1];f=f[1];c=c[1]-b;d=d[1]-f;h=(l*(b-f)-d*
(g-h))/(d*k-l*c);return[g+h*k,b+h*c]}function bf(b){var c=b[0];b=b[b.length-1];return!(c[0]-b[0]||c[1]-b[1])}function Ug(){$c(this);this.edge=this.site=this.circle=null}function df(b){var c=Gf.pop()||new Ug;c.site=b;return c}function Ud(b){ic(b);rc.remove(b);Gf.push(b);$c(b)}function pf(b,c){var f=b.site,d=f.x,g=f.y,h=g-c;if(!h)return d;var k=b.P;if(!k)return-Infinity;var f=k.site,k=f.x,f=f.y,l=f-c;if(!l)return k;var m=k-d,n=1/h-1/l,p=m/l;return n?(-p+Math.sqrt(p*p-2*n*(m*m/(-2*l)-f+l/2+g-h/2)))/
n+d:(d+k)/2}function qf(b){this.site=b;this.edges=[]}function $e(b,c){return c.angle-b.angle}function dh(){$c(this);this.x=this.y=this.arc=this.site=this.cy=null}function hc(b){var c=b.P,f=b.N;if(c&&f){var d=c.site,c=b.site,g=f.site;if(d!==g){var f=c.x,h=c.y,k=d.x-f,l=d.y-h,d=g.x-f,g=g.y-h,m=2*(k*g-l*d);if(!(-1E-12<=m)){var n=k*k+l*l,p=d*d+g*g,l=(g*n-l*p)/m,k=(k*p-d*n)/m,g=k+h,h=Hf.pop()||new dh;h.arc=b;h.site=c;h.x=l+f;h.y=g+Math.sqrt(l*l+k*k);h.cy=g;b.circle=h;b=null;for(c=Oc._;c;)if(h.y<c.y||h.y===
c.y&&h.x<=c.x)if(c.L)c=c.L;else{b=c.P;break}else if(c.R)c=c.R;else{b=c;break}Oc.insert(b,h);b||(le=h)}}}}function ic(b){var c=b.circle;c&&(c.P||(le=c.N),Oc.remove(c),Hf.push(c),$c(c),b.circle=null)}function ah(b,c){var f=b.b;if(f)return!0;var d=b.a,f=c[0][0],g=c[1][0],h=c[0][1],k=c[1][1],l=b.l,m=b.r,n=l.x,l=l.y,p=m.x,m=m.y,r=(n+p)/2,q;if(m===l){if(r<f||r>=g)return;if(n>p){if(!d)d={x:r,y:h};else if(d.y>=k)return;f={x:r,y:k}}else{if(!d)d={x:r,y:k};else if(d.y<h)return;f={x:r,y:h}}}else if(q=(n-p)/(m-
l),r=(l+m)/2-q*r,-1>q||1<q)if(n>p){if(!d)d={x:(h-r)/q,y:h};else if(d.y>=k)return;f={x:(k-r)/q,y:k}}else{if(!d)d={x:(k-r)/q,y:k};else if(d.y<h)return;f={x:(h-r)/q,y:h}}else if(l<m){if(!d)d={x:f,y:q*f+r};else if(d.x>=g)return;f={x:g,y:q*g+r}}else{if(!d)d={x:g,y:q*g+r};else if(d.x<f)return;f={x:f,y:q*f+r}}b.a=d;b.b=f;return!0}function rf(b,c){this.l=b;this.r=c;this.a=this.b=null}function Bc(b,c,f,d){var g=new rf(b,c);sc.push(g);f&&Xc(g,b,c,f);d&&Xc(g,c,b,d);ac[b.i].edges.push(new Zc(g,b,c));ac[c.i].edges.push(new Zc(g,
c,b));return g}function eh(b,c,f){b=new rf(b,null);b.a=c;b.b=f;sc.push(b);return b}function Xc(b,c,f,d){b.a||b.b?b.l===f?b.b=d:b.a=d:(b.a=d,b.l=c,b.r=f)}function Zc(b,c,f){var d=b.a,g=b.b;this.edge=b;this.site=c;this.angle=f?Math.atan2(f.y-c.y,f.x-c.x):b.l===c?Math.atan2(g.x-d.x,d.y-g.y):Math.atan2(d.x-g.x,g.y-d.y)}function Td(){this._=null}function $c(b){b.U=b.C=b.L=b.R=b.P=b.N=null}function Dc(b,c){var f=c.R,d=c.U;d?d.L===c?d.L=f:d.R=f:b._=f;f.U=d;c.U=f;c.R=f.L;c.R&&(c.R.U=c);f.L=c}function Ec(b,
c){var f=c.L,d=c.U;d?d.L===c?d.L=f:d.R=f:b._=f;f.U=d;c.U=f;c.L=f.R;c.L&&(c.L.U=c);f.R=c}function sf(b){for(;b.L;)b=b.L;return b}function Sd(b,c){var f=b.sort(fh).pop(),d,g,h;sc=[];ac=Array(b.length);rc=new Td;for(Oc=new Td;;)if(h=le,f&&(!h||f.y<h.y||f.y===h.y&&f.x<h.x)){if(f.x!==d||f.y!==g){ac[f.i]=new qf(f);d=f;for(var k=d.x,l=d.y,m=h=g=void 0,n=void 0,p=rc._;p;)if(m=pf(p,l)-k,1E-6<m)p=p.L;else{var r=p,n=l,q=r.N;q?n=pf(q,n):(r=r.site,n=r.y===n?r.x:Infinity);n=k-n;if(1E-6<n){if(!p.R){g=p;break}p=
p.R}else{-1E-6<m?(g=p.P,h=p):-1E-6<n?(g=p,h=p.N):g=h=p;break}}k=df(d);rc.insert(g,k);if(g||h)if(g===h)ic(g),h=df(g.site),rc.insert(k,h),k.edge=h.edge=Bc(g.site,k.site),hc(g),hc(h);else if(h){ic(g);ic(h);var l=g.site,p=l.x,n=l.y,r=d.x-p,q=d.y-n,m=h.site,t=m.x-p,v=m.y-n,w=2*(r*v-q*t),u=r*r+q*q,y=t*t+v*v,p={x:(v*u-q*y)/w+p,y:(r*y-t*u)/w+n};Xc(h.edge,l,m,p);k.edge=Bc(l,d,null,p);h.edge=Bc(d,m,null,p);hc(g);hc(h)}else k.edge=Bc(g.site,k.site);d=f.x;g=f.y}f=b.pop()}else if(h){m=h.arc;h=m.circle;l=h.x;p=
h.cy;h={x:l,y:p};r=m.P;n=m.N;k=[m];Ud(m);for(m=r;m.circle&&1E-6>la(l-m.circle.x)&&1E-6>la(p-m.circle.cy);)r=m.P,k.unshift(m),Ud(m),m=r;k.unshift(m);ic(m);for(r=n;r.circle&&1E-6>la(l-r.circle.x)&&1E-6>la(p-r.circle.cy);)n=r.N,k.push(r),Ud(r),r=n;k.push(r);ic(r);l=k.length;p=void 0;for(p=1;p<l;++p)r=k[p],m=k[p-1],Xc(r.edge,m.site,r.site,h);m=k[0];r=k[l-1];r.edge=Bc(m.site,r.site,null,h);hc(m);hc(r)}else break;if(c){f=sc;d=Jb(c[0][0],c[0][1],c[1][0],c[1][1]);for(g=f.length;g--;)if(h=f[g],!ah(h,c)||!d(h)||
1E-6>la(h.a.x-h.b.x)&&1E-6>la(h.a.y-h.b.y))h.a=h.b=null,f.splice(g,1);f=c[0][0];d=c[1][0];g=c[0][1];h=c[1][1];p=ac;for(n=p.length;n--;)if((r=p[n])&&r.prepare())for(t=r.edges,v=t.length,q=0;q<v;)if(w=t[q].end(),l=w.x,m=w.y,u=t[++q%v].start(),k=u.x,u=u.y,1E-6<la(l-k)||1E-6<la(m-u))t.splice(q,0,new Zc(eh(r.site,w,1E-6>la(l-f)&&1E-6<h-m?{x:f,y:1E-6>la(k-f)?u:h}:1E-6>la(m-h)&&1E-6<d-l?{x:1E-6>la(u-h)?k:d,y:h}:1E-6>la(l-d)&&1E-6<m-g?{x:d,y:1E-6>la(k-d)?u:g}:1E-6>la(m-g)&&1E-6<l-f?{x:1E-6>la(u-g)?k:f,y:g}:
null),r.site,null)),++v}f={cells:ac,edges:sc};rc=Oc=sc=ac=null;return f}function fh(b,c){return c.y-b.y||c.x-b.x}function gh(b){return b.x}function hh(b){return b.y}function tf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ac(b,c,f,d,g,h){if(!b(c,f,d,g,h)){var k=.5*(f+g),l=.5*(d+h);c=c.nodes;c[0]&&Ac(b,c[0],f,d,k,l);c[1]&&Ac(b,c[1],k,d,g,l);c[2]&&Ac(b,c[2],f,l,k,h);c[3]&&Ac(b,c[3],k,l,g,h)}}function Vg(b,c,f,d,g,h,k){var l=Infinity,m;(function hd(b,n,p,r,q){if(!(n>h||p>k||r<d||q<g)){if(t=
b.point){var t,v=c-b.x,w=f-b.y,v=v*v+w*w;v<l&&(v=Math.sqrt(l=v),d=c-v,g=f-v,h=c+v,k=f+v,m=t)}t=b.nodes;for(var v=.5*(n+r),w=.5*(p+q),u=(f>=w)<<1|c>=v,ya=u+4;u<ya;++u)if(b=t[u&3])switch(u&3){case 0:hd(b,n,p,v,w);break;case 1:hd(b,v,p,r,w);break;case 2:hd(b,n,w,v,q);break;case 3:hd(b,v,w,r,q)}}})(b,d,g,h,k);return m}function Qd(b,c){b=O.rgb(b);c=O.rgb(c);var f=b.r,d=b.g,g=b.b,h=c.r-f,k=c.g-d,l=c.b-g;return function(b){return"#"+ab(Math.round(f+h*b))+ab(Math.round(d+k*b))+ab(Math.round(g+l*b))}}function uf(b,
c){var f={},d={},g;for(g in b)g in c?f[g]=Eb(b[g],c[g]):d[g]=b[g];for(g in c)g in b||(d[g]=c[g]);return function(b){for(g in f)d[g]=f[g](b);return d}}function vb(b,c){b=+b;c=+c;return function(f){return b*(1-f)+c*f}}function vf(b,c){var f=me.lastIndex=ne.lastIndex=0,d,g,h,k=-1,l=[],m=[];b+="";for(c+="";(d=me.exec(b))&&(g=ne.exec(c));)(h=g.index)>f&&(h=c.slice(f,h),l[k]?l[k]+=h:l[++k]=h),(d=d[0])===(g=g[0])?l[k]?l[k]+=g:l[++k]=g:(l[++k]=null,m.push({i:k,x:vb(d,g)})),f=ne.lastIndex;f<c.length&&(h=c.slice(f),
l[k]?l[k]+=h:l[++k]=h);return 2>l.length?m[0]?(c=m[0].x,function(b){return c(b)+""}):function(){return c}:(c=m.length,function(b){for(var f=0,d;f<c;++f)l[(d=m[f]).i]=d.x(b);return l.join("")})}function Eb(b,c){for(var f=O.interpolators.length,d;0<=--f&&!(d=O.interpolators[f](b,c)););return d}function Wc(b,c){var f=[],d=[],g=b.length,h=c.length,k=Math.min(b.length,c.length),l;for(l=0;l<k;++l)f.push(Eb(b[l],c[l]));for(;l<g;++l)d[l]=b[l];for(;l<h;++l)d[l]=c[l];return function(b){for(l=0;l<k;++l)d[l]=
f[l](b);return d}}function Ng(b){return function(c){return 0>=c?0:1<=c?1:b(c)}}function We(b){return function(c){return 1-b(1-c)}}function Xe(b){return function(c){return.5*(.5>c?b(2*c):2-b(2-2*c))}}function Og(b){return b*b}function Pg(b){return b*b*b}function Qg(b){if(0>=b)return 0;if(1<=b)return 1;var c=b*b,f=c*b;return 4*(.5>b?f:3*(b-c)+f-.75)}function Rg(b){return 1-Math.cos(b*Ea)}function Sg(b){return Math.pow(2,10*(b-1))}function Tg(b){return 1-Math.sqrt(1-b*b)}function Wg(b){return b<1/2.75?
7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function ff(b,c){c-=b;return function(f){return Math.round(b+c*f)}}function gf(b){var c=[b.a,b.b],f=[b.c,b.d],d=hf(c),g=c[0]*f[0]+c[1]*f[1],h=-g;f[0]+=h*c[0];f[1]+=h*c[1];h=hf(f)||0;c[0]*f[1]<f[0]*c[1]&&(c[0]*=-1,c[1]*=-1,d*=-1,g*=-1);this.rotate=(d?Math.atan2(c[1],c[0]):Math.atan2(-f[0],f[1]))*Ca;this.translate=[b.e,b.f];this.scale=[d,h];this.skew=h?Math.atan2(g,h)*Ca:0}function hf(b){var c=
Math.sqrt(b[0]*b[0]+b[1]*b[1]);c&&(b[0]/=c,b[1]/=c);return c}function fc(b){return b.length?b.pop()+",":""}function Xg(b,c,f,d){b[0]!==c[0]||b[1]!==c[1]?(f=f.push("translate(",null,",",null,")"),d.push({i:f-4,x:vb(b[0],c[0])},{i:f-2,x:vb(b[1],c[1])})):(c[0]||c[1])&&f.push("translate("+c+")")}function Yg(b,c,f,d){b!==c?(180<b-c?c+=360:180<c-b&&(b+=360),d.push({i:f.push(fc(f)+"rotate(",null,")")-2,x:vb(b,c)})):c&&f.push(fc(f)+"rotate("+c+")")}function Zg(b,c,f,d){b!==c?d.push({i:f.push(fc(f)+"skewX(",
null,")")-2,x:vb(b,c)}):c&&f.push(fc(f)+"skewX("+c+")")}function $g(b,c,f,d){b[0]!==c[0]||b[1]!==c[1]?(f=f.push(fc(f)+"scale(",null,",",null,")"),d.push({i:f-4,x:vb(b[0],c[0])},{i:f-2,x:vb(b[1],c[1])})):1===c[0]&&1===c[1]||f.push(fc(f)+"scale("+c+")")}function mf(b,c){var f=[],d=[];b=O.transform(b);c=O.transform(c);Xg(b.translate,c.translate,f,d);Yg(b.rotate,c.rotate,f,d);Zg(b.skew,c.skew,f,d);$g(b.scale,c.scale,f,d);b=c=null;return function(b){for(var c=-1,g=d.length,h;++c<g;)f[(h=d[c]).i]=h.x(b);
return f.join("")}}function kh(b,c){c=(c-=b=+b)||1/c;return function(f){return(f-b)/c}}function lh(b,c){c=(c-=b=+b)||1/c;return function(f){return Math.max(0,Math.min(1,(f-b)/c))}}function mh(b){var c=b.source;b=b.target;var f;var d=b;if(c===d)f=c;else{f=If(c);for(var d=If(d),g=f.pop(),h=d.pop(),k=null;g===h;)k=g,g=f.pop(),h=d.pop();f=k}for(d=[c];c!==f;)c=c.parent,d.push(c);for(c=d.length;b!==f;)d.splice(c,0,b),b=b.parent;return d}function If(b){for(var c=[],f=b.parent;null!=f;)c.push(b),b=f,f=f.parent;
c.push(b);return c}function nh(b){b.fixed|=2}function oh(b){b.fixed&=-7}function ph(b){b.fixed|=4;b.px=b.x;b.py=b.y}function qh(b){b.fixed&=-5}function Jf(b,c,f){var d=0,g=0;b.charge=0;if(!b.leaf)for(var h=b.nodes,k=h.length,l=-1,m;++l<k;)m=h[l],null!=m&&(Jf(m,c,f),b.charge+=m.charge,d+=m.charge*m.cx,g+=m.charge*m.cy);b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),c*=f[b.point.index],b.charge+=b.pointCharge=c,d+=c*b.point.x,g+=c*b.point.y);b.cx=d/b.charge;b.cy=g/b.charge}
function Pc(b,c){O.rebind(b,c,"sort","children","value");b.nodes=b;b.links=rh;return b}function Qc(b,c){for(var f=[b];null!=(b=f.pop());)if(c(b),(g=b.children)&&(d=g.length))for(var d,g;0<=--d;)f.push(g[d])}function tb(b,c){for(var f=[b],d=[];null!=(b=f.pop());)if(d.push(b),(k=b.children)&&(h=k.length))for(var g=-1,h,k;++g<h;)f.push(k[g]);for(;null!=(b=d.pop());)c(b)}function sh(b){return b.children}function th(b){return b.value}function uh(b,c){return c.value-b.value}function rh(b){return O.merge(b.map(function(b){return(b.children||
[]).map(function(c){return{source:b,target:c}})}))}function vh(b){return b.x}function wh(b){return b.y}function xh(b,c,f){b.y0=c;b.y=f}function oe(b){return O.range(b.length)}function pe(b){var c=-1;b=b[0].length;for(var f=[];++c<b;)f[c]=0;return f}function yh(b){for(var c=1,f=0,d=b[0][1],g,h=b.length;c<h;++c)(g=b[c][1])>d&&(f=c,d=g);return f}function zh(b){return b.reduce(Ah,0)}function Ah(b,c){return b+c[1]}function Bh(b,c){return Kf(b,Math.ceil(Math.log(c.length)/Math.LN2+1))}function Kf(b,c){for(var f=
-1,d=+b[0],g=(b[1]-d)/c,h=[];++f<=c;)h[f]=g*f+d;return h}function Ch(b){return[O.min(b),O.max(b)]}function Dh(b,c){return b.value-c.value}function qe(b,c){var f=b._pack_next;b._pack_next=c;c._pack_prev=b;c._pack_next=f;f._pack_prev=c}function Lf(b,c){b._pack_next=c;c._pack_prev=b}function Mf(b,c){var f=c.x-b.x,d=c.y-b.y,g=b.r+c.r;return.999*g*g>f*f+d*d}function Nf(b){function c(b){d=Math.min(b.x-b.r,d);g=Math.max(b.x+b.r,g);h=Math.min(b.y-b.r,h);k=Math.max(b.y+b.r,k)}if((f=b.children)&&(t=f.length)){var f,
d=Infinity,g=-Infinity,h=Infinity,k=-Infinity,l,m,n,p,r,q,t;f.forEach(Eh);l=f[0];l.x=-l.r;l.y=0;c(l);if(1<t&&(m=f[1],m.x=m.r,m.y=0,c(m),2<t))for(n=f[2],Of(l,m,n),c(n),qe(l,n),l._pack_prev=n,qe(n,m),m=l._pack_next,p=3;p<t;p++){Of(l,m,n=f[p]);var v=0,w=1,u=1;for(r=m._pack_next;r!==m;r=r._pack_next,w++)if(Mf(r,n)){v=1;break}if(1==v)for(q=l._pack_prev;q!==r._pack_prev&&!Mf(q,n);q=q._pack_prev,u++);v?(w<u||w==u&&m.r<l.r?Lf(l,m=r):Lf(l=q,m),p--):(qe(l,n),m=n,c(n))}l=(d+g)/2;m=(h+k)/2;for(p=r=0;p<t;p++)n=
f[p],n.x-=l,n.y-=m,r=Math.max(r,n.r+Math.sqrt(n.x*n.x+n.y*n.y));b.r=r;f.forEach(Fh)}}function Eh(b){b._pack_next=b._pack_prev=b}function Fh(b){delete b._pack_next;delete b._pack_prev}function Pf(b,c,f,d){var g=b.children;b.x=c+=d*b.x;b.y=f+=d*b.y;b.r*=d;if(g){b=-1;for(var h=g.length;++b<h;)Pf(g[b],c,f,d)}}function Of(b,c,f){var d=b.r+f.r,g=c.x-b.x,h=c.y-b.y;if(d&&(g||h)){var k=c.r+f.r,l=g*g+h*h,k=k*k,d=d*d;c=.5+(d-k)/(2*l);k=Math.sqrt(Math.max(0,2*k*(d+l)-(d-=l)*d-k*k))/(2*l);f.x=b.x+c*g+k*h;f.y=
b.y+c*h-k*g}else f.x=b.x+d,f.y=b.y}function Qf(b,c){return b.parent==c.parent?1:2}function re(b){var c=b.children;return c.length?c[0]:b.t}function se(b){var c=b.children,f;return(f=c.length)?c[f-1]:b.t}function Gh(b){return 1+O.max(b,function(b){return b.y})}function Hh(b){return b.reduce(function(b,c){return b+c.x},0)/b.length}function Rf(b){var c=b.children;return c&&c.length?Rf(c[0]):b}function Sf(b){var c=b.children,f;return c&&(f=c.length)?Sf(c[f-1]):b}function te(b){return{x:b.x,y:b.y,dx:b.dx,
dy:b.dy}}function Tf(b,c){var f=b.x+c[3],d=b.y+c[0],g=b.dx-c[1]-c[3],h=b.dy-c[0]-c[2];0>g&&(f+=g/2,g=0);0>h&&(d+=h/2,h=0);return{x:f,y:d,dx:g,dy:h}}function tc(b){var c=b[0];b=b[b.length-1];return c<b?[c,b]:[b,c]}function od(b){return b.rangeExtent?b.rangeExtent():tc(b.range())}function Ih(b,c,f,d){var g=f(b[0],b[1]),h=d(c[0],c[1]);return function(b){return h(g(b))}}function pd(b,c){var f=0,d=b.length-1,g=b[f],h=b[d],k;h<g&&(k=f,f=d,d=k,k=g,g=h,h=k);b[f]=c.floor(g);b[d]=c.ceil(h);return b}function Uf(b){return b?
{floor:function(c){return Math.floor(c/b)*b},ceil:function(c){return Math.ceil(c/b)*b}}:Jh}function Kh(b,c,f,d){var g=[],h=[],k=0,l=Math.min(b.length,c.length)-1;b[l]<b[0]&&(b=b.slice().reverse(),c=c.slice().reverse());for(;++k<=l;)g.push(f(b[k-1],b[k])),h.push(d(c[k-1],c[k]));return function(c){var f=O.bisect(b,c,1,l)-1;return h[f](g[f](c))}}function Vf(b,c,f,d){function g(){var m=2<Math.min(b.length,c.length)?Kh:Ih,n=d?lh:kh;k=m(b,c,n,f);l=m(c,b,n,Eb);return h}function h(b){return k(b)}var k,l;
h.invert=function(b){return l(b)};h.domain=function(c){if(!arguments.length)return b;b=c.map(Number);return g()};h.range=function(b){if(!arguments.length)return c;c=b;return g()};h.rangeRound=function(b){return h.range(b).interpolate(ff)};h.clamp=function(b){if(!arguments.length)return d;d=b;return g()};h.interpolate=function(b){if(!arguments.length)return f;f=b;return g()};h.ticks=function(c){return O.range.apply(O,Ob(b,c))};h.tickFormat=function(c,f){return ue(b,c,f)};h.nice=function(c){Wf(b,c);
return g()};h.copy=function(){return Vf(b,c,f,d)};return g()}function ve(b,c){return O.rebind(b,c,"range","rangeRound","interpolate","clamp")}function Wf(b,c){pd(b,Uf(Ob(b,c)[2]));pd(b,Uf(Ob(b,c)[2]));return b}function Ob(b,c){null==c&&(c=10);var f=tc(b),d=f[1]-f[0],g=Math.pow(10,Math.floor(Math.log(d/c)/Math.LN10)),d=c/d*g;.15>=d?g*=10:.35>=d?g*=5:.75>=d&&(g*=2);f[0]=Math.ceil(f[0]/g)*g;f[1]=Math.floor(f[1]/g)*g+.5*g;f[2]=g;return f}function ue(b,c,f){b=Ob(b,c);if(f){c=Bf.exec(f);c.shift();if("s"===
c[8]){var d=O.formatPrefix(Math.max(la(b[0]),la(b[1])));c[7]||(c[7]="."+qd(d.scale(b[2])));c[8]="f";f=O.format(c.join(""));return function(b){return f(d.scale(b))+d.symbol}}c[7]||(c[7]="."+Lh(c[8],b));f=c.join("")}else f=",."+qd(b[2])+"f";return O.format(f)}function qd(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Lh(b,c){var f=qd(c[2]);return b in Mh?Math.abs(f-qd(Math.max(la(c[0]),la(c[1]))))+ +("e"!==b):f-2*("%"===b)}function Xf(b,c,f,d){function g(b){return(f?Math.log(0>b?0:b):-Math.log(0<
b?0:-b))/Math.log(c)}function h(b){return f?Math.pow(c,b):-Math.pow(c,-b)}function k(c){return b(g(c))}k.invert=function(c){return h(b.invert(c))};k.domain=function(c){if(!arguments.length)return d;f=0<=c[0];b.domain((d=c.map(Number)).map(g));return k};k.base=function(f){if(!arguments.length)return c;c=+f;b.domain(d.map(g));return k};k.nice=function(){var c=pd(d.map(g),f?Math:Nh);b.domain(c);d=c.map(h);return k};k.ticks=function(){var b=tc(d),k=[],l=b[0],b=b[1],m=Math.floor(g(l)),n=Math.ceil(g(b)),
p=c%1?2:c;if(isFinite(n-m)){if(f){for(;m<n;m++)for(var r=1;r<p;r++)k.push(h(m)*r);k.push(h(m))}else for(k.push(h(m));m++<n;)for(r=p-1;0<r;r--)k.push(h(m)*r);for(m=0;k[m]<l;m++);for(n=k.length;k[n-1]>b;n--);k=k.slice(m,n)}return k};k.tickFormat=function(b,f){if(!arguments.length)return Yf;2>arguments.length?f=Yf:"function"!==typeof f&&(f=O.format(f));var d=Math.max(1,c*b/k.ticks().length);return function(b){var k=b/h(Math.round(g(b)));k*c<c-.5&&(k*=c);return k<=d?f(b):""}};k.copy=function(){return Xf(b.copy(),
c,f,d)};return ve(k,b)}function Zf(b,c,f){function d(c){return b(g(c))}var g=rd(c),h=rd(1/c);d.invert=function(c){return h(b.invert(c))};d.domain=function(c){if(!arguments.length)return f;b.domain((f=c.map(Number)).map(g));return d};d.ticks=function(b){return O.range.apply(O,Ob(f,b))};d.tickFormat=function(b,c){return ue(f,b,c)};d.nice=function(b){return d.domain(Wf(f,b))};d.exponent=function(k){if(!arguments.length)return c;g=rd(c=k);h=rd(1/c);b.domain(f.map(g));return d};d.copy=function(){return Zf(b.copy(),
c,f)};return ve(d,b)}function rd(b){return function(c){return 0>c?-Math.pow(-c,b):Math.pow(c,b)}}function $f(b,c){function f(d){return h[((g.get(d)||("range"===c.t?g.set(d,b.push(d)):NaN))-1)%h.length]}function d(c,f){return O.range(b.length).map(function(b){return c+f*b})}var g,h,k;f.domain=function(d){if(!arguments.length)return b;b=[];g=new l;for(var h=-1,k=d.length,m;++h<k;)g.has(m=d[h])||g.set(m,b.push(m));return f[c.t].apply(f,c.a)};f.range=function(b){if(!arguments.length)return h;h=b;k=0;
c={t:"range",a:arguments};return f};f.rangePoints=function(g,l){2>arguments.length&&(l=0);var m=g[0],n=g[1],n=2>b.length?(m=(m+n)/2,0):(n-m)/(b.length-1+l);h=d(m+n*l/2,n);k=0;c={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(g,l){2>arguments.length&&(l=0);var m=g[0],n=g[1],p=2>b.length?(m=n=Math.round((m+n)/2),0):(n-m)/(b.length-1+l)|0;h=d(m+Math.round(p*l/2+(n-m-(b.length-1+l)*p)/2),p);k=0;c={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(g,l,m){2>arguments.length&&
(l=0);3>arguments.length&&(m=l);var n=g[1]<g[0],p=g[n-0],r=(g[1-n]-p)/(b.length-l+2*m);h=d(p+r*m,r);n&&h.reverse();k=r*(1-l);c={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(g,l,m){2>arguments.length&&(l=0);3>arguments.length&&(m=l);var n=g[1]<g[0],p=g[n-0],r=g[1-n],q=Math.floor((r-p)/(b.length-l+2*m));h=d(p+Math.round((r-p-(b.length-l)*q)/2),q);n&&h.reverse();k=Math.round(q*(1-l));c={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return k};f.rangeExtent=function(){return tc(c.a[0])};
f.copy=function(){return $f(b,c)};return f.domain(b)}function ag(b,f){function h(){var c=0,d=f.length;for(l=[];++c<d;)l[c-1]=O.quantile(b,c/d);return k}function k(b){if(!isNaN(b=+b))return f[O.bisect(l,b)]}var l;k.domain=function(f){if(!arguments.length)return b;b=f.map(d).filter(g).sort(c);return h()};k.range=function(b){if(!arguments.length)return f;f=b;return h()};k.quantiles=function(){return l};k.invertExtent=function(c){c=f.indexOf(c);return 0>c?[NaN,NaN]:[0<c?l[c-1]:b[0],c<l.length?l[c]:b[b.length-
1]]};k.copy=function(){return ag(b,f)};return h()}function bg(b,c,f){function d(c){return f[Math.max(0,Math.min(k,Math.floor(h*(c-b))))]}function g(){h=f.length/(c-b);k=f.length-1;return d}var h,k;d.domain=function(f){if(!arguments.length)return[b,c];b=+f[0];c=+f[f.length-1];return g()};d.range=function(b){if(!arguments.length)return f;f=b;return g()};d.invertExtent=function(c){c=f.indexOf(c);c=0>c?NaN:c/h+b;return[c,c+1/h]};d.copy=function(){return bg(b,c,f)};return g()}function cg(b,c){function f(d){if(d<=
d)return c[O.bisect(b,d)]}f.domain=function(c){if(!arguments.length)return b;b=c;return f};f.range=function(b){if(!arguments.length)return c;c=b;return f};f.invertExtent=function(f){f=c.indexOf(f);return[b[f-1],b[f]]};f.copy=function(){return cg(b,c)};return f}function dg(b){function c(b){return+b}c.invert=c;c.domain=c.range=function(f){if(!arguments.length)return b;b=f.map(c);return c};c.ticks=function(c){return O.range.apply(O,Ob(b,c))};c.tickFormat=function(c,f){return ue(b,c,f)};c.copy=function(){return dg(b)};
return c}function Oh(){return 0}function Ph(b){return b.innerRadius}function Qh(b){return b.outerRadius}function eg(b){return b.startAngle}function fg(b){return b.endAngle}function Rh(b){return b&&b.padAngle}function sd(b,c,f,d){return 0<(b-f)*c-(c-d)*b?0:1}function td(b,c,f,d,g){var h=b[0]-c[0],k=b[1]-c[1];g=(g?d:-d)/Math.sqrt(h*h+k*k);var k=g*k,h=-g*h,l=b[0]+k,m=b[1]+h,n=c[0]+k,p=c[1]+h;b=(l+n)/2;c=(m+p)/2;g=n-l;var r=p-m,q=g*g+r*r;d=f-d;var p=l*p-n*m,t=(0>r?-1:1)*Math.sqrt(Math.max(0,d*d*q-p*p)),
l=(p*r-g*t)/q,m=(-p*g-r*t)/q,n=(p*r+g*t)/q;g=(-p*g+r*t)/q;r=l-b;q=m-c;b=n-b;c=g-c;r*r+q*q>b*b+c*c&&(l=n,m=g);return[[l-k,m-h],[l*f/d,m*f/d]]}function gg(b){function c(k){function m(){n.push("M",h(b(p),l))}for(var n=[],p=[],r=-1,q=k.length,t,v=sa(f),w=sa(d);++r<q;)g.call(this,t=k[r],r)?p.push([+v.call(this,t,r),+w.call(this,t,r)]):p.length&&(m(),p=[]);p.length&&m();return n.length?n.join(""):null}var f=gc,d=zc,g=ub,h=mb,k=h.key,l=.7;c.x=function(b){if(!arguments.length)return f;f=b;return c};c.y=function(b){if(!arguments.length)return d;
d=b;return c};c.defined=function(b){if(!arguments.length)return g;g=b;return c};c.interpolate=function(b){if(!arguments.length)return k;k="function"===typeof b?h=b:(h=we.get(b)||mb).key;return c};c.tension=function(b){if(!arguments.length)return l;l=b;return c};return c}function mb(b){return 1<b.length?b.join("L"):b+"Z"}function hg(b){return b.join("L")+"Z"}function xe(b){for(var c=0,f=b.length,d=b[0],g=[d[0],",",d[1]];++c<f;)g.push("V",(d=b[c])[1],"H",d[0]);return g.join("")}function ye(b){for(var c=
0,f=b.length,d=b[0],g=[d[0],",",d[1]];++c<f;)g.push("H",(d=b[c])[0],"V",d[1]);return g.join("")}function ud(b,c){if(1>c.length||b.length!=c.length&&b.length!=c.length+2)return mb(b);var f=b.length!=c.length,d="",g=b[0],h=b[1],k=c[0],l=k,m=1;f&&(d+="Q"+(h[0]-2*k[0]/3)+","+(h[1]-2*k[1]/3)+","+h[0]+","+h[1],g=b[1],m=2);if(1<c.length)for(l=c[1],h=b[m],m++,d+="C"+(g[0]+k[0])+","+(g[1]+k[1])+","+(h[0]-l[0])+","+(h[1]-l[1])+","+h[0]+","+h[1],g=2;g<c.length;g++,m++)h=b[m],l=c[g],d+="S"+(h[0]-l[0])+","+(h[1]-
l[1])+","+h[0]+","+h[1];f&&(f=b[m],d+="Q"+(h[0]+2*l[0]/3)+","+(h[1]+2*l[1]/3)+","+f[0]+","+f[1]);return d}function ze(b,c){for(var f=[],d=(1-c)/2,g,h=b[0],k=b[1],l=1,m=b.length;++l<m;)g=h,h=k,k=b[l],f.push([d*(k[0]-g[0]),d*(k[1]-g[1])]);return f}function ig(b){if(3>b.length)return mb(b);var c=1,f=b.length,d=b[0],g=d[0],h=d[1],k=[g,g,g,(d=b[1])[0]],l=[h,h,h,d[1]],g=[g,",",h,"L",hb(Pb,k),",",hb(Pb,l)];for(b.push(b[f-1]);++c<=f;)d=b[c],k.shift(),k.push(d[0]),l.shift(),l.push(d[1]),Ae(g,k,l);b.pop();
g.push("L",d);return g.join("")}function hb(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]}function Ae(b,c,f){b.push("C",hb(jg,c),",",hb(jg,f),",",hb(kg,c),",",hb(kg,f),",",hb(Pb,c),",",hb(Pb,f))}function Be(b,c){return(c[1]-b[1])/(c[0]-b[0])}function lg(b){for(var c,f=-1,d=b.length,g,h;++f<d;)c=b[f],g=c[0],h=c[1]-Ea,c[0]=g*Math.cos(h),c[1]=g*Math.sin(h);return b}function mg(b){function c(m){function q(){t.push("M",l(b(w),r),p,n(b(v.reverse()),r),"Z")}for(var t=[],v=[],w=[],u=-1,y=m.length,A,
x=sa(f),D=sa(g),B=f===d?function(){return C}:sa(d),z=g===h?function(){return E}:sa(h),C,E;++u<y;)k.call(this,A=m[u],u)?(v.push([C=+x.call(this,A,u),E=+D.call(this,A,u)]),w.push([+B.call(this,A,u),+z.call(this,A,u)])):v.length&&(q(),v=[],w=[]);v.length&&q();return t.length?t.join(""):null}var f=gc,d=gc,g=0,h=zc,k=ub,l=mb,m=l.key,n=l,p="L",r=.7;c.x=function(b){if(!arguments.length)return d;f=d=b;return c};c.x0=function(b){if(!arguments.length)return f;f=b;return c};c.x1=function(b){if(!arguments.length)return d;
d=b;return c};c.y=function(b){if(!arguments.length)return h;g=h=b;return c};c.y0=function(b){if(!arguments.length)return g;g=b;return c};c.y1=function(b){if(!arguments.length)return h;h=b;return c};c.defined=function(b){if(!arguments.length)return k;k=b;return c};c.interpolate=function(b){if(!arguments.length)return m;m="function"===typeof b?l=b:(l=we.get(b)||mb).key;n=l.reverse||l;p=l.closed?"M":"L";return c};c.tension=function(b){if(!arguments.length)return r;r=b;return c};return c}function Sh(b){return b.radius}
function ng(b){return[b.x,b.y]}function Th(b){return function(){var c=b.apply(this,arguments),f=c[0],c=c[1]-Ea;return[f*Math.cos(c),f*Math.sin(c)]}}function Uh(){return 64}function Vh(){return"circle"}function og(b){b=Math.sqrt(b/ja);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function pg(b){return function(){var c,f,d;(c=this[b])&&(d=c[f=c.active])&&(d.timer.c=null,d.timer.t=NaN,--c.count?delete c[f]:delete this[b],c.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,
d.index))}}function Rc(b,c,f){fd(b,La);b.namespace=c;b.id=f;return b}function Ce(b,c,f,d){var g=b.id,h=b.namespace;return ea(b,"function"===typeof f?function(b,k,l){b[h][g].tween.set(c,d(f.call(b,b.__data__,k,l)))}:(f=d(f),function(b){b[h][g].tween.set(c,f)}))}function Wh(b){null==b&&(b="");return function(){this.textContent=b}}function De(b){return null==b?"__transition__":"__transition_"+b+"__"}function vd(b,c,f,d,g){function h(b){var c=p.delay;q.t=c+r;if(c<=b)return k(b-c);q.c=k}function k(f){var g=
n.active,h=n[g];h&&(h.timer.c=null,h.timer.t=NaN,--n.count,delete n[g],h.event&&h.event.interrupt.call(b,b.__data__,h.index));for(var l in n)+l<d&&(g=n[l],g.timer.c=null,g.timer.t=NaN,--n.count,delete n[l]);q.c=m;ta(function(){q.c&&m(f||1)&&(q.c=null,q.t=NaN);return 1},0,r);n.active=d;p.event&&p.event.start.call(b,b.__data__,c);w=[];p.tween.forEach(function(f,d){(d=d.call(b,b.__data__,c))&&w.push(d)});v=p.ease;t=p.duration}function m(g){g/=t;for(var h=v(g),k=w.length;0<k;)w[--k].call(b,h);if(1<=g)return p.event&&
p.event.end.call(b,b.__data__,c),--n.count?delete n[d]:delete b[f],1}var n=b[f]||(b[f]={active:0,count:0}),p=n[d],r,q,t,v,w;p||(r=g.time,q=ta(h,0,r),p=n[d]={tween:new l,time:r,timer:q,delay:g.delay,duration:g.duration,ease:g.ease,index:c},g=null,++n.count)}function Xh(b,c,f){b.attr("transform",function(b){var d=c(b);return"translate("+(isFinite(d)?d:f(b))+",0)"})}function Yh(b,c,f){b.attr("transform",function(b){var d=c(b);return"translate(0,"+(isFinite(d)?d:f(b))+")"})}function Ee(b){return b.toISOString()}
function Fe(b,c,f){function d(c){return b(c)}function g(b,f){var d=(b[1]-b[0])/f,h=O.bisect(wd,d);return h==wd.length?[c.year,Ob(b.map(function(b){return b/31536E6}),f)[2]]:h?c[d/wd[h-1]<wd[h]/d?h-1:h]:[Zh,Ob(b,f)[2]]}d.invert=function(c){return bc(b.invert(c))};d.domain=function(c){if(!arguments.length)return b.domain().map(bc);b.domain(c);return d};d.nice=function(b,c){function f(d){return!isNaN(d)&&!b.range(d,bc(+d+1),c).length}var h=d.domain(),k=tc(h);if(k=null==b?g(k,10):"number"===typeof b&&
g(k,b))b=k[0],c=k[1];return d.domain(pd(h,1<c?{floor:function(c){for(;f(c=b.floor(c));)c=bc(c-1);return c},ceil:function(c){for(;f(c=b.ceil(c));)c=bc(+c+1);return c}}:b))};d.ticks=function(b,c){var f=tc(d.domain()),h=null==b?g(f,10):"number"===typeof b?g(f,b):!b.range&&[{range:b},c];h&&(b=h[0],c=h[1]);return b.range(f[0],bc(+f[1]+1),1>c?1:c)};d.tickFormat=function(){return f};d.copy=function(){return Fe(b.copy(),c,f)};return ve(d,b)}function bc(b){return new Date(b)}function $h(b){return JSON.parse(b.responseText)}
function ai(b){var c=Sa.createRange();c.selectNode(Sa.body);return c.createContextualFragment(b.responseText)}var O={version:"3.5.16"},qg=[].slice,qb=function(b){return qg.call(b)},Sa=this.document;if(Sa)try{qb(Sa.documentElement.childNodes)[0].nodeType}catch(ya){qb=function(b){for(var c=b.length,f=Array(c);c--;)f[c]=b[c];return f}}Date.now||(Date.now=function(){return+new Date});if(Sa)try{Sa.createElement("DIV").style.setProperty("opacity",0,"")}catch(ya){var xd=this.Element.prototype,bi=xd.setAttribute,
ci=xd.setAttributeNS,rg=this.CSSStyleDeclaration.prototype,di=rg.setProperty;xd.setAttribute=function(b,c){bi.call(this,b,c+"")};xd.setAttributeNS=function(b,c,f){ci.call(this,b,c,f+"")};rg.setProperty=function(b,c,f){di.call(this,b,c+"",f)}}O.ascending=c;O.descending=function(b,c){return c<b?-1:c>b?1:c>=b?0:NaN};O.min=function(b,c){var f=-1,d=b.length,g,h;if(1===arguments.length){for(;++f<d;)if(null!=(h=b[f])&&h>=h){g=h;break}for(;++f<d;)null!=(h=b[f])&&g>h&&(g=h)}else{for(;++f<d;)if(null!=(h=c.call(b,
b[f],f))&&h>=h){g=h;break}for(;++f<d;)null!=(h=c.call(b,b[f],f))&&g>h&&(g=h)}return g};O.max=function(b,c){var f=-1,d=b.length,g,h;if(1===arguments.length){for(;++f<d;)if(null!=(h=b[f])&&h>=h){g=h;break}for(;++f<d;)null!=(h=b[f])&&h>g&&(g=h)}else{for(;++f<d;)if(null!=(h=c.call(b,b[f],f))&&h>=h){g=h;break}for(;++f<d;)null!=(h=c.call(b,b[f],f))&&h>g&&(g=h)}return g};O.extent=function(b,c){var f=-1,d=b.length,g,h,k;if(1===arguments.length){for(;++f<d;)if(null!=(h=b[f])&&h>=h){g=k=h;break}for(;++f<d;)null!=
(h=b[f])&&(g>h&&(g=h),k<h&&(k=h))}else{for(;++f<d;)if(null!=(h=c.call(b,b[f],f))&&h>=h){g=k=h;break}for(;++f<d;)null!=(h=c.call(b,b[f],f))&&(g>h&&(g=h),k<h&&(k=h))}return[g,k]};O.sum=function(b,c){var f=0,d=b.length,h,k=-1;if(1===arguments.length)for(;++k<d;)g(h=+b[k])&&(f+=h);else for(;++k<d;)g(h=+c.call(b,b[k],k))&&(f+=h);return f};O.mean=function(b,c){var f=0,h=b.length,k,l=-1,m=h;if(1===arguments.length)for(;++l<h;)g(k=d(b[l]))?f+=k:--m;else for(;++l<h;)g(k=d(c.call(b,b[l],l)))?f+=k:--m;if(m)return f/
m};O.quantile=function(b,c){var f=(b.length-1)*c+1,d=Math.floor(f),g=+b[d-1];return(f-=d)?g+f*(b[d]-g):g};O.median=function(b,f){var h=[],k=b.length,l,m=-1;if(1===arguments.length)for(;++m<k;)g(l=d(b[m]))&&h.push(l);else for(;++m<k;)g(l=d(f.call(b,b[m],m)))&&h.push(l);if(h.length)return O.quantile(h.sort(c),.5)};O.variance=function(b,c){var f=b.length,h=0,k,l,m=0,n=-1,p=0;if(1===arguments.length)for(;++n<f;)g(k=d(b[n]))&&(l=k-h,h+=l/++p,m+=l*(k-h));else for(;++n<f;)g(k=d(c.call(b,b[n],n)))&&(l=k-
h,h+=l/++p,m+=l*(k-h));if(1<p)return m/(p-1)};O.deviation=function(){var b=O.variance.apply(this,arguments);return b?Math.sqrt(b):b};var sg=f(c);O.bisectLeft=sg.left;O.bisect=O.bisectRight=sg.right;O.bisector=function(b){return f(1===b.length?function(f,d){return c(b(f),d)}:b)};O.shuffle=function(b,c,f){3>(d=arguments.length)&&(f=b.length,2>d&&(c=0));for(var d=f-c,g,h;d;)h=Math.random()*d--|0,g=b[d+c],b[d+c]=b[h+c],b[h+c]=g;return b};O.permute=function(b,c){for(var f=c.length,d=Array(f);f--;)d[f]=
b[c[f]];return d};O.pairs=function(b){for(var c=0,f=b.length-1,d=b[0],g=Array(0>f?0:f);c<f;)g[c]=[d,d=b[++c]];return g};O.transpose=function(b){if(!(k=b.length))return[];for(var c=-1,f=O.min(b,h),d=Array(f);++c<f;)for(var g=-1,k,l=d[c]=Array(k);++g<k;)l[g]=b[g][c];return d};O.zip=function(){return O.transpose(arguments)};O.keys=function(b){var c=[],f;for(f in b)c.push(f);return c};O.values=function(b){var c=[],f;for(f in b)c.push(b[f]);return c};O.entries=function(b){var c=[],f;for(f in b)c.push({key:f,
value:b[f]});return c};O.merge=function(b){var c=b.length,f;f=-1;for(var d=0,g,h;++f<c;)d+=b[f].length;for(g=Array(d);0<=--c;)for(h=b[c],f=h.length;0<=--f;)g[--d]=h[f];return g};var la=Math.abs;O.range=function(b,c,f){3>arguments.length&&(f=1,2>arguments.length&&(c=b,b=0));if(Infinity===(c-b)/f)throw Error("infinite range");var d=[],g;g=la(f);for(var h=1;g*h%1;)h*=10;g=h;var h=-1,k;b*=g;c*=g;f*=g;if(0>f)for(;(k=b+f*++h)>c;)d.push(k/g);else for(;(k=b+f*++h)<c;)d.push(k/g);return d};O.map=function(b,
c){var f=new l;if(b instanceof l)b.forEach(function(b,c){f.set(b,c)});else if(Array.isArray(b)){var d=-1,g=b.length,h;if(1===arguments.length)for(;++d<g;)f.set(d,b[d]);else for(;++d<g;)f.set(c.call(b,h=b[d],d),h)}else for(d in b)f.set(d,b[d]);return f};k(l,{has:u,get:function(b){return this._[m(b)]},set:function(b,c){return this._[m(b)]=c},remove:q,keys:n,values:function(){var b=[],c;for(c in this._)b.push(this._[c]);return b},entries:function(){var b=[],c;for(c in this._)b.push({key:t(c),value:this._[c]});
return b},size:r,empty:p,forEach:function(b){for(var c in this._)b.call(this,t(c),this._[c])}});O.nest=function(){function b(c,g,m){if(m>=d.length)return k?k.call(f,g):h?g.sort(h):g;for(var n=-1,p=g.length,r=d[m++],q,t,v=new l,w;++n<p;)(w=v.get(q=r(t=g[n])))?w.push(t):v.set(q,[t]);c?(t=c(),g=function(f,d){t.set(f,b(c,d,m))}):(t={},g=function(f,d){t[f]=b(c,d,m)});v.forEach(g);return t}function c(b,f){if(f>=d.length)return b;var h=[],k=g[f++];b.forEach(function(b,d){h.push({key:b,values:c(d,f)})});
return k?h.sort(function(b,c){return k(b.key,c.key)}):h}var f={},d=[],g=[],h,k;f.map=function(c,f){return b(f,c,0)};f.entries=function(f){return c(b(O.map,f,0),0)};f.key=function(b){d.push(b);return f};f.sortKeys=function(b){g[d.length-1]=b;return f};f.sortValues=function(b){h=b;return f};f.rollup=function(b){k=b;return f};return f};O.set=function(b){var c=new w;if(b)for(var f=0,d=b.length;f<d;++f)c.add(b[f]);return c};k(w,{has:u,add:function(b){this._[m(b+="")]=!0;return b},remove:q,values:n,size:r,
empty:p,forEach:function(b){for(var c in this._)b.call(this,t(c))}});O.behavior={};O.rebind=function(b,c){for(var f=1,d=arguments.length,g;++f<d;)b[g=arguments[f]]=y(b,c,c[g]);return b};var wf="webkit ms moz Moz o O".split(" ");O.dispatch=function(){for(var b=new z,c=-1,f=arguments.length;++c<f;)b[arguments[c]]=D(b);return b};z.prototype.on=function(b,c){var f=b.indexOf("."),d="";0<=f&&(d=b.slice(f+1),b=b.slice(0,f));if(b)return 2>arguments.length?this[b].on(d):this[b].on(d,c);if(2===arguments.length){if(null==
c)for(b in this)if(this.hasOwnProperty(b))this[b].on(d,null);return this}};O.event=null;O.requote=function(b){return b.replace(ei,"\\$&")};var ei=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fd={}.__proto__?function(b,c){b.__proto__=c}:function(b,c){for(var f in c)b[f]=c[f]},he=function(b,c){return c.querySelector(b)},ie=function(b,c){return c.querySelectorAll(b)},gd=function(b,c){var f=b.matches||b[A(b,"matchesSelector")];gd=function(b,c){return f.call(b,c)};return gd(b,c)};"function"===typeof Sizzle&&(he=
function(b,c){return Sizzle(b,c)[0]||null},ie=Sizzle,gd=Sizzle.matchesSelector);O.selection=function(){return O.select(Sa.documentElement)};var xa=O.selection.prototype=[];xa.select=function(b){var c=[],f,d,g,h;b=H(b);for(var k=-1,l=this.length;++k<l;){c.push(f=[]);f.parentNode=(g=this[k]).parentNode;for(var m=-1,n=g.length;++m<n;)(h=g[m])?(f.push(d=b.call(h,h.__data__,m,k)),d&&"__data__"in h&&(d.__data__=h.__data__)):f.push(null)}return G(c)};xa.selectAll=function(b){var c=[],f,d;b=I(b);for(var g=
-1,h=this.length;++g<h;)for(var k=this[g],l=-1,m=k.length;++l<m;)if(d=k[l])c.push(f=qb(b.call(d,d.__data__,l,g))),f.parentNode=d;return G(c)};var Ge={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};O.ns={prefix:Ge,qualify:function(b){var c=b.indexOf(":"),f=b;0<=c&&"xmlns"!==(f=b.slice(0,c))&&(b=b.slice(c+1));return Ge.hasOwnProperty(f)?{space:Ge[f],local:b}:
b}};xa.attr=function(b,c){if(2>arguments.length){if("string"===typeof b){var f=this.node();b=O.ns.qualify(b);return b.local?f.getAttributeNS(b.space,b.local):f.getAttribute(b)}for(c in b)this.each(L(c,b[c]));return this}return this.each(L(b,c))};xa.classed=function(b,c){if(2>arguments.length){if("string"===typeof b){var f=this.node(),d=(b=(b+"").trim().split(/^|\s+/)).length,g=-1;if(c=f.classList)for(;++g<d;){if(!c.contains(b[g]))return!1}else for(c=f.getAttribute("class");++g<d;)if(!K(b[g]).test(c))return!1;
return!0}for(c in b)this.each(M(c,b[c]));return this}return this.each(M(b,c))};xa.style=function(c,f,d){var g=arguments.length;if(3>g){if("string"!==typeof c){2>g&&(f="");for(d in c)this.each(N(d,c[d],f));return this}if(2>g)return g=this.node(),b(g).getComputedStyle(g,null).getPropertyValue(c);d=""}return this.each(N(c,f,d))};xa.property=function(b,c){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(c in b)this.each(S(c,b[c]));return this}return this.each(S(b,c))};xa.text=function(b){return arguments.length?
this.each("function"===typeof b?function(){var c=b.apply(this,arguments);this.textContent=null==c?"":c}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};xa.html=function(b){return arguments.length?this.each("function"===typeof b?function(){var c=b.apply(this,arguments);this.innerHTML=null==c?"":c}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};xa.append=function(b){b=U(b);return this.select(function(){return this.appendChild(b.apply(this,
arguments))})};xa.insert=function(b,c){b=U(b);c=H(c);return this.select(function(){return this.insertBefore(b.apply(this,arguments),c.apply(this,arguments)||null)})};xa.remove=function(){return this.each(W)};xa.data=function(b,c){function f(b,d){var g,h=b.length,k=d.length,r=Math.min(h,k),q=Array(k),t=Array(k),v=Array(h),w,u;if(c){var r=new l,y=Array(h),A;for(g=-1;++g<h;)if(w=b[g])r.has(A=c.call(w,w.__data__,g))?v[g]=w:r.set(A,w),y[g]=A;for(g=-1;++g<k;)(w=r.get(A=c.call(d,u=d[g],g)))?!0!==w&&(q[g]=
w,w.__data__=u):t[g]={__data__:u},r.set(A,!0);for(g=-1;++g<h;)g in y&&!0!==r.get(y[g])&&(v[g]=b[g])}else{for(g=-1;++g<r;)w=b[g],u=d[g],w?(w.__data__=u,q[g]=w):t[g]={__data__:u};for(;g<k;++g)t[g]={__data__:d[g]};for(;g<h;++g)v[g]=b[g]}t.update=q;t.parentNode=q.parentNode=v.parentNode=b.parentNode;m.push(t);n.push(q);p.push(v)}var d=-1,g=this.length,h,k;if(!arguments.length){for(b=Array(g=(h=this[0]).length);++d<g;)if(k=h[d])b[d]=k.__data__;return b}var m=da([]),n=G([]),p=G([]);if("function"===typeof b)for(;++d<
g;)f(h=this[d],b.call(h,h.parentNode.__data__,d));else for(;++d<g;)f(h=this[d],b);n.enter=function(){return m};n.exit=function(){return p};return n};xa.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};xa.filter=function(b){var c=[],f,d,g;"function"!==typeof b&&(b=V(b));for(var h=0,k=this.length;h<k;h++){c.push(f=[]);f.parentNode=(d=this[h]).parentNode;for(var l=0,m=d.length;l<m;l++)(g=d[l])&&b.call(g,g.__data__,l,h)&&f.push(g)}return G(c)};xa.order=
function(){for(var b=-1,c=this.length;++b<c;)for(var f=this[b],d=f.length-1,g=f[d],h;0<=--d;)if(h=f[d])g&&g!==h.nextSibling&&g.parentNode.insertBefore(h,g),g=h;return this};xa.sort=function(b){b=X.apply(this,arguments);for(var c=-1,f=this.length;++c<f;)this[c].sort(b);return this.order()};xa.each=function(b){return ea(this,function(c,f,d){b.call(c,c.__data__,f,d)})};xa.call=function(b){var c=qb(arguments);b.apply(c[0]=this,c);return this};xa.empty=function(){return!this.node()};xa.node=function(){for(var b=
0,c=this.length;b<c;b++)for(var f=this[b],d=0,g=f.length;d<g;d++){var h=f[d];if(h)return h}return null};xa.size=function(){var b=0;ea(this,function(){++b});return b};var xb=[];O.selection.enter=da;O.selection.enter.prototype=xb;xb.append=xa.append;xb.empty=xa.empty;xb.node=xa.node;xb.call=xa.call;xb.size=xa.size;xb.select=function(b){for(var c=[],f,d,g,h,k,l=-1,m=this.length;++l<m;){g=(h=this[l]).update;c.push(f=[]);f.parentNode=h.parentNode;for(var n=-1,p=h.length;++n<p;)(k=h[n])?(f.push(g[n]=d=
b.call(h.parentNode,k.__data__,n,l)),d.__data__=k.__data__):f.push(null)}return G(c)};xb.insert=function(b,c){2>arguments.length&&(c=R(this));return xa.insert.call(this,b,c)};O.select=function(b){var c;"string"===typeof b?(c=[he(b,Sa)],c.parentNode=Sa.documentElement):(c=[b],c.parentNode=b&&(b.ownerDocument||b.document||b).documentElement);return G([c])};O.selectAll=function(b){"string"===typeof b?(b=qb(ie(b,Sa)),b.parentNode=Sa.documentElement):(b=qb(b),b.parentNode=null);return G([b])};xa.on=function(b,
c,f){var d=arguments.length;if(3>d){if("string"!==typeof b){2>d&&(c=!1);for(f in b)this.each(Y(f,b[f],c));return this}if(2>d)return(d=this.node()["__on"+b])&&d._;f=!1}return this.each(Y(b,c,f))};var je=O.map({mouseenter:"mouseover",mouseleave:"mouseout"});Sa&&je.forEach(function(b){"on"+b in Sa&&je.remove(b)});var Zb,ih=0;O.mouse=function(b){return Z(b,C())};var ke=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;O.touch=function(b,c,f){3>arguments.length&&(f=c,c=C().changedTouches);if(c)for(var d=
0,g=c.length,h;d<g;++d)if((h=c[d]).identifier===f)return Z(b,h)};O.behavior.drag=function(){function c(){this.on("mousedown.drag",h).on("touchstart.drag",k)}function f(b,c,h,k,l){return function(){var f=O.event.target.correspondingElement||O.event.target,m=this.parentNode,n=d.of(this,arguments),p=0,r=b(),q=".drag"+(null==r?"":"-"+r),t,v=O.select(h(f)).on(k+q,function(){var b=c(m,r),f,d;b&&(f=b[0]-u[0],d=b[1]-u[1],p=p|f|d,u=b,n({type:"drag",x:b[0]+t[0],y:b[1]+t[1],dx:f,dy:d}))}).on(l+q,function(){c(m,
r)&&(v.on(k+q,null).on(l+q,null),w(p),n({type:"dragend"}))}),w=aa(f),u=c(m,r);g?(t=g.apply(this,arguments),t=[t.x-u[0],t.y-u[1]]):t=[0,0];n({type:"dragstart"})}}var d=E(c,"drag","dragstart","dragend"),g=null,h=f(x,O.mouse,b,"mousemove","mouseup"),k=f(qa,O.touch,v,"touchmove","touchend");c.origin=function(b){if(!arguments.length)return g;g=b;return c};return O.rebind(c,d,"on")};O.touches=function(b,c){2>arguments.length&&(c=C().touches);return c?qb(c).map(function(c){var f=Z(b,c);f.identifier=c.identifier;
return f}):[]};var ja=Math.PI,cb=2*ja,fi=cb-1E-6,Ea=ja/2,ka=ja/180,Ca=180/ja,Sc=Math.SQRT2;O.interpolateZoom=function(b,c){var f=b[0],d=b[1],g=b[2],h=c[2],k=c[0]-f,l=c[1]-d,m=k*k+l*l,n,p;if(1E-12>m)p=Math.log(h/g)/Sc,n=function(b){return[f+b*k,d+b*l,g*Math.exp(Sc*b*p)]};else{var r=Math.sqrt(m);n=(h*h-g*g+4*m)/(4*g*r);var h=(h*h-g*g-4*m)/(4*h*r),q=Math.log(Math.sqrt(n*n+1)-n);p=(Math.log(Math.sqrt(h*h+1)-h)-q)/Sc;n=function(b){b*=p;var c=oa(q),h=g/(2*r),m,n=Sc*b+q;m=((n=Math.exp(2*n))-1)/(n+1);var t=
q,n=((t=Math.exp(t))-1/t)/2,h=h*(c*m-n);return[f+h*k,d+h*l,g*c/oa(Sc*b+q)]}}n.duration=1E3*p;return n};O.behavior.zoom=function(){function c(b){b.on("mousedown.zoom",p).on(He+".zoom",q).on("dblclick.zoom",t).on("touchstart.zoom",r)}function f(b){return[(b[0]-v.x)/v.k,(b[1]-v.y)/v.k]}function d(b){v.k=Math.max(x[0],Math.min(x[1],b))}function g(b,c){c=[c[0]*v.k+v.x,c[1]*v.k+v.y];v.x+=b[0]-c[0];v.y+=b[1]-c[1]}function h(b,f,k,l){b.__chart__={x:v.x,y:v.y,k:v.k};d(Math.pow(2,l));g(u=f,k);b=O.select(b);
0<D&&(b=b.transition().duration(D));b.call(c.event)}function k(){P&&P.domain(G.range().map(function(b){return(b-v.x)/v.k}).map(G.invert));I&&I.domain(H.range().map(function(b){return(b-v.y)/v.k}).map(H.invert))}function l(b){z++||b({type:"zoomstart"})}function m(b){k();b({type:"zoom",scale:v.k,translate:[v.x,v.y]})}function n(b){--z||(b({type:"zoomend"}),u=null)}function p(){var c=this,d=N.of(c,arguments),h=0,k=O.select(b(c)).on("mousemove.zoom",function(){h=1;g(O.mouse(c),r);m(d)}).on("mouseup.zoom",
function(){k.on("mousemove.zoom",null).on("mouseup.zoom",null);q(h);n(d)}),r=f(O.mouse(c)),q=aa(c);yd.call(c);l(d)}function r(){function b(){var c=O.touches(t);A=v.k;c.forEach(function(b){b.identifier in u&&(u[b.identifier]=f(b))});return c}function c(){var f=O.event.target;O.select(f).on(D,k).on(z,q);C.push(f);for(var f=O.event.changedTouches,d=0,g=f.length;d<g;++d)u[f[d].identifier]=null;d=b();g=Date.now();1===d.length?(500>g-M&&(f=d[0],h(t,f,u[f.identifier],Math.floor(Math.log(v.k)/Math.LN2)+1),
B()),M=g):1<d.length&&(f=d[0],g=d[1],d=f[0]-g[0],f=f[1]-g[1],y=d*d+f*f)}function k(){var b=O.touches(t),c,f,h,l;yd.call(t);for(var n=0,p=b.length;n<p;++n,l=null)if(h=b[n],l=u[h.identifier]){if(f)break;c=h;f=l}if(l){var r=(r=h[0]-c[0])*r+(r=h[1]-c[1])*r,b=y&&Math.sqrt(r/y);c=[(c[0]+h[0])/2,(c[1]+h[1])/2];f=[(f[0]+l[0])/2,(f[1]+l[1])/2];d(b*A)}M=null;g(c,f);m(w)}function q(){if(O.event.touches.length){for(var c=O.event.changedTouches,f=0,d=c.length;f<d;++f)delete u[c[f].identifier];for(var g in u)return void b()}O.selectAll(C).on(x,
null);E.on("mousedown.zoom",p).on("touchstart.zoom",r);ya();n(w)}var t=this,w=N.of(t,arguments),u={},y=0,A,x=".zoom-"+O.event.changedTouches[0].identifier,D="touchmove"+x,z="touchend"+x,C=[],E=O.select(t),ya=aa(t);c();l(w);E.on("mousedown.zoom",null).on("touchstart.zoom",c)}function q(){var b=N.of(this,arguments);C?clearTimeout(C):(yd.call(this),w=f(u=y||O.mouse(this)),l(b));C=setTimeout(function(){C=null;n(b)},50);B();d(Math.pow(2,.002*zd())*v.k);g(u,w);m(b)}function t(){var b=O.mouse(this),c=Math.log(v.k)/
Math.LN2;h(this,b,f(b),O.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var v={x:0,y:0,k:1},w,u,y,A=[960,500],x=tg,D=250,z=0,C,M,N=E(c,"zoomstart","zoom","zoomend"),G,P,H,I;He||(He="onwheel"in Sa?(zd=function(){return-O.event.deltaY*(O.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Sa?(zd=function(){return O.event.wheelDelta},"mousewheel"):(zd=function(){return-O.event.detail},"MozMousePixelScroll"));c.event=function(b){b.each(function(){var b=N.of(this,arguments),c=v;cc?O.select(this).transition().each("start.zoom",
function(){v=this.__chart__||{x:0,y:0,k:1};l(b)}).tween("zoom:zoom",function(){var f=A[0],d=A[1],g=u?u[0]:f/2,h=u?u[1]:d/2,k=O.interpolateZoom([(g-v.x)/v.k,(h-v.y)/v.k,f/v.k],[(g-c.x)/c.k,(h-c.y)/c.k,f/c.k]);return function(c){c=k(c);var d=f/c[2];this.__chart__=v={x:g-c[0]*d,y:h-c[1]*d,k:d};m(b)}}).each("interrupt.zoom",function(){n(b)}).each("end.zoom",function(){n(b)}):(this.__chart__=v,l(b),m(b),n(b))})};c.translate=function(b){if(!arguments.length)return[v.x,v.y];v={x:+b[0],y:+b[1],k:v.k};k();
return c};c.scale=function(b){if(!arguments.length)return v.k;v={x:v.x,y:v.y,k:null};d(+b);k();return c};c.scaleExtent=function(b){if(!arguments.length)return x;x=null==b?tg:[+b[0],+b[1]];return c};c.center=function(b){if(!arguments.length)return y;y=b&&[+b[0],+b[1]];return c};c.size=function(b){if(!arguments.length)return A;A=b&&[+b[0],+b[1]];return c};c.duration=function(b){if(!arguments.length)return D;D=+b;return c};c.x=function(b){if(!arguments.length)return P;P=b;G=b.copy();v={x:0,y:0,k:1};
return c};c.y=function(b){if(!arguments.length)return I;I=b;H=b.copy();v={x:0,y:0,k:1};return c};return O.rebind(c,N,"on")};var tg=[0,Infinity],zd,He;O.color=fa;fa.prototype.toString=function(){return this.rgb()+""};O.hsl=F;var Ie=F.prototype=new fa;Ie.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new F(this.h,this.s,this.l/b)};Ie.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new F(this.h,this.s,b*this.l)};Ie.rgb=function(){return Ba(this.h,this.s,this.l)};O.hcl=
ra;var Je=ra.prototype=new fa;Je.brighter=function(b){return new ra(this.h,this.c,Math.min(100,this.l+Ad*(arguments.length?b:1)))};Je.darker=function(b){return new ra(this.h,this.c,Math.max(0,this.l-Ad*(arguments.length?b:1)))};Je.rgb=function(){return na(this.h,this.c,this.l).rgb()};O.lab=wa;var Ad=18,xf=.95047,yf=1,zf=1.08883,Ke=wa.prototype=new fa;Ke.brighter=function(b){return new wa(Math.min(100,this.l+Ad*(arguments.length?b:1)),this.a,this.b)};Ke.darker=function(b){return new wa(Math.max(0,
this.l-Ad*(arguments.length?b:1)),this.a,this.b)};Ke.rgb=function(){return Oa(this.l,this.a,this.b)};O.rgb=Ha;var Bd=Ha.prototype=new fa;Bd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var c=this.r,f=this.g,d=this.b;if(!c&&!f&&!d)return new Ha(30,30,30);c&&30>c&&(c=30);f&&30>f&&(f=30);d&&30>d&&(d=30);return new Ha(Math.min(255,c/b),Math.min(255,f/b),Math.min(255,d/b))};Bd.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ha(b*this.r,b*this.g,b*this.b)};Bd.hsl=function(){return pa(this.r,
this.g,this.b)};Bd.toString=function(){return"#"+ab(this.r)+ab(this.g)+ab(this.b)};var id=O.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,
slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});id.forEach(function(b,c){id.set(b,new Ha(c>>16,c>>8&255,c&255))});O.functor=sa;O.xhr=ia(v);O.dsv=function(b,c){function f(b,h,k){3>arguments.length&&(k=h,h=null);var l=Aa(b,c,null==h?d:g(h),k);l.row=function(b){return arguments.length?l.response(null==(h=
b)?d:g(b)):h};return l}function d(b){return f.parse(b.responseText)}function g(b){return function(c){return f.parse(c.responseText,b)}}function h(c){return c.map(k).join(b)}function k(b){return l.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var l=new RegExp('["'+b+"\n]"),m=b.charCodeAt(0);f.parse=function(b,c){var d;return f.parseRows(b,function(b,f){if(d)return d(b,f-1);var g=new Function("d","return {"+b.map(function(b,c){return JSON.stringify(b)+": d["+c+"]"}).join(",")+"}");d=c?function(b,f){return c(g(b),
f)}:g})};f.parseRows=function(b,c){function f(){if(l>=k)return g;if(r)return r=!1,d;var c=l;if(34===b.charCodeAt(c)){for(var h=c;h++<k;)if(34===b.charCodeAt(h)){if(34!==b.charCodeAt(h+1))break;++h}l=h+2;var n=b.charCodeAt(h+1);13===n?(r=!0,10===b.charCodeAt(h+2)&&++l):10===n&&(r=!0);return b.slice(c+1,h).replace(/""/g,'"')}for(;l<k;){n=b.charCodeAt(l++);h=1;if(10===n)r=!0;else if(13===n)r=!0,10===b.charCodeAt(l)&&(++l,++h);else if(n!==m)continue;return b.slice(c,l-h)}return b.slice(c)}for(var d={},
g={},h=[],k=b.length,l=0,n=0,p,r;(p=f())!==g;){for(var q=[];p!==d&&p!==g;)q.push(p),p=f();c&&null==(q=c(q,n++))||h.push(q)}return h};f.format=function(c){if(Array.isArray(c[0]))return f.formatRows(c);var d=new w,g=[];c.forEach(function(b){for(var c in b)d.has(c)||g.push(d.add(c))});return[g.map(k).join(b)].concat(c.map(function(c){return g.map(function(b){return k(c[b])}).join(b)})).join("\n")};f.formatRows=function(b){return b.map(h).join("\n")};return f};O.csv=O.dsv(",","text/csv");O.tsv=O.dsv("\t",
"text/tab-separated-values");var kd,jd,ld,md,Af=this[A(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};O.timer=function(){ta.apply(this,arguments)};O.timer.flush=function(){Va();Ta()};O.round=function(b,c){return c?Math.round(b*(c=Math.pow(10,c)))/c:Math.round(b)};var gi="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,c){var f=Math.pow(10,3*la(8-c));return{scale:8<c?function(b){return b/f}:function(b){return b*f},symbol:b}});O.formatPrefix=function(b,c){var f=0;if(b=
+b)0>b&&(b*=-1),c&&(b=O.round(b,jb(b,c))),f=1+Math.floor(1E-12+Math.log(b)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((f-1)/3)));return gi[8+f/3]};var Bf=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,jh=O.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,c){return b.toPrecision(c)},e:function(b,
c){return b.toExponential(c)},f:function(b,c){return b.toFixed(c)},r:function(b,c){return(b=O.round(b,jb(b,c))).toFixed(Math.max(0,Math.min(20,jb(b*(1+1E-15),c))))}}),ha=O.time={},Pa=Date;Wa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},
getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ab.setUTCDate.apply(this._,arguments)},setDay:function(){Ab.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ab.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ab.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ab.setUTCMilliseconds.apply(this._,
arguments)},setMinutes:function(){Ab.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ab.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ab.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ab.setTime.apply(this._,arguments)}};var Ab=Date.prototype;ha.year=Ga(function(b){b=ha.day(b);b.setMonth(0,1);return b},function(b,c){b.setFullYear(b.getFullYear()+c)},function(b){return b.getFullYear()});ha.years=ha.year.range;ha.years.utc=ha.year.utc.range;ha.day=Ga(function(b){var c=
new Pa(2E3,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return c},function(b,c){b.setDate(b.getDate()+c)},function(b){return b.getDate()-1});ha.days=ha.day.range;ha.days.utc=ha.day.utc.range;ha.dayOfYear=function(b){var c=ha.year(b);return Math.floor((b-c-6E4*(b.getTimezoneOffset()-c.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,c){c=7-c;var f=ha[b]=Ga(function(b){(b=ha.day(b)).setDate(b.getDate()-(b.getDay()+c)%
7);return b},function(b,c){b.setDate(b.getDate()+7*Math.floor(c))},function(b){var f=ha.year(b).getDay();return Math.floor((ha.dayOfYear(b)+(f+c)%7)/7)-(f!==c)});ha[b+"s"]=f.range;ha[b+"s"].utc=f.utc.range;ha[b+"OfYear"]=function(b){var f=ha.year(b).getDay();return Math.floor((ha.dayOfYear(b)+(f+c)%7)/7)}});ha.week=ha.sunday;ha.weeks=ha.sunday.range;ha.weeks.utc=ha.sunday.utc.range;ha.weekOfYear=ha.sundayOfYear;var Cf={"-":"",_:" ",0:"0"},Fa=/^\s*\d+/,Df=/^%/;O.locale=function(b){return{numberFormat:jc(b),
timeFormat:Tb(b)}};var ug=O.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});O.format=ug.numberFormat;
O.geo={};db.prototype={s:0,t:0,add:function(b){Vb(b,this.t,Cd);Vb(Cd.s,this.s,this);this.s?this.t+=Cd.t:this.s=Cd.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Cd=new db;O.geo.stream=function(b,c){if(b&&vg.hasOwnProperty(b.type))vg[b.type](b,c);else mc(b,c)};var vg={Feature:function(b,c){mc(b.geometry,c)},FeatureCollection:function(b,c){for(var f=b.features,d=-1,g=f.length;++d<g;)mc(f[d].geometry,c)}},Ef={Sphere:function(b,c){c.sphere()},Point:function(b,c){b=b.coordinates;
c.point(b[0],b[1],b[2])},MultiPoint:function(b,c){for(var f=b.coordinates,d=-1,g=f.length;++d<g;)b=f[d],c.point(b[0],b[1],b[2])},LineString:function(b,c){Fc(b.coordinates,c,0)},MultiLineString:function(b,c){for(var f=b.coordinates,d=-1,g=f.length;++d<g;)Fc(f[d],c,0)},Polygon:function(b,c){Gc(b.coordinates,c)},MultiPolygon:function(b,c){for(var f=b.coordinates,d=-1,g=f.length;++d<g;)Gc(f[d],c)},GeometryCollection:function(b,c){for(var f=b.geometries,d=-1,g=f.length;++d<g;)mc(f[d],c)}};O.geo.area=function(b){uc=
0;O.geo.stream(b,bb);return uc};var uc,$b=new db,bb={sphere:function(){uc+=4*ja},point:x,lineStart:x,lineEnd:x,polygonStart:function(){$b.reset();bb.lineStart=Wb},polygonEnd:function(){var b=2*$b;uc+=0>b?4*ja+b:b;bb.lineStart=bb.lineEnd=bb.point=x}};O.geo.bounds=function(){function b(c,f){x.push(D=[p=c,q=c]);f<r&&(r=f);f>t&&(t=f)}function c(f,d){var g=wb([f*ka,d*ka]);if(y){var h=ob(y,g),h=ob([h[1],-h[0],0],h);pb(h);var h=Gb(h),k=f-v,m=0<k?1:-1,n=h[0]*Ca*m,k=180<la(k);k^(m*v<n&&n<m*f)?(h=h[1]*Ca,h>
t&&(t=h)):(n=(n+360)%360-180,k^(m*v<n&&n<m*f))?(h=-h[1]*Ca,h<r&&(r=h)):(d<r&&(r=d),d>t&&(t=d));k?f<v?l(p,f)>l(p,q)&&(q=f):l(f,q)>l(p,q)&&(p=f):q>=p?(f<p&&(p=f),f>q&&(q=f)):f>v?l(p,f)>l(p,q)&&(q=f):l(f,q)>l(p,q)&&(p=f)}else b(f,d);y=g;v=f}function f(){B.point=c}function d(){D[0]=p;D[1]=q;B.point=b;y=null}function g(b,f){if(y){var d=b-v;A+=180<la(d)?d+(0<d?360:-360):d}else w=b,u=f;bb.point(b,f);c(b,f)}function h(){bb.lineStart()}function k(){g(w,u);bb.lineEnd();1E-6<la(A)&&(p=-(q=180));D[0]=p;D[1]=
q;y=null}function l(b,c){return 0>(c-=b)?c+360:c}function m(b,c){return b[0]-c[0]}function n(b,c){return c[0]<=c[1]?c[0]<=b&&b<=c[1]:b<c[0]||c[1]<b}var p,r,q,t,v,w,u,y,A,x,D,B={point:b,lineStart:f,lineEnd:d,polygonStart:function(){B.point=g;B.lineStart=h;B.lineEnd=k;A=0;bb.polygonStart()},polygonEnd:function(){bb.polygonEnd();B.point=b;B.lineStart=f;B.lineEnd=d;0>$b?(p=-(q=180),r=-(t=90)):1E-6<A?t=90:-1E-6>A&&(r=-90);D[0]=p;D[1]=q}};return function(b){t=q=-(p=r=Infinity);x=[];O.geo.stream(b,B);if(b=
x.length){x.sort(m);for(var c=1,f=x[0],d,g=[f];c<b;++c)d=x[c],n(d[0],f)||n(d[1],f)?(l(f[0],d[1])>l(f[0],f[1])&&(f[1]=d[1]),l(d[0],f[1])>l(f[0],f[1])&&(f[0]=d[0])):g.push(f=d);var h=-Infinity,k;b=g.length-1;c=0;for(f=g[b];c<=b;f=d,++c)d=g[c],(k=l(f[1],d[0]))>h&&(h=k,p=d[0],q=f[1])}x=D=null;return Infinity===p||Infinity===r?[[NaN,NaN],[NaN,NaN]]:[[p,r],[q,t]]}}();O.geo.centroid=function(b){Nc=qc=yb=zb=rb=fb=gb=Za=Lb=Mb=sb=0;O.geo.stream(b,kb);b=Lb;var c=Mb,f=sb,d=b*b+c*c+f*f;return 1E-12>d&&(b=fb,c=
gb,f=Za,1E-6>qc&&(b=yb,c=zb,f=rb),d=b*b+c*c+f*f,1E-12>d)?[NaN,NaN]:[Math.atan2(c,b)*Ca,va(f/Math.sqrt(d))*Ca]};var Nc,qc,yb,zb,rb,fb,gb,Za,Lb,Mb,sb,kb={sphere:x,point:Ic,lineStart:bd,lineEnd:cd,polygonStart:function(){kb.lineStart=ae},polygonEnd:function(){kb.lineStart=bd}},Ff=Vc(ub,function(b){var c=NaN,f=NaN,d=NaN,g;return{lineStart:function(){b.lineStart();g=1},point:function(h,k){var l=0<h?ja:-ja,m=la(h-c);if(1E-6>la(m-ja))b.point(c,f=0<(f+k)/2?Ea:-Ea),b.point(d,f),b.lineEnd(),b.lineStart(),b.point(l,
f),b.point(h,f),g=0;else if(d!==l&&m>=ja){1E-6>la(c-d)&&(c-=1E-6*d);1E-6>la(h-l)&&(h-=1E-6*l);var m=c,n=f,p=h,r,q,t=Math.sin(m-p);f=1E-6<la(t)?Math.atan((Math.sin(n)*(q=Math.cos(k))*Math.sin(p)-Math.sin(k)*(r=Math.cos(n))*Math.sin(m))/(r*q*t)):(n+k)/2;b.point(d,f);b.lineEnd();b.lineStart();b.point(l,f);g=0}b.point(c=h,f=k);d=l},lineEnd:function(){b.lineEnd();c=f=NaN},clean:function(){return 2-g}}},function(b,c,f,d){null==b?(f*=Ea,d.point(-ja,f),d.point(0,f),d.point(ja,f),d.point(ja,0),d.point(ja,
-f),d.point(0,-f),d.point(-ja,-f),d.point(-ja,0),d.point(-ja,f)):1E-6<la(b[0]-c[0])?(b=b[0]<c[0]?ja:-ja,f=f*b/2,d.point(-b,f),d.point(0,f),d.point(b,f)):d.point(c[0],c[1])},[-ja,-ja/2]);O.geo.clipExtent=function(){var b,c,f,d,g,h,k={stream:function(b){g&&(g.valid=!1);g=h(b);g.valid=!0;return g},extent:function(l){if(!arguments.length)return[[b,c],[f,d]];h=Lc(b=+l[0][0],c=+l[0][1],f=+l[1][0],d=+l[1][1]);g&&(g.valid=!1,g=null);return k}};return k.extent([[0,0],[960,500]])};(O.geo.conicEqualArea=function(){return Yb(Mc)}).raw=
Mc;O.geo.albers=function(){return O.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};O.geo.albersUsa=function(){function b(c){var f=c[0];c=c[1];g=null;(k(f,c),g)||(l(f,c),g)||m(f,c);return g}var c=O.geo.albers(),f=O.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=O.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g,h={point:function(b,c){g=[b,c]}},k,l,m;b.invert=function(b){var g=c.scale(),h=c.translate(),
k=(b[0]-h[0])/g,g=(b[1]-h[1])/g;return(.12<=g&&.234>g&&-.425<=k&&-.214>k?f:.166<=g&&.234>g&&-.214<=k&&-.115>k?d:c).invert(b)};b.stream=function(b){var g=c.stream(b),h=f.stream(b),k=d.stream(b);return{point:function(b,c){g.point(b,c);h.point(b,c);k.point(b,c)},sphere:function(){g.sphere();h.sphere();k.sphere()},lineStart:function(){g.lineStart();h.lineStart();k.lineStart()},lineEnd:function(){g.lineEnd();h.lineEnd();k.lineEnd()},polygonStart:function(){g.polygonStart();h.polygonStart();k.polygonStart()},
polygonEnd:function(){g.polygonEnd();h.polygonEnd();k.polygonEnd()}}};b.precision=function(g){if(!arguments.length)return c.precision();c.precision(g);f.precision(g);d.precision(g);return b};b.scale=function(g){if(!arguments.length)return c.scale();c.scale(g);f.scale(.35*g);d.scale(g);return b.translate(c.translate())};b.translate=function(g){if(!arguments.length)return c.translate();var n=c.scale(),p=+g[0],r=+g[1];k=c.translate(g).clipExtent([[p-.455*n,r-.238*n],[p+.455*n,r+.238*n]]).stream(h).point;
l=f.translate([p-.307*n,r+.201*n]).clipExtent([[p-.425*n+1E-6,r+.12*n+1E-6],[p-.214*n-1E-6,r+.234*n-1E-6]]).stream(h).point;m=d.translate([p-.205*n,r+.212*n]).clipExtent([[p-.214*n+1E-6,r+.166*n+1E-6],[p-.115*n-1E-6,r+.234*n-1E-6]]).stream(h).point;return b};return b.scale(1070)};var Dd,nd,Nb={point:x,lineStart:x,lineEnd:x,polygonStart:function(){nd=0;Nb.lineStart=de},polygonEnd:function(){Nb.lineStart=Nb.lineEnd=Nb.point=x;Dd+=la(nd/2)}},Ed,Fd,Gd,Hd,hi={point:function(b,c){b<Ed&&(Ed=b);b>Gd&&(Gd=
b);c<Fd&&(Fd=c);c>Hd&&(Hd=c)},lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},lb={point:Qb,lineStart:Pe,lineEnd:Qe,polygonStart:function(){lb.lineStart=Kg},polygonEnd:function(){lb.point=Qb;lb.lineStart=Pe;lb.lineEnd=Qe}};O.geo.path=function(){function b(c){c&&("function"===typeof f&&k.pointRadius(+f.apply(this,arguments)),l&&l.valid||(l=h(k)),O.geo.stream(c,l));return k.result()}function c(){l=null;return b}var f=4.5,d,g,h,k,l;b.area=function(b){Dd=0;O.geo.stream(b,h(Nb));return Dd};b.centroid=
function(b){yb=zb=rb=fb=gb=Za=Lb=Mb=sb=0;O.geo.stream(b,h(lb));return sb?[Lb/sb,Mb/sb]:Za?[fb/Za,gb/Za]:rb?[yb/rb,zb/rb]:[NaN,NaN]};b.bounds=function(b){Gd=Hd=-(Ed=Fd=Infinity);O.geo.stream(b,h(hi));return[[Ed,Fd],[Gd,Hd]]};b.projection=function(b){if(!arguments.length)return d;h=(d=b)?b.stream||Mg(b):v;return c()};b.context=function(b){if(!arguments.length)return g;k=null==(g=b)?new ee:new Lg(b);"function"!==typeof f&&k.pointRadius(f);return c()};b.pointRadius=function(c){if(!arguments.length)return f;
f="function"===typeof c?c:(k.pointRadius(+c),+c);return b};return b.projection(O.geo.albersUsa()).context(null)};O.geo.transform=function(b){return{stream:function(c){c=new Se(c);for(var f in b)c[f]=b[f];return c}}};Se.prototype={point:function(b,c){this.stream.point(b,c)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
O.geo.projection=Bb;O.geo.projectionMutator=wc;(O.geo.equirectangular=function(){return Bb(yc)}).raw=yc.invert=yc;O.geo.rotation=function(b){function c(f){f=b(f[0]*ka,f[1]*ka);return f[0]*=Ca,f[1]*=Ca,f}b=Vd(b[0]%360*ka,b[1]*ka,2<b.length?b[2]*ka:0);c.invert=function(c){c=b.invert(c[0]*ka,c[1]*ka);return c[0]*=Ca,c[1]*=Ca,c};return c};Ve.invert=yc;O.geo.circle=function(){function b(){var f="function"===typeof c?c.apply(this,arguments):c,d=Vd(-f[0]*ka,-f[1]*ka,0).invert,h=[];g(null,null,1,{point:function(b,
c){h.push(b=d(b,c));b[0]*=Ca;b[1]*=Ca}});return{type:"Polygon",coordinates:[h]}}var c=[0,0],f,d=6,g;b.origin=function(f){if(!arguments.length)return c;c=f;return b};b.angle=function(c){if(!arguments.length)return f;g=Wd((f=+c)*ka,d*ka);return b};b.precision=function(c){if(!arguments.length)return d;g=Wd(f*ka,(d=+c)*ka);return b};return b.angle(90)};O.geo.distance=function(b,c){var f=(c[0]-b[0])*ka,d=b[1]*ka,g=c[1]*ka,h=Math.cos(f),k=Math.sin(d),d=Math.cos(d),l=Math.sin(g),g=Math.cos(g),m;return Math.atan2(Math.sqrt((m=
g*Math.sin(f))*m+(m=d*l-k*g*h)*m),k*l+d*g*h)};O.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:c()}}function c(){return O.range(Math.ceil(h/q)*q,g,q).map(u).concat(O.range(Math.ceil(n/t)*t,m,t).map(y)).concat(O.range(Math.ceil(d/p)*p,f,p).filter(function(b){return 1E-6<la(b%q)}).map(v)).concat(O.range(Math.ceil(l/r)*r,k,r).filter(function(b){return 1E-6<la(b%t)}).map(w))}var f,d,g,h,k,l,m,n,p=10,r=p,q=90,t=360,v,w,u,y,A=2.5;b.lines=function(){return c().map(function(b){return{type:"LineString",
coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[u(h).concat(y(m).slice(1),u(g).reverse().slice(1),y(n).reverse().slice(1))]}};b.extent=function(c){return arguments.length?b.majorExtent(c).minorExtent(c):b.minorExtent()};b.majorExtent=function(c){if(!arguments.length)return[[h,n],[g,m]];h=+c[0][0];g=+c[1][0];n=+c[0][1];m=+c[1][1];h>g&&(c=h,h=g,g=c);n>m&&(c=n,n=m,m=c);return b.precision(A)};b.minorExtent=function(c){if(!arguments.length)return[[d,l],[f,k]];d=+c[0][0];f=+c[1][0];
l=+c[0][1];k=+c[1][1];d>f&&(c=d,d=f,f=c);l>k&&(c=l,l=k,k=c);return b.precision(A)};b.step=function(c){return arguments.length?b.majorStep(c).minorStep(c):b.minorStep()};b.majorStep=function(c){if(!arguments.length)return[q,t];q=+c[0];t=+c[1];return b};b.minorStep=function(c){if(!arguments.length)return[p,r];p=+c[0];r=+c[1];return b};b.precision=function(c){if(!arguments.length)return A;A=+c;v=cf(l,k,90);w=nf(d,f,A);u=cf(n,m,90);y=nf(h,g,A);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};O.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[f||c.apply(this,arguments),g||d.apply(this,arguments)]}}var c=Xd,f,d=Rd,g;b.distance=function(){return O.geo.distance(f||c.apply(this,arguments),g||d.apply(this,arguments))};b.source=function(d){if(!arguments.length)return c;c=d;f="function"===typeof d?null:d;return b};b.target=function(c){if(!arguments.length)return d;d=c;g="function"===typeof c?null:c;return b};b.precision=function(){return arguments.length?
b:0};return b};O.geo.interpolate=function(b,c){return bh(b[0]*ka,b[1]*ka,c[0]*ka,c[1]*ka)};O.geo.length=function(b){Id=0;O.geo.stream(b,vc);return Id};var Id,vc={sphere:x,point:x,lineStart:function(){function b(g,h){var k=Math.sin(h*=ka),l=Math.cos(h),m=la((g*=ka)-c),n=Math.cos(m);Id+=Math.atan2(Math.sqrt((m=l*Math.sin(m))*m+(m=d*k-f*l*n)*m),f*k+d*l*n);c=g;f=k;d=l}var c,f,d;vc.point=function(g,h){c=g*ka;f=Math.sin(h*=ka);d=Math.cos(h);vc.point=b};vc.lineEnd=function(){vc.point=vc.lineEnd=x}},lineEnd:x,
polygonStart:x,polygonEnd:x},wg=Cc(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(O.geo.azimuthalEqualArea=function(){return Bb(wg)}).raw=wg;var xg=Cc(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},v);(O.geo.azimuthalEquidistant=function(){return Bb(xg)}).raw=xg;(O.geo.conicConformal=function(){return Yb(kf)}).raw=kf;(O.geo.conicEquidistant=function(){return Yb(of)}).raw=of;var yg=Cc(function(b){return 1/b},Math.atan);(O.geo.gnomonic=function(){return Bb(yg)}).raw=
yg;Yc.invert=function(b,c){return[b,2*Math.atan(Math.exp(c))-Ea]};(O.geo.mercator=function(){return Ye(Yc)}).raw=Yc;var zg=Cc(function(){return 1},Math.asin);(O.geo.orthographic=function(){return Bb(zg)}).raw=zg;var Ag=Cc(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(O.geo.stereographic=function(){return Bb(Ag)}).raw=Ag;Od.invert=function(b,c){return[-c,2*Math.atan(Math.exp(b))-Ea]};(O.geo.transverseMercator=function(){var b=Ye(Od),c=b.center,f=b.rotate;b.center=function(b){return b?
c([-b[1],b[0]]):(b=c(),[b[1],-b[0]])};b.rotate=function(b){return b?f([b[0],b[1],2<b.length?b[2]+90:90]):(b=f(),[b[0],b[1],b[2]-90])};return f([0,0,90])}).raw=Od;O.geom={};O.geom.hull=function(b){function c(b){if(3>b.length)return[];var g=sa(f),h=sa(d),k,l=b.length,m=[],n=[];for(k=0;k<l;k++)m.push([+g.call(this,b[k],k),+h.call(this,b[k],k),k]);m.sort(ch);for(k=0;k<l;k++)n.push([m[k][0],-m[k][1]]);var g=af(m),n=af(n),h=n[0]===g[0],l=n[n.length-1]===g[g.length-1],p=[];for(k=g.length-1;0<=k;--k)p.push(b[m[g[k]][2]]);
for(k=+h;k<n.length-l;++k)p.push(b[m[n[k]][2]]);return p}var f=gc,d=zc;if(arguments.length)return c(b);c.x=function(b){return arguments.length?(f=b,c):f};c.y=function(b){return arguments.length?(d=b,c):d};return c};O.geom.polygon=function(b){fd(b,Jd);return b};var Jd=O.geom.polygon.prototype=[];Jd.area=function(){for(var b=-1,c=this.length,f,d=this[c-1],g=0;++b<c;)f=d,d=this[b],g+=f[1]*d[0]-f[0]*d[1];return.5*g};Jd.centroid=function(b){var c=-1,f=this.length,d=0,g=0,h,k=this[f-1],l;for(arguments.length||
(b=-1/(6*this.area()));++c<f;)h=k,k=this[c],l=h[0]*k[1]-k[0]*h[1],d+=(h[0]+k[0])*l,g+=(h[1]+k[1])*l;return[d*b,g*b]};Jd.clip=function(b){for(var c,f=bf(b),d=-1,g=this.length-bf(this),h,k,l=this[g-1],m,n,p;++d<g;){c=b.slice();b.length=0;m=this[d];n=c[(k=c.length-f)-1];for(h=-1;++h<k;)p=c[h],Yd(p,l,m)?(Yd(n,l,m)||b.push(Pd(n,p,l,m)),b.push(p)):Yd(n,l,m)&&b.push(Pd(n,p,l,m)),n=p;f&&b.push(b[0]);l=m}return b};var sc,ac,rc,Gf=[],le,Oc,Hf=[];qf.prototype.prepare=function(){for(var b=this.edges,c=b.length,
f;c--;)f=b[c].edge,f.b&&f.a||b.splice(c,1);b.sort($e);return b.length};Zc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};Td.prototype={insert:function(b,c){var f,d,g;if(b){c.P=b;if(c.N=b.N)b.N.P=c;b.N=c;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=c}else b.R=c;f=b}else this._?(b=sf(this._),c.P=null,c.N=b,b.P=b.L=c,f=b):(c.P=c.N=null,this._=c,f=null);c.L=c.R=null;c.U=f;c.C=!0;for(b=c;f&&f.C;)d=f.U,f===
d.L?(g=d.R)&&g.C?(f.C=g.C=!1,d.C=!0,b=d):(b===f.R&&(Dc(this,f),b=f,f=b.U),f.C=!1,d.C=!0,Ec(this,d)):(g=d.L)&&g.C?(f.C=g.C=!1,d.C=!0,b=d):(b===f.L&&(Ec(this,f),b=f,f=b.U),f.C=!1,d.C=!0,Dc(this,d)),f=b.U;this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var c=b.U,f=b.L,d=b.R,g,h;g=f?d?sf(d):f:d;c?c.L===b?c.L=g:c.R=g:this._=g;f&&d?(h=g.C,g.C=b.C,g.L=f,f.U=g,g!==d?(c=g.U,g.U=b.U,b=g.R,c.L=b,g.R=d,d.U=g):(g.U=c,c=g,b=g.R)):(h=b.C,b=g);b&&(b.U=c);if(!h)if(b&&b.C)b.C=!1;else{do{if(b===
this._)break;if(b===c.L){if(b=c.R,b.C&&(b.C=!1,c.C=!0,Dc(this,c),b=c.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Ec(this,b),b=c.R);b.C=c.C;c.C=b.R.C=!1;Dc(this,c);b=this._;break}}else if(b=c.L,b.C&&(b.C=!1,c.C=!0,Ec(this,c),b=c.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Dc(this,b),b=c.L);b.C=c.C;c.C=b.L.C=!1;Ec(this,c);b=this._;break}b.C=!0;b=c;c=c.U}while(!b.C);b&&(b.C=!1)}}};O.geom.voronoi=function(b){function c(b){var d=Array(b.length),g=l[0][0],h=l[0][1],k=l[1][0],m=l[1][1];
Sd(f(b),l).cells.forEach(function(c,f){var l=c.edges,n=c.site;(d[f]=l.length?l.map(function(b){b=b.start();return[b.x,b.y]}):n.x>=g&&n.x<=k&&n.y>=h&&n.y<=m?[[g,m],[k,m],[k,h],[g,h]]:[]).point=b[f]});return d}function f(b){return b.map(function(b,c){return{x:1E-6*Math.round(h(b,c)/1E-6),y:1E-6*Math.round(k(b,c)/1E-6),i:c}})}var d=gc,g=zc,h=d,k=g,l=Kd;if(b)return c(b);c.links=function(b){return Sd(f(b)).edges.filter(function(b){return b.l&&b.r}).map(function(c){return{source:b[c.l.i],target:b[c.r.i]}})};
c.triangles=function(b){var c=[];Sd(f(b)).cells.forEach(function(f,d){for(var g=f.site,h=f.edges.sort($e),k=-1,l=h.length,m,n=h[l-1].edge,n=n.l===g?n.r:n.l;++k<l;)m=n,n=h[k].edge,n=n.l===g?n.r:n.l,d<m.i&&d<n.i&&0>(g.x-n.x)*(m.y-g.y)-(g.x-m.x)*(n.y-g.y)&&c.push([b[d],b[m.i],b[n.i]])});return c};c.x=function(b){return arguments.length?(h=sa(d=b),c):d};c.y=function(b){return arguments.length?(k=sa(g=b),c):g};c.clipExtent=function(b){if(!arguments.length)return l===Kd?null:l;l=null==b?Kd:b;return c};
c.size=function(b){return arguments.length?c.clipExtent(b&&[[0,0],b]):l===Kd?null:l&&l[1]};return c};var Kd=[[-1E6,-1E6],[1E6,1E6]];O.geom.delaunay=function(b){return O.geom.voronoi().triangles(b)};O.geom.quadtree=function(b,c,f,d,g){function h(b){function n(b,c,f,d,g,h,k,l){if(!isNaN(f)&&!isNaN(d))if(b.leaf){var m=b.x,r=b.y;if(null!=m){if(!(.01>la(m-f)+la(r-d))){var q=b.point;b.x=b.y=b.point=null;p(b,q,m,r,g,h,k,l)}p(b,c,f,d,g,h,k,l)}else b.x=f,b.y=d,b.point=c}else p(b,c,f,d,g,h,k,l)}function p(b,
c,f,d,g,h,k,l){var m=.5*(g+k),r=.5*(h+l),q=f>=m,t=d>=r,v=t<<1|q;b.leaf=!1;b=b.nodes[v]||(b.nodes[v]=tf());q?g=m:k=m;t?h=r:l=r;n(b,c,f,d,g,h,k,l)}var r,q=sa(k),t=sa(l),v,w,u,y,A,x,D,B;if(null!=c)A=c,x=f,D=d,B=g;else if(D=B=-(A=x=Infinity),v=[],w=[],y=b.length,m)for(u=0;u<y;++u)r=b[u],r.x<A&&(A=r.x),r.y<x&&(x=r.y),r.x>D&&(D=r.x),r.y>B&&(B=r.y),v.push(r.x),w.push(r.y);else for(u=0;u<y;++u){var z=+q(r=b[u],u);r=+t(r,u);z<A&&(A=z);r<x&&(x=r);z>D&&(D=z);r>B&&(B=r);v.push(z);w.push(r)}z=D-A;r=B-x;z>r?B=
x+z:D=A+r;var C=tf();C.add=function(b){n(C,b,+q(b,++u),+t(b,u),A,x,D,B)};C.visit=function(b){Ac(b,C,A,x,D,B)};C.find=function(b){return Vg(C,b[0],b[1],A,x,D,B)};u=-1;if(null==c){for(;++u<y;)n(C,b[u],v[u],w[u],A,x,D,B);--u}else b.forEach(C.add);v=w=b=r=null;return C}var k=gc,l=zc,m;if(m=arguments.length)return k=gh,l=hh,3===m&&(g=f,d=c,f=c=0),h(b);h.x=function(b){return arguments.length?(k=b,h):k};h.y=function(b){return arguments.length?(l=b,h):l};h.extent=function(b){if(!arguments.length)return null==
c?null:[[c,f],[d,g]];null==b?c=f=d=g=null:(c=+b[0][0],f=+b[0][1],d=+b[1][0],g=+b[1][1]);return h};h.size=function(b){if(!arguments.length)return null==c?null:[d-c,g-f];null==b?c=f=d=g=null:(c=f=0,d=+b[0],g=+b[1]);return h};return h};O.interpolateRgb=Qd;O.interpolateObject=uf;O.interpolateNumber=vb;O.interpolateString=vf;var me=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ne=new RegExp(me.source,"g");O.interpolate=Eb;O.interpolators=[function(b,c){var f=typeof c;return("string"===f?id.has(c.toLowerCase())||
/^(#|rgb\(|hsl\()/i.test(c)?Qd:vf:c instanceof fa?Qd:Array.isArray(c)?Wc:"object"===f&&isNaN(c)?uf:vb)(b,c)}];O.interpolateArray=Wc;var Bg=function(){return v},ii=O.map({linear:Bg,poly:function(b){return function(c){return Math.pow(c,b)}},quad:function(){return Og},cubic:function(){return Pg},sin:function(){return Rg},exp:function(){return Sg},circle:function(){return Tg},elastic:function(b,c){var f;2>arguments.length&&(c=.45);arguments.length?f=c/cb*Math.asin(1/b):(b=1,f=c/4);return function(d){return 1+
b*Math.pow(2,-10*d)*Math.sin((d-f)*cb/c)}},back:function(b){b||(b=1.70158);return function(c){return c*c*((b+1)*c-b)}},bounce:function(){return Wg}}),ji=O.map({"in":v,out:We,"in-out":Xe,"out-in":function(b){return Xe(We(b))}});O.ease=function(b){var c=b.indexOf("-"),f=0<=c?b.slice(0,c):b,c=0<=c?b.slice(c+1):"in",f=ii.get(f)||Bg,c=ji.get(c)||v;return Ng(c(f.apply(null,qg.call(arguments,1))))};O.interpolateHcl=function(b,c){b=O.hcl(b);c=O.hcl(c);var f=b.h,d=b.c,g=b.l,h=c.h-f,k=c.c-d,l=c.l-g;isNaN(k)&&
(k=0,d=isNaN(d)?c.c:d);isNaN(h)?(h=0,f=isNaN(f)?c.h:f):180<h?h-=360:-180>h&&(h+=360);return function(b){return na(f+h*b,d+k*b,g+l*b)+""}};O.interpolateHsl=function(b,c){b=O.hsl(b);c=O.hsl(c);var f=b.h,d=b.s,g=b.l,h=c.h-f,k=c.s-d,l=c.l-g;isNaN(k)&&(k=0,d=isNaN(d)?c.s:d);isNaN(h)?(h=0,f=isNaN(f)?c.h:f):180<h?h-=360:-180>h&&(h+=360);return function(b){return Ba(f+h*b,d+k*b,g+l*b)+""}};O.interpolateLab=function(b,c){b=O.lab(b);c=O.lab(c);var f=b.l,d=b.a,g=b.b,h=c.l-f,k=c.a-d,l=c.b-g;return function(b){return Oa(f+
h*b,d+k*b,g+l*b)+""}};O.interpolateRound=ff;O.transform=function(b){var c=Sa.createElementNS(O.ns.prefix.svg,"g");return(O.transform=function(b){if(null!=b){c.setAttribute("transform",b);var f=c.transform.baseVal.consolidate()}return new gf(f?f.matrix:ki)})(b)};gf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ki={a:1,b:0,c:0,d:1,e:0,f:0};O.interpolateTransform=mf;O.layout={};O.layout.bundle=function(){return function(b){for(var c=
[],f=-1,d=b.length;++f<d;)c.push(mh(b[f]));return c}};O.layout.chord=function(){function b(){var f={},r=[],q=O.range(k),t=[],v,w,u,y,A;d=[];g=[];v=0;for(y=-1;++y<k;){w=0;for(A=-1;++A<k;)w+=h[y][A];r.push(w);t.push(O.range(k));v+=w}m&&q.sort(function(b,c){return m(r[b],r[c])});n&&t.forEach(function(b,c){b.sort(function(b,f){return n(h[c][b],h[c][f])})});v=(cb-l*k)/v;w=0;for(y=-1;++y<k;){u=w;for(A=-1;++A<k;){var x=q[y],D=t[x][A],B=h[x][D],z=w,C=w+=B*v;f[x+"-"+D]={index:x,subindex:D,startAngle:z,endAngle:C,
value:B}}g[x]={index:x,startAngle:u,endAngle:w,value:r[x]};w+=l}for(y=-1;++y<k;)for(A=y-1;++A<k;)q=f[y+"-"+A],t=f[A+"-"+y],(q.value||t.value)&&d.push(q.value<t.value?{source:t,target:q}:{source:q,target:t});p&&c()}function c(){d.sort(function(b,c){return p((b.source.value+b.target.value)/2,(c.source.value+c.target.value)/2)})}var f={},d,g,h,k,l=0,m,n,p;f.matrix=function(b){if(!arguments.length)return h;k=(h=b)&&h.length;d=g=null;return f};f.padding=function(b){if(!arguments.length)return l;l=b;d=
g=null;return f};f.sortGroups=function(b){if(!arguments.length)return m;m=b;d=g=null;return f};f.sortSubgroups=function(b){if(!arguments.length)return n;n=b;d=null;return f};f.sortChords=function(b){if(!arguments.length)return p;p=b;d&&c();return f};f.chords=function(){d||b();return d};f.groups=function(){g||b();return g};return f};O.layout.force=function(){function b(c){return function(b,f,d,g){if(b.point!==c){d=b.cx-c.x;var h=b.cy-c.y;f=g-f;g=d*d+h*h;if(f*f/w<g)return g<q&&(f=b.charge/g,c.px-=d*
f,c.py-=h*f),!0;b.point&&g&&g<q&&(f=b.pointCharge/g,c.px-=d*f,c.py-=h*f)}return!b.charge}}function c(b){b.px=O.event.x;b.py=O.event.y;f.resume()}var f={},d=O.dispatch("start","tick","end"),g,h=[1,1],k,l,m=.9,n=li,p=mi,r=-30,q=ni,t=.1,w=.64,u=[],y=[],A,x,D;f.tick=function(){if(.005>(l*=.99))return g=null,d.end({type:"end",alpha:l=0}),!0;var c=u.length,f=y.length,k,n,p,q,v,w,B;for(k=0;k<f;++k)if(n=y[k],p=n.source,q=n.target,w=q.x-p.x,B=q.y-p.y,v=w*w+B*B)v=l*x[k]*((v=Math.sqrt(v))-A[k])/v,w*=v,B*=v,
q.x-=w*(v=p.weight+q.weight?p.weight/(p.weight+q.weight):.5),q.y-=B*v,p.x+=w*(v=1-v),p.y+=B*v;if(v=l*t)if(w=h[0]/2,B=h[1]/2,k=-1,v)for(;++k<c;)n=u[k],n.x+=(w-n.x)*v,n.y+=(B-n.y)*v;if(r)for(Jf(f=O.geom.quadtree(u),l,D),k=-1;++k<c;)(n=u[k]).fixed||f.visit(b(n));for(k=-1;++k<c;)n=u[k],n.fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*m,n.y-=(n.py-(n.py=n.y))*m);d.tick({type:"tick",alpha:l})};f.nodes=function(b){if(!arguments.length)return u;u=b;return f};f.links=function(b){if(!arguments.length)return y;
y=b;return f};f.size=function(b){if(!arguments.length)return h;h=b;return f};f.linkDistance=function(b){if(!arguments.length)return n;n="function"===typeof b?b:+b;return f};f.distance=f.linkDistance;f.linkStrength=function(b){if(!arguments.length)return p;p="function"===typeof b?b:+b;return f};f.friction=function(b){if(!arguments.length)return m;m=+b;return f};f.charge=function(b){if(!arguments.length)return r;r="function"===typeof b?b:+b;return f};f.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(q);
q=b*b;return f};f.gravity=function(b){if(!arguments.length)return t;t=+b;return f};f.theta=function(b){if(!arguments.length)return Math.sqrt(w);w=b*b;return f};f.alpha=function(b){if(!arguments.length)return l;b=+b;l?0<b?l=b:(g.c=null,g.t=NaN,g=null,d.end({type:"end",alpha:l=0})):0<b&&(d.start({type:"start",alpha:l=b}),g=ta(f.tick));return f};f.start=function(){function b(f,h){if(!m){m=Array(d);for(l=0;l<d;++l)m[l]=[];for(l=0;l<g;++l){var k=y[l];m[k.source.index].push(k.target);m[k.target.index].push(k.source)}}for(var k=
m[c],l=-1,n=k.length,p;++l<n;)if(!isNaN(p=k[l][f]))return p;return Math.random()*h}var c,d=u.length,g=y.length,k=h[0],l=h[1],m,q;for(c=0;c<d;++c)(q=u[c]).index=c,q.weight=0;for(c=0;c<g;++c)q=y[c],"number"==typeof q.source&&(q.source=u[q.source]),"number"==typeof q.target&&(q.target=u[q.target]),++q.source.weight,++q.target.weight;for(c=0;c<d;++c)q=u[c],isNaN(q.x)&&(q.x=b("x",k)),isNaN(q.y)&&(q.y=b("y",l)),isNaN(q.px)&&(q.px=q.x),isNaN(q.py)&&(q.py=q.y);A=[];if("function"===typeof n)for(c=0;c<g;++c)A[c]=
+n.call(this,y[c],c);else for(c=0;c<g;++c)A[c]=n;x=[];if("function"===typeof p)for(c=0;c<g;++c)x[c]=+p.call(this,y[c],c);else for(c=0;c<g;++c)x[c]=p;D=[];if("function"===typeof r)for(c=0;c<d;++c)D[c]=+r.call(this,u[c],c);else for(c=0;c<d;++c)D[c]=r;return f.resume()};f.resume=function(){return f.alpha(.1)};f.stop=function(){return f.alpha(0)};f.drag=function(){k||(k=O.behavior.drag().origin(v).on("dragstart.force",nh).on("drag.force",c).on("dragend.force",oh));if(!arguments.length)return k;this.on("mouseover.force",
ph).on("mouseout.force",qh).call(k)};return O.rebind(f,d,"on")};var li=20,mi=1,ni=Infinity;O.layout.hierarchy=function(){function b(g){var h=[g],k=[],l;for(g.depth=0;null!=(l=h.pop());)if(k.push(l),(n=f.call(b,l,l.depth))&&(m=n.length)){for(var m,n,p;0<=--m;)h.push(p=n[m]),p.parent=l,p.depth=l.depth+1;d&&(l.value=0);l.children=n}else d&&(l.value=+d.call(b,l,l.depth)||0),delete l.children;tb(g,function(b){var f,g;c&&(f=b.children)&&f.sort(c);d&&(g=b.parent)&&(g.value+=b.value)});return k}var c=uh,
f=sh,d=th;b.sort=function(f){if(!arguments.length)return c;c=f;return b};b.children=function(c){if(!arguments.length)return f;f=c;return b};b.value=function(c){if(!arguments.length)return d;d=c;return b};b.revalue=function(c){d&&(Qc(c,function(b){b.children&&(b.value=0)}),tb(c,function(c){var f;c.children||(c.value=+d.call(b,c,c.depth)||0);if(f=c.parent)f.value+=c.value}));return c};return b};O.layout.partition=function(){function b(c,f,d,g){var h=c.children;c.x=f;c.y=c.depth*g;c.dx=d;c.dy=g;if(h&&
(l=h.length)){var k=-1,l,m;for(d=c.value?d/c.value:0;++k<l;)b(m=h[k],f,c=m.value*d,g),f+=c}}function c(b){b=b.children;var f=0;if(b&&(g=b.length))for(var d=-1,g;++d<g;)f=Math.max(f,c(b[d]));return 1+f}function f(h,k){var l=d.call(this,h,k);b(l[0],0,g[0],g[1]/c(l[0]));return l}var d=O.layout.hierarchy(),g=[1,1];f.size=function(b){if(!arguments.length)return g;g=b;return f};return Pc(f,d)};O.layout.pie=function(){function b(k){var l=k.length,m=k.map(function(f,d){return+c.call(b,f,d)}),n=+("function"===
typeof d?d.apply(this,arguments):d),p=("function"===typeof g?g.apply(this,arguments):g)-n,r=Math.min(Math.abs(p)/l,+("function"===typeof h?h.apply(this,arguments):h)),q=r*(0>p?-1:1),t=O.sum(m),v=t?(p-l*q)/t:0,l=O.range(l),w=[],u;null!=f&&l.sort(f===Cg?function(b,c){return m[c]-m[b]}:function(b,c){return f(k[b],k[c])});l.forEach(function(b){w[b]={data:k[b],value:u=m[b],startAngle:n,endAngle:n+=u*v+q,padAngle:r}});return w}var c=Number,f=Cg,d=0,g=cb,h=0;b.value=function(f){if(!arguments.length)return c;
c=f;return b};b.sort=function(c){if(!arguments.length)return f;f=c;return b};b.startAngle=function(c){if(!arguments.length)return d;d=c;return b};b.endAngle=function(c){if(!arguments.length)return g;g=c;return b};b.padAngle=function(c){if(!arguments.length)return h;h=c;return b};return b};var Cg={};O.layout.stack=function(){function b(l,m){if(!(t=l.length))return l;var n=l.map(function(f,d){return c.call(b,f,d)}),p=n.map(function(c){return c.map(function(c,f){return[h.call(b,c,f),k.call(b,c,f)]})}),
r=f.call(b,p,m),n=O.permute(n,r),p=O.permute(p,r),r=d.call(b,p,m),q=n[0].length,t,v,w,u;for(w=0;w<q;++w)for(g.call(b,n[0][w],u=r[w],p[0][w][1]),v=1;v<t;++v)g.call(b,n[v][w],u+=p[v-1][w][1],p[v][w][1]);return l}var c=v,f=oe,d=pe,g=xh,h=vh,k=wh;b.values=function(f){if(!arguments.length)return c;c=f;return b};b.order=function(c){if(!arguments.length)return f;f="function"===typeof c?c:oi.get(c)||oe;return b};b.offset=function(c){if(!arguments.length)return d;d="function"===typeof c?c:pi.get(c)||pe;return b};
b.x=function(c){if(!arguments.length)return h;h=c;return b};b.y=function(c){if(!arguments.length)return k;k=c;return b};b.out=function(c){if(!arguments.length)return g;g=c;return b};return b};var oi=O.map({"inside-out":function(b){var c=b.length,f,d=b.map(yh),g=b.map(zh),h=O.range(c).sort(function(b,c){return d[b]-d[c]}),k=0,l=0,m=[],n=[];for(b=0;b<c;++b)f=h[b],k<l?(k+=g[f],m.push(f)):(l+=g[f],n.push(f));return n.reverse().concat(m)},reverse:function(b){return O.range(b.length).reverse()},"default":oe}),
pi=O.map({silhouette:function(b){var c=b.length,f=b[0].length,d=[],g=0,h,k,l,m=[];for(k=0;k<f;++k){for(l=h=0;h<c;h++)l+=b[h][k][1];l>g&&(g=l);d.push(l)}for(k=0;k<f;++k)m[k]=(g-d[k])/2;return m},wiggle:function(b){var c=b.length,f=b[0],d=f.length,g,h,k,l,m,n,p,r,q,t=[];t[0]=r=q=0;for(h=1;h<d;++h){for(l=g=0;g<c;++g)l+=b[g][h][1];m=g=0;for(p=f[h][0]-f[h-1][0];g<c;++g){k=0;for(n=(b[g][h][1]-b[g][h-1][1])/(2*p);k<g;++k)n+=(b[k][h][1]-b[k][h-1][1])/p;m+=n*b[g][h][1]}t[h]=r-=l?m/l*p:0;r<q&&(q=r)}for(h=0;h<
d;++h)t[h]-=q;return t},expand:function(b){var c=b.length,f=b[0].length,d=1/c,g,h,k,l=[];for(h=0;h<f;++h){for(k=g=0;g<c;g++)k+=b[g][h][1];if(k)for(g=0;g<c;g++)b[g][h][1]/=k;else for(g=0;g<c;g++)b[g][h][1]=d}for(h=0;h<f;++h)l[h]=0;return l},zero:pe});O.layout.histogram=function(){function b(h,k){var l=[],m=h.map(f,this),n=d.call(this,m,k),p=g.call(this,n,m,k),r;k=-1;for(var q=m.length,t=p.length-1,v=c?1:1/q;++k<t;)r=l[k]=[],r.dx=p[k+1]-(r.x=p[k]),r.y=0;if(0<t)for(k=-1;++k<q;)r=m[k],r>=n[0]&&r<=n[1]&&
(r=l[O.bisect(p,r,1,t)-1],r.y+=v,r.push(h[k]));return l}var c=!0,f=Number,d=Ch,g=Bh;b.value=function(c){if(!arguments.length)return f;f=c;return b};b.range=function(c){if(!arguments.length)return d;d=sa(c);return b};b.bins=function(c){if(!arguments.length)return g;g="number"===typeof c?function(b){return Kf(b,c)}:sa(c);return b};b.frequency=function(f){if(!arguments.length)return c;c=!!f;return b};return b};O.layout.pack=function(){function b(h,k){var l=c.call(this,h,k),m=l[0],n=d[0],p=d[1],r=null==
g?Math.sqrt:"function"===typeof g?g:function(){return g};m.x=m.y=0;tb(m,function(b){b.r=+r(b.value)});tb(m,Nf);if(f){var q=f*(g?1:Math.max(2*m.r/n,2*m.r/p))/2;tb(m,function(b){b.r+=q});tb(m,Nf);tb(m,function(b){b.r-=q})}Pf(m,n/2,p/2,g?1:1/Math.max(2*m.r/n,2*m.r/p));return l}var c=O.layout.hierarchy().sort(Dh),f=0,d=[1,1],g;b.size=function(c){if(!arguments.length)return d;d=c;return b};b.radius=function(c){if(!arguments.length)return g;g=null==c||"function"===typeof c?c:+c;return b};b.padding=function(c){if(!arguments.length)return f;
f=+c;return b};return Pc(b,c)};O.layout.tree=function(){function b(n,p){var r=h.call(this,n,p),q=r[0],t=c(q);tb(t,f);t.parent.m=-t.z;Qc(t,d);if(m)Qc(q,g);else{var v=q,w=q,u=q;Qc(q,function(b){b.x<v.x&&(v=b);b.x>w.x&&(w=b);b.depth>u.depth&&(u=b)});var y=k(v,w)/2-v.x,A=l[0]/(w.x+k(w,v)/2+y),x=l[1]/(u.depth||1);Qc(q,function(b){b.x=(b.x+y)*A;b.y=b.depth*x})}return r}function c(b){b={A:null,children:[b]};for(var f=[b],d;null!=(d=f.pop());)for(var g=d.children,h,k=0,l=g.length;k<l;++k)f.push((g[k]=h={_:g[k],
parent:d,children:(h=g[k].children)&&h.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:k}).a=h);return b.children[0]}function f(b){var c=b.children,d=b.parent.children,g=b.i?d[b.i-1]:null;if(c.length){for(var h=0,l=0,m=b.children,n=m.length,p;0<=--n;)p=m[n],p.z+=h,p.m+=h,h+=p.s+(l+=p.c);c=(c[0].z+c[c.length-1].z)/2;g?(b.z=g.z+k(b._,g._),b.m=b.z-c):b.z=c}else g&&(b.z=g.z+k(b._,g._));c=b.parent;d=b.parent.A||d[0];if(g){l=h=b;m=h.parent.children[0];n=h.m;p=l.m;for(var r=g.m,q=m.m,t;g=se(g),h=re(h),
g&&h;){m=re(m);l=se(l);l.a=b;t=g.z+r-h.z-n+k(g._,h._);if(0<t){var v=g.a.parent===b.parent?g.a:d,w=b,u=t,y=u/(w.i-v.i);w.c-=y;w.s+=u;v.c+=y;w.z+=u;w.m+=u;n+=t;p+=t}r+=g.m;n+=h.m;q+=m.m;p+=l.m}g&&!se(l)&&(l.t=g,l.m+=r-p);h&&!re(m)&&(m.t=h,m.m+=n-q,d=b)}c.A=d}function d(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function g(b){b.x*=l[0];b.y=b.depth*l[1]}var h=O.layout.hierarchy().sort(null).value(null),k=Qf,l=[1,1],m=null;b.separation=function(c){if(!arguments.length)return k;k=c;return b};b.size=function(c){if(!arguments.length)return m?
null:l;m=null==(l=c)?g:null;return b};b.nodeSize=function(c){if(!arguments.length)return m?l:null;m=null==(l=c)?null:g;return b};return Pc(b,h)};O.layout.cluster=function(){function b(h,k){var l=c.call(this,h,k),m=l[0],n,p=0;tb(m,function(b){var c=b.children;c&&c.length?(b.x=Hh(c),b.y=Gh(c)):(b.x=n?p+=f(b,n):0,b.y=0,n=b)});var r=Rf(m),q=Sf(m),t=r.x-f(r,q)/2,v=q.x+f(q,r)/2;tb(m,g?function(b){b.x=(b.x-m.x)*d[0];b.y=(m.y-b.y)*d[1]}:function(b){b.x=(b.x-t)/(v-t)*d[0];b.y=(1-(m.y?b.y/m.y:1))*d[1]});return l}
var c=O.layout.hierarchy().sort(null).value(null),f=Qf,d=[1,1],g=!1;b.separation=function(c){if(!arguments.length)return f;f=c;return b};b.size=function(c){if(!arguments.length)return g?null:d;g=null==(d=c);return b};b.nodeSize=function(c){if(!arguments.length)return g?d:null;g=null!=(d=c);return b};return Pc(b,c)};O.layout.treemap=function(){function b(c,f){for(var d=-1,g=c.length,h,k;++d<g;)k=(h=c[d]).value*(0>f?0:f),h.area=isNaN(k)||0>=k?0:k}function c(f){var g=f.children;if(g&&g.length){var h=
n(f),k=[],l=g.slice(),m=Infinity,p,r="slice"===q?h.dx:"dice"===q?h.dy:"slice-dice"===q?f.depth&1?h.dy:h.dx:Math.min(h.dx,h.dy);b(l,h.dx*h.dy/f.value);for(k.area=0;0<(f=l.length);){k.push(f=l[f-1]);k.area+=f.area;if(!(f="squarify"!==q)){p=r;f=k.area;for(var v=void 0,w=0,u=Infinity,y=-1,A=k.length;++y<A;)if(v=k[y].area)v<u&&(u=v),v>w&&(w=v);f*=f;p*=p;f=(p=f?Math.max(p*w*t/f,f/(p*u*t)):Infinity)<=m}f?(l.pop(),m=p):(k.area-=k.pop().area,d(k,r,h,!1),r=Math.min(h.dx,h.dy),k.length=k.area=0,m=Infinity)}k.length&&
(d(k,r,h,!0),k.length=k.area=0);g.forEach(c)}}function f(c){var g=c.children;if(g&&g.length){var h=n(c),k=g.slice(),l=[];b(k,h.dx*h.dy/c.value);for(l.area=0;c=k.pop();)l.push(c),l.area+=c.area,null!=c.z&&(d(l,c.z?h.dx:h.dy,h,!k.length),l.length=l.area=0);g.forEach(f)}}function d(b,c,f,g){var h=-1,l=b.length,m=f.x,n=f.y,p=c?k(b.area/c):0,r;if(c==f.dx){if(g||p>f.dy)p=f.dy;for(;++h<l;)r=b[h],r.x=m,r.y=n,r.dy=p,m+=r.dx=Math.min(f.x+f.dx-m,p?k(r.area/p):0);r.z=!0;r.dx+=f.x+f.dx-m;f.y+=p;f.dy-=p}else{if(g||
p>f.dx)p=f.dx;for(;++h<l;)r=b[h],r.x=m,r.y=n,r.dx=p,n+=r.dy=Math.min(f.y+f.dy-n,p?k(r.area/p):0);r.z=!1;r.dy+=f.y+f.dy-n;f.x+=p;f.dx-=p}}function g(d){d=r||h(d);var k=d[0];k.x=k.y=0;k.value?(k.dx=l[0],k.dy=l[1]):k.dx=k.dy=0;r&&h.revalue(k);b([k],k.dx*k.dy/k.value);(r?f:c)(k);p&&(r=d);return d}var h=O.layout.hierarchy(),k=Math.round,l=[1,1],m=null,n=te,p=!1,r,q="squarify",t=.5*(1+Math.sqrt(5));g.size=function(b){if(!arguments.length)return l;l=b;return g};g.padding=function(b){function c(f){var d=
b.call(g,f,f.depth);return null==d?te(f):Tf(f,"number"===typeof d?[d,d,d,d]:d)}function f(c){return Tf(c,b)}if(!arguments.length)return m;var d;n=null==(m=b)?te:"function"===(d=typeof b)?c:"number"===d?(b=[b,b,b,b],f):f;return g};g.round=function(b){if(!arguments.length)return k!=Number;k=b?Math.round:Number;return g};g.sticky=function(b){if(!arguments.length)return p;p=b;r=null;return g};g.ratio=function(b){if(!arguments.length)return t;t=b;return g};g.mode=function(b){if(!arguments.length)return q;
q=b+"";return g};return Pc(g,h)};O.random={normal:function(b,c){var f=arguments.length;2>f&&(c=1);1>f&&(b=0);return function(){var f,d;do f=2*Math.random()-1,d=2*Math.random()-1,d=f*f+d*d;while(!d||1<d);return b+c*f*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var b=O.random.normal.apply(O,arguments);return function(){return Math.exp(b())}},bates:function(b){var c=O.random.irwinHall(b);return function(){return c()/b}},irwinHall:function(b){return function(){for(var c=0,f=0;f<b;f++)c+=Math.random();
return c}}};O.scale={};var Jh={floor:v,ceil:v};O.scale.linear=function(){return Vf([0,1],[0,1],Eb,!1)};var Mh={s:1,g:1,p:1,r:1,e:1};O.scale.log=function(){return Xf(O.scale.linear().domain([0,1]),10,!0,[1,10])};var Yf=O.format(".0e"),Nh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};O.scale.pow=function(){return Zf(O.scale.linear(),1,[0,1])};O.scale.sqrt=function(){return O.scale.pow().exponent(.5)};O.scale.ordinal=function(){return $f([],{t:"range",a:[[]]})};O.scale.category10=
function(){return O.scale.ordinal().range(qi)};O.scale.category20=function(){return O.scale.ordinal().range(ri)};O.scale.category20b=function(){return O.scale.ordinal().range(si)};O.scale.category20c=function(){return O.scale.ordinal().range(ti)};var qi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ya),ri=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(Ya),si=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ya),ti=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ya);O.scale.quantile=function(){return ag([],[])};O.scale.quantize=function(){return bg(0,1,[0,1])};O.scale.threshold=
function(){return cg([.5],[0,1])};O.scale.identity=function(){return dg([0,1])};O.svg={};O.svg.arc=function(){function b(){var n=Math.max(0,+f.apply(this,arguments)),p=Math.max(0,+d.apply(this,arguments)),r=k.apply(this,arguments)-Ea,q=l.apply(this,arguments)-Ea,t=Math.abs(q-r),v=r>q?0:1;p<n&&(w=p,p=n,n=w);if(t>=fi)return c(p,v)+(n?c(n,1-v):"")+"Z";var w,u,y,A,x=0,D=0,B,z,C,E,M,N=[];if(A=(+m.apply(this,arguments)||0)/2)y=h===Ld?Math.sqrt(n*n+p*p):+h.apply(this,arguments),v||(D*=-1),p&&(D=va(y/p*Math.sin(A))),
n&&(x=va(y/n*Math.sin(A)));p?(y=p*Math.cos(r+D),A=p*Math.sin(r+D),B=p*Math.cos(q-D),z=p*Math.sin(q-D),u=Math.abs(q-r-2*D)<=ja?0:1,D&&sd(y,A,B,z)===v^u&&(B=(r+q)/2,y=p*Math.cos(B),A=p*Math.sin(B),B=z=null)):y=A=0;if(n){D=n*Math.cos(q-x);C=n*Math.sin(q-x);E=n*Math.cos(r+x);M=n*Math.sin(r+x);var G=Math.abs(r-q+2*x)<=ja?0:1;x&&sd(D,C,E,M)===1-v^G&&(E=(r+q)/2,D=n*Math.cos(E),C=n*Math.sin(E),E=M=null)}else D=C=0;1E-6<t&&.001<(w=Math.min(Math.abs(p-n)/2,+g.apply(this,arguments)))?(u=n<p^v?0:1,G=r=w,t<ja&&
(t=null==E?[D,C]:null==B?[y,A]:Pd([y,A],[E,M],[B,z],[D,C]),G=y-t[0],r=A-t[1],q=B-t[0],x=z-t[1],r=1/Math.sin(Math.acos((G*q+r*x)/(Math.sqrt(G*G+r*r)*Math.sqrt(q*q+x*x)))/2),t=Math.sqrt(t[0]*t[0]+t[1]*t[1]),G=Math.min(w,(n-t)/(r-1)),r=Math.min(w,(p-t)/(r+1))),null!=B?(t=td(null==E?[D,C]:[E,M],[y,A],p,r,v),q=td([B,z],[D,C],p,r,v),w===r?N.push("M",t[0],"A",r,",",r," 0 0,",u," ",t[1],"A",p,",",p," 0 ",1-v^sd(t[1][0],t[1][1],q[1][0],q[1][1]),",",v," ",q[1],"A",r,",",r," 0 0,",u," ",q[0]):N.push("M",t[0],
"A",r,",",r," 0 1,",u," ",q[0])):N.push("M",y,",",A),null!=E?(p=td([y,A],[E,M],n,-G,v),B=td([D,C],null==B?[y,A]:[B,z],n,-G,v),w===G?N.push("L",B[0],"A",G,",",G," 0 0,",u," ",B[1],"A",n,",",n," 0 ",v^sd(B[1][0],B[1][1],p[1][0],p[1][1]),",",1-v," ",p[1],"A",G,",",G," 0 0,",u," ",p[0]):N.push("L",B[0],"A",G,",",G," 0 0,",u," ",p[0])):N.push("L",D,",",C)):(N.push("M",y,",",A),null!=B&&N.push("A",p,",",p," 0 ",u,",",v," ",B,",",z),N.push("L",D,",",C),null!=E&&N.push("A",n,",",n," 0 ",G,",",1-v," ",E,",",
M));N.push("Z");return N.join("")}function c(b,f){return"M0,"+b+"A"+b+","+b+" 0 1,"+f+" 0,"+-b+"A"+b+","+b+" 0 1,"+f+" 0,"+b}var f=Ph,d=Qh,g=Oh,h=Ld,k=eg,l=fg,m=Rh;b.innerRadius=function(c){if(!arguments.length)return f;f=sa(c);return b};b.outerRadius=function(c){if(!arguments.length)return d;d=sa(c);return b};b.cornerRadius=function(c){if(!arguments.length)return g;g=sa(c);return b};b.padRadius=function(c){if(!arguments.length)return h;h=c==Ld?Ld:sa(c);return b};b.startAngle=function(c){if(!arguments.length)return k;
k=sa(c);return b};b.endAngle=function(c){if(!arguments.length)return l;l=sa(c);return b};b.padAngle=function(c){if(!arguments.length)return m;m=sa(c);return b};b.centroid=function(){var b=(+f.apply(this,arguments)+ +d.apply(this,arguments))/2,c=(+k.apply(this,arguments)+ +l.apply(this,arguments))/2-Ea;return[Math.cos(c)*b,Math.sin(c)*b]};return b};var Ld="auto";O.svg.line=function(){return gg(v)};var we=O.map({linear:mb,"linear-closed":hg,step:function(b){for(var c=0,f=b.length,d=b[0],g=[d[0],",",
d[1]];++c<f;)g.push("H",(d[0]+(d=b[c])[0])/2,"V",d[1]);1<f&&g.push("H",d[0]);return g.join("")},"step-before":xe,"step-after":ye,basis:ig,"basis-open":function(b){if(4>b.length)return mb(b);for(var c=[],f=-1,d=b.length,g,h=[0],k=[0];3>++f;)g=b[f],h.push(g[0]),k.push(g[1]);c.push(hb(Pb,h)+","+hb(Pb,k));for(--f;++f<d;)g=b[f],h.shift(),h.push(g[0]),k.shift(),k.push(g[1]),Ae(c,h,k);return c.join("")},"basis-closed":function(b){for(var c,f=-1,d=b.length,g=d+4,h,k=[],l=[];4>++f;)h=b[f%d],k.push(h[0]),l.push(h[1]);
c=[hb(Pb,k),",",hb(Pb,l)];for(--f;++f<g;)h=b[f%d],k.shift(),k.push(h[0]),l.shift(),l.push(h[1]),Ae(c,k,l);return c.join("")},bundle:function(b,c){var f=b.length-1;if(f)for(var d=b[0][0],g=b[0][1],h=b[f][0]-d,k=b[f][1]-g,l=-1,m,n;++l<=f;)m=b[l],n=l/f,m[0]=c*m[0]+(1-c)*(d+n*h),m[1]=c*m[1]+(1-c)*(g+n*k);return ig(b)},cardinal:function(b,c){return 3>b.length?mb(b):b[0]+ud(b,ze(b,c))},"cardinal-open":function(b,c){return 4>b.length?mb(b):b[1]+ud(b.slice(1,-1),ze(b,c))},"cardinal-closed":function(b,c){return 3>
b.length?hg(b):b[0]+ud((b.push(b[0]),b),ze([b[b.length-2]].concat(b,[b[1]]),c))},monotone:function(b){if(3>b.length)b=mb(b);else{var c=b[0],f=[],d,g,h,k;d=0;g=b.length-1;var l=[];h=b[1];for(k=l[0]=Be(b[0],h);++d<g;)l[d]=(k+(k=Be(h,h=b[d+1])))/2;l[d]=k;for(var m=-1,n=b.length-1;++m<n;)d=Be(b[m],b[m+1]),1E-6>la(d)?l[m]=l[m+1]=0:(g=l[m]/d,h=l[m+1]/d,k=g*g+h*h,9<k&&(k=3*d/Math.sqrt(k),l[m]=k*g,l[m+1]=k*h));for(m=-1;++m<=n;)k=(b[Math.min(n,m+1)][0]-b[Math.max(0,m-1)][0])/(6*(1+l[m]*l[m])),f.push([k||0,
l[m]*k||0]);b=c+ud(b,f)}return b}});we.forEach(function(b,c){c.key=b;c.closed=/-closed$/.test(b)});var jg=[0,2/3,1/3,0],kg=[0,1/3,2/3,0],Pb=[0,1/6,2/3,1/6];O.svg.line.radial=function(){var b=gg(lg);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};xe.reverse=ye;ye.reverse=xe;O.svg.area=function(){return mg(v)};O.svg.area.radial=function(){var b=mg(lg);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;b.startAngle=b.y0;delete b.y0;b.endAngle=
b.y1;delete b.y1;return b};O.svg.chord=function(){function b(h,k){var l=c(this,d,h,k),m=c(this,g,h,k);return"M"+l.p0+f(l.r,l.p1,l.a1-l.a0)+(l.a0==m.a0&&l.a1==m.a1?"Q 0,0 "+l.p0:"Q 0,0 "+m.p0+f(m.r,m.p1,m.a1-m.a0)+("Q 0,0 "+l.p0))+"Z"}function c(b,f,d,g){var m=f.call(b,d,g);f=h.call(b,m,g);d=k.call(b,m,g)-Ea;b=l.call(b,m,g)-Ea;return{r:f,a0:d,a1:b,p0:[f*Math.cos(d),f*Math.sin(d)],p1:[f*Math.cos(b),f*Math.sin(b)]}}function f(b,c,d){return"A"+b+","+b+" 0 "+ +(d>ja)+",1 "+c}var d=Xd,g=Rd,h=Sh,k=eg,l=
fg;b.radius=function(c){if(!arguments.length)return h;h=sa(c);return b};b.source=function(c){if(!arguments.length)return d;d=sa(c);return b};b.target=function(c){if(!arguments.length)return g;g=sa(c);return b};b.startAngle=function(c){if(!arguments.length)return k;k=sa(c);return b};b.endAngle=function(c){if(!arguments.length)return l;l=sa(c);return b};return b};O.svg.diagonal=function(){function b(g,h){var k=c.call(this,g,h),l=f.call(this,g,h),m=(k.y+l.y)/2,k=[k,{x:k.x,y:m},{x:l.x,y:m},l],k=k.map(d);
return"M"+k[0]+"C"+k[1]+" "+k[2]+" "+k[3]}var c=Xd,f=Rd,d=ng;b.source=function(f){if(!arguments.length)return c;c=sa(f);return b};b.target=function(c){if(!arguments.length)return f;f=sa(c);return b};b.projection=function(c){if(!arguments.length)return d;d=c;return b};return b};O.svg.diagonal.radial=function(){var b=O.svg.diagonal(),c=ng,f=b.projection;b.projection=function(b){return arguments.length?f(Th(c=b)):c};return b};O.svg.symbol=function(){function b(d,g){return(Dg.get(c.call(this,d,g))||og)(f.call(this,
d,g))}var c=Vh,f=Uh;b.type=function(f){if(!arguments.length)return c;c=sa(f);return b};b.size=function(c){if(!arguments.length)return f;f=sa(c);return b};return b};var Dg=O.map({circle:og,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*Eg));var c=b*Eg;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+
b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/Md);var c=b*Md/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(b){b=Math.sqrt(b/Md);var c=b*Md/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});O.svg.symbolTypes=Dg.keys();var Md=Math.sqrt(3),Eg=Math.tan(30*ka);xa.transition=function(b){var c=cc||++Fg;b=De(b);for(var f=[],d,g,h=Nd||{time:Date.now(),ease:Qg,delay:0,duration:250},k=-1,l=this.length;++k<l;){f.push(d=[]);for(var m=this[k],n=-1,p=m.length;++n<p;)(g=
m[n])&&vd(g,n,b,c,h),d.push(g)}return Rc(f,b,c)};xa.interrupt=function(b){return this.each(null==b?yd:pg(De(b)))};var yd=pg(De()),La=[],Fg=0,cc,Nd;La.call=xa.call;La.empty=xa.empty;La.node=xa.node;La.size=xa.size;O.transition=function(b,c){return b&&b.transition?cc?b.transition(c):b:O.selection().transition(b)};O.transition.prototype=La;La.select=function(b){var c=this.id,f=this.namespace,d=[],g,h,k;b=H(b);for(var l=-1,m=this.length;++l<m;){d.push(g=[]);for(var n=this[l],p=-1,r=n.length;++p<r;)(k=
n[p])&&(h=b.call(k,k.__data__,p,l))?("__data__"in k&&(h.__data__=k.__data__),vd(h,p,f,c,k[f][c]),g.push(h)):g.push(null)}return Rc(d,f,c)};La.selectAll=function(b){var c=this.id,f=this.namespace,d=[],g,h,k,l;b=I(b);for(var m=-1,n=this.length;++m<n;)for(var p=this[m],r=-1,q=p.length;++r<q;)if(g=p[r]){l=g[f][c];h=b.call(g,g.__data__,r,m);d.push(g=[]);for(var t=-1,v=h.length;++t<v;)(k=h[t])&&vd(k,t,f,c,l),g.push(k)}return Rc(d,f,c)};La.filter=function(b){var c=[],f,d,g;"function"!==typeof b&&(b=V(b));
for(var h=0,k=this.length;h<k;h++){c.push(f=[]);d=this[h];for(var l=0,m=d.length;l<m;l++)(g=d[l])&&b.call(g,g.__data__,l,h)&&f.push(g)}return Rc(c,this.namespace,this.id)};La.tween=function(b,c){var f=this.id,d=this.namespace;return 2>arguments.length?this.node()[d][f].tween.get(b):ea(this,null==c?function(c){c[d][f].tween.remove(b)}:function(g){g[d][f].tween.set(b,c)})};La.attr=function(b,c){function f(){this.removeAttribute(l)}function d(){this.removeAttributeNS(l.space,l.local)}function g(b){return null==
b?f:(b+="",function(){var c=this.getAttribute(l),f;return c!==b&&(f=k(c,b),function(b){this.setAttribute(l,f(b))})})}function h(b){return null==b?d:(b+="",function(){var c=this.getAttributeNS(l.space,l.local),f;return c!==b&&(f=k(c,b),function(b){this.setAttributeNS(l.space,l.local,f(b))})})}if(2>arguments.length){for(c in b)this.attr(c,b[c]);return this}var k="transform"==b?mf:Eb,l=O.ns.qualify(b);return Ce(this,"attr."+b,c,l.local?h:g)};La.attrTween=function(b,c){function f(b,d){var h=c.call(this,
b,d,this.getAttribute(g));return h&&function(b){this.setAttribute(g,h(b))}}function d(b,f){var h=c.call(this,b,f,this.getAttributeNS(g.space,g.local));return h&&function(b){this.setAttributeNS(g.space,g.local,h(b))}}var g=O.ns.qualify(b);return this.tween("attr."+b,g.local?d:f)};La.style=function(c,f,d){function g(){this.style.removeProperty(c)}var h=arguments.length;if(3>h){if("string"!==typeof c){2>h&&(f="");for(d in c)this.style(d,c[d],f);return this}d=""}return Ce(this,"style."+c,f,function(f){return null==
f?g:(f+="",function(){var g=b(this).getComputedStyle(this,null).getPropertyValue(c),h;return g!==f&&(h=Eb(g,f),function(b){this.style.setProperty(c,h(b),d)})})})};La.styleTween=function(c,f,d){3>arguments.length&&(d="");return this.tween("style."+c,function(g,h){var k=f.call(this,g,h,b(this).getComputedStyle(this,null).getPropertyValue(c));return k&&function(b){this.style.setProperty(c,k(b),d)}})};La.text=function(b){return Ce(this,"text",b,Wh)};La.remove=function(){var b=this.namespace;return this.each("end.transition",
function(){var c;2>this[b].count&&(c=this.parentNode)&&c.removeChild(this)})};La.ease=function(b){var c=this.id,f=this.namespace;if(1>arguments.length)return this.node()[f][c].ease;"function"!==typeof b&&(b=O.ease.apply(O,arguments));return ea(this,function(d){d[f][c].ease=b})};La.delay=function(b){var c=this.id,f=this.namespace;return 1>arguments.length?this.node()[f][c].delay:ea(this,"function"===typeof b?function(d,g,h){d[f][c].delay=+b.call(d,d.__data__,g,h)}:(b=+b,function(d){d[f][c].delay=b}))};
La.duration=function(b){var c=this.id,f=this.namespace;return 1>arguments.length?this.node()[f][c].duration:ea(this,"function"===typeof b?function(d,g,h){d[f][c].duration=Math.max(1,b.call(d,d.__data__,g,h))}:(b=Math.max(1,b),function(d){d[f][c].duration=b}))};La.each=function(b,c){var f=this.id,d=this.namespace;if(2>arguments.length){var g=Nd,h=cc;try{cc=f,ea(this,function(c,g,h){Nd=c[d][f];b.call(c,c.__data__,g,h)})}finally{Nd=g,cc=h}}else ea(this,function(g){g=g[d][f];(g.event||(g.event=O.dispatch("start",
"end","interrupt"))).on(b,c)});return this};La.transition=function(){for(var b=this.id,c=++Fg,f=this.namespace,d=[],g,h,k,l,m=0,n=this.length;m<n;m++){d.push(g=[]);h=this[m];for(var p=0,r=h.length;p<r;p++){if(k=h[p])l=k[f][b],vd(k,p,f,c,{time:l.time,ease:l.ease,delay:l.delay+l.duration,duration:l.duration});g.push(k)}}return Rc(d,f,c)};O.svg.axis=function(){function b(n){n.each(function(){var b=O.select(this),n=this.__chart__||c,p=this.__chart__=c.copy(),r=null==l?p.ticks?p.ticks.apply(p,k):p.domain():
l,q=null==m?p.tickFormat?p.tickFormat.apply(p,k):v:m,t=b.selectAll(".tick").data(r,p),r=t.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),w=O.transition(t.exit()).style("opacity",1E-6).remove(),u=O.transition(t.order()).style("opacity",1),y=Math.max(d,0)+h,A=od(p),b=b.selectAll(".domain").data([0]),b=(b.enter().append("path").attr("class","domain"),O.transition(b));r.append("line");r.append("text");var x=r.select("line"),D=u.select("line"),t=t.select("text").text(q),B=r.select("text"),
z=u.select("text"),C="top"===f||"left"===f?-1:1,E,M,N,G;"bottom"===f||"top"===f?(q=Xh,E="x",N="y",M="x2",G="y2",t.attr("dy",0>C?"0em":".71em").style("text-anchor","middle"),b.attr("d","M"+A[0]+","+C*g+"V0H"+A[1]+"V"+C*g)):(q=Yh,E="y",N="x",M="y2",G="x2",t.attr("dy",".32em").style("text-anchor",0>C?"end":"start"),b.attr("d","M"+C*g+","+A[0]+"H0V"+A[1]+"H"+C*g));x.attr(G,C*d);B.attr(N,C*y);D.attr(M,0).attr(G,C*d);z.attr(E,0).attr(N,C*y);if(p.rangeBand)var P=p,H=P.rangeBand()/2,n=p=function(b){return P(b)+
H};else n.rangeBand?n=p:w.call(q,p,n);r.call(q,n,p);u.call(q,p,p)})}var c=O.scale.linear(),f=Gg,d=6,g=6,h=3,k=[10],l=null,m;b.scale=function(f){if(!arguments.length)return c;c=f;return b};b.orient=function(c){if(!arguments.length)return f;f=c in ui?c+"":Gg;return b};b.ticks=function(){if(!arguments.length)return k;k=qb(arguments);return b};b.tickValues=function(c){if(!arguments.length)return l;l=c;return b};b.tickFormat=function(c){if(!arguments.length)return m;m=c;return b};b.tickSize=function(c){var f=
arguments.length;if(!f)return d;d=+c;g=+arguments[f-1];return b};b.innerTickSize=function(c){if(!arguments.length)return d;d=+c;return b};b.outerTickSize=function(c){if(!arguments.length)return g;g=+c;return b};b.tickPadding=function(c){if(!arguments.length)return h;h=+c;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var Gg="bottom",ui={top:1,right:1,bottom:1,left:1};O.svg.brush=function(){function c(b){b.each(function(){var b=O.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",h).on("touchstart.brush",h),k=b.selectAll(".background").data([0]);k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");b.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=b.selectAll(".resize").data(u,v);n.exit().remove();n.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return vi[b]}).append("rect").attr("x",
function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");n.style("display",c.empty()?"none":null);b=O.transition(b);k=O.transition(k);l&&(n=od(l),k.attr("x",n[0]).attr("width",n[1]-n[0]),d(b));m&&(n=od(m),k.attr("y",n[0]).attr("height",n[1]-n[0]),g(b));f(b)})}function f(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+n[+/e$/.test(b)]+","+p[+/^s/.test(b)]+")"})}function d(b){b.select(".extent").attr("x",
n[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",n[1]-n[0])}function g(b){b.select(".extent").attr("y",p[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function h(){function v(){var b=O.mouse(A),c=!1;I&&(b[0]+=I[0],b[1]+=I[1]);N||(O.event.altKey?(P||(P=[(n[0]+n[1])/2,(p[0]+p[1])/2]),H[0]=n[+(b[0]<P[0])],H[1]=p[+(b[1]<P[1])]):P=null);E&&u(b,l,0)&&(d(z),c=!0);M&&u(b,m,1)&&(g(z),c=!0);c&&(f(z),D({type:"brush",mode:N?"move":"resize"}))}function u(b,c,f){var d=od(c);c=d[0];
var g=d[1],d=H[f],h=f?p:n,k=h[1]-h[0];N&&(c-=d,g-=k+d);b=(f?w:t)?Math.max(c,Math.min(g,b[f])):b[f];N?c=(b+=d)+k:(P&&(d=Math.max(c,Math.min(g,2*P[f]-b))),d<b?(c=b,b=d):c=d);if(h[0]!=b||h[1]!=c)return f?q=null:r=null,h[0]=b,h[1]=c,!0}function y(){v();z.style("pointer-events","all").selectAll(".resize").style("display",c.empty()?"none":null);O.select("body").style("cursor",null);F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);G();D({type:"brushend"})}var A=this,x=O.select(O.event.target),D=k.of(A,arguments),z=O.select(A),C=x.datum(),E=!/^(n|s)$/.test(C)&&l,M=!/^(e|w)$/.test(C)&&m,N=x.classed("extent"),G=aa(A),P,H=O.mouse(A),I,F=O.select(b(A)).on("keydown.brush",function(){32==O.event.keyCode&&(N||(P=null,H[0]-=n[1],H[1]-=p[1],N=2),B())}).on("keyup.brush",function(){32==O.event.keyCode&&2==N&&(H[0]+=n[1],H[1]+=p[1],N=0,B())});if(O.event.changedTouches)F.on("touchmove.brush",v).on("touchend.brush",
y);else F.on("mousemove.brush",v).on("mouseup.brush",y);z.interrupt().selectAll("*").interrupt();if(N)H[0]=n[0]-H[0],H[1]=p[0]-H[1];else if(C){var S=+/w$/.test(C),C=+/^n/.test(C);I=[n[1-S]-H[0],p[1-C]-H[1]];H[0]=n[S];H[1]=p[C]}else O.event.altKey&&(P=H.slice());z.style("pointer-events","none").selectAll(".resize").style("display",null);O.select("body").style("cursor",x.style("cursor"));D({type:"brushstart"});v()}var k=E(c,"brushstart","brush","brushend"),l=null,m=null,n=[0,0],p=[0,0],r,q,t=!0,w=!0,
u=Le[0];c.event=function(b){b.each(function(){var b=k.of(this,arguments),c={x:n,y:p,i:r,j:q},f=this.__chart__||c;this.__chart__=c;cc?O.select(this).transition().each("start.brush",function(){r=f.i;q=f.j;n=f.x;p=f.y;b({type:"brushstart"})}).tween("brush:brush",function(){var f=Wc(n,c.x),d=Wc(p,c.y);r=q=null;return function(g){n=c.x=f(g);p=c.y=d(g);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){r=c.i;q=c.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),
b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};c.x=function(b){if(!arguments.length)return l;l=b;u=Le[!l<<1|!m];return c};c.y=function(b){if(!arguments.length)return m;m=b;u=Le[!l<<1|!m];return c};c.clamp=function(b){if(!arguments.length)return l&&m?[t,w]:l?t:m?w:null;l&&m?(t=!!b[0],w=!!b[1]):l?t=!!b:m&&(w=!!b);return c};c.extent=function(b){var f,d,g,h,k;if(!arguments.length)return l&&(r?(f=r[0],d=r[1]):(f=n[0],d=n[1],l.invert&&(f=l.invert(f),d=l.invert(d)),d<f&&(k=f,f=d,d=k))),m&&(q?(g=
q[0],h=q[1]):(g=p[0],h=p[1],m.invert&&(g=m.invert(g),h=m.invert(h)),h<g&&(k=g,g=h,h=k))),l&&m?[[f,g],[d,h]]:l?[f,d]:m&&[g,h];l&&(f=b[0],d=b[1],m&&(f=f[0],d=d[0]),r=[f,d],l.invert&&(f=l(f),d=l(d)),d<f&&(k=f,f=d,d=k),f!=n[0]||d!=n[1])&&(n=[f,d]);m&&(g=b[0],h=b[1],l&&(g=g[1],h=h[1]),q=[g,h],m.invert&&(g=m(g),h=m(h)),h<g&&(k=g,g=h,h=k),g!=p[0]||h!=p[1])&&(p=[g,h]);return c};c.clear=function(){c.empty()||(n=[0,0],p=[0,0],r=q=null);return c};c.empty=function(){return!!l&&n[0]==n[1]||!!m&&p[0]==p[1]};return O.rebind(c,
k,"on")};var vi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Le=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Me=ha.format=ug.timeFormat,Hg=Me.utc,Ig=Hg("%Y-%m-%dT%H:%M:%S.%LZ");Me.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ee:Ig;Ee.parse=function(b){b=new Date(b);return isNaN(b)?null:b};Ee.toString=Ig.toString;ha.second=Ga(function(b){return new Pa(1E3*Math.floor(b/1E3))},function(b,
c){b.setTime(b.getTime()+1E3*Math.floor(c))},function(b){return b.getSeconds()});ha.seconds=ha.second.range;ha.seconds.utc=ha.second.utc.range;ha.minute=Ga(function(b){return new Pa(6E4*Math.floor(b/6E4))},function(b,c){b.setTime(b.getTime()+6E4*Math.floor(c))},function(b){return b.getMinutes()});ha.minutes=ha.minute.range;ha.minutes.utc=ha.minute.utc.range;ha.hour=Ga(function(b){var c=b.getTimezoneOffset()/60;return new Pa(36E5*(Math.floor(b/36E5-c)+c))},function(b,c){b.setTime(b.getTime()+36E5*
Math.floor(c))},function(b){return b.getHours()});ha.hours=ha.hour.range;ha.hours.utc=ha.hour.utc.range;ha.month=Ga(function(b){b=ha.day(b);b.setDate(1);return b},function(b,c){b.setMonth(b.getMonth()+c)},function(b){return b.getMonth()});ha.months=ha.month.range;ha.months.utc=ha.month.utc.range;var wd=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Ne=[[ha.second,1],[ha.second,5],[ha.second,15],[ha.second,30],[ha.minute,1],[ha.minute,5],[ha.minute,
15],[ha.minute,30],[ha.hour,1],[ha.hour,3],[ha.hour,6],[ha.hour,12],[ha.day,1],[ha.day,2],[ha.week,1],[ha.month,1],[ha.month,3],[ha.year,1]],wi=Me.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",ub]]),Zh={range:function(b,
c,f){return O.range(Math.ceil(b/f)*f,+c,f).map(bc)},floor:v,ceil:v};Ne.year=ha.year;ha.scale=function(){return Fe(O.scale.linear(),Ne,wi)};var Jg=Ne.map(function(b){return[b[0].utc,b[1]]}),xi=Hg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],
["%B",function(b){return b.getUTCMonth()}],["%Y",ub]]);Jg.year=ha.year.utc;ha.scale.utc=function(){return Fe(O.scale.linear(),Jg,xi)};O.text=ia(function(b){return b.responseText});O.json=function(b,c){return Aa(b,"application/json",$h,c)};O.html=function(b,c){return Aa(b,"text/html",ai,c)};O.xml=ia(function(b){return b.responseXML});"function"===typeof define&&define.amd?(this.d3=O,define(O)):"object"===typeof module&&module.exports?module.exports=O:this.d3=O}();(function e$$0(c,d,g){function f(k,m){if(!d[k]){if(!c[k]){var t="function"==typeof require&&require;if(!m&&t)return t(k,!0);if(h)return h(k,!0);t=Error("Cannot find module '"+k+"'");throw t.code="MODULE_NOT_FOUND",t;}t=d[k]={exports:{}};c[k][0].call(t.exports,function(d){var g=c[k][1][d];return f(g?g:d)},t,t.exports,e$$0,c,d,g)}return d[k].exports}for(var h="function"==typeof require&&require,k=0;k<g.length;k++)f(g[k]);return f})({1:[function(b,c,d){(function(c){function f(){try{var b=new Uint8Array(1);
b.foo=function(){return 42};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function h(b){if(!(this instanceof h))return 1<arguments.length?new h(b,arguments[1]):new h(b);h.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0);if("number"===typeof b){var c;c=m(this,0>b?0:t(b)|0);if(!h.TYPED_ARRAY_SUPPORT)for(var f=0;f<b;f++)c[f]=0;return c}if("string"===typeof b){c=this;f=1<arguments.length?arguments[1]:"utf8";if("string"!==typeof f||""===f)f=
"utf8";var d=q(b,f)|0;c=m(c,d);c.write(b,f);return c}return k(this,b)}function k(b,c){if(h.isBuffer(c)){var f=b,d=t(c.length)|0,f=m(f,d);c.copy(f,0,0,d);return f}if(I(c)){for(var f=b,d=t(c.length)|0,f=m(f,d),g=0;g<d;g+=1)f[g]=c[g]&255;return f}if(null==c)throw new TypeError("must start with number, buffer, array or string");if("undefined"!==typeof ArrayBuffer){if(c.buffer instanceof ArrayBuffer)return l(b,c);if(c instanceof ArrayBuffer)return f=b,c.byteLength,h.TYPED_ARRAY_SUPPORT?(f=new Uint8Array(c),
f.__proto__=h.prototype):f=l(f,new Uint8Array(c)),f}if(c.length){f=b;d=t(c.length)|0;f=m(f,d);for(g=0;g<d;g+=1)f[g]=c[g]&255;return f}f=b;g=0;"Buffer"===c.type&&I(c.data)&&(d=c.data,g=t(d.length)|0);for(var f=m(f,g),k=0;k<g;k+=1)f[k]=d[k]&255;return f}function l(b,c){var f=t(c.length)|0;b=m(b,f);for(var d=0;d<f;d+=1)b[d]=c[d]&255;return b}function m(b,c){h.TYPED_ARRAY_SUPPORT?(b=new Uint8Array(c),b.__proto__=h.prototype):b.length=c;0!==c&&c<=h.poolSize>>>1&&(b.parent=L);return b}function t(b){if(b>=
(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return b|0}function u(b,c){if(!(this instanceof u))return new u(b,c);var f=new h(b,c);delete f.parent;return f}function q(b,c){"string"!==typeof b&&(b=""+b);var f=b.length;if(0===f)return 0;for(var d=!1;;)switch(c){case "ascii":case "binary":case "raw":case "raws":return f;case "utf8":case "utf-8":return B(b).length;
case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*f;case "hex":return f>>>1;case "base64":return G.toByteArray(D(b)).length;default:if(d)return B(b).length;c=(""+c).toLowerCase();d=!0}}function n(b,c,f){var d=!1;c|=0;f=void 0===f||Infinity===f?this.length:f|0;b||(b="utf8");0>c&&(c=0);f>this.length&&(f=this.length);if(f<=c)return"";for(;;)switch(b){case "hex":b=c;c=f;f=this.length;if(!b||0>b)b=0;if(!c||0>c||c>f)c=f;d="";for(f=b;f<c;f++)b=d,d=this[f],d=16>d?"0"+d.toString(16):d.toString(16),
d=b+d;return d;case "utf8":case "utf-8":return r(this,c,f);case "ascii":b="";for(f=Math.min(this.length,f);c<f;c++)b+=String.fromCharCode(this[c]&127);return b;case "binary":b="";for(f=Math.min(this.length,f);c<f;c++)b+=String.fromCharCode(this[c]);return b;case "base64":return c=0===c&&f===this.length?G.fromByteArray(this):G.fromByteArray(this.slice(c,f)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,f);f="";for(b=0;b<c.length;b+=2)f+=String.fromCharCode(c[b]+256*c[b+1]);
return f;default:if(d)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();d=!0}}function r(b,c,f){f=Math.min(b.length,f);for(var d=[];c<f;){var g=b[c],h=null,k=239<g?4:223<g?3:191<g?2:1;if(c+k<=f){var l,m,n;switch(k){case 1:128>g&&(h=g);break;case 2:l=b[c+1];128===(l&192)&&(g=(g&31)<<6|l&63,127<g&&(h=g));break;case 3:l=b[c+1];m=b[c+2];128===(l&192)&&128===(m&192)&&(g=(g&15)<<12|(l&63)<<6|m&63,2047<g&&(55296>g||57343<g)&&(h=g));break;case 4:l=b[c+1],m=b[c+2],n=b[c+3],128===(l&192)&&
128===(m&192)&&128===(n&192)&&(g=(g&15)<<18|(l&63)<<12|(m&63)<<6|n&63,65535<g&&1114112>g&&(h=g))}}null===h?(h=65533,k=1):65535<h&&(h-=65536,d.push(h>>>10&1023|55296),h=56320|h&1023);d.push(h);c+=k}b=d.length;if(b<=J)d=String.fromCharCode.apply(String,d);else{f="";for(c=0;c<b;)f+=String.fromCharCode.apply(String,d.slice(c,c+=J));d=f}return d}function p(b,c,f){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+c>f)throw new RangeError("Trying to access beyond buffer length");}function w(b,
c,f,d,g,k){if(!h.isBuffer(b))throw new TypeError("buffer must be a Buffer instance");if(c>g||c<k)throw new RangeError("value is out of bounds");if(f+d>b.length)throw new RangeError("index out of range");}function v(b,c,f,d){0>c&&(c=65535+c+1);for(var g=0,h=Math.min(b.length-f,2);g<h;g++)b[f+g]=(c&255<<8*(d?g:1-g))>>>8*(d?g:1-g)}function y(b,c,f,d){0>c&&(c=4294967295+c+1);for(var g=0,h=Math.min(b.length-f,4);g<h;g++)b[f+g]=c>>>8*(d?g:3-g)&255}function A(b,c,f,d,g,h){if(f+d>b.length)throw new RangeError("index out of range");
if(0>f)throw new RangeError("index out of range");}function x(b,c,f,d,g){g||A(b,c,f,4,3.4028234663852886E38,-3.4028234663852886E38);H.write(b,c,f,d,23,4);return f+4}function z(b,c,f,d,g){g||A(b,c,f,8,1.7976931348623157E308,-1.7976931348623157E308);H.write(b,c,f,d,52,8);return f+8}function D(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(K,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function B(b,c){c=c||Infinity;for(var f,d=b.length,g=null,h=[],k=0;k<d;k++){f=b.charCodeAt(k);
if(55295<f&&57344>f){if(!g){if(56319<f){-1<(c-=3)&&h.push(239,191,189);continue}else if(k+1===d){-1<(c-=3)&&h.push(239,191,189);continue}g=f;continue}if(56320>f){-1<(c-=3)&&h.push(239,191,189);g=f;continue}f=(g-55296<<10|f-56320)+65536}else g&&-1<(c-=3)&&h.push(239,191,189);g=null;if(128>f){if(0>--c)break;h.push(f)}else if(2048>f){if(0>(c-=2))break;h.push(f>>6|192,f&63|128)}else if(65536>f){if(0>(c-=3))break;h.push(f>>12|224,f>>6&63|128,f&63|128)}else if(1114112>f){if(0>(c-=4))break;h.push(f>>18|
240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw Error("Invalid code point");}return h}function C(b){for(var c=[],f=0;f<b.length;f++)c.push(b.charCodeAt(f)&255);return c}function E(b,c,f,d){for(var g=0;g<d&&!(g+f>=c.length||g>=b.length);g++)c[g+f]=b[g];return g}var G=b("base64-js"),H=b("ieee754"),I=b("isarray");d.Buffer=h;d.SlowBuffer=u;d.INSPECT_MAX_BYTES=50;h.poolSize=8192;var L={};h.TYPED_ARRAY_SUPPORT=void 0!==c.TYPED_ARRAY_SUPPORT?c.TYPED_ARRAY_SUPPORT:f();h._augment=function(b){b.__proto__=
h.prototype;return b};h.TYPED_ARRAY_SUPPORT?(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array):(h.prototype.length=void 0,h.prototype.parent=void 0);h.isBuffer=function(b){return!(null==b||!b._isBuffer)};h.compare=function(b,c){if(!h.isBuffer(b)||!h.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var f=b.length,d=c.length,g=0,k=Math.min(f,d);g<k&&b[g]===c[g];)++g;g!==k&&(f=b[g],d=c[g]);return f<d?-1:d<f?1:0};h.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};h.concat=function(b,c){if(!I(b))throw new TypeError("list argument must be an Array of Buffers.");if(0===b.length)return new h(0);var f;if(void 0===c)for(f=c=0;f<b.length;f++)c+=b[f].length;var d=new h(c),g=0;for(f=0;f<b.length;f++){var k=b[f];k.copy(d,g);g+=k.length}return d};h.byteLength=q;h.prototype._isBuffer=!0;h.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?r(this,0,b):n.apply(this,arguments)};h.prototype.equals=function(b){if(!h.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b?!0:0===h.compare(this,b)};h.prototype.inspect=function(){var b="",c=d.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};h.prototype.compare=function(b){if(!h.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?0:h.compare(this,b)};h.prototype.indexOf=function(b,c){function f(b,c,d){for(var g=-1,h=0;d+h<b.length;h++)if(b[d+h]===c[-1===g?0:h-g]){if(-1===g&&(g=h),h-g+1===
c.length)return d+g}else g=-1;return-1}2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c>>=0;if(0===this.length||c>=this.length)return-1;0>c&&(c=Math.max(this.length+c,0));if("string"===typeof b)return 0===b.length?-1:String.prototype.indexOf.call(this,b,c);if(h.isBuffer(b))return f(this,b,c);if("number"===typeof b)return h.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,b,c):f(this,[b],c);throw new TypeError("val must be string, number or Buffer");
};h.prototype.write=function(b,c,f,d){if(void 0===c)d="utf8",f=this.length,c=0;else if(void 0===f&&"string"===typeof c)d=c,f=this.length,c=0;else if(isFinite(c))c|=0,isFinite(f)?(f|=0,void 0===d&&(d="utf8")):(d=f,f=void 0);else{var g=d;d=c;c=f|0;f=g}g=this.length-c;if(void 0===f||f>g)f=g;if(0<b.length&&(0>f||0>c)||c>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(g=!1;;)switch(d){case "hex":c=Number(c)||0;d=this.length-c;f?(f=Number(f),f>d&&(f=d)):f=d;
d=b.length;if(0!==d%2)throw Error("Invalid hex string");f>d/2&&(f=d/2);for(d=0;d<f;d++){g=parseInt(b.substr(2*d,2),16);if(isNaN(g))throw Error("Invalid hex string");this[c+d]=g}return d;case "utf8":case "utf-8":return E(B(b,this.length-c),this,c,f);case "ascii":return E(C(b),this,c,f);case "binary":return E(C(b),this,c,f);case "base64":return E(G.toByteArray(D(b)),this,c,f);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.length-c;for(var h=void 0,h=g=void 0,k=[],l=0;l<b.length&&!(0>
(d-=2));l++)h=b.charCodeAt(l),g=h>>8,h%=256,k.push(h),k.push(g);return E(k,this,c,f);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();g=!0}};h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;h.prototype.slice=function(b,c){var f=this.length;b=~~b;c=void 0===c?f:~~c;0>b?(b+=f,0>b&&(b=0)):b>f&&(b=f);0>c?(c+=f,0>c&&(c=0)):c>f&&(c=f);c<b&&(c=b);if(h.TYPED_ARRAY_SUPPORT)f=this.subarray(b,c),f.__proto__=h.prototype;
else for(var d=c-b,f=new h(d,void 0),g=0;g<d;g++)f[g]=this[g+b];f.length&&(f.parent=this.parent||this);return f};h.prototype.readUIntLE=function(b,c,f){b|=0;c|=0;f||p(b,c,this.length);f=this[b];for(var d=1,g=0;++g<c&&(d*=256);)f+=this[b+g]*d;return f};h.prototype.readUIntBE=function(b,c,f){b|=0;c|=0;f||p(b,c,this.length);f=this[b+--c];for(var d=1;0<c&&(d*=256);)f+=this[b+--c]*d;return f};h.prototype.readUInt8=function(b,c){c||p(b,1,this.length);return this[b]};h.prototype.readUInt16LE=function(b,
c){c||p(b,2,this.length);return this[b]|this[b+1]<<8};h.prototype.readUInt16BE=function(b,c){c||p(b,2,this.length);return this[b]<<8|this[b+1]};h.prototype.readUInt32LE=function(b,c){c||p(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};h.prototype.readUInt32BE=function(b,c){c||p(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};h.prototype.readIntLE=function(b,c,f){b|=0;c|=0;f||p(b,c,this.length);f=this[b];for(var d=1,g=0;++g<c&&(d*=256);)f+=
this[b+g]*d;f>=128*d&&(f-=Math.pow(2,8*c));return f};h.prototype.readIntBE=function(b,c,f){b|=0;c|=0;f||p(b,c,this.length);f=c;for(var d=1,g=this[b+--f];0<f&&(d*=256);)g+=this[b+--f]*d;g>=128*d&&(g-=Math.pow(2,8*c));return g};h.prototype.readInt8=function(b,c){c||p(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};h.prototype.readInt16LE=function(b,c){c||p(b,2,this.length);var f=this[b]|this[b+1]<<8;return f&32768?f|4294901760:f};h.prototype.readInt16BE=function(b,c){c||p(b,2,this.length);
var f=this[b+1]|this[b]<<8;return f&32768?f|4294901760:f};h.prototype.readInt32LE=function(b,c){c||p(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};h.prototype.readInt32BE=function(b,c){c||p(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};h.prototype.readFloatLE=function(b,c){c||p(b,4,this.length);return H.read(this,b,!0,23,4)};h.prototype.readFloatBE=function(b,c){c||p(b,4,this.length);return H.read(this,b,!1,23,4)};h.prototype.readDoubleLE=function(b,
c){c||p(b,8,this.length);return H.read(this,b,!0,52,8)};h.prototype.readDoubleBE=function(b,c){c||p(b,8,this.length);return H.read(this,b,!1,52,8)};h.prototype.writeUIntLE=function(b,c,f,d){b=+b;c|=0;f|=0;d||w(this,b,c,f,Math.pow(2,8*f),0);d=1;var g=0;for(this[c]=b&255;++g<f&&(d*=256);)this[c+g]=b/d&255;return c+f};h.prototype.writeUIntBE=function(b,c,f,d){b=+b;c|=0;f|=0;d||w(this,b,c,f,Math.pow(2,8*f),0);d=f-1;var g=1;for(this[c+d]=b&255;0<=--d&&(g*=256);)this[c+d]=b/g&255;return c+f};h.prototype.writeUInt8=
function(b,c,f){b=+b;c|=0;f||w(this,b,c,1,255,0);h.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[c]=b&255;return c+1};h.prototype.writeUInt16LE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):v(this,b,c,!0);return c+2};h.prototype.writeUInt16BE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):v(this,b,c,!1);return c+2};h.prototype.writeUInt32LE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,4,4294967295,
0);h.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=b&255):y(this,b,c,!0);return c+4};h.prototype.writeUInt32BE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b&255):y(this,b,c,!1);return c+4};h.prototype.writeIntLE=function(b,c,f,d){b=+b;c|=0;d||(d=Math.pow(2,8*f-1),w(this,b,c,f,d-1,-d));d=0;var g=1,h=0>b?1:0;for(this[c]=b&255;++d<f&&(g*=256);)this[c+d]=(b/g>>0)-h&255;return c+
f};h.prototype.writeIntBE=function(b,c,f,d){b=+b;c|=0;d||(d=Math.pow(2,8*f-1),w(this,b,c,f,d-1,-d));d=f-1;var g=1,h=0>b?1:0;for(this[c+d]=b&255;0<=--d&&(g*=256);)this[c+d]=(b/g>>0)-h&255;return c+f};h.prototype.writeInt8=function(b,c,f){b=+b;c|=0;f||w(this,b,c,1,127,-128);h.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[c]=b&255;return c+1};h.prototype.writeInt16LE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):v(this,b,
c,!0);return c+2};h.prototype.writeInt16BE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):v(this,b,c,!1);return c+2};h.prototype.writeInt32LE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,4,2147483647,-2147483648);h.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):y(this,b,c,!0);return c+4};h.prototype.writeInt32BE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);
h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b&255):y(this,b,c,!1);return c+4};h.prototype.writeFloatLE=function(b,c,f){return x(this,b,c,!0,f)};h.prototype.writeFloatBE=function(b,c,f){return x(this,b,c,!1,f)};h.prototype.writeDoubleLE=function(b,c,f){return z(this,b,c,!0,f)};h.prototype.writeDoubleBE=function(b,c,f){return z(this,b,c,!1,f)};h.prototype.copy=function(b,c,f,d){f||(f=0);d||0===d||(d=this.length);c>=b.length&&(c=b.length);c||(c=0);0<d&&d<f&&(d=f);
if(d===f||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>f||f>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);b.length-c<d-f&&(d=b.length-c+f);var g=d-f;if(this===b&&f<c&&c<d)for(d=g-1;0<=d;d--)b[d+c]=this[d+f];else if(1E3>g||!h.TYPED_ARRAY_SUPPORT)for(d=0;d<g;d++)b[d+c]=this[d+f];else Uint8Array.prototype.set.call(b,this.subarray(f,f+g),c);return g};
h.prototype.fill=function(b,c,f){b||(b=0);c||(c=0);f||(f=this.length);if(f<c)throw new RangeError("end < start");if(f!==c&&0!==this.length){if(0>c||c>=this.length)throw new RangeError("start out of bounds");if(0>f||f>this.length)throw new RangeError("end out of bounds");if("number"===typeof b)for(;c<f;c++)this[c]=b;else{b=B(b.toString());for(var d=b.length;c<f;c++)this[c]=b[c%d]}return this}};var K=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:
"undefined"!==typeof window?window:{})},{"base64-js":2,ieee754:3,isarray:4}],2:[function(b,c,d){(function(b){function c(b){b=b.charCodeAt(0);if(43===b||45===b)return 62;if(47===b||95===b)return 63;if(48>b)return-1;if(58>b)return b-48+52;if(91>b)return b-65;if(123>b)return b-97+26}var d="undefined"!==typeof Uint8Array?Uint8Array:Array;b.toByteArray=function(b){function g(b){n[r++]=b}var m,t,u,q,n;if(0<b.length%4)throw Error("Invalid string. Length must be a multiple of 4");m=b.length;q="="===b.charAt(m-
2)?2:"="===b.charAt(m-1)?1:0;n=new d(3*b.length/4-q);t=0<q?b.length-4:b.length;var r=0;for(m=0;m<t;m+=4)u=c(b.charAt(m))<<18|c(b.charAt(m+1))<<12|c(b.charAt(m+2))<<6|c(b.charAt(m+3)),g((u&16711680)>>16),g((u&65280)>>8),g(u&255);2===q?(u=c(b.charAt(m))<<2|c(b.charAt(m+1))>>4,g(u&255)):1===q&&(u=c(b.charAt(m))<<10|c(b.charAt(m+1))<<4|c(b.charAt(m+2))>>2,g(u>>8&255),g(u&255));return n};b.fromByteArray=function(b){var c,f=b.length%3,d="",g,h;c=0;for(h=b.length-f;c<h;c+=3)g=(b[c]<<16)+(b[c+1]<<8)+b[c+
2],g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g&63),d+=g;switch(f){case 1:g=b[b.length-1];d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>2);d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g<<
4&63);d+="==";break;case 2:g=(b[b.length-2]<<8)+b[b.length-1],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>10),d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>4&63),d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g<<2&63),d+="="}return d}})("undefined"===typeof d?this.base64js={}:d)},{}],3:[function(b,c,d){d.read=function(b,c,d,k,l){var m;m=8*l-k-1;var t=(1<<m)-1,u=t>>1,q=-7;l=d?l-1:0;var n=d?-1:1,r=b[c+
l];l+=n;d=r&(1<<-q)-1;r>>=-q;for(q+=m;0<q;d=256*d+b[c+l],l+=n,q-=8);m=d&(1<<-q)-1;d>>=-q;for(q+=k;0<q;m=256*m+b[c+l],l+=n,q-=8);if(0===d)d=1-u;else{if(d===t)return m?NaN:Infinity*(r?-1:1);m+=Math.pow(2,k);d-=u}return(r?-1:1)*m*Math.pow(2,d-k)};d.write=function(b,c,d,k,l,m){var t,u=8*m-l-1,q=(1<<u)-1,n=q>>1,r=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;m=k?0:m-1;var p=k?1:-1,w=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,k=q):(k=Math.floor(Math.log(c)/Math.LN2),1>c*(t=Math.pow(2,
-k))&&(k--,t*=2),c=1<=k+n?c+r/t:c+r*Math.pow(2,1-n),2<=c*t&&(k++,t/=2),k+n>=q?(c=0,k=q):1<=k+n?(c=(c*t-1)*Math.pow(2,l),k+=n):(c=c*Math.pow(2,n-1)*Math.pow(2,l),k=0));for(;8<=l;b[d+m]=c&255,m+=p,c/=256,l-=8);k=k<<l|c;for(u+=l;0<u;b[d+m]=k&255,m+=p,k/=256,u-=8);b[d+m-p]|=128*w}},{}],4:[function(b,c,d){var g={}.toString;c.exports=Array.isArray||function(b){return"[object Array]"==g.call(b)}},{}],5:[function(b,c,d){c.exports=b("./lib/heap")},{"./lib/heap":6}],6:[function(b,c,d){(function(){var b,f,h,
k,l,m,t,u,q,n,r,p,w,v,y;h=Math.floor;n=Math.min;f=function(b,c){return b<c?-1:b>c?1:0};q=function(b,c,d,g,k){var l;null==d&&(d=0);null==k&&(k=f);if(0>d)throw Error("lo must be non-negative");null==g&&(g=b.length);for(;d<g;)l=h((d+g)/2),0>k(c,b[l])?g=l:d=l+1;return[].splice.apply(b,[d,d-d].concat(c)),c};m=function(b,c,d){null==d&&(d=f);b.push(c);return v(b,0,b.length-1,d)};l=function(b,c){var d,g;null==c&&(c=f);d=b.pop();b.length?(g=b[0],b[0]=d,y(b,0,c)):g=d;return g};u=function(b,c,d){var g;null==
d&&(d=f);g=b[0];b[0]=c;y(b,0,d);return g};t=function(b,c,d){var g;null==d&&(d=f);b.length&&0>d(b[0],c)&&(g=[b[0],c],c=g[0],b[0]=g[1],y(b,0,d));return c};k=function(b,c){var d,g,k,l,m,n;null==c&&(c=f);l=function(){n=[];for(var c=0,f=h(b.length/2);0<=f?c<f:c>f;0<=f?c++:c--)n.push(c);return n}.apply(this).reverse();m=[];g=0;for(k=l.length;g<k;g++)d=l[g],m.push(y(b,d,c));return m};w=function(b,c,d){null==d&&(d=f);c=b.indexOf(c);if(-1!==c)return v(b,0,c,d),y(b,c,d)};r=function(b,c,d){var g,h,l;null==d&&
(d=f);g=b.slice(0,c);if(!g.length)return g;k(g,d);l=b.slice(c);c=0;for(h=l.length;c<h;c++)b=l[c],t(g,b,d);return g.sort(d).reverse()};p=function(b,c,d){var g,h,m,p;null==d&&(d=f);if(10*c<=b.length){h=b.slice(0,c).sort(d);if(!h.length)return h;g=h[h.length-1];p=b.slice(c);c=0;for(m=p.length;c<m;c++)b=p[c],0>d(b,g)&&(q(h,b,0,null,d),h.pop(),g=h[h.length-1]);return h}k(b,d);h=[];g=0;for(c=n(c,b.length);0<=c?g<c:g>c;0<=c?++g:--g)h.push(l(b,d));return h};v=function(b,c,d,g){var h,k,l;null==g&&(g=f);for(h=
b[d];d>c;)if(l=d-1>>1,k=b[l],0>g(h,k))b[d]=k,d=l;else break;return b[d]=h};y=function(b,c,d){var g,h,k,l,m;null==d&&(d=f);h=b.length;m=c;k=b[c];for(g=2*c+1;g<h;)l=g+1,l<h&&!(0>d(b[g],b[l]))&&(g=l),b[c]=b[g],c=g,g=2*c+1;b[c]=k;return v(b,m,c,d)};b=function(){function b(c){this.cmp=null!=c?c:f;this.nodes=[]}b.push=m;b.pop=l;b.replace=u;b.pushpop=t;b.heapify=k;b.updateItem=w;b.nlargest=r;b.nsmallest=p;b.prototype.push=function(b){return m(this.nodes,b,this.cmp)};b.prototype.pop=function(){return l(this.nodes,
this.cmp)};b.prototype.peek=function(){return this.nodes[0]};b.prototype.contains=function(b){return-1!==this.nodes.indexOf(b)};b.prototype.replace=function(b){return u(this.nodes,b,this.cmp)};b.prototype.pushpop=function(b){return t(this.nodes,b,this.cmp)};b.prototype.heapify=function(){return k(this.nodes,this.cmp)};b.prototype.updateItem=function(b){return w(this.nodes,b,this.cmp)};b.prototype.clear=function(){return this.nodes=[]};b.prototype.empty=function(){return 0===this.nodes.length};b.prototype.size=
function(){return this.nodes.length};b.prototype.clone=function(){var c;c=new b;c.nodes=this.nodes.slice(0);return c};b.prototype.toArray=function(){return this.nodes.slice(0)};b.prototype.insert=b.prototype.push;b.prototype.top=b.prototype.peek;b.prototype.front=b.prototype.peek;b.prototype.has=b.prototype.contains;b.prototype.copy=b.prototype.clone;return b}();(function(b,f){return"function"===typeof define&&define.amd?define([],f):"object"===typeof d?c.exports=f():b.Heap=f()})(this,function(){return b})}).call(this)},
{}],7:[function(b,c,d){(function(b){var c="undefined"===typeof d?function(){}:d;"undefined"!==typeof b&&(b.numeric=c);c.version="1.2.6";c.bench=function(b,c){var f,d,g;"undefined"===typeof c&&(c=15);g=.5;for(f=new Date;;){for(d=g*=2;3<d;d-=4)b(),b(),b(),b();for(;0<d;)b(),d--;d=new Date;if(d-f>c)break}for(d=g;3<d;d-=4)b(),b(),b(),b();for(;0<d;)b(),d--;d=new Date;return 1E3*(3*g-1)/(d-f)};c._myIndexOf=function(b){var c=this.length,f;for(f=0;f<c;++f)if(this[f]===b)return f;return-1};c.myIndexOf=Array.prototype.indexOf?
Array.prototype.indexOf:c._myIndexOf;c.Function=Function;c.precision=4;c.largeArray=50;c.prettyPrint=function(b){function d(b){if(0===b)return"0";if(isNaN(b))return"NaN";if(0>b)return"-"+d(-b);if(isFinite(b)){var g=Math.floor(Math.log(b)/Math.log(10));b/=Math.pow(10,g);b=b.toPrecision(c.precision);10===parseFloat(b)&&(g++,b=(1).toPrecision(c.precision));return parseFloat(b).toString()+"e"+g.toString()}return"Infinity"}function g(b){var h;if("undefined"===typeof b)return m.push(Array(c.precision+8).join(" ")),
!1;if("string"===typeof b)return m.push('"'+b+'"'),!1;if("boolean"===typeof b)return m.push(b.toString()),!1;if("number"===typeof b){var q=d(b);h=b.toPrecision(c.precision);b=parseFloat(b.toString()).toString();b=[q,h,b,parseFloat(h).toString(),parseFloat(b).toString()];for(h=1;h<b.length;h++)b[h].length<q.length&&(q=b[h]);m.push(Array(c.precision+8-q.length).join(" ")+q);return!1}if(null===b)return m.push("null"),!1;if("function"===typeof b){m.push(b.toString());q=!1;for(h in b)b.hasOwnProperty(h)&&
(q?m.push(",\n"):m.push("\n{"),q=!0,m.push(h),m.push(": \n"),g(b[h]));q&&m.push("}\n");return!0}if(b instanceof Array){if(b.length>c.largeArray)return m.push("...Large Array..."),!0;q=!1;m.push("[");for(h=0;h<b.length;h++)0<h&&(m.push(","),q&&m.push("\n ")),q=g(b[h]);m.push("]");return!0}m.push("{");q=!1;for(h in b)b.hasOwnProperty(h)&&(q&&m.push(",\n"),q=!0,m.push(h),m.push(": \n"),g(b[h]));m.push("}");return!0}var m=[];g(b);return m.join("")};c.parseDate=function(b){function c(b){if("string"===
typeof b)return Date.parse(b.replace(/-/g,"/"));if(!(b instanceof Array))throw Error("parseDate: parameter must be arrays of strings");var f=[],d;for(d=0;d<b.length;d++)f[d]=c(b[d]);return f}return c(b)};c.parseFloat=function(b){function c(b){if("string"===typeof b)return parseFloat(b);if(!(b instanceof Array))throw Error("parseFloat: parameter must be arrays of strings");var f=[],d;for(d=0;d<b.length;d++)f[d]=c(b[d]);return f}return c(b)};c.parseCSV=function(b){b=b.split("\n");var c,f,d=[],g=/(([^'",]*)|('[^']*')|("[^"]*")),/g,
u=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,q=0;for(f=0;f<b.length;f++){var n=(b[f]+",").match(g),r;if(0<n.length){d[q]=[];for(c=0;c<n.length;c++)r=n[c],r=r.substr(0,r.length-1),u.test(r)?d[q][c]=parseFloat(r):d[q][c]=r;q++}}return d};c.toCSV=function(b){var d,g,m,t,u;m=c.dim(b)[0];u=[];for(d=0;d<m;d++){t=[];for(g=0;g<m;g++)t[g]=b[d][g].toString();u[d]=t.join(", ")}return u.join("\n")+"\n"};c.getURL=function(b){var c=new XMLHttpRequest;c.open("GET",
b,!1);c.send();return c};c.imageURL=function(b){function c(b,f,d){"undefined"===typeof f&&(f=0);"undefined"===typeof d&&(d=b.length);for(var g=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,
3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,
476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,
3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,
1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,
1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],h=-1,k=0;f<d;f++)k=(h^b[f])&255,h=h>>>8^g[k];return h^-1}var f=b[0].length,d=b[0][0].length,g,u,q,n,r,p,w=[137,80,78,71,13,10,26,10,0,0,
0,13,73,72,68,82,d>>24&255,d>>16&255,d>>8&255,d&255,f>>24&255,f>>16&255,f>>8&255,f&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];g=c(w,12,29);w[29]=g>>24&255;w[30]=g>>16&255;w[31]=g>>8&255;w[32]=g&255;g=1;for(r=u=0;r<f;r++){r<f-1?w.push(0):w.push(1);n=3*d+1+(0===r)&255;q=3*d+1+(0===r)>>8&255;w.push(n);w.push(q);w.push(~n&255);w.push(~q&255);0===r&&w.push(0);for(p=0;p<d;p++)for(q=0;3>q;q++)n=b[q][r][p],n=255<n?255:0>n?0:Math.round(n),g=(g+n)%65521,u=(u+g)%65521,w.push(n);w.push(0)}b=(u<<
16)+g;w.push(b>>24&255);w.push(b>>16&255);w.push(b>>8&255);w.push(b&255);b=w.length-41;w[33]=b>>24&255;w[34]=b>>16&255;w[35]=b>>8&255;w[36]=b&255;g=c(w,37);w.push(g>>24&255);w.push(g>>16&255);w.push(g>>8&255);w.push(g&255);w.push(0);w.push(0);w.push(0);w.push(0);w.push(73);w.push(69);w.push(78);w.push(68);w.push(174);w.push(66);w.push(96);w.push(130);return"data:image/png;base64,"+function(b){var c=b.length,f,d,g,h,k,l="";for(f=0;f<c;f+=3)d=b[f],g=b[f+1],h=b[f+2],k=d>>2,d=((d&3)<<4)+(g>>4),g=((g&
15)<<2)+(h>>6),h&=63,f+1>=c?g=h=64:f+2>=c&&(h=64),l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h);return l}(w)};c._dim=function(b){for(var c=[];"object"===typeof b;)c.push(b.length),b=b[0];return c};c.dim=function(b){var d,g;return"object"===
typeof b?(d=b[0],"object"===typeof d?(g=d[0],"object"===typeof g?c._dim(b):[b.length,d.length]):[b.length]):[]};c.mapreduce=function(b,c){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+c+';\nif(typeof x === "number") { var xi = x; '+b+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+
b+";\n    xi = x[i-1];\n    "+b+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+b+"\n}\nreturn accum;")};c.mapreduce2=function(b,c){return Function("x","var n = x.length;\nvar i,xi;\n"+c+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+b+";\n}\nreturn accum;")};c.same=function k(b,c){var f,d;if(!(b instanceof Array&&c instanceof Array))return!1;d=b.length;if(d!==c.length)return!1;for(f=0;f<d;f++)if(b[f]!==c[f])if("object"===typeof b[f]){if(!k(b[f],c[f]))return!1}else return!1;return!0};c.rep=function(b,
d,g){"undefined"===typeof g&&(g=0);var t=b[g],u=Array(t);if(g===b.length-1){for(t-=2;0<=t;t-=2)u[t+1]=d,u[t]=d;-1===t&&(u[0]=d);return u}for(--t;0<=t;t--)u[t]=c.rep(b,d,g+1);return u};c.dotMMsmall=function(b,c){var f,d,g,q,n,r,p,w,v,y;f=b.length;q=c.length;n=c[0].length;r=Array(f);for(--f;0<=f;f--){p=Array(n);w=b[f];for(g=n-1;0<=g;g--){v=w[q-1]*c[q-1][g];for(d=q-2;1<=d;d-=2)y=d-1,v+=w[d]*c[d][g]+w[y]*c[y][g];0===d&&(v+=w[0]*c[0][g]);p[g]=v}r[f]=p}return r};c._getCol=function(b,c,f){var d;for(d=b.length-
1;0<d;--d)f[d]=b[d][c],--d,f[d]=b[d][c];0===d&&(f[0]=b[0][c])};c.dotMMbig=function(b,d){var g=c._getCol,t=Array(d.length),u=b.length,q=d[0].length,n=Array(u),r=c.dotVV,p,w;--u;for(p=u;-1!==p;--p)n[p]=Array(q);--q;for(p=q;-1!==p;--p)for(g(d,p,t),w=u;-1!==w;--w)q=b[w],n[w][p]=r(q,t);return n};c.dotMV=function(b,d){for(var g=b.length,t=Array(g),u=c.dotVV,g=g-1;0<=g;g--)t[g]=u(b[g],d);return t};c.dotVM=function(b,c){var f,d,g,q,n,r;g=b.length;f=c[0].length;q=Array(f);for(d=f-1;0<=d;d--){n=b[g-1]*c[g-
1][d];for(f=g-2;1<=f;f-=2)r=f-1,n+=b[f]*c[f][d]+b[r]*c[r][d];0===f&&(n+=b[0]*c[0][d]);q[d]=n}return q};c.dotVV=function(b,c){var f;f=b.length;var d,g=b[f-1]*c[f-1];for(f-=2;1<=f;f-=2)d=f-1,g+=b[f]*c[f]+b[d]*c[d];0===f&&(g+=b[0]*c[0]);return g};c.dot=function(b,d){var g=c.dim;switch(1E3*g(b).length+g(d).length){case 2002:return 10>d.length?c.dotMMsmall(b,d):c.dotMMbig(b,d);case 2001:return c.dotMV(b,d);case 1002:return c.dotVM(b,d);case 1001:return c.dotVV(b,d);case 1E3:return c.mulVS(b,d);case 1:return c.mulSV(b,
d);case 0:return b*d;default:throw Error("numeric.dot only works on vectors and matrices");}};c.diag=function(b){var c,f,d,g=b.length,q=Array(g),n;for(c=g-1;0<=c;c--){n=Array(g);f=c+2;for(d=g-1;d>=f;d-=2)n[d]=0,n[d-1]=0;d>c&&(n[d]=0);n[c]=b[c];for(d=c-1;1<=d;d-=2)n[d]=0,n[d-1]=0;0===d&&(n[0]=0);q[c]=n}return q};c.getDiag=function(b){for(var c=Math.min(b.length,b[0].length),f=Array(c),c=c-1;1<=c;--c)f[c]=b[c][c],--c,f[c]=b[c][c];0===c&&(f[0]=b[0][0]);return f};c.identity=function(b){return c.diag(c.rep([b],
1))};c.pointwise=function(b,c,f){"undefined"===typeof f&&(f="");var d=[],g,q=/\[i\]$/,n,r="",p=!1;for(g=0;g<b.length;g++)q.test(b[g])?r=n=b[g].substring(0,b[g].length-3):n=b[g],"ret"===n&&(p=!0),d.push(n);d[b.length]="_s";d[b.length+1]="_k";d[b.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+r+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(p?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+b.join(",")+",_s,_k+1);\n    return ret;\n}\n"+
f+"\nfor(i=_n-1;i!==-1;--i) {\n    "+c+"\n}\nreturn ret;";return Function.apply(null,d)};c.pointwise2=function(b,c,f){"undefined"===typeof f&&(f="");var d=[],g,q=/\[i\]$/,n,r="",p=!1;for(g=0;g<b.length;g++)q.test(b[g])?r=n=b[g].substring(0,b[g].length-3):n=b[g],"ret"===n&&(p=!0),d.push(n);d[b.length]="var _n = "+r+".length;\nvar i"+(p?"":", ret = Array(_n)")+";\n"+f+"\nfor(i=_n-1;i!==-1;--i) {\n"+c+"\n}\nreturn ret;";return Function.apply(null,d)};c._biforeach=function l(b,c,f,d,g){if(d===f.length-
1)g(b,c);else{var r;for(r=f[d]-1;0<=r;r--)l("object"===typeof b?b[r]:b,"object"===typeof c?c[r]:c,f,d+1,g)}};c._biforeach2=function m(b,c,f,d,g){if(d===f.length-1)return g(b,c);var p;p=f[d];var w=Array(p);for(--p;0<=p;--p)w[p]=m("object"===typeof b?b[p]:b,"object"===typeof c?c[p]:c,f,d+1,g);return w};c._foreach=function t(b,c,f,d){if(f===c.length-1)d(b);else{var g;for(g=c[f]-1;0<=g;g--)t(b[g],c,f+1,d)}};c._foreach2=function u(b,c,f,d){if(f===c.length-1)return d(b);var g;g=c[f];var v=Array(g);for(--g;0<=
g;g--)v[g]=u(b[g],c,f+1,d);return v};c.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};c.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="};c.mathfuns="abs acos asin atan ceil cos exp floor log round sin sqrt tan isNaN isFinite".split(" ");c.mathfuns2=["atan2","pow","max","min"];
c.ops1={neg:"-",not:"!",bnot:"~",clone:""};c.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],
inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]};(function(){var b,d;for(b=0;b<c.mathfuns2.length;++b)d=c.mathfuns2[b],c.ops2[d]=d;for(b in c.ops2)if(c.ops2.hasOwnProperty(b)){d=c.ops2[b];var g,r,p="";-1!==c.myIndexOf.call(c.mathfuns2,b)?(p="var "+d+" = Math."+d+";\n",g=function(b,c,f){return b+" = "+d+"("+c+","+f+")"},r=function(b,c){return b+" = "+d+"("+b+","+c+")"}):(g=function(b,c,f){return b+" = "+c+" "+d+" "+f},r=c.opseq.hasOwnProperty(b+"eq")?function(b,c){return b+" "+
d+"= "+c}:function(b,c){return b+" = "+b+" "+d+" "+c});c[b+"VV"]=c.pointwise2(["x[i]","y[i]"],g("ret[i]","x[i]","y[i]"),p);c[b+"SV"]=c.pointwise2(["x","y[i]"],g("ret[i]","x","y[i]"),p);c[b+"VS"]=c.pointwise2(["x[i]","y"],g("ret[i]","x[i]","y"),p);c[b]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+b+"VV, VS = numeric."+b+"VS, SV = numeric."+b+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+
r("x","y")+"\n}\nreturn x;\n");c[d]=c[b];c[b+"eqV"]=c.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),p);c[b+"eqS"]=c.pointwise2(["ret[i]","x"],r("ret[i]","x"),p);c[b+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+b+"eqV, S = numeric."+b+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(b=0;b<c.mathfuns2.length;++b)d=
c.mathfuns2[b],delete c.ops2[d];for(b=0;b<c.mathfuns.length;++b)d=c.mathfuns[b],c.ops1[d]=d;for(b in c.ops1)c.ops1.hasOwnProperty(b)&&(p="",d=c.ops1[b],-1!==c.myIndexOf.call(c.mathfuns,b)&&Math.hasOwnProperty(d)&&(p="var "+d+" = Math."+d+";\n"),c[b+"eqV"]=c.pointwise2(["ret[i]"],"ret[i] = "+d+"(ret[i]);",p),c[b+"eq"]=Function("x",'if(typeof x !== "object") return '+d+"x\nvar i;\nvar V = numeric."+b+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),c[b+"V"]=c.pointwise2(["x[i]"],
"ret[i] = "+d+"(x[i]);",p),c[b]=Function("x",'if(typeof x !== "object") return '+d+"(x)\nvar i;\nvar V = numeric."+b+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(b=0;b<c.mathfuns.length;++b)d=c.mathfuns[b],delete c.ops1[d];for(b in c.mapreducers)c.mapreducers.hasOwnProperty(b)&&(d=c.mapreducers[b],c[b+"V"]=c.mapreduce2(d[0],d[1]),c[b]=Function("x","s","k",d[1]+'if(typeof x !== "object") {    xi = x;\n'+d[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+
b+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+d[0]+";\n}\nreturn accum;\n"))})();c.truncVV=c.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;");c.truncVS=c.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;");c.truncSV=c.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;");c.trunc=function(b,d){return"object"===typeof b?"object"===typeof d?c.truncVV(b,d):
c.truncVS(b,d):"object"===typeof d?c.truncSV(b,d):Math.round(b/d)*d};c.inv=function(b){var d=c.dim(b),g=Math.abs,r=d[0],d=d[1],p=c.clone(b),w,v,y=c.identity(r),A,x,z,D,B;for(D=0;D<d;++D){v=b=-1;for(z=D;z!==r;++z)B=g(p[z][D]),B>v&&(b=z,v=B);v=p[b];p[b]=p[D];p[D]=v;x=y[b];y[b]=y[D];y[D]=x;b=v[D];for(B=D;B!==d;++B)v[B]/=b;for(B=d-1;-1!==B;--B)x[B]/=b;for(z=r-1;-1!==z;--z)if(z!==D){w=p[z];A=y[z];b=w[D];for(B=D+1;B!==d;++B)w[B]-=v[B]*b;for(B=d-1;0<B;--B)A[B]-=x[B]*b,--B,A[B]-=x[B]*b;0===B&&(A[0]-=x[0]*
b)}}return y};c.det=function(b){var d=c.dim(b);if(2!==d.length||d[0]!==d[1])throw Error("numeric: det() only works on square matrices");var d=d[0],g=1,r,p,w=c.clone(b),v,y,A,x;for(b=0;b<d-1;b++){p=b;for(r=b+1;r<d;r++)Math.abs(w[r][b])>Math.abs(w[p][b])&&(p=r);p!==b&&(r=w[p],w[p]=w[b],w[b]=r,g*=-1);v=w[b];for(r=b+1;r<d;r++){y=w[r];A=y[b]/v[b];for(p=b+1;p<d-1;p+=2)x=p+1,y[p]-=v[p]*A,y[x]-=v[x]*A;p!==d&&(y[p]-=v[p]*A)}if(0===v[b])return 0;g*=v[b]}return g*w[b][b]};c.transpose=function(b){var c,f;c=b.length;
var d=b[0].length,g=Array(d),w,v,y;for(f=0;f<d;f++)g[f]=Array(c);for(--c;1<=c;c-=2){v=b[c];w=b[c-1];for(f=d-1;1<=f;--f)y=g[f],y[c]=v[f],y[c-1]=w[f],--f,y=g[f],y[c]=v[f],y[c-1]=w[f];0===f&&(y=g[0],y[c]=v[0],y[c-1]=w[0])}if(0===c){w=b[0];for(f=d-1;1<=f;--f)g[f][0]=w[f],--f,g[f][0]=w[f];0===f&&(g[0][0]=w[0])}return g};c.negtranspose=function(b){var c,f;c=b.length;var d=b[0].length,g=Array(d),w,v,y;for(f=0;f<d;f++)g[f]=Array(c);for(--c;1<=c;c-=2){v=b[c];w=b[c-1];for(f=d-1;1<=f;--f)y=g[f],y[c]=-v[f],y[c-
1]=-w[f],--f,y=g[f],y[c]=-v[f],y[c-1]=-w[f];0===f&&(y=g[0],y[c]=-v[0],y[c-1]=-w[0])}if(0===c){w=b[0];for(f=d-1;1<=f;--f)g[f][0]=-w[f],--f,g[f][0]=-w[f];0===f&&(g[0][0]=-w[0])}return g};c._random=function q(b,c){var f;f=b[c];var d=Array(f),g;if(c===b.length-1){g=Math.random;for(--f;1<=f;f-=2)d[f]=g(),d[f-1]=g();0===f&&(d[0]=g());return d}for(--f;0<=f;f--)d[f]=q(b,c+1);return d};c.random=function(b){return c._random(b,0)};c.norm2=function(b){return Math.sqrt(c.norm2Squared(b))};c.linspace=function(b,
c,f){"undefined"===typeof f&&(f=Math.max(Math.round(c-b)+1,1));if(2>f)return 1===f?[b]:[];var d,g=Array(f);f--;for(d=f;0<=d;d--)g[d]=(d*c+(f-d)*b)/f;return g};c.getBlock=function(b,d,g){function p(b,c){var f,q=d[c];f=g[c]-q;var z=Array(f);if(c===w.length-1){for(;0<=f;f--)z[f]=b[f+q];return z}for(;0<=f;f--)z[f]=p(b[f+q],c+1);return z}var w=c.dim(b);return p(b,0)};c.setBlock=function(b,d,g,p){function w(b,c,f){var p,q=d[f],B=g[f]-q;if(f===v.length-1)for(p=B;0<=p;p--)b[p+q]=c[p];for(p=B;0<=p;p--)w(b[p+
q],c[p],f+1)}var v=c.dim(b);w(b,p,0);return b};c.getRange=function(b,c,f){for(var d=c.length,g=f.length,v,y=Array(d),A,x,d=d-1;-1!==d;--d)for(y[d]=Array(g),A=y[d],x=b[c[d]],v=g-1;-1!==v;--v)A[v]=x[f[v]];return y};c.blockMatrix=function(b){var d=c.dim(b);if(4>d.length)return c.blockMatrix([b]);var g=d[0],d=d[1],p,w,v,y;for(v=w=p=0;v<g;++v)p+=b[v][0].length;for(y=0;y<d;++y)w+=b[0][y][0].length;var A=Array(p);for(v=0;v<p;++v)A[v]=Array(w);var x=0,z,D,B,C,E;for(v=0;v<g;++v){z=w;for(y=d-1;-1!==y;--y)for(p=
b[v][y],z-=p[0].length,B=p.length-1;-1!==B;--B)for(E=p[B],D=A[x+B],C=E.length-1;-1!==C;--C)D[z+C]=E[C];x+=b[v][0].length}return A};c.tensor=function(b,d){if("number"===typeof b||"number"===typeof d)return c.mul(b,d);var g=c.dim(b),p=c.dim(d);if(1!==g.length||1!==p.length)throw Error("numeric: tensor product is only defined for vectors");var w=g[0],p=p[0],g=Array(w),v,y,A;for(v=w-1;0<=v;v--){w=Array(p);A=b[v];for(y=p-1;3<=y;--y)w[y]=A*d[y],--y,w[y]=A*d[y],--y,w[y]=A*d[y],--y,w[y]=A*d[y];for(;0<=y;)w[y]=
A*d[y],--y;g[v]=w}return g};c.T=function(b,c){this.x=b;this.y=c};c.t=function(b,d){return new c.T(b,d)};c.Tbinop=function(b,d,g,p,w){if("string"!==typeof w){var v;w="";for(v in c)c.hasOwnProperty(v)&&(0<=b.indexOf(v)||0<=d.indexOf(v)||0<=g.indexOf(v)||0<=p.indexOf(v))&&1<v.length&&(w+="var "+v+" = numeric."+v+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+w+"\nif(x.y) {  if(y.y) {    return new numeric.T("+p+");\n  }\n  return new numeric.T("+
g+");\n}\nif(y.y) {\n  return new numeric.T("+d+");\n}\nreturn new numeric.T("+b+");\n")};c.T.prototype.add=c.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");c.T.prototype.sub=c.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");c.T.prototype.mul=c.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");c.T.prototype.reciprocal=
function(){var b=c.mul,d=c.div;return this.y?(b=c.add(b(this.x,this.x),b(this.y,this.y)),new c.T(d(this.x,b),d(c.neg(this.y),b))):new T(d(1,this.x))};c.T.prototype.div=function(b){b instanceof c.T||(b=new c.T(b));if(b.y)return this.mul(b.reciprocal());var d=c.div;return this.y?new c.T(d(this.x,b.x),d(this.y,b.x)):new c.T(d(this.x,b.x))};c.T.prototype.dot=c.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");
c.T.prototype.transpose=function(){var b=c.transpose,d=this.x,g=this.y;return g?new c.T(b(d),b(g)):new c.T(b(d))};c.T.prototype.transjugate=function(){var b=c.transpose,d=this.x,g=this.y;return g?new c.T(b(d),c.negtranspose(g)):new c.T(b(d))};c.Tunop=function(b,c,f){"string"!==typeof f&&(f="");return Function("var x = this;\n"+f+"\nif(x.y) {  "+c+";\n}\n"+b+";\n")};c.T.prototype.exp=c.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;");
c.T.prototype.conj=c.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");c.T.prototype.neg=c.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;");c.T.prototype.sin=c.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");c.T.prototype.cos=c.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");c.T.prototype.abs=c.Tunop("return new numeric.T(numeric.abs(x.x));",
"return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;");c.T.prototype.log=c.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);");c.T.prototype.norm2=c.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));");c.T.prototype.inv=function(){if("undefined"===typeof this.y)return new c.T(c.inv(this.x));
var b=this.x.length,d,g,p,w=c.identity(b),v=c.rep([b,b],0),y=c.clone(this.x),A=c.clone(this.y),x,z,D,B,C,E,G,H,I,L,J,K;for(d=0;d<b;d++){I=y[d][d];L=A[d][d];D=I*I+L*L;p=d;for(g=d+1;g<b;g++)I=y[g][d],L=A[g][d],x=I*I+L*L,x>D&&(p=g,D=x);p!==d&&(g=y[d],y[d]=y[p],y[p]=g,g=A[d],A[d]=A[p],A[p]=g,g=w[d],w[d]=w[p],w[p]=g,g=v[d],v[d]=v[p],v[p]=g);x=y[d];z=A[d];C=w[d];E=v[d];I=x[d];L=z[d];for(g=d+1;g<b;g++)J=x[g],K=z[g],x[g]=(J*I+K*L)/D,z[g]=(K*I-J*L)/D;for(g=0;g<b;g++)J=C[g],K=E[g],C[g]=(J*I+K*L)/D,E[g]=(K*
I-J*L)/D;for(g=d+1;g<b;g++){D=y[g];B=A[g];G=w[g];H=v[g];I=D[d];L=B[d];for(p=d+1;p<b;p++)J=x[p],K=z[p],D[p]-=J*I-K*L,B[p]-=K*I+J*L;for(p=0;p<b;p++)J=C[p],K=E[p],G[p]-=J*I-K*L,H[p]-=K*I+J*L}}for(d=b-1;0<d;d--)for(C=w[d],E=v[d],g=d-1;0<=g;g--)for(G=w[g],H=v[g],I=y[g][d],L=A[g][d],p=b-1;0<=p;p--)J=C[p],K=E[p],G[p]-=I*J-L*K,H[p]-=I*K+L*J;return new c.T(w,v)};c.T.prototype.get=function(b){var d=this.x,g=this.y,p=0,w,v=b.length;if(g){for(;p<v;)w=b[p],d=d[w],g=g[w],p++;return new c.T(d,g)}for(;p<v;)w=b[p],
d=d[w],p++;return new c.T(d)};c.T.prototype.set=function(b,d){var g=this.x,p=this.y,w=0,v,y=b.length,A=d.x,x=d.y;if(0===y)return x?this.y=x:p&&(this.y=void 0),this.x=g,this;if(x){p||(this.y=p=c.rep(c.dim(g),0));for(;w<y-1;)v=b[w],g=g[v],p=p[v],w++;v=b[w];g[v]=A;p[v]=x;return this}if(p){for(;w<y-1;)v=b[w],g=g[v],p=p[v],w++;v=b[w];g[v]=A;p[v]=A instanceof Array?c.rep(c.dim(A),0):0;return this}for(;w<y-1;)v=b[w],g=g[v],w++;v=b[w];g[v]=A;return this};c.T.prototype.getRows=function(b,d){var g=d-b+1,p,
w=Array(g),v=this.x,y=this.y;for(p=b;p<=d;p++)w[p-b]=v[p];if(y){g=Array(g);for(p=b;p<=d;p++)g[p-b]=y[p];return new c.T(w,g)}return new c.T(w)};c.T.prototype.setRows=function(b,d,g){var p=this.x,w=this.y,v=g.x,y=g.y;for(g=b;g<=d;g++)p[g]=v[g-b];if(y)for(w||(this.y=w=c.rep(c.dim(p),0)),g=b;g<=d;g++)w[g]=y[g-b];else if(w)for(g=b;g<=d;g++)w[g]=c.rep([v[g-b].length],0);return this};c.T.prototype.getRow=function(b){var d=this.x,g=this.y;return g?new c.T(d[b],g[b]):new c.T(d[b])};c.T.prototype.setRow=function(b,
d){var g=this.x,p=this.y,w=d.x,v=d.y;g[b]=w;v?(p||(this.y=p=c.rep(c.dim(g),0)),p[b]=v):p&&c.rep([w.length],0);return this};c.T.prototype.getBlock=function(b,d){var g=this.x,p=this.y,w=c.getBlock;return p?new c.T(w(g,b,d),w(p,b,d)):new c.T(w(g,b,d))};c.T.prototype.setBlock=function(b,d,g){g instanceof c.T||(g=new c.T(g));var p=this.x,w=this.y,v=c.setBlock,y=g.x;if(g=g.y)return w||(w=this.y=c.rep(c.dim(this),0)),v(p,b,d,y),v(w,b,d,g),this;v(p,b,d,y);w&&v(w,b,d,c.rep(c.dim(y),0))};c.T.rep=function(b,
d){var g=c.T;d instanceof g||(d=new g(d));var p=d.x,w=d.y,v=c.rep;return w?new g(v(b,p),v(b,w)):new g(v(b,p))};c.T.diag=function(b){b instanceof c.T||(b=new c.T(b));var d=b.x;b=b.y;var g=c.diag;return b?new c.T(g(d),g(b)):new c.T(g(d))};c.T.eig=function(){if(this.y)throw Error("eig: not implemented for complex matrices.");return c.eig(this.x)};c.T.identity=function(b){return new c.T(c.identity(b))};c.T.prototype.getDiag=function(){var b=this.x,d=this.y;return d?new c.T(c.getDiag(b),c.getDiag(d)):
new c.T(c.getDiag(b))};c.house=function(b){var d=c.clone(b);b=(0<=b[0]?1:-1)*c.norm2(b);d[0]+=b;b=c.norm2(d);if(0===b)throw Error("eig: internal error");return c.div(d,b)};c.toUpperHessenberg=function(b){var d=c.dim(b);if(2!==d.length||d[0]!==d[1])throw Error("numeric: toUpperHessenberg() only works on square matrices");var d=d[0],g,p,w,v=c.clone(b),y,A,x,z=c.identity(d);for(g=0;g<d-2;g++){p=Array(d-g-1);for(b=g+1;b<d;b++)p[b-g-1]=v[b][g];if(0<c.norm2(p)){w=c.house(p);p=c.getBlock(v,[g+1,g],[d-1,
d-1]);y=c.tensor(w,c.dot(w,p));for(b=g+1;b<d;b++)for(A=v[b],x=y[b-g-1],p=g;p<d;p++)A[p]-=2*x[p-g];p=c.getBlock(v,[0,g+1],[d-1,d-1]);y=c.tensor(c.dot(p,w),w);for(b=0;b<d;b++)for(A=v[b],x=y[b],p=g+1;p<d;p++)A[p]-=2*x[p-g-1];p=Array(d-g-1);for(b=g+1;b<d;b++)p[b-g-1]=z[b];y=c.tensor(w,c.dot(w,p));for(b=g+1;b<d;b++)for(w=z[b],x=y[b-g-1],p=0;p<d;p++)w[p]-=2*x[p]}}return{H:v,Q:z}};c.epsilon=2.220446049250313E-16;c.QRFrancis=function(b,d){"undefined"===typeof d&&(d=1E4);b=c.clone(b);c.clone(b);var g=c.dim(b)[0],
p,w,v,y,A,x,z=c.identity(g),D,B,C;if(3>g)return{Q:z,B:[[0,g-1]]};var E=c.epsilon;for(C=0;C<d;C++){for(v=0;v<g-1;v++)if(Math.abs(b[v+1][v])<E*(Math.abs(b[v][v])+Math.abs(b[v+1][v+1]))){C=c.QRFrancis(c.getBlock(b,[0,0],[v,v]),d);E=c.QRFrancis(c.getBlock(b,[v+1,v+1],[g-1,g-1]),d);y=Array(v+1);for(x=0;x<=v;x++)y[x]=z[x];y=c.dot(C.Q,y);for(x=0;x<=v;x++)z[x]=y[x];y=Array(g-v-1);for(x=v+1;x<g;x++)y[x-v-1]=z[x];y=c.dot(E.Q,y);for(x=v+1;x<g;x++)z[x]=y[x-v-1];return{Q:z,B:C.B.concat(c.add(E.B,v+1))}}v=b[g-
2][g-2];p=b[g-2][g-1];y=b[g-1][g-2];A=b[g-1][g-1];x=v+A;y=v*A-p*y;v=c.getBlock(b,[0,0],[2,2]);x*x>=4*y?(p=.5*(x+Math.sqrt(x*x-4*y)),x=.5*(x-Math.sqrt(x*x-4*y)),v=c.add(c.sub(c.dot(v,v),c.mul(v,p+x)),c.diag(c.rep([3],p*x)))):v=c.add(c.sub(c.dot(v,v),c.mul(v,x)),c.diag(c.rep([3],y)));p=[v[0][0],v[1][0],v[2][0]];w=c.house(p);y=[b[0],b[1],b[2]];y=c.tensor(w,c.dot(w,y));for(x=0;3>x;x++)for(D=b[x],B=y[x],p=0;p<g;p++)D[p]-=2*B[p];y=c.getBlock(b,[0,0],[g-1,2]);y=c.tensor(c.dot(y,w),w);for(x=0;x<g;x++)for(D=
b[x],B=y[x],p=0;3>p;p++)D[p]-=2*B[p];y=[z[0],z[1],z[2]];y=c.tensor(w,c.dot(w,y));for(x=0;3>x;x++)for(w=z[x],B=y[x],p=0;p<g;p++)w[p]-=2*B[p];for(v=0;v<g-2;v++){for(p=v;p<=v+1;p++)if(Math.abs(b[p+1][p])<E*(Math.abs(b[p][p])+Math.abs(b[p+1][p+1]))){C=c.QRFrancis(c.getBlock(b,[0,0],[p,p]),d);E=c.QRFrancis(c.getBlock(b,[p+1,p+1],[g-1,g-1]),d);y=Array(p+1);for(x=0;x<=p;x++)y[x]=z[x];y=c.dot(C.Q,y);for(x=0;x<=p;x++)z[x]=y[x];y=Array(g-p-1);for(x=p+1;x<g;x++)y[x-p-1]=z[x];y=c.dot(E.Q,y);for(x=p+1;x<g;x++)z[x]=
y[x-p-1];return{Q:z,B:C.B.concat(c.add(E.B,p+1))}}A=Math.min(g-1,v+3);p=Array(A-v);for(x=v+1;x<=A;x++)p[x-v-1]=b[x][v];w=c.house(p);y=c.getBlock(b,[v+1,v],[A,g-1]);y=c.tensor(w,c.dot(w,y));for(x=v+1;x<=A;x++)for(D=b[x],B=y[x-v-1],p=v;p<g;p++)D[p]-=2*B[p-v];y=c.getBlock(b,[0,v+1],[g-1,A]);y=c.tensor(c.dot(y,w),w);for(x=0;x<g;x++)for(D=b[x],B=y[x],p=v+1;p<=A;p++)D[p]-=2*B[p-v-1];y=Array(A-v);for(x=v+1;x<=A;x++)y[x-v-1]=z[x];y=c.tensor(w,c.dot(w,y));for(x=v+1;x<=A;x++)for(w=z[x],B=y[x-v-1],p=0;p<g;p++)w[p]-=
2*B[p]}}throw Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");};c.eig=function(b,d){for(var g=c.toUpperHessenberg(b),p=c.QRFrancis(g.H,d),w=c.T,v=b.length,y,v=p.B,A=c.dot(p.Q,c.dot(g.H,c.transpose(p.Q))),p=new w(c.dot(p.Q,g.Q)),x,z=v.length,D,B,C,E,G,H,I,L,J=Math.sqrt,g=0;g<z;g++)if(y=v[g][0],y!==v[g][1]&&(D=y+1,B=A[y][y],C=A[y][D],E=A[D][y],G=A[D][D],0!==C||0!==E))x=-B-G,H=B*G-C*E,H=x*x-4*H,0<=H?(x=0>x?-.5*(x-J(H)):-.5*(x+J(H)),I=(B-x)*(B-x)+C*C,L=E*E+(G-x)*(G-x),I>
L?(I=J(I),B=(B-x)/I,C/=I):(L=J(L),B=E/L,C=(G-x)/L),x=new w([[C,-B],[B,C]])):(x*=-.5,H=.5*J(-H),I=(B-x)*(B-x)+C*C,L=E*E+(G-x)*(G-x),I>L?(I=J(I+H*H),B=(B-x)/I,C/=I,x=0,H/=I):(L=J(L+H*H),B=E/L,C=(G-x)/L,x=H/L,H=0),x=new w([[C,-B],[B,C]],[[x,H],[H,-x]])),p.setRows(y,D,x.dot(p.getRows(y,D)));w=p.dot(b).dot(p.transjugate());v=b.length;A=c.T.identity(v);for(D=0;D<v;D++)if(0<D)for(g=D-1;0<=g;g--)y=w.get([g,g]),z=w.get([D,D]),c.neq(y.x,z.x)||c.neq(y.y,z.y)?(x=w.getRow(g).getBlock([g],[D-1]),H=A.getRow(D).getBlock([g],
[D-1]),A.set([D,g],w.get([g,D]).neg().sub(x.dot(H)).div(y.sub(z)))):A.setRow(D,A.getRow(g));for(D=0;D<v;D++)x=A.getRow(D),A.setRow(D,x.div(x.norm2()));A=A.transpose();A=p.transjugate().dot(A);return{lambda:w.getDiag(),E:A}};c.ccsSparse=function(b){var c=b.length,f,d,g,v=[];for(d=c-1;-1!==d;--d)for(g in f=b[d],f){for(g=parseInt(g);g>=v.length;)v[v.length]=0;0!==f[g]&&v[g]++}f=v.length;var y=Array(f+1);for(d=y[0]=0;d<f;++d)y[d+1]=y[d]+v[d];var A=Array(y[f]),x=Array(y[f]);for(d=c-1;-1!==d;--d)for(g in f=
b[d],f)0!==f[g]&&(v[g]--,A[y[g]+v[g]]=d,x[y[g]+v[g]]=f[g]);return[y,A,x]};c.ccsFull=function(b){var d=b[0],g=b[1],p=b[2],w=c.ccsDim(b);b=w[1];for(var v,y,A=c.rep([w[0],b],0),w=0;w<b;w++)for(v=d[w],y=d[w+1];v<y;++v)A[g[v]][w]=p[v];return A};c.ccsTSolve=function(b,d,g,p,w){function v(b){var c;if(0===g[b]){g[b]=1;for(c=y[b];c<y[b+1];++c)v(A[c]);w[D]=b;++D}}var y=b[0],A=b[1];b=b[2];var x=y.length-1,z=Math.max,D=0;"undefined"===typeof p&&(g=c.rep([x],0));"undefined"===typeof p&&(p=c.linspace(0,g.length-
1));"undefined"===typeof w&&(w=[]);for(var B,C,E,x=p.length-1;-1!==x;--x)v(p[x]);w.length=D;for(x=w.length-1;-1!==x;--x)g[w[x]]=0;for(x=p.length-1;-1!==x;--x)B=p[x],g[B]=d[B];for(x=w.length-1;-1!==x;--x){B=w[x];C=y[B];d=z(y[B+1],C);for(p=C;p!==d;++p)if(A[p]===B){g[B]/=b[p];break}E=g[B];for(p=C;p!==d;++p)C=A[p],C!==B&&(g[C]-=E*b[p])}return g};c.ccsDFS=function(b){this.k=Array(b);this.k1=Array(b);this.j=Array(b)};c.ccsDFS.prototype.dfs=function(b,c,f,d,g,v){var y=0,A=g.length,x=this.k,z=this.k1,D=this.j,
B,C;if(0===d[b])for(d[b]=1,D[0]=b,x[0]=B=c[b],z[0]=C=c[b+1];;)if(B>=C){g[A]=D[y];if(0===y)break;++A;--y;B=x[y];C=z[y]}else b=v[f[B]],0===d[b]?(d[b]=1,x[y]=B,++y,D[y]=b,B=c[b],z[y]=C=c[b+1]):++B};c.ccsLPSolve=function(b,c,f,d,g,v,y){var A=b[0],x=b[1];b=b[2];var z=c[0],D=c[1];c=c[2];var B;B=z[g];z=z[g+1];d.length=0;for(g=B;g<z;++g)y.dfs(v[D[g]],A,x,f,d,v);for(g=d.length-1;-1!==g;--g)f[d[g]]=0;for(g=B;g!==z;++g)y=v[D[g]],f[y]=c[g];for(g=d.length-1;-1!==g;--g){y=d[g];z=A[y];D=A[y+1];for(c=z;c<D;++c)if(v[x[c]]===
y){f[y]/=b[c];break}B=f[y];for(c=z;c<D;++c)z=v[x[c]],z!==y&&(f[z]-=B*b[c])}return f};c.ccsLUP1=function(b,d){var g=b[0].length-1,p=[c.rep([g+1],0),[],[]],w=[c.rep([g+1],0),[],[]],v=p[0],y=p[1],A=p[2],x=w[0],z=w[1],D=w[2],B=c.rep([g],0),C=c.rep([g],0),E,G,H,I,L,J,K,M=c.ccsLPSolve,P=Math.abs,N=c.linspace(0,g-1),S=c.linspace(0,g-1),U=new c.ccsDFS(g);"undefined"===typeof d&&(d=1);for(E=0;E<g;++E){M(p,b,B,C,E,S,U);L=I=-1;for(G=C.length-1;-1!==G;--G)H=C[G],H<=E||(J=P(B[H]),J>I&&(L=H,I=J));P(B[E])<d*I&&
(G=N[E],I=N[L],N[E]=I,S[I]=E,N[L]=G,S[G]=L,I=B[E],B[E]=B[L],B[L]=I);I=v[E];L=x[E];K=B[E];y[I]=N[E];A[I]=1;++I;for(G=C.length-1;-1!==G;--G)H=C[G],J=B[H],C[G]=0,B[H]=0,H<=E?(z[L]=H,D[L]=J,++L):(y[I]=N[H],A[I]=J/K,++I);v[E+1]=I;x[E+1]=L}for(G=y.length-1;-1!==G;--G)y[G]=S[y[G]];return{L:p,U:w,P:N,Pinv:S}};c.ccsDFS0=function(b){this.k=Array(b);this.k1=Array(b);this.j=Array(b)};c.ccsDFS0.prototype.dfs=function(b,c,f,d,g,v,y){y=0;var A=g.length,x=this.k,z=this.k1,D=this.j,B,C;if(0===d[b])for(d[b]=1,D[0]=
b,x[0]=B=c[v[b]],z[0]=C=c[v[b]+1];;){if(isNaN(B))throw Error("Ow!");if(B>=C){g[A]=v[D[y]];if(0===y)break;++A;--y;B=x[y];C=z[y]}else b=f[B],0===d[b]?(d[b]=1,x[y]=B,++y,D[y]=b,b=v[b],B=c[b],z[y]=C=c[b+1]):++B}};c.ccsLPSolve0=function(b,c,f,d,g,v,y,A){var x=b[0],z=b[1];b=b[2];var D=c[0],B=c[1];c=c[2];var C;C=D[g];D=D[g+1];d.length=0;for(g=C;g<D;++g)A.dfs(B[g],x,z,f,d,v,y);for(g=d.length-1;-1!==g;--g)v=d[g],f[y[v]]=0;for(g=C;g!==D;++g)v=B[g],f[v]=c[g];for(g=d.length-1;-1!==g;--g){v=d[g];B=y[v];A=x[v];
v=x[v+1];for(c=A;c<v;++c)if(z[c]===B){f[B]/=b[c];break}C=f[B];for(c=A;c<v;++c)f[z[c]]-=C*b[c];f[B]=C}};c.ccsLUP0=function(b,d){var g=b[0].length-1,p=[c.rep([g+1],0),[],[]],w=[c.rep([g+1],0),[],[]],v=p[0],y=p[1],A=p[2],x=w[0],z=w[1],D=w[2],B=c.rep([g],0),C=c.rep([g],0),E,G,H,I,L,J,K,M=c.ccsLPSolve0,P=Math.abs,N=c.linspace(0,g-1),S=c.linspace(0,g-1),U=new c.ccsDFS0(g);"undefined"===typeof d&&(d=1);for(E=0;E<g;++E){M(p,b,B,C,E,S,N,U);L=I=-1;for(G=C.length-1;-1!==G;--G)H=C[G],H<=E||(J=P(B[N[H]]),J>I&&
(L=H,I=J));P(B[N[E]])<d*I&&(G=N[E],I=N[L],N[E]=I,S[I]=E,N[L]=G,S[G]=L);I=v[E];L=x[E];K=B[N[E]];y[I]=N[E];A[I]=1;++I;for(G=C.length-1;-1!==G;--G)H=C[G],J=B[N[H]],C[G]=0,B[N[H]]=0,H<=E?(z[L]=H,D[L]=J,++L):(y[I]=N[H],A[I]=J/K,++I);v[E+1]=I;x[E+1]=L}for(G=y.length-1;-1!==G;--G)y[G]=S[y[G]];return{L:p,U:w,P:N,Pinv:S}};c.ccsLUP=c.ccsLUP0;c.ccsDim=function(b){return[c.sup(b[1])+1,b[0].length-1]};c.ccsGetBlock=function(b,d,g){var p=c.ccsDim(b),w=p[0],v=p[1];"undefined"===typeof d?d=c.linspace(0,w-1):"number"===
typeof d&&(d=[d]);"undefined"===typeof g?g=c.linspace(0,v-1):"number"===typeof g&&(g=[g]);var y,p=d.length,A=g.length,x,v=c.rep([v],0),z=[],D=[],B=[v,z,D],C=b[0],E=b[1];b=b[2];for(var G=c.rep([w],0),H=0,I=c.rep([w],0),w=0;w<A;++w){y=g[w];var L=C[y],J=C[y+1];for(y=L;y<J;++y)x=E[y],I[x]=1,G[x]=b[y];for(y=0;y<p;++y)x=d[y],I[x]&&(z[H]=y,D[H]=G[d[y]],++H);for(y=L;y<J;++y)x=E[y],I[x]=0;v[w+1]=H}return B};c.ccsDot=function(b,d){var g=b[0],p=b[1],w=b[2],v=d[0],y=d[1],A=d[2],x=c.ccsDim(b),z=c.ccsDim(d),D=
x[0],z=z[1],x=c.rep([D],0),B=c.rep([D],0),D=Array(D),C=c.rep([z],0),E=[],G=[],H=[C,E,G],I,L,J,K,M,P,N,S;for(J=0;J!==z;++J){K=v[J];M=v[J+1];N=0;for(L=K;L<M;++L)for(K=y[L],S=A[L],I=g[K],K=g[K+1];I<K;++I)P=p[I],0===B[P]&&(D[N]=P,B[P]=1,N+=1),x[P]+=w[I]*S;K=C[J];M=K+N;C[J+1]=M;for(L=N-1;-1!==L;--L)S=K+L,I=D[L],E[S]=I,G[S]=x[I],B[I]=0,x[I]=0;C[J+1]=C[J]+N}return H};c.ccsLUPSolve=function(b,d){var g=b.L,p=b.U,w=d[0],v=!1;"object"!==typeof w&&(d=[[0,d.length],c.linspace(0,d.length-1),d],w=d[0],v=!0);var y=
d[1],A=d[2],x=g[0].length-1,z=w.length-1,D=c.rep([x],0),B=Array(x),C=c.rep([x],0),x=Array(x),E=c.rep([z+1],0),G=[],H=[],I=c.ccsTSolve,L,J,K,M,P,N=0;for(L=0;L<z;++L){M=0;J=w[L];for(K=w[L+1];J<K;++J)P=b.Pinv[y[J]],x[M]=P,C[P]=A[J],++M;x.length=M;I(g,C,D,x,B);for(J=x.length-1;-1!==J;--J)C[x[J]]=0;I(p,D,C,B,x);if(v)return C;for(J=B.length-1;-1!==J;--J)D[B[J]]=0;for(J=x.length-1;-1!==J;--J)P=x[J],G[N]=P,H[N]=C[P],C[P]=0,++N;E[L+1]=N}return[E,G,H]};c.ccsbinop=function(b,c){"undefined"===typeof c&&(c="");
return Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+c+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+
b+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")};(function(){var b,d,g,p;for(b in c.ops2)d=isFinite(eval("1"+c.ops2[b]+"0"))?"[Y[0],Y[1],numeric."+b+"(X,Y[2])]":"NaN",g=isFinite(eval("0"+c.ops2[b]+"1"))?"[X[0],X[1],numeric."+b+"(X[2],Y)]":"NaN",p=isFinite(eval("1"+c.ops2[b]+"0"))&&isFinite(eval("0"+c.ops2[b]+"1"))?"numeric.ccs"+b+"MM(X,Y)":"NaN",c["ccs"+b+"MM"]=
c.ccsbinop("zk = xk "+c.ops2[b]+"yk;"),c["ccs"+b]=Function("X","Y",'if(typeof X === "number") return '+d+';\nif(typeof Y === "number") return '+g+";\nreturn "+p+";\n")})();c.ccsScatter=function(b){var d=b[0],g=b[1];b=b[2];var p=c.sup(g)+1,w=d.length,v=c.rep([p],0),y=Array(w),A=Array(w),x=c.rep([p],0),z;for(z=0;z<w;++z)x[g[z]]++;for(z=0;z<p;++z)v[z+1]=v[z]+x[z];var p=v.slice(0),D;for(z=0;z<w;++z)D=g[z],x=p[D],y[x]=d[z],A[x]=b[z],p[D]+=1;return[v,y,A]};c.ccsGather=function(b){var c=b[0],f=b[1];b=b[2];
var d=c.length-1,g=f.length,v=Array(g),y=Array(g),g=Array(g),A,x,z,D;for(A=D=0;A<d;++A)for(x=c[A],z=c[A+1];x!==z;++x)y[D]=A,v[D]=f[x],g[D]=b[x],++D;return[v,y,g]};c.sdim=function n(b,c,f){"undefined"===typeof c&&(c=[]);if("object"!==typeof b)return c;"undefined"===typeof f&&(f=0);f in c||(c[f]=0);b.length>c[f]&&(c[f]=b.length);for(var d in b)b.hasOwnProperty(d)&&n(b[d],c,f+1);return c};c.sclone=function r(b,d,g){"undefined"===typeof d&&(d=0);"undefined"===typeof g&&(g=c.sdim(b).length);var y,A=Array(b.length);
if(d===g-1){for(y in b)b.hasOwnProperty(y)&&(A[y]=b[y]);return A}for(y in b)b.hasOwnProperty(y)&&(A[y]=r(b[y],d+1,g));return A};c.sdiag=function(b){for(var c=b.length,f=Array(c),d,c=c-1;1<=c;c-=2)d=c-1,f[c]=[],f[c][c]=b[c],f[d]=[],f[d][d]=b[d];0===c&&(f[0]=[],f[0][0]=b[c]);return f};c.sidentity=function(b){return c.sdiag(c.rep([b],1))};c.stranspose=function(b){var c=[],f,d,g;for(f in b)if(b.hasOwnProperty(f))for(d in g=b[f],g)g.hasOwnProperty(d)&&("object"!==typeof c[d]&&(c[d]=[]),c[d][f]=g[d]);return c};
c.sLUP=function(b,c){throw Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");};c.sdotMM=function(b,d){var g=b.length,v=c.stranspose(d),y=v.length,A,x,z,D,B,C=Array(g),E;for(x=g-1;0<=x;x--){E=[];g=b[x];for(D=y-1;0<=D;D--){B=0;A=v[D];for(z in g)g.hasOwnProperty(z)&&z in A&&(B+=g[z]*A[z]);B&&(E[D]=B)}C[x]=E}return C};c.sdotMV=function(b,c){var f=b.length,d,g,A=Array(f),x;for(d=f-1;0<=d;d--){f=b[d];x=0;for(g in f)f.hasOwnProperty(g)&&
c[g]&&(x+=f[g]*c[g]);x&&(A[d]=x)}return A};c.sdotVM=function(b,c){var f,d,g,A,x=[];for(f in b)if(b.hasOwnProperty(f))for(d in g=c[f],A=b[f],g)g.hasOwnProperty(d)&&(x[d]||(x[d]=0),x[d]+=A*g[d]);return x};c.sdotVV=function(b,c){var f,d=0;for(f in b)b[f]&&c[f]&&(d+=b[f]*c[f]);return d};c.sdot=function(b,d){var g=c.sdim(b).length,v=c.sdim(d).length;switch(1E3*g+v){case 0:return b*d;case 1001:return c.sdotVV(b,d);case 2001:return c.sdotMV(b,d);case 1002:return c.sdotVM(b,d);case 2002:return c.sdotMM(b,
d);default:throw Error("numeric.sdot not implemented for tensors of order "+g+" and "+v);}};c.sscatter=function(b){var c,f,d,g=b.length,A=[],x;for(f=b[0].length-1;0<=f;--f)if(b[g-1][f]){x=A;for(d=0;d<g-2;d++)c=b[d][f],x[c]||(x[c]=[]),x=x[c];x[b[d][f]]=b[d+1][f]}return A};c.sgather=function p(b,c,f){"undefined"===typeof c&&(c=[]);"undefined"===typeof f&&(f=[]);var d,g,z;d=f.length;for(g in b)if(b.hasOwnProperty(g))if(f[d]=parseInt(g),z=b[g],"number"===typeof z){if(z){if(0===c.length)for(g=d+1;0<=g;--g)c[g]=
[];for(g=d;0<=g;--g)c[g].push(f[g]);c[d+1].push(z)}}else p(z,c,f);f.length>d&&f.pop();return c};c.cLU=function(b){var d=b[0],g=b[1],y=b[2],A=d.length;b=0;var x,z,D;for(x=0;x<A;x++)d[x]>b&&(b=d[x]);b++;var B=Array(b),C=Array(b),E=c.rep([b],Infinity),G=c.rep([b],-Infinity),H,I;for(D=0;D<A;D++)x=d[D],z=g[D],z<E[x]&&(E[x]=z),z>G[x]&&(G[x]=z);for(x=0;x<b-1;x++)G[x]>G[x+1]&&(G[x+1]=G[x]);for(x=b-1;1<=x;x--)E[x]<E[x-1]&&(E[x-1]=E[x]);for(x=0;x<b;x++)C[x]=c.rep([G[x]-E[x]+1],0),B[x]=c.rep([x-E[x]],0);for(D=
0;D<A;D++)x=d[D],C[x][g[D]-E[x]]=y[D];for(x=0;x<b-1;x++)for(d=x-E[x],y=C[x],z=x+1;E[z]<=x&&z<b;z++)if(g=x-E[z],A=G[x]-x,H=C[z],I=H[g]/y[d]){for(D=1;D<=A;D++)H[D+g]-=I*y[D+d];B[z][x-E[z]]=I}y=[];H=[];D=[];I=[];var L=[],J=[],K,M;for(x=K=A=0;x<b;x++){d=E[x];g=G[x];M=C[x];for(z=x;z<=g;z++)M[z-d]&&(y[A]=x,H[A]=z,D[A]=M[z-d],A++);M=B[x];for(z=d;z<x;z++)M[z-d]&&(I[K]=x,L[K]=z,J[K]=M[z-d],K++);I[K]=x;L[K]=x;J[K]=1;K++}return{U:[y,H,D],L:[I,L,J]}};c.cLUsolve=function(b,d){var g=b.L,y=b.U,A=c.clone(d),x=g[1],
g=g[2],z=y[1],D=y[2],y=y[0].length,B=A.length,C,E;for(C=E=0;C<B;C++){for(;x[E]<C;)A[C]-=g[E]*A[x[E]],E++;E++}E=y-1;for(C=B-1;0<=C;C--){for(;z[E]>C;)A[C]-=D[E]*A[z[E]],E--;A[C]/=D[E];E--}return A};c.cgrid=function(b,d){"number"===typeof b&&(b=[b,b]);var g=c.rep(b,-1),y,A,x;if("function"!==typeof d)switch(d){case "L":d=function(c,f){return c>=b[0]/2||f<b[1]/2};break;default:d=function(b,c){return!0}}x=0;for(y=1;y<b[0]-1;y++)for(A=1;A<b[1]-1;A++)d(y,A)&&(g[y][A]=x,x++);return g};c.cdelsq=function(b){var d=
[[-1,0],[0,-1],[0,1],[1,0]],g=c.dim(b),y=g[0],g=g[1],A,x,z,D,B,C=[],E=[],G=[];for(A=1;A<y-1;A++)for(x=1;x<g-1;x++)if(!(0>b[A][x])){for(z=0;4>z;z++)D=A+d[z][0],B=x+d[z][1],0>b[D][B]||(C.push(b[A][x]),E.push(b[D][B]),G.push(-1));C.push(b[A][x]);E.push(b[A][x]);G.push(4)}return[C,E,G]};c.cdotMV=function(b,d){var g,y=b[0],A=b[1],x=b[2],z,D=y.length;for(z=g=0;z<D;z++)y[z]>g&&(g=y[z]);g++;g=c.rep([g],0);for(z=0;z<D;z++)g[y[z]]+=x[z]*d[A[z]];return g};c.Spline=function(b,c,f,d,g){this.x=b;this.yl=c;this.yr=
f;this.kl=d;this.kr=g};c.Spline.prototype._at=function(b,d){var g=this.x,y=this.yl,A=this.yr,x=this.kr,z,D=c.add,B=c.sub,C=c.mul;z=B(C(this.kl[d],g[d+1]-g[d]),B(A[d+1],y[d]));x=D(C(x[d+1],g[d]-g[d+1]),B(A[d+1],y[d]));g=(b-g[d])/(g[d+1]-g[d]);B=g*(1-g);return D(D(D(C(1-g,y[d]),C(g,A[d+1])),C(z,B*(1-g))),C(x,B*g))};c.Spline.prototype.at=function(b){if("number"===typeof b){var c=this.x,f=c.length,d,g,x=Math.floor;d=0;for(--f;1<f-d;)g=x((d+f)/2),c[g]<=b?d=g:f=g;return this._at(b,d)}f=b.length;c=Array(f);
for(d=f-1;-1!==d;--d)c[d]=this.at(b[d]);return c};c.Spline.prototype.diff=function(){for(var b=this.x,d=this.yl,g=this.yr,y=this.kl,A=this.kr,x=d.length,z,D,B=Array(x),C=Array(x),E=c.add,G=c.mul,H=c.div,I=c.sub,x=x-1;-1!==x;--x)z=b[x+1]-b[x],D=I(g[x+1],d[x]),B[x]=H(E(G(D,6),G(y[x],-4*z),G(A[x+1],-2*z)),z*z),C[x+1]=H(E(G(D,-6),G(y[x],2*z),G(A[x+1],4*z)),z*z);return new c.Spline(b,y,A,B,C)};c.Spline.prototype.roots=function(){var b=[],c=this.x,f=this.yl,d=this.yr,g=this.kl,x=this.kr;"number"===typeof f[0]&&
(f=[f],d=[d],g=[g],x=[x]);var z=f.length,D=c.length-1,B,C,E,G,H,I,L,b=Array(z),J,K,M,P,N,S,U,W,V=Math.sqrt;for(B=0;B!==z;++B){G=f[B];H=d[B];I=g[B];L=x[B];J=[];for(C=0;C!==D;C++){0<C&&0>H[C]*G[C]&&J.push(c[C]);N=c[C+1]-c[C];E=G[C];P=H[C+1];K=I[C]/N;M=L[C+1]/N;N=K-M+3*(E-P);S=N*N+12*M*E;N=M+3*E+2*K-3*P;E=3*(M+K+2*(E-P));0>=S?(K=N/E,P=K>c[C]&&K<c[C+1]?[c[C],K,c[C+1]]:[c[C],c[C+1]]):(K=(N-V(S))/E,U=(N+V(S))/E,P=[c[C]],K>c[C]&&K<c[C+1]&&P.push(K),U>c[C]&&U<c[C+1]&&P.push(U),P.push(c[C+1]));S=P[0];K=this._at(S,
C);for(E=0;E<P.length-1;E++)if(W=P[E+1],U=this._at(W,C),0===K)J.push(S),S=W,K=U;else if(0===U||0<K*U)S=W,K=U;else{for(var X=0;;){M=(K*W-U*S)/(K-U);if(M<=S||M>=W)break;N=this._at(M,C);if(0<N*U)W=M,U=N,-1===X&&(K*=.5),X=-1;else if(0<N*K)S=M,K=N,1===X&&(U*=.5),X=1;else break}J.push(M);S=P[E+1];K=this._at(S,C)}0===U&&J.push(W)}b[B]=J}return"number"===typeof this.yl[0]?b[0]:b};c.spline=function(b,d,g,y){var A=b.length,x=[],z=[],D=[],B,C=c.sub,E=c.mul,G=c.add;for(B=A-2;0<=B;B--)z[B]=b[B+1]-b[B],D[B]=C(d[B+
1],d[B]);if("string"===typeof g||"string"===typeof y)g=y="periodic";C=[[],[],[]];switch(typeof g){case "undefined":x[0]=E(3/(z[0]*z[0]),D[0]);C[0].push(0,0);C[1].push(0,1);C[2].push(2/z[0],1/z[0]);break;case "string":x[0]=G(E(3/(z[A-2]*z[A-2]),D[A-2]),E(3/(z[0]*z[0]),D[0]));C[0].push(0,0,0);C[1].push(A-2,0,1);C[2].push(1/z[A-2],2/z[A-2]+2/z[0],1/z[0]);break;default:x[0]=g,C[0].push(0),C[1].push(0),C[2].push(1)}for(B=1;B<A-1;B++)x[B]=G(E(3/(z[B-1]*z[B-1]),D[B-1]),E(3/(z[B]*z[B]),D[B])),C[0].push(B,
B,B),C[1].push(B-1,B,B+1),C[2].push(1/z[B-1],2/z[B-1]+2/z[B],1/z[B]);switch(typeof y){case "undefined":x[A-1]=E(3/(z[A-2]*z[A-2]),D[A-2]);C[0].push(A-1,A-1);C[1].push(A-2,A-1);C[2].push(1/z[A-2],2/z[A-2]);break;case "string":C[1][C[1].length-1]=0;break;default:x[A-1]=y,C[0].push(A-1),C[1].push(A-1),C[2].push(1)}x="number"!==typeof x[0]?c.transpose(x):[x];y=Array(x.length);if("string"===typeof g)for(B=y.length-1;-1!==B;--B)y[B]=c.ccsLUPSolve(c.ccsLUP(c.ccsScatter(C)),x[B]),y[B][A-1]=y[B][0];else for(B=
y.length-1;-1!==B;--B)y[B]=c.cLUsolve(c.cLU(C),x[B]);y="number"===typeof d[0]?y[0]:c.transpose(y);return new c.Spline(b,d,d,y,y)};c.fftpow2=function w(b,c){var f=b.length;if(1!==f){var d=Math.cos,g=Math.sin,D,B,C=Array(f/2),E=Array(f/2),G=Array(f/2),H=Array(f/2);B=f/2;for(D=f-1;-1!==D;--D)--B,G[B]=b[D],H[B]=c[D],--D,C[B]=b[D],E[B]=c[D];w(C,E);w(G,H);B=f/2;var I,L=-6.283185307179586/f,J;for(D=f-1;-1!==D;--D)--B,-1===B&&(B=f/2-1),I=L*D,J=d(I),I=g(I),b[D]=C[B]+J*G[B]-I*H[B],c[D]=E[B]+J*H[B]+I*G[B]}};
c._ifftpow2=function v(b,c){var f=b.length;if(1!==f){var d=Math.cos,g=Math.sin,B,C,E=Array(f/2),G=Array(f/2),H=Array(f/2),I=Array(f/2);C=f/2;for(B=f-1;-1!==B;--B)--C,H[C]=b[B],I[C]=c[B],--B,E[C]=b[B],G[C]=c[B];v(E,G);v(H,I);C=f/2;var L,J=6.283185307179586/f,K;for(B=f-1;-1!==B;--B)--C,-1===C&&(C=f/2-1),L=J*B,K=d(L),L=g(L),b[B]=E[C]+K*H[C]-L*I[C],c[B]=G[C]+K*I[C]+L*H[C]}};c.ifftpow2=function(b,d){c._ifftpow2(b,d);c.diveq(b,b.length);c.diveq(d,d.length)};c.convpow2=function(b,d,g,x){c.fftpow2(b,d);c.fftpow2(g,
x);var z,D,B,C,E;for(z=b.length-1;-1!==z;--z)D=b[z],C=d[z],B=g[z],E=x[z],b[z]=D*B-C*E,d[z]=D*E+C*B;c.ifftpow2(b,d)};c.T.prototype.fft=function(){var b=this.x,d=this.y,g=b.length,x=Math.log,z=x(2),x=Math.ceil(x(2*g-1)/z),D=Math.pow(2,x),x=c.rep([D],0),z=c.rep([D],0),B=Math.cos,C=Math.sin,E,G=-3.141592653589793/g,H=c.rep([D],0),I=c.rep([D],0);for(E=0;E<g;E++)H[E]=b[E];if("undefined"!==typeof d)for(E=0;E<g;E++)I[E]=d[E];for(E=x[0]=1;E<=D/2;E++)b=G*E*E,x[E]=B(b),z[E]=C(b),x[D-E]=B(b),z[D-E]=C(b);b=new c.T(H,
I);d=new c.T(x,z);b=b.mul(d);c.convpow2(b.x,b.y,c.clone(d.x),c.neg(d.y));b=b.mul(d);b.x.length=g;b.y.length=g;return b};c.T.prototype.ifft=function(){var b=this.x,d=this.y,g=b.length,x=Math.log,z=x(2),x=Math.ceil(x(2*g-1)/z),D=Math.pow(2,x),x=c.rep([D],0),z=c.rep([D],0),B=Math.cos,C=Math.sin,E,G=3.141592653589793/g,H=c.rep([D],0),I=c.rep([D],0);for(E=0;E<g;E++)H[E]=b[E];if("undefined"!==typeof d)for(E=0;E<g;E++)I[E]=d[E];for(E=x[0]=1;E<=D/2;E++)b=G*E*E,x[E]=B(b),z[E]=C(b),x[D-E]=B(b),z[D-E]=C(b);
b=new c.T(H,I);d=new c.T(x,z);b=b.mul(d);c.convpow2(b.x,b.y,c.clone(d.x),c.neg(d.y));b=b.mul(d);b.x.length=g;b.y.length=g;return b.div(g)};c.gradient=function(b,d){var g=d.length,x=b(d);if(isNaN(x))throw Error("gradient: f(x) is a NaN!");var z=Math.max,D,B=c.clone(d),C,E,G=Array(g),H,z=Math.max,I=Math.abs,L=Math.min,J,K,M,P=0,N;for(D=0;D<g;D++)for(var S=z(1E-6*x,1E-8);;){++P;if(20<P)throw Error("Numerical gradient fails");B[D]=d[D]+S;C=b(B);B[D]=d[D]-S;E=b(B);B[D]=d[D];if(isNaN(C)||isNaN(E))S/=16;
else if(G[D]=(C-E)/(2*S),J=d[D]-S,K=d[D],M=d[D]+S,H=(C-x)/S,N=(x-E)/S,C=z(I(G[D]),I(x),I(C),I(E),I(J),I(K),I(M),1E-8),H=L(z(I(H-G[D]),I(N-G[D]),I(H-N))/C,S/C),.001<H)S/=16;else break}return G};c.uncmin=function(b,d,g,x,z,D,B){var C=c.gradient;"undefined"===typeof B&&(B={});"undefined"===typeof g&&(g=1E-8);"undefined"===typeof x&&(x=function(c){return C(b,c)});"undefined"===typeof z&&(z=1E3);d=c.clone(d);var E=d.length,G=b(d),H,I;if(isNaN(G))throw Error("uncmin: f(x0) is a NaN!");var L=Math.max,J=
c.norm2;g=L(g,c.epsilon);var K,M;B=B.Hinv||c.identity(E);var E=c.dot,L=c.sub,P=c.add,N=c.tensor,S=c.div,U=c.mul,W=c.all,V=c.isFinite,X=c.neg,ea=0,da,R,Y,ba,ca="";for(M=x(d);ea<z;){if("function"===typeof D&&D(ea,d,G,M,B)){ca="Callback returned true";break}if(!W(V(M))){ca="Gradient has Infinity or NaN";break}K=X(E(B,M));if(!W(V(K))){ca="Search direction has Infinity or NaN";break}ba=J(K);if(ba<g){ca="Newton step smaller than tol";break}Y=1;I=E(M,K);for(R=d;ea<z&&!(Y*ba<g);)if(da=U(K,Y),R=P(d,da),H=
b(R),H-G>=.1*Y*I||isNaN(H))Y*=.5,++ea;else break;if(Y*ba<g){ca="Line search step size smaller than tol";break}if(ea===z){ca="maxit reached during line search";break}I=x(R);d=L(I,M);M=E(d,da);G=E(B,d);B=L(P(B,U((M+E(d,G))/(M*M),N(da,da))),S(P(N(G,da),N(da,G)),M));d=R;G=H;M=I;++ea}return{solution:d,f:G,gradient:M,invHessian:B,iterations:ea,message:ca}};c.Dopri=function(b,c,f,d,g,D,B){this.x=b;this.y=c;this.f=f;this.ymid=d;this.iterations=g;this.events=B;this.message=D};c.Dopri.prototype._at=function(b,
d){function g(b){return b*b}var x=this.x,z=this.y,D=this.f,B=this.ymid,C,E,G,H=c.add,I=c.mul,L=c.sub,J;C=x[d];E=x[d+1];x=z[d];z=z[d+1];G=C+.5*(E-C);B=B[d];J=L(D[d],I(x,1/(C-G)+2/(C-E)));D=L(D[d+1],I(z,1/(E-G)+2/(E-C)));C=[g(b-E)*(b-G)/g(C-E)/(C-G),g(b-C)*g(b-E)/g(C-G)/g(E-G),g(b-C)*(b-G)/g(E-C)/(E-G),(b-C)*g(b-E)*(b-G)/g(C-E)/(C-G),(b-E)*g(b-C)*(b-G)/g(C-E)/(E-G)];return H(H(H(H(I(x,C[0]),I(B,C[1])),I(z,C[2])),I(J,C[3])),I(D,C[4]))};c.Dopri.prototype.at=function(b){var c,f,d,g=Math.floor;if("number"!==
typeof b){c=b.length;f=Array(c);for(--c;-1!==c;--c)f[c]=this.at(b[c]);return f}var D=this.x;c=0;for(f=D.length-1;1<f-c;)d=g(.5*(c+f)),D[d]<=b?c=d:f=d;return this._at(b,c)};c.dopri=function(b,d,g,x,z,D,B){"undefined"===typeof z&&(z=1E-6);"undefined"===typeof D&&(D=1E3);var C=[b],E=[g],G=[x(b,g)],H,I,L,J,K,M,P=[],N=[.075,.225],S=[44/45,-56/15,32/9],U=[19372/6561,-25360/2187,64448/6561,-212/729],W=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],V=[35/384,0,500/1113,125/192,-2187/6784,11/84],X=[.10013431883002395,
0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],ea=[.2,.3,.8,8/9,1,1],da=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],R=0,Y,ba=(d-b)/10,ca=0,aa=c.add,Z=c.mul,qa=Math.min,ma=Math.abs,za=c.norminf,va=Math.pow,oa=c.any,ua=c.lt,fa=c.and,F,Ba,ra=new c.Dopri(C,E,G,P,-1,"");for("function"===typeof B&&(F=B(b,g));b<d&&ca<D;)if(++ca,b+ba>d&&(ba=d-b),H=x(b+ea[0]*ba,aa(g,Z(.2*ba,G[R]))),I=x(b+ea[1]*ba,aa(aa(g,Z(N[0]*ba,G[R])),Z(N[1]*ba,H))),L=x(b+
ea[2]*ba,aa(aa(aa(g,Z(S[0]*ba,G[R])),Z(S[1]*ba,H)),Z(S[2]*ba,I))),J=x(b+ea[3]*ba,aa(aa(aa(aa(g,Z(U[0]*ba,G[R])),Z(U[1]*ba,H)),Z(U[2]*ba,I)),Z(U[3]*ba,L))),K=x(b+ea[4]*ba,aa(aa(aa(aa(aa(g,Z(W[0]*ba,G[R])),Z(W[1]*ba,H)),Z(W[2]*ba,I)),Z(W[3]*ba,L)),Z(W[4]*ba,J))),H=aa(aa(aa(aa(aa(g,Z(G[R],ba*V[0])),Z(I,ba*V[2])),Z(L,ba*V[3])),Z(J,ba*V[4])),Z(K,ba*V[5])),M=x(b+ba,H),Y=aa(aa(aa(aa(aa(Z(G[R],ba*da[0]),Z(I,ba*da[2])),Z(L,ba*da[3])),Z(J,ba*da[4])),Z(K,ba*da[5])),Z(M,ba*da[6])),Y="number"===typeof Y?ma(Y):
za(Y),Y>z){if(ba=.2*ba*va(z/Y,.25),b+ba===b){ra.msg="Step size became too small";break}}else{P[R]=aa(aa(aa(aa(aa(aa(g,Z(G[R],ba*X[0])),Z(I,ba*X[2])),Z(L,ba*X[3])),Z(J,ba*X[4])),Z(K,ba*X[5])),Z(M,ba*X[6]));++R;C[R]=b+ba;E[R]=H;G[R]=M;if("function"===typeof B){var na;I=b;L=b+.5*ba;Ba=B(L,P[R-1]);g=fa(ua(F,0),ua(0,Ba));oa(g)||(I=L,L=b+ba,F=Ba,Ba=B(L,H),g=fa(ua(F,0),ua(0,Ba)));if(oa(g)){z=0;for(C=D=1;;){if("number"===typeof F)d=(C*Ba*I-D*F*L)/(C*Ba-D*F);else for(d=L,E=F.length-1;-1!==E;--E)0>F[E]&&0<
Ba[E]&&(d=qa(d,(C*Ba[E]*I-D*F[E]*L)/(C*Ba[E]-D*F[E])));if(d<=I||d>=L)break;na=ra._at(d,R-1);G=B(d,na);E=fa(ua(F,0),ua(0,G));oa(E)?(L=d,Ba=G,g=E,C=1,D=-1===z?.5*D:1,z=-1):(I=d,F=G,D=1,C=1===z?.5*C:1,z=1)}H=ra._at(.5*(b+d),R-1);ra.f[R]=x(d,na);ra.x[R]=d;ra.y[R]=na;ra.ymid[R-1]=H;ra.events=g;ra.iterations=ca;return ra}}b+=ba;g=H;F=Ba;ba=qa(.8*ba*va(z/Y,.25),4*ba)}ra.iterations=ca;return ra};c.LU=function(b,d){var g=Math.abs,x,z,D,B,C,E,G=b.length,H=G-1,I=Array(G);d||(b=c.clone(b));for(D=0;D<G;++D){C=
D;B=b[D];E=g(B[D]);for(z=D+1;z<G;++z)x=g(b[z][D]),E<x&&(E=x,C=z);I[D]=C;C!=D&&(b[D]=b[C],b[C]=B,B=b[D]);z=B[D];for(x=D+1;x<G;++x)b[x][D]/=z;for(x=D+1;x<G;++x){C=b[x];for(z=D+1;z<H;++z)C[z]-=C[D]*B[z],++z,C[z]-=C[D]*B[z];z===H&&(C[z]-=C[D]*B[z])}}return{LU:b,P:I}};c.LUsolve=function(b,d){var g,x,z=b.LU,D=z.length,B=c.clone(d),C=b.P,E;for(g=D-1;-1!==g;--g)B[g]=d[g];for(g=0;g<D;++g)for(x=C[g],C[g]!==g&&(E=B[g],B[g]=B[x],B[x]=E),E=z[g],x=0;x<g;++x)B[g]-=B[x]*E[x];for(g=D-1;0<=g;--g){E=z[g];for(x=g+1;x<
D;++x)B[g]-=B[x]*E[x];B[g]/=E[g]}return B};c.solve=function(b,d,g){return c.LUsolve(c.LU(b,g),d)};c.echelonize=function(b){var d=c.dim(b),g=d[0],d=d[1],x=c.identity(g),z=Array(g),D,B,C,E,G,H,I,L,J=Math.abs,K=c.diveq;b=c.clone(b);for(D=0;D<g;++D){C=0;G=b[D];H=x[D];for(B=1;B<d;++B)J(G[C])<J(G[B])&&(C=B);z[D]=C;K(H,G[C]);K(G,G[C]);for(B=0;B<g;++B)if(B!==D){I=b[B];L=I[C];for(E=d-1;-1!==E;--E)I[E]-=G[E]*L;I=x[B];for(E=g-1;-1!==E;--E)I[E]-=H[E]*L}}return{I:x,A:b,P:z}};c.__solveLP=function(b,d,g,x,z,D,B){var C=
c.sum,E=c.mul,G=c.sub,H=c.dot,I=c.div,L=c.add,J=b.length,K=g.length,M,P=!1,N=1;c.transpose(d);var S=c.transpose,U=Math.sqrt,W=Math.abs,V=Math.min,X=c.all,ea=c.gt,da=Array(J),R=Array(K);c.rep([K],1);var Y=c.solve,ba=G(g,H(d,D)),ca,aa=H(b,b);for(ca=0;ca<z;++ca){var Z;for(Z=K-1;-1!==Z;--Z)R[Z]=I(d[Z],ba[Z]);M=S(R);for(Z=J-1;-1!==Z;--Z)da[Z]=C(M[Z]);N=.25*W(aa/H(b,da));Z=100*U(aa/H(da,da));if(!isFinite(N)||N>Z)N=Z;P=L(b,E(N,da));M=H(M,R);for(Z=J-1;-1!==Z;--Z)M[Z][Z]+=1;M=Y(M,I(P,N),!0);var ba=I(ba,H(d,
M)),qa=1;for(Z=K-1;-1!==Z;--Z)0>ba[Z]&&(qa=V(qa,-.999*ba[Z]));M=G(D,E(M,qa));ba=G(g,H(d,M));if(!X(ea(ba,0)))return{solution:D,message:"",iterations:ca};D=M;if(N<x)return{solution:M,message:"",iterations:ca};if(B)for(N=H(b,P),qa=H(d,P),P=!0,Z=K-1;-1!==Z;--Z){if(0>N*qa[Z]){P=!1;break}}else P=0<=D[J-1]?!1:!0;if(P)return{solution:M,message:"Unbounded",iterations:ca}}return{solution:D,message:"maximum iteration count exceeded",iterations:ca}};c._solveLP=function(b,d,g,x,z){var D=b.length,B=g.length,C=
c.sub,E=c.dot,G=c.rep([D],0).concat([1]),B=c.rep([B,1],-1),H=c.blockMatrix([[d,B]]),B=c.rep([D],0).concat(Math.max(0,c.sup(c.neg(g)))+1),G=c.__solveLP(G,H,g,x,z,B,!1),B=c.clone(G.solution);B.length=D;if(0>c.inf(C(g,E(d,B))))return{solution:NaN,message:"Infeasible",iterations:G.iterations};b=c.__solveLP(b,d,g,x,z-G.iterations,B,!0);b.iterations+=G.iterations;return b};c.solveLP=function(b,d,g,x,z,D,B){"undefined"===typeof B&&(B=1E3);"undefined"===typeof D&&(D=c.epsilon);if("undefined"===typeof x)return c._solveLP(b,
d,g,D,B);var C=x.length,E=x[0].length,G=d.length,H=c.echelonize(x),I=c.rep([E],0),L=H.P,J=[],K;for(K=L.length-1;-1!==K;--K)I[L[K]]=1;for(K=E-1;-1!==K;--K)0===I[K]&&J.push(K);K=c.getRange;C=c.linspace(0,C-1);G=c.linspace(0,G-1);x=K(x,C,J);C=K(d,G,L);K=K(d,G,J);d=c.dot;G=c.sub;E=d(C,H.I);C=G(K,d(E,x));g=G(g,d(E,z));E=Array(L.length);I=Array(J.length);for(K=L.length-1;-1!==K;--K)E[K]=b[L[K]];for(K=J.length-1;-1!==K;--K)I[K]=b[J[K]];K=G(I,d(E,d(H.I,x)));D=c._solveLP(K,C,g,D,B);B=D.solution;if(B!==B)return D;
z=d(H.I,G(z,d(x,B)));b=Array(b.length);for(K=L.length-1;-1!==K;--K)b[L[K]]=z[K];for(K=J.length-1;-1!==K;--K)b[J[K]]=B[K];return{solution:b,message:D.message,iterations:D.iterations}};c.MPStoLP=function(b){function d(c){throw Error("MPStoLP: "+c+"\nLine "+D+": "+b[D]+"\nCurrent state: "+x[g]+"\n");}b instanceof String&&b.split("\n");var g=0,x="Initial state;NAME;ROWS;COLUMNS;RHS;BOUNDS;ENDATA".split(";"),z=b.length,D,B,C,E=0,G={},H=[],I=0,L={},J=0,K,M=[],P=[],N=[];for(D=0;D<z;++D){C=b[D];var S=C.match(/\S*/g),
U=[];for(B=0;B<S.length;++B)""!==S[B]&&U.push(S[B]);if(0!==U.length){for(B=0;B<x.length&&C.substr(0,x[B].length)!==x[B];++B);if(B<x.length){if(g=B,1===B&&(K=U[1]),6===B)return{name:K,c:M,A:c.transpose(P),b:N,rows:G,vars:L}}else switch(g){case 0:case 1:d("Unexpected line");case 2:switch(U[0]){case "N":0===E?E=U[1]:d("Two or more N rows");break;case "L":G[U[1]]=I;H[I]=1;N[I]=0;++I;break;case "G":G[U[1]]=I;H[I]=-1;N[I]=0;++I;break;case "E":G[U[1]]=I;H[I]=0;N[I]=0;++I;break;default:d("Parse error "+c.prettyPrint(U))}break;
case 3:L.hasOwnProperty(U[0])||(L[U[0]]=J,M[J]=0,P[J]=c.rep([I],0),++J);C=L[U[0]];for(B=1;B<U.length;B+=2)U[B]===E?M[C]=parseFloat(U[B+1]):(S=G[U[B]],P[C][S]=(0>H[S]?-1:1)*parseFloat(U[B+1]));break;case 4:for(B=1;B<U.length;B+=2)N[G[U[B]]]=(0>H[G[U[B]]]?-1:1)*parseFloat(U[B+1]);break;case 6:d("Internal error")}}}d("Reached end of file without ENDATA")};c.seedrandom={pow:Math.pow,random:Math.random};(function(b,c,f,d,g,D,B){function C(b){var c,d,g=this,v=b.length,y=0,x=g.i=g.j=g.m=0;g.S=[];g.c=[];
for(v||(b=[v++]);y<f;)g.S[y]=y++;for(y=0;y<f;y++)c=g.S[y],x=x+c+b[y%v]&f-1,d=g.S[x],g.S[y]=d,g.S[x]=c;g.g=function(b){var c=g.S,d=g.i+1&f-1,v=c[d],y=g.j+v&f-1,x=c[y];c[d]=x;c[y]=v;for(var B=c[v+x&f-1];--b;)d=d+1&f-1,v=c[d],y=y+v&f-1,x=c[y],c[d]=x,c[y]=v,B=B*f+c[v+x&f-1];g.i=d;g.j=y;return B};g.g(f)}function E(b,c,f,d,g){f=[];g=typeof b;if(c&&"object"==g)for(d in b)if(5>d.indexOf("S"))try{f.push(E(b[d],c-1))}catch(v){}return f.length?f:b+("string"!=g?"\x00":"")}function G(b,c,d,g){b+="";for(g=d=0;g<
b.length;g++){var v=g&f-1,y=(d^=19*c[g&f-1])+b.charCodeAt(g);c[v]=y&f-1}b="";for(g in c)b+=String.fromCharCode(c[g]);return b}c.seedrandom=function(H,I){var L=[],J;H=G(E(I?[H,b]:arguments.length?H:[(new Date).getTime(),b,window],3),L);J=new C(L);G(J.S,b);c.random=function(){for(var b=J.g(d),c=B,v=0;b<g;)b=(b+v)*f,c*=f,v=J.g(1);for(;b>=D;)b/=2,c/=2,v>>>=1;return(b+v)/c};return H};B=c.pow(f,d);g=c.pow(2,g);D=2*g;G(c.random(),b)})([],c.seedrandom,256,6,52);(function(b){function c(b){if("object"!==typeof b)return b;
var f=[],d,g=b.length;for(d=0;d<g;d++)f[d+1]=c(b[d]);return f}function f(b){if("object"!==typeof b)return b;var c=[],d,g=b.length;for(d=1;d<g;d++)c[d-1]=f(b[d]);return c}function d(b,c,f){var g,v,y;for(c=1;c<=f;c+=1){b[c][c]=1/b[c][c];y=-b[c][c];for(g=1;g<c;g+=1)b[g][c]*=y;g=c+1;if(f<g)break;for(v=g;v<=f;v+=1)for(y=b[c][v],b[c][v]=0,g=1;g<=c;g+=1)b[g][v]+=y*b[g][c]}}function g(b,c,f,d){var v,y,x;for(v=1;v<=f;v+=1){x=0;for(c=1;c<v;c+=1)x+=b[c][v]*d[c];d[v]=(d[v]-x)/b[v][v]}for(y=1;y<=f;y+=1)for(v=
f+1-y,d[v]/=b[v][v],x=-d[v],c=1;c<v;c+=1)d[c]+=x*b[c][v]}function D(b,c,f,d){var g,v,y,x,A;for(g=1;g<=f;g+=1){d[1]=g;A=0;v=g-1;if(!(1>v))for(y=1;y<=v;y+=1){x=b[y][g];for(c=1;c<y;c+=1)x-=b[c][g]*b[c][y];x/=b[y][y];b[y][g]=x;A+=x*x}A=b[g][g]-A;if(0>=A)break;b[g][g]=Math.sqrt(A);d[1]=0}}function B(b,c,f,v,y,A,B,K,M,P,N,S,U,W,V,X){function ea(){for(R=1;R<=v;R+=1){F=0;for(Y=1;Y<=v;Y+=1)F+=b[Y][R]*B[Y][ua];V[R]=F}ca=qa;for(R=1;R<=v;R+=1)V[ca+R]=0;for(Y=U+1;Y<=v;Y+=1)for(R=1;R<=v;R+=1)V[ca+R]+=b[R][Y]*V[Y];
Ja=!0;for(R=U;1<=R;--R){F=V[R];ba=za+R*(R+3)/2;ca=ba-R;for(Y=R+1;Y<=U;Y+=1)F-=V[ba]*V[ma+Y],ba+=Y;F/=V[ca];V[ma+R]=F;if(S[R]<N)break;if(0>F)break;Ja=!1;Z=R}if(!Ja)for(Ba=V[oa+Z]/V[ma+Z],R=1;R<=U&&!(S[R]<N)&&!(0>V[ma+R]);R+=1)fa=V[oa+R]/V[ma+R],fa<Ba&&(Ba=fa,Z=R);F=0;for(R=qa+1;R<=qa+v;R+=1)F+=V[R]*V[R];if(Math.abs(F)<=Da){if(Ja)return X[1]=1,999;for(R=1;R<=U;R+=1)V[oa+R]-=Ba*V[ma+R];V[oa+U+1]+=Ba;return 700}F=0;for(R=1;R<=v;R+=1)F+=V[qa+R]*B[R][ua];ra=-V[va+ua]/F;$a=!0;!Ja&&Ba<ra&&(ra=Ba,$a=!1);for(R=
1;R<=v;R+=1)y[R]+=ra*V[qa+R],Math.abs(y[R])<Da&&(y[R]=0);A[1]+=ra*F*(ra/2+V[oa+U+1]);for(R=1;R<=U;R+=1)V[oa+R]-=ra*V[ma+R];V[oa+U+1]+=ra;if($a){U+=1;S[U]=ua;ba=za+(U-1)*U/2+1;for(R=1;R<=U-1;R+=1)V[ba]=V[R],ba+=1;if(U===v)V[ba]=V[v];else{for(R=v;R>=U+1&&0!==V[R];--R){na=Math.max(Math.abs(V[R-1]),Math.abs(V[R]));wa=Math.min(Math.abs(V[R-1]),Math.abs(V[R]));fa=0<=V[R-1]?Math.abs(na*Math.sqrt(1+wa*wa/(na*na))):-Math.abs(na*Math.sqrt(1+wa*wa/(na*na)));na=V[R-1]/fa;wa=V[R]/fa;if(1===na)break;if(0===na)for(V[R-
1]=wa*fa,Y=1;Y<=v;Y+=1)fa=b[Y][R-1],b[Y][R-1]=b[Y][R],b[Y][R]=fa;else for(V[R-1]=fa,Oa=wa/(1+na),Y=1;Y<=v;Y+=1)fa=na*b[Y][R-1]+wa*b[Y][R],b[Y][R]=Oa*(b[Y][R-1]+fa)-b[Y][R],b[Y][R-1]=fa}V[ba]=V[U]}}else{F=-K[ua];for(Y=1;Y<=v;Y+=1)F+=y[Y]*B[Y][ua];if(ua>N)V[va+ua]=F;else if(V[va+ua]=-Math.abs(F),0<F){for(Y=1;Y<=v;Y+=1)B[Y][ua]=-B[Y][ua];K[ua]=-K[ua]}return 700}return 0}function da(){ba=za+Z*(Z+1)/2+1;ca=ba+Z;if(0===V[ca])return 798;na=Math.max(Math.abs(V[ca-1]),Math.abs(V[ca]));wa=Math.min(Math.abs(V[ca-
1]),Math.abs(V[ca]));fa=0<=V[ca-1]?Math.abs(na*Math.sqrt(1+wa*wa/(na*na))):-Math.abs(na*Math.sqrt(1+wa*wa/(na*na)));na=V[ca-1]/fa;wa=V[ca]/fa;if(1===na)return 798;if(0===na){for(R=Z+1;R<=U;R+=1)fa=V[ca-1],V[ca-1]=V[ca],V[ca]=fa,ca+=R;for(R=1;R<=v;R+=1)fa=b[R][Z],b[R][Z]=b[R][Z+1],b[R][Z+1]=fa}else{Oa=wa/(1+na);for(R=Z+1;R<=U;R+=1)fa=na*V[ca-1]+wa*V[ca],V[ca]=Oa*(V[ca-1]+fa)-V[ca],V[ca-1]=fa,ca+=R;for(R=1;R<=v;R+=1)fa=na*b[R][Z]+wa*b[R][Z+1],b[R][Z+1]=Oa*(b[R][Z]+fa)-b[R][Z+1],b[R][Z]=fa}return 0}
var R,Y,ba,ca,aa,Z,qa,ma,za,va,oa,ua,fa,F,Ba,ra,na,wa,Oa,Ja,$a,Da,Xa;M=Math.min(v,P);ba=2*v+M*(M+5)/2+2*P+1;Da=1E-60;do Da+=Da,aa=1+.1*Da,Xa=1+.2*Da;while(1>=aa||1>=Xa);for(R=1;R<=v;R+=1)V[R]=c[R];for(R=v+1;R<=ba;R+=1)V[R]=0;for(R=1;R<=P;R+=1)S[R]=0;aa=[];if(0===X[1]){D(b,f,v,aa);if(0!==aa[1]){X[1]=2;return}g(b,f,v,c);d(b,f,v)}else{for(Y=1;Y<=v;Y+=1)for(y[Y]=0,R=1;R<=Y;R+=1)y[Y]+=b[R][Y]*c[R];for(Y=1;Y<=v;Y+=1)for(c[Y]=0,R=Y;R<=v;R+=1)c[Y]+=b[Y][R]*y[R]}A[1]=0;for(Y=1;Y<=v;Y+=1)for(y[Y]=c[Y],A[1]+=
V[Y]*y[Y],V[Y]=0,R=Y+1;R<=v;R+=1)b[R][Y]=0;A[1]=-A[1]/2;X[1]=0;qa=v;ma=qa+v;oa=ma+M;za=oa+M+1;va=za+M*(M+1)/2;c=va+P;for(R=1;R<=P;R+=1){F=0;for(Y=1;Y<=v;Y+=1)F+=B[Y][R]*B[Y][R];V[c+R]=Math.sqrt(F)}U=0;W[1]=0;for(f=W[2]=0;;){W[1]+=1;ba=va;for(R=1;R<=P;R+=1){ba+=1;F=-K[R];for(Y=1;Y<=v;Y+=1)F+=B[Y][R]*y[Y];Math.abs(F)<Da&&(F=0);if(R>N)V[ba]=F;else if(V[ba]=-Math.abs(F),0<F){for(Y=1;Y<=v;Y+=1)B[Y][R]=-B[Y][R];K[R]=-K[R]}}for(R=1;R<=U;R+=1)V[va+S[R]]=0;fa=ua=0;for(R=1;R<=P;R+=1)V[va+R]<fa*V[c+R]&&(ua=
R,fa=V[va+R]/V[c+R]);f=0===ua?999:0;if(999===f)break;for(;;){f=ea();if(0===f)break;if(999===f)return;if(700===f){if(Z!==U)for(;;){da();ca=ba-Z;for(R=1;R<=Z;R+=1)V[ca]=V[ba],ba+=1,ca+=1;V[oa+Z]=V[oa+Z+1];S[Z]=S[Z+1];Z+=1;f=Z<U?797:0;if(797!==f)break}V[oa+U]=V[oa+U+1];V[oa+U+1]=0;S[U]=0;--U;W[2]+=1}}}}b.solveQP=function(b,d,g,v,x,D){b=c(b);d=c(d);g=c(g);var z,K,M,P,N=[],S=[],U=[],W=[],V=[];x=x||0;D=D?c(D):[void 0,0];v=v?c(v):[];K=b.length-1;M=g[1].length-1;if(!v)for(z=1;z<=M;z+=1)v[z]=0;for(z=1;z<=
M;z+=1)S[z]=0;P=Math.min(K,M);for(z=1;z<=K;z+=1)U[z]=0;N[1]=0;for(z=1;z<=2*K+P*(P+5)/2+2*M+1;z+=1)W[z]=0;for(z=1;2>=z;z+=1)V[z]=0;B(b,d,K,K,U,N,g,v,K,M,x,S,0,V,W,D);b="";1===D[1]&&(b="constraints are inconsistent, no solution!");2===D[1]&&(b="matrix D in quadratic function is not positive definite!");return{solution:f(U),value:f(N),unconstrained_solution:f(d),iterations:f(V),iact:f(S),message:b}}})(c);c.svd=function(b){function d(b,c){b=Math.abs(b);c=Math.abs(c);return b>c?b*Math.sqrt(1+c*c/b/b):
0==c?b:c*Math.sqrt(1+b*b/c/c)}var g;g=c.epsilon;var x=1E-64/g,z=0,D=0,B=0,C=0,E=0;b=c.clone(b);var G=b.length,H=b[0].length;if(G<H)throw"Need more rows than columns";for(var I=Array(H),L=Array(H),D=0;D<H;D++)I[D]=L[D]=0;for(var J=c.rep([H,H],0),K=0,M=0,P=0,N=0,S=0,U=0,W=0,D=0;D<H;D++){I[D]=M;W=0;E=D+1;for(B=D;B<G;B++)W+=b[B][D]*b[B][D];if(W<=x)M=0;else for(K=b[D][D],M=Math.sqrt(W),0<=K&&(M=-M),P=K*M-W,b[D][D]=K-M,B=E;B<H;B++){W=0;for(C=D;C<G;C++)W+=b[C][D]*b[C][B];K=W/P;for(C=D;C<G;C++)b[C][B]+=K*
b[C][D]}L[D]=M;W=0;for(B=E;B<H;B++)W+=b[D][B]*b[D][B];if(W<=x)M=0;else{K=b[D][D+1];M=Math.sqrt(W);0<=K&&(M=-M);P=K*M-W;b[D][D+1]=K-M;for(B=E;B<H;B++)I[B]=b[D][B]/P;for(B=E;B<G;B++){W=0;for(C=E;C<H;C++)W+=b[B][C]*b[D][C];for(C=E;C<H;C++)b[B][C]+=W*I[C]}}S=Math.abs(L[D])+Math.abs(I[D]);S>N&&(N=S)}for(D=H-1;-1!=D;D+=-1){if(0!=M){P=M*b[D][D+1];for(B=E;B<H;B++)J[B][D]=b[D][B]/P;for(B=E;B<H;B++){W=0;for(C=E;C<H;C++)W+=b[D][C]*J[C][B];for(C=E;C<H;C++)J[C][B]+=W*J[C][D]}}for(B=E;B<H;B++)J[D][B]=0,J[B][D]=
0;J[D][D]=1;M=I[D];E=D}for(D=H-1;-1!=D;D+=-1){E=D+1;M=L[D];for(B=E;B<H;B++)b[D][B]=0;if(0!=M){P=b[D][D]*M;for(B=E;B<H;B++){W=0;for(C=E;C<G;C++)W+=b[C][D]*b[C][B];K=W/P;for(C=D;C<G;C++)b[C][B]+=K*b[C][D]}for(B=D;B<G;B++)b[B][D]/=M}else for(B=D;B<G;B++)b[B][D]=0;b[D][D]+=1}g*=N;for(C=H-1;-1!=C;C+=-1)for(x=0;50>x;x++){D=!1;for(E=C;-1!=E;E+=-1){if(Math.abs(I[E])<=g){D=!0;break}if(Math.abs(L[E-1])<=g)break}if(!D)for(z=0,W=1,N=E-1,D=E;D<C+1;D++){K=W*I[D];I[D]*=z;if(Math.abs(K)<=g)break;M=L[D];P=d(K,M);
L[D]=P;z=M/P;W=-K/P;for(B=0;B<G;B++)S=b[B][N],U=b[B][D],b[B][N]=S*z+U*W,b[B][D]=-S*W+U*z}U=L[C];if(E==C){if(0>U)for(L[C]=-U,B=0;B<H;B++)J[B][C]=-J[B][C];break}if(49<=x)throw"Error: no convergence.";N=L[E];S=L[C-1];M=I[C-1];P=I[C];K=((S-U)*(S+U)+(M-P)*(M+P))/(2*P*S);M=d(K,1);K=0>K?((N-U)*(N+U)+P*(S/(K-M)-P))/N:((N-U)*(N+U)+P*(S/(K+M)-P))/N;W=z=1;for(D=E+1;D<C+1;D++){M=I[D];S=L[D];P=W*M;M*=z;U=d(K,P);I[D-1]=U;z=K/U;W=P/U;K=N*z+M*W;M=-N*W+M*z;P=S*W;S*=z;for(B=0;B<H;B++)N=J[B][D-1],U=J[B][D],J[B][D-1]=
N*z+U*W,J[B][D]=-N*W+U*z;U=d(K,P);L[D-1]=U;z=K/U;W=P/U;K=z*M+W*S;N=-W*M+z*S;for(B=0;B<G;B++)S=b[B][D-1],U=b[B][D],b[B][D-1]=S*z+U*W,b[B][D]=-S*W+U*z}I[E]=0;I[C]=K;L[C]=N}for(D=0;D<L.length;D++)L[D]<g&&(L[D]=0);for(D=0;D<H;D++)for(B=D-1;0<=B;B--)if(L[B]<L[D]){z=L[B];L[B]=L[D];L[D]=z;for(C=0;C<b.length;C++)g=b[C][D],b[C][D]=b[C][B],b[C][B]=g;for(C=0;C<J.length;C++)g=J[C][D],J[C][D]=J[C][B],J[C][B]=g;D=B}return{U:b,S:L,V:J}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:
"undefined"!==typeof window?window:{})},{}],8:[function(b,c,d){(function(){function b(c,d,g){d=void 0!==d?d*d:1;var l;if(g)l=c;else{g=c[0];for(var m=[g],t=1,u=c.length;t<u;t++){l=c[t];var q=l.x-g.x,n=l.y-g.y;q*q+n*n>d&&(m.push(l),g=l)}g!==l&&m.push(l);l=m}c=l.length;g=new ("undefined"!==typeof Uint8Array?Uint8Array:Array)(c);var m=0,t=c-1,u=[],q=[],r,p,w;for(g[m]=g[t]=1;t;){r=0;for(n=m+1;n<t;n++){p=l[n];var v=l[m],y=l[t],A=v.x,v=v.y,x=y.x-A,z=y.y-v;if(0!==x||0!==z){var D=((p.x-A)*x+(p.y-v)*z)/(x*
x+z*z);1<D?(A=y.x,v=y.y):0<D&&(A+=x*D,v+=z*D)}x=p.x-A;z=p.y-v;p=x*x+z*z;p>r&&(w=n,r=p)}r>d&&(g[w]=1,u.push(m,w,w,t));t=u.pop();m=u.pop()}for(n=0;n<c;n++)g[n]&&q.push(l[n]);return q}"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof c?c.exports=b:"undefined"!==typeof self?self.simplify=b:window.simplify=b})()},{}],9:[function(b,c,d){function g(b,c,f,d){this.points=b;this.ids=c;this.dimension=d;this.length=f}c.exports=function(b){var c,d,n;if(Array.isArray(b)){c=
b.length;if(0===c)return new g(null,null,0,0);d=b[0].length;n=f(t.mallocDouble(c*(d+1)),[c,d+1]);k(b,n.hi(c,d))}else c=b.shape[0],d=b.shape[1],n=f(t.malloc(c*(d+1)),[c,d+1]),l.assign(n.hi(c,d),b);for(var y=0;y<c;++y)n.set(y,d,y);b=m.malloc([c,d],b.dtype);var A=t.mallocInt32(c),x=0,z=b.data,D=n.data;q.log2(q.nextPow2(c));for(var B=h.compile(n.order,!0,n.dtype),C=[n];x<c;){var E=C.shift(),G=E.shape[0]|0;if(1<G){for(var H=q.log2(x+1)%d,I=u.root(G),y=B(E,I,function(b,c){return b.get(H)-c.get(H)}),L=b.index(x,
0),J=y.offset,y=0;y<d;++y)z[L++]=D[J++];A[x]=D[J];x+=1;C.push(E.hi(I));2<G&&C.push(E.lo(I+1))}else{J=E.offset;L=b.index(x,0);for(y=0;y<d;++y)z[L+y]=D[J++];A[x]=D[J];x+=1}}t.free(n.data);return new g(b,A,c,d)};c.exports.deserialize=function(b){var c=b.p,d=b.i;if(c){var h=c.length;b=t.mallocFloat64(h);for(var k=0;k<h;++k)b[k]=c[k];for(var c=d.length,l=t.mallocInt32(c),k=0;k<c;++k)l[k]=d[k];d=h/c|0;return new g(f(b,[c,d]),l,c,d)}return new g(null,null,0,b.d)};var f=b("ndarray"),h=b("ndarray-select"),
k=b("ndarray-pack"),l=b("ndarray-ops"),m=b("ndarray-scratch"),t=b("typedarray-pool"),u=b("inorder-tree-layout"),q=b("bit-twiddle"),n=b("./lib/heap.js");b=g.prototype;b.serialize=function(){return 0<this.length?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}};b.range=function(b,c,f){var d=this.length;if(!(1>d)){for(var g=this.dimension,h=0;h<g;++h)if(c[h]<b[h])return;var l=this.points,n=this.ids,u=
m.malloc([d,2,g]),B=t.mallocInt32(d),C=u.data,E=l.data,G=1,H=0,I;B[0]=0;k(b,u.pick(0,0));for(k(c,u.pick(0,1));H<G;){var L=B[H];b=q.log2(L+1)%g;c=u.index(H,0,0);for(var J=u.index(H,1,0),K=l.index(L,0),M=!0,h=0;h<g;++h){var P=E[K+h];if(P<C[c+h]||C[J+h]<P){M=!1;break}}if(M&&(I=f(n[L]),void 0!==I))break;K=E[K+b];P=C[J+b];M=C[c+b];if(M<=K&&(h=2*L+1,h<d)){B[G]=h;for(var N=u.index(G,0,0),h=0;h<g;++h)C[N+h]=C[c+h];for(var S=u.index(G,1,0),h=0;h<g;++h)C[S+h]=C[J+h];C[S+b]=Math.min(P,K);G+=1}if(K<=P&&(h=2*
(L+1),h<d)){B[G]=h;N=u.index(G,0,0);for(h=0;h<g;++h)C[N+h]=C[c+h];S=u.index(G,1,0);for(h=0;h<g;++h)C[S+h]=C[J+h];C[N+b]=Math.max(M,K);G+=1}H+=1}m.free(u);t.free(B);return I}};b.rnn=function(b,c,f){if(!(0>c)){var d=this.length;if(!(1>d)){var g=this.dimension,h=this.points,k=this.ids,l=m.malloc([d,g]),n=t.mallocInt32(d),u=l.data,C=h.data,E=1,G=0;c*=c;for(var H,I=n[0]=0;I<g;++I)l.set(0,I,0);for(;G<E;){for(var L=n[G],J=h.index(L,0),K=0,I=0;I<g;++I)K+=Math.pow(b[I]-C[J+I],2);if(K<=c&&(H=f(k[L]),void 0!==
H))break;for(var K=q.log2(L+1)%g,M=0,P=l.index(G,0),I=0;I<g;++I)I!==K&&(M+=u[P+I]);var I=b[K],N=C[J+K],S=u[P+K],U=S,J=S;I<N?J=Math.max(S,Math.pow(N-I,2)):U=Math.max(S,Math.pow(N-I,2));N=J+M;if(U+M<=c&&(M=2*L+1,M<d)){n[E]=M;M=l.index(E,0);for(I=0;I<g;++I)u[M+I]=u[P+I];u[M+K]=U;E+=1}if(N<=c&&(L=2*(L+1),L<d)){n[E]=L;M=l.index(E,0);for(I=0;I<g;++I)u[M+I]=u[P+I];u[M+K]=J;E+=1}G+=1}m.free(l);t.free(n);return H}}};b.nn=function(b,c){var f=this.length;if(1>f)return-1;if("number"===typeof c){if(0>c)return-1}else c=
Infinity;for(var d=this.dimension,g=this.points,h=g.data,k=t.mallocFloat64(d),l=new n(f,d+1),m=l.index,u=l.data,C=m[0]=0;C<=d;++C)u[C]=0;l.count+=1;for(var E=-1,G=c;0<l.count&&!(u[0]>=G);){for(var H=m[0],I=g.index(H,0),L=0,C=0;C<d;++C)L+=Math.pow(b[C]-h[I+C],2);L<G&&(G=L,E=H);for(var L=q.log2(H+1)%d,J=0,C=0;C<d;++C){var K=u[C+1];C!==L&&(J+=K);k[C]=K}var C=b[L],M=h[I+L],P=k[L],I=K=P;C<M?I=Math.max(P,Math.pow(M-C,2)):K=Math.max(P,Math.pow(M-C,2));C=K+J;J=I+J;l.pop();if(C<G&&(P=2*H+1,P<f)){M=l.count;
m[M]=P;M*=d+1;u[M]=C;for(C=1;C<=d;++C)u[M+C]=k[C-1];u[M+L+1]=K;l.push()}if(J<G&&(H=2*(H+1),H<f)){M=l.count;m[M]=H;M*=d+1;u[M]=J;for(C=1;C<=d;++C)u[M+C]=k[C-1];u[M+L+1]=I;l.push()}}t.freeFloat64(k);l.dispose();return 0>E?-1:this.ids[E]};b.knn=function(b,c,f){if("number"===typeof f){if(0>f)return[]}else f=Infinity;var d=this.length;if(1>d)return[];if("number"===typeof c){if(0>=c)return[];c=Math.min(c,d)|0}else c=d;for(var g=this.ids,g=this.dimension,h=this.points,k=h.data,l=t.mallocFloat64(g),m=new n(c,
1),u=m.index,C=m.data,E=new n(d,g+1),G=E.index,H=E.data,I=G[0]=0;I<=g;++I)H[I]=0;for(E.count+=1;0<E.count&&!(H[0]>=f);){for(var L=G[0],J=h.index(L,0),K=0,I=0;I<g;++I)K+=Math.pow(b[I]-k[J+I],2);K<f&&(m.count>=c&&m.pop(),I=m.count,u[I]=L,C[I]=-K,m.push(),m.count>=c&&(f=-C[0]));for(var K=q.log2(L+1)%g,M=0,I=0;I<g;++I){var P=H[I+1];I!==K&&(M+=P);l[I]=P}var I=b[K],N=k[J+K],S=l[K],J=P=S;I<N?J=Math.max(S,Math.pow(N-I,2)):P=Math.max(S,Math.pow(N-I,2));I=P+M;M=J+M;E.pop();if(I<f&&(S=2*L+1,S<d)){N=E.count;
G[N]=S;N*=g+1;H[N]=I;for(I=1;I<=g;++I)H[N+I]=l[I-1];H[N+K+1]=P;E.push()}if(M<f&&(L=2*(L+1),L<d)){N=E.count;G[N]=L;N*=g+1;H[N]=M;for(I=1;I<=g;++I)H[N+I]=l[I-1];H[N+K+1]=J;E.push()}}t.freeFloat64(l);E.dispose();b=Array(m.count);g=this.ids;for(I=m.count-1;0<=I;--I)b[I]=g[u[0]],m.pop();m.dispose();return b};b.dispose=function(){t.free(this.points.data);t.freeInt32(this.ids);this.ids=this.points=null;this.length=0}},{"./lib/heap.js":10,"bit-twiddle":11,"inorder-tree-layout":12,ndarray:27,"ndarray-ops":14,
"ndarray-pack":19,"ndarray-scratch":25,"ndarray-select":26,"typedarray-pool":31}],10:[function(b,c,d){function g(b,c){this.count=0;this.dataSize=c;this.index=f.mallocInt32(b);this.data=f.mallocFloat64(b*c)}c.exports=g;var f=b("typedarray-pool");b=g.prototype;b.heapSwap=function(b,c){var f=this.data,d=this.index,g=this.dataSize,u=d[b];d[b]=d[c];d[c]=u;for(var d=g*b,u=g*c,q=0;q<g;++q){var n=f[d];f[d]=f[u];f[u]=n;d+=1;u+=1}};b.heapUp=function(b){for(var c=this.dataSize,f=this.data,d=f[c*b];0<b;){var g;
g=b&1?b-1>>1:(b>>1)-1;if(0<=g&&d<f[c*g])this.heapSwap(b,g),b=g;else break}};b.heapDown=function(b){for(var c=this.dataSize,f=this.data,d=this.count,g=f[c*b];;){var u=g,q=2*b+1,n=2*(b+1),r=b;if(q<d){var p=f[c*q];p<u&&(r=q,u=p)}n<d&&f[c*n]<u&&(r=n);if(r===b)break;this.heapSwap(b,r);b=r}};b.pop=function(){--this.count;this.heapSwap(0,this.count);this.heapDown(0)};b.push=function(){this.heapUp(this.count);this.count+=1};b.dispose=function(){f.freeInt32(this.index);f.freeFloat64(this.data)}},{"typedarray-pool":31}],
11:[function(b,c,d){function g(b){var c=32;(b&=-b)&&c--;b&65535&&(c-=16);b&16711935&&(c-=8);b&252645135&&(c-=4);b&858993459&&(c-=2);b&1431655765&&--c;return c}"use restrict";d.INT_BITS=32;d.INT_MAX=2147483647;d.INT_MIN=-2147483648;d.sign=function(b){return(0<b)-(0>b)};d.abs=function(b){var c=b>>31;return(b^c)-c};d.min=function(b,c){return c^(b^c)&-(b<c)};d.max=function(b,c){return b^(b^c)&-(b<c)};d.isPow2=function(b){return!(b&b-1)&&!!b};d.log2=function(b){var c,f;c=(65535<b)<<4;b>>>=c;f=(255<b)<<
3;b>>>=f;c|=f;f=(15<b)<<2;b>>>=f;c|=f;f=(3<b)<<1;return c|f|b>>>f>>1};d.log10=function(b){return 1E9<=b?9:1E8<=b?8:1E7<=b?7:1E6<=b?6:1E5<=b?5:1E4<=b?4:1E3<=b?3:100<=b?2:10<=b?1:0};d.popCount=function(b){b-=b>>>1&1431655765;b=(b&858993459)+(b>>>2&858993459);return 16843009*(b+(b>>>4)&252645135)>>>24};d.countTrailingZeros=g;d.nextPow2=function(b){b+=0===b;--b;b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=b>>>8;return(b|b>>>16)+1};d.prevPow2=function(b){b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=b>>>8;b|=b>>>16;return b-(b>>>1)};
d.parity=function(b){b^=b>>>16;b^=b>>>8;b=(b^b>>>4)&15;return 27030>>>b&1};var f=Array(256);(function(b){for(var c=0;256>c;++c){for(var f=c,d=c,g=7,f=f>>>1;f;f>>>=1)d<<=1,d|=f&1,--g;b[c]=d<<g&255}})(f);d.reverse=function(b){return f[b&255]<<24|f[b>>>8&255]<<16|f[b>>>16&255]<<8|f[b>>>24&255]};d.interleave2=function(b,c){b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;c&=65535;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(b|b<<1)&1431655765|((c|c<<1)&1431655765)<<
1};d.deinterleave2=function(b,c){b=b>>>c&1431655765;b=(b|b>>>1)&858993459;b=(b|b>>>2)&252645135;b=(b|b>>>4)&16711935;return((b|b>>>16)&65535)<<16>>16};d.interleave3=function(b,c,f){b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;c&=1023;c=(c|c<<16)&4278190335;c=(c|c<<8)&251719695;c=(c|c<<4)&3272356035;b=(b|b<<2)&1227133513|((c|c<<2)&1227133513)<<1;f&=1023;f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;return b|((f|f<<2)&1227133513)<<2};d.deinterleave3=
function(b,c){b=b>>>c&1227133513;b=(b|b>>>2)&3272356035;b=(b|b>>>4)&251719695;b=(b|b>>>8)&4278190335;return((b|b>>>16)&1023)<<22>>22};d.nextCombination=function(b){var c=b|b-1;return c+1|(~c&-~c)-1>>>g(b)+1}},{}],12:[function(b,c,d){function g(b){var c=(m.nextPow2(b+1)>>>1)-1;b-=c;return m.nextPow2(b)-1>=c?c:(c>>>1)+b}function f(b,c){if(0>=b)return 0;var d=g(b);return c>d?f(b-d-1,c-d-1):c===d?m.log2(b):f(d,c)}function h(b,c){if(0>=b)return-1;var f=g(b);if(c>f){var d=h(b-f-1,c-f-1);return 0>d?f:d+
f+1}if(c===f)return-1;d=h(f,c);return 0>d?f:d}function k(b,c){if(0>=b)return 0;var f=g(b);return c>f?k(b-f-1,c-f-1)+f+1:c===f?g(c):k(f,c)}function l(b,c){if(0>=b)return 0;var f=g(b);return c>f?l(b-f-1,c-f-1)+f+1:c===f?g(b-f-1)+f+1:l(f,c)}var m=b("bit-twiddle");d.root=g;d.begin=function(b){return 0};d.end=function(b){return b-1};d.height=f;d.prev=function(b,c){return Math.max(c-1,0)};d.next=function(b,c){return Math.min(c+1,b-1)};d.parent=h;d.left=k;d.right=l;d.leaf=function(b,c){return 0===f(b,c)};
d.lo=function(b,c){b|=0;c|=0;for(var f=0;1<b;){var d=g(b);if(c>d)f+=d+1,b-=d+1,c-=d+1;else if(c===d)break;else b=d}return f};d.hi=function(b,c){b|=0;c|=0;for(var f=0;1<b;){var d=g(b);if(c>d)f+=d+1,b-=d+1,c-=d+1;else if(c===d){f+=b-1;break}else b=d}return f}},{"bit-twiddle":13}],13:[function(b,c,d){arguments[4][11][0].apply(d,arguments)},{dup:11}],14:[function(b,c,d){function g(b){if(!b)return k;for(var c=0;c<b.args.length;++c){var f=b.args[c];b.args[c]=0===c?{name:f,lvalue:!0,rvalue:!!b.rvalue,count:b.count||
1}:{name:f,lvalue:!1,rvalue:!0,count:1}}b.thisVars||(b.thisVars=[]);b.localVars||(b.localVars=[]);return b}function f(b){for(var c=[],f=0;f<b.args.length;++f)c.push("a"+f);c=new Function("P",["return function ",b.funcName,"_ndarrayops(",c.join(","),") {P(",c.join(","),");return a0}"].join(""));b=h({args:b.args,pre:g(b.pre),body:g(b.body),post:g(b.proc),funcName:b.funcName});return c(b)}var h=b("cwise-compiler"),k={body:"",args:[],thisVars:[],localVars:[]},l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",
band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var b in l){var c=l[b];d[b]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+c+"c"},funcName:b});d[b+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a"+c+"=b"},rvalue:!0,funcName:b+"eq"});d[b+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+c+"s"},funcName:b+"s"});d[b+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a"+c+"=s"},rvalue:!0,funcName:b+
"seq"})}})();var m={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var b in m){var c=m[b];d[b]=f({args:["array","array"],body:{args:["a","b"],body:"a="+c+"b"},funcName:b});d[b+"eq"]=f({args:["array"],body:{args:["a"],body:"a="+c+"a"},rvalue:!0,count:2,funcName:b+"eq"})}})();var t={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var b in t){var c=t[b];d[b]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+c+"c"},funcName:b});d[b+"s"]=
f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+c+"s"},funcName:b+"s"});d[b+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a=a"+c+"b"},rvalue:!0,count:2,funcName:b+"eq"});d[b+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+c+"s"},rvalue:!0,count:2,funcName:b+"seq"})}})();var u="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var b=0;b<u.length;++b){var c=u[b];d[c]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+
c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:c});d[c+"eq"]=f({args:["array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"eq"})}})();var q=["max","min","atan2","pow"];(function(){for(var b=0;b<q.length;++b){var c=q[b];d[c]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",
thisVars:["this_f"]},funcName:c});d[c+"s"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:c+"s"});d[c+"eq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"eq"});d[c+"seq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},
body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"seq"})}})();var n=["atan2","pow"];(function(){for(var b=0;b<n.length;++b){var c=n[b];d[c+"op"]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:c+"op"});d[c+"ops"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",
thisVars:["this_f"]},funcName:c+"ops"});d[c+"opeq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"opeq"});d[c+"opseq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"opseq"})}})();d.any=h({args:["array"],pre:k,body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});d.all=h({args:["array"],pre:k,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});d.sum=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",
localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});d.prod=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});d.norm2squared=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",
lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});d.norm2=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});d.norminf=h({args:["array"],pre:{args:[],
localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});d.norm1=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});d.sup=h({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});d.inf=h({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});d.argmin=h({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});d.argmax=h({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,
count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});d.random=f({args:["array"],
pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});d.assign=f({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});d.assigns=f({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});d.equals=h({args:["array","array"],pre:k,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},
post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":15}],15:[function(b,c,d){function g(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var f=b("./lib/thunk.js");c.exports=function(b){var c=new g;c.pre=b.pre;c.body=b.body;c.post=b.post;var d=b.args.slice(0);c.argTypes=
d;for(var m=0;m<d.length;++m){var t=d[m];if("array"===t||"object"===typeof t&&t.blockIndices){c.argTypes[m]="array";c.arrayArgs.push(m);c.arrayBlockIndices.push(t.blockIndices?t.blockIndices:0);c.shimArgs.push("array"+m);if(m<c.pre.args.length&&0<c.pre.args[m].count)throw Error("cwise: pre() block may not reference array args");if(m<c.post.args.length&&0<c.post.args[m].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===t)c.scalarArgs.push(m),c.shimArgs.push("scalar"+
m);else if("index"===t){c.indexArgs.push(m);if(m<c.pre.args.length&&0<c.pre.args[m].count)throw Error("cwise: pre() block may not reference array index");if(m<c.body.args.length&&c.body.args[m].lvalue)throw Error("cwise: body() block may not write to array index");if(m<c.post.args.length&&0<c.post.args[m].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===t){c.shapeArgs.push(m);if(m<c.pre.args.length&&c.pre.args[m].lvalue)throw Error("cwise: pre() block may not write to array shape");
if(m<c.body.args.length&&c.body.args[m].lvalue)throw Error("cwise: body() block may not write to array shape");if(m<c.post.args.length&&c.post.args[m].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof t&&t.offset)c.argTypes[m]="offset",c.offsetArgs.push({array:t.array,offset:t.offset}),c.offsetArgIndex.push(m);else throw Error("cwise: Unknown argument type "+d[m]);}if(0>=c.arrayArgs.length)throw Error("cwise: No array arguments specified");if(c.pre.args.length>
d.length)throw Error("cwise: Too many arguments in pre() block");if(c.body.args.length>d.length)throw Error("cwise: Too many arguments in body() block");if(c.post.args.length>d.length)throw Error("cwise: Too many arguments in post() block");c.debug=!!b.printCode||!!b.debug;c.funcName=b.funcName||"cwise";c.blockSize=b.blockSize||64;return f(c)}},{"./lib/thunk.js":17}],16:[function(b,c,d){function g(b,c,f){var d=b.length,g=c.arrayArgs.length;c=0<c.indexArgs.length;var h=[],k=[],l=0,v=0,y,A;for(y=0;y<
d;++y)k.push(["i",y,"=0"].join(""));for(A=0;A<g;++A)for(y=0;y<d;++y)v=l,l=b[y],0===y?k.push(["d",A,"s",y,"=t",A,"p",l].join("")):k.push(["d",A,"s",y,"=(t",A,"p",l,"-s",v,"*t",A,"p",v,")"].join(""));h.push("var "+k.join(","));for(y=d-1;0<=y;--y)l=b[y],h.push(["for(i",y,"=0;i",y,"<s",l,";++i",y,"){"].join(""));h.push(f);for(y=0;y<d;++y){v=l;l=b[y];for(A=0;A<g;++A)h.push(["p",A,"+=d",A,"s",y].join(""));c&&(0<y&&h.push(["index[",v,"]-=s",v].join("")),h.push(["++index[",l,"]"].join("")));h.push("}")}return h.join("\n")}
function f(b,c,f,d){for(var h=c.length,k=f.arrayArgs.length,l=f.blockSize,w=0<f.indexArgs.length,v=[],y=0;y<k;++y)v.push(["var offset",y,"=p",y].join(""));for(y=b;y<h;++y)v.push(["for(var j"+y+"=SS[",c[y],"]|0;j",y,">0;){"].join("")),v.push(["if(j",y,"<",l,"){"].join("")),v.push(["s",c[y],"=j",y].join("")),v.push(["j",y,"=0"].join("")),v.push(["}else{s",c[y],"=",l].join("")),v.push(["j",y,"-=",l,"}"].join("")),w&&v.push(["index[",c[y],"]=j",y].join(""));for(y=0;y<k;++y){l=["offset"+y];for(w=b;w<h;++w)l.push(["j",
w,"*t",y,"p",c[w]].join(""));v.push(["p",y,"=(",l.join("+"),")"].join(""))}v.push(g(c,f,d));for(y=b;y<h;++y)v.push("}");return v.join("\n")}function h(b,c,f){for(var d=b.body,g=[],h=[],k=0;k<b.args.length;++k){var l=b.args[k];if(!(0>=l.count)){var v=new RegExp(l.name,"g"),y="",A=c.arrayArgs.indexOf(k);switch(c.argTypes[k]){case "offset":var x=c.offsetArgIndex.indexOf(k),A=c.offsetArgs[x].array,y="+q"+x;case "array":var y="p"+A+y,z="l"+k,x="a"+A;if(0===c.arrayBlockIndices[A])1===l.count?"generic"===
f[A]?l.lvalue?(g.push(["var ",z,"=",x,".get(",y,")"].join("")),d=d.replace(v,z),h.push([x,".set(",y,",",z,")"].join(""))):d=d.replace(v,[x,".get(",y,")"].join("")):d=d.replace(v,[x,"[",y,"]"].join("")):"generic"===f[A]?(g.push(["var ",z,"=",x,".get(",y,")"].join("")),d=d.replace(v,z),l.lvalue&&h.push([x,".set(",y,",",z,")"].join(""))):(g.push(["var ",z,"=",x,"[",y,"]"].join("")),d=d.replace(v,z),l.lvalue&&h.push([x,"[",y,"]=",z].join("")));else{v=[l.name];l=[y];for(y=0;y<Math.abs(c.arrayBlockIndices[A]);y++)v.push("\\s*\\[([^\\]]+)\\]"),
l.push("$"+(y+1)+"*t"+A+"b"+y);v=new RegExp(v.join(""),"g");y=l.join("+");if("generic"===f[A])throw Error("cwise: Generic arrays not supported in combination with blocks!");d=d.replace(v,[x,"[",y,"]"].join(""))}break;case "scalar":d=d.replace(v,"Y"+c.scalarArgs.indexOf(k));break;case "index":d=d.replace(v,"index");break;case "shape":d=d.replace(v,"shape")}}}return[g.join("\n"),d,h.join("\n")].join("\n").trim()}function k(b){for(var c=Array(b.length),f=!0,d=0;d<b.length;++d){var g=b[d],h=g.match(/\d+/),
h=h?h[0]:"";0===g.charAt(0)?c[d]="u"+g.charAt(1)+h:c[d]=g.charAt(0)+h;0<d&&(f=f&&c[d]===c[d-1])}return f?c[0]:c.join("")}var l=b("uniq");c.exports=function(b,c){for(var d=c[1].length-Math.abs(b.arrayBlockIndices[0])|0,q=Array(b.arrayArgs.length),n=Array(b.arrayArgs.length),r=0;r<b.arrayArgs.length;++r)n[r]=c[2*r],q[r]=c[2*r+1];for(var p=[],w=[],v=[],y=[],A=[],r=0;r<b.arrayArgs.length;++r){0>b.arrayBlockIndices[r]?(v.push(0),y.push(d),p.push(d),w.push(d+b.arrayBlockIndices[r])):(v.push(b.arrayBlockIndices[r]),
y.push(b.arrayBlockIndices[r]+d),p.push(0),w.push(b.arrayBlockIndices[r]));for(var x=[],z=0;z<q[r].length;z++)v[r]<=q[r][z]&&q[r][z]<y[r]&&x.push(q[r][z]-v[r]);A.push(x)}w=["SS"];y=["'use strict'"];x=[];for(z=0;z<d;++z)x.push(["s",z,"=SS[",z,"]"].join(""));for(r=0;r<b.arrayArgs.length;++r){w.push("a"+r);w.push("t"+r);w.push("p"+r);for(z=0;z<d;++z)x.push(["t",r,"p",z,"=t",r,"[",v[r]+z,"]"].join(""));for(z=0;z<Math.abs(b.arrayBlockIndices[r]);++z)x.push(["t",r,"b",z,"=t",r,"[",p[r]+z,"]"].join(""))}for(r=
0;r<b.scalarArgs.length;++r)w.push("Y"+r);0<b.shapeArgs.length&&x.push("shape=SS.slice(0)");if(0<b.indexArgs.length){z=Array(d);for(r=0;r<d;++r)z[r]="0";x.push(["index=[",z.join(","),"]"].join(""))}for(r=0;r<b.offsetArgs.length;++r){p=b.offsetArgs[r];v=[];for(z=0;z<p.offset.length;++z)0!==p.offset[z]&&(1===p.offset[z]?v.push(["t",p.array,"p",z].join("")):v.push([p.offset[z],"*t",p.array,"p",z].join("")));0===v.length?x.push("q"+r+"=0"):x.push(["q",r,"=",v.join("+")].join(""))}r=l([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));
x=x.concat(r);y.push("var "+x.join(","));for(r=0;r<b.arrayArgs.length;++r)y.push("p"+r+"|=0");3<b.pre.body.length&&y.push(h(b.pre,b,n));r=h(b.body,b,n);a:for(z=0,x=A[0].length;z<x;){for(p=1;p<A.length;++p)if(A[p][z]!==A[0][z])break a;++z}z<d?y.push(f(z,A[0],b,r)):y.push(g(A[0],b,r));3<b.post.body.length&&y.push(h(b.post,b,n));b.debug&&console.log("-----Generated cwise routine for ",c,":\n"+y.join("\n")+"\n----------");d=[b.funcName||"unnamed","_cwise_loop_",q[0].join("s"),"m",z,k(n)].join("");return(new Function(["function ",
d,"(",w.join(","),"){",y.join("\n"),"} return ",d].join("")))()}},{uniq:18}],17:[function(b,c,d){var g=b("./compile.js");c.exports=function(b){var c=["'use strict'","var CACHED={}"],d=[];c.push(["return function ",b.funcName+"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var l=[],m=[],t=[["array",b.arrayArgs[0],".shape.slice(",Math.max(0,b.arrayBlockIndices[0]),0>b.arrayBlockIndices[0]?","+b.arrayBlockIndices[0]+")":")"].join("")],u=[],q=[],n=0;n<b.arrayArgs.length;++n){var r=b.arrayArgs[n];
d.push(["t",r,"=array",r,".dtype,r",r,"=array",r,".order"].join(""));l.push("t"+r);l.push("r"+r);m.push("t"+r);m.push("r"+r+".join()");t.push("array"+r+".data");t.push("array"+r+".stride");t.push("array"+r+".offset|0");0<n&&(u.push("array"+b.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(b.arrayBlockIndices[0])-Math.abs(b.arrayBlockIndices[n]))),q.push("array"+b.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[n])+
"]"))}1<b.arrayArgs.length&&(c.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),c.push("for(var shapeIndex=array"+b.arrayArgs[0]+".shape.length-"+Math.abs(b.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),c.push("if (!("+q.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),c.push("}"));for(n=0;n<b.scalarArgs.length;++n)t.push("scalar"+b.scalarArgs[n]);d.push(["type=[",m.join(","),"].join()"].join(""));d.push("proc=CACHED[type]");
c.push("var "+d.join(","));c.push(["if(!proc){CACHED[type]=proc=compile([",l.join(","),"])}return proc(",t.join(","),")}"].join(""));b.debug&&console.log("-----Generated thunk:\n"+c.join("\n")+"\n----------");return(new Function("compile",c.join("\n")))(g.bind(void 0,b))}},{"./compile.js":16}],18:[function(b,c,d){c.exports=function(b,c,d){if(0===b.length)return b;if(c){d||b.sort(c);d=1;for(var k=b.length,l=b[0],m=b[0],t=1;t<k;++t)m=l,l=b[t],c(l,m)&&(t===d?d++:b[d++]=l);b.length=d;return b}d||b.sort();
c=1;d=b.length;k=b[0];l=b[0];for(m=1;m<d;++m)l=k,k=b[m],k!==l&&(m===c?c++:b[c++]=k);b.length=c;return b}},{}],19:[function(b,c,d){var g=b("ndarray"),f=b("./doConvert.js");c.exports=function(b,c){for(var d=[],m=b,t=1;m instanceof Array;)d.push(m.length),t*=m.length,m=m[0];if(0===d.length)return g();c||(c=g(new Float64Array(t),d));f(c,b);return c}},{"./doConvert.js":20,ndarray:27}],20:[function(b,c,d){c.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],
localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":21}],21:[function(b,c,d){arguments[4][15][0].apply(d,arguments)},{"./lib/thunk.js":23,dup:15}],22:[function(b,c,d){arguments[4][16][0].apply(d,arguments)},{dup:16,uniq:24}],23:[function(b,c,d){arguments[4][17][0].apply(d,arguments)},{"./compile.js":22,dup:17}],24:[function(b,c,d){arguments[4][18][0].apply(d,arguments)},{dup:18}],25:[function(b,c,d){var g=b("ndarray"),f=b("ndarray-ops"),h=b("typedarray-pool");d.clone=
function(b){var c=b.dtype;if("generic"===c||"array"===c)c="double";c=h.malloc(b.size,c);c=g(c,b.shape);f.assign(c,b);return c};d.malloc=function(b,c){c||(c="double");for(var f=1,d=Array(b.length),u=b.length-1;0<=u;--u)d[u]=f,f*=b[u];return g(h.malloc(f,c),b,d,0)};d.free=function(b){"generic"!==b.dtype&&"array"!==b.dtype&&h.free(b.data)};d.zeros=function(b,c){c||(c="double");for(var f=1,d=Array(b.length),u=b.length-1;0<=u;--u)d[u]=f,f*=b[u];for(var q=h.malloc(f,c),u=0;u<f;++u)q[u]=0;return g(q,b,d,
0)};d.ones=function(b,c){c||(c="double");for(var f=1,d=Array(b.length),u=b.length-1;0<=u;--u)d[u]=f,f*=b[u];for(var q=h.malloc(f,c),u=0;u<f;++u)q[u]=1;return g(q,b,d,0)};d.eye=function(b,c){var f,d;c||(c="double");d=1;var u=Array(b.length);for(f=b.length-1;0<=f;--f)u[f]=d,d*=b[f];var q=h.malloc(d,c);for(f=0;f<d;++f)q[f]=0;var n=Infinity,r=0;for(f=b.length-1;0<=f;f--)r+=u[f],n=Math.min(n,b[f]);for(d=f=0;f<n;f++,d+=r)q[d]=1;return g(q,b,u,0)}},{ndarray:27,"ndarray-ops":14,"typedarray-pool":31}],26:[function(b,
c,d){function g(b){var c=b.slice();c.splice(b.indexOf(0),1);c.unshift(0);return c}function f(b,c,f){function d(c,f){C.push("x0","=",u,"+","t"+b[0],"*(",c,");","x1","=",u,"+","t"+b[0],"*(",f,");");for(var g=h-1;0<g;--g)C.push("for(","i"+b[g],"=0;","i"+b[g],"<","s"+b[g],";","i"+b[g],"++){");v?C.push(n,"=",t,".get(","x0",");",t,".set(","x0",",",t,".get(","x1","));",t,".set(","x1",",",n,");"):C.push(n,"=",t,"[","x0","];",t,"[","x0","]=",t,"[","x1","];",t,"[","x1","]=",n,";");for(g=1;g<h;++g)C.push("x0",
"+=","u"+b[g],";","x1","+=","u"+b[g],"}")}b=g(b);var h=b.length,v="generic"===f;f="ndSelect"+f+b.join("_")+"_"+(c?"cmp":"lex");var C=[],E=[k,l];c&&E.push(m);for(var G=[t+"="+k+".data",u+"="+k+".offset|0",q+"=Math.random",n],H=0;2>H;++H)G.push("x"+H+"=0");for(H=0;H<h;++H)G.push("s"+H+"="+k+".shape["+H+"]|0","t"+H+"="+k+".stride["+H+"]|0","i"+H+"=0");for(H=1;H<h;++H)1<H?G.push("v"+H+"=("+("t"+H)+"-"+("s"+(H-1))+"*"+("t"+(H-1))+")|0","u"+b[H]+"=("+("t"+b[H])+"-"+("s"+b[H-1])+"*"+("t"+b[H-1])+")|0"):
G.push("v"+H+"="+("t"+H),"u"+b[H]+"="+("t"+b[H]));if(c)for(H=0;2>H;++H)G.push("p"+H+"="+k+".pick(0)");G.push(w+"=0",r+"=0",p+"="+("s"+b[0])+"-1");C.push("while(",r,"<",p,"){",w,"=(",q,"()*(",p,"-",r,"+1)+",r,")|0;");d(w,p);C.push(w,"=",r,";","for(","i0","=",r,";","i0","<",p,";","i0","++){");(function(f,d,g){if(c)C.push("p0",".offset=",u,"+","t"+b[0],"*(",d,");","p1",".offset=",u,"+","t"+b[0],"*(",g,");",f,"=",m,"(","p0",",","p1",");");else{C.push("x0","=",u,"+","t0","*(",d,");","x1","=",u,"+","t0",
"*(",g,");");1<h&&C.push("_cmp:");for(d=h-1;0<d;--d)C.push("for(","i"+d,"=0;","i"+d,"<","s"+d,";","i"+d,"++){");v?C.push(f,"=",t,".get(","x0",")-",t,".get(","x1",");"):C.push(f,"=",t,"[","x0","]-",t,"[","x1","];");1<h&&C.push("if(",f,")break _cmp;");for(d=1;d<h;++d)C.push("x0","+=","v"+d,";","x1","+=","v"+d,"}")}})(n,"i0",p);C.push("if(",n,"<0){");d(w,"i0");C.push(w,"++;");C.push("}}");d(w,p);C.push("if(",w,"===",l,"){",r,"=",w,";","break;","}else if(",l,"<",w,"){",p,"=",w,"-1;","}else{",r,"=",w,
"+1;","}","}");c?C.push("p0",".offset=",u,"+",r,"*","t0",";","return ","p0",";"):C.push("return ",k,".pick(",r,");");f=["'use strict';function ",f,"(",E,"){var ",G.join(),";",C.join(""),"};return ",f].join("");return(new Function(f))()}function h(b,c,d){var g=b.join()+c+d,h=v[g];return h?h:v[g]=f(b,c,d)}c.exports=function(b,c,f){c|=0;if(0===b.dimension||b.shape[0]<=c||0>c)return null;var d=!!f,g=h(b.order,d,b.dtype);return d?g(b,c,f):g(b,c)};c.exports.compile=h;var k="a",l="K",m="C",t="d",u="o",q=
"R",n="T",r="L",p="H",w="X",v={}},{}],27:[function(b,c,d){function g(b,c){return b[0]-c[0]}function f(){var b=this.stride,c=Array(b.length),f;for(f=0;f<c.length;++f)c[f]=[Math.abs(b[f]),f];c.sort(g);b=Array(c.length);for(f=0;f<b.length;++f)b[f]=c[f][1];return b}function h(b,c){var d=["View",c,"d",b].join("");0>c&&(d="View_Nil"+b);var g="generic"===b;if(-1===c){var h,d=new Function("function "+d+"(a){this.data=a;};var proto="+d+".prototype;proto.dtype='"+b+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+
d+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+d+"(a){return new "+d+"(a);}");return d()}if(0===c)return d=new Function("TrivialArray","function "+d+"(a,d) {this.data = a;this.offset = d};var proto="+d+".prototype;proto.dtype='"+b+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick=function "+
d+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+d+"_get(){return "+(g?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+d+"_set(v){return "+(g?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),d(u[b][0]);h=["'use strict'"];var k=l(c),m=k.map(function(b){return"i"+b}),t="this.offset+"+k.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),x=k.map(function(b){return"b"+
b}).join(","),z=k.map(function(b){return"c"+b}).join(",");h.push("function "+d+"(a,"+x+","+z+",d){this.data=a","this.shape=["+x+"]","this.stride=["+z+"]","this.offset=d|0}","var proto="+d+".prototype","proto.dtype='"+b+"'","proto.dimension="+c);h.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+k.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===c?h.push("proto.order=[0]"):(h.push("Object.defineProperty(proto,'order',{get:"),4>c?(h.push("function "+d+"_order(){"),
2===c?h.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&h.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):h.push("ORDER})"));h.push("proto.set=function "+d+"_set("+m.join(",")+",v){");g?h.push("return this.data.set("+t+",v)}"):h.push("return this.data["+
t+"]=v}");h.push("proto.get=function "+d+"_get("+m.join(",")+"){");g?h.push("return this.data.get("+t+")}"):h.push("return this.data["+t+"]}");h.push("proto.index=function "+d+"_index(",m.join(),"){return "+t+"}");h.push("proto.hi=function "+d+"_hi("+m.join(",")+"){return new "+d+"(this.data,"+k.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+k.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");g=k.map(function(b){return"a"+
b+"=this.shape["+b+"]"});t=k.map(function(b){return"c"+b+"=this.stride["+b+"]"});h.push("proto.lo=function "+d+"_lo("+m.join(",")+"){var b=this.offset,d=0,"+g.join(",")+","+t.join(","));for(g=0;g<c;++g)h.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");h.push("return new "+d+"(this.data,"+k.map(function(b){return"a"+b}).join(",")+","+k.map(function(b){return"c"+b}).join(",")+",b)}");h.push("proto.step=function "+d+"_step("+m.join(",")+"){var "+k.map(function(b){return"a"+
b+"=this.shape["+b+"]"}).join(",")+","+k.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(g=0;g<c;++g)h.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");h.push("return new "+d+"(this.data,"+k.map(function(b){return"a"+b}).join(",")+","+k.map(function(b){return"b"+b}).join(",")+",c)}");t=Array(c);x=Array(c);for(g=0;g<c;++g)t[g]="a[i"+g+"]",x[g]="b[i"+g+"]";
h.push("proto.transpose=function "+d+"_transpose("+m+"){"+m.map(function(b,c){return b+"=("+b+"===undefined?"+c+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+d+"(this.data,"+t.join(",")+","+x.join(",")+",this.offset)}");h.push("proto.pick=function "+d+"_pick("+m+"){var a=[],b=[],c=this.offset");for(g=0;g<c;++g)h.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");h.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");
h.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+k.map(function(b){return"shape["+b+"]"}).join(",")+","+k.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");d=new Function("CTOR_LIST","ORDER",h.join("\n"));return d(u[b],f)}function k(b){if(m(b))return"buffer";if(t)switch(Object.prototype.toString.call(b)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";
case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(b)?"array":"generic"}var l=b("iota-array"),m=b("is-buffer"),t="undefined"!==typeof Float64Array,u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var b in u)u[b].push(h(b,
-1))});c.exports=function(b,c,f,d){if(void 0===b){var g=u.array[0];return g([])}"number"===typeof b&&(b=[b]);void 0===c&&(c=[b.length]);g=c.length;if(void 0===f){f=Array(g);for(var l=g-1,m=1;0<=l;--l)f[l]=m,m*=c[l]}if(void 0===d)for(l=d=0;l<g;++l)0>f[l]&&(d-=(c[l]-1)*f[l]);l=k(b);for(m=u[l];m.length<=g+1;)m.push(h(l,m.length-1));g=m[g+1];return g(b,c,f,d)}},{"iota-array":28,"is-buffer":29}],28:[function(b,c,d){c.exports=function(b){for(var c=Array(b),d=0;d<b;++d)c[d]=d;return c}},{}],29:[function(b,
c,d){c.exports=function(b){return!(null==b||!(b._isBuffer||b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)))}},{}],30:[function(b,c,d){function g(b,c,d){var l=b[d]|0;if(0>=l)return[];var m=Array(l),t;if(d===b.length-1)for(t=0;t<l;++t)m[t]=c;else for(t=0;t<l;++t)m[t]=g(b,c,d+1);return m}c.exports=function(b,c){"undefined"===typeof c&&(c=0);switch(typeof b){case "number":if(0<b){var d=b|0,l=c,m,t;m=Array(d);for(t=0;t<d;++t)m[t]=l;return m}break;case "object":if("number"===
typeof b.length)return g(b,c,0)}return[]}},{}],31:[function(b,c,d){(function(c,f){function h(b){if(b){var c=A.log2(b.length||b.byteLength);B[c].push(b)}}function k(b){b=A.nextPow2(b);var c=A.log2(b),c=B[c];return 0<c.length?c.pop():new ArrayBuffer(b)}function l(b){return new Uint8Array(k(b),0,b)}function m(b){return new Uint16Array(k(2*b),0,b)}function t(b){return new Uint32Array(k(4*b),0,b)}function u(b){return new Int8Array(k(b),0,b)}function q(b){return new Int16Array(k(2*b),0,b)}function n(b){return new Int32Array(k(4*
b),0,b)}function r(b){return new Float32Array(k(4*b),0,b)}function p(b){return new Float64Array(k(8*b),0,b)}function w(b){return z?new Uint8ClampedArray(k(b),0,b):l(b)}function v(b){return new DataView(k(b),0,b)}function y(b){b=A.nextPow2(b);var c=A.log2(b),c=C[c];return 0<c.length?c.pop():new f(b)}var A=b("bit-twiddle"),x=b("dup");c.__TYPEDARRAY_POOL||(c.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,
0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var z="undefined"!==typeof Uint8ClampedArray,D=c.__TYPEDARRAY_POOL;D.UINT8C||(D.UINT8C=x([32,0]));D.BUFFER||(D.BUFFER=x([32,0]));var B=D.DATA,C=D.BUFFER;d.free=function(b){if(f.isBuffer(b))C[A.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&(b=b.buffer),b){var c=A.log2(b.length||b.byteLength)|0;B[c].push(b)}};d.freeUint8=d.freeUint16=d.freeUint32=d.freeInt8=d.freeInt16=d.freeInt32=d.freeFloat32=d.freeFloat=
d.freeFloat64=d.freeDouble=d.freeUint8Clamped=d.freeDataView=function(b){h(b.buffer)};d.freeArrayBuffer=h;d.freeBuffer=function(b){C[A.log2(b.length)].push(b)};d.malloc=function(b,c){if(void 0===c||"arraybuffer"===c)return k(b);switch(c){case "uint8":return l(b);case "uint16":return m(b);case "uint32":return t(b);case "int8":return u(b);case "int16":return q(b);case "int32":return n(b);case "float":case "float32":return r(b);case "double":case "float64":return p(b);case "uint8_clamped":return w(b);
case "buffer":return y(b);case "data":case "dataview":return v(b);default:return null}};d.mallocArrayBuffer=k;d.mallocUint8=l;d.mallocUint16=m;d.mallocUint32=t;d.mallocInt8=u;d.mallocInt16=q;d.mallocInt32=n;d.mallocFloat32=d.mallocFloat=r;d.mallocFloat64=d.mallocDouble=p;d.mallocUint8Clamped=w;d.mallocDataView=v;d.mallocBuffer=y;d.clearCache=function(){for(var b=0;32>b;++b)D.UINT8[b].length=0,D.UINT16[b].length=0,D.UINT32[b].length=0,D.INT8[b].length=0,D.INT16[b].length=0,D.INT32[b].length=0,D.FLOAT[b].length=
0,D.DOUBLE[b].length=0,D.UINT8C[b].length=0,B[b].length=0,C[b].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":11,buffer:1,dup:30}],32:[function(b,c,d){var g;g=b("../color/sort.coffee");c.exports=function(b,c,d,l,m,t,u){var q;l||(l="asc");m instanceof Array||(m=[m]);d instanceof Array||(d=[d]);t&&void 0!==u&&"number"!==typeof u&&t.id.nesting.indexOf(u);for(u=q=0;u<d.length;){q=d[u];b=
t&&b.d3plus&&b.d3plus.sortKeys?b.d3plus.sortKeys[q]:b[q];c=t&&c.d3plus&&c.d3plus.sortKeys?c.d3plus.sortKeys[q]:c[q];q=t&&0<=m.indexOf(q)?g(b,c):b<c?-1:1;if(0!==q||u===d.length-1)break;u++}return"asc"===l?q:-q}},{"../color/sort.coffee":49}],33:[function(b,c,d){c.exports=function(b,c){var d;return b instanceof Array?(d=void 0===c||null===c?c:c.constructor,0<=b.indexOf(c)||0<=b.indexOf(d)):!1}},{}],34:[function(b,c,d){var g,f;g=b("./comparator.coffee");f=b("../core/fetch/sort.coffee");c.exports=function(b,
c,d,m,t,u){var q,n,r,p;if(!b||1>=b.length)return b||[];if(t)for(c||(c=t.order.value||t.size.value||t.id.value),d||(d=t.order.sort.value),m||(m=t.color.value||[]),r=0,p=b.length;r<p;r++)q=b[r],q.d3plus||(q.d3plus={}),n="d3plus"in q&&"d3plus"in q.d3plus?q.d3plus:q,q.d3plus.sortKeys=f(t,n,c,m,u);return b.sort(function(b,f){return g(b,f,c,d,m,t,u)})}},{"../core/fetch/sort.coffee":65,"./comparator.coffee":32}],35:[function(b,c,d){c.exports=function(b,c){if(void 0===c)return b;if(!1===c)return[];if(c instanceof
Array)return c;b instanceof Array||(b=[]);0<=b.indexOf(c)?b.splice(b.indexOf(c),1):b.push(c);return b}},{}],36:[function(b,c,d){var g;g=function(b){var c,d,l;c=g.tested;if(b in c)return c[b];d=0;for(l=!1;d<document.styleSheets.length;){c=document.styleSheets[d];if(c.href&&0<=c.href.indexOf(b)){l=!0;break}d++}return l};g.tested={};c.exports=g},{}],37:[function(b,c,d){c.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],38:[function(b,c,d){d=b("./ie.js");b("./touch.coffee")?c.exports=
{click:"click",down:"touchstart",up:"touchend",over:d?"mouseenter":"mouseover",out:d?"mouseleave":"mouseout",move:"mousemove"}:c.exports={click:"click",down:"mousedown",up:"mouseup",over:d?"mouseenter":"mouseover",out:d?"mouseleave":"mouseout",move:"mousemove"}},{"./ie.js":37,"./touch.coffee":43}],39:[function(b,c,d){var g;g=function(){var b;b="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in
document.body.style?"-o-":"";g=function(){return b};return b};c.exports=g},{}],40:[function(b,c,d){c.exports="rtl"===d3.select("html").attr("dir")},{}],41:[function(b,c,d){c.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],42:[function(b,c,d){var g;
g=function(){var b,c,d,l;b=document.createElement("p");b.style.width="100%";b.style.height="200px";c=document.createElement("div");c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);l=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;l===b&&(b=c.clientWidth);document.body.removeChild(c);d=l-b;g=function(){return d};return d};c.exports=
g},{}],43:[function(b,c,d){c.exports="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1},{}],44:[function(b,c,d){c.exports=function(b){b=d3.hsl(b);.45<b.l&&(.8<b.s&&(b.s=.8),b.l=.45);return b.toString()}},{}],45:[function(b,c,d){c.exports=function(b,c){var d;void 0===c&&(c=.5);d=d3.hsl(b);c*=1-d.l;d.l+=c;d.s-=c;return d.toString()}},{}],46:[function(b,c,d){c.exports=function(b,c,d,k){d||(d=1);k||(k=1);b=d3.rgb(b);c=d3.rgb(c);return d3.rgb((d*b.r+k*c.r-d*k*c.r)/
(d+k-d*k),(d*b.g+k*c.g-d*k*c.g)/(d+k-d*k),(d*b.b+k*c.b-d*k*c.b)/(d+k-d*k)).toString()}},{}],47:[function(b,c,d){var g;g=b("./scale.coffee");c.exports=function(b,c){var d;d=b||Math.floor(20*Math.random());c=c||g;return c(d)}},{"./scale.coffee":48}],48:[function(b,c,d){c.exports=d3.scale.ordinal().range("#b22200 #282F6B #EACE3F #B35C1E #224F20 #5F487C #759143 #419391 #993F88 #e89c89 #ffee8d #afd5e8 #f7ba77 #a5c697 #c5b5e5 #d1d392 #bbefd0 #e099cf".split(" "))},{}],49:[function(b,c,d){c.exports=function(b,
c){var d,k;d=d3.hsl(b);k=d3.hsl(c);b=0===d.s?361:d.h;c=0===k.s?361:k.h;return b===c?d.l-k.l:b-c}},{}],50:[function(b,c,d){c.exports=function(b){b=d3.rgb(b);return 128<=(299*b.r+587*b.g+114*b.b)/1E3?"#444444":"#f7f7f7"}},{}],51:[function(b,c,d){c.exports=function(b){var c;b=(b+"").replace(RegExp(" ","g"),"");0===b.indexOf("rgb")&&(b=b.split("(")[1].split(")")[0].split(",").slice(0,3).join(","));0===b.indexOf("hsl")&&(b=b.split(",")[2].split(")")[0]);c=d3.rgb(b).toString();b=0<=["black","#000","#000000",
"0%","0,0,0"].indexOf(b);return"#000000"!==c||b}},{}],52:[function(b,c,d){var g,f;g=b("../../client/ie.js");f=b("./wiki.coffee");b=function(b,c,f){f=f||"";if(g||"undefined"!==typeof InstallTrigger)console.log("[ D3plus ] "+c);else if(0===b.indexOf("group"))console[b]("%c[ D3plus ]%c "+c,"font-weight: 800;color: #b35c1e;margin-left: 0px;","font-weight:200;"+f);else console[b]("%c"+c,f+"font-weight:200;")};b.comment=function(b){this("log",b,"color:#aaa;")};b.error=function(b,c){this("groupCollapsed",
"ERROR: "+b,"font-weight:800;color:#D74B03;");this.stack();this.wiki(c);this.groupEnd()};b.group=function(b){this("group",b,"color:#888;")};b.groupCollapsed=function(b){this("groupCollapsed",b,"color:#888;")};b.groupEnd=function(){g||console.groupEnd()};b.log=function(b){this("log",b,"color:#444444;")};b.stack=function(){var b,c,f;g||(b=Error(),b.stack&&(f=b.stack.split("\n"),f=f.filter(function(b){return 0!==b.indexOf("Error")&&0>b.indexOf("d3plus.js:")&&0>b.indexOf("d3plus.min.js:")}),f.length&&
f[0].length&&(c=window.chrome?"at ":"@",b=f[0],0<=b.indexOf(c)&&(b=b.split(c)[1]),f=b.split(":"),3===f.length&&f.pop(),c=f.pop(),f=f.join(":").split("/"),f=f[f.length-1],this("log","line "+c+" of "+f+": "+b,"color:#D74B03;"))))};b.time=function(b){g||console.time(b)};b.timeEnd=function(b){g||console.timeEnd(b)};b.warning=function(b,c){this("groupCollapsed",b,"color:#888;");this.stack();this.wiki(c);this.groupEnd()};b.wiki=function(b){b&&(b in f&&(b=d3plus.repo+"wiki/"+f[b]),this("log","documentation: "+
b,"color:#aaa;"))};c.exports=b},{"../../client/ie.js":37,"./wiki.coffee":53}],53:[function(b,c,d){c.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",
descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",
margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",
tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",zoom:"Visualizations#zoom"}},{}],54:[function(b,c,d){var g=b("../../util/buckets.coffee"),f=b("../fetch/value.coffee"),h=b("../console/print.coffee");c.exports=function(b){b.dev.value&&h.time("getting color data range");var c=[];b.data.pool.forEach(function(d){d=parseFloat(f(b,d,b.color.value));"number"==typeof d&&!isNaN(d)&&
0>c.indexOf(d)&&c.push(d)});b.dev.value&&h.timeEnd("getting color data range");if(1<c.length){b.dev.value&&h.time("calculating color scale");c=d3.extent(c);if(0>c[0]&&0<c[1]){var d=b.color.range;3==d.length&&(c.push(c[1]),c[1]=0)}else 0<c[1]&&0<=c[0]?(d=b.color.heatmap,c=g(c,d.length)):(d=b.color.range.slice(0),0>c[0]?d.pop():d.shift());b.color.valueScale=d3.scale.sqrt().domain(c).range(d).interpolate(d3.interpolateRgb);b.dev.value&&h.timeEnd("calculating color scale")}else b.color.valueScale=null}},
{"../../util/buckets.coffee":203,"../console/print.coffee":52,"../fetch/value.coffee":67}],55:[function(b,c,d){var g=b("../fetch/value.coffee"),f=b("../console/print.coffee"),h=b("../../object/validate.coffee");c.exports=function(b,c){b.dev.value&&f.time("filtering data");var d=d3.keys(b.data.keys||{});"attrs"in b&&(d=d.concat(d3.keys(b.attrs.keys||{})));c=c.filter(function(c){return null!==g(b,c,b.id.value)});var t=b.types[b.type.value].requirements||[];b.data.filters.forEach(function(f){0<=d.indexOf(b[f].value)&&
0<=t.indexOf(f)&&(c=c.filter(function(c){var d=g(b,c,b[f].value);"y"===f&&b.y2.value&&null===d?d=g(b,c,b.y2.value):"x"===f&&b.x2.value&&null===d&&(d=g(b,c,b.x2.value));return"size"===f?"number"===typeof d:null!==d}))});var u=b.data.solo.length?"solo":"mute";b.data[u].length?b.data[u].forEach(function(d){function m(c){var f=!1;b[d][u].value.forEach(function(b){"function"===typeof b?f=b(c):b===c&&(f=!0)});return"solo"===u?f:!f}function r(c,f){if(!f&&b[d].nesting){var l=b[d].nesting;h(l)&&(l=d3.values(l));
for(var r=0;r<l.length;r++){var t=c.filter(function(c){return m(g(b,c,l[r]))});t.length&&(c=t)}}else c=c.filter(function(c){return m(g(b,c,b[d].value))});return c}c=r(c);"id"===d&&("nodes"in b&&b.nodes.value&&(b.dev.value&&f.time("filtering nodes"),b.nodes.restricted=r(b.nodes.value),b.dev.value&&f.timeEnd("filtering nodes")),"edges"in b&&b.edges.value&&(b.dev.value&&f.time("filtering edges"),b.edges.restricted=b.edges.value.filter(function(c){return 2===r([c[b.edges.source],c[b.edges.target]]).length}),
b.dev.value&&f.timeEnd("filtering edges")))}):"nodes"in b&&(b.nodes.restricted=void 0,b.edges.restricted=void 0);b.dev.value&&f.timeEnd("filtering data");return c}},{"../../object/validate.coffee":171,"../console/print.coffee":52,"../fetch/value.coffee":67}],56:[function(b,c,d){var g=b("./nest.js"),f=b("../fetch/value.coffee"),h=b("../console/print.coffee"),k=b("../../util/uniques.coffee");c.exports=function(b){var c;b.data.time={values:[]};if(b.time&&b.time.value){b.dev.value&&(c="analyzing time periods",
h.time(c));b.data.time.values=k(b.data.value,b.time.value,f,b);b.data.time.values.sort(function(b,c){return b-c});var d=[];b.data.time.values.forEach(function(c,f){0!==f&&(d.push(c-b.data.time.values[f-1]),f===b.data.time.values.length-1&&(b.data.time.total=c-b.data.time.values[0]))});d=d3.min(d);b.data.time.step=d;var u="Milliseconds Seconds Minutes Hours Date Month FullYear".split(" "),q=[1E3,60,60,24,30,12,1];b.data.time.periods=u;var n=function(c,f,d){b.data.time.stepDivider||(arr=q.slice(0,d),
b.data.time.stepDivider=arr.length?arr.reduce(function(b,c){return b*c}):1);return Math.round(Math.floor(f-c)/b.data.time.stepDivider)},r=b.data.time.total;u.forEach(function(c,f){var g="Date"===c?28:q[f];!b.data.time.stepType&&(f===u.length-1||Math.round(d)<g)&&(b.data.time.stepType=c,b.data.time.stepIntervals=n(b.data.time.values[0],b.data.time.values[b.data.time.values.length-1],f));!b.data.time.totalType&&(f===u.length-1||Math.round(r)<g)&&(b.data.time.totalType=c);d/=g;r/=g});b.data.time.values.forEach(function(c,
f){0!==f?b.data.time.dataSteps.push(n(b.data.time.values[0],c,u.indexOf(b.data.time.stepType))):b.data.time.dataSteps=[0]});var p=b.time.format.value,w=b.format.locale.value,v=[function(b){return b.getMilliseconds()},function(b){return b.getSeconds()},function(b){return b.getMinutes()},function(b){return b.getHours()},function(b){return 1!=b.getDate()},function(b){return b.getMonth()},function(b){return!0}];b.data.time.functions=v;var y=function(b,c,f){if(b===c)return f&&w.timeFormat[b+"Small"]?w.timeFormat[b+
"Small"]:w.timeFormat[b];if(4<=u.indexOf(b)||3>=u.indexOf(c))return w.timeFormat[c+"-"+b];c="Date"===c?w.timeFormat[c]:w.timeFormat[c+"-Date"];return"Hours"===b?c+" "+w.timeFormat[b]:c+" "+w.timeFormat["Hours-"+b]};b.data.time.getFormat=y;if(p)"string"===typeof p?b.data.time.format=d3.locale(w.format).timeFormat(p):"function"===typeof p?b.data.time.format=p:p instanceof Array&&(b.data.time.format=d3.locale(w.format).timeFormat.multi(p)),b.data.time.multiFormat=b.data.time.format;else{for(var p=b.data.time.stepType,
A=b.data.time.totalType,x=[],z=u.indexOf(p);z<=u.indexOf(A);z++){var D=z-1<u.indexOf(p)?u[z]:u[z-1],D=y(D,u[z],u[z]===D&&p!==A);x.push([D,v[z]])}b.data.time.format=d3.locale(w.format).timeFormat(y(p,A));1<x.length?(x[x.length-1][1]=function(b){return!0},b.data.time.multiFormat=d3.locale(w.format).timeFormat.multi(x)):b.data.time.multiFormat=b.data.time.format}b.data.time.ticks=[];v=d3.min(b.data.time.values);y=d3.max(b.data.time.values);for(p=0;p<=b.data.time.stepIntervals;p++)A=new Date(v),A["set"+
b.data.time.stepType](A["get"+b.data.time.stepType]()+p),A<=y&&b.data.time.ticks.push(A);b.dev.value&&h.timeEnd(c)}b.dev.value&&(c="nesting data by time and depths",h.time(c));b.data.nested={};if(0===b.data.time.values.length)b.data.nested.all={},b.id.nesting.forEach(function(c,f){var d=b.id.nesting.slice(0,f+1);b.data.nested.all[c]=g(b,b.data.value,d)});else{var B=b.data.value.reduce(function(c,d){var g=f(b,d,b.time.value).getTime();g in c||(c[g]=[]);c[g].push(d);return c},{});b.data.time.values.forEach(function(c){var f=
c.getTime();b.data.nested[f]={};b.id.nesting.forEach(function(c,d){var h=b.id.nesting.slice(0,d+1);b.data.nested[f][c]=g(b,B[f],h)})})}b.dev.value&&h.timeEnd(c)}},{"../../util/uniques.coffee":209,"../console/print.coffee":52,"../fetch/value.coffee":67,"./nest.js":60}],57:[function(b,c,d){var g;g=b("../fetch/value.coffee");c.exports=function(b,c,d){var l,m,t,u,q;l=d3.nest();if(b.id.grouping.value)for(void 0===d&&(d=b.id.nesting),m=t=0,u=d.length;t<u;m=++t)q=d[m],m<b.depth.value&&function(c){return l.key(function(d){return g(b,
d.d3plus,c)})}(q);u=[];m=0;for(t=c.length;m<t;m++)d=c[m],(q=b.size.value?g(b,d,b.size.value):1)&&"number"===typeof q&&0<q&&(delete d.d3plus.r,delete d.d3plus.x,delete d.d3plus.y,u.push({d3plus:d,id:d[b.id.value],value:q}));return l.entries(u)}},{"../fetch/value.coffee":67}],58:[function(b,c,d){var g,f,h=[].indexOf||function(b){for(var c=0,f=this.length;c<f;c++)if(c in this&&this[c]===b)return c;return-1};g=b("../console/print.coffee");f=b("../../object/validate.coffee");c.exports=function(b,c){var d,
t,u,q,n,r,p,w;r=c+" key analysis";b.dev.value&&g.time(r);b[c].keys={};d=function(g){var n,p,r,t;if(g instanceof Array){t=[];p=0;for(r=g.length;p<r;p++)n=g[p],t.push(d(n));return t}if(f(g)){p=[];for(n in g)r=g[n],0===n.indexOf("d3plus")||0<=h.call(b[c].keys,n)||null===r?p.push(void 0):p.push(b[c].keys[n]=typeof r);return p}};if(f(b[c].value))for(t in q=d3.keys(b[c].value).length===b.id.nesting.length,n=b[c].value,n)if(p=n[t],q&&0<=b.id.nesting.indexOf(t)&&f(p))for(u in p)w=p[u],d(w);else d(p);else for(t in u=
b[c].value,u)p=u[t],d(p);if(b.dev.value)return g.time(r)}},{"../../object/validate.coffee":171,"../console/print.coffee":52}],59:[function(b,c,d){var g,f;g=b("../console/print.coffee");f=b("../../object/validate.coffee");c.exports=function(b,c,d){var m,t,u;(m=b.dev.value)&&g.time("loading "+c);u=b[c].url;b[c].filetype.value?t=b[c].filetype.value:(t=u.slice(u.length-5).split("."),(t=1<t.length?t[1]:!1)?("txt"===t&&(t="text"),0>b[c].filetype.accepted.indexOf(t)&&(t="json")):t="json");return("dsv"===
t?d3.dsv(b[c].delimiter.value,"text/plain"):d3[t])(u,function(q,n){var r,p;if(!q&&n){if("function"===typeof b[c].callback){if(p=b[c].callback(n))if(f(p)&&c in p)for(r in p)r in b&&(b[r].value=p[r]);else b[c].value=p}else b[c].value=n;0>["json"].indexOf(t)&&b[c].value.forEach(function(b){var c;c=[];for(r in b)isNaN(b[r])?"false"===b[r].toLowerCase()?c.push(b[r]=!1):"true"===b[r].toLowerCase()?c.push(b[r]=!0):"null"===b[r].toLowerCase()?c.push(b[r]=null):"undefined"===b[r].toLowerCase()?c.push(b[r]=
void 0):c.push(void 0):c.push(b[r]=parseFloat(b[r]));return c});b[c].changed=!0;b[c].loaded=!0}else b.error.internal='Could not load data from: "'+u+'"';m&&g.timeEnd("loading "+c);return d()})}},{"../../object/validate.coffee":171,"../console/print.coffee":52}],60:[function(b,c,d){var g=b("../fetch/value.coffee"),f=b("../../object/validate.coffee"),h=b("../../util/uniques.coffee"),k=function(b,c){function d(b){b instanceof Array?b.forEach(d):f(b)&&c in b&&(b[c]instanceof Array?b[c].forEach(d):g.push(b))}
var g=[];d(b);return g},l=function(b){function c(b){for(var d=0;d<b.length;d++){var g=b[d];g&&(g.constructor===Array?c(g):f.push(g))}}var f=[];c(b);return h(f)},m=function(b){return b.values&&b.values.length?(b.children=b.values.map(function(b){return m(b)}),delete b.values,b):b.values?b.values:b};c.exports=function(b,c,f,d){void 0===d&&(d=!0);var r=d3.nest(),p=[],w="temp"in b?["active","temp","total"]:[];f.length?f.forEach(function(c,f){r.key(function(f){return g(b,f,c)})}):r.key(function(b){return!0});
d&&b.axes&&b.axes.discrete&&(!b.time||b[b.axes.discrete].value!==b.time.value)&&r.key(function(c){return g(b,c,b[b.axes.discrete].value)});d=f.length&&0<=b.id.nesting.indexOf(f[f.length-1]);var v=f.length&&d?f.length-1:0;r.rollup(function(c){if(1===c.length&&"d3plus"in c[0])return p.push(c[0]),c[0];c=c.reduce(function(b,c){if(c.values instanceof Array)return b.concat(c.values);b.push(c);return b},[]);var d={d3plus:{data:{},depth:v}};if(d3.sum(c,function(b){return"d3plus"in b&&b.d3plus.merged?1:0})===
c.length)for(var m=0;m<c.length;m++){var n=c[m];d.d3plus.merged||(d.d3plus.merged=[]);d.d3plus.merged=d.d3plus.merged.concat(n.d3plus.merged);n.d3plus.text&&(d.d3plus.text=n.d3plus.text)}for(m=0;m<w.length;m++){var r=w[m],n=b.aggs&&b.aggs.value[u]?b.aggs.value[u]:"sum";d.d3plus[r]="d3plus"in c[0]&&r in c[0].d3plus?d3.sum(c,function(b){return b.d3plus[r]}):"function"===typeof n?n(c):d3[n](c,function(c){var f="total"===r?1:0;b[r].value&&(f=g(b,c,b[r].value),"number"!==typeof f&&(f=f?1:0));return f})}for(var u in b.data.keys){if(u in
d.d3plus.data)d[u]=d.d3plus[u];else{var n=b.aggs&&b.aggs.value[u]?b.aggs.value[u]:"sum",y=typeof n,G=b.data.keys[u],m=0<=b.id.nesting.indexOf(u),H="time"in b&&u===b.time.value;u in d.d3plus.data?d[u]=d.d3plus[u]:"function"===y?d[u]=b.aggs.value[u](c):H?d[u]=l(h(c,u)):b.axes&&b.axes.discrete&&b[b.axes.discrete].value===u?d[u]=h(c,u):"number"!==G||"string"!==y||m?(n=k(c,u),y=1===n.length?n[0][u]:h(n,u),1===n.length?d[u]=y:y&&y.length?(y instanceof Array||(y=[y]),m&&b.id.nesting.indexOf(u)>v?d[u]=n:
d[u]=y):m&&b.id.nesting.indexOf(u)-1>=v&&(!("endPoint"in d.d3plus)||d.d3plus.endPoint>v)&&(d.d3plus.endPoint=v)):(m=c.map(function(b){return b[u]}),m=m.filter(function(b){return typeof b===G}),m.length&&(d[u]=d3[n](m)))}u in d&&d[u]instanceof Array&&1===d[u].length&&(d[u]=d[u][0])}for(m=0;m<f.length;m++)n=f[m],n in d||(d[n]=g(b,c[0],n));p.push(d);return d});var y=function(c,d,g){if(c.children){"number"==b.data.keys[f[d]]&&(c.key=parseFloat(c.key));g[f[d]]=c.key;delete c.key;for(var h in g)c[h]=g[h];
d++;c.children.forEach(function(b){y(b,d,g)})}},r=r.entries(c).map(m).map(function(b){y(b,0,{});return b});return p}},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"../fetch/value.coffee":67}],61:[function(b,c,d){var g=b("../../array/sort.coffee"),f=b("./nest.js"),h=b("../fetch/value.coffee");b("../fetch/color.coffee");var k=b("../fetch/text.js");c.exports=function(b,c,d){var u;u=!1===b.size.threshold.value?0:"number"===typeof b.size.threshold.value?b.size.threshold.value:"function"===
typeof b.size.threshold.value?b.size.threshold.value(b):"number"===typeof b.types[b.type.value].threshold?b.types[b.type.value].threshold:"function"===typeof b.types[b.type.value].threshold?b.types[b.type.value].threshold(b):.02;if("number"==typeof u&&0<u){var q=[],n=0===b.depth.value?0:{},r=[],p=[],w=[],v={},y=d3.nest();d&&y.key(function(c){return h(b,c,d)});y.rollup(function(c){var f=c.length;b.aggs.value[b.size.value]?"function"==typeof b.aggs.value[b.size.value]?f=b.aggs.value[b.size.value](c):
"string"==typeof b.aggs.value[b.size.value]&&(f=d3[b.aggs.value[b.size.value]](c,function(c){return h(b,c,b.size.value)})):f=d3.sum(c,function(c){return h(b,c,b.size.value)});c=d?h(b,c[0],d):"all";return v[c]=f}).entries(c);c.forEach(function(c){var f=h(b,c,b.id.value),g=h(b,c,b.size.value),k=d?h(b,c,d):"all";g/v[k]>=u&&0>q.indexOf(f)&&(q.push(f),b.depth.value&&(c=h(b,c,b.id.nesting[b.depth.value-1]),0>p.indexOf(c)&&p.push(c)))});c=c.filter(function(c){var f=h(b,c,b.id.value),f=0<=q.indexOf(f),d=
b.depth.value?h(b,c,b.id.nesting[b.depth.value-1]):null;null!==d&&0>p.indexOf(d)&&0>w.indexOf(d)&&w.push(d);if(!f){var g=h(b,c,b.size.value);0<g&&(0===b.depth.value?g>n&&(n=g):(d in n||(n[d]=0),g>n[d]&&(n[d]=g)),r.push(c))}return f});1<r.length?(r=g(r,b.size.value,"desc",[],b),y=b.id.nesting.slice(0,b.depth.value),0<=b.types[b.type.value].requirements.indexOf(b.axes.discrete)&&y.push(b[b.axes.discrete].value),y=f(b,r,y),y.forEach(function(c){var f=b.id.nesting[b.depth.value-1],d=h(b,c,f);children=
f?r.filter(function(c){return h(b,c,f)===d}):r;if(1<children.length){b.id.nesting.forEach(function(f,d){if(b.depth.value==d){var g=c[f];c[f]="string"===typeof g?"d3plus_other_"+g:"d3plus_other"}else d>b.depth.value&&delete c[f]});b.color.value&&"string"===b.color.type&&(c[b.color.value]=0===b.depth.value?b.color.missing:h(b,d,b.color.value,f));b.icon.value&&(c[b.icon.value]=h(b,d,b.icon.value,f));d&&(c.d3plus.depth=b.depth.value);var g;if(0===b.depth.value)g=b.format.value(b.format.locale.value.ui.values,
{key:"threshold",vars:b}),g+=" < "+b.format.value(n,{key:b.size.value,vars:b});else if(g=k(b,c,b.depth.value-1),g=g.length?g[0].split(" < ")[0]:b.format.value(b.format.locale.value.ui.values,{key:"threshold",vars:b}),d,0>w.indexOf(d))g+=" < "+b.format.value(n[d],{key:b.size.value,vars:b});if(d,0>w.indexOf(d))g+=" ("+b.format.value(100*u,{key:"share",vars:b})+")";c.d3plus.threshold=n;c.d3plus.merged=children;b.text.value&&(c[b.text.value]=g);c.d3plus.text=g}})):y=r;return c.concat(y)}return c}},{"../../array/sort.coffee":34,
"../fetch/color.coffee":63,"../fetch/text.js":66,"../fetch/value.coffee":67,"./nest.js":60}],62:[function(b,c,d){var g;g=b("../../font/sizes.coffee");c.exports=function(b,c){var d,l,m,t,u,q,n,r,p,w,v,y,A,x,z,D;D=c.values||b.data.time.ticks;y=c.style||{};u=c.limit||b.width.value;A={};r=b.data.time.periods;v=b.data.time.stepType;x=b.data.time.totalType;m=b.data.time.functions;t=b.data.time.getFormat;q=b.format.locale.value.format;if(b.time.format.value)A.format=b.data.time.format,A.values=D,A.sizes=
g(D.map(function(b){return A.format(b)}),y);else for(n=r.indexOf(v);n<=r.indexOf(x);){z=D.filter(function(b){var c,f;if(n===r.indexOf(v))return!0;c=!0;f=n-1;if(0>n)return!0;for(;f>=r.indexOf(v)&&c;)c=!m[f](b),f--;return c});if(r[n]===x)l=d3.locale(q).timeFormat(t(r[n],x));else{p=n;for(l=[];p<=r.indexOf(x);)d=p-1<r.indexOf(v)?p:p-1,d=r[d],w=r[p]===d&&v!==x,d=t(d,r[p],w),l.push([d,m[p]]),p++;l[l.length-1][1]=function(){return!0};l=d3.locale(q).timeFormat.multi(l)}p=g(z.map(function(b){return l(b)}),
y);if(d3.sum(p,function(b){return b.width})<u||n===r.indexOf(x)){A.format=l;A.values=z;A.sizes=p;break}n++}return A}},{"../../font/sizes.coffee":101}],63:[function(b,c,d){var g,f,h,k,l,m,t;g=b("./value.coffee");k=b("../../color/random.coffee");m=b("../../color/validate.coffee");t=b("../../object/validate.coffee");l=b("../../util/uniques.coffee");c.exports=function(b,c,d){var k,m,w;if(t(c)&&"d3plus"in c&&"color"in c.d3plus)return c.d3plus.color;void 0===d&&(d=b.id.value);"number"===typeof d&&(d=b.id.nesting[d]);
if(b.color.value){m=[];for(w=b.id.nesting.indexOf(d);0<=w;){k=b.id.nesting[w];k=l(c,b.color.value,g,b,k);1===k.length&&(k=k[0]);if(!(k instanceof Array)&&void 0!==k&&null!==k){c=f(b,c,k,d);0>m.indexOf(c)&&m.push(c);break}w--}return 1===m.length?m[0]:b.color.missing}return h(b,c,d)};f=function(b,c,f,d){return f?b.color.valueScale?b.color.valueScale(f):m(f)?f:h(b,f,d):b.color.value&&"function"===typeof b.color.valueScale?b.color.valueScale(0):h(b,c,d)};h=function(b,c,f){t(c)&&(c=g(b,c,f));c instanceof
Array&&(c=c[0]);return k(c,b.color.scale.value)}},{"../../color/random.coffee":47,"../../color/validate.coffee":51,"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"./value.coffee":67}],64:[function(b,c,d){var g=b("../data/filter.js"),f=b("../data/nest.js"),h=b("../console/print.coffee"),k=b("../../string/format.js"),l=b("../../string/list.coffee");c.exports=function(b,c,d){if(!b.data.value)return[];void 0===d&&(d=b.depth.value);var q=b.id.nesting[d];!c||c instanceof Array||(c=[c]);
if(!c&&"time"in b){c=[];var n=b.time.solo.value.length?"solo":"mute",r=b.time[n].value;if(r.length){c=[];for(var p=0;p<r.length;p++){var w=r[p];if("function"===typeof w)for(var v=0;v<b.data.time.values.length;v++){var y=b.data.time.values[v].getTime();w(y)&&c.push(y)}else w.constructor===Date?c.push((new Date(w)).getTime()):(w+="",4===w.length&&parseInt(w)+""===w&&(w+="/01/01"),w=new Date(w),"Invalid Date"!==w&&c.push(w.getTime()))}"mute"===n&&(c=b.data.time.values.filter(function(b){return 0>c.indexOf(b.getTime())}))}else c.push("all")}else c=
["all"];if(0<=c.indexOf("all")&&b.data.time.values.length)for(c=b.data.time.values.slice(0),n=0;n<c.length;n++)c[n]=c[n].getTime();n=[b.type.value,q,d].concat(b.data.filters).concat(c);w=b.data.solo.length?"solo":"mute";r=d3.keys(b.data.cache);p=b.types[b.type.value].filter||void 0;if(b.data[w].length)for(v=0;v<b.data[w].length;v++){var y=b.data[w][v],A=b[y][w].value.slice(0);A.unshift(y);A.unshift(w);n=n.concat(A)}b.axes&&b.axes.discrete&&n.push(b.axes.discrete);n=n.join("_");b.data.cacheID=n;for(w=
0;w<r.length;w++)if(r[w].split("_").slice(1).join("_")===n){n=(new Date).getTime()+"_"+n;b.data.cache[n]=b.data.cache[r[w]];delete b.data.cache[r[w]];break}if(b.data.cache[n])b.dev.value&&h.comment("data already cached"),w=b.data.cache[n].data,"nodes"in b&&(b.nodes.restricted=b.data.cache[n].nodes,b.edges.restricted=b.data.cache[n].edges),"function"===typeof p&&(w=p(b,w));else{v=[];w=[];if(b.data.value&&b.data.value.length)for(y=0;y<c.length;y++)A=c[y],b.data.nested[A]?w=w.concat(b.data.nested[A][q]):
v.push(A);if(0===w.length&&v.length&&!b.error.internal)1<v.length&&(v=d3.extent(v)),v=v.map(function(c){return b.data.time.format(new Date(c))}),v=v.join(" - "),d=b.format.locale.value.error.dataYear,v=l(v,b.format.locale.value.ui.and),b.error.internal=k(d,v),b.time.missing=!0;else{b.time&&(b.time.missing=!1);if(1<c.length){var x=!1;["x","y","x2","y2"].forEach(function(c){b[c].value===b.time.value&&"discrete"===b[c].scale.value&&(x=!0)});x||(d=b.id.nesting.slice(0,d+1),w=f(b,w,d))}w=w?g(b,w):[];20===
r.length&&(r.sort(),delete b.data.cache[r[0]]);n=(new Date).getTime()+"_"+n;b.data.cache[n]={data:w};"nodes"in b&&(b.data.cache[n].nodes=b.nodes.restricted,b.data.cache[n].edges=b.edges.restricted);"function"===typeof p&&(w=p(b,w));b.dev.value&&h.comment("storing data in cache")}}return w}},{"../../string/format.js":172,"../../string/list.coffee":173,"../console/print.coffee":52,"../data/filter.js":55,"../data/nest.js":60}],65:[function(b,c,d){var g,f,h;h=b("./value.coffee");g=b("./color.coffee");
f=b("./text.js");c.exports=function(b,c,d,t,u){var q,n,r,p,w,v;d instanceof Array||(d=[d]);t instanceof Array||(t=[t]);b&&(void 0===u?u=b.id.value:"number"!==typeof u&&(u=b.id.nesting.indexOf(u)));w={};n=0;for(p=d.length;n<p;n++)r=d[n],v=b?0<=t.indexOf(r)?g(b,c,u):r===b.text.value?f(b,c,u):3===d3.keys(c).length&&c.d3plus&&c.key&&c.values?h(b,c.values.map(function(b){return b.d3plus}),r,u):h(b,c,r,u):c[r],0<=[b.data.keys[r],b.attrs.keys[r]].indexOf("number")?(q=b.order.agg.value||b.aggs.value[r]||
"sum",v instanceof Array||(v=[v]),v=d3[q](v)):(v instanceof Array&&(v=v[0]),v="string"===typeof v?v.toLowerCase():v),w[r]=v;return w}},{"./color.coffee":63,"./text.js":66,"./value.coffee":67}],66:[function(b,c,d){var g=b("./value.coffee"),f=b("../../object/validate.coffee"),h=b("../../util/uniques.coffee");c.exports=function(b,c,d){"number"!==typeof d&&(d=b.depth.value);var t=b.id.nesting[d],u;b.text.nesting&&f(b.text.nesting)?u=b.text.nesting[t]?b.text.nesting[t]:b.text.value:(u=[],b.text.value&&
d===b.depth.value&&u.push(b.text.value),u.push(t));u instanceof Array||(u=[u]);var q=[];if(f(c)&&"d3plus"in c&&c.d3plus.text)q.push(c.d3plus.text.toString()),q.push(b.format.value(c.d3plus.text.toString(),{vars:b,data:c}));else{var n=f(c)?c:void 0;n&&c[b.id.value]instanceof Array?c=c[b.id.value]:c instanceof Array||(c=[c]);u.forEach(function(f){var d=h(c,f,g,b,t);d.length&&(1<d.length&&(d=d.filter(function(b){return b instanceof Array||"string"===typeof b&&0>b.indexOf(" < ")})),d=d.map(function(c){if(c instanceof
Array)return c=c.filter(function(b){return b}),c.map(function(c){return b.format.value(c.toString(),{vars:b,data:n,key:f})});if(c)return b.format.value(c.toString(),{vars:b,data:n,key:f})}),1===d.length&&(d=d[0]),q.push(d))})}return q}},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"./value.coffee":67}],67:[function(b,c,d){var g,f,h,k,l,m,t,u,q;u=b("../../object/validate.coffee");t=b("../../util/uniques.coffee");m=function(b,c,d,k){var l,m;l=u(c);if("function"===typeof d&&l)return d(c,
b);if(l){if(d in c)return c[d];l=b.data.cacheID+"_"+k;g(c,l,b);if(d in c.d3plus.data[l])return c.d3plus.data[l][d];if(k in c)c=c[k];else if(b.id.value in c){c=c[b.id.value];k!==d&&(m=h(b,c,k,b.id.value));if(null===m||void 0===m)m=f(b,c,k,b.id.value);if(null===m||void 0===m)return null;if(k===d)return m;c=m}else return null}c instanceof Array&&!u(c[0])&&(c=t(c));return c instanceof Array&&u(c[0])&&(m=t(c,d),m.length)||(m=h(b,c,d,k))?m:m=f(b,c,d,k)};h=function(b,c,f,d){var g;b.data.viz instanceof Array&&
f in b.data.keys&&(g=t(l(b.data.viz,c,d),f));return g&&g.length?g:null};f=function(b,c,f,d){var g;if("attrs"in b&&b.attrs.value&&f in b.attrs.keys)if(b=u(b.attrs.value)&&d in b.attrs.value?b.attrs.value[d]:b.attrs.value,b instanceof Array){if(f=t(l(b,c,d),f),f.length)return f}else if(c instanceof Array){var h,k;if(g in b){k=[];d=0;for(h=c.length;d<h;d++)g=c[d],k.push(b[g]);c=k}else c=void 0;b=[c];if(b.length&&(f=t(b,f),f.length))return f}else if(c in b)return b[c][f];return null};l=function(b,c,f){return c instanceof
Array?b.filter(function(b){return 0<=c.indexOf(b[f])}):b.filter(function(b){return b[f]===c})};g=function(b,c,f){"d3plus"in b||(b.d3plus={});"data"in b.d3plus||(b.d3plus.data={});if(f.data.changed||f.attrs&&f.attrs.changed||!(c in b.d3plus.data))b.d3plus.data[c]={};return b};q=function(b,c,f,d,g){var h,k,l,m,t;if(null===g)return g;t="time"in b&&b.time.value===d;g instanceof Array||(g=[g]);k=l=0;for(m=g.length;l<m;k=++l)h=g[k],t&&null!==h&&h.constructor!==Date&&(h+="",4===h.length&&parseInt(h)+""===
h&&(h+="/01/01"),h=new Date(h),"Invalid Date"!==h&&(g[k]=h));1===g.length&&(g=g[0]);null===g||!u(c)||"string"!==typeof d||d in c||(b=b.data.cacheID+"_"+f,c.d3plus.data[b][d]=g);return g};k=function(b,c,f,d){var g,h,k,l,z;z=[];h=0;for(k=c.length;h<k;h++)g=c[h],u(g)?(l=m(b,g,f,d),z.push(q(b,g,d,f,l))):z.push(g);"number"!==typeof z[0]&&(z=t(z));return 1===z.length?z[0]:z};c.exports=function(b,c,f,d){var g;if(!f)return null;if("number"===typeof f)return f;g=u(c);d||(d=b.id.value);g&&c.values instanceof
Array?g=k(b,c.values,f,d):g&&c[f]instanceof Array?g=k(b,c[f],f,d):c instanceof Array?g=k(b,c,f,d):(g=m(b,c,f,d),g=q(b,c,d,f,g));return g}},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209}],68:[function(b,c,d){c.exports=function(b){var c,d;0>["div","svg"].indexOf(b)&&(b="div");c="div"===b?{}:{position:"absolute"};d=d3.select("body").selectAll(b+".d3plus_tester").data([0]);d.enter().append(b).attr("class","d3plus_tester").style({position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",
display:"block"}).attr(c);return d}},{}],69:[function(b,c,d){c.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",
set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",
methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},
lowercase:"a an and as at but by for from if in into near nor of on onto or per that the to with via vs vs.".split(" "),message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",
order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d",
"Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",loading:"loading...",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",primary:"primary connections",share:"share",total:"total",values:"values"},
uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs GDP HVAC ID IT R&D TV UI".split(" "),visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",tree_map:"Tree Map"}}},{}],70:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," \u20ac"],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",
time:"%H:%M:%S",periods:["AM","PM"],days:"domingo lunes martes mi\u00e9rcoles jueves viernes s\u00e1bado".split(" "),shortDays:"dom lun mar mi\u00e9 jue vie s\u00e1b".split(" "),months:"enero febrero marzo abril mayo junio julio agosto septiembre octubre noviembre diciembre".split(" "),shortMonths:"ene feb mar abr may jun jul ago sep oct nov dic".split(" ")},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",deprecated:"el m\u00e9todo {0} ha sido eliminado, por favor, actualiza tu c\u00f3digo para utilizar {1}.",
noChange:"{0} no se actualiza porque no cambi\u00f3.",noContainer:"no se puede encontrar un contenedor en la p\u00e1gina correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los v\u00ednculos no se pueden enlazar con si mismos. eliminando autom\u00e1ticamente el v\u00ednculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},
error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes librer\u00edas: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes librer\u00edas: {1}.",method:"{0} visualizaciones requieren establecer el \u200b\u200bm\u00e9todo {1}.",methods:"{0} visualizaciones requieren establecer los siguientes m\u00e9todos: {1}."},
lowercase:"una y en pero en de o el la los las para a con".split(" "),method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"\u00edcono",id:"id",height:"alto",labels:"r\u00f3tulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",mute:"ocultar",order:"orden",search:"b\u00fasqueda",shape:"forma",size:"tama\u00f1o",solo:"aislar",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"l\u00ednea de tiempo",total:"segmentos totales",
type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"#ERROR!",mode:"modo"},time:["fecha","d\u00eda","mes","hora","a\u00f1o"],visualization:{bubbles:"Burbujas",chart:"Tabla",geo_map:"Mapa Geo",line:"L\u00ednea Solar",network:"Red",rings:"Anillos",scatter:"Gr\u00e1fico De Dispersi\u00f3n",stacked:"\u00c1rea Apilada",tree_map:"Mapa de \u00c1rbol",bar:"Gr\u00e1fico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Gr\u00e1fico de Pastel",table:"Tabla"},ui:{and:"y",back:"atr\u00e1s",collapse:"click para cerrar",
error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} m\u00e1s",moreInfo:"clic para m\u00e1s informaci\u00f3n",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"porcentaje",total:"total",values:"valores",including:"Incluyendo",or:"o"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},
uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs PIB HVAC ID TI I&D TV UI".split(" ")}},{}],71:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," \u20ac"],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),shortDays:"dim. lun. mar. mer. jeu. ven. sam.".split(" "),months:"janvier f\u00e9vrier mars avril mai juin juillet ao\u00fbt septembre octobre novembre d\u00e9cembre".split(" "),
shortMonths:"janv. f\u00e9vr. mars avr. mai juin juil. ao\u00fbt sept. oct. nov. d\u00e9c.".split(" ")},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",deprecated:"{0} a \u00e9t\u00e9 \u00e9limin\u00e9 de la version courante, mettez \u00e0 jour votre code source avec {1}.",noChange:"{0} n'a pas \u00e9t\u00e9 mis \u00e0 jour car inchang\u00e9.",noContainer:"impossible de trouver un contenant correspondant \u00e0 {0}.",of:"de",oldStyle:"les propri\u00e9t\u00e9s de {0} ont \u00e9t\u00e9 imbriqu\u00e9es dans .{1}().",
sameEdge:"un arc ne peut pas boucler sur lui m\u00eame. L'auto-r\u00e9f\u00e9rence est automatiquement \u00e9limin\u00e9e {0}.",set:"{0} a \u00e9t\u00e9 mis \u00e0 jour.",setLong:"{0} a \u00e9t\u00e9 mis \u00e0 jour \u00e0 {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de donn\u00e9es disponibles",
dataYear:"Pas de donn\u00e9es disponibles pour {0}.",lib:"La visualisation de {0} n\u00e9cessite le chargement de la librairie {1}.",libs:"La visualisation de {0} n\u00e9cessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la d\u00e9finition de {1}.",methods:"La visualisation du {0} exige les d\u00e9finitions de {1}."},lowercase:"un une de des et mais les ou pour avec comme par vers si dans pr\u00e8s ni dessus que le la via sinon alors".split(" "),method:{active:"segments actifs",
color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"\u00edcone",id:"id",height:"hauteur",labels:"labels",legend:"l\u00e9gende",margin:"marge",messages:"messages",mute:"cacher",order:"ordre",search:"recherche",shape:"format",size:"taille",solo:"isoler",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode"},time:["ann\u00e9e","date","jour","heure",
"mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geo_map:"Carte",line:"Courbes",network:"R\u00e9seau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empil\u00e9es",tree_map:"Arbre",bar:"Diagramme en barres",box:"Bo\u00eetes \u00e0 Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour r\u00e9duire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de r\u00e9sultat correspondant \u00e0 {0}.",
primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou"},message:{data:"analyse des donn\u00e9es",draw:"trac\u00e9 en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"r\u00e9initialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs PIB HVAC ID IT TV UI".split(" ")}},{}],72:[function(b,c,d){c.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["\u20a9",
""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["\uc624\uc804","\uc624\ud6c4"],days:"\uc77c\uc694\uc77c \uc6d4\uc694\uc77c \ud654\uc694\uc77c \uc218\uc694\uc77c \ubaa9\uc694\uc77c \uae08\uc694\uc77c \ud1a0\uc694\uc77c".split(" "),shortDays:"\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0".split(""),months:"1\uc6d4 2\uc6d4 3\uc6d4 4\uc6d4 5\uc6d4 6\uc6d4 7\uc6d4 8\uc6d4 9\uc6d4 10\uc6d4 11\uc6d4 12\uc6d4".split(" "),shortMonths:"1\uc6d4 2\uc6d4 3\uc6d4 4\uc6d4 5\uc6d4 6\uc6d4 7\uc6d4 8\uc6d4 9\uc6d4 10\uc6d4 11\uc6d4 12\uc6d4".split(" ")},
dev:{accepted:"{0} {1}, \ub2e4\uc74c \uc911 \ud558\ub098\ub97c \uc0ac\uc6a9\ud558\uc2ed\uc2dc\uc624\uc5d0 \ub300\ud55c \ud5c8\uc6a9 \uac12\uc774 \uc544\ub2d9\ub2c8\ub2e4 : {2}.",deprecated:"{0} \uba54\uc18c\ub4dc\uac00 \uc81c\uac70 \ub41c, \uc0ac\uc6a9\ud558\ub294 \ucf54\ub4dc\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uc2ed\uc2dc\uc624 {1}.",noChange:"{0}\uc774 \ubcc0\uacbd\ub418\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 \uc5c5\ub370\uc774\ud2b8\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.",noContainer:"\ud398\uc774\uc9c0 \ub9e4\uce6d {0}\uc5d0 \ucee8\ud14c\uc774\ub108\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4.",
of:"\uc758",oldStyle:"{0} \uc9c0\uae08\uc5d0 \uc9c1\uc811 \ub0b4\uc7a5 \ub41c\uc704\ud55c \uc2a4\ud0c0\uc77c\uc758 \ud638\ud154 .{1}().",sameEdge:"\uac00\uc7a5\uc790\ub9ac\ub294 \uc790\uc2e0\uc5d0 \ub9c1\ud06c \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc790\ub3d9\uc73c\ub85c \uc790\uccb4 \ucc38\uc870 \uac00\uc7a5\uc790\ub9ac {0}\uc744 \uc81c\uac70\ud558\ub294 \ub2e8\uacc4\ub97c \ud3ec\ud568\ud55c\ub2e4.",set:"{0} \uc124\uc815\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.",setLong:"{0} {1}\ub85c \uc124\uc815\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.",
setContainer:".container() \uc0ac\uc6a9\ud558\uc5ec \ucee8\ud14c\uc774\ub108 \uc0ac\uc5c5\ubd80\ub97c \uc815\uc758\ud558\uc2ed\uc2dc\uc624"},error:{accepted:"{0} \uc544\ub2c8\ub2e4 \ud5c8\uc6a9 {1} {2} \uc2dc\uac01\ud654\ub294 \ub2e4\uc74c \uc911 \ud558\ub098\ub97c \uc0ac\uc6a9\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4 : {3}.",connections:"{0}\uc5d0 \ub300\ud55c \uc5f0\uacb0\uc774 \uc5c6\uc74c.",data:"\uc790\ub8cc \uc5c6\uc74c",dataYear:"{0}\uc5d0 \ub300\ud55c \uc790\ub8cc\uac00 \uc5c6\uc74c.",lib:"{0} \uc2dc\uac01\ud654\ub294 {1} \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c\ub85c\ub4dc \ud560 \ud544\uc694\ud569\ub2c8\ub2e4.",
libs:"{0} \uc2dc\uac01\ud654\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c\ub85c\ub4dc \ud560 \ud544\uc694 : {1}.",method:"{0} \uc2dc\uac01\ud654\ub97c \uc704\ud574 {1} \uba54\uc11c\ub4dc\ub97c \uc124\uc815\ud574\uc57c \ud55c\ub2e4.",methods:"{0} \uc2dc\uac01\ud654\ub97c \uc704\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \uba54\uc11c\ub4dc\ub97c \uc124\uc815\ud574\uc57c\ud55c\ub2e4: {1}."},lowercase:[],method:{active:"\ud65c\uc131 \uc138\uadf8\uba3c\ud2b8",color:"\uc0c9",depth:"\uae4a\uc774",
dev:"\ud480\uc5b4\uc11c",focus:"\ucd08\uc810",icon:"\uc0c1",id:"\uc2e0\ubd84\uc99d",height:"\ub192\uc774",labels:"\ub77c\ubca8",legend:"\ubc94\ub840",margin:"\uc5ec\uc720",messages:"\uc0c1\ud0dc \uba54\uc2dc\uc9c0",order:"\uc8fc\ubb38",search:"\uc218\uc0c9",shape:"\ubaa8\uc591",size:"\ud06c\uae30",style:"\uc2a4\ud0c0\uc77c",temp:"\uc784\uc2dc \uc138\uadf8\uba3c\ud2b8",text:"\ubcf8\ubb38",time:"\uc2dc\uac01",timeline:"\ud0c0\uc784 \ub77c\uc778",total:"\ucd1d \uc138\uadf8\uba3c\ud2b8",type:"\uc720\ud615",
width:"\ud3ed",x:"X \ucd95",y:"Y \ucd95",zoom:"\uc90c",mode:"\ubaa8\ub4dc",mute:"\uc228\uae40",solo:"\ub3c5\uc8fc"},time:["\ub0a0\uc9dc","\uc694\uc77c","\uc6d4","\uc2dc\uac04","\ub144"],visualization:{bubbles:"\ubc84\ube14 \ucc28\ud2b8",chart:"\ucc28\ud2b8",geo_map:"\uc9c0\ub3c4\ud615",line:"\uc120\ud615 \uadf8\ub798\ud504",network:"\ub124\ud2b8\uc6cc\ud06c \uadf8\ub798\ud504",rings:"\ubc18\uc9c0",scatter:"\uc0b0\ud3ec\ub3c4",stacked:"\uc2a4\ud0dd \uc601\uc5ed",tree_map:"\ud2b8\ub9ac \ub9f5",bar:"\ub9c9\ub300 \ucc28\ud2b8",
box:"\ubc15\uc2a4 \ud50c\ub86f",paths:"\uacbd\ub85c",pie:"\ud30c\uc774 \ucc28\ud2b8",table:"\ud45c"},ui:{and:"\uacfc",back:"\ub4a4\ub85c",collapse:"\ucd95\uc18c\ud558\ub824\uba74 \ud074\ub9ad",error:"\uc624\ub958",expand:"\ud655\uc7a5\ud558\ub824\uba74 \ud074\ub9ad",loading:"\ub85c\ub4dc \uc911 ...",more:"{0} \uc774\uc0c1",moreInfo:"\ucd94\uac00 \uc815\ubcf4\ub97c \uc704\ud574 \ud074\ub9ad\ud558\uc2ed\uc2dc\uc624",noResults:"\uc77c\uce58\ud558\ub294 \uacb0\uacfc\uac12\uc774 \uc5c6\uc74c {0}.",primary:"\uae30\ubcf8 \uc5f0\uacb0",
share:"\ube44\uc911",total:"\ud569\uacc4",values:"\uac12",including:"...\uc744 \ud3ec\ud568\ud558\uc5ec",or:"\ub610\ub294"},message:{data:"\ub370\uc774\ud130 \ubd84\uc11d \uc911",draw:"\ub370\uc774\ud130 \uc2dc\uac01\ud654 \uc911",initializing:"\ucd08\uae30\ud654 {0}",loading:"\ub370\uc774\ud130 \ub85c\ub529 \uc911",tooltipReset:"\ud234\ud301\uc744 \uc7ac\uc124\uc815",ui:"UI \uc5c5\ub370\uc774\ud2b8 \uc911"},uppercase:"CEO;\ucd5c\uace0 \uacbd\uc601\uc790;\ucd5c\uace0 \uc7ac\ubb34 \ucc45\uc784\uc790 (CFO);CFO\ub294;CNC;COO;\uad6c\uad6c;CPU;CPU\ub97c;\uad6d\ub0b4 \ucd1d\uc0dd\uc0b0 (GDP);HVAC;ID;IT;R & D;TV;UI".split(";")}},
{}],73:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," \u0434\u0435\u043d."],dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"\u043d\u0435\u0434\u0435\u043b\u0430 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0440\u0442\u043e\u043a \u043f\u0435\u0442\u043e\u043a \u0441\u0430\u0431\u043e\u0442\u0430".split(" "),
shortDays:"\u043d\u0435\u0434 \u043f\u043e\u043d \u0432\u0442\u043e \u0441\u0440\u0435 \u0447\u0435\u0442 \u043f\u0435\u0442 \u0441\u0430\u0431".split(" "),months:"\u0458\u0430\u043d\u0443\u0430\u0440\u0438 \u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438 \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0438\u043b \u043c\u0430\u0458 \u0458\u0443\u043d\u0438 \u0458\u0443\u043b\u0438 \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438 \u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438 \u043d\u043e\u0435\u043c\u0432\u0440\u0438 \u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split(" "),
shortMonths:"\u0458\u0430\u043d \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0458 \u0458\u0443\u043d \u0458\u0443\u043b \u0430\u0432\u0433 \u0441\u0435\u043f \u043e\u043a\u0442 \u043d\u043e\u0435 \u0434\u0435\u043a".split(" ")},dev:{accepted:"{0} \u043d\u0435 \u0435 \u043f\u0440\u0438\u0444\u0430\u0442\u0435\u043da \u0432\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u0430 \u0437\u0430 {1}, \u0432\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u0442\u0435 \u0435\u0434\u043da \u043e\u0434 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u0432\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u0438: {2}.",
deprecated:"{0} \u043c\u0435\u0442\u043e\u0434 \u0435 \u043e\u0442\u0441\u0442\u0440\u0430\u043d\u0435\u0442\u0430, \u0432\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u043e\u0431\u043d\u043e\u0432\u0435\u0442\u0435 \u0433\u043e \u0432\u0430\u0448\u0438\u043e\u0442 \u043a\u043e\u0434 \u0437\u0430 \u0434\u0430 \u0441\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438 {1}.",noChange:"{0} \u043d\u0435 \u0435 \u0430\u0436\u0443\u0440\u0438\u0440\u0430\u043d\u0430, \u0431\u0438\u0434\u0435\u0458\u045c\u0438 \u043d\u0435\u043c\u0430\u0448\u0435 \u043f\u0440\u043e\u043c\u0435\u043d\u0438.",
noContainer:"\u043d\u0435 \u043c\u043e\u0436e \u0434\u0430 \u0441\u0435 \u043d\u0430\u0458\u0434\u0435 \u043a\u043e\u043d\u0442\u0435\u0458\u043d\u0435\u0440 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0442\u0430 \u043a\u043e\u0458 \u0441\u0435 \u0441\u043e\u0432\u043f\u0430\u0453\u0430 \u0441\u043e {0}.",of:"\u043d\u0430",oldStyle:"\u0441\u0432\u043e\u0458\u0441\u0442\u0432\u0430\u0442\u0430 \u0437\u0430 \u0441\u0442\u0438\u043b\u043e\u0442 \u0437\u0430 {0} \u0441\u0435\u0433\u0430 \u0441\u0435 \u0432\u0433\u0440\u0430\u0434\u0435\u043d\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043d\u043e \u0432\u043e. {1} ().",
sameEdge:"\u0440\u0430\u0431\u043e\u0432\u0438\u0442\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435 \u0434\u0430 \u0438\u043c\u0430\u0430\u0442 \u0430\u043b\u043a\u0430 \u0441\u0430\u043c\u0438\u0442\u0435 \u043a\u043e\u043d \u0441\u0435\u0431\u0435. \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0441\u043a\u0438 \u0433\u0438 \u043e\u0442\u0441\u0442\u0440\u0430\u043d\u0443\u0432\u0430\u043c \u0440\u0430\u0431\u043e\u0432\u0438\u0442\u0435 \u043a\u043e\u0438 \u0441\u0435 \u0441\u0430\u043c\u043e-\u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0440\u0430\u0430\u0442 {0}.",
set:"{0} \u0435 \u043d\u0430\u043c\u0435\u0441\u0442\u0435\u043d.",setLong:"{0} \u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0435\u043d \u043d\u0430 {1}.",setContainer:"\u0412\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u0434\u0435\u0444\u0438\u043d\u0438\u0440\u0430\u0458\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u0458\u043d\u0435\u0440 div \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u0458\u045c\u0438 .container()"},error:{accepted:"{0} \u043d\u0435 \u0435 \u043f\u0440\u0438\u0444\u0430\u0442\u043b\u0438\u0432\u0430 \u0437\u0430 {1} {2} \u0432\u0438\u0437\u0443\u0435\u043b\u0438\u0437\u0430\u0446\u0438\u0458\u0430, \u0432\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u0442\u0435 \u0435\u0434\u043d\u0430 \u043e\u0434 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435: {3}.",
connections:"\u043d\u0435 \u0435 \u0434\u043e\u0441\u0442\u0430\u043f\u043d\u0430 \u0437\u0430 \u0432\u0440\u0441\u043a\u0438 {0}.",data:"\u043d\u0435\u043c\u0430 \u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438",dataYear:"\u041d\u0435\u043c\u0430 \u0434\u043e\u0441\u0442\u0430\u043f\u043d\u0438 \u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438 \u0437\u0430 {0}.",lib:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430\u0430\u0442 \u0432\u0447\u0438\u0442\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0442\u0430 {1} .",
libs:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430\u0430\u0442 \u0432\u0447\u0438\u0442\u0443\u0432\u0430\u045a\u0435 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438: {1}.",method:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 {1} \u043c\u0435\u0442\u043e\u0434\u043e\u0442.",
methods:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430\u0430\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u043c\u0435\u0442\u043e\u0434\u0438: {1}."},lowercase:"a \u0438 \u0432\u043e \u043d\u043e \u043d\u0430 \u0438\u043b\u0438 \u0434\u0430 \u0441\u0435 \u0441\u043e".split(" "),method:{active:"\u0430\u043a\u0442\u0438\u0432\u043d\u0438 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0438",
color:"\u0431\u043e\u0458\u0430",depth:"\u0434\u043b\u0430\u0431\u043e\u0447\u0438\u043d\u0430",dev:"\u043e\u043f\u0448\u0438\u0440\u043d\u043e",focus:"\u0444\u043e\u043a\u0443\u0441",icon:"\u0438\u043a\u043e\u043d\u0430",id:"id",height:"\u0432\u0438\u0441\u0438\u043d\u0430",labels:"\u0435\u0442\u0438\u043a\u0435\u0442\u0438",legend:"\u043b\u0435\u0433\u0435\u043d\u0434\u0430",margin:"\u043c\u0430\u0440\u0433\u0438\u043d\u0430",messages:"\u043f\u043e\u0440\u0430\u043a\u0438 \u0437\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0442",
mute:"\u0441\u043a\u0440\u0438\u0435",order:"\u0446\u0435\u043b",search:"\u0431\u0430\u0440\u0430\u0458",shape:"\u0444\u043e\u0440\u043c\u0430",size:"\u0433\u043e\u043b\u0435\u043c\u0438\u043d\u0430",solo:"\u0438\u0437\u043e\u043b\u0438\u0440\u0430\u045a\u0435",style:"\u0441\u0442\u0438\u043b",temp:"\u043f\u0440\u0438\u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0438",text:"\u0442\u0435\u043a\u0441\u0442",time:"\u0432\u0440\u0435\u043c\u0435",timeline:"\u0432\u0440\u0435\u043c\u0435\u043f\u043b\u043e\u0432",
total:"\u0412\u043a\u0443\u043f\u043d\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0438",type:"\u0442\u0438\u043f",width:"\u0448\u0438\u0440\u0438\u043d\u0430",x:"x \u043e\u0441\u043a\u0430\u0442\u0430",y:"\u043e\u0441\u043a\u0430\u0442\u0430 y",zoom:"\u0437\u0443\u043c",mode:"\u0440\u0435\u0436\u0438\u043c"},time:["\u0434\u0430\u0442\u0443\u043c","\u0434\u0435\u043d","\u043c\u0435\u0441\u0435\u0446","\u0432\u0440\u0435\u043c\u0435","\u0433\u043e\u0434\u0438\u043d\u0430"],visualization:{bubbles:"\u041c\u0435\u0443\u0440\u0447\u0438\u045a\u0430",
chart:"\u0428\u0435\u043c\u0430",geo_map:"\u0413\u0435\u043e \u043c\u0430\u043f\u0430",line:"\u041b\u0438\u043d\u0438\u0441\u043a\u0438 \u0433\u0440\u0430\u0444\u0438\u043a",network:"\u041c\u0440\u0435\u0436\u0430",rings:"\u041f\u0440\u0441\u0442\u0435\u043d\u0438",scatter:"\u0420\u0430\u0441\u043f\u0440\u0441\u043a\u0430\u043d \u0433\u0440\u0430\u0444\u0438\u043a",stacked:"\u041d\u0430\u0440\u0435\u0434\u0435\u043d\u0430 \u043f\u043e\u0432\u0440\u0448\u0438\u043d\u0430",tree_map:"\u041c\u0430\u043f\u0430 \u0432\u043e \u0432\u0438\u0434 \u043d\u0430 \u0434\u0440\u0432\u043e",
bar:"\u0411\u0430\u0440 \u0442\u0430\u0431\u0435\u043b\u0430",box:"\u041a\u0443\u0442\u0438\u0458\u0430 \u041f\u0430\u0440\u0446\u0435\u043b",paths:"\u041f\u0430\u0442\u0435\u043a\u0438",pie:"\u041f\u0438\u0442\u0430 \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u043d",table:"\u0422\u0430\u0431\u0435\u043b\u0430"},ui:{and:"\u0438",back:"\u043d\u0430\u0437\u0430\u0434",collapse:"\u043a\u043b\u0438\u043a\u043d\u0438 \u0437\u0430 \u0434\u0430 \u0441\u0435 \u0441\u043e\u0431\u0435\u0440\u0435",error:"\u0433\u0440\u0435\u0448\u043a\u0430",
expand:"\u043a\u043b\u0438\u043a\u043d\u0438 \u0437\u0430 \u0434\u0430 \u0441\u0435 \u043f\u0440\u043e\u0448\u0438\u0440\u0438",loading:"\u0421\u0435 \u0432\u0447\u0438\u0442\u0443\u0432\u0430 ...",more:"{0} \u043f\u043e\u0432\u0435\u045c\u0435",moreInfo:"\u043a\u043b\u0438\u043a\u043d\u0435\u0442\u0435 \u0437\u0430 \u043f\u043e\u0432\u0435\u045c\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",noResults:"\u041d\u0435 \u0441\u0435 \u043f\u0440\u043e\u043d\u0430\u0458\u0434\u0435\u043d\u0438 \u043f\u043e\u0458\u0430\u0432\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 {0}.",
primary:"\u043e\u0441\u043d\u043e\u0432\u043d\u043e \u0432\u0440\u0441\u043a\u0438",share:"\u0443\u0434\u0435\u043b",total:"\u0412\u043a\u0443\u043f\u043d\u0438\u043e\u0442",values:"\u0432\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u0438",including:"\u0412\u043a\u043b\u0443\u0447\u0443\u0432\u0430\u0458\u045c\u0438",or:"\u0438\u043b\u0438"},message:{data:"\u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043d\u0430 \u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438",draw:"\u0446\u0440\u0442\u0430\u045a\u0435 \u043d\u0430 \u0432\u0438\u0437\u0443\u0435\u043b\u0438\u0437\u0430\u0446\u0438\u0458\u0430",
initializing:"\u0438\u043d\u0438\u0446\u0438\u0458\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0458\u0430 {0}",loading:"\u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438 \u0437\u0430 \u0432\u0447\u0438\u0442\u0443\u0432\u0430\u045a\u0435",tooltipReset:"\u0440\u0435\u0441\u0435\u0442\u0438\u0440\u0430\u045a\u0435 \u043d\u0430 \u043e\u0431\u0458\u0430\u0441\u043d\u0443\u0432\u0430\u045a\u0430\u0442\u0430",ui:"\u0430\u0436\u0443\u0440\u0438\u0440\u0430\u045a\u0435 \u043d\u0430 \u043a\u043e\u0440\u0438\u043d\u0438\u0447\u043a\u0438\u043e\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0458\u0441"},
uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs GDP HVAC ID IT R&D TV UI".split(" ")}},{}],74:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Domingo Segunda Ter\u00e7a Quarta Quinta Sexta S\u00e1bado".split(" "),shortDays:"Dom Seg Ter Qua Qui Sex S\u00e1b".split(" "),months:"Janeiro Fevereiro Mar\u00e7o Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" "),
shortMonths:"Jan Fev Mar Abr Mai Jun Jul Ago Set Out Nov Dez".split(" ")},dev:{accepted:"{0} n\u00e3o \u00e9 um valor v\u00e1lido para {1}, por favor use um dos seguintes procedimentos: {2}.",deprecated:"{0} m\u00e9todo foi removido, por favor atualize seu c\u00f3digo para utilizar {1}.",noChange:"{0} n\u00e3o foi atualizado porque ele n\u00e3o mudou.",noContainer:"N\u00e3o foi poss\u00edvel encontrar um local na p\u00e1gina correspondente a {0}.",of:"de",oldStyle:"propriedades de estilo para {0} j\u00e1 foi incorporado diretamente no. {1} ().",
sameEdge:"bordas n\u00e3o podem vincular a si mesmos. removendo automaticamente borda de auto-refer\u00eancia {0}.",set:"{0} foi definido.",setLong:"{0} foi definida para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} n\u00e3o \u00e9 um {1} reconhecido para visualiza\u00e7\u00f5es {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"N\u00e3o h\u00e1 conex\u00f5es dispon\u00edveis para {0}.",data:"N\u00e3o h\u00e1 dados dispon\u00edveis",dataYear:"N\u00e3o h\u00e1 dados dispon\u00edveis para {0}.",
lib:"A visualiza\u00e7\u00e3o {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualiza\u00e7\u00e3o {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualiza\u00e7\u00e3o {0} exige a defini\u00e7\u00e3o do m\u00e9todo {1}.",methods:"A visualiza\u00e7\u00e3o {0} exige a defini\u00e7\u00e3o dos m\u00e9todos {1}."},lowercase:"um uma e como em no na mas por para pelo pela de do da se perto nem ou que o a com v".split(" "),method:{active:"segmentos activos",color:"cor",depth:"profundidade",
dev:"verboso",focus:"foco",icon:"\u00edcone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",mute:"ocultar",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",solo:"isolar",style:"estilo",temp:"segmentos tempor\u00e1rios",text:"texto",time:"tempo",timeline:"linha do tempo",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo"},time:["data","dia","m\u00eas","hora","ano"],
visualization:{bubbles:"Bolhas",chart:"Gr\u00e1fico",geo_map:"Mapa",line:"Gr\u00e1fico de Linha",network:"Rede",rings:"An\u00e9is",scatter:"Dispers\u00e3o",stacked:"Evolu\u00e7\u00e3o",tree_map:"Tree Map",bar:"Gr\u00e1fico de Barras",box:"Box Plot",paths:"Caminhos",pie:"Pie Chart",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para fechar",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informa\u00e7\u00f5es",noResults:"nenhum resultado para {0}.",
primary:"conex\u00f5es prim\u00e1rias",share:"participa\u00e7\u00e3o",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"analisando dados",draw:"desenhando visualiza\u00e7\u00e3o",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs PIB HVAC ID TI P&D TV IU".split(" ")}},{}],75:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],
currency:["\u20ac",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Domingo Segunda Ter\u00e7a Quarta Quinta Sexta S\u00e1bado".split(" "),shortDays:"Dom Seg Ter Qua Qui Sex S\u00e1b".split(" "),months:"Janeiro Fevereiro Mar\u00e7o Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" "),shortMonths:"Jan Fev Mar Abr Mai Jun Jul Ago Set Out Nov Dez".split(" ")},dev:{accepted:"{0} n\u00e3o \u00e9 um valor v\u00e1lido para {1}, por favor escolha uma das seguintes op\u00e7\u00f5es: {2}.",
deprecated:"o m\u00e9todo {0} foi removido, por favor atualize o seu c\u00f3digo para usar {1}.",noChange:"{0} n\u00e3o foi atualizado porque n\u00e3o houve modifica\u00e7\u00f5es.",noContainer:"N\u00e3o foi poss\u00edvel encontrar um elemento na p\u00e1gina correspondente a {0}.",of:"de",oldStyle:"as propriedades de {0} j\u00e1 foram inclu\u00eddas em .{1}().",sameEdge:"bordas n\u00e3o podem vincular a si mesmos. removendo automaticamente borda de auto-refer\u00eancia {0}.",set:"{0} foi definido.",
setLong:"{0} foi alterado para {1}.",setContainer:"por favor indique um elemento div atrav\u00e9s do m\u00e9todo .container()"},error:{accepted:"{0} n\u00e3o \u00e9 uma {1} v\u00e1lida para a visualiza\u00e7\u00e3o {2}, por favor escolha uma das seguintes: {3}.",connections:"n\u00e3o existem liga\u00e7\u00f5es dispon\u00edveis para {0}.",data:"n\u00e3o existem dados dispon\u00edveis",dataYear:"n\u00e3o existem dados dispon\u00edveis para {0}.",lib:"a visualiza\u00e7\u00e3o {0} necessita que a biblioteca {1} seja carregada.",
libs:"a visualiza\u00e7\u00e3o {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualiza\u00e7\u00e3o {0} exige a defini\u00e7\u00e3o do m\u00e9todo {1}.",methods:"A visualiza\u00e7\u00e3o {0} exige a defini\u00e7\u00e3o dos seguintes m\u00e9todos {1}."},lowercase:"um uma e como em no na mas por para pelo pela de do da se perto nem ou que o a com v".split(" "),method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"\u00edcone",
id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos tempor\u00e1rios",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"#ERROR!",mute:"ocultar",solo:"isolar"},time:["data","dia","m\u00eas","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",
geo_map:"Mapa",line:"Gr\u00e1fico de Linha",network:"Grafo",rings:"An\u00e9is",scatter:"Gr\u00e1fico de Dispers\u00e3o",stacked:"Gr\u00e1fico de \u00c1rea",tree_map:"Tree Map",bar:"Gr\u00e1fico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"Caminhos",pie:"Gr\u00e1fico de Setores",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informa\u00e7\u00f5es",noResults:"nenhum resultado para {0}.",
primary:"liga\u00e7\u00f5es principais",share:"propor\u00e7\u00e3o",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"a analisar os dados",draw:"a desenhar a visualiza\u00e7\u00e3o",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informa\u00e7\u00e3o",ui:"a actualizar o interface"},uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs PIB HVAC ID TI I&D TV IU".split(" ")}},{}],76:[function(b,c,d){c.exports={format:{decimal:",",
thousands:"\u00a0",grouping:[3],currency:[""," \u0440\u0443\u0431."],dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),
shortDays:"\u0432\u0441 \u043f\u043d \u0432\u0442 \u0441\u0440 \u0447\u0442 \u043f\u0442 \u0441\u0431".split(" "),months:"\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" "),
shortMonths:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" ")},dev:{accepted:"{0} \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 {1}, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445: {2}.",
deprecated:"\u041c\u0435\u0442\u043e\u0434 {0} \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0432\u0430\u0448 \u043a\u043e\u0434, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c {1}.",noChange:"{0} \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u043d \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f.",
noContainer:"\u043d\u0435 \u043c\u043e\u0433\u0443 \u043d\u0430\u0439\u0442\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f {0}.",of:"\u0438\u0437",oldStyle:"\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0441\u0442\u0438\u043b\u044f \u0434\u043b\u044f {0} \u0443\u0436\u0435 \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0431\u044b\u043b\u0438 \u0432\u0441\u0442\u0440\u043e\u0435\u043d \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0432. {1} ().",
sameEdge:"\u041a\u0440\u0430\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0435\u0431\u044f. \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0443\u0434\u0430\u043b\u044f\u044f \u0430\u0432\u0442\u043e\u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0442\u043d\u044b\u0445 \u0440\u0435\u0431\u0440\u043e {0}.",set:"{0} \u0431\u044b\u043b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d.",setLong:"{0} \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 {1}.",
setContainer:"\u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 DIV \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e .container ()"},error:{accepted:"{0} \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f {1} \u0434\u043b\u044f {2} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445: {3}.",
connections:"\u043d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f {0}.",data:"\u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b",dataYear:"\u043d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 {0}.",lib:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 {1} \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443.",
libs:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a: {1}.",method:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 {1} \u043c\u0435\u0442\u043e\u0434\u0430.",
methods:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432: {1}."},lowercase:"\u0438;\u043a\u0430\u043a;\u0432;\u043d\u043e;\u0434\u043b\u044f;\u0438\u0437;\u0435\u0441\u043b\u0438 \u0432;\u0432;\u043d\u0435\u0434\u0430\u043b\u0435\u043a\u043e;\u043d\u0438;\u043d\u0430;\u043d\u0430;\u0438\u043b\u0438;\u0432;\u0447\u0442\u043e;\u043a;\u0441;\u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e;\u043f\u0440\u043e\u0442\u0438\u0432;\u043f\u0440\u043e\u0442\u0438\u0432".split(";"),
method:{active:"\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u044b",color:"\u0446\u0432\u0435\u0442",depth:"\u0433\u043b\u0443\u0431\u0438\u043d\u0430",dev:"\u043c\u043d\u043e\u0433\u043e\u0441\u043b\u043e\u0432\u043d\u044b\u0439",focus:"\u0444\u043e\u043a\u0443\u0441",icon:"\u0437\u043d\u0430\u0447\u043e\u043a",id:"ID",height:"\u0432\u044b\u0441\u043e\u0442\u0430",labels:"\u043d\u0430\u0434\u043f\u0438\u0441\u0438",legend:"\u043b\u0435\u0433\u0435\u043d\u0434\u0430",
margin:"\u043f\u043e\u043b\u0435",messages:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438",mute:"\u0441\u043a\u0440\u044b\u0432\u0430\u0442\u044c",order:"\u043f\u043e\u0440\u044f\u0434\u043e\u043a",search:"\u043f\u043e\u0438\u0441\u043a",shape:"\u0444\u043e\u0440\u043c\u0430",size:"\u0440\u0430\u0437\u043c\u0435\u0440",solo:"\u0438\u0437\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c",style:"\u0441\u0442\u0438\u043b\u044c",
temp:"\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u044b",text:"\u0442\u0435\u043a\u0441\u0442",time:"\u0432\u0440\u0435\u043c\u044f",timeline:"\u0433\u0440\u0430\u0444\u0438\u043a",total:"\u0432\u0441\u0435\u0433\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432",type:"\u0442\u0438\u043f",width:"\u0448\u0438\u0440\u0438\u043d\u0430",x:"\u043e\u0441\u044c \u0445",y:"\u041e\u0441\u044c Y",zoom:"\u043c\u0430\u0441\u0448\u0442\u0430\u0431",
mode:"\u0440\u0435\u0436\u0438\u043c"},time:["\u0434\u0430\u0442\u0430","\u0434\u0435\u043d\u044c","\u043c\u0435\u0441\u044f\u0446","\u0432\u0440\u0435\u043c\u044f","\u0433\u043e\u0434"],visualization:{bubbles:"\u041f\u0443\u0437\u044b\u0440\u0438",chart:"\u0413\u0440\u0430\u0444\u0438\u043a",geo_map:"\u0413\u0435\u043e \u041a\u0430\u0440\u0442\u0430",line:"\u041b\u0438\u043d\u0438\u044f \u0437\u0435\u043c\u043b\u044f",network:"\u0421\u0435\u0442\u044c",rings:"\u041a\u043e\u043b\u044c\u0446\u0430",
scatter:"\u0420\u0430\u0437\u0431\u0440\u043e\u0441 \u0437\u0435\u043c\u043b\u044f",stacked:"\u0421 \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u0435\u043c \u041f\u043b\u043e\u0449\u0430\u0434\u044c",tree_map:"\u0414\u0435\u0440\u0435\u0432\u043e \u041a\u0430\u0440\u0442\u0430",bar:"\u0413\u0438\u0441\u0442\u043e\u0433\u0440\u0430\u043c\u043c\u0430",box:"\u041a\u043e\u0440\u043e\u0431\u043a\u0430 \u0437\u0435\u043c\u043b\u044f",paths:"\u041f\u0443\u0442\u0438",pie:"\u041a\u0440\u0443\u0433\u043e\u0432\u0430\u044f \u0434\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0430",
table:"\u0421\u0442\u043e\u043b"},ui:{and:"\u0438",back:"\u043d\u0430\u0437\u0430\u0434",collapse:"\u0429\u0435\u043b\u043a\u043d\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c",error:"\u043e\u0448\u0438\u0431\u043a\u0430",expand:"\u0449\u0435\u043b\u043a\u043d\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c",loading:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ...",more:"{0} \u0431\u043e\u043b\u0435\u0435",
moreInfo:"\u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",noResults:"\u043d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 {0}.",primary:"\u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f",
share:"\u0434\u043e\u043b\u044f",total:"\u043e\u0431\u0449\u0435\u0435",values:"\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f",including:"\u0432\u043a\u043b\u044e\u0447\u0430\u044f",or:"\u0438\u043b\u0438"},message:{data:"\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u044f \u0434\u0430\u043d\u043d\u044b\u0435",draw:"\u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f",initializing:"\u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 {0}",
loading:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445",tooltipReset:"\u0441\u0431\u0440\u043e\u0441 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438",ui:"\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430"},uppercase:["ID"]}},{}],77:[function(b,c,d){c.exports={format:{decimal:".",
thousands:",",grouping:[3],currency:["\u00a5",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["\u4e0a\u5348","\u4e0b\u5348"],days:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),shortDays:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),months:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),
shortMonths:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" ")},dev:{accepted:"{0}\u4e0d\u662f{1}\u7684\u53ef\u63a5\u53d7\u503c, \u8bf7\u7528\u4e0b\u5217\u4e4b\u4e00\u7684\u503c:{2}",deprecated:"{0}\u7684\u65b9\u6cd5\u5df2\u88ab\u79fb\u9664, \u8bf7\u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u53bb\u4f7f\u7528{1}",noChange:"{0}\u6ca1\u6709\u66f4\u65b0, \u56e0\u4e3a\u5b83\u5e76\u6ca1\u6709\u6539\u53d8\u3002",
noContainer:"\u65e0\u6cd5\u5728\u8be5\u9875\u627e\u5230\u5bb9\u5668\u53bb\u5339\u914d{0}",of:"\u7684",oldStyle:"\u6837\u5f0f\u5c5e\u6027{0}\u73b0\u5728\u5df2\u7ecf\u76f4\u63a5\u5d4c\u5165\u5230\u3002{1}\uff08\uff09\u3002",sameEdge:"\u8fb9\u7f18\u4e0d\u80fd\u94fe\u63a5\u5230\u81ea\u5df1\u3002\u81ea\u52a8\u53bb\u9664\u81ea\u6211\u53c2\u7167\u8fb9\u7f18{0}\u3002",set:"{0}\u5df2\u7ecf\u88ab\u8bbe\u7f6e\u3002",setLong:"{0}\u88ab\u8bbe\u7f6e\u4e3a{1}\u3002",setContainer:"\u8bf7\u4f7f\u7528()\u5bb9\u5668\u6765\u5b9a\u4e49div\u5bb9\u5668"},
error:{accepted:"{0}\u5bf9\u4e8e{2}\u7684\u53ef\u89c6\u5316\u6548\u679c\u5e76\u4e0d\u662f\u4e00\u4e2a\u53ef\u63a5\u53d7\u7684{1}, \u8bf7\u4f7f\u7528\u5982\u4e0b\u7684\u4e00\u4e2a\uff1a{3}.",connections:"\u6ca1\u6709\u5bf9{0}\u53ef\u7528\u7684\u8fde\u63a5\u3002",data:"\u65e0\u53ef\u7528\u6570\u636e",dataYear:"\u6ca1\u6709\u6570\u636e\u5bf9{0}\u53ef\u7528\u3002",lib:"{0}\u7684\u53ef\u89c6\u5316\u8981\u6c42\u88c5\u8f7d{1}\u5e93\u3002",libs:"{0}\u7684\u53ef\u89c6\u5316\u9700\u8981\u52a0\u8f7d\u4ee5\u4e0b\u5e93\uff1a{1}\u3002",
method:"{0}\u7684\u53ef\u89c6\u5316\u8981\u6c42\u8bbe\u7f6e{1}\u65b9\u6cd5\u3002",methods:"{0}\u7684\u53ef\u89c6\u5316\u8981\u6c42\u8bbe\u7f6e\u4ee5\u4e0b\u65b9\u6cd5\uff1a{1}\u3002"},lowercase:"\u4e00\u4e2a \u548c \u5728 \u4f46\u662f \u5728...\u91cc \u7684 \u6216\u8005 \u8fd9 \u5411 \u4e0e...\u4e00\u8d77".split(" "),method:{active:"\u6d3b\u8dc3\u6bb5",color:"\u989c\u8272",depth:"\u6df1\u5ea6",dev:"\u8be6\u7ec6",focus:"\u7126\u70b9",icon:"\u56fe\u6807",id:"\u8eab\u4efd\u8ba4\u8bc1",height:"\u9ad8\u5ea6",
labels:"\u6807\u7b7e",legend:"\u56fe\u4f8b\u6ce8\u91ca",margin:"\u5916\u8fb9\u8ddd",messages:"\u72b6\u6001\u6d88\u606f",mute:"\u9690\u85cf",order:"\u89c4\u5219",search:"\u641c\u7d22",shape:"\u5f62\u72b6",size:"\u5927\u5c0f",solo:"\u9694\u79bb",style:"\u6837\u5f0f",temp:"\u6682\u65f6\u6027\u533a\u6bb5",text:"\u6587\u672c",time:"\u65f6\u95f4",timeline:"\u65f6\u95f4\u8f74",total:"\u603b\u6bb5",type:"\u7c7b\u578b",width:"\u5bbd\u5ea6",x:"X\u8f74",y:"Y\u8f74",zoom:"\u7f29\u653e",mode:"\u6a21\u5f0f"},time:["\u65e5",
"\u661f\u671f","\u6708","\u65f6\u95f4","\u5e74"],visualization:{bubbles:"\u6c14\u6ce1",chart:"\u56fe\u8868",geo_map:"\u5730\u7406\u5730\u56fe",line:"\u7ebf\u56fe",network:"\u7f51\u7edc",rings:"\u7279\u6027",scatter:"\u6563\u70b9\u56fe",stacked:"\u5806\u79ef\u9762\u79ef\u56fe",tree_map:"\u6811\u56fe",bar:"\u6761\u56fe",box:"\u7bb1\u7ebf\u56fe",paths:"\u8def\u5f84",pie:"\u997c\u56fe",table:"\u8868"},ui:{and:"\u548c",back:"\u540e\u9762",collapse:"\u70b9\u51fb\u5408\u5e76",error:"\u9519\u8bef",expand:"\u5355\u51fb\u4ee5\u5c55\u5f00",
loading:"\u8f7d\u5165\u4e2d...",more:"{0}\u66f4\u591a",moreInfo:"\u70b9\u51fb\u4e86\u89e3\u66f4\u591a\u4fe1\u606f",noResults:"\u6ca1\u6709\u7ed3\u679c\u5339\u914d{0}\u3002",primary:"\u4e3b\u8981\u8fde\u63a5",share:"\u5171\u4eab",total:"\u603b",values:"\u503c",including:"\u5305\u62ec",or:"\u6216"},message:{data:"\u5206\u6790\u6570\u636e",draw:"\u7ed8\u5236\u53ef\u89c6\u5316",initializing:"\u521d\u59cb\u5316{0}",loading:"\u52a0\u8f7d\u6570\u636e",tooltipReset:"\u91cd\u7f6e\u5de5\u5177\u63d0\u793a",
ui:"\u66f4\u65b0UI"},uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs GDP HVAC ID \u7535\u89c6 \u7528\u6237\u754c\u9762 \u7814\u53d1".split(" ")}},{}],78:[function(b,c,d){c.exports={en_US:b("./languages/en_US.coffee"),es_ES:b("./languages/es_ES.js"),fr_FR:b("./languages/fr_FR.js"),ko_KR:b("./languages/ko_KR.js"),mk_MK:b("./languages/mk_MK.js"),pt_BR:b("./languages/pt_BR.js"),pt_PT:b("./languages/pt_PT.js"),ru_RU:b("./languages/ru_RU.js"),zh_CN:b("./languages/zh_CN.js")}},{"./languages/en_US.coffee":69,
"./languages/es_ES.js":70,"./languages/fr_FR.js":71,"./languages/ko_KR.js":72,"./languages/mk_MK.js":73,"./languages/pt_BR.js":74,"./languages/pt_PT.js":75,"./languages/ru_RU.js":76,"./languages/zh_CN.js":77}],79:[function(b,c,d){var g,f,h,k,l,m,t,u,q;f=b("../../util/copy.coffee");l=b("../console/print.coffee");m=b("./process/detect.coffee");t=b("./set.coffee");u=b("../../string/format.js");q=b("../../object/validate.coffee");c.exports=function(b,c){var d,g,l;l=[];for(d in c)g=c[d],b[d]=f(g),b[d].initialized=
k(b,b[d],d),l.push(b.self[d]=h(b,d));return l};k=function(b,c,f,d){var g,h,t,x,z;c.previous=!1;c.changed=!1;c.initialized=!1;c.callback=!1;"init"in c&&!("value"in c)&&(c.value=c.init(b),delete c.init);"process"in c&&(c.value=m(b,c,c.value));for(z in c)if("deprecates"===z)for(h=c[z]instanceof Array?c[z]:[c[z]],t=0,x=h.length;t<x;t++)g=h[t],b.self[g]=function(c,f){return function(g){var h,k;k=b.format.locale.value.dev.deprecated;c="."+c+"()";h=d?'"'+f+'" in .'+d+"()":"."+f+"()";g=d||f;l.error(u(k,c,
h),g);return b.self}}(g,f);else"global"===z?f in b||(b[f]=[]):"value"!==z&&q(c[z])&&k(b,c[z],z,f);return!0};h=function(b,c){return function(f,d){var h,k,m,t,z,D;h="accepted"in b[c]?b[c].accepted:null;"function"===typeof h&&(h=h(b));h instanceof Array||(h=[h]);if(f===Object)return b[c];if(!arguments.length&&0>h.indexOf(void 0))return"value"in b[c]?b[c].value:b[c];if("style"===c&&"object"===typeof f)for(z in h=b.format.locale.value.dev.oldStyle,f)l.warning(u(h,'"'+z+'"',z),z),b.self[z](f[z]);if("font"===
c)for(t in"string"===typeof f&&(f={family:f}),D=!0,m=function(b,c,f,d){q(b[f])&&c in b[f]&&(q(b[f][c])?b[f][c].value=b[f][c].process?b[f][c].process(d):d:b[f][c]=d)},k=function(b,c,f){var d;if(q(b)){if(D)for(d in b)m(b,c,d,f);else"font"in b&&m(b,c,"font",f);D=!1;for(d in b)k(b[d],c,f)}},f)z=f[t],"secondary"!==t&&(q(z)&&(z=z.value),z&&k(b,t,z));g(b,c,b,c,f);"function"===typeof d&&(b[c].callback=d);return!1===b[c].chainable?b[c].value:b.self}};g=function(b,c,f,d,h){var k,l,m;if(0>["accepted","changed",
"initialized","previous","process"].indexOf(d))if(m=q(h),k=q(f[d])&&"objectAccess"in f[d]&&!1===f[d].objectAccess,k=m&&(k||!("value"in h)&&(!q(f[d])||!(d3.keys(h)[0]in f[d]))),null===h||!m||k)t(b,c,f,d,h);else if(m)for(l in h)g(b,c,f[d],l,h[l])}},{"../../object/validate.coffee":171,"../../string/format.js":172,"../../util/copy.coffee":206,"../console/print.coffee":52,"./process/detect.coffee":87,"./set.coffee":93}],80:[function(b,c,d){c.exports=function(b){b||(b=!1);return{accepted:[!1,Array,Function,
Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:b,process:Array,value:[]}}},{}],81:[function(b,c,d){var g;g=b("../../../client/rtl.coffee");c.exports=function(b){var c;c=["left","center","right"];!1===b&&c.unshift(!1);0>c.indexOf(b)&&(b="left");return{accepted:c,process:function(b){return g?"left"===b?"right":"right"===b?"left":b:b},value:b}}},{"../../../client/rtl.coffee":40}],82:[function(b,c,d){c.exports=function(b){var c;c=["line-through","none","overline","underline"];
!1===b&&c.unshift(!1);0>c.indexOf(b)&&(b="none");return{accepted:c,value:b}}},{}],83:[function(b,c,d){var g,f;f=b("../../../font/validate.coffee");g=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"];c.exports=function(b){void 0===b&&(b=g);return{process:f,value:b}}},{"../../../font/validate.coffee":102}],84:[function(b,c,d){c.exports=function(b){var c;c=["top","middle","bottom"];!1===b&&c.unshift(!1);0>c.indexOf(b)&&(b="bottom");return{accepted:c,mapping:{top:"0ex",middle:"0.5ex",
bottom:"1ex"},process:function(b){this.text=b;return this.mapping[b]},value:b}}},{}],85:[function(b,c,d){c.exports=function(b){var c;c=["capitalize","lowercase","none","uppercase"];!1===b&&c.unshift(!1);0>c.indexOf(b)&&(b="none");return{accepted:c,value:b}}},{}],86:[function(b,c,d){c.exports=function(b,c,d){c.history&&c.history.reset();if(b.constructor===String){if(0<=b.indexOf("/"))return d.url=b,[];c=d3.selectAll(b);if(c.size())return c;0<=b.indexOf(".")&&(d.url=b);return[]}return b}},{}],87:[function(b,
c,d){var g,f;g=b("../../../util/copy.coffee");f=b("../../../array/update.coffee");c.exports=function(b,c,d){return c.process===Array?f(g(c.value),d):"object"===typeof c.process&&"string"===typeof d?c.process[d]:"function"===typeof c.process?c.process(d,b,c):d}},{"../../../array/update.coffee":35,"../../../util/copy.coffee":206}],88:[function(b,c,d){var g;g=b("../../../client/css.coffee");c.exports=function(b,c,d){return!1===b||0>b.indexOf("fa-")||0===b.indexOf("fa-")&&g("font-awesome")?b:d.fallback}},
{"../../../client/css.coffee":36}],89:[function(b,c,d){c.exports=function(b,c){var d,k,l,m,t,u;if("string"===typeof b){b=b.split(" ");d=k=0;for(l=b.length;k<l;d=++k)m=b[d],b[d]=parseFloat(m,10);b=1===b.length?b[0]:2===b.length?{top:b[0],right:b[1],bottom:b[0],left:b[1]}:3===b.length?{top:b[0],right:b[1],bottom:b[2],left:b[1]}:4===b.length?{top:b[0],right:b[1],bottom:b[2],left:b[3]}:0}l=["top","right","bottom","left"];if("number"===typeof b)for(d=0,m=l.length;d<m;d++)k=l[d],c[k]=b;else for(d=0,m=l.length;d<
m;d++)k=l[d],c[k]=b[k];c.css="";u=[];d=t=0;for(m=l.length;t<m;d=++t)k=l[d],d&&(c.css+=" "),u.push(c.css+=c[k]+"px");return u}},{}],90:[function(b,c,d){var g,f,h,k;g=b("../../array/contains.coffee");f=b("../../string/format.js");h=b("../../string/list.coffee");k=b("../console/print.coffee");c.exports=function(b,c,d,u,q){var n,r,p,w,v;"function"===typeof c&&(c=c(b));c instanceof Array||(c=[c]);n=g(c,d);if(!1===n&&void 0!==d){w=[];v=JSON.stringify(d);"string"!==typeof d&&(v='"'+v+'"');r=0;for(p=c.length;r<
p;r++)d=c[r],"string"===typeof d?w.push('"'+d+'"'):"function"===typeof d?w.push(d.toString().split("()")[0].substring(9)):void 0===d?w.push("undefined"):w.push(JSON.stringify(d));w=h(w,b.format.locale.value.ui.or);b.type&&0<=["mode","shape"].indexOf(u)?(c=b.format.locale.value.error.accepted,b=b.format.locale.value.visualization[b.type.value]||b.type.value,k.warning(f(c,v,u,b,w),u)):(c=b.format.locale.value.dev.accepted,k.warning(f(c,v,q,w),u))}return!n}},{"../../array/contains.coffee":33,"../../string/format.js":172,
"../../string/list.coffee":173,"../console/print.coffee":52}],91:[function(b,c,d){c.exports=function(b){var c;c=["auto","optimizeSpeed","crispEdges","geometricPrecision"];0<=c.indexOf(b)||(b="crispEdges");return{accepted:c,value:b}}},{}],92:[function(b,c,d){var g,f;f=b("../../object/validate.coffee");g=function(b,c){var d;b.changed&&(b.changed=!1);"draw"===c&&(b.frozen=!1,b.update=!0,b.first=!1);for(d in b)0>d.indexOf("d3plus")&&f(b[d])&&g(b[d],d)};c.exports=g},{"../../object/validate.coffee":171}],
93:[function(b,c,d){var g,f,h,k,l,m,t,u,q;g=b("../../util/copy.coffee");f=b("../../util/d3selection.coffee");q=b("../../object/validate.coffee");h=b("../../object/merge.coffee");k=b("../console/print.coffee");l=b("./process/detect.coffee");m=b("./rejected.coffee");t=b("../../string/format.js");u=b("../../array/update.coffee");c.exports=function(b,c,d,w,v){var y,A,x,z;z="value"!==w&&w&&w!==c?'"'+w+'" '+b.format.locale.value.dev.of+" ."+c+"()":"."+c+"()";y="value"===w&&"accepted"in d?d.accepted:q(d[w])&&
"accepted"in d[w]?d[w].accepted:[v];if(!m(b,y,v,c,z)){q(d[w])&&"value"in d[w]&&(x=w,d=d[w],w="value");"value"===w&&"process"in d&&(v=l(b,d,v));if(d[w]instanceof Array||d[w]!==v||void 0===v){d.changed=!0;d.loaded&&(d.loaded=!1);"history"in b&&"draw"!==c&&(y=g(d),y.method=c,b.history.chain.push(y));d.previous=d[w];if("id"in b&&"value"===w&&"nesting"in d)if("id"!==c){"object"!==typeof d.nesting&&(d.nesting={});if(q(v)){for(A in v)"string"===typeof v[A]&&(v[A]=[v[A]]);d.nesting=h(d.nesting,v);b.id.value in
d.nesting||(d.nesting[b.id.value]=v[d3.keys(v)[0]])}else d.nesting[b.id.value]=v instanceof Array?v:[v];d[w]=d.nesting[b.id.value][0]}else v instanceof Array?(d.nesting=v,"depth"in b&&b.depth.value<v.length?d[w]=v[b.depth.value]:(d[w]=v[0],"depth"in b&&(b.depth.value=0))):(d[w]=v,d.nesting=[v],"depth"in b&&(b.depth.value=0));else if("depth"===c){if(b.depth.value=v>=b.id.nesting.length?b.id.nesting.length-1:0>v?0:v,b.id.value=b.id.nesting[b.depth.value],"object"===typeof b.text.nesting&&(A=b.text.nesting[b.id.value]))b.text.nesting[b.id.value]=
"string"===typeof A?[A]:A,b.text.value=A instanceof Array?A[0]:A}else q(d[w])&&q(v)?d[w]=h(d[w],v):d[w]=v;"value"===w&&d.global&&(A=0<d[w].length,x=x||w,x in b&&(A&&0>b.data[x].indexOf(c)||!A&&0<=b.data[x].indexOf(c))&&(b.data[x]=u(b.data[x],c)));"value"===w&&d.dataFilter&&b.data&&0>b.data.filters.indexOf(c)&&b.data.filters.push(c);b.dev.value&&d.changed&&void 0!==d[w]&&(x=d[w]instanceof Array&&10<d[w].length,c=f(d[w]),A="function"===typeof d[w],x=x||c||A?null:"string"===typeof d[w]?d[w]:JSON.stringify(d[w]),
null!==x&&260>x.length?(c=b.format.locale.value.dev.setLong,k.log(t(c,z,'"'+x+'"'))):(c=b.format.locale.value.dev.set,k.log(t(c,z))))}else c=b.format.locale.value.dev.noChange,b.dev.value&&k.comment(t(c,z));"value"===w&&d.callback&&!d.url&&(d="function"===typeof d.callback?d.callback:d.callback.value)&&d(v,b.self)}}},{"../../array/update.coffee":35,"../../object/merge.coffee":170,"../../object/validate.coffee":171,"../../string/format.js":172,"../../util/copy.coffee":206,"../../util/d3selection.coffee":207,
"../console/print.coffee":52,"./process/detect.coffee":87,"./rejected.coffee":90}],94:[function(b,c,d){var g=b("../console/print.coffee"),f=b("../../string/format.js");c.exports=function(b){if(b.dev.value){var c="analyzing edges list";g.time(c)}var d=b.types[b.type.value].requirements;d instanceof Array||(d=[d]);var m=0<=d.indexOf("nodes")&&!b.nodes.value;if(m){b.nodes.value=[];var t=[];b.nodes.changed=!0}b.edges.value.forEach(function(c){["source","target"].forEach(function(f){var d=typeof c[b.edges[f]];
"object"!==d&&("number"!==d||m||"number"===b.data.keys[b.id.value]?m&&0<=t.indexOf(c[b.edges[f]])?c[b.edges[f]]=b.nodes.value.filter(function(d){return d[b.id.value]===c[b.edges[f]]})[0]:(d={},d[b.id.value]=c[b.edges[f]],c[b.edges[f]]=d):c[b.edges[f]]=b.nodes.value[c[b.edges[f]]]);d=c[b.edges[f]];m&&0>t.indexOf(d[b.id.value])&&(t.push(d[b.id.value]),b.nodes.value.push(d))});"keys"in b.data||(b.data.keys={});b.id.value in b.data.keys||(b.data.keys[b.id.value]=typeof c[b.edges.source][b.id.value])});
b.edges.value=b.edges.value.filter(function(c){var d=c[b.edges.source][b.id.value];return d===c[b.edges.target][b.id.value]?(g.warning(f(b.format.locale.value.dev.sameEdge,'"'+d+'"'),"edges"),!1):!0});b.edges.linked=!0;b.dev.value&&g.timeEnd(c)}},{"../../string/format.js":172,"../console/print.coffee":52}],95:[function(b,c,d){var g=b("./hideElement.js");c.exports=function(b){function c(b,f){[].forEach.call(f.attributes,function(c){if(/^data-/.test(c.name)){var d=c.name.substr(5).replace(/-(.)/g,function(b,
c){return c.toUpperCase()});b[d]=c.value}});d.forEach(function(c){null!==f.getAttribute(c)&&(b[c]=f.getAttribute(c))})}var d=[b.color.value,b.icon.value,b.keywords.value,b.alt.value,"style"];b.text.value||b.self.text("text");d=d.concat(b.id.nesting);b.self.data({element:b.data.value});var l=b.data.element.value.node().tagName.toLowerCase(),m=b.data.element.value.attr("type"),t=[];"select"===l?((l=b.data.element.value.node().id)&&b.self.container({id:l}),b.data.element.value.selectAll("option").each(function(d,
g){var k={};k.text=d3.select(this).text();c(k,this);t.push(k);if(this.selected)for(g=b.id.nesting.length-1;0<=g;g--){var l=b.id.nesting[g];if(l in k){b.self.focus(k[l]);break}}})):"input"===l&&"radio"===m&&((l=b.data.element.value.node().getAttribute("name"))&&b.self.container({id:l}),b.data.element.value.each(function(d,k){var l={};c(l,this);var m=l[b.id.value]||this.id||!1;m&&isNaN(parseFloat(m))&&(m=d3.select("label[for="+m+"]"),m.empty()||(l.text=m.html(),m.call(g)));t.push(l);this.checked&&b.self.focus(l[b.id.value])}));
!b.focus.value.length&&t.length&&(b.data.element.value.node().selectedIndex=0,b.self.focus(t[0][b.id.value]));l=d3.select("legend[for="+b.container.id+"]");l.empty()||(b.self.title(l.html()),l.call(g));l=b.container.value?b.container.value.node().tagName.toLowerCase():!1;if(!1===b.container.value||"body"===l)b.container.value=d3.select(b.data.element.value.node().parentNode);b.data.element.value.call(g);return t}},{"./hideElement.js":96}],96:[function(b,c,d){c.exports=function(b){b.style("position",
"absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],97:[function(b,c,d){var g=b("../console/print.coffee");c.exports=function(b){if("network"===b.type.value){if(b.dev.value){var c="analyzing node positions";g.time(c)}if(b.nodes.value.filter(function(b){return"number"===
typeof b.x&&"number"===typeof b.y}).length!==b.nodes.value.length){var d=d3.layout.force().size([b.width.viz,b.height.viz]).nodes(b.nodes.value).links(b.edges.value),l=b.edges.strength.value;l&&("string"===typeof l?d.linkStrength(function(b){return b[l]}):d.linkStrength(l));d.start();for(var m=50;0<m&&!(d.tick(),.01>d.alpha());--m);d.stop()}b.nodes.positions=!0;b.dev.value&&g.timeEnd(c)}}},{"../console/print.coffee":52}],98:[function(b,c,d){var g;g=b("numeric");c.exports=function(b,c){var d,l,m,t,
u,q,n,r,p,w,v,y,A,x,z;null==c&&(c={});null==c.maxDegree&&(c.maxDegree=5);d=b.length;y=Number.MAX_VALUE;u=null;m=function(){var d,g,k;k=[];n=d=1;for(g=c.maxDegree+1;1<=g?d<g:d>g;n=1<=g?++d:--d)k.push(function(){var c,d,g;g=[];d=0;for(c=b.length;d<c;d++)v=b[d],g.push(Math.pow(v[0],n));return g}());return k}();z=function(){var c,d,g;g=[];c=0;for(d=b.length;c<d;c++)v=b[c],g.push(v[1]);return g}();q=p=0;for(A=1<<c.maxDegree;0<=A?p<A:p>A;q=0<=A?++p:--p){t=[function(){var b,c;c=[];for(b=0;0<=d?b<d:b>d;0<=
d?++b:--b)c.push(1);return c}()];r=[0];l=w=0;for(x=c.maxDegree;0<=x?w<x:w>x;l=0<=x?++w:--w)0<(q&1<<l)&&(t.push(m[l]),r.push(l+1));l=g.transpose(t);q=r.length;t=g.dot(g.dot(g.inv(g.dot(t,l)),t),z);l=g.dot(l,t);w=g.sub(z,l);x=g.dot(w,w);w=x/(d-q);w=-.5*d*Math.log(2*Math.PI)-.5*d*Math.log(w)-x/(2*w);q=-2*w+q*(Math.log(d)-Math.log(2*Math.PI));q<y&&(y=q,u=[r,t,l])}return u}},{numeric:7}],99:[function(b,c,d){var g;g=b("static-kdtree");c.exports=function(b,c){var d,l,m,t,u,q,n,r,p,w,v;null==c&&(c=10);v=
g(b);n=function(){var d,g,k;k=[];d=0;for(g=b.length;d<g;d++)r=b[d],k.push(v.knn(r,c+1).slice(1));return k}();w=function(c,d){var g,h,k,l,m,n;g=b[c];h=b[d];c=m=l=0;for(n=g.length;0<=n?m<n:m>n;c=0<=n?++m:--m)k=g[c]-h[c],l+=k*k;return l};t=function(){var d,g,k;k=[];l=d=0;for(g=b.length;0<=g?d<g:d>g;l=0<=g?++d:--d)k.push(w(l,n[l][c-1]));return k}();p=function(b,c){return Math.max(w(b,c),t[c])};u=function(b){var d,f,g,k,l;k=0;l=n[b];f=0;for(g=l.length;f<g;f++)d=l[f],k+=p(b,d);return c/k};q=function(){var c,
d,g;g=[];l=c=0;for(d=b.length;0<=d?c<d:c>d;l=0<=d?++c:--c)g.push(u(l));return g}();return function(){var g,p,r,t,u,v;v=[];l=g=0;for(t=b.length;0<=t?g<t:g>t;l=0<=t?++g:--g){d=0;u=n[l];p=0;for(r=u.length;p<r;p++)m=u[p],d+=q[m];d/=c;v.push([l,d/q[l]])}return v}().sort(function(b,c){return c[1]-b[1]})}},{"static-kdtree":9}],100:[function(b,c,d){c.exports=function(b){var c,d;d=d3.median(b);c=d3.median(b.map(function(b){return Math.abs(b-d)}));return b.map(function(b,g){return[g,Math.abs(b-d)/c]}).sort(function(b,
c){return c[1]-b[1]})}},{}],101:[function(b,c,d){var g;g=b("../core/font/tester.coffee");c.exports=function(b,c,d){var l,m,t,u,q;d||(d={});c=c||{};q=d.parent||g("svg").append("text");t=[];b instanceof Array||(b=[b]);b=q.selectAll("tspan").data(b);u=0;"letter-spacing"in c&&(u=parseFloat(c["letter-spacing"]),delete c["letter-spacing"]);m=function(b){var c;c=0;u&&(c=(d3.select(b).text().length-1)*u);return b.getComputedTextLength()+c};l=function(b){return b.parentNode.getBBox().height||b.getBoundingClientRect().height};
b.enter().append("tspan").text(String).style(c).attr({left:"0px",position:"absolute",top:"0px",x:0,y:0}).each(function(b){if("function"===typeof d.mod)return d.mod(this)}).each(function(b){var c,d;c=d3.select(this).selectAll("tspan");c.size()?(d=[],c.each(function(){return d.push(m(this))}),d=d3.max(d)):d=m(this);c=l(this);return t.push({height:c,text:b,width:d})});b.remove();d.parent||q.remove();return t}},{"../core/font/tester.coffee":68}],102:[function(b,c,d){var g,f;g=b("../core/font/tester.coffee");
f=function(b){var c,d,m,t,u,q,n,r,p,w,v;b instanceof Array||(b=b.split(","));d=0;for(m=b.length;d<m;d++)c=b[d],c.trim();m=b.join(", ");c=f.complete;if(m in c)return c[m];r=function(b){return w.append("span").style("font-family",b).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")};p=function(b,c){var d,f,g;d=r(b);f=d.node().offsetWidth;g=c.node().offsetWidth;d.remove();return f!==g};w=g("div");q=r("monospace");n=r("sans-serif");
t=0;for(u=b.length;t<u;t++)if(d=b[t],(v=p(d+",monospace",q))||(v=p(d+",sans-serif",n)),v){v=d;break}v||(v="sans-serif");q.remove();n.remove();return c[m]=v};f.complete={};c.exports=f},{"../core/font/tester.coffee":68}],103:[function(b,c,d){var g=b("../array/sort.coffee"),f=b("../core/methods/attach.coffee"),h=b("../core/data/format.js"),k=b("../core/data/keys.coffee"),l=b("../core/data/load.coffee"),m=b("../core/fetch/data.js"),t=b("../client/ie.js"),u=b("../core/methods/reset.coffee"),q=b("../core/console/print.coffee");
c.exports=function(){var c={types:{auto:b("./types/auto.js"),button:b("./types/button/button.coffee"),drop:b("./types/drop/drop.coffee"),toggle:b("./types/toggle.js")},self:function(b){b=c.data.value instanceof Array&&c.data.value.length>c.data.large;c.draw.timing=c.draw.first||b||t?0:c.timing.ui;if(c.data.value instanceof Array){c.dev.value&&q.group('drawing "'+c.type.value+'"');c.data.changed&&(c.data.cache={},k(c,"data"),h(c));c.data.viz=m(c);c.data.sort.value&&(c.data.changed||c.order.changed||
c.order.sort.changed)&&g(c.data.viz,c.order.value||c.text.value,c.order.sort.value,c.color.value,c);if(!1===c.focus.value&&0>["auto","button"].indexOf(c.type.value)){if((b=c.data.element.value)&&"select"===b.node().tagName.toLowerCase()){var d=b.property("selectedIndex"),d=0>d?0:d;b=b.selectAll("option")[0][d];if(b=b.getAttribute("data-"+c.id.value)||b.getAttribute(c.id.value))c.focus.value=b}!1===c.focus.value&&c.data.viz.length&&(c.focus.value=c.data.viz[0][c.id.value]);c.dev.value&&!1!==c.focus.value&&
q.log('"value" set to "'+c.focus.value+'"')}var f=function(b,d){d="number"!==typeof d?1===c.id.nesting.length?0:c.id.nesting.length-1:d;var g=c.id.nesting[d];return 0<d&&(!(g in b)||b[g]instanceof Array)?f(b,d-1):g};if(c.data.changed){if("auto"===c.search.value?10<c.data.viz.length?(c.search.enabled=!0,c.dev.value&&q.log("Search enabled.")):(c.search.enabled=!1,c.dev.value&&q.log("Search disabled.")):c.search.enabled=c.search.value,b=c.data.element.value?c.data.element.value.node().tagName.toLowerCase():
"",c.data.element.value&&"select"===b){b=[];for(var v in c.data.nested.all)b=b.concat(c.data.nested.all[v]);options=c.data.element.value.selectAll("option").data(b,function(b){var c=b?f(b):!1;return b&&c in b?b[c]:!1});options.exit().remove();options.enter().append("option");options.each(function(b){var d=f(b),g=d===c.id.value?c.text.value||c.id.value:!0!==c.text.nesting&&d in c.text.nesting?c.text.nesting[d]:d,h;for(h in b)"object"!==typeof b[h]&&(h===g&&d3.select(this).html(b[h]),0<=["alt","value"].indexOf(h)?
d3.select(this).attr(h,b[h]):d3.select(this).attr("data-"+h,b[h]));this.selected=b[d]===c.focus.value?!0:!1})}}else c.focus.changed&&c.data.element.value&&(v=c.data.element.value.node().tagName.toLowerCase(),"select"===v?c.data.element.value.selectAll("option").each(function(b){b[f(b)]===c.focus.value?this.selected=!0:this.selected=!1}):(v=c.data.element.value.attr("type").toLowerCase(),"radio"===v&&c.data.element.value.each(function(b){this.checked=this.value===c.focus.value?!0:!1})));if("auto"!==
c.type.value){if(!c.container.ui){c.container.ui=c.container.value.selectAll("div#d3plus_"+c.type.value+"_"+c.container.id).data(["container"]);if(v=c.data.element.value?c.data.element.value[0][0]:null)v.id?v="#"+v.id:(b=v.getAttribute(c.id.value)?c.id.value:"data-"+c.id.value,v=v.getAttribute(b)?"["+b+"="+v.getAttribute(b)+"]":null);c.container.ui.enter().insert("div",v).attr("id","d3plus_"+c.type.value+"_"+c.container.id).style("position","relative").style("overflow","visible").style("vertical-align",
"top")}c.container.ui.style("display",c.ui.display.value);c.container.ui.transition().duration(c.draw.timing).style("margin",c.ui.margin.css);v=c.container.ui.selectAll("div.d3plus_title").data(c.title.value?[c.title.value]:[]);v.enter().insert("div","#d3plus_"+c.type.value+"_"+c.container.id).attr("class","d3plus_title").style("display","inline-block");v.style("color",c.font.color).style("font-family",c.font.family.value).style("font-size",c.font.size+"px").style("font-weight",c.font.weight).style("padding",
c.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",c.ui.border+"px").text(String).each(function(b){c.margin.left=this.offsetWidth})}c.data.value.length?(v=c.format.locale.value.visualization[c.type.value],c.dev.value&&q.time("drawing "+v),c.types[c.type.value](c),c.dev.value&&q.timeEnd("drawing "+v)):!c.data.url||c.data.loaded&&!c.data.stream||l(c,"data",c.self.draw);c.dev.value&&q.timeEnd("total draw time");u(c)}}};f(c,{active:b("./methods/active.coffee"),
alt:b("./methods/alt.coffee"),color:b("./methods/color.coffee"),config:b("./methods/config.coffee"),container:b("./methods/container.coffee"),data:b("./methods/data.js"),depth:b("./methods/depth.coffee"),dev:b("./methods/dev.coffee"),draw:b("./methods/draw.js"),focus:b("./methods/focus.coffee"),font:b("./methods/font.coffee"),format:b("./methods/format.coffee"),height:b("./methods/height.coffee"),history:b("./methods/history.coffee"),hover:b("./methods/hover.coffee"),icon:b("./methods/icon.coffee"),
id:b("./methods/id.coffee"),keywords:b("./methods/keywords.coffee"),margin:b("./methods/margin.coffee"),open:b("./methods/open.coffee"),order:b("./methods/order.coffee"),remove:b("./methods/remove.coffee"),search:b("./methods/search.coffee"),select:b("./methods/select.coffee"),selectAll:b("./methods/selectAll.coffee"),text:b("./methods/text.coffee"),timing:b("./methods/timing.coffee"),title:b("./methods/title.coffee"),type:b("./methods/type.coffee"),ui:b("./methods/ui.coffee"),width:b("./methods/width.coffee")});
return c.self}},{"../array/sort.coffee":34,"../client/ie.js":37,"../core/console/print.coffee":52,"../core/data/format.js":56,"../core/data/keys.coffee":58,"../core/data/load.coffee":59,"../core/fetch/data.js":64,"../core/methods/attach.coffee":79,"../core/methods/reset.coffee":92,"./methods/active.coffee":104,"./methods/alt.coffee":105,"./methods/color.coffee":106,"./methods/config.coffee":107,"./methods/container.coffee":108,"./methods/data.js":109,"./methods/depth.coffee":110,"./methods/dev.coffee":111,
"./methods/draw.js":112,"./methods/focus.coffee":113,"./methods/font.coffee":114,"./methods/format.coffee":115,"./methods/height.coffee":116,"./methods/history.coffee":117,"./methods/hover.coffee":118,"./methods/icon.coffee":119,"./methods/id.coffee":120,"./methods/keywords.coffee":121,"./methods/margin.coffee":122,"./methods/open.coffee":123,"./methods/order.coffee":124,"./methods/remove.coffee":125,"./methods/search.coffee":126,"./methods/select.coffee":127,"./methods/selectAll.coffee":128,"./methods/text.coffee":129,
"./methods/timing.coffee":130,"./methods/title.coffee":131,"./methods/type.coffee":132,"./methods/ui.coffee":133,"./methods/width.coffee":134,"./types/auto.js":135,"./types/button/button.coffee":136,"./types/drop/drop.coffee":141,"./types/toggle.js":158}],104:[function(b,c,d){b("../../core/methods/filter.coffee");c.exports={accepted:[!1,Array,Function,Number,String],value:!1}},{"../../core/methods/filter.coffee":80}],105:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,
Array,Function,Object,String],mute:b(!0),solo:b(!0),value:"alt"}},{"../../core/methods/filter.coffee":80}],106:[function(b,c,d){c.exports={accepted:[String],value:"color"}},{}],107:[function(b,c,d){c.exports={accepted:[Object],objectAccess:!1,process:function(b,c){var d,k;for(d in b)if(k=b[d],d in c.self)c.self[d](k);return b},value:{}}},{}],108:[function(b,c,d){var g;g=b("../../util/d3selection.coffee");c.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(b){return!1===
b?d3.select("body"):g(b)?b:b instanceof Array?d3.select(b[0][0]):d3.select(b)},value:d3.select("body")}},{"../../util/d3selection.coffee":207}],109:[function(b,c,d){var g=b("../../util/d3selection.coffee"),f=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(b,c){var d=!1;g(b)?d=b:"string"!==typeof b||d3.select(b).empty()||(d=d3.select(b));d&&c.self.container(d3.select(d.node().parentNode));return d},
value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(b,c){"default"===c.container.id&&b.length&&c.self.container({id:"default"+b.length});return f(b,c,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.coffee":86,"../../util/d3selection.coffee":207}],110:[function(b,c,d){c.exports={accepted:[Number],value:0}},{}],111:[function(b,c,d){c.exports={accepted:[Boolean],value:!1}},
{}],112:[function(b,c,d){var g=b("../../util/d3selection.coffee"),f=b("../../core/parse/hideElement.js"),h=b("../../core/parse/element.js"),k=b("../../core/console/print.coffee"),l=b("../../string/format.js");c.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(b,c){if(!1===this.initialized)return this.initialized=!0,b;!c.data.value||c.data.value instanceof Array&&!g(c.data.value)?c.data.element.value&&c.data.element.value.call(f):c.data.value=h(c);void 0===b&&"function"===typeof this.value&&
(b=this.value);if(!1===c.container.value){var d=c.format.locale.value.dev.setContainer;k.warning(d,"container")}else c.container.value.empty()?(d=c.format.locale.value.dev.noContainer,k.warning(l(d,'"'+c.container.value+'"'),"container")):(c.dev.value&&k.time("total draw time"),c.container.value.call(c.self));if("function"===typeof b&&c.history.chain.length){var q={};changes.forEach(function(b){var c=b.method;delete b.method;q[c]=b});b(q);c.history.chain=[]}return b},update:!0,value:void 0}},{"../../core/console/print.coffee":52,
"../../core/parse/element.js":95,"../../core/parse/hideElement.js":96,"../../string/format.js":172,"../../util/d3selection.coffee":207}],113:[function(b,c,d){c.exports={accepted:[!1,Number,String],deprecates:"highlight",process:function(b,c){var d,k,l,m,t,u;if((k=c.data.element.value)&&0<=["string","number"].indexOf(typeof b))if(d=k.node().tagName.toLowerCase(),l=k.attr("type"),"select"===d)for(u=k.selectAll("option"),l=m=0,t=u.length;m<t;l=++m)(d=u[l])&&d[c.id.value]===b&&(k.node().selectedIndex=
l);else if("input"===d&&"radio"===l)for(l=0,m=k.length;l<m;l++)this.checked=(d=k[l])&&d[c.id.value]===b;return b},value:!1}},{}],114:[function(b,c,d){var g,f;f=b("../../core/methods/font/family.coffee");d=b("../../core/methods/font/align.coffee");g=b("../../core/methods/font/decoration.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={align:d(),color:"#444444",decoration:g(),family:f(),secondary:{align:d(),color:"#444444",decoration:g(),family:f(),size:12,spacing:0,transform:b(),
weight:200},size:12,spacing:0,transform:b(),weight:200}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],115:[function(b,c,d){var g,f,h,k;g=b("../../number/format.coffee");f=b("../../core/locale/locale.coffee");h=b("../../object/merge.coffee");k=b("../../string/title.coffee");c.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},
deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(f)},process:function(b){var c;c=f.en_US;"en_US"!==b&&(c=h(c,f[b]));this.language=b;return c},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(b,c){if("string"===typeof b)c.self.format({locale:b});else if("function"===typeof b)return b;return this.value},text:{accepted:[!1,Function],value:!1},value:function(b,c){var d,f;c||(c={});f=c.vars||{};return f.time&&f.time.value&&c.key===f.time.value?
(d=b.constructor===Date?b:new Date(b),f.data.time.format(d)):"number"===typeof b?(d=this.number.value||g,d(b,c)):"string"===typeof b?(d=this.text.value||k,d(b,c)):JSON.stringify(b)}}},{"../../core/locale/locale.coffee":78,"../../number/format.coffee":169,"../../object/merge.coffee":170,"../../string/title.coffee":175}],116:[function(b,c,d){c.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}},{}],117:[function(b,c,d){c.exports={back:function(){if(this.states.length)return this.states.pop()()},
chain:[],reset:function(){var b;for(b=[];this.states.length;)b.push(this.states.pop()());return b},states:[]}},{}],118:[function(b,c,d){c.exports={accepted:[Boolean,Number,String],value:!1}},{}],119:[function(b,c,d){b=b("../../core/methods/process/icon.coffee");c.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:b,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:b,rotate:0,value:!1},drop:{accepted:[!1,
String],fallback:"&#x276f;",opacity:1,process:b,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:b,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:b,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}},{"../../core/methods/process/icon.coffee":88}],120:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[Array,String],dataFilter:!0,mute:b(!0),
nesting:["value"],solo:b(!0),value:"value"}},{"../../core/methods/filter.coffee":80}],121:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,Array,Function,Object,String],mute:b(!0),solo:b(!0),value:"keywords"}},{"../../core/methods/filter.coffee":80}],122:[function(b,c,d){var g;g=b("../../core/methods/process/margin.coffee");c.exports={accepted:[Number,Object,String],process:function(b){var c;void 0===b&&(b=this.value);c=b;g(b,this);return c},value:0}},{"../../core/methods/process/margin.coffee":89}],
123:[function(b,c,d){c.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],124:[function(b,c,d){c.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],deprecates:["sort"],value:"asc"},value:!1}},{}],125:[function(b,c,d){c.exports={accepted:void 0,process:function(b,c){this.initialized&&c.container.value.remove()},value:void 0}},{}],126:[function(b,c,d){c.exports={accepted:["auto",Boolean],process:function(b){"Boolean"===typeof b&&(this.enabled=b);return b},
term:"",value:"auto"}},{}],127:[function(b,c,d){c.exports={accepted:[String],chainable:!1,process:function(b,c){var d;return(d=c.container.value)&&b?d.select(b):b},value:void 0}},{}],128:[function(b,c,d){c.exports={accepted:[String],chainable:!1,process:function(b,c){var d;return(d=c.container.value)&&b?d.selectAll(b):b},value:void 0}},{}],129:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,String],nesting:!0,mute:b(!0),solo:b(!0),secondary:{accepted:[!1,String],nesting:!0,
value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],130:[function(b,c,d){c.exports={mouseevents:60,ui:200}},{}],131:[function(b,c,d){var g,f,h;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");h=b("../../core/methods/font/transform.coffee");f=b("../../string/strip.js");c.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:d(),family:g(),size:16,transform:h(),weight:400},link:!1,process:function(b,c){var d;0===
c.container.id.indexOf("default")&&b&&(d=f(b).toLowerCase(),c.self.container({id:d}));return b},value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../string/strip.js":174}],132:[function(b,c,d){c.exports={accepted:function(b){return d3.keys(b.types)},value:"auto"}},{}],133:[function(b,c,d){var g,f,h;f=b("../../core/methods/font/family.coffee");d=b("../../core/methods/font/align.coffee");g=b("../../core/methods/font/decoration.coffee");
h=b("../../core/methods/process/margin.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={align:d("center"),border:1,color:{primary:{process:function(b,c){var d;d=this.value;c.ui.color.secondary.value||(c.ui.color.secondary.value=d3.rgb(d).darker(.75).toString());return b},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:d("center"),color:"#444",decoration:g(),family:f(),size:11,transform:b(),weight:200},margin:{process:function(b){var c;
void 0===b&&(b=this.value);c=b;h(b,this);return c},value:5},padding:{process:function(b){var c;void 0===b&&(b=this.value);c=b;h(b,this);return c},value:5}}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../core/methods/process/margin.coffee":89}],134:[function(b,c,d){c.exports={accepted:[!1,Number],secondary:!1,value:!1}},{}],135:[function(b,c,d){c.exports=function(b){var c=
b.data.value.length;1===c?b.self.type("button").draw():5>c?b.self.type("toggle").draw():b.self.type("drop").draw()}},{}],136:[function(b,c,d){c.exports=function(c){var d,h,k,l,m,t,u,q;t=b("../../../core/console/print.coffee");k=b("./functions/color.coffee");l=b("./functions/icons.js");m=b("./functions/mouseevents.coffee");u=b("./functions/style.js");d=c.container.ui.selectAll("div.d3plus_node").data(c.data.viz,function(b){return b[c.id.value]});c.dev.value&&t.time("enter");d.enter().append("div").attr("class",
"d3plus_node").call(k,c).call(u,c).call(l,c).call(m,c);c.dev.value&&t.timeEnd("enter");c.draw.update||c.draw.timing?(c.dev.value&&t.time("ordering"),d.order(),c.dev.value&&t.timeEnd("ordering"),q=d):(h=[c.focus.previous,c.focus.value,c.hover.previous,c.hover.value].filter(function(b){return b}),q=d.filter(function(b){return 0<=h.indexOf(b[c.id.value])}));c.dev.value&&t.time("update");q.classed("d3plus_button_active",function(b){return c.focus.value===b[c.id.value]});c.draw.timing?q.transition().duration(c.draw.timing).call(k,
c).call(u,c):q.call(k,c).call(u,c);q.call(l,c).call(m,c);c.dev.value&&t.timeEnd("update");return d.exit().remove()}},{"../../../core/console/print.coffee":52,"./functions/color.coffee":137,"./functions/icons.js":138,"./functions/mouseevents.coffee":139,"./functions/style.js":140}],137:[function(b,c,d){c.exports=function(c,d){var h,k;h=b("../../../../color/legible.coffee");b("../../../../color/lighter.coffee");k=b("../../../../color/text.coffee");return c.style("background-color",function(b){var c;
c=d.focus.value===b[d.id.value]?d.ui.color.secondary.value:d.ui.color.primary.value;d.hover.value===b[d.id.value]&&(c=d3.rgb(c).darker(.15).toString());return c}).style("color",function(b){var c,g;g=d.focus.value===b[d.id.value]?.75:1;b[d.icon.value]&&d.data.viz.length<d.data.large||!b[d.color.value]?(c=d.focus.value===b[d.id.value]?d.ui.color.secondary.value:d.ui.color.primary.value,d.hover.value===b[d.id.value]&&(c=d3.rgb(c).darker(.15).toString()),b=k(c)):b=h(b[d.color.value]);b=d3.rgb(b);return"rgba("+
b.r+","+b.g+","+b.b+","+g+")"}).style("border-color",d.ui.color.secondary.value)}},{"../../../../color/legible.coffee":44,"../../../../color/lighter.coffee":45,"../../../../color/text.coffee":50}],138:[function(b,c,d){var g=b("../../../../client/prefix.coffee"),f=b("../../../../client/rtl.coffee");c.exports=function(b,c){var d="right"===c.font.align.value&&!f||f&&"right"===c.font.align.value;b.each(function(b,h){var u=["label"];b[c.icon.value]&&c.data.viz.length<=c.data.large&&u.push("icon");var q=
c.icon.button.value;b[c.id.value]===c.focus.value&&c.icon.select.value?(q=c.icon.select.value,u.push("selected")):q&&!1!==b.d3plus.icon&&u.push("selected");var n=0,r=d3.select(this).selectAll("div.d3plus_button_element").data(u,function(b){return b});r.enter().append("div").style("display",function(b){return"label"===b?"block":"absolute"});r.order().attr("class",function(b){var c="";"selected"===b&&0===q.indexOf("fa-")&&(c=" fa "+q);return"d3plus_button_element d3plus_button_"+b+c}).html(function(d){return"label"===
d?c.format.value(b[c.text.value&&c.text.value in b&&!(b[c.text.value]instanceof Array)?c.text.value:c.id.value]):"selected"===d&&0>q.indexOf("fa-")?q:""}).style("background-image",function(d){return"icon"===d?"url('"+b[c.icon.value]+"')":"none"}).style("background-color",function(d){return"icon"===d&&"knockout"===b.style?b[c.color.value]||c.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(b){return"label"===b?c.font.align.value:"center"}).style("position",
function(b){return"label"==b?"static":"absolute"}).style("width",function(b){if("label"===b)return"auto";n=c.height.value?c.height.value-(c.ui.padding.top+c.ui.padding.bottom)-2*c.ui.border:c.font.size+c.ui.border;return n+"px"}).style("height",function(b){return"icon"===b?n+"px":"auto"}).style("margin-top",function(b){return"label"===b?"0px":-(this.offsetHeight||this.getBoundingClientRect().height?this.offsetHeight||this.getBoundingClientRect().height:"selected"===b?c.font.size:n)/2+"px"}).style("top",
function(b){return"label"===b?"auto":"50%"}).style("left",function(b){return"icon"===b&&!d||"selected"===b&&d?c.ui.padding.left+"px":"auto"}).style("right",function(b){return"icon"===b&&d||"selected"===b&&!d?c.ui.padding.right+"px":"auto"}).style(g()+"transition",function(b){return"selected"===b?c.draw.timing/1E3+"s":"none"}).style(g()+"transform",function(b){b="selected"===b?c.icon.select.rotate:"none";return"string"===typeof b?b:"rotate("+b+"deg)"}).style("opacity",function(b){return"selected"===
b?c.icon.select.opacity:1});r.exit().remove();r=d3.select(this).selectAll(".d3plus_button_label");if(0<n){var p=c.ui.padding,p=3===u.length?p.top+"px "+(2*p.right+n)+"px "+p.bottom+"px "+(2*p.left+n)+"px":0<=u.indexOf("icon")&&!f||0<=u.indexOf("selected")&&f?p.top+"px "+p.right+"px "+p.bottom+"px "+(2*p.left+n)+"px":p.top+"px "+(2*p.right+n)+"px "+p.bottom+"px "+p.left+"px";r.style("padding",p)}else r.style("padding",c.ui.padding.css);"number"===typeof c.width.value?(u=c.width.value,u-=parseFloat(r.style("padding-left"),
10),u-=parseFloat(r.style("padding-right"),10),u-=2*c.ui.border,u+="px"):u="auto";r.style("width",u)})}},{"../../../../client/prefix.coffee":39,"../../../../client/rtl.coffee":40}],139:[function(b,c,d){c.exports=function(c,d,h){var k,l;h=b("./color.coffee");k=b("../../../../client/pointer.coffee");l=b("../../../../client/ie.js");return c.on(k.over,function(b,c){d.self.hover(b[d.id.value]);return l||!d.draw.timing?d3.select(this).style("cursor","pointer").call(h,d):d3.select(this).style("cursor","pointer").transition().duration(d.timing.mouseevents).call(h,
d)}).on(k.out,function(b){d.self.hover(!1);return l||!d.draw.timing?d3.select(this).style("cursor","auto").call(h,d):d3.select(this).style("cursor","auto").transition().duration(d.timing.mouseevents).call(h,d)}).on(k.click,function(b){if(!1!==d.focus.value)return d.self.focus(b[d.id.value]).draw();if(d.focus.callback)return d.focus.callback(b,d.self)})}},{"../../../../client/ie.js":37,"../../../../client/pointer.coffee":38,"./color.coffee":137}],140:[function(b,c,d){c.exports=function(b,c){b.style("position",
"relative").style("margin",c.ui.margin.css).style("display",c.ui.display.value).style("border-style","solid").style("border-width",c.ui.border+"px").style("font-family",c.font.family.value).style("font-size",c.font.size+"px").style("font-weight",c.font.weight).style("letter-spacing",c.font.spacing+"px")}},{}],141:[function(b,c,d){c.exports=function(c){var d,h,k,l,m,t,u,q,n,r,p;k=b("./functions/element.coffee");l=b("./functions/keyboard.coffee");p=b("./functions/window.js");r=b("./functions/width.js");
d=b("./functions/button.js");u=b("./functions/selector.js");q=b("./functions/title.js");t=b("./functions/search.js");m=b("./functions/list.js");h=b("./functions/data.js");n=b("./functions/update.js");c.margin.top=0;c.margin.title=0;k(c);l(c);p(c);r(c);d(c);u(c);q(c);t(c);m(c);h(c);return n(c)}},{"./functions/button.js":144,"./functions/data.js":145,"./functions/element.coffee":146,"./functions/keyboard.coffee":149,"./functions/list.js":150,"./functions/search.js":152,"./functions/selector.js":153,
"./functions/title.js":154,"./functions/update.js":155,"./functions/width.js":156,"./functions/window.js":157}],142:[function(b,c,d){c.exports=function(b,c,d){var k=[];d=d||b.active.value;if(d instanceof Array)for(var l=0;l<d.length;l++)k.push(this(b,c,d[l]));else l=typeof d,"number"===l?k.push(b.depth.value===d):"function"===l?k.push(d(c)):k.push(c===d);return 0<=k.indexOf(!0)}},{}],143:[function(b,c,d){var g=b("../../../../core/console/print.coffee");c.exports=function(b){b.dev.value&&g.time("rotating arrow");
var c="&#x276f;"===b.icon.drop.value?90:0;b.container.button.icon({select:{opacity:b.open.value?.5:1,rotate:b.open.value!=b.open.flipped.value?180+c:c}}).draw();b.dev.value&&g.timeEnd("rotating arrow")}},{"../../../../core/console/print.coffee":52}],144:[function(b,c,d){var g=b("../../../../util/copy.coffee"),f=b("../../../../client/pointer.coffee"),h=b("../../../form.js"),k=b("../../../../core/console/print.coffee");c.exports=function(b){"button"in b.container||(b.dev.value&&k.time("creating main button"),
b.container.button=h().container(b.container.ui).type("button").ui({margin:0}),b.dev.value&&k.timeEnd("creating main button"));if(b.focus.changed||b.data.changed||b.depth.changed){var c=b.depth.value,d=g(b.data.value.filter(function(d){for(var f=!1,g=0;g<b.id.nesting.length;g++)if(f=b.id.nesting[g],f=f in d&&d[f]===b.focus.value){c=g;break}return f})[0]);d||(d=b.container.button.data()[0]||b.data.viz[0]);b.container.button.data([d]).id(b.id.nesting).depth(c)}d=!0===b.hover.value?b.focus.value:!1;
b.container.button.draw({update:b.draw.update}).focus("").font(b.font).format(b.format).hover(d).icon({button:b.icon.drop.value,select:b.icon.drop.value,value:b.icon.value}).text(b.text.value).timing({ui:b.draw.timing}).ui({border:b.ui.border,color:b.ui.color,padding:b.ui.padding.css}).width(b.width.value).draw();d=b.container.button.container(Object).ui;b.margin.top+=d.node().offsetHeight||d.node().getBoundingClientRect().height;d.on(f.click,function(){b.self.open(!b.open.value).draw()})}},{"../../../../client/pointer.coffee":38,
"../../../../core/console/print.coffee":52,"../../../../util/copy.coffee":206,"../../../form.js":103}],145:[function(b,c,d){var g=b("../../../../string/format.js"),f=b("../../../../string/strip.js");c.exports=function(b){if(b.data.url&&!b.data.loaded){var c={};c[b.text.value||b.id.value]=b.format.value(b.format.locale.value.ui.loading);b.data.filtered=[c];b.data.changed="loading"!==b.data.lastFilter;b.data.lastFilter="loading"}else if(b.open.value)if(b.search.term){var d=f(b.search.term).split("_"),
m=[b.id.value,b.text.value,b.alt.value,b.keywords.value],m=m.filter(function(b){return b}),d=d.filter(function(b){return""!==b}),t=[],u=[],q=[],n=[];b.id.nesting.forEach(function(c){n=n.concat(b.data.nested.all[c])});n.forEach(function(c){var g=!1;m.forEach(function(k){if(!g&&k in c&&"string"===typeof c[k]){var m=c[k].toLowerCase();if(0<=[b.text.value,b.id.value].indexOf(k)&&0===m.indexOf(b.search.term))t.push(c),g=!0;else if(0<=m.indexOf(b.search.term))u.push(c),g=!0;else{k=f(m).split("_");for(var n in k)if(g)break;
else for(var r in d)if(0===k[n].indexOf(d[r])){q.push(c);g=!0;break}}}})});b.data.filtered=d3.merge([t,u,q]);b.data.filtered.forEach(function(b,c){b.d3plus_order=c});b.data.changed=!0;b.data.lastFilter="search";if(0===b.data.filtered.length){var c={},r=b.format.value(b.format.locale.value.ui.noResults);c[b.text.value||b.id.value]=g(r,'"'+b.search.term+'"');b.data.filtered=[c]}}else b.data.filtered=b.data.viz,b.data.changed="viz"!==b.data.lastFilter,b.data.lastFilter="viz",1<b.id.nesting.length&&b.depth.value<
b.id.nesting.length-1&&(b.data.filtered=b.data.filtered.filter(function(c){"endPoint"in c.d3plus&&c.d3plus.endPoint===b.depth.value&&(c.d3plus.icon=!1);return!0}),b.data.changed="depth"!==b.data.lastFilter,b.data.lastFilter="depth");else b.data.filtered=[]}},{"../../../../string/format.js":172,"../../../../string/strip.js":174}],146:[function(b,c,d){c.exports=function(b){if(b.data.element.value)return b.data.element.value.on("focus."+b.container.id,function(){return b.self.hover(!0).draw()}),b.data.element.value.on("blur."+
b.container.id,function(){if(b.search.enabled?d3.event.relatedTarget!==b.container.value.select("input").node():1)return b.self.open(!1).hover(!1).draw()}),b.data.element.value.on("change."+b.container.id,function(){return b.self.focus(this.value).draw()}),b.data.element.value.on("keydown.cancel_"+b.container.id,function(){if(9!==d3.event.keyCode)return d3.event.preventDefault()})}},{}],147:[function(b,c,d){c.exports=function(b){var c=b.height.secondary,d=b.container.button.container().node().getBoundingClientRect(),
k=window.innerHeight-d.bottom-2*b.ui.border-b.ui.margin.top-b.ui.margin.bottom-b.ui.padding.top-b.ui.padding.bottom;k<3*d.height&&(k=d.top-10,b.self.open({flipped:!0}));"number"!==typeof c&&(c=k);c>b.height.max&&(c=b.height.max);b.self.height({secondary:c})}},{}],148:[function(b,c,d){var g,f,h,k;g=b("./active.js");f=b("../../../../util/copy.coffee");h=b("../../../form.js");k=b("../../../../core/console/print.coffee");c.exports=function(b){var c,d,u;b.open.value&&(b.dev.value&&k.time("updating list items"),
"items"in b.container||(b.container.items=h().container(b.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),d=b.draw.timing?b.data.large:1,u=f(b.order),u.value=b.search.term.length?"d3plus_order":b.order.value,c=b.depth.value===b.id.nesting.length-1,(b.focus.changed||!1===b.container.items.focus())&&b.container.items.focus(b.focus.value,function(c){var d,f,h;d=b.data.filtered.filter(function(d){return d[b.id.value]===c})[0];b.depth.value<b.id.nesting.length-1&&b.id.nesting[b.depth.value+
1]in d?(f=b.depth.value,h=b.id.solo.value,b.history.states.push(function(){return b.self.depth(f).id({solo:h}).draw()}),b.self.depth(b.depth.value+1).id({solo:[c]}).draw()):(b.depth.changed||b.self.open(!1),(d=c!==b.focus.value)&&b.active.value&&(d=g(b,c)),d&&b.self.focus(c).draw())}),b.container.items.active(b.active.value).data({large:d,sort:b.data.sort.value,value:b.data.filtered}).draw({update:b.draw.update}).font(b.font.secondary).format(b.format).hover(b.hover.value).id(b.id.value).icon({button:c?
!1:b.icon.next,select:c?b.icon.select:!1,value:b.icon.value}).order(u).text(b.text.secondary.value||b.text.value).timing({ui:b.draw.timing}).ui({color:{primary:1===b.id.nesting.length?b.ui.color.primary.value:b.ui.color.secondary.value,secondary:b.ui.color.secondary.value},padding:b.ui.padding.css}).draw(),b.dev.value&&k.timeEnd("updating list items"))}},{"../../../../core/console/print.coffee":52,"../../../../util/copy.coffee":206,"../../../form.js":103,"./active.js":142}],149:[function(b,c,d){c.exports=
function(b){return d3.select(window).on("keydown."+b.container.id,function(){var c,d,k,l,m,t,u,q,n,r;t=d3.event.keyCode;if(b.open.value||!0===b.hover.value){q=!0===b.hover.value?"focus":"hover";l=!1;n=b.data.filtered;k=m=0;for(u=n.length;m<u;k=++m)if(c=n[k],c[b.id.value]===b[q].value){l=k;break}if(9===t&&b.open.value&&(!b.search.enabled||b.search.enabled&&!d3.event.shiftKey))return b.self.open(!1).hover(!1).draw();if(0<=[38,40].indexOf(t))return!1===l?l=0:38===t?b.open.value&&(0>=l?l=b.data.filtered.length-
1:--l):40===t&&b.open.value&&(l=l>=b.data.filtered.length-1?0:l+1),c="boolean"!==typeof b.hover.value?b.data.filtered[l][b.id.value]:b.focus.value,b.self.hover(c).open(!0).draw();if(13===t)return"boolean"!==typeof b.hover.value?(c=b.data.filtered.filter(function(c){return c[b.id.value]===b.hover.value})[0],d=b.depth.value,d<b.id.nesting.length-1&&b.id.nesting[d+1]in c?(r=b.id.solo.value,b.history.states.push(function(){return b.self.depth(d).id({solo:r}).draw()}),b.self.depth(b.depth.value+1).id({solo:[b.hover.value]}).draw()):
b.self.focus(b.hover.value).hover(!0).draw()):b.self.hover(b.focus.value).open(!0).draw();if(27===t){if(b.open.value)return b.self.open(!1).hover(!0).draw();if(!0===b.hover.value)return b.self.hover(!1).draw()}}})}},{}],150:[function(b,c,d){var g=b("../../../../core/console/print.coffee");c.exports=function(b){b.dev.value&&g.time("populating list");b.container.list=b.container.selector.selectAll("div.d3plus_drop_list").data(["list"]);b.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id",
"d3plus_drop_list_"+b.container.id).style("overflow-y","auto").style("overflow-x","hidden");b.dev.value&&g.timeEnd("populating list")}},{"../../../../core/console/print.coffee":52}],151:[function(b,c,d){var g=b("../../../../core/console/print.coffee");c.exports=function(b){if(b.open.value){b.dev.value&&g.time("calculating height");var c=!1;"none"==b.container.selector.style("display")&&(c=!0);c&&b.container.selector.style("display","block");var d=b.container.selector.style("height"),l=b.container.selector.property("scrollTop"),
m=b.container.list.style("max-height"),t=b.container.list.property("scrollTop");b.container.selector.style("height","auto");b.container.list.style("max-height","200000px");b.container.listHeight=parseFloat(b.container.selector.style("height"),10);b.container.list.style("max-height",m).property("scrollTop",t);b.container.selector.style("height",d).property("scrollTop",l);d=!1;b.container.listHeight>b.height.secondary&&(b.container.listHeight=b.height.secondary,d=!0);c&&b.container.selector.style("display",
"none");b.dev.value&&g.timeEnd("calculating height");if(d){b.dev.value&&g.time("calculating scroll position");var c=b.container.list.select("div").selectAll("div.d3plus_node"),u=c[0][0],q="boolean"!==typeof b.hover.value?b.hover.value:b.focus.value;c.each(function(c,d){c[b.id.value]===q&&(u=this)});c=!1;"none"===b.container.selector.style("display")&&(c=!0,b.container.selector.style("display","block"));d=u.offsetTop;l=u.offsetHeight||u.getBoundingClientRect().height;m=b.container.list.property("scrollTop");
c&&b.container.selector.style("display","none");c||b.data.changed||b.depth.changed?b.container.listScroll=d:(b.container.listScroll=m,d<m?b.container.listScroll=d:d+l>m+b.height.secondary-b.search.height&&(b.container.listScroll=d-(b.height.secondary-l-b.search.height)));b.dev.value&&g.timeEnd("calculating scroll position")}else b.container.listScroll=0}else b.container.listScroll=b.container.list.property("scrollTop"),b.container.listHeight=0}},{"../../../../core/console/print.coffee":52}],152:[function(b,
c,d){var g=b("../../../../client/prefix.coffee"),f=b("../../../../core/console/print.coffee");c.exports=function(c){function d(b){b.style("padding",c.ui.padding.css).style("display","block").style("background-color",d3.rgb(c.ui.color.primary.value).darker(.15).toString())}function l(b){var d=c.width.secondary-2*c.ui.padding.left-2*c.ui.padding.right+2*c.ui.border;b.style("padding",c.ui.padding.left/2+c.ui.padding.right/2+"px").style("width",d+"px").style("border-width","0px").style("font-family",
c.font.secondary.family.value).style("font-size",c.font.secondary.size+"px").style("font-weight",c.font.secondary.weight).style("text-align",c.font.secondary.align).style("outline","none").style(g()+"border-radius","0").attr("placeholder",c.format.value(c.format.locale.value.method.search))}c.dev.value&&f.time("creating search");var m=b("./data.js"),t=b("./items.coffee"),u=b("./update.js");c.container.search=c.container.selector.selectAll("div.d3plus_drop_search").data(c.search.enabled?["search"]:
[]);c.draw.timing?(c.container.search.transition().duration(c.draw.timing).call(d),c.container.search.select("input").transition().duration(c.draw.timing).call(l)):(c.container.search.call(d),c.container.search.select("input").call(l));c.container.search.enter().insert("div","#d3plus_drop_list_"+c.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+c.container.id).call(d).append("input").attr("id","d3plus_drop_input_"+c.container.id).style("-webkit-appearance","none").call(l);
c.container.search.select("input").on("keyup."+c.container.id,function(b){b=this.value;c.search.term!==b&&(c.search.term=b,m(c),t(c),u(c))});c.container.search.exit().remove();var q=c.container.selector.style("display");c.container.selector.style("display","block");c.search.height=c.search.enabled?c.container.search.node().offsetHeight||c.container.search.node().getBoundingClientRect().height:0;c.container.selector.style("display",q);c.search.enabled&&(c.margin.title+=c.search.height);c.dev.value&&
f.timeEnd("creating search")}},{"../../../../client/prefix.coffee":39,"../../../../core/console/print.coffee":52,"./data.js":145,"./items.coffee":148,"./update.js":155}],153:[function(b,c,d){c.exports=function(b){b.container.selector=b.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]);b.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden");b.container.selector.style("padding",
b.ui.border+"px")}},{}],154:[function(b,c,d){var g=b("../../../../client/pointer.coffee"),f=b("../../../../color/lighter.coffee"),h=b("../../../../core/console/print.coffee"),k=b("../../../../color/text.coffee");c.exports=function(b){if(b.open.value){var c=function(c){c.text(b.format.value(n?b.focus.value:b.format.locale.value.ui.back)).style("padding","0px "+(b.ui.padding.left+b.ui.padding.right)+"px")},d=function(c){if(!c.empty()){var d=0===b.icon.back.value.indexOf("fa-")?" fa "+b.icon.back.value:
"",d="d3plus_drop_back"+d,f=0===b.icon.back.value.indexOf("fa-")?"":b.icon.back.value;c.style("position","absolute").attr("class",d).style("top",b.ui.padding.top+b.font.secondary.size/2/2.5+"px").html(f)}},u=function(c){c.style("padding",b.ui.padding.css).style("display","block").style("background-color",b.ui.color.secondary.value).style("font-family",b.font.secondary.family.value).style("font-size",b.font.secondary.size+"px").style("font-weight",b.font.secondary.weight).style("text-align",b.font.secondary.align).style("color",
k(b.ui.color.secondary.value))};b.dev.value&&h.time("creating title and back button");for(var q=1===b.id.solo.value.length&&0<b.depth.value,n=q,r=b.container.button.data(Object).viz[0],n=!0,p=0;p<b.id.nesting.length;p++){var w=b.id.nesting[p];if(w in r&&r[w]===b.focus.value){n=!1;break}}b.container.title=b.container.selector.selectAll("div.d3plus_drop_title").data(q?["title"]:[]);b.draw.timing?(b.container.title.transition().duration(b.draw.timing).call(u),b.container.title.select("div.d3plus_drop_title_text").transition().duration(b.draw.timing).call(c)):
(b.container.title.call(u),b.container.title.select("div.d3plus_drop_title_text").call(c));b.container.title.select("span.d3plus_drop_back").call(d);u=b.container.title.enter().insert("div","#d3plus_drop_list_"+b.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+b.container.id).call(u);u.append("span").attr("id","d3plus_drop_back_"+b.container.id).attr("class","d3plus_drop_back").call(d);u.append("div").attr("id","d3plus_drop_title_text_"+b.container.id).attr("class",
"d3plus_drop_title_text").call(c);b.container.title.on(g.over,function(c,d){var g=f(b.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(b.timing.mouseevents).style("background-color",g).style("color",k(g))}).on(g.out,function(c){c=b.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(b.timing.mouseevents).style("background-color",c).style("color",k(c))}).on(g.click,function(c){b.history.back()});b.container.title.exit().remove();
q&&(b.margin.title+=b.container.title.node().offsetHeight||b.container.title.node().getBoundingClientRect().height);b.dev.value&&h.timeEnd("creating title and back button")}}},{"../../../../client/pointer.coffee":38,"../../../../color/lighter.coffee":45,"../../../../color/text.coffee":50,"../../../../core/console/print.coffee":52}],155:[function(b,c,d){var g=b("./items.coffee"),f=b("./height.js"),h=b("../../../../core/console/print.coffee"),k=b("./scroll.js"),l=b("./arrow.js");c.exports=function(b){function c(d){var f=
b.open.flipped.value;d.style("top",function(){return f?"auto":b.margin.top-b.ui.border+"px"}).style("bottom",function(){return f?b.margin.top+b.ui.border+"px":"auto"})}function d(f){f.style("left",function(){return"left"===b.font.align.value?b.margin.left+"px":"center"===b.font.align.value?b.margin.left-(b.width.secondary-b.width.value)/2+"px":"auto"}).style("right",function(){return"right"===b.font.align.value?"0px":"auto"}).style("height",b.container.listHeight+"px").style("padding",b.ui.border+
"px").style("background-color",b.ui.color.secondary.value).style("z-index",function(){return b.open.value?"9999":"-1"}).style("width",b.width.secondary-2*b.ui.border+"px").style("opacity",b.open.value?1:0).call(c)}function q(d){d.style("display",b.open.value?null:"none").call(c);b.search.enabled&&b.open.value&&b.container.selector.select("div.d3plus_drop_search input").node().focus()}b.draw.timing?b.container.ui.transition().duration(b.draw.timing).each("start",function(){b.open.value&&d3.select(this).style("z-index",
9999)}).style("margin",b.ui.margin.css).each("end",function(){b.open.value||d3.select(this).style("z-index","auto")}):b.container.ui.style("margin",b.ui.margin.css).style("z-index",function(){return b.open.value?9999:"auto"});g(b);f(b);k(b);l(b);b.dev.value&&h.time("drawing list");var n=b.open.value?b.height.secondary-b.margin.title:0;b.draw.timing?(b.container.selector.transition().duration(b.draw.timing).each("start",function(){d3.select(this).style("display",b.open.value?"block":null)}).call(d).each("end",
function(){d3.select(this).transition().duration(b.draw.timing).call(q)}),b.container.list.transition().duration(b.draw.timing).style("width",b.width.secondary-2*b.ui.border+"px").style("max-height",n+"px").tween("scroll",function(b){return function(){var c=d3.interpolateNumber(this.scrollTop,b);return function(b){this.scrollTop=c(b)}}}(b.container.listScroll))):(b.container.selector.call(d).call(q),b.container.list.style("width",b.width.secondary-2*b.ui.border+"px").style("max-height",n+"px").property("scrollTop",
b.container.listScroll));b.dev.value&&h.timeEnd("drawing list")}},{"../../../../core/console/print.coffee":52,"./arrow.js":143,"./height.js":147,"./items.coffee":148,"./scroll.js":151}],156:[function(b,c,d){var g=b("../../../../util/copy.coffee"),f=b("../../../../core/font/tester.coffee"),h=b("../../../form.js"),k=b("../../../../core/console/print.coffee"),l=b("../../../../object/validate.coffee");c.exports=function(b){function c(g){var l="primary"===g?"value":g,n="value"===l?b.icon.drop.value:b.icon.select.value||
b.icon.drop.value,r="value"===l?b.text.value:b.text.secondary.value||b.text.value,t="value"===l?b.font:b.font.secondary;b.dev.value&&k.time("calculating "+g+" width");var q=[];h().container(f()).data({large:9999,value:d}).draw({update:!1}).font(t).format(b.format).icon({button:n,value:b.icon.value}).id(b.id.value).timing({ui:0}).text(r||b.id.value).type("button").ui({border:"primary"===g?b.ui.border:0,display:"inline-block",margin:0,padding:b.ui.padding.css}).width(!1).draw().selectAll("div.d3plus_node").each(function(b){q.push(this.offsetWidth+
1)}).remove();n={};n[l]=d3.max(q);b.self.width(n);b.dev.value&&k.timeEnd("calculating "+g+" width")}var d=[],q;for(q in b.data.nested.all){var n=b.data.nested.all[q],r=l(b.text.nesting)&&q in b.text.nesting?b.text.nesting[q][0]:q;0>[b.id.value,b.text.value].indexOf(r)&&(n=g(n),n.forEach(function(c){c[b.text.value||b.id.value]=c[r]}));d=d.concat(n)}"number"!==typeof b.width.value&&c("primary");"number"!==typeof b.width.secondary&&(b.text.secondary.value&&b.text.value!==b.text.secondary.value?c("secondary"):
b.self.width({secondary:b.width.value}))}},{"../../../../core/console/print.coffee":52,"../../../../core/font/tester.coffee":68,"../../../../object/validate.coffee":171,"../../../../util/copy.coffee":206,"../../../form.js":103}],157:[function(b,c,d){var g=b("../../../../util/child.coffee"),f=function(b,c){void 0===c&&(c=window);d3.select(c).on("click."+b.container.id,function(){var c=d3.event.target||d3.event.toElement,d=c.parentNode;d&&0<=["d3plus_node","d3plus_drop_title"].indexOf(d.className)&&
(c=d.parentNode);c&&d&&!g(b.container.ui,c)&&(b.open.value||b.hover.value)&&b.self.open(!1).hover(!1).draw()});try{var d=window.parent.location.host===window.location.host}catch(m){d=!1}d&&c.self!==window.top&&f(b,c.parent)};c.exports=f},{"../../../../util/child.coffee":204}],158:[function(b,c,d){var g=b("../form.js");c.exports=function(b){"buttons"in b.container||(b.container.buttons=g().container(b.container.ui).type("button"));var c=b.data.viz.length,d=b.width.value?b.width.value/c:!1,c=b.container.ui.selectAll("div.d3plus_toggle").data(b.data.viz,
function(c){return c[b.id.value]});c.exit().remove();c.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top");c.order().each(function(c){"form"in c.d3plus||(c.d3plus.form=g().container(d3.select(this)));var h=b.id.nesting.length>b.depth.value?b.id.nesting[b.depth.value+1]:b.id.value;c[h]instanceof Array?c.d3plus.form.container({id:b.container.id+"_"+c[b.id.value]}).data(c[h]).id(b.id.nesting.slice(1)).type("drop"):c.d3plus.form.data([c]).id(b.id.value).type("button");
c.d3plus.form.color(b.color).focus(b.focus.value,function(c){c!==b.focus.value&&b.self.focus(c).draw()}).hover(b.hover.value).icon({select:!1,value:b.icon.value}).font(b.font).format(b.format).order(b.order).text(b.text.value).ui({border:b.ui.border,color:b.ui.color,display:"inline-block",margin:0,padding:b.ui.padding.css}).width(d).draw()});if(b.data.element.value)b.data.element.value.on("focus."+b.container.id,function(){b.self.focus(this.value).hover(this.value).draw()}).on("blur."+b.container.id,
function(){b.self.hover(!1).draw()})}},{"../form.js":103}],159:[function(b,c,d){var g,f,h,k,l,m,t,u,q,n,r;n=b("simplify-js");c.exports=function(b,c){var d,f,k,m,t,q,B,C,E,G,H,I,L,J,K,M,P,N,S,U,W,V,X,ea,da,R,Y,ba,ca,aa,Z,qa,ma;if(3>b.length)return null;H=[];null==c&&(c={});null==c.maxAspectRatio&&(c.maxAspectRatio=15);null==c.minWidth&&(c.minWidth=0);null==c.minHeight&&(c.minHeight=0);null==c.tolerance&&(c.tolerance=.02);null==c.nTries&&(c.nTries=20);null!=c.angle&&(c.angle instanceof Array?t=c.angle:
"number"===typeof c.angle?t=[c.angle]:"string"!==typeof c.angle||isNaN(c.angle)||(t=[Number(c.angle)]));null==t&&(t=d3.range(-90,95,5));null!=c.aspectRatio&&(c.aspectRatio instanceof Array?B=c.aspectRatio:"number"===typeof c.aspectRatio?B=[c.aspectRatio]:"string"!==typeof c.aspectRatio||isNaN(c.aspectRatio)||(B=[Number(c.aspectRatio)]));null!=c.origin&&c.origin instanceof Array&&(Y=c.origin[0]instanceof Array?c.origin:[c.origin]);q=Math.abs(d3.geom.polygon(b).area());if(0===q)return null;ea=d3.extent(b,
function(b){return b[0]});k=ea[0];ea=ea[1];E=d3.extent(b,function(b){return b[1]});m=E[0];E=E[1];ea=Math.min(ea-k,E-m)*c.tolerance;aa=function(){var c,d,f;f=[];c=0;for(d=b.length;c<d;c++)ba=b[c],f.push({x:ba[0],y:ba[1]});return f}();0<ea&&(aa=n(aa,ea),b=function(){var b,c,d;d=[];b=0;for(c=aa.length;b<c;b++)ba=aa[b],d.push([ba.x,ba.y]);return d}());c.vdebug&&H.push({type:"simplify",poly:b});ea=d3.extent(b,function(b){return b[0]});k=ea[0];ea=ea[1];E=d3.extent(b,function(b){return b[1]});m=E[0];E=E[1];
ea=[ea-k,E-m];E=ea[0];C=ea[1];ea=Math.min(E,C)/50;if(null==Y)for(Y=[],G=d3.geom.polygon(b).centroid(),h(G,b)&&Y.push(G);Y.length<c.nTries;)G=Math.random()*E+k,M=Math.random()*C+m,G=[G,M],h(G,b)&&Y.push(G);c.vdebug&&H.push({type:"origins",points:Y});U=0;V=null;E=0;for(G=t.length;E<G;E++)for(k=t[E],m=-k*Math.PI/180,c.vdebug&&H.push({type:"angle",angle:k}),L=C=0,M=Y.length;C<M;L=++C)for(da=Y[L],P=g(b,da,m),X=P[0],d=P[1],da=g(b,da,m+Math.PI/2),W=da[0],f=da[1],da=[],null!=X&&null!=d&&da.push([(X[0]+d[0])/
2,(X[1]+d[1])/2]),null!=W&&null!=f&&da.push([(W[0]+f[0])/2,(W[1]+f[1])/2]),c.vdebug&&H.push({type:"modifOrigin",idx:L,p1W:X,p2W:d,p1H:W,p2H:f,modifOrigins:da}),L=0,P=da.length;L<P;L++)if(R=da[L],c.vdebug&&H.push({type:"origin",cx:R[0],cy:R[1]}),W=g(b,R,m),X=W[0],d=W[1],null!==X&&null!==d&&(X=Math.min(r(R,X),r(R,d)),X=2*Math.sqrt(X),d=g(b,R,m+Math.PI/2),W=d[0],f=d[1],null!==W&&null!==f&&(W=Math.min(r(R,W),r(R,f)),W=2*Math.sqrt(W),!(X*W<U))))for(null!=B?f=B:(f=Math.max(1,c.minWidth/W,U/(W*W)),d=Math.min(c.maxAspectRatio,
X/c.minHeight,X*X/U),f=d3.range(f,d+.5,.5)),S=0,N=f.length;S<N;S++)if(d=f[S],K=Math.max(c.minWidth,Math.sqrt(U*d)),ca=Math.min(X,W*d),!(ca*W<U))for(ca-K>=ea&&c.vdebug&&H.push({type:"aRatio",aRatio:d});ca-K>=ea;)Z=(K+ca)/2,I=Z/d,qa=R[0],ma=R[1],J=[[qa-Z/2,ma-I/2],[qa+Z/2,ma-I/2],[qa+Z/2,ma+I/2],[qa-Z/2,ma+I/2]],J=u(J,m,R),l(J,b)?(J=!0,U=Z*I,V={cx:qa,cy:ma,width:Z,height:I,angle:k},K=Z):(J=!1,ca=Z),c.vdebug&&H.push({type:"rectangle",cx:qa,cy:ma,width:Z,height:I,areaFraction:Z*I/q,angle:k,insidePoly:J});
return[V,U,H]};r=function(b,c){var d,f;d=c[0]-b[0];f=c[1]-b[1];return d*d+f*f};m=function(b,c,d){d=c[1]<d[1]?[c,d]:[d,c];c=d[0];d=d[1];if(b[1]===d[1]||b[1]===c[1])b[1]+=Number.MIN_VALUE;return b[1]>d[1]||b[1]<c[1]||b[0]>c[0]&&b[0]>d[0]?!1:b[0]<c[0]&&b[0]<d[0]?!0:(b[1]-c[1])/(b[0]-c[0])>(d[1]-c[1])/(d[0]-c[0])};h=function(b,c){var d,f,g,h,k;h=-1;k=c.length;f=c[k-1];for(g=0;++h<k;)d=f,f=c[h],m(b,d,f)&&g++;return 0!==g%2};k=function(b,c,d){var f;f=b[0];b=b[1];return f<Math.min(c[0],d[0])-1E-9||f>Math.max(c[0],
d[0])+1E-9||b<Math.min(c[1],d[1])-1E-9||b>Math.max(c[1],d[1])+1E-9?!1:!0};f=function(b,c,d,f){var g,h,k,l,m;h=b[0]-c[0];l=b[1]-c[1];k=d[0]-f[0];m=d[1]-f[1];g=h*m-l*k;if(1E-9>Math.abs(g))return null;b=b[0]*c[1]-b[1]*c[0];d=d[0]*f[1]-d[1]*f[0];return[(b*k-d*h)/g,(b*m-d*l)/g]};q=function(b,c,d,g){var h;h=f(b,c,d,g);return null==h?!1:k(h,b,c)&&k(h,d,g)};l=function(b,c){var d,f,g,k,l,m,n,r;l=-1;n=b.length;r=c.length;for(g=b[n-1];++l<n;)for(d=g,g=b[l],m=-1,k=c[r-1];++m<r;)if(f=k,k=c[m],q(d,g,f,k))return!1;
return h(b[0],c)};t=function(b,c,d){var f,g;null==d&&(d=[0,0]);f=b[0]-d[0];g=b[1]-d[1];b=Math.cos(c);c=Math.sin(c);return[b*f-c*g+d[0],c*f+b*g+d[1]]};u=function(b,c,d){var f,g,h,k;k=[];f=0;for(g=b.length;f<g;f++)h=b[f],k.push(t(h,c,d));return k};g=function(b,c,d){var g,h,l,m,n,t,q,u,G,H;c=[c[0]+1E-9*Math.cos(d),c[1]+1E-9*Math.sin(d)];h=c[0];H=[h+Math.cos(d),c[1]+Math.sin(d)];d=0;1E-9>Math.abs(H[0]-h)&&(d=1);n=-1;u=b.length;h=b[u-1];q=t=Number.MAX_VALUE;for(m=l=null;++n<u;)g=h,h=b[n],G=f(c,H,g,h),
null!=G&&k(G,g,h)&&(g=r(c,G),G[d]<c[d]?g<t&&(t=g,l=G):G[d]>c[d]&&g<q&&(q=g,m=G));return[l,m]}},{"simplify-js":8}],160:[function(b,c,d){c.exports=function(b,c,d){var k;k={x:0,y:0};0>b&&(b=2*Math.PI+b);"square"===d?(d=Math.PI/180*45,b<=Math.PI?b<Math.PI/2?b<d?(k.x+=c,b=Math.tan(b)*c,k.y+=b):(k.y+=c,b=c/Math.tan(b),k.x+=b):b<Math.PI-d?(k.y+=c,b=c/Math.tan(Math.PI-b),k.x-=b):(k.x-=c,b=Math.tan(Math.PI-b)*c,k.y+=b):b<3*Math.PI/2?b<d+Math.PI?(k.x-=c,b=Math.tan(b-Math.PI)*c,k.y-=b):(k.y-=c,b=c/Math.tan(b-
Math.PI),k.x-=b):b<2*Math.PI-d?(k.y-=c,b=c/Math.tan(2*Math.PI-b),k.x+=b):(k.x+=c,b=Math.tan(2*Math.PI-b)*c,k.y-=b)):(k.x+=c*Math.cos(b),k.y+=c*Math.sin(b));return k}},{}],161:[function(b,c,d){var g;g=b("../geom/offset.coffee");c.exports=function(b){var c,d,l,m,t,u,q,n,r,p;if(!b)return[];b=b.slice(1).slice(0,-1).split(/L|A/);q=[];l=0;for(t=b.length;l<t;l++)if(d=b[l],d=d.split(" "),1===d.length)q.push(d[0].split(",").map(function(b){return parseFloat(b)}));else{n=q[q.length-1];m=d.pop().split(",").map(function(b){return parseFloat(b)});
r=parseFloat(d.shift().split(",")[0]);c=Math.sqrt(Math.pow(m[0]-n[0],2)+Math.pow(m[1]-n[1],2));c=Math.acos((r*r+r*r-c*c)/(2*r*r));(d="1"===d[1].split(",")[0])&&(c=2*Math.PI-c);d=c/(2*Math.PI)*r*Math.PI*2;d/=5;n=Math.atan2(-n[1],-n[0])-Math.PI;for(d=p=c/d;d<c;)u=g(n+d,r),q.push([u.x,u.y]),d+=p;q.push(m)}return q}},{"../geom/offset.coffee":160}],162:[function(b,c,d){var g;d={version:"1.9.2 - Cornflower",repo:"https://github.com/alexandersimoes/d3plus/"};d.array={comparator:b("./array/comparator.coffee"),
contains:b("./array/contains.coffee"),sort:b("./array/sort.coffee"),update:b("./array/update.coffee")};d.client={css:b("./client/css.coffee"),ie:b("./client/ie.js"),pointer:b("./client/pointer.coffee"),prefix:b("./client/prefix.coffee"),rtl:b("./client/rtl.coffee"),scroll:b("./client/scroll.js"),scrollbar:b("./client/scrollbar.coffee"),touch:b("./client/touch.coffee")};d.color={legible:b("./color/legible.coffee"),lighter:b("./color/lighter.coffee"),mix:b("./color/mix.coffee"),random:b("./color/random.coffee"),
scale:b("./color/scale.coffee"),sort:b("./color/sort.coffee"),text:b("./color/text.coffee"),validate:b("./color/validate.coffee")};d.data={bestRegress:b("./data/bestRegress.coffee"),lof:b("./data/lof.coffee"),mad:b("./data/mad.coffee")};d.font={sizes:b("./font/sizes.coffee"),validate:b("./font/validate.coffee")};d.form=b("./form/form.js");d.geom={largestRect:b("./geom/largestRect.coffee"),offset:b("./geom/offset.coffee"),path2poly:b("./geom/path2poly.coffee")};d.network={cluster:b("./network/cluster.coffee"),
distance:b("./network/distance.coffee"),normalize:b("./network/normalize.coffee"),shortestPath:b("./network/shortestPath.coffee"),smallestGap:b("./network/smallestGap.coffee"),subgraph:b("./network/subgraph.coffee")};d.number={format:b("./number/format.coffee")};d.object={merge:b("./object/merge.coffee"),validate:b("./object/validate.coffee")};d.string={format:b("./string/format.js"),list:b("./string/list.coffee"),strip:b("./string/strip.js"),title:b("./string/title.coffee")};d.textwrap=b("./textwrap/textwrap.coffee");
d.tooltip={create:b("./tooltip/create.js"),move:b("./tooltip/move.coffee"),remove:b("./tooltip/remove.coffee")};d.util={buckets:b("./util/buckets.coffee"),child:b("./util/child.coffee"),closest:b("./util/closest.coffee"),copy:b("./util/copy.coffee"),d3selection:b("./util/d3selection.coffee"),dataurl:b("./util/dataURL.coffee"),uniques:b("./util/uniques.coffee")};d.viz=b("./viz/viz.coffee");g=b("./client/css.coffee");b=b("./core/console/print.coffee");g("d3plus.css")&&b.warning("d3plus.css has been deprecated, you do not need to load this file.",
d.repo+"releases/tag/v1.4.0");"undefined"!==typeof window&&(window.d3plus=d);c.exports=d},{"./array/comparator.coffee":32,"./array/contains.coffee":33,"./array/sort.coffee":34,"./array/update.coffee":35,"./client/css.coffee":36,"./client/ie.js":37,"./client/pointer.coffee":38,"./client/prefix.coffee":39,"./client/rtl.coffee":40,"./client/scroll.js":41,"./client/scrollbar.coffee":42,"./client/touch.coffee":43,"./color/legible.coffee":44,"./color/lighter.coffee":45,"./color/mix.coffee":46,"./color/random.coffee":47,
"./color/scale.coffee":48,"./color/sort.coffee":49,"./color/text.coffee":50,"./color/validate.coffee":51,"./core/console/print.coffee":52,"./data/bestRegress.coffee":98,"./data/lof.coffee":99,"./data/mad.coffee":100,"./font/sizes.coffee":101,"./font/validate.coffee":102,"./form/form.js":103,"./geom/largestRect.coffee":159,"./geom/offset.coffee":160,"./geom/path2poly.coffee":161,"./network/cluster.coffee":163,"./network/distance.coffee":164,"./network/normalize.coffee":165,"./network/shortestPath.coffee":166,
"./network/smallestGap.coffee":167,"./network/subgraph.coffee":168,"./number/format.coffee":169,"./object/merge.coffee":170,"./object/validate.coffee":171,"./string/format.js":172,"./string/list.coffee":173,"./string/strip.js":174,"./string/title.coffee":175,"./textwrap/textwrap.coffee":199,"./tooltip/create.js":200,"./tooltip/move.coffee":201,"./tooltip/remove.coffee":202,"./util/buckets.coffee":203,"./util/child.coffee":204,"./util/closest.coffee":205,"./util/copy.coffee":206,"./util/d3selection.coffee":207,
"./util/dataURL.coffee":208,"./util/uniques.coffee":209,"./viz/viz.coffee":332}],163:[function(b,c,d){var g;g=b("./normalize.coffee");c.exports=function(b,c){var d,l,m,t,u,q,n,r,p,w,v,y,A,x,z,D,B,C;p=[];null==c&&(c={});if(null==c.nodes||"object"!==typeof c.nodes)if(D=g(b,c),b=D[0],c=D[1],null===c)return null;y=c.nodeid;z=c.startpoint;r=c.endpoint;D=c.nodes;C={};for(v in D)C[v]={node:D[v].node,degree:0};B=0;D={};w=0;for(x=b.length;w<x;w++)l=b[w],d=y(z(l)),l=y(r(l)),d in D||(D[d]={}),l in D||(D[l]=
{}),l in D[d]||(D[d][l]=0,D[l][d]=0,B++,C[d].degree+=1,C[l].degree+=1);q={};for(v in C)r=C[v],q[v]={score:r.degree/(2*B),nodes:[v]};for(d in D)for(l in D[d])D[d][l]=1/(2*B)-C[d].degree*C[l].degree/(4*B*B);for(v=0;1E3>v;){r=-1;B=C=void 0;for(d in D)for(l in D[d])D[d][l]>r&&(r=D[d][l],C=d,B=l);if(0>r)break;for(A in D[C])A!==B&&(D[B][A]=A in D[B]?D[B][A]+D[C][A]:D[C][A]-2*q[B].score*q[A].score,D[A][B]=D[B][A]),delete D[A][C];for(A in D[B])A in D[C]||A===B||(D[B][A]-=2*q[C].score*q[A].score,D[A][B]=D[B][A]);
w=q[C].nodes;y=0;for(z=w.length;y<z;y++)r=w[y],q[B].nodes.push(r);q[B].score+=q[C].score;c.vdebug&&p.push({type:"merge",father:B,child:C,nodes:q[B].nodes});delete q[C];delete D[C];v++}u=function(){var b;b=[];for(m in q)n=q[m],b.push([m,n.nodes.length]);return b}();u.sort(function(b,c){return c[1]-b[1]});return[function(){var b,c,d;d=[];b=0;for(c=u.length;b<c;b++)t=u[b],d.push(q[t[0]].nodes);return d}(),p]}},{"./normalize.coffee":165}],164:[function(b,c,d){c.exports=function(b,c){var d,k;b instanceof
Array||(b=[b.x,b.y]);c instanceof Array||(c=[c.x,c.y]);d=Math.abs(b[0]-c[0]);k=Math.abs(b[1]-c[1]);return Math.sqrt(d*d+k*k)}},{}],165:[function(b,c,d){var g;g=b("../core/console/print.coffee");c.exports=function(b,c){var d,l,m,t,u,q,n,r,p,w,v,y,A,x,z,D,B,C,E,G,H,I,L,J;H=c.source;L=c.target;t=c.directed;u=c.distance;C=c.nodeid;I=c.startpoint;r=c.endpoint;d=c.K;J=c.vdebug;t||(t=!1);null==d&&(d=1);null==C?C=function(b){return b}:"string"===typeof C&&(C=function(b){return function(c){return c[b]}}(C));
null!=H&&"object"===typeof H&&(H=C(H));null!=L&&"object"===typeof L&&(L=C(L));null==I?I=function(b){return b.source}:"string"===typeof I&&(I=function(b){return function(c){return c[b]}}(I));null==r?r=function(b){return b.target}:"string"===typeof r&&(r=function(b){return function(c){return c[b]}}(r));if(null==u)u=function(b){return 1};else if("number"===typeof u)u=function(b){return function(c){return b}}(u);else if("string"===typeof u)u=function(b){return function(c){return c[b]}}(u);else if(u instanceof
Array){n={};p=v=0;for(y=b.length;v<y;p=++v)q=b[p],l=C(I(q)),m=C(r(q)),n[l+"_"+m]=u[p];u=function(b){l=C(I(b));m=C(r(b));return n[l+"_"+m]}}p={};A=0;for(z=b.length;A<z;A++){q=b[A];w=I(q);x=r(q);v=C(w);y=C(x);E=[w,x];x=0;for(D=E.length;x<D;x++)B=E[x],w=C(B),w in p||(p[w]={node:B,outedges:[]});p[v].outedges.push(q);t||p[y].outedges.push(q)}q=null;0===b.length?q="The length of edges is 0":0>d?q="K can not have negative value":null==u(b[0])?q="Check the distance function/attribute":null==I(b[0])?q="Check the startpoint function/attribute":
null==r(b[0])?q="Check the endpoint function/attribute":(v=C(I(b[0])),null==v||"string"!==(G=typeof v)&&"number"!==G?q="Check the nodeid function/attribute":null==H||H in p?null==L||L in p||(q="The target is not in the graph"):q="The source is not in the graph");return null!=q?(g.error(q),null):[b,{source:H,target:L,directed:t,distance:u,nodeid:C,startpoint:I,endpoint:r,K:d,nodes:p,vdebug:J}]}},{"../core/console/print.coffee":52}],166:[function(b,c,d){var g,f;g=b("heap");f=b("./normalize.coffee");
c.exports=function(b,c,d){var m,t,u,q,n,r,p,w,v,y,A,x,z,D,B,C,E,G;null==d&&(d={});d.source=c;if(null==d.nodes||"object"!==typeof d.nodes)if(B=f(b,d),b=B[0],d=B[1],null===d)return null;c=d.source;B=d.target;q=d.directed;n=d.distance;z=d.nodeid;E=d.startpoint;p=d.endpoint;m=d.K;d=d.nodes;for(w in d)x=d[w],x.count=0;w=new g(function(b,c){return b.distance-c.distance});x={};null==B&&(x[c]=!0);w.push({edge:null,target:c,distance:0});A=0;for(c=[];!w.empty();){A=Math.max(A,w.size());D=w.pop();G=D.target;
d[G].count++;null==B?c.push(D):G===B&&c.push(D);if(c.length===m)break;if(d[G].count<=m)for(C=d[G].outedges,v=0,y=C.length;v<y;v++){r=C[v];t=z(E(r));u=z(p(r));q||u!==G||(u=[u,t],t=u[0],u=u[1]);if(null==B){if(x[u])continue;x[u]=!0}t=D.distance+n(r);w.push({edge:r,previous:D,target:u,distance:t})}}m=function(c){for(b=[];null!=c.edge;)b.push(c.edge),c=c.previous;return b.reverse()};q=0;for(n=c.length;q<n;q++)p=c[q],null!=B&&(delete p.target,p.edges=m(p)),delete p.edge,delete p.previous;return c}},{"./normalize.coffee":165,
heap:5}],167:[function(b,c,d){var g;g=b("./distance.coffee");c.exports=function(b,c){var d;c||(c={});d=[];d3.geom.quadtree().x(function(b){return c.accessor?c.accessor(b)[0]:b[0]}).y(function(b){return c.accessor?c.accessor(b)[1]:b[1]})(b).visit(function(b){var f,t,u,q,n,r,p,w;if(!b.leaf)for(p=b.nodes,f=0,u=p.length;f<u;f++)if((n=p[f])&&n.point)if(c.origin)d.push(g(n,c));else for(w=b.nodes,t=0,q=w.length;t<q;t++)(r=w[t])&&r.point&&r.point!==n.point&&d.push(g(n,r));return!1});return c.all?d.sort(function(b,
c){return b-c}):d3.min(d)}},{"./distance.coffee":164}],168:[function(b,c,d){var g;g=b("./normalize.coffee");c.exports=function(b,c,d){var l,m,t,u,q,n,r,p,w,v,y;null==d&&(d={});d.source=c;if(null==d.nodes||"object"!==typeof d.nodes)if(c=g(b,d),b=c[0],d=c[1],null===d)return null;c=d.source;t=d.directed;u=d.distance;p=d.nodeid;v=d.startpoint;n=d.endpoint;l=d.K;w=d.nodes;y={};y[c]=!0;m=function(b,c){var d,f,g,h,k,r,q;r=w[b].outedges;q=[];h=0;for(k=r.length;h<k;h++)g=r[h],d=p(v(g)),f=p(n(g)),t||f!==b||
(f=[f,d],f=f[1]),f in y?q.push(void 0):(g=c+u(g),g<=l?(y[f]=!0,q.push(m(f,g))):q.push(void 0));return q};m(c,0);return{nodes:function(){var b;b=[];for(r in y)b.push(w[r].node);return b}(),edges:function(){var c,d,g;g=[];c=0;for(d=b.length;c<d;c++)q=b[c],p(v(q))in y&&p(n(q))in y&&g.push(q);return g}()}}},{"./normalize.coffee":165}],169:[function(b,c,d){var g;g=b("../core/locale/languages/en_US.coffee");c.exports=function(b,c){var d,l,m,t,u,q,n;c||(c={});u="locale"in c?c.locale:g;q=u.time.slice();l=
d3.locale(u.format);c||(c={});n=c.vars||{};d=c.key;m="labels"in c?c.labels:!0;t=b.toString().split(".")[0].length;n.time&&n.time.value&&q.push(n.time.value);"string"===typeof d&&0<=q.indexOf(d.toLowerCase())?l=b:"share"===d?(l=0===b?0:100<=b?l.numberFormat(",f")(b):99<b?l.numberFormat(".3g")(b):l.numberFormat(".2g")(b),l+="%"):10>b&&-10<b?(t=b.toString().split("."),u=1,1<t.length&&(u=d3.min([parseFloat(t[1]).toString().length,2]),-1<b&&1>b||(t=t[1].length-parseFloat(t[1]).toString().length,u+=1+t)),
l=l.numberFormat("."+u+"g")(b)):3<t?(t=d3.formatPrefix(b).symbol,t=t.replace("G","B"),b=d3.formatPrefix(b).scale(b),b=l.numberFormat(".3g")(b),b=b.replace(u.format.decimal,"."),b=parseFloat(b)+"",b=b.replace(".",u.format.decimal),l=b+t):l=3===t?l.numberFormat(",f")(b):0===b?0:b===parseInt(b,10)?l.numberFormat(".2")(b):l.numberFormat(".3g")(b);2<l.length&&""+l.indexOf(".0")===l.length-2&&(l=l.slice(0,l.length-2));return m&&d&&"format"in n&&d in n.format.affixes.value?(d=n.format.affixes.value[d],d[0]+
l+d[1]):l}},{"../core/locale/languages/en_US.coffee":69}],170:[function(b,c,d){var g,f;g=b("../util/d3selection.coffee");f=b("./validate.coffee");c.exports=function(b,c){var d,m;d=function(b,c,h){var k,m,p;m=[];for(k in b)p=b[k],"undefined"!==typeof p?!h&&f(p)?("object"!==typeof c[k]&&(c[k]={}),m.push(d(p,c[k],0===k.indexOf("d3plus")))):!g(p)&&p instanceof Array?m.push(c[k]=p.slice(0)):m.push(c[k]=p):m.push(void 0);return m};m={};b&&d(b,m);c&&d(c,m);return m}},{"../util/d3selection.coffee":207,"./validate.coffee":171}],
171:[function(b,c,d){c.exports=function(b){return b&&b.constructor===Object}},{}],172:[function(b,c,d){c.exports=function(){var b=Array.prototype.slice.call(arguments),c=b.shift();c.unkeyed_index=0;return c.replace(/\{(\w*)\}/g,function(d,k){""===k&&(k=c.unkeyed_index,c.unkeyed_index++);if(k==+k)return"undefined"!==b[k]?b[k]:d;for(var l=0;l<b.length;l++)if("object"===typeof b[l]&&"undefined"!==typeof b[l][k])return b[l][k];return d}.bind(c))}},{}],173:[function(b,c,d){var g,f;g=b("./format.js");f=
b("../core/locale/languages/en_US.coffee").ui;c.exports=function(b,c,d,m){var t;if(b instanceof Array)b=b.slice(0);else return b;c||(c=f.and);m||(m=f.moreText);if(2===b.length)return b.join(" "+c+" ");d&&b.length>d&&(t=b.length-d+1,b=b.slice(0,d-1),b[d-1]=g(m,t));1<b.length&&(b[b.length-1]=c+" "+b[b.length-1]);return b.join(", ")}},{"../core/locale/languages/en_US.coffee":69,"./format.js":172}],174:[function(b,c,d){c.exports=function(b){var c="!@#$%^&*()[]{}.,/\\|'\";:<>?=+".split(""),d=[[/[\300-\306]/g,
"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]];return""+(b+"").replace(/[^A-Za-z0-9\-_]/g,function(b){if(" "===b)return"_";if(0<=c.indexOf(b))return"";for(var g=b,m=0;m<d.length;m++)if((new RegExp(d[m][0])).test(b)){g=d[m][1];break}return g})}},{}],175:[function(b,c,d){var g;g=b("../core/locale/languages/en_US.coffee");
c.exports=function(b,c){var d,l,m,t;if(!b)return"";c||(c={});if("."===b.charAt(b.length-1))return b.charAt(0).toUpperCase()+b.substr(1);m="locale"in this?this.locale.value:g;t=m.lowercase.map(function(b){return b.toLowerCase()});l=m.uppercase;l=l.concat(l.map(function(b){return b+"s"}));d=l.map(function(b){return b.toLowerCase()});return b.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,
function(c,g){var h;return c?(h=d.indexOf(c.toLowerCase()),0<=h?l[h]:0<=t.indexOf(c.toLowerCase())&&0!==g&&g!==b.length-1?c.toLowerCase():c.charAt(0).toUpperCase()+c.substr(1).toLowerCase()):""})}},{"../core/locale/languages/en_US.coffee":69}],176:[function(b,c,d){var g,f;g=b("./foreign.coffee");f=b("./tspan.coffee");c.exports=function(b){b.text.html.value?g(b):f(b)}},{"./foreign.coffee":177,"./tspan.coffee":180}],177:[function(b,c,d){c.exports=function(b){var c,d,k,l,m;m=b.container.value;k=m.attr("font-family")||
m.style("font-family");c=b.align.value||m.attr("text-anchor")||m.style("text-anchor");d=m.attr("fill")||m.style("fill");l=m.attr("opacity")||m.style("opacity");c="end"===c?"right":"middle"===c?"center":"left";d3.select(m.node().parentNode).append("foreignObject").attr("width",b.width.value+"px").attr("height",b.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",k).style("font-size",b.size.value[1]+"px").style("color",d).style("text-align",c).style("opacity",
l).text(b.text.current)}},{}],178:[function(b,c,d){c.exports=function(b){var c,d,k,l,m,t;d=b.container.value;c=(k=d.node().previousElementSibling)?k.tagName.toLowerCase():"";k&&(k=d3.select(k));b.container.x=b.x.value||parseFloat(d.attr("x"),10);b.container.y=b.y.value||parseFloat(d.attr("y"),10);k&&(0<=b.shape.accepted.indexOf(c)&&b.self.shape(c),"rect"===c?(m=parseFloat(k.attr("x"),10)||0,t=parseFloat(k.attr("y"),10)||0,!1===b.padding.value&&(c=Math.abs(m-b.container.x))&&b.self.padding(c),b.container.x||
(b.container.x=m+b.padding.value),b.container.y||(b.container.y=t+b.padding.value),b.width.value||(c=parseFloat(k.attr("width")),b.self.width(c)),b.height.value||(k=parseFloat(k.attr("height")),b.self.height(k))):"circle"===c?(l=parseFloat(k.attr("r"),10),m=parseFloat(k.attr("cx"),10)||0,m-=l,t=parseFloat(k.attr("cy"),10)||0,t-=l,!1===b.padding.value&&(c=Math.abs(m-b.container.x))&&b.self.padding(c),b.container.x||(b.container.x=m+b.padding.value),b.container.y||(b.container.y=t+b.padding.value),
b.width.value||b.self.width(2*l,10),b.height.value||b.self.height(2*l,10)):(b.width.value||b.self.width(500),b.height.value||b.self.height(500)));b.container.x||(b.container.x=0);b.container.y||(b.container.y=0);b.width.inner=b.width.value-2*b.padding.value;b.height.inner=b.height.value-2*b.padding.value;k=d.attr("font-size")||d.style("font-size");k=parseFloat(k,10);b.container.fontSize=k;b.container.dy=parseFloat(d.attr("dy"),10);if(!b.size.value)return b.resize.value?b.self.size([4,80]):b.self.size([k/
2,k])}},{}],179:[function(b,c,d){c.exports=function(b){var c;!b.text.value&&(c=b.container.value.text())&&(0<=c.indexOf("tspan")&&(c.replace(/\<\/tspan\>\<tspan\>/g," "),c.replace(/\<\/tspan\>/g,""),c.replace(/\<tspan\>/g,"")),c=c.replace(/(\r\n|\n|\r)/gm,""),c=c.replace(/^\s+|\s+$/g,""),b.self.text(c));b.text.phrases=b.text.value instanceof Array?b.text.value.filter(function(b){return 0<=["string","number"].indexOf(typeof b)}):[b.text.value+""];if(!b.align.value)return b.container.align=b.container.value.style("text-anchor")||
b.container.value.attr("text-anchor")}},{}],180:[function(b,c,d){var g;g=b("../../client/rtl.coffee");c.exports=function(b){var c,d,l,m,t,u,q,n,r,p,w,v,y,A,x,z,D,B,C,E;p=function(c){return(!y||c?b.container.value.append("tspan"):b.container.value.insert("tspan","tspan")).attr("x",C+"px").attr("dy",d+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")};D=(r=-90===b.rotate.value||90===b.rotate.value)?b.height.inner:b.width.inner;t=r?b.width.inner:b.height.inner;c="circle"===b.shape.value?
"middle":b.align.value||b.container.align||"start";m="end"===c||"start"===c&&g?D:"middle"===c?D/2:0;r=b.valign.value||"top";C=b.container.x+m;m=b.resize.value?b.size.value[1]:b.container.fontSize||b.size.value[0];d=b.container.dy||1.1*m;B=v=x=null;y=!1;E=0;"circle"===b.shape.value&&("middle"===r?E=t/d%1*d/2:"end"===r&&(E=t/d%1*d));b.container.value.attr("text-anchor",c).attr("font-size",m+"px").style("font-size",m+"px").attr("x",b.container.x).attr("y",b.container.y);z=function(){x.remove();y?(u++,
x=b.container.value.select("tspan")):(u--,x=d3.select(b.container.value.node().lastChild));if(!x.empty())return B=x.text().match(/[^\s-]+-?/g),l()};q=function(){var c;return"circle"===b.shape.value?(c=(u-1)*d+E,c>t/2&&(c+=d),2*Math.sqrt(c*(D/2*2-c))):D};l=function(){var c,d;if(B&&B.length){d=B.pop();c=d.charAt(d.length-1);if(1===d.length&&0<=b.text.split.value.indexOf(d))return l();0<=b.text.split.value.indexOf(c)&&(d=d.substr(0,d.length-1));x.text(B.join(" ")+" "+d+"...");if(x.node().getComputedTextLength()>
q())return l()}else return z()};w=function(c){var d,g,h,k;d=x.text();if(y){k=b.text.current.charAt(b.text.current.length-v.length-1);if(" "===k)for(h="",g=2;" "===k;)h+=" ",k=b.text.current.charAt(b.text.current.length-v.length-g),g++;else h="";v=c+h+v;x.text(c+h+d)}else{k=b.text.current.charAt(v.length);if(" "===k)for(h="",g=1;" "===k;)h+=" ",k=b.text.current.charAt(v.length+g),g++;else h="";v+=h+c;x.text(d+h+c)}if(Math.floor(x.node().getComputedTextLength())>q()||"\n"===k)return x.text(d),d.length&&
(x=p()),x.text(c),y?u--:u++};A=1;n=u=null;m=function(){var c,g,h,l;b.container.value.text("").html("");B=b.text.words.slice();y&&B.reverse();v="";x=p(!0);u=A;g=0;for(h=B.length;g<h;g++){l=B[g];if(u*d>t){z();break}w(l);for(c=!0;c;){l=b.text.current.charAt(v.length);for(c=1;" "===l;)l=b.text.current.charAt(v.length+c),c++;(c=0<=b.text.split.value.indexOf(l))&&w(l)}}u*d>t&&z();return n=Math.abs(u-A)+1};m();n=0;b.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return n++});
"circle"===b.shape.value&&(c=t-n*d,c>d&&("middle"===r?(A=(c/d/2>>0)+1,m()):"bottom"===r&&(y=!0,A=t/d>>0,m())));n=0;b.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return n++});"top"===r?r=0:(c=n*d,r="middle"===r?t/2-c/2:t-c);c="translate(0,"+(r-.2*d)+")";180===b.rotate.value||-180===b.rotate.value?(r=b.container.x+D/2,m=b.container.y+t/2):(m=0>b.rotate.value?D:t,r=b.container.x+m/2,m=b.container.y+m/2);return b.container.value.attr("transform","rotate("+b.rotate.value+
", "+r+", "+m+")"+c)}},{"../../client/rtl.coffee":40}],181:[function(b,c,d){var g,f,h,k;g=b("./flow.coffee");f=b("../../font/sizes.coffee");k=function(b){var c;b.text.phrases.length&&(b.text.current=b.text.phrases.shift()+"",b.text.words=b.text.current.match(b.text["break"]),c=b.text.current.charAt(0),c!==b.text.words[0].charAt(0)&&(b.text.words[0]=c+b.text.words[0]),b.container.value.html(""),b.resize.value?h(b):g(b))};c.exports=k;h=function(b){var c,d,h,q,n,r,p;n=[];for(q=0;q<b.text.words.length;)c=
q===b.text.words.length-1?"":" ",n.push(b.text.words[q]+c),q++;h=(c=-90===b.rotate.value||90===b.rotate.value)?b.height.inner:b.width.inner;q=c?b.width.inner:b.height.inner;r=Math.floor(b.size.value[1]);c="circle"===b.shape.value?.75*h:h;p=f(n,{"font-size":r+"px"},{parent:b.container.value});n=d3.max(p,function(b){return b.width});d=1.165+h/q*.11;d*=d3.sum(p,function(c){return c.width*(b.container.dy||1.2*r)});h="circle"===b.shape.value?Math.PI*Math.pow(h/2,2):c*q;if(n>c||d>h)h=Math.sqrt(h/d),h=d3.min([h,
c/n]),r=d3.max([b.size.value[0],Math.floor(r*h)]);q=Math.floor(.8*q);r>q&&(r=q);r/b.size.value[1]*n<=c?(r!==b.size.value[1]&&b.self.size([b.size.value[0],r]),g(b)):k(b)}},{"../../font/sizes.coffee":101,"./flow.coffee":176}],182:[function(b,c,d){c.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(b){var c;c=["left","center","right"].indexOf(b);0<=c&&(b=this.accepted[c+1]);return b},value:!1}},{}],183:[function(b,c,d){arguments[4][107][0].apply(d,arguments)},{dup:107}],
184:[function(b,c,d){var g;g=b("../../util/d3selection.coffee");c.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(b){return!1===b?!1:g(b)?b:b instanceof Array?d3.select(b[0][0]):d3.select(b)},value:!1}},{"../../util/d3selection.coffee":207}],185:[function(b,c,d){arguments[4][111][0].apply(d,arguments)},{dup:111}],186:[function(b,c,d){var g,f;g=b("../../core/console/print.coffee");f=b("../../string/format.js");c.exports={accepted:[void 0],process:function(b,c){var d;
if(!1===this.initialized)return b;!1===c.container.value?(d=c.format.locale.value.dev.setContainer,g.warning(d,"container")):c.container.value.empty()?(d=c.format.locale.value.dev.noContainer,g.warning(f(d,'"'+c.container.value+'"'),"container")):(c.dev.value&&g.time("total draw time"),c.container.value.call(c.self));return b},value:void 0}},{"../../core/console/print.coffee":52,"../../string/format.js":172}],187:[function(b,c,d){var g,f;g=b("../../core/locale/locale.coffee");f=b("../../object/merge.coffee");
c.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(g)},process:function(b){var c;c=g.en_US;"en_US"!==b&&(c=f(c,g[b]));this.language=b;return c},value:"en_US"},process:function(b,c){if(this.initialized&&"string"===typeof b)c.self.format({locale:b});else if("function"===typeof b)return b;return this.value},value:"en_US"}},{"../../core/locale/locale.coffee":78,"../../object/merge.coffee":170}],188:[function(b,c,d){c.exports={accepted:[!1,Number],value:!1}},{}],189:[function(b,
c,d){arguments[4][188][0].apply(d,arguments)},{dup:188}],190:[function(b,c,d){arguments[4][111][0].apply(d,arguments)},{dup:111}],191:[function(b,c,d){c.exports={accepted:[-180,-90,0,90,180],value:0}},{}],192:[function(b,c,d){c.exports={accepted:["circle","square"],value:!1}},{}],193:[function(b,c,d){c.exports={accepted:[Array,!1],value:!1}},{}],194:[function(b,c,d){c.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(b){b=this.split.value;this["break"]=new RegExp("[^\\s\\"+
b.join("\\")+"]+\\"+b.join("?\\")+"?","g");return!1},split:{accepted:[Array],process:function(b){this["break"]=new RegExp("[^\\s\\"+b.join("\\")+"]+\\"+b.join("?\\")+"?","g");return b},value:["-","/",";",":","&"]}}},{}],195:[function(b,c,d){c.exports={accepted:[!1,"top","middle","bottom"],value:!1}},{}],196:[function(b,c,d){arguments[4][188][0].apply(d,arguments)},{dup:188}],197:[function(b,c,d){arguments[4][188][0].apply(d,arguments)},{dup:188}],198:[function(b,c,d){arguments[4][188][0].apply(d,
arguments)},{dup:188}],199:[function(b,c,d){var g,f,h,k,l;g=b("../core/methods/attach.coffee");h=b("./helpers/parseSize.coffee");f=b("../core/console/print.coffee");k=b("./helpers/parseText.coffee");l=b("./helpers/wrap.coffee");c.exports=function(){var c;c={self:function(b){b.each(function(){h(c);c.size.value[0]<=c.height.inner?(k(c),l(c)):c.container.value.html("");c.dev.value&&f.timeEnd("total draw time")});return c.self}};g(c,{align:b("./methods/align.coffee"),config:b("./methods/config.coffee"),
container:b("./methods/container.coffee"),dev:b("./methods/dev.coffee"),draw:b("./methods/draw.coffee"),format:b("./methods/format.coffee"),height:b("./methods/height.coffee"),padding:b("./methods/padding.coffee"),resize:b("./methods/resize.coffee"),rotate:b("./methods/rotate.coffee"),text:b("./methods/text.coffee"),shape:b("./methods/shape.coffee"),size:b("./methods/size.coffee"),valign:b("./methods/valign.coffee"),width:b("./methods/width.coffee"),x:b("./methods/x.coffee"),y:b("./methods/y.coffee")});
return c.self}},{"../core/console/print.coffee":52,"../core/methods/attach.coffee":79,"./helpers/parseSize.coffee":178,"./helpers/parseText.coffee":179,"./helpers/wrap.coffee":181,"./methods/align.coffee":182,"./methods/config.coffee":183,"./methods/container.coffee":184,"./methods/dev.coffee":185,"./methods/draw.coffee":186,"./methods/format.coffee":187,"./methods/height.coffee":188,"./methods/padding.coffee":189,"./methods/resize.coffee":190,"./methods/rotate.coffee":191,"./methods/shape.coffee":192,
"./methods/size.coffee":193,"./methods/text.coffee":194,"./methods/valign.coffee":195,"./methods/width.coffee":196,"./methods/x.coffee":197,"./methods/y.coffee":198}],200:[function(b,c,d){function g(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px");d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")}var f=b("../core/locale/languages/en_US.coffee"),h=b("../client/pointer.coffee"),k=b("../color/legible.coffee"),l=b("./move.coffee"),m=b("../client/prefix.coffee"),
t=b("../client/rtl.coffee"),u=b("./remove.coffee"),q=b("../client/scroll.js"),n=b("../string/list.coffee"),r=b("../color/text.coffee");c.exports=function(b){var c=b.fullscreen?250:200,d=m();b.width=b.width||c;b.max_width=b.max_width||386;b.id=b.id||"default";b.size=b.fullscreen||b.html?"large":"small";b.offset=b.offset||0;b.arrow_offset=b.arrow?8:0;b.x=b.x||0;b.y=b.y||0;b.parent=b.parent||d3.select("body");b.curtain=b.curtain||"#fff";b.curtainopacity=b.curtainopacity||.8;b.background=b.background||
"#fff";b.fontcolor=b.fontcolor||"#444";b.fontfamily=b.fontfamily||"sans-serif";b.fontweight=b.fontweight||"normal";b.fontsize=b.fontsize||"12px";b.style=b.style||"default";b.zindex="small"==b.size?2E3:500;b.locale=b.locale||f;b.stacked=b.stacked||!1;c=b.parent?b.parent.node().offsetHeight||b.parent.node().getBoundingClientRect().height:0;b.iconsize||(b.iconsize="small"==b.size?22:50);b.parent.node()===document.body?b.limit=[window.innerWidth+q.x(),window.innerHeight+q.y()]:b.limit=[parseFloat(b.parent.style("width"),
10),parseFloat(b.parent.style("height"),10)];b.title instanceof Array&&(b.title=n(b.title,b.locale.ui.and,3,b.locale.ui.more));u(b.id);b.anchor={};if(b.fullscreen)b.anchor.x="center",b.anchor.y="center",b.x=b.parent?b.parent.node().offsetWidth/2:window.innerWidth/2,b.y=b.parent?c/2:window.innerHeight/2;else if(b.align){var y=b.align.split(" ");b.anchor.y=y[0];b.anchor.x=y[1]?y[1]:"center"}else b.anchor.x="center",b.anchor.y="top";var A=b.width-30;if(b.fullscreen)b.parent.append("div").attr("id","d3plus_tooltip_curtain_"+
b.id).attr("class","d3plus_tooltip_curtain").style("background-color",b.curtain).style("opacity",b.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(h.click,function(){u(b.id)});var x=b.parent.append("div").datum(b).attr("id","d3plus_tooltip_id_"+b.id).attr("class","d3plus_tooltip d3plus_tooltip_"+b.size).style("color",b.fontcolor).style("font-family",b.fontfamily).style("font-weight",b.fontweight).style("font-size",
b.fontsize+"px").style(d+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(h.out,g);b.max_height&&x.style("max-height",b.max_height+"px");b.fixed?(x.style("z-index",500),b.mouseevents=!0):x.style("z-index",2E3);y=x.append("div").datum(b).attr("class","d3plus_tooltip_container").style("background-color",b.background).style("padding","6px");if(b.fullscreen&&b.html&&!b.stacked)z=b.parent?.75*b.parent.node().offsetWidth:.75*window.innerWidth,C=b.parent?.75*c:.75*window.innerHeight,
y.style("width",z+"px").style("height",C+"px"),z=y.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",b.width+"px");else{if("auto"==b.width){var z="auto";y.style("max-width",b.max_width+"px")}else z=b.width-14+"px";z=y.style("width",z)}if(b.title||b.icon)var D=z.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);b.fullscreen&&(x.append("div").attr("class","d3plus_tooltip_close").style("background-color",
b.color).style("color",r(b.color)).style("position","absolute").style(d+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(h.over,function(){d3.select(this).style("cursor","pointer").style(d+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(h.out,function(){d3.select(this).style("cursor","auto").style(d+
"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(h.click,function(){u(b.id)}),d3.select("body").on("keydown.esc_"+b.id,function(){27===d3.event.keyCode&&(u(b.id),d3.select("body").on("keydown.esc_"+b.id,null))}));if(!b.mouseevents)x.style("pointer-events","none");else if(!0!==b.mouseevents){var B=d3.select(b.mouseevents).on(h.out),C=function(){var c=d3.event.toElement||d3.event.relatedTarget,d=c?0==("string"==typeof c.className?c.className:c.className.baseVal).indexOf("d3plus_tooltip"):!1;c&&(E(x.node(),
c)||E(b.mouseevents,c)||d)||(B(d3.select(b.mouseevents).datum()),g(),d3.select(b.mouseevents).on(h.out,B))},E=function(b,c){for(var d=c.parentNode;null!==d;){if(d==b)return!0;d=d.parentNode}return!1};d3.select(b.mouseevents).on(h.out,C);x.on(h.out,C);if(C=d3.select(b.mouseevents).on(h.move))x.on(h.move,C)}b.arrow&&x.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",b.background).style(d+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom",
"-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(d+"transform","rotate(45deg)").style("z-index",-1);b.icon&&(C=D.append("div").attr("class","d3plus_tooltip_icon").style("width",b.iconsize+"px").style("height",b.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+b.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px"),"knockout"==b.style&&
C.style("background-color",b.color),A-=C.node().offsetWidth);b.title&&(C=b.max_width-6,b.icon&&(C-=b.iconsize+6),C+="px",D.append("div").attr("class","d3plus_tooltip_title").style("max-width",C).style("color",b.icon?b.fontcolor:k(b.color)).style("vertical-align","top").style("width",A+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===b.size?"18px":"16px").style("line-height",
"large"===b.size?"20px":"17px").style("padding","large"===b.size?"3px 6px":"3px").text(b.title));b.description&&z.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(b.description);if(b.data||b.html&&!b.fullscreen)var G=z.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(b.data){var H=0,I={},L=null;b.data.forEach(function(c,f){c.group&&L!=c.group&&(L=c.group,G.append("div").attr("class",
"d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(c.group));var l=G.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(c);!0===c.highlight?l.style("color",k(b.color)):(c.allColors||c.highlight!==b.color)&&l.style("color",k(c.highlight));var n=l.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(c.name).on(h.out,
function(){d3.event.stopPropagation()});if(c.link)n.style("cursor","pointer").on(h.click,c.link);c.value instanceof Array&&(c.value=list(c.value,b.locale.ui.and,3,b.locale.ui.more));var r=l.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(c.value).on(h.out,function(){d3.event.stopPropagation()});t?r.style("left","6px"):r.style("right","6px");if(b.mouseevents&&c.desc){var q=l.append("div").attr("class",
"d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(d+"transition","height 0.5s").style("width","85%").text(c.desc).on(h.out,function(){d3.event.stopPropagation()}),u=q.node().offsetHeight||q.node().getBoundingClientRect().height;q.style("height","0px");var w=n.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(d+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size",
"8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(m+"transition","background-color 0.5s").text("?").on(h.over,function(){var b=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",b);q.style("height",u+"px")}).on(h.out,function(){d3.event.stopPropagation()});n.style("cursor","pointer").on(h.over,function(){g();
var b=d3.select(this.parentNode).style("color");w.style("background-color",b);q.style("height",u+"px")});l.on(h.out,function(){d3.event.stopPropagation();g()})}l=parseFloat(r.style("width"),10);l>b.width/2&&(l=b.width/2);l>H&&(H=l);f!=b.data.length-1&&(c.group&&c.group==b.data[f+1].group||!c.group&&!b.data[f+1].group)&&G.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")});G.selectAll(".d3plus_tooltip_data_name").style("width",
function(){return parseFloat(d3.select(this.parentNode).style("width"),10)-H-30+"px"});G.selectAll(".d3plus_tooltip_data_value").style("width",H+"px").each(function(b){var c=parseFloat(d3.select(this).style("height"),10);I[b.name]=c});G.selectAll(".d3plus_tooltip_data_name").style("min-height",function(b){return I[b.name]+"px"})}!b.html||b.fullscreen&&!b.stacked||(G.append("div").html(b.html),b.js&&b.js(y));A=z.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position",
"relative").style("text-align","center");b.footer&&A.html(b.footer);b.height=x.node().offsetHeight||x.node().getBoundingClientRect().height;if(b.html&&b.fullscreen&&!b.stacked){var C=b.height-12,z=x.node().offsetWidth-b.width-44;y.append("div").attr("class","d3plus_tooltip_html").style("width",z+"px").style("height",C+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(b.html);b.js&&b.js(y)}b.width=
x.node().offsetWidth;"center"!=b.anchor.y?b.height+=b.arrow_offset:b.width+=b.arrow_offset;if(b.data||(!b.fullscreen||b.stacked)&&b.html)!b.fullscreen||b.stacked?(c=b.fixed?c-b.y-10:c-10,C=b.height<c?b.height:c):C=b.height,C-=parseFloat(y.style("padding-top"),10),C-=parseFloat(y.style("padding-bottom"),10),D&&(C-=D.node().offsetHeight||D.node().getBoundingClientRect().height,C-=parseFloat(D.style("padding-top"),10),C-=parseFloat(D.style("padding-bottom"),10)),A&&(C-=A.node().offsetHeight||A.node().getBoundingClientRect().height,
C-=parseFloat(A.style("padding-top"),10),C-=parseFloat(A.style("padding-bottom"),10)),G.style("max-height",C+"px");b.height=x.node().offsetHeight||x.node().getBoundingClientRect().height;l(b.x,b.y,b.id)}},{"../client/pointer.coffee":38,"../client/prefix.coffee":39,"../client/rtl.coffee":40,"../client/scroll.js":41,"../color/legible.coffee":44,"../color/text.coffee":50,"../core/locale/languages/en_US.coffee":69,"../string/list.coffee":173,"./move.coffee":201,"./remove.coffee":202}],201:[function(b,
c,d){var g,f;f=b("../client/scroll.js");c.exports=function(b,c,d){var m;d||(d="default");m=d3.select("div#d3plus_tooltip_id_"+d);m.node()&&(d=m.datum(),d.cx=b,d.cy=c,d.fixed||(b="body"===d.parent.node().tagName.toLowerCase()?[f.x(),f.y()]:[0,0],"center"!==d.anchor.y?("right"===d.anchor.x?d.x=d.cx-d.arrow_offset-4:"center"===d.anchor.x?d.x=d.cx-d.width/2:"left"===d.anchor.x&&(d.x=d.cx-d.width+d.arrow_offset+2),"bottom"===d.anchor.y?d.flip=d.cy+d.height+d.offset<=d.limit[1]:"top"===d.anchor.y&&(d.flip=
d.cy-d.height-d.offset<b[1]),d.y=d.flip?d.cy+d.offset+d.arrow_offset:d.cy-d.height-d.offset-d.arrow_offset):(d.y=d.cy-d.height/2,"right"===d.anchor.x?d.flip=d.cx+d.width+d.offset<=d.limit[0]:"left"===d.anchor.x&&(d.flip=d.cx-d.width-d.offset<b[0]),"center"===d.anchor.x?(d.flip=!1,d.x=d.cx-d.width/2):d.x=d.flip?d.cx+d.offset+d.arrow_offset:d.cx-d.width-d.offset),d.x<b[0]?d.x=b[0]:d.x+d.width>d.limit[0]&&(d.x=d.limit[0]-d.width),d.y<b[1]?d.y=b[1]:d.y+d.height>d.limit[1]&&(d.y=d.limit[1]-d.height)),
m.style("top",d.y+"px").style("left",d.x+"px"),d.arrow&&m.selectAll(".d3plus_tooltip_arrow").call(g));return m};g=function(b){return b.style("bottom",function(b){return"center"===b.anchor.y||b.flip?"auto":"-5px"}).style("right",function(b){return"center"!==b.anchor.y||b.flip?"auto":"-5px"}).style("top",function(b){return"center"!==b.anchor.y&&b.flip?"-5px":"center"===b.anchor.y?"50%":"auto"}).style("left",function(b){return"center"===b.anchor.y&&b.flip?"-5px":"center"!==b.anchor.y?"50%":"auto"}).style("margin-left",
function(b){var c;if("center"===b.anchor.y)return"auto";c="right"===b.anchor.x?-b.width/2+b.arrow_offset/2:"left"===b.anchor.x?b.width/2-2*b.arrow_offset-5:-5;b.cx-b.width/2-5<c?(c=b.cx-b.width/2-5,c<2-b.width/2&&(c=2-b.width/2)):-(b.limit[0]-b.cx-b.width/2+5)>c&&(c=-(b.limit[0]-b.cx-b.width/2+5),c>b.width/2-11&&(c=b.width/2-11));return c+"px"}).style("margin-top",function(b){var c;if("center"!==b.anchor.y)return"auto";c="bottom"===b.anchor.y?-b.height/2+b.arrow_offset/2-1:"top"===b.anchor.y?b.height/
2-2*b.arrow_offset-2:-9;b.cy-b.height/2-b.arrow_offset<c?(c=b.cy-b.height/2-b.arrow_offset,c<4-b.height/2&&(c=4-b.height/2)):-(b.limit[1]-b.cy-b.height/2+b.arrow_offset)>c&&(c=-(b.limit[1]-b.cy-b.height/2+b.arrow_offset),c>b.height/2-22&&(c=b.height/2-22));return c+"px"})}},{"../client/scroll.js":41}],202:[function(b,c,d){c.exports=function(b){if(b)return d3.selectAll("div#d3plus_tooltip_curtain_"+b).remove(),d3.selectAll("div#d3plus_tooltip_id_"+b).remove();d3.selectAll("div.d3plus_tooltip_curtain").remove();
return d3.selectAll("div.d3plus_tooltip").remove()}},{}],203:[function(b,c,d){c.exports=function(b,c){var d;d=1/(c-1)*(b[1]-b[0]);return d3.range(b[0],b[1]+d,d)}},{}],204:[function(b,c,d){var g;g=b("./d3selection.coffee");c.exports=function(b,c){var d;if(!b||!c)return!1;g(b)&&(b=b.node());g(b)&&(c=c.node());for(d=c.parentNode;null!==d;){if(d===b)return!0;d=d.parentNode}return!1}},{"./d3selection.coffee":207}],205:[function(b,c,d){c.exports=function(b,c){var d,k;if(c.constructor===String)return k=
b.indexOf(c),-1<k?b[k]:b[0];d=b[0];b.forEach(function(b){if(Math.abs(c-b)<Math.abs(c-d))return d=b});return d}},{}],206:[function(b,c,d){var g,f,h;f=b("../object/merge.coffee");h=b("../object/validate.coffee");g=function(b){var c;return h(b)?f(b):b instanceof Array?(c=[],b.forEach(function(b){return c.push(g(b))}),c):b};c.exports=g},{"../object/merge.coffee":170,"../object/validate.coffee":171}],207:[function(b,c,d){var g;g=b("../client/ie.js");c.exports=function(b){return g?"object"===typeof b&&
b instanceof Array&&"size"in b&&"select"in b:b instanceof d3.selection}},{"../client/ie.js":37}],208:[function(b,c,d){c.exports=function(b,c){var d;d=new Image;d.src=b;d.crossOrigin="Anonymous";d.onload=function(){var b;b=document.createElement("canvas");b.width=this.width;b.height=this.height;b.getContext("2d").drawImage(this,0,0);c.call(this,b.toDataURL("image/png"))}}},{}],209:[function(b,c,d){var g,f;g=b("../object/validate.coffee");f=function(b,c,d,m,t,u){var q,n,r,p,w,v,y,A,x;if(void 0===b)return[];
m&&void 0===t&&(t=m.id.value);u=!0===u&&void 0===u;b instanceof Array||(b=[b]);y=[];if(void 0===c)return b.reduce(function(b,c){var d;d=JSON.stringify(c);0>y.indexOf(d)&&(0>b.indexOf(c)&&b.push(c),y.push(d));return b},[]);x=[];q=function(b){var c;if(void 0!==b&&null!==b&&(c=JSON.stringify(b),0>y.indexOf(c)))return x.push(b),y.push(c)};if("function"===typeof d&&m)for(r=0,w=b.length;r<w;r++)for(n=b[r],n=f(d(m,n,c,t)),p=0,v=n.length;p<v;p++)A=n[p],q(A);else if("function"===typeof c)for(d=0,m=b.length;d<
m;d++)n=b[d],n=c(n),q(n);else for(m=0,d=b.length;m<d;m++)n=b[m],g(n)&&(n=n[c],q(n));return u?x.sort(function(b,c){return b-c}):x};c.exports=f},{"../object/validate.coffee":171}],210:[function(b,c,d){c.exports=function(b){var c,d,k,l,m;b.container.value.style("position",function(){var b;b=d3.select(this).style("position");return 0<=["absolute","fixed"].indexOf(b)?b:"relative"});b.container.changed&&b.container.value.html("");l=["width","height"];d=0;for(k=l.length;d<k;d++)m=l[d],b[m].value||(c=function(d){var h;
if(void 0===d.tagName||0<=["BODY","HTML"].indexOf(d.tagName)){h=window["inner"+m.charAt(0).toUpperCase()+m.slice(1)];if(d=document!==d?d3.select(d):!1)"width"===m?(h-=parseFloat(d.style("margin-left"),10),h-=parseFloat(d.style("margin-right"),10),h-=parseFloat(d.style("padding-left"),10),h-=parseFloat(d.style("padding-right"),10)):(h-=parseFloat(d.style("margin-top"),10),h-=parseFloat(d.style("margin-bottom"),10),h-=parseFloat(d.style("padding-top"),10),h-=parseFloat(d.style("padding-bottom"),10));
return b[m].value=20>=h?b[m].small:h}h=parseFloat(d3.select(d).style(m),10);if("number"===typeof h&&0<h)return b[m].value=h;if("BODY"!==d.tagName)return c(d.parentNode)},c(b.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));b.container.value.style("width",b.width.value+"px").style("height",b.height.value+"px")}},{}],211:[function(b,c,d){var g=b("../../core/data/format.js"),f=b("../../core/data/color.js"),h=b("../../core/data/keys.coffee"),
k=b("../../core/data/load.coffee"),l=b("./ui/drawer.js"),m=b("./ui/legend.js"),t=b("./ui/timeline.coffee"),u=b("./errorCheck.js"),q=b("../../core/fetch/data.js"),n=b("./finish.js"),r=b("./focus/tooltip.coffee"),p=b("./ui/history.coffee"),w=b("../../core/parse/edges.js"),v=b("../../core/parse/nodes.js"),y=b("../../core/console/print.coffee"),A=b("../../tooltip/remove.coffee"),x=b("./types/run.coffee"),z=b("./shapes/draw.js"),D=b("../../string/format.js"),B=b("./svg/enter.js"),C=b("./svg/update.js"),
E=b("./ui/titles.js"),G=b("../../object/validate.coffee");c.exports=function(b){var c=[],d=b.type.value,J=b.format.locale.value,K=J.message.ui,M=J.message.draw;["data","attrs","coords","nodes","edges"].forEach(function(d){b.error.value||b[d].loaded||!b[d].url||c.push({"function":function(b,c){k(b,d,c)},message:J.message.loading,wait:!0})});if(b.draw.update){var P=J.visualization[d]||d,N=b.types[d].setup||!1,S=b.types[d].requirements||[],U=D(J.message.initializing,P),W=J.message.data;S instanceof Array||
(S=[S]);P=P.toLowerCase();b.error.value||"function"!==typeof N||c.push({"function":function(b){if(b.dev.value){var c="running "+P+" setup";y.time(c)}N(b);b.dev.value&&y.timeEnd(c)},message:U});b.container.changed&&c.push({"function":B,message:U});d in b.g.apps||c.push({"function":function(b){if(b.dev.value){var c="creating "+P+" group";y.time(c)}b.g.apps[d]=b.g.app.append("g").attr("id",d).attr("opacity",0);b.dev.value&&y.timeEnd(c)},message:U});b.data.changed&&c.push({"function":function(b){b.data.cache=
{};delete b.nodes.restricted;delete b.edges.restricted;h(b,"data")},message:W});b.attrs.changed&&c.push({"function":function(b){h(b,"attrs")},message:W});c.push({"function":function(b){if(!b.color.type||b.color.changed||b.data.changed||b.attrs.changed||b.id.changed||b.depth.changed||b.time.fixed.value&&(b.time.solo.changed||b.time.mute.changed)){b.color.valueScale=!1;if(b.dev.value){var c="checking color type";y.time(c)}b.color.type=!1;if(b.color.value){var d=b.color.value;G(d)&&(d=d[b.id.value]?
d[b.id.value]:d[d3.keys(d)[0]]);b.data.keys&&d in b.data.keys?b.color.type=b.data.keys[d]:b.attrs.keys&&d in b.attrs.keys&&(b.color.type=b.attrs.keys[d])}else b.data.keys&&(b.color.type=b.data.keys[b.id.value]);b.dev.value&&y.timeEnd(c)}},message:W});0<=S.indexOf("edges")&&b.edges.value&&(!b.edges.linked||b.edges.changed)&&c.push({"function":w,message:W});0<=S.indexOf("nodes")&&b.edges.value&&(!b.nodes.positions||b.nodes.changed||b.type.changed)&&c.push({"function":v,message:W});(b.data.changed||
b.time.changed||b.time.format.changed||b.id.changed||b.x.scale.changed&&0<=[b.x.scale.value,b.x.scale.previous].indexOf("discrete")||b.y.scale.changed&&0<=[b.y.scale.value,b.y.scale.previous].indexOf("discrete"))&&c.push({"function":g,message:W});b.error.value||c.push({"function":function(b){var c=b.time.fixed.value?null:["all"];if(b.dev.value){var d=c?"fetching pool data":"fetching data";y.time(d)}b.data.pool=q(b,c);b.dev.value&&y.timeEnd(d);c?(b.dev.value&&y.time("fetching data for current year"),
b.data.viz=q(b),b.dev.value&&y.timeEnd("fetching data for current year")):b.data.viz=b.data.pool;b.draw.timing=b.data.viz.length<b.data.large?b.timing.transitions:0},message:W});b.error.value||c.push({check:function(b){return b.color.value&&"number"===b.color.type&&!1===b.color.valueScale},"function":f,message:W})}c.push({"function":function(b){if(b.dev.value){var c=b.format.locale.value.message.tooltipReset;y.time(c)}b.type.previous&&d!==b.type.previous&&A(b.type.previous);A(d);b.dev.value&&y.timeEnd(c)},
message:K});b.error.value||c.push({"function":u,message:K});c.push({"function":function(b){b.margin.process();E(b);if(!b.error.value)if(b.draw.update)l(b),t(b),m(b);else{b.dev.value&&y.time("calculating margins");var c=b.container.value.select("div#d3plus_drawer").node().offsetHeight||b.container.value.select("div#d3plus_drawer").node().getBoundingClientRect().height,d=b.g.timeline.node().getBBox(),d=b.timeline.value?d.height+b.ui.padding:0,f=b.g.legend.node().getBBox(),f=b.legend.value?f.height+
b.ui.padding:0;b.margin.bottom+=c+d+f;b.dev.value&&y.timeEnd("calculating margins")}p(b);b.height.viz-=b.margin.top+b.margin.bottom;b.width.viz-=b.margin.left+b.margin.right},message:K});b.error.value||c.push({"function":r,message:K});c.push({"function":C,message:M});!b.error.value&&b.draw.update&&c.push({"function":[x,z],message:M});c.push({"function":n,message:M});return c}},{"../../core/console/print.coffee":52,"../../core/data/color.js":54,"../../core/data/format.js":56,"../../core/data/keys.coffee":58,
"../../core/data/load.coffee":59,"../../core/fetch/data.js":64,"../../core/parse/edges.js":94,"../../core/parse/nodes.js":97,"../../object/validate.coffee":171,"../../string/format.js":172,"../../tooltip/remove.coffee":202,"./errorCheck.js":212,"./finish.js":213,"./focus/tooltip.coffee":214,"./shapes/draw.js":224,"./svg/enter.js":237,"./svg/update.js":238,"./types/run.coffee":241,"./ui/drawer.js":242,"./ui/history.coffee":243,"./ui/legend.js":244,"./ui/timeline.coffee":246,"./ui/titles.js":247}],
212:[function(b,c,d){var g=b("../../core/fetch/text.js"),f=b("../../core/console/print.coffee"),h=b("../../core/methods/rejected.coffee"),k=b("../../string/format.js"),l=b("../../string/list.coffee");c.exports=function(b){b.dev.value&&f.time("checking for errors");var c=["id"],d=b.types[b.type.value].requirements;d&&(d instanceof Array?c=c.concat(b.types[b.type.value].requirements):c.push(d));var q=[];c.forEach(function(c){"string"===typeof c?b[c].value||q.push('"'+c+'"'):"function"===typeof c&&(c=
c(b),!c.status&&c.text&&q.push('"'+c.text+'"'))});if(1<q.length){var d=b.format.locale.value.error.methods,n=b.format.locale.value.visualization[b.type.value]||b.type.value,r=b.format.locale.value.ui.and,q=l(q,r);b.error.internal=k(d,n,q)}else 1===q.length&&(d=b.format.locale.value.error.method,n=b.format.locale.value.visualization[b.type.value]||b.type.value,b.error.internal=k(d,n,q[0]));!b.error.internal&&0<=c.indexOf("edges")&&0<=c.indexOf("focus")&&0==b.edges.connections(b.focus.value[0],b.id.value).length&&
(c=g(b,b.focus.value[0],b.depth.value),d=b.format.locale.value.error.connections,b.error.internal=k(d,'"'+c+'"'));c=["d3"];b.types[b.type.value].libs&&(c=c.concat(b.types[b.type.value].libs));q=[];c.forEach(function(b){window[b]||q.push('"'+b+'"')});1<q.length?(d=b.format.locale.value.error.libs,n=b.format.locale.value.visualization[b.type.value],r=b.format.locale.value.ui.and,q=l(q,r),b.error.internal=k(d,n,q)):1===q.length&&(d=b.format.locale.value.error.lib,n=b.format.locale.value.visualization[b.type.value],
b.error.internal=k(d,n,q[0]));c=b.shape.accepted(b);c instanceof Array||(c=[c]);(d=b.shape.value)&&!h(b,c,d,"shape")||b.self.shape(c[0]);"modes"in b.types[b.type.value]&&(c=b.types[b.type.value].modes,c instanceof Array||(c=[c]),(d=b.type.mode.value)&&!h(b,c,d,"mode")||b.self.type({mode:c[0]}));b.dev.value&&f.timeEnd("checking for errors")}},{"../../core/console/print.coffee":52,"../../core/fetch/text.js":66,"../../core/methods/rejected.coffee":90,"../../string/format.js":172,"../../string/list.coffee":173}],
213:[function(b,c,d){var g=b("./shapes/edges.js"),f=b("./shapes/paths.js"),h=b("./ui/message.js"),k=b("./focus/viz.js"),l=b("../../core/methods/reset.coffee"),m=b("../../core/console/print.coffee"),t=b("./shapes/labels.js"),u=b("../../string/title.coffee"),q=b("./zoom/bounds.coffee"),n=b("./zoom/labels.coffee"),r=b("./zoom/mouse.coffee");c.exports=function(b){b.draw.first?setTimeout(function(){k(b)},b.draw.timing):k(b);if(!b.error.value){var c=b.zoom.viewport||b.zoom.bounds;b.types[b.type.value].zoom&&
b.zoom.value&&c?(b.dev.value&&m.time("calculating zoom"),b.draw.first||b.zoom.reset?q(b,c,0):(b.type.changed||b.focus.changed||b.height.changed||b.width.changed||b.nodes.changed||b.legend.changed||b.timeline.changed||b.ui.changed)&&q(b,c),b.dev.value&&m.timeEnd("calculating zoom")):(b.zoom.bounds=[[0,0],[b.width.viz,b.height.viz]],b.zoom.scale=1,q(b))}var c=b.zoom.size?b.zoom.size.height:b.height.viz,d=b.zoom.bounds?b.zoom.bounds[0][0]:0,y=b.zoom.bounds?b.zoom.bounds[0][1]:0;b.g.overlay.attr("width",
b.zoom.size?b.zoom.size.width:b.width.viz).attr("height",c).attr("x",d).attr("y",y);b.error.value||(b.draw.update?(b.edges.path?f(b):g(b),t(b,"data"),b.edges.label&&!b.edges.path&&setTimeout(function(){t(b,"edges")},b.draw.timing+200)):(b.labels.value||b.labels.changed)&&b.types[b.type.value].zoom&&b.zoom.value&&b.draw.timing&&setTimeout(function(){n(b)},b.draw.timing));if(!b.error.value){var A=b.types[b.type.value].requirements||[];A instanceof Array||(A=[A]);A=0<=A.indexOf("data");b.error.internal||
b.data.viz&&b.returned.nodes.length||!A||(b.error.internal=b.format.locale.value.error.data)}(c=b.type.previous)&&b.type.value!=c&&b.g.apps[c]&&(b.dev.value&&m.time('hiding "'+c+'"'),b.draw.timing?b.g.apps[c].transition().duration(b.draw.timing).attr("opacity",0):b.g.apps[c].attr("opacity",0),b.dev.value&&m.timeEnd());b.error.value||(A=A&&0===b.data.viz.length||b.error.internal||b.error.value?0:b.focus.value.length&&b.types[b.type.value].zoom&&b.zoom.value?1-b.tooltip.curtain.opacity:1,c=b.draw.timing,
b.group.transition().duration(c).attr("opacity",A),b.g.data.transition().duration(c).attr("opacity",A),b.g.edges.transition().duration(c).attr("opacity",A));b.error.value?h(b,b.error.value):b.error.internal?(b.error.internal=u(b.error.internal),m.warning(b.error.internal),h(b,b.error.internal),b.error.internal=null):h(b);setTimeout(function(){l(b);if(b.types[b.type.value].zoom&&b.zoom.value){b.g.zoom.datum(b).call(b.zoom.behavior.on("zoom",r));if(!b.zoom.scroll.value)b.g.zoom.on("mousewheel.zoom",
null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null);if(!b.zoom.click.value)b.g.zoom.on("dblclick.zoom",null);if(!b.zoom.pan.value)b.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)}else b.g.zoom.call(b.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},b.draw.timing)}},{"../../core/console/print.coffee":52,"../../core/methods/reset.coffee":92,
"../../string/title.coffee":175,"./focus/viz.js":215,"./shapes/edges.js":225,"./shapes/labels.js":227,"./shapes/paths.js":229,"./ui/message.js":245,"./zoom/bounds.coffee":248,"./zoom/labels.coffee":250,"./zoom/mouse.coffee":251}],214:[function(b,c,d){var g,f,h,k;g=b("../tooltip/create.js");f=b("../../../core/fetch/value.coffee");h=b("../../../core/console/print.coffee");k=b("../../../tooltip/remove.coffee");c.exports=function(b){var c,d,u;d=b.focus;!b.error.internal&&1===d.value.length&&d.value.length&&
!b.small&&d.tooltip.value?(b.dev.value&&h.time("drawing focus tooltip"),c=b.data.pool.filter(function(c){return f(b,c,b.id.value)===d.value[0]}),1<=c.length?c=c[0]:(c={},c[b.id.value]=d.value[0]),u=b.labels.padding,g({anchor:"top left",arrow:!1,data:c,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:b.height.viz-2*u,mouseevents:!0,offset:0,vars:b,width:b.tooltip.large,x:b.width.value-b.margin.right-u,y:b.margin.top+u}),b.width.viz-=b.tooltip.large+2*u,b.dev.value&&h.timeEnd("drawing focus tooltip")):
k("visualization_focus")}},{"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../tooltip/remove.coffee":202,"../tooltip/create.js":239}],215:[function(b,c,d){var g=b("../../../client/pointer.coffee"),f=b("../../../client/ie.js"),h=b("../../../core/fetch/value.coffee"),k=b("../../../core/console/print.coffee"),l=b("../../../util/uniques.coffee");c.exports=function(b){b.g.edge_focus.selectAll("g").remove();b.g.data_focus.selectAll("g").remove();if(b.focus.value.length&&
b.types[b.type.value].zoom&&b.zoom.value){b.dev.value&&k.time("drawing focus elements");var c=b.g.edges.selectAll("g");if(0<c.size()){c.each(function(c){var d=c[b.edges.target][b.id.value];if(c[b.edges.source][b.id.value]==b.focus.value[0]||d==b.focus.value[0])d=b.g.edge_focus.node().appendChild(this.cloneNode(!0)),d3.select(d).datum(c).attr("opacity",1).selectAll("line, path").datum(c)});var d=b.edges.arrows.value;b.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",
b.color.focus).style("stroke-width",function(){return f&&b.types[b.type.value].zoom?0:b.edges.size.value?d3.select(this).style("stroke-width"):2*b.data.stroke.width}).attr("marker-start",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"source"==b.edges.arrows.direction.value&&d?"url(#d3plus_edge_marker_focus"+c+")":"none"}).attr("marker-end",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"target"==b.edges.arrows.direction.value&&d?"url(#d3plus_edge_marker_focus"+c+")":
"none"});b.g.edge_focus.selectAll("text").style("fill",b.color.focus)}var q=l(b.edges.connections(b.focus.value[0],b.id.value,!0),b.id.value,h,b);q.push(b.focus.value[0]);var n=[],r=[],p=[0],w=[0];b.g.data.selectAll("g").each(function(c){if(0<=q.indexOf(c[b.id.value])){var d=b.g.data_focus.node().appendChild(this.cloneNode(!0)),d=d3.select(d).datum(c).attr("opacity",1);"coordinates"==b.shape.value?b.zoom.viewport=b.path.bounds(b.zoom.coords[c.d3plus.id]):"d3plus"in c&&("x"in c.d3plus&&n.push(c.d3plus.x),
"y"in c.d3plus&&r.push(c.d3plus.y),"r"in c.d3plus?(p.push(c.d3plus.r),w.push(c.d3plus.r)):("width"in c.d3plus&&p.push(c.d3plus.width/2),"height"in c.d3plus&&w.push(c.d3plus.height/2)));for(e in g)if(c=d3.select(this).on(g[e]))d.on(g[e],c)}});if(n.length&&r.length){var c=d3.extent(n),v=d3.extent(r),y=d3.max(p),A=d3.max(w);b.zoom.viewport=[[c[0]-y,v[0]-A],[c[1]+y,v[1]+A]]}b.g.data_focus.selectAll("path").style("stroke-width",f&&b.types[b.type.value].zoom?0:2*b.data.stroke.width);b.dev.value&&k.timeEnd("drawing focus elements")}else b.zoom.viewport=
!1}},{"../../../client/ie.js":37,"../../../client/pointer.coffee":38,"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../util/uniques.coffee":209}],216:[function(b,c,d){var g,f,h,k,l;l=b("./style.coffee");h=b("../../../geom/largestRect.coffee");k=b("../../../geom/path2poly.coffee");g={};f={};c.exports=function(b,c,d,q){var n,r,p,w;n=d3.svg.arc().innerRadius(0).outerRadius(function(b){return b.d3plus.r}).startAngle(function(b){return b.d3plus.startAngle}).endAngle(function(b){return b.d3plus.endAngle});
p=function(c){var d;b.labels.value&&(c.d3plus.label?c.d3plus_label=c.d3plus.label:(d=k(n(c)),d=h(d,{angle:0}),d[0]?c.d3plus_label={w:d[0].width,h:d[0].height,x:d[0].cx,y:d[0].cy}:delete c.d3plus_label));return[c]};b.draw.timing?(w=d3.svg.arc().innerRadius(0).outerRadius(function(b){return b.d3plus.r}).startAngle(function(b){void 0===g[b.d3plus.id]&&(g[b.d3plus.id]=0);isNaN(g[b.d3plus.id])&&(g[b.d3plus.id]=b.d3plus.startAngle);return g[b.d3plus.id]}).endAngle(function(b){void 0===f[b.d3plus.id]&&(f[b.d3plus.id]=
0);isNaN(f[b.d3plus.id])&&(f[b.d3plus.id]=b.d3plus.endAngle);return f[b.d3plus.id]}),r=function(b,c){return b.attrTween("d",function(b){var d,h,k,l;void 0===c?(l=b.d3plus.startAngle,d=b.d3plus.endAngle):0===c&&(d=l=0);k=d3.interpolate(g[b.d3plus.id],l);h=d3.interpolate(f[b.d3plus.id],d);return function(c){g[b.d3plus.id]=k(c);f[b.d3plus.id]=h(c);return w(b)}})},d.append("path").attr("class","d3plus_data").call(l,b).attr("d",w),c.selectAll("path.d3plus_data").data(p).transition().duration(b.draw.timing).call(l,
b).call(r),q.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(r,0)):(d.append("path").attr("class","d3plus_data"),c.selectAll("path.d3plus_data").data(p).call(l,b).attr("d",n))}},{"../../../geom/largestRect.coffee":159,"../../../geom/path2poly.coffee":161,"./style.coffee":233}],217:[function(b,c,d){var g=b("../../../core/fetch/text.js"),f=b("../../../font/sizes.coffee"),h=b("../../../geom/largestRect.coffee"),k=b("./style.coffee");c.exports=function(b,c,d,u){var q=d3.svg.area().x(function(b){return b.d3plus.x}).y0(function(b){return b.d3plus.y0}).y1(function(b){return b.d3plus.y}).interpolate(b.shape.interpolate.value),
n=d3.svg.area().x(function(b){return b.d3plus.x}).y0(function(b){return b.d3plus.y0}).y1(function(b){return b.d3plus.y0}).interpolate(b.shape.interpolate.value);d.append("path").attr("class","d3plus_data").attr("d",function(b){return n(b.values)}).call(k,b);var r={"font-weight":b.labels.font.weight,"font-family":b.labels.font.family.value};c.selectAll("path.d3plus_data").data(function(c){if(b.labels.value&&1<c.values.length){var d=!1;if(d3.max(c.values,function(b){return b.d3plus.y0-b.d3plus.y})>
b.labels.font.size){var k=[],m=[],n=g(b,c);c.values.forEach(function(b){k.push([b.d3plus.x,b.d3plus.y]);m.push([b.d3plus.x,b.d3plus.y0])});k=k.concat(m.reverse());d=null;n.length&&(d=f(n[0],r),d=d[0].width/d[0].height);d=h(k,{angle:d3.range(-70,71,1),aspectRatio:d,tolerance:0})}d&&d[0]&&(n={w:~~d[0].width,h:~~d[0].height,x:~~d[0].cx,y:~~d[0].cy,angle:-1*d[0].angle,padding:2,names:n},n.translate=0!==d[0].angle?{x:n.x,y:n.y}:!1,10<=n.w&&10<=n.h&&(c.d3plus_label=n))}return[c]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).attr("d",
function(b){return q(b.values)}).call(k,b):c.selectAll("path.d3plus_data").attr("d",function(b){return q(b.values)}).call(k,b)}},{"../../../core/fetch/text.js":66,"../../../font/sizes.coffee":101,"../../../geom/largestRect.coffee":159,"./style.coffee":233}],218:[function(b,c,d){b("../../../core/fetch/text.js");b("../../../geom/largestRect.coffee");var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("transform",function(b){return"scale("+Math.floor(Math.min(b.d3plus.width,b.d3plus.height)/
16)+")"})}d.append("path").attr("class","d3plus_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(function(b){b.attr("transform","scale(1)")}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"../../../core/fetch/text.js":66,"../../../geom/largestRect.coffee":159,
"./style.coffee":233}],219:[function(b,c,d){var g,f,h;b("../../../core/fetch/value.coffee");g=b("../../../core/fetch/color.coffee");f=b("../../../color/lighter.coffee");h=b("./segments.coffee");c.exports=function(b,c,d){var t,u;t=b.d3plus.shape||c.shape.value;if("line"===c.shape.value&&"circle"!==t)return"none";if("area"===c.shape.value||"active"===t||"line"===c.shape.value)return g(c,b);if("temp"===t)return d?g(c,b):"url(#d3plus_hatch_"+b.d3plus.id+")";if(b.d3plus["static"])return f(g(c,b),.75);
d=h(c,b,"active");t=h(c,b,"temp");u=h(c,b,"total");return!c.active.value&&!c.temp.value||!0===d||d&&u&&d>=u&&!t||d&&!u?g(c,b):c.active.spotlight.value?c.color.missing:f(g(c,b),.75)}},{"../../../color/lighter.coffee":45,"../../../core/fetch/color.coffee":63,"../../../core/fetch/value.coffee":67,"./segments.coffee":232}],220:[function(b,c,d){var g,f,h,k,l,m,t,u;g=b("../../../util/copy.coffee");f=b("../../../network/distance.coffee");h=b("../../../core/fetch/text.js");k=b("../../../font/sizes.coffee");
m=b("../../../geom/largestRect.coffee");t=b("../../../geom/path2poly.coffee");u=b("./style.coffee");l={};c.exports=function(b,c,d,p){p=d3.geo[b.coords.projection.value]();p.center&&p.center(b.coords.center);b.zoom.scale||(b.zoom.scale=1);b.zoom.area=1/b.zoom.scale/b.zoom.scale;b.path=d3.geo.path().projection(p);b.draw.timing?c.selectAll("path.d3plus_data").attr("d",b.path).transition().duration(b.draw.timing).call(u,b):c.selectAll("path.d3plus_data").attr("d",b.path).call(u,b);d.append("path").attr("id",
function(b){return b.id}).attr("class","d3plus_data").attr("d",b.path).call(u,b);d=b.old_height!==b.height.viz||b.height.changed||b.old_width!==b.width.viz||b.width.changed;b.old_height=b.height.viz;b.old_width=b.width.viz;if(b.coords.changed||d||b.coords.mute.changed||b.coords.solo.changed||b.type.changed||b.text.changed||b.coords.projection.changed||b.labels.changed)return b.zoom.bounds=null,b.zoom.reset=!0,b.zoom.coords={},c.each(function(c){var d,n,r,p,u,D,B,C,E,G,H;if(b.coords.simplify.value&&
1<c.geometry.coordinates.length){B=[];n=[];d=0;C=g(c);G=g(c);c.geometry.coordinates=c.geometry.coordinates.filter(function(c,f){var g;G.geometry.coordinates=[c];g=b.path.area(G);return 0<g?(n.push(g),g>d&&(C.geometry.coordinates=[c],d=g),!0):!1});p=b.path.centroid(C);H=c.geometry.coordinates;r=u=0;for(E=H.length;u<E;r=++u)r=H[r],G.geometry.coordinates=[r],B.push(f(b.path.centroid(G),p));p=B.reduce(function(b,c,d){c&&b.push(n[d]/c);return b},[]);D=d3.quantile(p,b.coords.threshold.value);G.geometry.coordinates=
c.geometry.coordinates.filter(function(b,c){var d,f;f=B[c];d=n[c];return 0===f||d/f>=D});(u=C.geometry.coordinates[0])&&"MultiPolygon"===C.geometry.type&&(u=u[0],C.geometry.coordinates[0]=u,C.geometry.type="Polygon")}else C=G=c,u=c.geometry.coordinates[0];b.zoom.coords[c.d3plus.id]=G;delete c.d3plus_label;b.labels.value&&(p=h(b,c),u&&p.length&&(u=t(b.path(C)),H={"font-weight":b.labels.font.weight,"font-family":b.labels.font.family.value},E=null,1===p[0].split(" ").length&&(E=k(p[0],H)[0],E=E.width/
E.height),u=m(u,{angle:0,aspectRatio:E})))&&(u=u[0],c.d3plus_label={anchor:"middle",valign:"center",h:u.height,w:u.width,x:u.cx,y:u.cy,names:p});l[c.id]=c.d3plus_label;c=b.path.bounds(G);if(b.zoom.bounds){if(b.zoom.bounds[0][0]>c[0][0]&&(b.zoom.bounds[0][0]=c[0][0]),b.zoom.bounds[0][1]>c[0][1]&&(b.zoom.bounds[0][1]=c[0][1]),b.zoom.bounds[1][0]<c[1][0]&&(b.zoom.bounds[1][0]=c[1][0]),b.zoom.bounds[1][1]<c[1][1])return b.zoom.bounds[1][1]=c[1][1]}else return b.zoom.bounds=c});if(!b.focus.value.length)return b.zoom.viewport=
!1,c.each(function(b){return b.d3plus_label=l[b.id]})}},{"../../../core/fetch/text.js":66,"../../../font/sizes.coffee":101,"../../../geom/largestRect.coffee":159,"../../../geom/path2poly.coffee":161,"../../../network/distance.coffee":164,"../../../util/copy.coffee":206,"./style.coffee":233}],221:[function(b,c,d){var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("d",d3.svg.symbol().type("cross").size(function(b){b=Math.min(b.d3plus.width,b.d3plus.height);return d3.scale.pow().exponent(2)(b/
2)}))}d.append("path").attr("class","d3plus_data").call(function(b){b.attr("d",d3.svg.symbol().type("cross").size(10))}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"./style.coffee":233}],222:[function(b,c,d){var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("d",d3.svg.symbol().type("diamond").size(function(b){b=
Math.min(b.d3plus.width,b.d3plus.height);return d3.scale.pow().exponent(2)(b/2)}))}d.append("path").attr("class","d3plus_data").call(function(b){b.attr("d",d3.svg.symbol().type("diamond").size(10))}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"./style.coffee":233}],223:[function(b,c,d){var g=b("./style.coffee");c.exports=
function(b,c,d,l){function m(c,d,g,h){d||(d=0);"number"!=typeof g&&(g=void 0);"number"!=typeof h&&(h=void 0);c.attrTween("d",function(c){var k=void 0==g?c.d3plus.r?c.d3plus.r:d3.max([c.d3plus.width,c.d3plus.height]):g,l=void 0==h?c.d3plus.segments[c.d3plus.shape]:h;b.arcs[c.d3plus.shape][c.d3plus.id]||(b.arcs[c.d3plus.shape][c.d3plus.id]={r:0},b.arcs[c.d3plus.shape][c.d3plus.id].a=2*Math.PI);var m=d3.interpolate(b.arcs[c.d3plus.shape][c.d3plus.id].r,k+d),t=d3.interpolate(b.arcs[c.d3plus.shape][c.d3plus.id].a,
l);return function(d){b.arcs[c.d3plus.shape][c.d3plus.id].r=m(d);b.arcs[c.d3plus.shape][c.d3plus.id].a=t(d);return u(c)}})}function t(b){b.d3plus.label?b.d3plus_label=b.d3plus.label:delete b.d3plus_label;return[b]}b.arcs||(b.arcs={donut:{},active:{},temp:{}});var u=d3.svg.arc().startAngle(0).endAngle(function(c){c=b.arcs[c.d3plus.shape][c.d3plus.id].a;return c>2*Math.PI?2*Math.PI:c}).innerRadius(function(c){return c.d3plus["static"]?0:b.arcs[c.d3plus.shape][c.d3plus.id].r*b.data.donut.size}).outerRadius(function(c){return b.arcs[c.d3plus.shape][c.d3plus.id].r});
b.draw.timing?(l.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m,0,0).each("end",function(c){delete b.arcs[c.d3plus.shape][c.d3plus.id]}),c.selectAll("path.d3plus_data").data(t).transition().duration(b.draw.timing).call(m).call(g,b),d.append("path").attr("class","d3plus_data").transition().duration(0).call(m,0,0).call(g,b).transition().duration(b.draw.timing).call(m).call(g,b)):(l.selectAll("path.d3plus_data").each(function(c){delete b.arcs[c.d3plus.shape][c.d3plus.id]}),
d.append("path").attr("class","d3plus_data"),c.selectAll("path.d3plus_data").data(t).call(m).call(g,b))}},{"./style.coffee":233}],224:[function(b,c,d){var g=b("../../../util/child.coffee"),f=b("../../../util/closest.coffee"),h=b("../tooltip/create.js"),k=b("../../../client/pointer.coffee"),l=b("../../../core/fetch/value.coffee"),m=b("../../../core/fetch/color.coffee"),t=b("../../../core/fetch/text.js"),u=b("../../../color/legible.coffee"),q=b("../../../core/console/print.coffee"),n=b("../../../tooltip/remove.coffee"),
r=b("./segments.coffee"),p=b("./fill.js"),w=b("../../../string/strip.js"),v=b("../../../client/touch.coffee"),y=b("../zoom/propagation.coffee"),A=b("../../../util/uniques.coffee"),x=b("../../../object/validate.coffee"),z=b("../zoom/direction.coffee"),D={arc:b("./arc.coffee"),area:b("./area.js"),check:b("./check.js"),coordinates:b("./coordinates.coffee"),cross:b("./cross.js"),diamond:b("./diamond.js"),donut:b("./donut.js"),line:b("./line.js"),radial:b("./radial.coffee"),rect:b("./rect.coffee"),triangle_down:b("./triangle_down.js"),
triangle_up:b("./triangle_up.js"),whisker:b("./whisker.coffee")};c.exports=function(b){function c(d){if(!d.d3plus.id){d.d3plus.id="";for(var f=0;f<=b.depth.value;f++)d.d3plus.id+=l(b,d,b.id.nesting[f])+"_";d.d3plus.id+=P;["x","y","x2","y2"].forEach(function(c){"discrete"==b[c].scale.value&&(c=l(b,d,b[c].value),c.constructor===Date&&(c=c.getTime()),d.d3plus.id+="_"+c)});d.d3plus.suffix&&(d.d3plus.id+="_"+d.d3plus.suffix);d.d3plus.id=w(d.d3plus.id)}return d}function d(c,f){var g=b.types[b.type.value].scale,
h=1;g&&(x[g]&&b.shape.value in g?h=g[b.shape.value]:"function"==typeof g?h=g(b,b.shape.value):"number"==typeof g&&(h=g));h=f?h:1;c.attr("transform",function(b){return 0>["line","area","coordinates"].indexOf(P)?"translate("+(b.d3plus.x||0)+","+(b.d3plus.y||0)+")scale("+h+")":"scale("+h+")"})}function G(c){c.attr("class",function(c){c=b["class"].value?" "+l(b,c,b["class"].value):"";return"d3plus_"+P+c})}function H(c){if(c&&0<b.g.edges.selectAll("g").size()){b.g.edge_hover.selectAll("*").remove();b.g.edges.selectAll("g").each(function(d){var f=
c[b.id.value],g=d[b.edges.source][b.id.value],h=d[b.edges.target][b.id.value];if(g==f||g=="left_"+f||g=="right_"+f||h==f||h=="left_"+f||h=="right_"+f)f=b.g.edge_hover.node().appendChild(this.cloneNode(!0)),d3.select(f).datum(d).attr("opacity",1).selectAll("line, path").datum(d)});var d=b.edges.arrows.value;b.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",b.color.primary).style("stroke-width",function(c){return b.edges.path&&c.dy?Math.max(1,c.dy):b.edges.size.value?d3.select(this).style("stroke-width"):
2*b.data.stroke.width}).attr("marker-start",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"source"==b.edges.arrows.direction.value&&d?"url(#d3plus_edge_marker_highlight"+c+")":"none"}).attr("marker-end",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"target"==b.edges.arrows.direction.value&&d?"url(#d3plus_edge_marker_highlight"+c+")":"none"});b.g.edge_hover.selectAll("text").style("fill",b.color.primary);b.draw.timing?(b.g.edge_hover.transition().duration(b.timing.mouseevents).attr("opacity",
1),b.g.edges.transition().duration(b.timing.mouseevents).attr("opacity",.5)):b.g.edge_hover.attr("opacity",1)}else b.draw.timing?(b.g.edge_hover.transition().duration(b.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),b.g.edges.transition().duration(b.timing.mouseevents).attr("opacity",1)):b.g.edge_hover.selectAll("*").remove()}var I=b.returned.nodes||[],L=b.returned.edges||[];b.draw.timing=I.length<b.data.large&&L.length<b.edges.large?b.timing.transitions:0;var J={arc:"arc",
area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",radial:"radial",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},K={};I.forEach(function(c){var d=c.d3plus&&c.d3plus.shape?c.d3plus.shape:b.shape.value;d in J&&(c.d3plus&&(c.d3plus.shape=d),d=J[d],K[d]||(K[d]=[]),K[d].push(c))});for(var M in J)J[M]in K&&0!==d3.keys(K).length||(I=b.g.data.selectAll("g.d3plus_"+
J[M]),b.draw.timing?I.transition().duration(b.draw.timing).attr("opacity",0).remove():I.remove());for(var P in K)M=b.g.data.selectAll("g.d3plus_"+P).data(K[P],function(d){d.d3plus||(d.d3plus={});if("coordinates"===P)return d.d3plus.id=d.id;if(!d.d3plus.id)if(d.values)d.values.forEach(function(b){b=c(b);b.d3plus.shape="circle"}),d.d3plus.id=d.key;else if(d=c(d),!d.d3plus.segments){d.d3plus.segments={donut:2*Math.PI};var f=r(b,d,"active"),g=r(b,d,"temp"),h=r(b,d,"total");h&&(d.d3plus.segments.active=
f?f/h*2*Math.PI:0,d.d3plus.segments.temp=g?g/h*2*Math.PI+d.d3plus.segments.active:0)}return d.d3plus?d.d3plus.id:!1}),I=b.draw.timing?M.exit().transition().duration(b.draw.timing).attr("opacity",0).remove():M.exit().remove(),b.draw.timing?M.transition().duration(b.draw.timing).call(d).call(G):M.call(d).call(G),L=b.draw.timing?0:1,L=M.enter().append("g").attr("opacity",L).call(d).call(G),b.draw.timing&&L.transition().duration(b.draw.timing).attr("opacity",1),M.order(),b.dev.value&&q.time('drawing "'+
P+'" shapes'),D[P](b,M,L,I,d),b.dev.value&&q.timeEnd('drawing "'+P+'" shapes'),0<=["rect","donut"].indexOf(P)&&b.types[b.type.value].fill&&(b.dev.value&&q.time('filling "'+P+'" shapes'),p(b,M,L,I,d),b.dev.value&&q.timeEnd('filling "'+P+'" shapes'));H();if(b.tooltip.value)b.g.data.selectAll("g").on(k.over,function(c){v&&y(b,d3.event);if(d3.event.buttons||!b.mouse.value||!b.mouse.over.value||b.draw.frozen||c.d3plus&&c.d3plus["static"])n(b.type.value);else if("function"===typeof b.mouse.over.value)b.mouse.over.value(c,
b.self);else{var g=z(c.d3plus_data||c,b),g="function"===typeof b.mouse.viz||"function"===typeof b.mouse.viz[k.click]||b.zoom.value&&(b.types[b.type.value].zoom||c.d3plus.threshold&&c.d3plus.merged||1===g||-1===g&&b.history.states.length&&!b.tooltip.value["long"]);d3.select(this).style("cursor",g?"pointer":"auto").transition().duration(b.timing.mouseevents).call(d,!0);d3.select(this).selectAll(".d3plus_data").transition().duration(b.timing.mouseevents).attr("opacity",1);b.covered=!1;if(c.values&&b.axes.discrete){var g=
"x"===b.axes.discrete?0:1,l=d3.mouse(b.container.value.node())[g],g=A(c.values,function(c){return c.d3plus[b.axes.discrete]}),l=f(g,l);c.d3plus_data=c.values[g.indexOf(l)];c.d3plus=c.values[g.indexOf(l)].d3plus}h({vars:b,data:c.d3plus_data?c.d3plus_data:c});if("function"==typeof b.mouse.viz)b.mouse.viz(c.d3plus_data||c,b);else if(b.mouse.viz[k.over])b.mouse.viz[k.over](c.d3plus_data||c,b);H(c)}}).on(k.move,function(c){v&&y(b,d3.event);if(d3.event.buttons||!b.mouse.value||!b.mouse.move.value||b.draw.frozen||
c.d3plus&&c.d3plus["static"])n(b.type.value);else if("function"===typeof b.mouse.move.value)b.mouse.move.value(c,b.self);else{var d=z(c.d3plus_data||c,b),d="function"===typeof b.mouse.viz||"function"===typeof b.mouse.viz[k.click]||b.zoom.value&&(b.types[b.type.value].zoom||c.d3plus.threshold&&c.d3plus.merged||1===d||-1===d&&b.history.states.length&&!b.tooltip.value["long"]);d3.select(this).style("cursor",d?"pointer":"auto");if(c.values&&b.axes.discrete){var d="x"===b.axes.discrete?0:1,g=d3.mouse(b.container.value.node())[d],
d=A(c.values,function(c){return c.d3plus[b.axes.discrete]}),g=f(d,g);c.d3plus_data=c.values[d.indexOf(g)];c.d3plus=c.values[d.indexOf(g)].d3plus}h({vars:b,data:c.d3plus_data?c.d3plus_data:c});if("function"==typeof b.mouse.viz)b.mouse.viz(c.d3plus_data||c,b);else if(b.mouse.viz[k.move])b.mouse.viz[k.move](c.d3plus_data||c,b)}}).on(k.out,function(c){v&&y(b,d3.event);if(!d3.event.buttons&&b.mouse.value&&b.mouse.out.value)if("function"===typeof b.mouse.out.value)b.mouse.out.value(c,b.self);else{if(!(g(this,
d3.event.toElement)||b.draw.frozen||c.d3plus&&c.d3plus["static"])){d3.select(this).transition().duration(b.timing.mouseevents).call(d);d3.select(this).selectAll(".d3plus_data").transition().duration(b.timing.mouseevents).attr("opacity",b.data.opacity);b.covered||n(b.type.value);if("function"==typeof b.mouse.viz)b.mouse.viz(c.d3plus_data||c,b);else if(b.mouse.viz[k.out])b.mouse.viz[k.out](c.d3plus_data||c,b);H()}}else n(b.type.value)});else M=function(){y(b,d3.event)},b.g.data.selectAll("g").on(k.over,
M).on(k.move,M).on(k.out,M);d3.select(window).on("scroll.d3plus",function(){n(b.type.value)});b.g.data.selectAll("g").on(k.click,function(c){if(!(b.mouse.viz&&!1===b.mouse.viz.click||!b.mouse.value||!b.mouse.click.value||d3.event.defaultPrevented||b.draw.frozen||c.d3plus&&c.d3plus["static"]))if("function"===typeof b.mouse.click.value)b.mouse.click.value(c,b.self);else{if(c.values&&b.axes.discrete){var g="x"===b.axes.discrete?0:1,r=d3.mouse(b.container.value.node())[g],g=A(c.values,function(c){return c.d3plus[b.axes.discrete]}),
r=f(g,r);c.d3plus_data=c.values[g.indexOf(r)];c.d3plus=c.values[g.indexOf(r)].d3plus}if("function"==typeof b.mouse.viz)b.mouse.viz(c.d3plus_data||c,b);else if(b.mouse.viz[k.out])b.mouse.viz[k.out](c.d3plus_data||c,b);else if(b.mouse.viz[k.click])b.mouse.viz[k.click](c.d3plus_data||c,b);var p=z(c.d3plus_data||c,b),q=b.id.solo.value,g=t(b,c)[0],r=u(m(b,c)),v=b.title.sub.value||!1,w=b.title.sub.font.color,y=b.title.total.font.color;c.d3plus.threshold&&c.d3plus.merged&&b.zoom.value?(b.history.states.push(function(){b.self.id({solo:q}).title({sub:{font:{color:w},
value:v},total:{font:{color:y}}}).draw()}),b.self.id({solo:q.concat(A(c.d3plus.merged,b.id.value,l,b))}).title({sub:{font:{color:r},value:g},total:{font:{color:r}}}).draw()):1===p&&b.zoom.value?(c=l(b,c.d3plus_data||c,b.id.value),b.history.states.push(function(){b.self.depth(b.depth.value-1).id({solo:q}).title({sub:{font:{color:w},value:v},total:{font:{color:y}}}).draw()}),b.self.depth(b.depth.value+1).id({solo:q.concat(c)}).title({sub:{font:{color:r},value:g},total:{font:{color:r}}}).draw()):-1===
p&&b.zoom.value&&b.history.states.length&&!b.tooltip.value["long"]?b.history.back():b.types[b.type.value].zoom&&b.zoom.value?(H(),d3.select(this).transition().duration(b.timing.mouseevents).call(d),d3.select(this).selectAll(".d3plus_data").transition().duration(b.timing.mouseevents).attr("opacity",b.data.opacity),n(b.type.value),b.draw.update=!1,c&&c[b.id.value]!=b.focus.value[0]?b.self.focus(c[b.id.value]).draw():b.self.focus(!1).draw()):0>b.types[b.type.value].requirements.indexOf("focus")&&(H(),
h({vars:b,data:c.d3plus_data?c.d3plus_data:c}))}})}},{"../../../client/pointer.coffee":38,"../../../client/touch.coffee":43,"../../../color/legible.coffee":44,"../../../core/console/print.coffee":52,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/validate.coffee":171,"../../../string/strip.js":174,"../../../tooltip/remove.coffee":202,"../../../util/child.coffee":204,"../../../util/closest.coffee":205,"../../../util/uniques.coffee":209,
"../tooltip/create.js":239,"../zoom/direction.coffee":249,"../zoom/propagation.coffee":252,"./arc.coffee":216,"./area.js":217,"./check.js":218,"./coordinates.coffee":220,"./cross.js":221,"./diamond.js":222,"./donut.js":223,"./fill.js":226,"./line.js":228,"./radial.coffee":230,"./rect.coffee":231,"./segments.coffee":232,"./triangle_down.js":234,"./triangle_up.js":235,"./whisker.coffee":236}],225:[function(b,c,d){var g=b("../../../util/buckets.coffee"),f=b("../../../geom/offset.coffee");c.exports=function(b){function c(d){d.attr("opacity",
0).style("stroke-width",0).style("stroke",b.background.value).style("fill","none")}function d(c){var f=b.edges.arrows.value;c.attr("opacity",function(c){return"number"===y?v:"function"===y?v(c,b):b.edges.opacity.scale.value(c[v])}).style("stroke-width",function(c){return b.edges.scale(c[b.edges.size.value])}).style("stroke",b.edges.color).attr("marker-start",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"source"==b.edges.arrows.direction.value&&f?"url(#d3plus_edge_marker_default"+
c+")":"none"}).attr("marker-end",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"target"==b.edges.arrows.direction.value&&f?"url(#d3plus_edge_marker_default"+c+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function m(c){c.attr("x1",function(c){return c[b.edges.source].d3plus.edges[c[b.edges.target][b.id.value]].x}).attr("y1",function(c){return c[b.edges.source].d3plus.edges[c[b.edges.target][b.id.value]].y}).attr("x2",function(c){return c[b.edges.target].d3plus.edges[c[b.edges.source][b.id.value]].x}).attr("y2",
function(c){return c[b.edges.target].d3plus.edges[c[b.edges.source][b.id.value]].y})}function t(b){b.attr("d",function(b){return A(b.d3plus.spline)})}function u(c){delete c.d3plus_label;if(b.g.edges.selectAll("line, path").size()<b.edges.large&&b.edges.label&&c[b.edges.label]){if("spline"in c.d3plus){var d=this.getTotalLength(),f=this.getPointAtLength(d/2),g=this.getPointAtLength(d/2-.1*d),k=this.getPointAtLength(d/2+.1*d),g=Math.atan2(k.y-g.y,k.x-g.x),g=180/Math.PI*g;this.parentNode.getBBox();d*=
.8}else{this.getBBox();var k=c[b.edges.source],l=c[b.edges.target],f=l.d3plus.edges[k[b.id.value]].x,g=l.d3plus.edges[k[b.id.value]].y,d=f-k.d3plus.edges[l[b.id.value]].x,k=g-k.d3plus.edges[l[b.id.value]].y,f={x:f-d/2,y:g-k/2},g=Math.atan2(k,d),g=180/Math.PI*g,d=Math.sqrt(d*d+k*k)}k=f.x;f=f.y;d+=2*b.labels.padding;l=0;b.edges.arrows.value&&(l="number"===typeof b.edges.arrows.value?b.edges.arrows.value:8,l/=b.zoom.behavior.scaleExtent()[1],d-=2*l);if(-90>g||90<g)g-=180;20<d*b.zoom.behavior.scaleExtent()[0]&&
(c.d3plus_label={x:k,y:f,translate:{x:k,y:f},w:d,h:15+2*b.labels.padding,angle:g,anchor:"middle",valign:"center",color:b.edges.color,resize:!1,names:[b.format.value(c[b.edges.label])],background:1})}}var q=b.returned.edges||[],n=b.zoom.behavior.scaleExtent()[0];if("string"===typeof b.edges.size.value){var r=d3.extent(q,function(c){return c[b.edges.size.value]}),p=2*d3.min(b.returned.nodes||[],function(b){return b.d3plus.r})*b.edges.size.scale;b.edges.scale=d3.scale.sqrt().domain(r).range([b.edges.size.min,
p*n])}else{var w="number"==typeof b.edges.size.value?b.edges.size.value:b.edges.size.min;b.edges.scale=function(){return w}}var v=b.edges.opacity.value,y=typeof v;b.edges.opacity.changed&&"string"===y&&b.edges.opacity.scale.value.domain(d3.extent(q,function(b){return b[v]})).range([b.edges.opacity.min.value,1]);var A=d3.svg.line().interpolate(b.edges.interpolate.value),r=b.edges.arrows.value?"string"==typeof b.edges.size.value?"default_0 default_1 default_2 highlight_0 highlight_1 highlight_2 focus_0 focus_1 focus_2".split(" "):
["default","highlight","focus"]:[];if("string"==typeof b.edges.size.value)for(var p=g(b.edges.scale.range(),4),x=[],z=0;3>z;z++)x.push(p[z+1]+(p[1]-p[0])*(z+2)*2);else p="number"===typeof b.edges.arrows.value?b.edges.arrows.value:8,x="number"===typeof b.edges.size.value?b.edges.size.value/p:p;r=b.defs.selectAll(".d3plus_edge_marker").data(r,String);p=function(c){c.attr("d",function(c){c=c.split("_");2==c.length&&b.edges.scale?(c=parseInt(c[1]),c=x[c]):c=x;return"target"==b.edges.arrows.direction.value?
"M 0,-"+c/2+" L "+.85*c+",0 L 0,"+c/2+" L 0,-"+c/2:"M 0,-"+c/2+" L -"+.85*c+",0 L 0,"+c/2+" L 0,-"+c/2}).attr("fill",function(c){c=c.split("_")[0];return"default"==c?b.edges.color:"focus"==c?b.color.focus:b.color.primary}).attr("transform","scale("+1/n+")")};b.draw.timing?(r.exit().transition().duration(b.draw.timing).attr("opacity",0).remove(),r.select("path").transition().duration(b.draw.timing).attr("opacity",1).call(p)):(r.exit().remove(),r.select("path").attr("opacity",1).call(p));z=b.draw.timing?
0:1;r=r.enter().append("marker").attr("id",function(b){return"d3plus_edge_marker_"+b}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",z).attr("vector-effect","non-scaling-stroke").call(p);b.draw.timing&&r.transition().duration(b.draw.timing).attr("opacity",1);var D="string"==typeof b.edges.size.value?g(b.edges.scale.domain(),4):null,B=b.edges.arrows.direction.value,r=q.filter(function(c){c.d3plus||
(c.d3plus={});c.d3plus.id="edge_"+c[b.edges.source][b.id.value]+"_"+c[b.edges.target][b.id.value];if(!0!==c.d3plus.spline){if(D){var d=c[b.edges.size.value];c.d3plus.bucket=d<D[1]?0:d<D[2]?1:2;var g=.85*x[c.d3plus.bucket]/n}else delete c.d3plus.bucket,g=.85*x/n;d=c[b.edges.source];c=c[b.edges.target];if(!d.d3plus||!c.d3plus)return!1;var k=Math.atan2(c.d3plus.y-d.d3plus.y,c.d3plus.x-d.d3plus.x),l="target"==B&&b.edges.arrows.value?c.d3plus.r+g:c.d3plus.r,g=f(Math.atan2(d.d3plus.y-c.d3plus.y,d.d3plus.x-
c.d3plus.x),"source"==B&&b.edges.arrows.value?d.d3plus.r+g:d.d3plus.r,b.shape.value),k=f(k,l,b.shape.value);"edges"in d.d3plus||(d.d3plus.edges={});d.d3plus.edges[c[b.id.value]]={x:d.d3plus.x-g.x,y:d.d3plus.y-g.y};"edges"in c.d3plus||(c.d3plus.edges={});c.d3plus.edges[d[b.id.value]]={x:c.d3plus.x-k.x,y:c.d3plus.y-k.y};return!0}return!1}),r=b.g.edges.selectAll("g.d3plus_edge_line").data(r,function(b){return b.d3plus.id}),q=q.filter(function(c){if(c.d3plus.spline){if(D){var d=c[b.edges.size.value];
c.d3plus.bucket=d<D[1]?0:d<D[2]?1:2;var g=.85*x[c.d3plus.bucket]/n}else delete c.d3plus.bucket,g=.85*x/n;var d=c[b.edges.source],k=c[b.edges.target],l=d.d3plus.edges?d.d3plus.edges[k[b.id.value]]||{}:{},m=k.d3plus.edges?k.d3plus.edges[d[b.id.value]]||{}:{},r=b.edges.arrows.value&&"source"==B?g:0,p=b.edges.arrows.value&&"target"==B?g:0,g=d.d3plus.x>k.d3plus.x?.9:1.1,t=d.d3plus.x>k.d3plus.x?1.1:.9,g="number"===typeof l.angle?l.angle:Math.atan2(d.d3plus.y-k.d3plus.y,d.d3plus.x-k.d3plus.x)*g,q=f(g,d.d3plus.r+
r,b.shape.value),t="number"===typeof m.angle?m.angle:Math.atan2(k.d3plus.y-d.d3plus.y,k.d3plus.x-d.d3plus.x)*t,u=f(t,k.d3plus.r+p,b.shape.value),v=[d.d3plus.x-q.x,d.d3plus.y-q.y],w=(q=l.offset?f(g,l.offset):!1)?[v[0]-q.x,v[1]-q.y]:v,y=[k.d3plus.x-u.x,k.d3plus.y-u.y],A=(u=m.offset?f(t,m.offset):!1)?[y[0]-u.x,y[1]-u.y]:y,z=A[0]-w[0],ea=A[1]-w[1],m="number"===typeof m.radius?m.radius:Math.sqrt(z*z+ea*ea)/4,l=f(g,("number"===typeof l.radius?l.radius:Math.sqrt(z*z+ea*ea)/4)-d.d3plus.r-2*r),r=f(t,m-k.d3plus.r-
2*p);c.d3plus.spline=[v,y];d=Math.abs(Math.atan2(d.d3plus.y-k.d3plus.y,d.d3plus.x-k.d3plus.x)).toFixed(5);k=Math.abs(g).toFixed(5);g=Math.abs(t-Math.PI).toFixed(5);if(k!==g||0>[k,g].indexOf(d))c.d3plus.spline.splice(1,0,[w[0]-l.x,w[1]-l.y],[A[0]-r.x,A[1]-r.y]),q&&c.d3plus.spline.splice(1,0,w),u&&c.d3plus.spline.splice(c.d3plus.spline.length-1,0,A);return!0}return!1}),q=b.g.edges.selectAll("g.d3plus_edge_path").data(q,function(b){return b.d3plus.id});b.draw.timing?(r.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove(),q.exit().transition().duration(b.draw.timing).attr("opacity",0).remove(),r.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(b.draw.timing/2).attr("opacity",0).remove(),q.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(b.draw.timing/2).attr("opacity",0).remove(),r.selectAll("line").data(function(b){return[b]}).transition().duration(b.draw.timing).call(m).call(d).each("end",u),q.selectAll("path").data(function(b){return[b]}).transition().duration(b.draw.timing).call(t).call(d).each("end",
u),r.enter().append("g").attr("class","d3plus_edge_line").append("line").call(m).call(c).transition().duration(b.draw.timing).call(d).each("end",u),q.enter().append("g").attr("class","d3plus_edge_path").append("path").call(t).call(c).transition().duration(b.draw.timing).call(d).each("end",u)):(r.exit().remove(),q.exit().remove(),r.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),q.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),r.selectAll("line").data(function(b){return[b]}).call(m).call(d).call(u),
q.selectAll("path").data(function(b){return[b]}).call(t).call(d).call(u),r.enter().append("g").attr("class","d3plus_edge_line").append("line").call(m).call(c).call(d).call(u),q.enter().append("g").attr("class","d3plus_edge_path").append("path").call(t).call(c).call(d).call(u))}},{"../../../geom/offset.coffee":160,"../../../util/buckets.coffee":203}],226:[function(b,c,d){var g=b("../../../util/copy.coffee"),f=b("../../../core/fetch/color.coffee");b("../../../core/fetch/value.coffee");var h=b("./segments.coffee"),
k=b("./style.coffee");c.exports=function(b,c,d,u){function q(b){b.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function n(c,d){d||(d=0);c.attr("x",function(b){return-(b.d3plus.r?2*b.d3plus.r:b.d3plus.width)/2-d/2}).attr("y",function(b){return-(b.d3plus.r?2*b.d3plus.r:b.d3plus.height)/2-d/2}).attr("width",function(b){return(b.d3plus.r?2*b.d3plus.r:b.d3plus.width)+d}).attr("height",function(b){return(b.d3plus.r?2*b.d3plus.r:b.d3plus.height)+d}).attr("rx",function(c){c=c.d3plus.r?2*c.d3plus.r:
c.d3plus.width;return 0<=["circle","donut"].indexOf(b.shape.value)?(c+d)/2:0}).attr("ry",function(c){c=c.d3plus.r?2*c.d3plus.r:c.d3plus.height;return 0<=["circle","donut"].indexOf(b.shape.value)?(c+d)/2:0}).attr("shape-rendering",function(c){return 0<=["square"].indexOf(b.shape.value)?b.shape.rendering.value:"auto"})}function r(c,d,f,g){d||(d=0);"number"!=typeof f&&(f=void 0);"number"!=typeof g&&(g=void 0);c.attrTween("d",function(c){var h=void 0===f?c.d3plus.r?c.d3plus.r:d3.max([c.d3plus.width,c.d3plus.height]):
f,k=void 0===g?c.d3plus.segments[c.d3plus.shape]:g;b.arcs[c.d3plus.shape][c.d3plus.id]||(b.arcs[c.d3plus.shape][c.d3plus.id]={r:0},b.arcs[c.d3plus.shape][c.d3plus.id].a="donut"===c.d3plus.shape?2*Math.PI:0);var m=d3.interpolate(b.arcs[c.d3plus.shape][c.d3plus.id].r,h+d),n=d3.interpolate(b.arcs[c.d3plus.shape][c.d3plus.id].a,k);return function(d){b.arcs[c.d3plus.shape][c.d3plus.id].r=m(d);b.arcs[c.d3plus.shape][c.d3plus.id].a=n(d);return p(c)}})}b.arcs||(b.arcs={donut:{},active:{},temp:{}});var p=
d3.svg.arc().startAngle(0).endAngle(function(c){c=b.arcs[c.d3plus.shape][c.d3plus.id].a;return c>2*Math.PI?2*Math.PI:c}).innerRadius(function(c){return c.d3plus["static"]||"donut"!==b.shape.value?0:b.arcs[c.d3plus.shape][c.d3plus.id].r*b.data.donut.size}).outerRadius(function(c){c=b.arcs[c.d3plus.shape][c.d3plus.id].r;return"donut"===b.shape.value?c:2*c});c.each(function(c){function d(c){c.attr("stroke",D).attr("stroke-width",1).attr("shape-rendering",b.shape.rendering.value)}var m=h(b,c,"active"),
p=h(b,c,"temp"),t=h(b,c,"total"),u=d3.select(this),D=f(b,c),B=[],C=[];if(t&&b.types[b.type.value].fill){if(p){var E=g(c);E.d3plus.shape="temp";B.push(E);C=["temp"]}m&&(m<t||p)&&(E=g(c),E.d3plus.shape="active",B.push(E))}m=b.defs.selectAll("pattern#d3plus_hatch_"+c.d3plus.id).data(C);b.draw.timing?(m.selectAll("rect").transition().duration(b.draw.timing).style("fill",D),m.selectAll("line").transition().duration(b.draw.timing).style("stroke",D)):(m.selectAll("rect").style("fill",D),m.selectAll("line").style("stroke",
D));m=m.enter().append("pattern").attr("id","d3plus_hatch_"+c.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");m.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",D).attr("fill-opacity",.25);m.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(d);m.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(d);m.append("line").attr("x1",
"9").attr("x2","11").attr("y1","-1").attr("y2","1").call(d);m=B.length?[c]:[];m=u.selectAll("#d3plus_clip_"+c.d3plus.id).data(m);m.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+c.d3plus.id).append("rect").attr("class","d3plus_clipping").call(q);b.draw.timing?(m.selectAll("rect").transition().duration(b.draw.timing).call(n),m.exit().transition().delay(b.draw.timing).remove()):(m.selectAll("rect").call(n),m.exit().remove());u=u.selectAll("path.d3plus_fill").data(B);u.transition().duration(b.draw.timing).call(k,
b).call(r);u.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+c.d3plus.id+")").transition().duration(0).call(k,b).call(r,0,void 0,0).transition().duration(b.draw.timing).call(r).call(k,b);u.exit().transition().duration(b.draw.timing).call(r,0,void 0,0).remove()})}},{"../../../core/fetch/color.coffee":63,"../../../core/fetch/value.coffee":67,"../../../util/copy.coffee":206,"./segments.coffee":232,"./style.coffee":233}],227:[function(b,c,d){b("../../../util/copy.coffee");
var g=b("../../../core/fetch/text.js"),f=b("../../../core/fetch/value.coffee"),h=b("../../../color/mix.coffee"),k=b("../../../core/console/print.coffee");b("../../../client/rtl.coffee");var l=b("./segments.coffee"),m=b("./color.coffee"),t=b("../../../string/list.coffee"),u=b("../../../color/text.coffee"),q=b("../../../textwrap/textwrap.coffee");c.exports=function(b,c){var d=b.types[b.type.value].zoom?b.zoom.behavior.scaleExtent():[1,1],w=b.g[c].selectAll("g"),v=function(c){c.attr("opacity",function(c){var f=
parseFloat(d3.select(this).attr("font-size"),10);c.visible=2<=b.zoom.scale/d[1]*f;return c.visible?1:0})},y=function(c){b.draw.timing?c.transition().duration(b.draw.timing).attr("opacity",0).remove():c.remove()},A=function(c){var f="bottom"===b.labels.valign.value?"top":"bottom";c.attr("font-weight",b.labels.font.weight).attr("font-family",b.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(b){return b.mouse?"auto":"none"}).attr("fill",function(c){if(c.color)return c.color;
var d=m(c.parent,b),f=u(d);return h(d,f,.2,c.text?.15:1)}).each(function(c){var g=c.resize,h=!0;if(c.text){g instanceof Array||(g=[9,50],h=c.resize);var k=c.y-c.h*d[1]/2+c.padding/2;"bottom"===f&&(k+=c.h*d[1]/2);q().align("center").container(d3.select(this)).height(c.h*d[1]/2).padding(c.padding/2).resize(h).size(g).text(b.format.value(100*c.text,{key:"share",vars:b})).width(c.w*d[1]).valign(f).x(c.x-c.w*d[1]/2+c.padding/2).y(k).draw()}else c.resize instanceof Array||(g=[7,d[1]/d[0]*40],h=c.resize),
k="bottom"===b.labels.valign.value?c.share:0,q().align(c.anchor||b.labels.align.value).container(d3.select(this)).height(c.h*d[1]-c.share).padding(c.padding/2).resize(h).size(g).shape(c.shape||"square").text(c.names).valign(b.labels.valign.value).width(c.w*d[1]).x(c.x-c.w*d[1]/2+c.padding/2).y(c.y-c.h*d[1]/2+c.padding/2+k).draw()}).attr("transform",function(b){var c=d3.select(this).attr("transform")||"",f=b.angle||0,g=b.translate&&b.translate.x?b.translate.x:0,h=b.translate&&b.translate.y?b.translate.y:
0;c.length&&(c=c.split(")").slice(-3).join(")"));return"rotate("+f+","+g+","+h+")scale("+1/d[1]+")translate("+(b.x*d[1]-b.x)+","+(b.y*d[1]-b.y)+")"+c})};if("edges"===c||b.labels.value){if(b.dev.value){var x="drawing "+c+" labels";k.time(x)}w.each(function(c){var h=c.d3plus&&"label"in c.d3plus&&!c.d3plus.label,k=c.d3plus_label||null,m=c.d3plus_share,r=c.d3plus.text?c.d3plus.text:k&&k.names?k.names:b.labels.text.value?f(b,c,b.labels.text.value):g(b,c),q=k&&"group"in k?k.group:d3.select(this),u=0,w=
b.types[b.type.value].fill;r instanceof Array||(r=[r]);if(k)if(0<=["line","area"].indexOf(b.shape.value))var x=!0;else if(c&&"d3plus"in c)var x=l(b,c,"active"),J=l(b,c,"temp"),K=l(b,c,"total"),x=!J&&!x||x>=K||!x&&J>=K;if(h||!(k&&k.force||x)&&w)delete c.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y),b.g.labels.selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y);else{if(m&&c.d3plus.share&&10<=
m.w-2*b.labels.padding&&10<=m.h-2*b.labels.padding&&"middle"!=b.labels.valign.value){m.resize=!1===b.labels.resize.value?!1:m&&"resize"in m?m.resize:!0;m.padding=b.labels.padding;m.text=c.d3plus.share;m.parent=c;var M=q.selectAll("text#d3plus_share_"+c.d3plus.id).data([m],function(b){return b.w+""+b.h+""+b.text});b.draw.timing&&1===b.zoom.scale?(M.transition().duration(b.draw.timing/2).call(A),M.enter().append("text").attr("id","d3plus_share_"+c.d3plus.id).attr("class","d3plus_share").attr("opacity",
0).call(A).transition().duration(b.draw.timing/2).delay(b.draw.timing/2).attr("opacity",1)):(M.attr("opacity",1).call(A),M.enter().append("text").attr("id","d3plus_share_"+c.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(A));u=M.node().getBBox().height+b.labels.padding;M.exit().call(y)}else q.selectAll("text.d3plus_share").call(y);k&&(k.resize=!1===b.labels.resize.value?!1:k&&"resize"in k?k.resize:!0,k.padding="number"===typeof k.padding?k.padding:b.labels.padding);if(k&&20<=k.w*d[1]-
k.padding&&10<=k.h*d[1]-k.padding&&r.length){h=b.format.locale.value.ui.and;m=b.format.locale.value.ui.more;for(w=0;w<r.length;w++)r[w]instanceof Array&&(r[w]=t(r[w],h,3,m));k.names=r;k.share=u;k.parent=c;M=q.selectAll("text#d3plus_label_"+c.d3plus.id).data([k],function(b){return b?b.w+"_"+b.h+"_"+b.x+"_"+b.y+"_"+b.names.join("_"):!1});r=k.resize?void 0:b.labels.font.size*d[0]+"px";b.draw.timing&&1===b.zoom.scale?(M.transition().duration(b.draw.timing/2).call(A).call(v),M.enter().append("text").attr("font-size",
r).attr("id","d3plus_label_"+c.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(A).transition().duration(b.draw.timing/2).delay(b.draw.timing/2).call(v)):(M.attr("opacity",1).call(A).call(v),M.enter().append("text").attr("font-size",r).attr("id","d3plus_label_"+c.d3plus.id).attr("class","d3plus_label").call(A).call(v));M.exit().call(y);if(0===M.size()||0===M.selectAll("tspan").size())delete c.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+
c.d3plus.id).call(y),b.g.labels.selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y);else{r=function(c){var d="string"===typeof k.background?k.background:"none"===b.background.value?"#ffffff":b.background.value,d="string"===typeof k.background?k.background:d,f=M.attr("transform").split(")");f.pop();f.pop();f.push("");f=f.join(")");c.attr("fill",d).attr(P).attr("transform",f)};if(k.background){var u=["background"],h=M.node().getBBox(),P={height:h.height,width:h.width,
x:h.x,y:h.y};P.width+=b.labels.padding*d[0];P.height+=b.labels.padding*d[0];P.x-=b.labels.padding*d[0]/2;P.y-=b.labels.padding*d[0]/2;h=M.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];h=h.replace(/([^a-z])\s([^a-z])/gi,"$1,$2");h=h.split(",");1<h.length&&(h=h[h.length-1],h=h.substring(0,h.length-1),P.y+=h)}else u=[],P={};q=q.selectAll("rect#d3plus_label_bg_"+c.d3plus.id).data(u);u="number"===typeof k.background?k.background:"string"===typeof k.background?1:.6;b.draw.timing?(q.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove(),q.transition().duration(b.draw.timing).attr("opacity",u).call(r),q.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+c.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(r).transition().duration(b.draw.timing).attr("opacity",u)):(q.exit().remove(),q.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+c.d3plus.id).attr("class","d3plus_label_bg"),q.attr("opacity",u).call(r))}}else delete c.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+
c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y),b.g.labels.selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y)}})}else b.dev.value&&(x="removing "+c+" labels",k.time(x)),w.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(y),b.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(y);b.dev.value&&k.timeEnd(x)}},{"../../../client/rtl.coffee":40,"../../../color/mix.coffee":46,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,
"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../string/list.coffee":173,"../../../textwrap/textwrap.coffee":199,"../../../util/copy.coffee":206,"./color.coffee":219,"./segments.coffee":232}],228:[function(b,c,d){function g(b){b.attr("x",function(b){return b.d3plus.x}).attr("y",function(b){return b.d3plus.y}).attr("width",0).attr("height",0)}function f(b,c){void 0===c&&(c=0);b.attr("x",function(b){return b.d3plus.x-((b.d3plus.r?2*b.d3plus.r:b.d3plus.width)/2+c/2)}).attr("y",
function(b){return b.d3plus.y-((b.d3plus.r?2*b.d3plus.r:b.d3plus.height)/2+c/2)}).attr("width",function(b){return(b.d3plus.r?2*b.d3plus.r:b.d3plus.width)+c}).attr("height",function(b){return(b.d3plus.r?2*b.d3plus.r:b.d3plus.height)+c}).attr("rx",function(b){return((b.d3plus.r?2*b.d3plus.r:b.d3plus.width)+c)/2}).attr("ry",function(b){return((b.d3plus.r?2*b.d3plus.r:b.d3plus.height)+c)/2})}function h(b,c,d,g){var h=b.draw.timing?b.timing.mouseevents:0;void 0===g&&(g=0);h?(d3.select(c.parentNode).selectAll("path.d3plus_line").transition().duration(h).style("stroke-width",
function(c){var f=d;f.constructor!==Number&&(f=(c=u(b,c,d))&&c.length?d3.max(c):b.data.stroke.width);return f+g}),d3.select(c.parentNode).selectAll("rect").transition().duration(h).style("stroke-width",function(c){var f=d;f.constructor!==Number&&(f=(c=u(b,c,d))&&c.length?d3.max(c):b.data.stroke.width);return f}).call(f,g)):(d3.select(c.parentNode).selectAll("path.d3plus_line").style("stroke-width",function(c){var f=d;f.constructor!==Number&&(f=(c=u(b,c,d))&&c.length?d3.max(c):b.data.stroke.width);
return f+g}),d3.select(c.parentNode).selectAll("rect").style("stroke-width",function(c){var f=d;f.constructor!==Number&&(f=(c=u(b,c,d))&&c.length?d3.max(c):b.data.stroke.width);return f}).call(f,g))}var k=b("../../../util/copy.coffee"),l=b("../../../util/closest.coffee"),m=b("../../../client/pointer.coffee"),t=b("./style.coffee"),u=b("../../../core/fetch/value.coffee");c.exports=function(b,c,d,p){var w=d3.svg.line().x(function(b){return b.d3plus.x}).y(function(b){return b.d3plus.y}).interpolate(b.shape.interpolate.value),
v=b.size.value||2*b.data.stroke.width,y=b[b.axes.discrete],A=function(c){var d=v;d.constructor!==Number&&(d=(c=u(b,c,v))&&c.length?d3.max(c):b.data.stroke.width);return 15>d?15:d},x=y.ticks.values.map(function(b){return b.constructor===Date?b.getTime():b});c.each(function(c){var d=!1,n=[],r=[],p=k(c),G=d3.select(this);p.values=[];p.segment_key=p.key;c.values.forEach(function(f,g,h){var m=u(b,f,y.value);m.constructor===Date&&(m=m.getTime());m=x.indexOf(l(x,m));!1===d||d===m-1?(p.values.push(f),p.segment_key+=
"_"+m):(1<p.values.length?n.push(p):r.push(p.values[0]),p=k(c),p.values=[f]);g===h.length-1&&(1<p.values.length?n.push(p):r.push(p.values[0]));d=m});var H=G.selectAll("path.d3plus_line").data(n,function(b){b.d3plus||(b.d3plus={});b.d3plus.shape="line";return b.segment_key}),I=G.selectAll("rect.d3plus_anchor").data(r,function(c){c.d3plus||(c.d3plus={});c.d3plus.r=2*b.data.stroke.width;return c.d3plus.id});b.draw.timing?(H.exit().transition().duration(b.draw.timing).attr("opacity",0).remove(),H.transition().duration(b.draw.timing).attr("d",
function(b){return w(b.values)}).call(t,b),H.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round").attr("d",function(b){return w(b.values)}).call(t,b).attr("opacity",0).transition().duration(b.draw.timing).attr("opacity",1),I.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(b){return b.d3plus.id}).call(g).call(t,b),I.transition().duration(b.draw.timing).call(f).call(t,b),I.exit().transition().duration(b.draw.timing).call(g).remove()):(H.exit().remove(),
H.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round"),H.attr("d",function(b){return w(b.values)}).call(t,b),I.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(b){return b.d3plus.id}),I.exit().remove(),I.call(f).call(t,b));G=G.selectAll("path.d3plus_mouse").data(n,function(b){return b.segment_key});G.enter().append("path").attr("class","d3plus_mouse").attr("d",function(b){return w(b.values)}).style("stroke","black").style("stroke-width",A).style("fill",
"none").style("stroke-linecap","round").attr("opacity",0);G.on(m.over,function(c){b.draw.frozen||h(b,this,v,2)}).on(m.out,function(c){b.draw.frozen||h(b,this,v,0)});b.draw.timing?G.transition().duration(b.draw.timing).attr("d",function(b){return w(b.values)}).style("stroke-width",A):G.attr("d",function(b){return w(b.values)}).style("stroke-width",A);G.exit().remove()})}},{"../../../client/pointer.coffee":38,"../../../core/fetch/value.coffee":67,"../../../util/closest.coffee":205,"../../../util/copy.coffee":206,
"./style.coffee":233}],229:[function(b,c,d){c.exports=function(b){function c(d){d.attr("d",b.edges.path).style("stroke-width",function(b){return Math.max(1,b.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(b){return"translate("+b.d3plus.x+","+b.d3plus.y+")"})}var d=b.returned.edges||[],d=b.g.edges.selectAll("g.d3plus_edge_path").data(d,function(c){c.d3plus.id="path_"+c[b.edges.source][b.id.value]+"_"+c[b.edges.target][b.id.value];return c.d3plus.id});b.draw.timing?(d.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove(),d.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(b.draw.timing/2).attr("opacity",0).remove(),d.selectAll("path").data(function(b){return[b]}).transition().duration(b.draw.timing).call(c),d.enter().append("g").attr("class","d3plus_edge_path").append("path").style("stroke-width",0).transition().duration(b.draw.timing).call(c)):(d.exit().remove(),d.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),d.selectAll("path").data(function(b){return[b]}).call(c),
d.enter().append("g").attr("class","d3plus_edge_path").append("path").call(c))}},{}],230:[function(b,c,d){var g,f,h,k,l;l=b("./style.coffee");k={};h={};g={};f={};c.exports=function(b,c,d,q){var n,r,p,w,v;p=b.id.nesting[b.depth.value+1];w=d3.svg.line.radial().interpolate("linear-closed").radius(function(b){return b.d3plus.r}).angle(function(b){return b.d3plus.a});n=function(c){b.labels.value&&(c.d3plus.label?c.d3plus_label=c.d3plus.label:delete c.d3plus_label);return[c]};b.draw.timing?(c.each(function(c){var d,
f,g,h;g=c[p];h=[];d=0;for(f=g.length;d<f;d++)c=g[d],h.push(c.d3plus.id=c[b.id.value]+"_"+c[p]);return h}),r=d3.svg.line.radial().interpolate("linear-closed").radius(function(b,c){void 0===k[b.d3plus.id]&&(k[b.d3plus.id]=0);isNaN(k[b.d3plus.id])&&(k[b.d3plus.id]=b.d3plus.r);return k[b.d3plus.id]}).angle(function(b,c){void 0===h[b.d3plus.id]&&(h[b.d3plus.id]=b.d3plus.a);isNaN(h[b.d3plus.id])&&(h[b.d3plus.id]=b.d3plus.a);return h[b.d3plus.id]}),v=function(b,c){return b.attrTween("d",function(b){var d,
l,m,n,t,q,u;u=b[p];m=n=0;for(t=u.length;n<t;m=++n)l=u[m],d=l.d3plus.a,void 0===c?q=l.d3plus.r:0===c&&(q=0),f[l.d3plus.id]=d3.interpolate(h[l.d3plus.id],d),g[l.d3plus.id]=d3.interpolate(k[l.d3plus.id],q);return function(c){var d,n,t;t=b[p];m=d=0;for(n=t.length;d<n;m=++d)l=t[m],h[l.d3plus.id]=f[l.d3plus.id](c),k[l.d3plus.id]=g[l.d3plus.id](c);return r(b[p])}})},d.append("path").attr("class","d3plus_data").call(l,b).attr("d",function(b){return r(b[p])}),c.selectAll("path.d3plus_data").data(n).transition().duration(b.draw.timing).call(l,
b).call(v),q.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(v,0)):(d.append("path").attr("class","d3plus_data"),c.selectAll("path.d3plus_data").data(n).call(l,b).attr("d",function(b){return w(b[p])}))}},{"./style.coffee":233}],231:[function(b,c,d){var g;g=b("./style.coffee");c.exports=function(b,c,d,l){var m,t,u;m=function(c){var d,g;b.labels.value&&!c.d3plus.label?(g=c.d3plus.r?2*c.d3plus.r:c.d3plus.width,d=c.d3plus.r?2*c.d3plus.r:c.d3plus.height,c.d3plus_label={w:g,h:d,
x:0,y:0},c.d3plus_share={w:g,h:d,x:0,y:0},c.d3plus_label.shape="circle"===c.d3plus.shape?"circle":"square"):c.d3plus.label?c.d3plus_label=c.d3plus.label:delete c.d3plus_label;return[c]};t=function(b){return b.attr("x",function(b){return b.d3plus.init&&"x"in b.d3plus.init?b.d3plus.init.x:b.d3plus.init&&"width"in b.d3plus.init?-b.d3plus.width/2:0}).attr("y",function(b){return b.d3plus.init&&"y"in b.d3plus.init?b.d3plus.init.y:b.d3plus.init&&"height"in b.d3plus.init?-b.d3plus.height/2:0}).attr("width",
function(b){return b.d3plus.init&&"width"in b.d3plus.init?b.d3plus.init.width:0}).attr("height",function(b){return b.d3plus.init&&"height"in b.d3plus.init?b.d3plus.init.height:0})};u=function(c){return c.attr("x",function(b){return-(b.d3plus.r?2*b.d3plus.r:b.d3plus.width)/2}).attr("y",function(b){return-(b.d3plus.r?2*b.d3plus.r:b.d3plus.height)/2}).attr("width",function(b){return b.d3plus.r?2*b.d3plus.r:b.d3plus.width}).attr("height",function(b){return b.d3plus.r?2*b.d3plus.r:b.d3plus.height}).attr("rx",
function(b){var c;c="circle"===b.d3plus.shape;b=b.d3plus.r?2*b.d3plus.r:b.d3plus.width;return c?(b+2)/2:0}).attr("ry",function(b){var c;c="circle"===b.d3plus.shape;b=b.d3plus.r?2*b.d3plus.r:b.d3plus.height;return c?(b+2)/2:0}).attr("transform",function(b){return"rotate"in b.d3plus?"rotate("+b.d3plus.rotate+")":""}).attr("shape-rendering",function(c){return"square"!==c.d3plus.shape||"rotate"in c.d3plus?"auto":b.shape.rendering.value})};if(b.draw.timing)return d.append("rect").attr("class","d3plus_data").call(t).call(g,
b),c.selectAll("rect.d3plus_data").data(m).transition().duration(b.draw.timing).call(u).call(g,b),l.selectAll("rect.d3plus_data").transition().duration(b.draw.timing).call(t);d.append("rect").attr("class","d3plus_data");return c.selectAll("rect.d3plus_data").data(m).call(u).call(g,b)}},{"./style.coffee":233}],232:[function(b,c,d){var g;g=b("../../../core/fetch/value.coffee");c.exports=function(b,c,d){var l;return(l=b[d].value)?d in c.d3plus?c.d3plus[d]:g(b,c,l):c.d3plus[d]}},{"../../../core/fetch/value.coffee":67}],
233:[function(b,c,d){var g,f,h;g=b("./color.coffee");f=b("../../../client/ie.js");h=b("../../../core/fetch/value.coffee");c.exports=function(b,c){return b.attr("fill",function(b){return b.d3plus&&b.d3plus.spline?"none":g(b,c)}).style("stroke",function(b){if(b.d3plus&&b.d3plus.stroke)return b.d3plus.stroke;b=b.values?g(b.values[0],c):g(b,c,!0);return d3.rgb(b).darker(.6)}).style("stroke-width",function(b){if(f&&c.types[c.type.value].zoom)return 0;if("line"===b.d3plus.shape&&c.size.value){if(c.size.value.constructor===
Number)return c.size.value;if((b=h(c,b,c.size.value))&&b.length)return d3.max(b)}return c.data.stroke.width}).attr("opacity",c.data.opacity).attr("vector-effect","non-scaling-stroke")}},{"../../../client/ie.js":37,"../../../core/fetch/value.coffee":67,"./color.coffee":219}],234:[function(b,c,d){var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("d",d3.svg.symbol().type("triangle-down").size(function(b){b=Math.min(b.d3plus.width,b.d3plus.height);return d3.scale.pow().exponent(2)(b/
2)}))}d.append("path").attr("class","d3plus_data").call(function(b){b.attr("d",d3.svg.symbol().type("triangle-down").size(10))}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"./style.coffee":233}],235:[function(b,c,d){var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("d",d3.svg.symbol().type("triangle-up").size(function(b){b=
Math.min(b.d3plus.width,b.d3plus.height);return d3.scale.pow().exponent(2)(b/2)}))}d.append("path").attr("class","d3plus_data").call(function(b){b.attr("d",d3.svg.symbol().type("triangle-up").size(10))}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"./style.coffee":233}],236:[function(b,c,d){c.exports=function(b,c,d,k){var l,
m,t,u,q,n,r,p;m=function(b){b.d3plus.text?b.d3plus_label={w:r,h:r,x:0,y:0,background:"#fff",resize:!1,angle:0<=["left","right"].indexOf(b.d3plus.position)?90:0}:b.d3plus.label?b.d3plus_label=b.d3plus.label:delete b.d3plus_label;return[b]};p=function(c){return c.style("stroke-width",b.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",b.shape.rendering.value)};t=function(b){return b.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)};n=function(b){return b.attr("x1",
function(b){var c;if(0<=["top","bottom"].indexOf(b.d3plus.position))return 0;c=b.d3plus.offset||0;b=b.d3plus.width||0;return(0>c?-b:b)+c}).attr("x2",function(b){return 0<=["top","bottom"].indexOf(b.d3plus.position)?0:b.d3plus.offset||0}).attr("y1",function(b){var c;if(0<=["left","right"].indexOf(b.d3plus.position))return 0;c=b.d3plus.offset||0;b=b.d3plus.height||0;return(0>c?-b:b)+c}).attr("y2",function(b){return 0<=["left","right"].indexOf(b.d3plus.position)?0:b.d3plus.offset||0}).attr("marker-start",
"url(#d3plus_whisker_marker)")};u=b.defs.selectAll("#d3plus_whisker_marker").data([0]);u.enter().append("marker").attr("id","d3plus_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line");(l=c.datum())?(q=l.d3plus.position,q=0<=["top","bottom"].indexOf(q)?"horizontal":"vertical",r="horizontal"===q?l.d3plus.width:l.d3plus.height):(q="horizontal",r=0);u.select("line").attr("x1","horizontal"===q?-r/2:0).attr("x2","horizontal"===q?r/2:0).attr("y1","vertical"===
q?-r/2:0).attr("y2","vertical"===q?r/2:0).call(p).style("stroke-width",2*b.data.stroke.width);b.draw.timing?(d.append("line").attr("class","d3plus_data").call(p).call(t),c.selectAll("line.d3plus_data").data(m).transition().duration(b.draw.timing).call(p).call(n),k.selectAll("line.d3plus_data").transition().duration(b.draw.timing).call(t)):(d.append("line").attr("class","d3plus_data"),c.selectAll("line.d3plus_data").data(m).call(p).call(n))}},{}],237:[function(b,c,d){var g=b("../../../client/pointer.coffee"),
f=b("../../../client/prefix.coffee"),h=b("../../../core/console/print.coffee"),k=b("../../../client/touch.coffee"),l=b("../zoom/propagation.coffee");c.exports=function(b){b.dev.value&&h.time("creating SVG elements");b.svg=b.container.value.selectAll("svg#d3plus").data([0]);b.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",b.width.value).attr("height",b.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink");b.g.bg=b.svg.selectAll("rect#bg").data(["bg"]);
b.g.bg.enter().append("rect").attr("id","bg").attr("fill",b.background.value).attr("stroke","none").attr("width",b.width.value).attr("height",b.height.value);b.g.timeline=b.svg.selectAll("g#timeline").data(["timeline"]);b.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+b.height.value+")");b.g.legend=b.svg.selectAll("g#key").data(["key"]);b.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+b.height.value+")");b.g.footer=b.svg.selectAll("g#footer").data(["footer"]);
b.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+b.height.value+")");var c="clipping_"+b.container.id;b.g.clipping=b.svg.selectAll("#clipping").data(["clipping"]);b.g.clipping.enter().append("clipPath").attr("id",c).append("rect").attr("width",b.width.viz).attr("height",b.height.viz);b.g.container=b.svg.selectAll("g#container").data(["container"]);b.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+c+")").attr("transform","translate("+
b.margin.left+","+b.margin.top+")");b.g.zoom=b.g.container.selectAll("g#zoom").data(["zoom"]);b.g.zoom.enter().append("g").attr("id","zoom");b.g.viz=b.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]);b.g.viz.enter().append("g").attr("id","d3plus_viz");b.g.overlay=b.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]);b.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",b.width.value).attr("height",b.height.value).attr("opacity",0);b.g.overlay.on(g.move,
function(c){k&&l(b,d3.event);b.types[b.type.value].zoom&&b.zoom.pan.value&&b.zoom.behavior.scaleExtent()[0]<b.zoom.scale?d3.select(this).style("cursor",f()+"grab"):d3.select(this).style("cursor","auto")}).on(g.up,function(c){k&&l(b,d3.event);b.types[b.type.value].zoom&&b.zoom.pan.value&&b.zoom.behavior.scaleExtent()[0]<b.zoom.scale?d3.select(this).style("cursor",f()+"grab"):d3.select(this).style("cursor","auto")}).on(g.down,function(c){k&&l(b,d3.event);b.types[b.type.value].zoom&&b.zoom.pan.value&&
b.zoom.behavior.scaleExtent()[0]<b.zoom.scale?d3.select(this).style("cursor",f()+"grabbing"):d3.select(this).style("cursor","auto")});b.g.app=b.g.viz.selectAll("g#app").data(["app"]);b.g.app.enter().append("g").attr("id","app");b.g.edges=b.g.viz.selectAll("g#edges").data(["edges"]);b.g.edges.enter().append("g").attr("id","edges").attr("opacity",0);b.g.edge_focus=b.g.viz.selectAll("g#focus").data(["focus"]);b.g.edge_focus.enter().append("g").attr("id","focus");b.g.edge_hover=b.g.viz.selectAll("g#edge_hover").data(["edge_hover"]);
b.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0);b.g.data=b.g.viz.selectAll("g#data").data(["data"]);b.g.data.enter().append("g").attr("id","data").attr("opacity",0);b.g.data_focus=b.g.viz.selectAll("g#data_focus").data(["data_focus"]);b.g.data_focus.enter().append("g").attr("id","data_focus");b.g.labels=b.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]);b.g.labels.enter().append("g").attr("id","d3plus_labels");b.defs=b.svg.selectAll("defs").data(["defs"]);b.defs.enter().append("defs");
b.dev.value&&h.timeEnd("creating SVG elements")}},{"../../../client/pointer.coffee":38,"../../../client/prefix.coffee":39,"../../../client/touch.coffee":43,"../../../core/console/print.coffee":52,"../zoom/propagation.coffee":252}],238:[function(b,c,d){var g=b("../../../core/console/print.coffee");c.exports=function(b){b.dev.value&&g.time("updating SVG elements");b.draw.timing?(b.container.value.transition().duration(b.draw.timing).style("width",b.width.value+"px").style("height",b.height.value+"px"),
b.svg.transition().duration(b.draw.timing).attr("width",b.width.value).attr("height",b.height.value),b.g.bg.transition().duration(b.draw.timing).attr("width",b.width.value).attr("height",b.height.value).attr("fill",b.background.value),b.g.clipping.select("rect").transition().duration(b.draw.timing).attr("width",b.width.viz).attr("height",b.height.viz),b.g.container.transition().duration(b.draw.timing).attr("transform","translate("+b.margin.left+","+b.margin.top+")")):(b.container.value.style("width",
b.width.value+"px").style("height",b.height.value+"px"),b.svg.attr("width",b.width.value).attr("height",b.height.value),b.g.bg.attr("width",b.width.value).attr("height",b.height.value).attr("fill",b.background.value),b.g.clipping.select("rect").attr("width",b.width.viz).attr("height",b.height.viz),b.g.container.attr("transform","translate("+b.margin.left+","+b.margin.top+")"));b.dev.value&&g.timeEnd("updating SVG elements")}},{"../../../core/console/print.coffee":52}],239:[function(b,c,d){var g=b("../../../array/sort.coffee"),
f=b("../../../tooltip/create.js"),h=b("../../../core/data/nest.js"),k=b("./data.js"),l=b("../../../core/fetch/color.coffee"),m=b("../../../core/fetch/text.js"),t=b("../../../core/fetch/value.coffee"),u=b("../../../object/merge.coffee"),q=b("../../../tooltip/remove.coffee"),n=b("../shapes/segments.coffee"),r=b("../../../client/scroll.js"),p=b("../../../util/uniques.coffee"),w=b("../../../object/validate.coffee"),v=b("../zoom/direction.coffee");c.exports=function(b){function c(r){function v(b){return"string"===
typeof d[b].value?d[b].value:d.format.locale.value.method[b]}var A="depth"in b?b.depth:D,E={},K,J=d.id.nesting[A+1]in z?A+1:A,R=d.id.nesting[J],Y="merged"in z.d3plus?z.d3plus.merged:z[R];Y instanceof Array||(Y=[Y]);var ba=t(d,z,d.size.value);if(d.tooltip.children.value){Y=Y.slice(0);1<Y.length&&w(Y[0])&&(Y=h(d,Y,[R]));if(d.size.value&&w(Y[0])){var ca=[];K=Y.filter(function(b){if(null===t(d,b,d.size.value)||"d3plus"in b&&b.d3plus.merged)ca.push(b);else return!0});g(K,d.size.value,"desc",[],d);Y=K.concat(ca)}var aa=
Y.length,Z=d3.min([aa,"short"===L?3:d.data.large]);K={values:[]};for(var qa=0;qa<Z&&Y.length;qa++){var ma=Y.shift(),za=m(d,ma,J)[0],va=w(ma)?t(d,ma,R,J):ma;if(va!==z[d.id.nesting[A]]&&za&&!K[za]){var oa=w(ma)?t(d,ma,d.size.value,R):null,ua=l(d,ma,R);K[za]=!oa||oa instanceof Array?"":d.format.value(oa,{key:d.size.value,vars:d,data:ma});ma={};ma[za]=K[za];K.values.push(ma);ua&&(K.d3plus_colors||(K.d3plus_colors={}),K.d3plus_colors[za]=ua)}else qa--}aa>Z&&(K.d3plusMore=aa-Z)}z.d3plus.tooltip&&(E=u(E,
z.d3plus.tooltip));d.tooltip.size.value&&(ba&&"number"!==typeof d.size.value&&(E[v("size")]=ba),d.axes.opposite&&d[d.axes.opposite].value!==d.size.value&&(E[v(d.axes.opposite)]=t(d,z,d[d.axes.opposite].value)),d.axes.opposite&&d[d.axes.opposite+"2"].value!==d.size.value&&(E[v(d.axes.opposite+"2")]=t(d,z,d[d.axes.opposite+"2"].value)),d.color.valueScale&&(E[v("color")]=t(d,z,d.color.value)));J=n(d,z,"active");A=n(d,z,"temp");R=n(d,z,"total");"number"==typeof J&&0<J&&R&&(E[v("active")]=J+"/"+R+" ("+
d.format.value(J/R*100,{key:"share",vars:d,data:z})+")");"number"==typeof A&&0<A&&R&&(E[v("temp")]=A+"/"+R+" ("+d.format.value(A/R*100,{key:"share",vars:d,data:z})+")");d.tooltip.share.value&&z.d3plus.share&&(E.share=d.format.value(100*z.d3plus.share,{key:"share",vars:d,data:z}));J="depth"in b?b.depth:D;A=b.title||m(d,z,J)[0];R=p(z,d.icon.value,t,d,d.id.nesting[J]);E=k(d,z,L,E,K,J);R=1===R.length&&"string"===typeof R[0]?R[0]:!1;0<E.length||M||!z.d3plus_label&&"short"==L&&A||z.d3plus_label&&(!("visible"in
z.d3plus_label)||"visible"in z.d3plus_label&&!1===z.d3plus_label.visible)?(A||(A=d.format.value(va,{key:d.id.value,vars:d})),J="d3plus"in z&&"merged"in z.d3plus?D-1:"depth"in b?b.depth:D,0>J&&(J=0),J=d.id.nesting[J],va="string"==typeof d.icon.style.value?d.icon.style.value:"object"==typeof d.icon.style.value&&d.icon.style.value[J]?d.icon.style.value[J]:"default",K=d.tooltip.small,b.width?K=b.width:H&&(K=d.tooltip.large),J=!H&&"long"!==b.length||H&&d.tooltip.fullscreen.value?d3.select("body"):d.container.value,
!b.description&&z&&d.tooltip.sub.value&&(b.description=t(d,z,d.tooltip.sub.value)),f({align:I,arrow:C,locale:d.format.locale.value,background:d.tooltip.background,curtain:d.tooltip.curtain.color,curtainopacity:d.tooltip.curtain.opacity,fontcolor:d.tooltip.font.color,fontfamily:d.tooltip.font.family.value,fontsize:d.tooltip.font.size,fontweight:d.tooltip.font.weight,data:E,color:l(d,z),allColors:!0,footer:!1===b.footer?b.footer:M,fullscreen:H,html:r,js:b.js,icon:R,id:G,max_height:b.maxheight,max_width:K,
mouseevents:B,offset:S,parent:J,stacked:d.tooltip.stacked.value,style:va,title:A,description:b.description,width:b.width||H||0!=E.length?K:"auto",x:P,y:N})):q(G)}"d3plus"in b.data||(b.data.d3plus={});var d=b.vars,z=b.data,D="d3plus"in z&&"depth"in z.d3plus?z.d3plus.depth:d.depth.value,B=b.mouseevents?b.mouseevents:!1,C="arrow"in b?b.arrow:!0,E=t(d,z,d.id.value),G=b.id||d.type.value;if(!d3.event||"click"!=d3.event.type||!d.tooltip.html.value&&!d.tooltip.value["long"]||"fullscreen"in b){var H=!1,I=
b.anchor||d.tooltip.anchor,L=b.length||"short",J=v(z,d);-1===J&&t(d,E,d.id.nesting[D-1]);var K="";!d.mouse.click.value||d.mouse.viz&&!1===d.mouse.viz.click||(1===J&&d.zoom.value?K=d.format.value(d.format.locale.value.ui.expand):-1===J&&d.zoom.value&&d.history.states.length&&!d.tooltip.value["long"]?K=d.format.value(d.format.locale.value.ui.collapse):d.small||"short"!=L||!d.tooltip.html.value&&!d.tooltip.value["long"]||1===d.focus.value.length&&d.focus.value[0]==E?"long"==L&&(K=d.footer.value||""):
K=d.format.locale.value.ui.moreInfo);M=K.length?d.format.value(K,{key:"footer",vars:d}):!1}else{var H=!0,C=!1,B=!0,L="long",M=d.footer.value;d.covered=!0}if("x"in b)var P=b.x;else"static"===d.types[d.type.value].tooltip?(P=z.d3plus.x,d.zoom.translate&&d.zoom.scale&&(P=d.zoom.translate[0]+P*d.zoom.scale),P+=d.margin.left,"long"!==b.length&&(N+=r.x(),P+=d.container.value.node().getBoundingClientRect().left,P+=parseFloat(d.container.value.style("padding-left"),10))):P=d3.mouse(d3.select("html").node())[0];
if("y"in b)var N=b.y;else"static"==d.types[d.type.value].tooltip?(N=z.d3plus.y,d.zoom.translate&&d.zoom.scale&&(N=d.zoom.translate[1]+N*d.zoom.scale),N+=d.margin.top,"long"!==b.length&&(N+=r.y(),N+=d.container.value.node().getBoundingClientRect().top,N+=parseFloat(d.container.value.style("padding-top"),10))):N=d3.mouse(d3.select("html").node())[1];if("offset"in b)var S=b.offset;else"static"==d.types[d.type.value].tooltip?(S=z.d3plus.r?z.d3plus.r:z.d3plus.height/2,d.zoom.scale&&(S*=d.zoom.scale)):
S=3;H||"long"===b.length?"string"==typeof d.tooltip.html.value?c(d.tooltip.html.value):"function"==typeof d.tooltip.html.value?c(d.tooltip.html.value(E)):d.tooltip.html.value&&"object"==typeof d.tooltip.html.value&&d.tooltip.html.value.url?(J=d.tooltip.html.value.url,"function"===typeof J&&(J=J(E)),d3.json(J,function(b){b=d.tooltip.html.value.callback?d.tooltip.html.value.callback(b):b;c(b)})):c(b.html):c(b.html)}},{"../../../array/sort.coffee":34,"../../../client/scroll.js":41,"../../../core/data/nest.js":60,
"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/merge.coffee":170,"../../../object/validate.coffee":171,"../../../tooltip/create.js":200,"../../../tooltip/remove.coffee":202,"../../../util/uniques.coffee":209,"../shapes/segments.coffee":232,"../zoom/direction.coffee":249,"./data.js":240}],240:[function(b,c,d){var g=b("../../../util/copy.coffee"),f=b("../../../core/fetch/value.coffee"),h=b("../../../core/fetch/color.coffee"),
k=b("../../../core/fetch/text.js"),l=b("../../../color/legible.coffee"),m=b("../../../object/merge.coffee"),t=b("../../../client/prefix.coffee"),u=b("../../../string/format.js"),q=b("../../../object/validate.coffee");c.exports=function(b,c,d,w,v,y){function A(d,g){var h=b.attrs.value[g]?g:null;g&&(g=b.format.value(g));h=z[d]||f(b,c,d,h);if(q(h))E.push({name:b.format.value(d),value:b.format.value(h.value,{key:h.key,vars:b}),group:g});else if(null!=h&&"undefined"!=h&&!(h instanceof Array)&&("string"===
typeof h&&0>h.indexOf("d3plus_other")||"string"!==typeof h)){var k=b.format.locale.value.ui[d]?b.format.value(b.format.locale.value.ui[d]):b.format.value(d),l=0<=B.indexOf(d);h instanceof Array?h.forEach(function(f){b.format.value(f,{key:d,vars:b,data:c})}):h=b.format.value(h,{key:d,vars:b,data:c});h={name:k,value:h,highlight:l,group:g};b.descs.value&&("function"===typeof b.descs.value?(k=b.descs.value(d),"string"===typeof k&&(h.desc=k)):d in b.descs.value&&(h.desc=b.descs.value[d]));E.push(h)}}if(b.small)return[];
d||(d="long");var x="long"==d?"short":"long",z={};if(w&&"string"==typeof w)w=[w];else if(w&&"object"==typeof w){z=m(z,w);w=[];for(var D in z)w.push(D)}else w||(w=[]);var B=[];if(b.tooltip.value instanceof Array)var C=b.tooltip.value;else"string"==typeof b.tooltip.value?C=[b.tooltip.value]:(C=b.tooltip.value[b.id.nesting[y]]?b.tooltip.value[b.id.nesting[y]]:b.tooltip.value,C instanceof Array||(C=C[d]?C[d]:C[x]?[]:m({"":[]},C)),"string"==typeof C?C=[C]:C instanceof Array||(C=m({"":[]},C)));var E=[];
C.constructor===Array&&(C={"":C});b.id.nesting.length&&y<b.id.nesting.length-1&&(C=g(C),b.id.nesting.forEach(function(b,c){c>y&&C[b]&&delete C[b]}));for(var G in C)for(C[G].constructor!==Array&&(C[G]=[C[G]]),x=w.length;0<x;x--)0<=C[G].indexOf(w[x-1])&&w.splice(x-1,1);if(b.tooltip.value["long"]&&"object"==typeof b.tooltip.value["long"])for(G in b.tooltip.value["long"])for(x=w.length;0<x;x--)D=w[x-1],0<=b.tooltip.value["long"][G].indexOf(D)&&(C[G]||(C[G]=[]),C[G].push(D),w.splice(x-1,1));w.length&&
(C[""]||(C[""]=[]),C[""]=C[""].concat(w));for(G in C)C[G].forEach(function(b){A(b,G)});if(v){var H=b.format.locale.value.ui.including,I=v.d3plus_colors;v.values.forEach(function(c){var d=d3.keys(c)[0];E.push({group:b.format.value(H),highlight:I&&I[d]?I[d]:!1,name:d,value:c[d]})});v.d3plusMore&&E.push({group:b.format.value(H),highlight:!0,name:u(b.format.locale.value.ui.more,v.d3plusMore),value:""})}b.tooltip.connections.value&&"long"===d&&(d=b.edges.connections(c[b.id.value],b.id.value,!0),d.length&&
d.forEach(function(c){var d=b.data.viz.filter(function(d){return d[b.id.value]===c[b.id.value]}),d=d.length?d[0]:c,f=k(b,d)[0],g=h(b,d),m=b.tooltip.font.size,r="square"==b.shape.value?0:m;styles=["background-color: "+g,"border-color: "+l(g),"border-style: solid","border-width: "+b.data.stroke.width+"px","display: inline-block","height: "+m+"px","left: 0px","position: absolute","width: "+m+"px","top: 0px",t()+"border-radius: "+r+"px"];node="<div style='"+styles.join("; ")+";'></div>";E.push({group:b.format.value(b.format.locale.value.ui.primary),
highlight:!1,link:function(){b.self.focus([d[b.id.value]]).draw()},name:"<div id='d3plustooltipfocuslink_"+d[b.id.value]+"' class='d3plus_tooltip_focus_link' style='position:relative;padding-left:"+1.5*m+"px;'>"+node+f+"</div>"})}));return E}},{"../../../client/prefix.coffee":39,"../../../color/legible.coffee":44,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/merge.coffee":170,"../../../object/validate.coffee":171,"../../../string/format.js":172,
"../../../util/copy.coffee":206}],241:[function(b,c,d){var g;g=b("../../../core/console/print.coffee");c.exports=function(b){var c,d,l,m,t,u;b.group=b.g.apps[b.type.value];b.mouse.viz=!1;b.edges.path=!1;u=b.types[b.type.value];c=0<=(u.requirements||[]).indexOf("data");c=!c||c&&b.data.viz.length;if(!b.error.internal&&c){c=b.format.locale.value.visualization[b.type.value];b.dev.value&&g.time("running "+c);t=b.data.viz;l=0;for(m=t.length;l<m;l++)d=t[l],d.d3plus&&(delete d.d3plus.shape,delete d.d3plus.label,
delete d.d3plus.rotate,delete d.d3plus.share);u=u(b);b.dev.value&&g.timeEnd("running "+c)}else u=null;b.returned={nodes:[],edges:null};u instanceof Array?b.returned.nodes=u:u&&(u.nodes&&(b.returned.nodes=u.nodes),u.edges&&(b.returned.edges=u.edges))}},{"../../../core/console/print.coffee":52}],242:[function(b,c,d){var g=b("../../../util/copy.coffee"),f=b("../../../form/form.js"),h=b("../../../core/console/print.coffee"),k=b("../../../object/validate.coffee");c.exports=function(b){var c=b.ui.value&&
b.ui.value.length,d=b.ui.position.value;b.dev.value&&c&&h.time("drawing custom UI elements");var u=b.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);u.enter().append("div").attr("id","d3plus_drawer");var q={};b.ui.position.accepted.forEach(function(c){q[c]=c==d?b.margin.bottom+"px":"auto"});u.style("text-align",b.ui.align.value).style("position","absolute").style("width",b.width.value-2*b.ui.padding+"px").style("height","auto").style(q);var n=u.selectAll("div.d3plus_drawer_ui").data(c?
b.ui.value:[],function(b){return b.method||!1});n.exit().remove();n.enter().append("div").attr("class","d3plus_drawer_ui").style("display","inline-block");n.style("padding",b.ui.padding+"px").each(function(c){c.form||(c.form=f().container(d3.select(this)).data({sort:!1}).id("id").text("text"));var d,h;"string"===typeof c.method&&c.method in b?(d=b[c.method].value,h=function(d){d!==b[c.method].value&&b.self[c.method](d).draw()}):(d=c.value[0],k(d)&&(d=d[d3.keys(d)[0]]),"function"===typeof c.method&&
(h=function(d){c.method(d,b.self)}));var m=[],n;c.label?n=c.label:"string"===typeof c.method&&c.method in b&&(n=b.format.locale.value.method[c.method]||c.method);c.value.forEach(function(c){var d={};k(c)?(d.id=c[d3.keys(c)[0]],d.text=b.format.value(d3.keys(c)[0])):(d.id=c,d.text=b.format.value(c));m.push(d)});var t=g(b.ui.font);t.align=g(b.font.align);t.secondary=g(t);c.form.data(m).font(t).focus(1<c.value.length?d:!1).focus({callback:h}).format(b.format.locale.language).format({number:b.format.number.value,
text:b.format.text.value}).title(b.format.value(n)).type(c.type||"auto").ui({align:b.ui.align.value,border:b.ui.border,color:{primary:b.ui.color.primary.value,secondary:b.ui.color.secondary.value},padding:b.ui.padding,margin:0}).width(c.width||!1).draw()});(u=u.node().offsetHeight||u.node().getBoundingClientRect().height)&&(b.margin[d]+=u);b.dev.value&&c&&h.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.coffee":52,"../../../form/form.js":103,"../../../object/validate.coffee":171,
"../../../util/copy.coffee":206}],243:[function(b,c,d){var g,f,h,k;g=b("../../../client/pointer.coffee");f=b("../../../color/lighter.coffee");h=b("../../../core/console/print.coffee");k=b("../../../client/css.coffee");c.exports=function(b){var c,d,u,q,n,r,p,w,v;if(!b.small&&0<b.history.states.length){if(b.dev.value&&h.time("drawing back button"),c=b.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]).style("position","relative").style("z-index",1900),r=b.title.sub.font.size,
d=b.title.sub.font.color,q=b.title.sub.font.family.value,v=b.title.sub.font.weight,u=b.title.sub.padding,p=!1,b.title.sub.value&&0>["start","left"].indexOf(b.title.sub.font.align)?p="sub":b.title.total.value&&0>["start","left"].indexOf(b.title.total.font.align)?p="total":b.title.value&&0>["start","left"].indexOf(b.title.font.align)&&(p="title"),p?(u=function(b){b=b.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];b=b.replace(/([^a-z])\s([^a-z])/gi,"$1,$2");b=b.split(",");b=b[b.length-1];return parseFloat(b.substring(0,
b.length-1))},p=b.svg.select(".d3plus_title."+p),w=u(p)+u(p.select("text"))):(w=b.margin.top-b.title.padding,b.margin.top+=r+2*u),u=parseFloat(b.container.value.style("padding-top"),10),w+=u,u=parseFloat(b.container.value.style("padding-left"),10),n=b.margin.left+r/2+u,u=function(b){return b.style("position","absolute").style("left",n+"px").style("top",w+"px").style("color",d).style("font-family",q).style("font-weight",v).style("font-size",r+"px")},c.enter().append("div").attr("id","d3plus_back_button").style("opacity",
0).call(u).html(function(){var c;k("font-awesome")&&0===b.icon.back.value.indexOf("fa-")?(c="<i class='fa "+b.icon.back.value,c+="' style='margin-top:2px;margin-right:4px;'></i>"):c=b.icon.back.value+" ";return c+b.format.value(b.format.locale.value.ui.back)}),c.on(g.over,function(){if(!b.small&&0<b.history.states.length)return d3.select(this).style("cursor","pointer").transition().duration(b.timing.mouseevents).style("color",f(d,.25))}).on(g.out,function(){if(!b.small&&0<b.history.states.length)return d3.select(this).style("cursor",
"auto").transition().duration(b.timing.mouseevents).style("color",d)}).on(g.click,function(){return b.history.back()}).transition().duration(b.draw.timing).style("opacity",1).call(u),b.dev.value)return h.timeEnd("drawing back button")}else return b.container.value.selectAll("div#d3plus_back_button").transition().duration(b.draw.timing).style("opacity",0).remove()}},{"../../../client/css.coffee":36,"../../../client/pointer.coffee":38,"../../../color/lighter.coffee":45,"../../../core/console/print.coffee":52}],
244:[function(b,c,d){var g=b("../../../array/sort.coffee"),f=b("../../../util/buckets.coffee"),h=b("../../../util/copy.coffee"),k=b("../tooltip/create.js"),l=b("../../../core/data/nest.js"),m=b("../../../util/dataURL.coffee"),t=b("../../../client/pointer.coffee"),u=b("../../../core/fetch/value.coffee"),q=b("../../../core/fetch/color.coffee"),n=b("../../../core/fetch/text.js"),r=b("../../../core/console/print.coffee"),p=b("../../../tooltip/remove.coffee"),w=b("../../../color/text.coffee"),v=b("../../../util/uniques.coffee"),
y=b("../../../client/scroll.js"),A=b("../../../string/strip.js"),x=b("../../../textwrap/textwrap.coffee");b("../../../client/touch.coffee");var z=b("../../../object/validate.coffee");c.exports=function(b){var c=!0,d=0;if(!b.error.internal&&b.color.value&&!b.small&&b.legend.value)if(b.color.valueScale)if(b.color.valueScale){b.dev.value&&r.time("drawing color scale");b.g.legend.selectAll("g.d3plus_color").transition().duration(b.draw.timing).attr("opacity",0).remove();var E=b.color.valueScale.domain(),
G=b.color.valueScale.range();2>=E.length&&(E=f(E,6));var H=b.g.legend.selectAll("g.d3plus_scale").data(["scale"]);H.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var I=H.selectAll("#d3plus_legend_heatmap").data(["heatmap"]);I.enter().append("linearGradient").attr("id","d3plus_legend_heatmap").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");I=I.selectAll("stop").data(d3.range(0,G.length));I.enter().append("stop").attr("stop-opacity",
1);I.attr("offset",function(b){return Math.round(b/(G.length-1)*100)+"%"}).attr("stop-color",function(b){return G[b]});I.exit().remove();I=H.selectAll("rect#gradient").data(["gradient"]);I.enter().append("rect").attr("id","gradient").attr("x",function(c){return"middle"==b.legend.align?b.width.value/2:"end"==b.legend.align?b.width.value:0}).attr("y",b.ui.padding).attr("width",0).attr("height",b.legend.gradient.height).attr("stroke",b.legend.font.color).attr("stroke-width",1).style("fill","url(#d3plus_legend_heatmap)");
var L=H.selectAll("text.d3plus_tick").data(d3.range(0,E.length));L.enter().append("text").attr("class","d3plus_tick").attr("stroke","none").attr("x",function(c){return"middle"==b.legend.align?b.width.value/2:"end"==b.legend.align?b.width.value:0}).attr("y",function(c){return this.getBBox().height+b.legend.gradient.height+2*b.ui.padding});var J=0;L.order().attr("font-weight",b.legend.font.weight).attr("font-family",b.legend.font.family.value).attr("font-size",b.legend.font.size+"px").style("text-anchor",
b.legend.font.align).attr("fill",b.legend.font.color).text(function(c){return b.format.value(E[c],{key:b.color.value,vars:b})}).attr("y",function(c){return this.getBBox().height+b.legend.gradient.height+2*b.ui.padding}).each(function(b){b=this.offsetWidth;b>J&&(J=b)});J+=2*b.labels.padding;U=J*(E.length-1);U+J<b.width.value?(U+J<b.width.value/2&&(U=b.width.value/2,J=U/E.length,U-=J),V="start"==b.legend.align?b.ui.padding:"end"==b.legend.align?b.width.value-b.ui.padding-U:b.width.value/2-U/2,L.transition().duration(b.draw.timing).attr("x",
function(b){return V+J*b}),L.exit().transition().duration(b.draw.timing).attr("opacity",0).remove(),L=H.selectAll("rect.d3plus_tick").data(d3.range(0,E.length)),L.enter().append("rect").attr("class","d3plus_tick").attr("x",function(c){return"middle"==b.legend.align?b.width.value/2:"end"==b.legend.align?b.width.value:0}).attr("y",b.ui.padding).attr("width",0).attr("height",b.ui.padding+b.legend.gradient.height).attr("fill",b.legend.font.color),L.transition().duration(b.draw.timing).attr("x",function(b){return V+
J*b-(0===b?1:0)}).attr("y",b.ui.padding).attr("width",1).attr("height",b.ui.padding+b.legend.gradient.height).attr("fill",b.legend.font.color),L.exit().transition().duration(b.draw.timing).attr("width",0).remove(),I.transition().duration(b.draw.timing).attr("x",function(c){return"middle"==b.legend.align?b.width.value/2-U/2:"end"==b.legend.align?b.width.value-U-b.ui.padding:b.ui.padding}).attr("y",b.ui.padding).attr("width",U).attr("height",b.legend.gradient.height),H.transition().duration(b.draw.timing).attr("opacity",
1),b.dev.value&&r.timeEnd("drawing color scale")):c=!1}else c=!1;else{b.dev.value&&r.time("grouping data by colors");var K;if(b.nodes.value&&0<=b.types[b.type.value].requirements.indexOf("nodes")){if(K=h(b.nodes.restriced||b.nodes.value),b.data.viz.length)for(var M=0;M<K.length;M++)H=b.data.viz.filter(function(c){return c[b.id.value]===K[M][b.id.value]}),H.length&&(K[M]=H[0])}else K=b.data.viz;K.length&&"key"in K[0]&&"values"in K[0]&&(K=d3.merge(K.map(function(b){return b.values})));var H=function(c){return q(b,
c,P)},P=0,N=b.id.value,I=b.id.nesting.indexOf(b.color.value);if(0<=I)P=I,N=b.id.nesting[I];else for(I=0;I<=b.depth.value;I++){var P=I,N=b.id.nesting[I],L=v(K,function(c){return u(b,c,N)}),S=v(K,H);if(L.length>=S.length&&1<S.length)break}var G=l(b,K,[b.color.value],!1);b.dev.value&&r.timeEnd("grouping data by color");var L=b.width.value,d=b.legend.size,U=d*G.length+b.ui.padding*(G.length+1);if(d instanceof Array){b.dev.value&&r.time("calculating legend size");for(M=d[1];M>=d[0];M--)if(U=M*G.length+
b.ui.padding*(G.length+1),L>=U){d=M;break}b.dev.value&&r.timeEnd("calculating legend size")}else"number"!=typeof d&&!1!==d&&(d=30);if(L<U||1==G.length)c=!1;else{H=function(c){c.attr("width",d).attr("height",d).attr("fill",function(c){d3.select(this.parentNode).select("text").remove();var f=v(c,b.icon.value,u,b,N),g=q(b,c,N);if(b.legend.icons.value&&1===f.length&&"string"===typeof f[0]){f=f[0];c=A(f+"_"+g);var h=b.icon.style.value,k=b.defs.selectAll("pattern#"+c).data([c]),g="knockout"==("string"===
typeof h?b.icon.style.value:z(h)&&h[N]?h[N]:"default")?g:"none";k.select("rect").transition().duration(b.draw.timing).attr("fill",g).attr("width",d).attr("height",d);k.select("image").transition().duration(b.draw.timing).attr("width",d).attr("height",d);h=k.enter().append("pattern").attr("id",c).attr("width",d).attr("height",d);h.append("rect").attr("fill",g).attr("width",d).attr("height",d);h.append("image").attr("xlink:href",f).attr("width",d).attr("height",d).each(function(b){0===f.indexOf("/")||
0<=f.indexOf(window.location.hostname)?m(f,function(b){k.select("image").attr("xlink:href",b)}):k.select("image").attr("xlink:href",f)});return"url(#"+c+")"}if(b.legend.labels.value){var l;l=b.legend.text.value?[u(b,c,b.legend.text.value,P)]:n(b,c,P);if(1===l.length&&!(l[0]instanceof Array)&&l[0].length){c=d3.select(this.parentNode).append("text");var r=b.legend.font.size;r instanceof Array||(r=[r]);c.attr("font-size",r[r.length-1]+"px").attr("font-weight",b.legend.font.weight).attr("font-family",
b.legend.font.family.value).attr("stroke","none").attr("fill",w(g)).attr("x",0).attr("y",0).each(function(c){x().align("middle").container(d3.select(this)).height(d).padding(b.ui.padding).resize(1<r.length).size(r).text(l[0]).width(d).valign("middle").draw()});c.select("tspan").empty()&&c.remove()}}return g})};I=function(c){c.attr("transform",function(c,f){return"translate("+(V+f*(b.ui.padding+d))+","+b.ui.padding+")"})};U-=2*b.ui.padding;b.dev.value&&r.time("sorting legend");var S=b[b.legend.order.value].value,
W=b.color.value;S?"color"!==b.legend.order.value&&(W=[]):S=b[b.color.value].value;g(G,S,b.legend.order.sort.value,W,b,P);b.dev.value&&r.timeEnd("sorting legend");b.dev.value&&r.time("drawing legend");var V;V="start"==b.legend.align?b.ui.padding:"end"==b.legend.align?L-b.ui.padding-U:L/2-U/2;b.g.legend.selectAll("g.d3plus_scale").transition().duration(b.draw.timing).attr("opacity",0).remove();var X={},L=b.g.legend.selectAll("g.d3plus_color").data(G,function(c){c=q(b,c,N);c in X||(X[c]=-1);X[c]++;return X[c]+
"_"+c});L.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(I).append("rect").attr("class","d3plus_color").call(H);L.order().transition().duration(b.draw.timing).call(I).attr("opacity",1).selectAll("rect.d3plus_color").call(H);L.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();if(b.legend.tooltip.value)L.on(t.over,function(c,f){d3.select(this).style("cursor","pointer");var g=this.getBoundingClientRect(),h=g.left+d/2+y.x(),g=g.top+d/2+y.y()+5,l=u(b,c,N),
m=b.id.nesting.indexOf(N),m=0<=m?n(b,c,m)[0]:b.format.value(u(b,c,b.color.value,N),{key:b.color.value,vars:b,data:c}),r,p;!b.legend.filters.value||l instanceof Array||(p=b.format.locale.value,r="<div style='text-align:center;'>"+("<div class='mute'>"+b.format.value(p.method.mute)+"</div>"),r+="<div class='solo'>"+b.format.value(p.method.solo)+"</div>",r+="</div>",p=function(c){var d={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};c.select(".mute").style(d).on(t.over,
function(){d3.select(this).style("cursor","pointer")}).on(t.click,function(){var c=b.id.mute.value;b.history.states.push(function(){b.self.id({mute:c}).draw()});b.self.id({mute:l}).draw()});c.select(".solo").style(d).on(t.over,function(){d3.select(this).style("cursor","pointer")}).on(t.click,function(){var c=b.id.solo.value;b.history.states.push(function(){b.self.id({solo:c}).draw()});b.self.id({solo:l}).draw()})});k({data:c,html:r,js:p,depth:P,footer:!1,vars:b,x:h,y:g,mouseevents:this,title:m,offset:.4*
d})}).on(t.out,function(c){p(b.type.value)});b.dev.value&&r.timeEnd("drawing legend")}}else c=!1;b.legend.value&&key&&c?(b.dev.value&&r.time("positioning legend"),d?c=d+b.ui.padding:(c=b.g.legend.node().getBBox(),c=c.height+c.y),0===b.margin.bottom&&(b.margin.bottom+=b.ui.padding),b.margin.bottom+=c,b.g.legend.transition().duration(b.draw.timing).attr("transform","translate(0,"+(b.height.value-b.margin.bottom)+")"),b.dev.value&&r.timeEnd("positioning legend")):(b.dev.value&&r.time("hiding legend"),
b.g.legend.transition().duration(b.draw.timing).attr("transform","translate(0,"+b.height.value+")"),b.dev.value&&r.timeEnd("hiding legend"))}},{"../../../array/sort.coffee":34,"../../../client/pointer.coffee":38,"../../../client/scroll.js":41,"../../../client/touch.coffee":43,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/data/nest.js":60,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/validate.coffee":171,
"../../../string/strip.js":174,"../../../textwrap/textwrap.coffee":199,"../../../tooltip/remove.coffee":202,"../../../util/buckets.coffee":203,"../../../util/copy.coffee":206,"../../../util/dataURL.coffee":208,"../../../util/uniques.coffee":209,"../tooltip/create.js":239}],245:[function(b,c,d){var g=b("../../../client/pointer.coffee"),f=b("../../../color/text.coffee");c.exports=function(b,c){c=b.messages.value?c:null;var d=b.messages.style.value||(c===b.error.internal?"large":b.messages.style.backup);
if("large"===d)var m=b.messages,t="center";else m=b.footer.value?b.footer:b.title.value?b.title:b.title.sub.value?b.title.sub:b.title.total.value?b.title.total:b.title.sub,t=m.position;var m={color:m.font.color,"font-family":m.font.family.value,"font-weight":m.font.weight,"font-size":m.font.size+"px",padding:m.padding+"px"},u=b.messages.background.value;u||(u=b.background.value,"none"!==u&&"transparent"!==u)||(u=f(m.color));b.g.message=b.container.value.selectAll("div#d3plus_message").data(["message"]);
b.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0).append("div").attr("class","d3plus_message_text").style("display","block");b.g.message.select(".d3plus_message_text").text(c?c:b.g.message.text());var q=navigator.onLine,n=b.g.message.selectAll(".d3plus_message_branding").data(b.messages.branding.value&&"center"===t?[0]:[]);n.enter().append("div").attr("class","d3plus_message_branding").style("margin-top","15px").style("padding-top","0px").style("display","block").style("font-size",
"11px").style("background-size","75px").style("background-position","center 10px").style("background-repeat","no-repeat").style("cursor","pointer").on(g.click,function(){window.open("http://www.d3plus.org/","_blank")});var r=.5>d3.hsl(u).l?b.messages.branding.image.dark:b.messages.branding.image.light;n.text(q?"Powered by:":"Powered by D3plus").style("background-color",q?u:"transparent").style("background-image",q?"url('"+r+"')":"none").style("min-width",q?"75px":"auto").style("height",q?"75px":"auto");
n.exit().remove();b.g.message.style("display",c?"inline-block":"none").call(function(c){c.style(m).style("position","absolute").style("background-color",u).style("text-align","center").style("left",function(){return"center"==t?"50%":"0px"}).style("width",function(){return"center"==t?"auto":b.width.value+"px"}).style("margin-left",function(){return"center"==t?-(this.offsetWidth/2)+"px":"0px"}).style("top",function(){return"center"==t?"50%":"top"==t?"0px":"auto"}).style("bottom",function(){return"bottom"==
t?"0px":"auto"}).style("margin-top",function(){return"large"==d?-(this.offsetHeight||this.getBoundingClientRect().height)/2+"px":"0px"})}).style("opacity",c?1:0)}},{"../../../client/pointer.coffee":38,"../../../color/text.coffee":50}],246:[function(b,c,d){var g,f,h,k,l,m,t,u,q;g=b("../../../util/closest.coffee");f=b("../../../client/css.coffee");b("../../../font/sizes.coffee");h=b("../../../client/pointer.coffee");k=b("../../../color/mix.coffee");m=b("../../../client/prefix.coffee");t=b("../../../core/console/print.coffee");
u=b("../../../color/text.coffee");q=b("../../../core/data/time.coffee");l=!1;c.exports=function(b){var c,d,w,v,y,A,x,z,D,B,C,E,G,H,I,L,J,K,M,P,N,S,U,W,V,X,ea,da,R,Y,ba,ca,aa;if(!(!b.timeline.value||b.error.internal&&b.data.missing||b.small)&&b.data.time&&1<b.data.time.values.length){b.dev.value&&t.time("drawing timeline");N={"font-weight":b.ui.font.weight,"font-family":b.ui.font.family.value,"font-size":b.ui.font.size+"px","text-anchor":"middle"};aa=b.data.time.ticks.map(function(b){return new Date(b)});
D=q(b,{values:aa,style:N});da=D.values.map(Number);V=D.format;if(b.time.solo.value.length)for(y=d3.extent(b.time.solo.value),x=d=0,c=y.length;d<c;x=++d)A=y[x],A.constructor!==Date&&(A+="",4===A.length&&parseInt(A)+""===A&&(A+="/01/01"),A=new Date(A),y[x]=A);else y=d3.extent(aa);ca=aa.slice();Y=d3.max(D.sizes.map(function(b){return b.height}));z=~~d3.max(D.sizes.map(function(b){return b.width}))+1;z+=2*b.ui.padding;X=b.timeline.height.value||Y+2*b.ui.padding;A=z*aa.length;d=X-2*b.ui.padding>=Y;c=b.width.value-
2*b.ui.padding;d&&b.timeline.play.value&&(c-=X+b.ui.padding);if(!d||da.length<aa.length||c<z*da.length){D=z;z=(c-z)/aa.length;A=z*aa.length;ea=1;for(U=~~(D/(A/da.length))+1;U<da.length-1&&0!==(da.length-1)%U;)U++;da=da.filter(function(b,c){return 0===c%U})}else ea=0,c=new Date(aa[0]),D=b.data.time.stepType,c["set"+D](c["get"+D]()+aa.length),ca.push(c);c=new Date(y[0]);c=g(ca,c);y=new Date(y[1]);if(!ea)y["set"+b.data.time.stepType](y["get"+b.data.time.stepType]()+1);y=g(ca,y);ba=ca.map(Number);C=ba.indexOf(+c);
B=ba.indexOf(+y);v=[c,y];J="start"===b.timeline.align?b.ui.padding:"end"===b.timeline.align?b.width.value-b.ui.padding-A:b.width.value/2-A/2;d&&b.timeline.play.value&&(J+=(X+b.ui.padding)/2);K=function(){clearInterval(l);l=!1;return G.call(H,"icon")};y=function(){var b,c;if(null!==d3.event.sourceEvent){l&&K();v=w.extent();c=g(ca,v[0]);b=g(ca,v[1]);c===b&&(C=ba.indexOf(+c),c<v[0]||0===C?b=ca[C+1]:c=ca[C-1]);C=ba.indexOf(+c);B=ba.indexOf(+b);if(1<=B-C)b=[c,b];else if(C+1<=aa.length)b=[c,ca[C+1]];else{b=
[c];for(x=1;1>=x;)C+x<=aa.length?b.push(ca[C+x]):b.unshift(ca[C-(C+x-aa.length)]),x++;b=[b[0],b[b.length-1]]}v=b;M.attr("fill",P);return d3.select(this).call(w.extent(b))}};L=function(){var c;B-C===aa.length-ea?c=[]:(c=ba.filter(function(b,c){return c>=C&&c<B+ea}),c=c.map(function(b){return new Date(b)}));I();return b.self.time({solo:c}).draw()};c=function(){var c,d;if(null!==d3.event.sourceEvent&&(b.time.solo.value.length?(d=d3.extent(b.time.solo.value),c=ba.indexOf(+g(ca,d[0])),d=ba.indexOf(+g(ca,
d[1])),c=c!==C||d!==B):c=B-C!==aa.length-ea,c))return L()};E=b.g.timeline.selectAll("rect.d3plus_timeline_play").data(d&&b.timeline.play.value?[0]:[]);D=function(c){return c.attr("width",X+1).attr("height",X+1).attr("fill",b.ui.color.primary.value).attr("stroke",b.ui.color.primary.value).attr("stroke-width",1).attr("x",J-X-1-b.ui.padding).attr("y",b.ui.padding)};E.enter().append("rect").attr("class","d3plus_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(D);E.transition().duration(b.draw.timing).call(D);
E.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();G=b.g.timeline.selectAll("text.d3plus_timeline_playIcon").data(d&&b.timeline.play.value?[0]:[]);H=function(c,d){var g;d=b.timeline.play[d];f("font-awesome")?(d=d.awesome,g="FontAwesome"):(d=d.fallback,g="inherit");return c.style("font-family",g).text(d)};d=function(c){var d;d=X/2+b.ui.padding+1;return c.attr("fill",u(b.ui.color.primary.value)).attr("stroke","none").attr(N).attr("x",J-(X-1)/2-b.ui.padding).attr("y",d).attr("dy",
"0.5ex").call(H,l?"pause":"icon")};G.enter().append("text").attr("class","d3plus_timeline_playIcon").call(d).style("pointer-events","none").attr("opacity",0);G.call(d).transition().duration(b.draw.timing).attr("opacity",1);G.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();I=function(){if(B-C===aa.length-ea)return E.on(h.hover,null).on(h.click,null).transition().duration(b.draw.timing).attr("opacity",.3),G.transition().duration(b.draw.timing).attr("opacity",.3);E.on(h.over,function(){return d3.select(this).style("cursor",
"pointer")}).on(h.out,function(){return d3.select(this).style("cursor","auto")}).on(h.click,function(){if(l)return K();G.call(H,"pause");B===aa.length?(B-=C,C=0):(C++,B++);L();return l=setInterval(function(){if(B===aa.length-ea)return K();C++;B++;return L()},b.timeline.play.timing.value)}).transition().duration(b.draw.timing).attr("opacity",1);return G.transition().duration(b.draw.timing).attr("opacity",1)};I();P=function(c){var d;d=ea?c<=v[1]:c<v[1];c>=v[0]&&d?(d=1,c=u(b.ui.color.secondary.value)):
(d=.5,c=u(b.ui.color.primary.value));ea&&b.background.value&&"none"!==b.background.value&&(c=d3.rgb(u(b.background.value)));c=d3.rgb(c);return"rgba("+c.r+","+c.g+","+c.b+","+d+")"};d=b.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]);d.enter().append("rect").attr("class","d3plus_timeline_background").attr("shape-rendering","crispEdges").attr("width",A+2).attr("height",X+2).attr("fill",b.ui.color.primary.value).attr("x",J-1).attr("y",b.ui.padding);d.transition().duration(b.draw.timing).attr("width",
A+2).attr("height",X+2).attr("fill",b.ui.color.primary.value).attr("x",J-1).attr("y",b.ui.padding);W=b.g.timeline.selectAll("g#ticks").data(["ticks"]);W.enter().append("g").attr("id","ticks").attr("transform","translate("+b.width.value/2+","+b.ui.padding+")");d=b.g.timeline.selectAll("g#brush").data(["brush"]);d.enter().append("g").attr("id","brush");D=b.g.timeline.selectAll("g#labels").data(["labels"]);D.enter().append("g").attr("id","labels");M=D.selectAll("text").data(aa,function(b,c){return c});
M.enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0);R=d3.time.scale().domain(d3.extent(ca)).rangeRound([0,A]);M.order().attr(N).text(function(b,c){return 0<=da.indexOf(+b)?V(b):""}).attr("opacity",function(c,d){return 0<=b.data.time.dataSteps.indexOf(d)?1:.4}).attr("fill",P).attr("transform",function(c,d){var f,g;f=J+R(c);ea||(f+=z/2);g=X/2+b.ui.padding+1;ea&&(g+=X/2+Y);return"translate("+Math.round(f)+","+Math.round(g)+")"});M.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove();w=d3.svg.brush().x(R).extent(v).on("brush",y).on("brushend",c);S=b.axes.discrete&&b[b.axes.discrete].value===b.time.value?b[b.axes.discrete].ticks.color:b.x.ticks.color;W.attr("transform","translate("+J+","+(b.ui.padding+1)+")").transition().duration(b.draw.timing).call(d3.svg.axis().scale(R).orient("top").ticks(function(){return ca}).tickFormat("").tickSize(-X).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(c){return 0<=
da.indexOf(+c)?S:k(S,b.background.value,.4,1)});W.selectAll("path").attr("fill","none");d.attr("transform","translate("+J+","+(b.ui.padding+1)+")").attr("opacity",1).call(w);M.attr("pointer-events","none");d.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",X).attr("shape-rendering","crispEdges").on(h.move,function(){var c;c=b.timeline.hover.value;0<=["grab","grabbing"].indexOf(c)&&(c=m()+c);return d3.select(this).style("cursor",c)});d.selectAll("rect.extent").attr("opacity",
.75).attr("height",X).attr("fill",b.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(h.move,function(){var c;c=b.timeline.hover.value;0<=["grab","grabbing"].indexOf(c)&&(c=m()+c);return d3.select(this).style("cursor",c)});b.timeline.handles.value?(A=d.selectAll("g.resize").selectAll("rect.d3plus_handle").data(["d3plus_handle"]),A.enter().insert("rect","rect").attr("class","d3plus_handle"),A.attr("fill",b.timeline.handles.color).attr("transform",function(c){return"translate("+("resize e"===
this.parentNode.className.baseVal?-b.timeline.handles.size:0)+",0)"}).attr("width",b.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",b.timeline.handles.opacity),d.selectAll("g.resize").selectAll("rect").attr("height",X)):d.selectAll("g.resize").remove();A=b.g.timeline.node().getBBox();0===b.margin.bottom&&(b.margin.bottom+=b.ui.padding);b.margin.bottom+=A.height+A.y;b.g.timeline.transition().duration(b.draw.timing).attr("transform","translate(0,"+
Math.round(b.height.value-b.margin.bottom-b.ui.padding/2)+")");b.margin.bottom+=b.ui.padding;if(b.dev.value)return t.time("drawing timeline")}else return b.g.timeline.transition().duration(b.draw.timing).attr("transform","translate(0,"+b.height.value+")")}},{"../../../client/css.coffee":36,"../../../client/pointer.coffee":38,"../../../client/prefix.coffee":39,"../../../color/mix.coffee":46,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/data/time.coffee":62,
"../../../font/sizes.coffee":101,"../../../util/closest.coffee":205}],247:[function(b,c,d){var g=b("../../../client/pointer.coffee"),f=b("../../../core/fetch/value.coffee"),h=b("../../../core/console/print.coffee"),k=b("../../../client/rtl.coffee"),l=b("../../../textwrap/textwrap.coffee");c.exports=function(b){function c(d){d.attr("font-size",function(b){return b.style.font.size}).attr("fill",function(c){return c.link?b.links.font.color:c.style.font.color}).attr("font-family",function(c){return c.link?
b.links.font.family.value:c.style.font.family.value}).attr("font-weight",function(c){return c.link?b.links.font.weight:c.style.font.weight}).style("text-decoration",function(c){return c.link?b.links.font.decoration.value:c.style.font.decoration.value}).style("text-transform",function(c){return c.link?b.links.font.transform.value:c.style.font.transform.value})}function d(b){b=b.style.font.align;return"center"==b?"middle":"left"==b&&!k||"right"==b&&k?"start":"left"==b&&k||"right"==b&&!k?"end":b}var q=
b.size.value?b.size.value:"number"===b.color.type?b.color.value:!1;if(b.data.viz&&b.title.total.value&&!b.small)if(q){b.dev.value&&h.time("calculating total value");var n=b.data.pool;b.focus.value.length&&(n=b.data.viz.filter(function(c){return c[b.id.value]==b.focus.value[0]}));var r=b.aggs.value[q]||"sum";r.constructor===Function?n=r(n):(n=n.reduce(function(c,d){var g=f(b,d,q);g instanceof Array?c=c.concat(g):c.push(g);return c},[]),n=d3[r](n));if(0===n||null===n||void 0===n)n=!1;if("number"===
typeof n){r="";if(b.data.mute.length||b.data.solo.length||b.focus.value.length){var p=d3.sum(b.data.value,function(c){if(0<b.time.solo.value.length?0<=b.time.solo.value.indexOf(f(b,c,b.time.value)):0<b.time.mute.value.length?0>b.time.solo.value.indexOf(f(b,c,b.time.value)):1)return f(b,c,q)});p>n&&(r=n/p*100,p=b.format.value(p,{key:b.size.value,vars:b}),r=" ("+b.format.value(r,{key:"share",vars:b})+" of "+p+")")}n=b.format.value(n,{key:b.size.value,vars:b});p=b.title.total.value;n=(p.prefix||b.format.value(b.format.locale.value.ui.total)+
": ")+n;p.suffix?n+=p.suffix:null;n+=r}b.dev.value&&h.timeEnd("calculating total value")}else n=!1;else n=!1;r=[];b.footer.value&&r.push({link:b.footer.link,style:b.footer,type:"footer",value:b.footer.value});b.small||(b.title.value&&(p=b.title.value,"function"===typeof p&&(p=p(b.self)),r.push({link:b.title.link,style:b.title,type:"title",value:p})),b.title.sub.value&&(p=b.title.sub.value,"function"===typeof p&&(p=p(b.self)),r.push({link:b.title.sub.link,style:b.title.sub,type:"sub",value:p})),b.title.total.value&&
n&&r.push({link:b.title.total.link,style:b.title.total,type:"total",value:n}));b.dev.value&&h.time("drawing titles");var n=b.svg.selectAll("g.d3plus_title").data(r,function(b){return b.type}),w=b.title.width||b.width.value-b.margin.left-b.margin.right;n.enter().append("g").attr("class",function(b){return"d3plus_title "+b.type}).attr("opacity",0).append("text").attr("stroke","none").call(c);n.each(function(f){var g=d3.select(this).select("text").call(c),h=d(f);l().align(h).container(g).height(b.height.value/
8).size(!1).text(f.value).width(w).draw();f.y=b.margin[f.style.position];b.margin[f.style.position]+=this.getBBox().height+2*f.style.padding}).on(g.over,function(c){c.link&&d3.select(this).transition().duration(b.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",b.links.hover.color).attr("font-family",b.links.hover.family.value).attr("font-weight",b.links.hover.weight).style("text-decoration",b.links.hover.decoration.value).style("text-transform",b.links.hover.transform.value)}).on(g.out,
function(d){d.link&&d3.select(this).transition().duration(b.timing.mouseevents).style("cursor","auto").select("text").call(c)}).on(g.click,function(b){if(b.link){var c="/"!=b.link.charAt(0)?"_blank":"_self";window.open(b.link,c)}}).attr("opacity",1).attr("transform",function(c){var f=c.style.position,g="top"==f?0+c.y:b.height.value-c.y,g="bottom"==f?g-(this.getBBox().height+c.style.padding):g+c.style.padding;c=d(c);"start"===c?c=b.margin.left+b.title.padding:(d3.select(this).select("text").node().getBBox(),
c="middle"===c?b.width.value/2-w/2:b.width.value-w-b.margin.right-b.title.padding);return"translate("+c+","+g+")"});n.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();0<b.margin.top&&(b.margin.top+=b.title.padding);0<b.margin.bottom&&(b.margin.bottom+=b.title.padding);(n=b.title.height)&&b.margin[b.title.position]<n&&(b.margin[b.title.position]=n);b.dev.value&&h.timeEnd("drawing titles")}},{"../../../client/pointer.coffee":38,"../../../client/rtl.coffee":40,"../../../core/console/print.coffee":52,
"../../../core/fetch/value.coffee":67,"../../../textwrap/textwrap.coffee":199}],248:[function(b,c,d){var g,f;g=b("./labels.coffee");f=b("./transform.coffee");c.exports=function(b,c,d){var m,t,u;c||(c=b.zoom.bounds);"number"!==typeof d&&(d=b.timing.transitions);b.zoom.size={height:c[1][1]-c[0][1],width:c[1][0]-c[0][0]};u=b.types[b.type.value];m=b.coords.fit.value;m="auto"===m||0>u.requirements.indexOf("coords")?d3.max([b.zoom.size.width/b.width.viz,b.zoom.size.height/b.height.viz]):b.zoom.size[m]/
b["app_"+m];t=d3.min([b.width.viz,b.height.viz]);u=(t-(u.zoom?2*b.coords.padding:0))/t/m;m=b.zoom.behavior.scaleExtent();m[0]!==m[1]&&c!==b.zoom.bounds||b.zoom.behavior.scaleExtent([u,16*u]);m=b.zoom.behavior.scaleExtent()[1];u>m&&(u=m);b.zoom.scale=u;c=[b.width.viz/2-b.zoom.size.width*u/2-c[0][0]*u,b.height.viz/2-b.zoom.size.height*u/2-c[0][1]*u];b.zoom.translate=c;b.zoom.behavior.translate(c).scale(u);b.zoom.size={height:b.zoom.bounds[1][1]-b.zoom.bounds[0][1],width:b.zoom.bounds[1][0]-b.zoom.bounds[0][0]};
b.zoom.reset=!1;(b.labels.value||b.labels.changed)&&g(b);return f(b,d)}},{"./labels.coffee":250,"./transform.coffee":253}],249:[function(b,c,d){c.exports=function(b,c){var d,k,l;k=c.id.nesting.length-1;d=c.depth.value;l=c.id.nesting[d+1];return!1===c.types[c.type.value].nesting?0:(b.d3plus.merged||l in b&&d<k)&&(!b||l in b)?1:!(d===k&&0<d||b&&l&&!(l in b))||!c.small&&c.tooltip.html.value?0:-1}},{}],250:[function(b,c,d){var g;g=b("../../../core/console/print.coffee");c.exports=function(b){var c,d;
b.dev.value&&g.time("determining label visibility");d=b.zoom.behavior.scaleExtent();c=function(c){return c.attr("opacity",function(c){var g;c||(c={});g=parseFloat(d3.select(this).attr("font-size"),10);c.visible=2<=b.zoom.scale/d[1]*g;return c.visible?1:0})};b.draw.timing?b.g.viz.selectAll("text.d3plus_label").transition().duration(b.draw.timing).call(c):b.g.viz.selectAll("text.d3plus_label").call(c);if(b.dev.value)return g.timeEnd("determining label visibility")}},{"../../../core/console/print.coffee":52}],
251:[function(b,c,d){var g,f,h;g=b("./labels.coffee");f=b("../../../tooltip/remove.coffee");h=b("./transform.coffee");c.exports=function(b){var c,d,t,u,q,n,r,p;d=d3.event.sourceEvent?d3.event.sourceEvent.type:null;u=d3.event.translate;t=d3.event.scale;c=b.zoom.bounds;q=(b.width.viz-b.zoom.size.width*t)/2;n=0<q?q:0;q=0<q?b.width.viz-q:b.width.viz;r=(b.height.viz-b.zoom.size.height*t)/2;p=0<r?r:0;r=0<r?b.height.viz-r:b.height.viz;u[0]+c[0][0]*t>n?u[0]=-c[0][0]*t+n:u[0]+c[1][0]*t<q&&(u[0]=q-c[1][0]*
t);u[1]+c[0][1]*t>p?u[1]=-c[0][1]*t+p:u[1]+c[1][1]*t<r&&(u[1]=r-c[1][1]*t);b.zoom.behavior.translate(u).scale(t);b.zoom.translate=u;b.zoom.scale=t;"wheel"===d&&f(b.type.value);if(b.labels.value||b.labels.changed)"wheel"===d?(c=b.draw.timing?100:250,clearTimeout(b.zoom.wheel),b.zoom.wheel=setTimeout(function(){return g(b)},c)):g(b);return"dblclick"===d?h(b,b.timing.transitions):h(b,0)}},{"../../../tooltip/remove.coffee":202,"./labels.coffee":250,"./transform.coffee":253}],252:[function(b,c,d){c.exports=
function(b,c){var d,k;d=b.zoom;c||(c=d3.event);k=d.scale>d.behavior.scaleExtent()[0];d=b.types[b.type.value].zoom&&d.value&&d.scroll.value;c.touches&&1<c.touches.length&&d||k||c.stopPropagation()}},{}],253:[function(b,c,d){c.exports=function(b,c){var d;"number"!==typeof c&&(c=b.timing.transitions);d="translate("+b.zoom.translate+")";d+="scale("+b.zoom.scale+")";return c?b.g.viz.transition().duration(c).attr("transform",d):b.g.viz.attr("transform",d)}},{}],254:[function(b,c,d){b=b("../../core/methods/filter.coffee");
c.exports={accepted:[!1,Function,Object,String],deprecates:"active_var",mute:b(!0),solo:b(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],255:[function(b,c,d){c.exports={accepted:[Object],deprecated:"nesting_aggs",objectAccess:!1,value:{}}},{}],256:[function(b,c,d){b=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml",
"html","csv","dsv","tsv","txt"],value:!1},keys:{},process:b,value:!1}},{"../../core/methods/process/data.coffee":86}],257:[function(b,c,d){b=b("../../core/methods/rendering.coffee");c.exports={background:{color:"#fafafa",rendering:b(),stroke:{color:"#ccc",width:1}},mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1},ticks:{accepted:[Boolean],value:!0}}},{"../../core/methods/rendering.coffee":91}],258:[function(b,c,d){c.exports={accepted:[String],value:"#ffffff"}},{}],259:[function(b,
c,d){c.exports={accepted:[Function,String],value:!1}},{}],260:[function(b,c,d){var g;d=b("../../core/methods/filter.coffee");g=b("../../color/scale.coffee");c.exports={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",focus:"#444444",heatmap:"#282F6B #419391 #AFD5E8 #EACE3F #B35C1E #B22200".split(" "),missing:"#eeeeee",mute:d(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3plus","category10","category20","category20b","category20c"],process:function(b){return b instanceof
Array?d3.scale.ordinal().range(b):"d3plus"===b?g:"string"===typeof b?d3.scale[b]():b},value:"d3plus"},solo:d(!0),secondary:"#e5b3bb",value:!1}},{"../../color/scale.coffee":48,"../../core/methods/filter.coffee":80}],261:[function(b,c,d){c.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(b,c){"string"===typeof b&&(b=[b]);return b},value:!1}},{}],262:[function(b,c,d){arguments[4][107][0].apply(d,arguments)},{dup:107}],263:[function(b,c,d){var g;g=b("../../util/d3selection.coffee");
c.exports={accepted:[!1,Array,Object,String],id:"default",process:function(b,c){if(!1===b)return!1;"default"===c.container.id&&c.self.container({id:"d3plus_"+ +new Date});return g(b)?b.append("div"):b instanceof Array?d3.select(b[0][0]).append("div"):d3.select(b).append("div")},value:!1}},{"../../util/d3selection.coffee":207}],264:[function(b,c,d){d=b("../../core/methods/filter.coffee");b=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],
filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:d(!1),padding:20,process:b,projection:{accepted:["albers","albersUsa","azimuthalEqualArea","azimuthalEquidistant","conicConformal","conicEqualArea","conicEquidistant","equirectangular","gnomonic","mercator","orthographic","stereographic","transverseMercator",Function],value:"mercator"},simplify:{accepted:[Boolean],value:!0},solo:d(!1),threshold:{accepted:[Number],value:.9},value:!1}},{"../../core/methods/filter.coffee":80,
"../../core/methods/process/data.coffee":86}],265:[function(b,c,d){var g,f,h;g=b("../../core/fetch/value.coffee");f=b("../../client/ie.js");h=b("../../string/strip.js");c.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(b,c){var d,t,u,q,n,r,p,w,v,y,A,x,z,D;if(void 0===c.returned)return[];b=b||c.cols.value;b instanceof Array?u=b:"string"===typeof b&&(u=[b]);q=[];n=[];c.title.value?(D=c.title.value,"function"===typeof D&&(D=D(c.self)),D=h(D),D=D.substr(0,250)):D="D3plus Visualization Data";
if(!0===b)for(u=d3.keys(c.data.keys),q.push(u),A=c.data.value,p=0,v=A.length;p<v;p++){n=A[p];d=[];w=0;for(y=u.length;w<y;w++)t=u[w],r=n[t],"string"===c.data.keys[t]&&(r='"'+r+'"'),d.push(r);q.push(d)}else{u||(u=[c.id.value],c.time.value&&u.push(c.time.value),c.size.value&&u.push(c.size.value),c.text.value&&u.push(c.text.value));d=0;for(r=u.length;d<r;d++)t=u[d],n.push(c.format.value(t));q.push(n);w=c.returned.nodes;p=0;for(n=w.length;p<n;p++)if(v=w[p],null!=v.values&&v.values instanceof Array)for(z=
v.values,A=0,v=z.length;A<v;A++){r=z[A];d=[];x=0;for(y=u.length;x<y;x++)t=u[x],r=g(c,r,t),"string"===typeof r&&(r='"'+r+'"'),d.push(r);q.push(d)}else{d=[];y=0;for(r=u.length;y<r;y++)t=u[y],d.push(g(c,v,t));q.push(d)}}d="data:text/csv;charset=utf-8,";r=p=0;for(n=q.length;p<n;r=++p)t=q[r],t=t.join(","),d+=r<q.length?t+"\n":t;f?(d=new Blob([d],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(d,D+".csv")):(d=encodeURI(d),r=document.createElement("a"),r.setAttribute("href",d),r.setAttribute("download",
D+".csv"),r.click());this.data=q;return u},value:void 0}},{"../../client/ie.js":37,"../../core/fetch/value.coffee":67,"../../string/strip.js":174}],266:[function(b,c,d){var g;g=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(b,
c){return g(b,c,this)},solo:[],stroke:{width:1},value:!1}},{"../../core/methods/process/data.coffee":86}],267:[function(b,c,d){c.exports={accepted:[Function,Number],value:0}},{}],268:[function(b,c,d){c.exports={accepted:[!1,Function,Object],value:!1}},{}],269:[function(b,c,d){arguments[4][111][0].apply(d,arguments)},{dup:111}],270:[function(b,c,d){var g=b("../../core/console/print.coffee"),f=b("../../string/format.js");c.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(b,c){if(!1===
this.initialized)return this.initialized=!0,b;void 0===b&&"function"===typeof this.value&&(b=this.value);if(!1===c.container.value){var d=c.format.locale.value.dev.setContainer;g.warning(d,"container")}else c.container.value.empty()?(d=c.format.locale.value.dev.noContainer,g.warning(f(d,'"'+c.container.value+'"'),"container")):(c.dev.value&&g.time("total draw time"),c.container.value.call(c.self));if("function"===typeof b&&c.history.chain.length){var m={};changes.forEach(function(b){var c=b.method;
delete b.method;m[c]=b});b(m);c.history.chain=[]}return b},update:!0,value:void 0}},{"../../core/console/print.coffee":52,"../../string/format.js":172}],271:[function(b,c,d){b=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(b,c,d){var k=this;if(!k.value)return[];c||(c="id");var l=k.restricted||k.value,m=[];if(!b)return l;
l=l.filter(function(l){var u=!1;l[k.source][c]==b?(u=!0,d&&m.push(l[k.target])):l[k.target][c]==b&&(u=!0,d&&m.push(l[k.source]));return u});return d?m:l},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],
value:d3.scale.linear()},value:1},process:b,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.coffee":86}],272:[function(b,c,d){c.exports={accepted:[Boolean,String],value:!1}},{}],273:[function(b,c,d){c.exports={accepted:[!1,Array,Function,Number,String],deprecates:"highlight",process:function(b){return!1===b?[]:b instanceof Array?b:[b]},tooltip:{accepted:[Boolean],
value:!0},value:[]}},{}],274:[function(b,c,d){var g,f;d=b("../../core/methods/font/align.coffee");g=b("../../core/methods/font/decoration.coffee");f=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={align:d(),color:"#444444",decoration:g(),family:f(),secondary:{align:d(),color:"#444444",decoration:g(),family:f(),size:12,spacing:0,transform:b(),weight:200},size:12,spacing:0,transform:b(),weight:200}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,
"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],275:[function(b,c,d){var g;g=b("../../core/methods/font/family.coffee");d=b("../../core/methods/font/decoration.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:d(),family:g(),size:11,transform:b(),weight:200},link:!1,padding:0,position:"bottom",value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,
"../../core/methods/font/transform.coffee":85}],276:[function(b,c,d){var g,f,h,k;g=b("../../number/format.coffee");f=b("../../core/locale/locale.coffee");h=b("../../object/merge.coffee");k=b("../../string/title.coffee");c.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(f)},process:function(b){var c;c=f.en_US;"en_US"!==b&&(c=h(c,f[b]));this.language=b;return c},value:"en_US"},
number:{accepted:[!1,Function],value:!1},process:function(b,c){if("string"===typeof b)c.self.format({locale:b});else if("function"===typeof b)return b;return this.value},text:{accepted:[!1,Function],value:!1},value:function(b,c){var d,f;c||(c={});c.locale||(c.locale=this.locale.value);f=c.vars||{};return f.time&&f.time.value&&c.key===f.time.value?(d=b.constructor===Date?b:new Date(b),f.data.time.format(d)):"number"===typeof b?(d=this.number.value||g,d(b,c)):"string"===typeof b?(d=this.text.value||
k,d(b,c)):JSON.stringify(b)}}},{"../../core/locale/locale.coffee":78,"../../number/format.coffee":169,"../../object/merge.coffee":170,"../../string/title.coffee":175}],277:[function(b,c,d){c.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}},{}],278:[function(b,c,d){var g,f,h,k,l,m,t,u;g=b("../../../core/methods/font/align.coffee");f=b("../../../core/methods/font/decoration.coffee");h=b("../../../core/methods/font/family.coffee");k=b("../../../core/methods/filter.coffee");m=b("../../../core/methods/font/position.coffee");
t=b("../../../core/methods/rendering.coffee");u=b("../../../core/methods/font/transform.coffee");l={x:"bottom",x2:"top",y:"left",y2:"right"};c.exports=function(b){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:f(!1),family:h(""),size:!1,spacing:0,transform:u(!1),weight:!1},rendering:t(),value:!0},dataFilter:!0,deprecates:[b+"axis",b+"axis_val",
b+"axis_var"],domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:t(),value:!0},label:{accepted:[Boolean,String],fetch:function(c){return!0===this.value?c.format.value(c[b].value,{key:b,vars:c}):this.value},font:{color:"#444",decoration:f(),family:h(),size:12,spacing:0,transform:u(),weight:200},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(b){b instanceof Array&&(b=b.filter(function(b){return!isNaN(b)}),
b=b.length?b.join(", "):"none");return b},value:"10, 10"},color:"#888",font:{align:g("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:f(),family:h(),padding:{accepted:[Number],value:10},position:m("middle"),size:12,transform:u(),weight:200},process:Array,rendering:t(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(b){b instanceof Array&&(b=b.filter(function(b){return!isNaN(b)}),b=b.length?b.join(", "):"none");return b},value:"none"},
rendering:t(),width:2,value:!0},mute:k(!0),orient:{accepted:["top","right","bottom","left"],value:l[b]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],deprecates:["layout","unique_axis",b+"axis_scale"],process:function(c,d){var f,g,h,k;h=["log","discrete","share"];f=0;for(g=h.length;f<g;f++)k=h[f],k===c?d.axes[k]=b:d.axes[k]===b&&(d.axes[k]=
!1);"discrete"===c&&(d.axes.opposite=0===b.indexOf("x")?"y":"x");return c},value:"linear"},solo:k(!0),stacked:{accepted:[Boolean],process:function(c,d){c||d.axes.stacked!==b?c&&(d.axes.stacked=b):d.axes.stacked=!1;return c},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:f(),family:h(),size:10,spacing:0,transform:u(),weight:200},labels:{accepted:[Boolean,Array],value:!0},rendering:t(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{"../../../core/methods/filter.coffee":80,
"../../../core/methods/font/align.coffee":81,"../../../core/methods/font/decoration.coffee":82,"../../../core/methods/font/family.coffee":83,"../../../core/methods/font/position.coffee":84,"../../../core/methods/font/transform.coffee":85,"../../../core/methods/rendering.coffee":91}],279:[function(b,c,d){c.exports={accepted:[Boolean],back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var b;for(b=[];this.states.length;)b.push(this.states.pop()());return b},states:[],
value:!0}},{}],280:[function(b,c,d){b=b("../../core/methods/process/icon.coffee");c.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:b,rotate:0,value:"fa-angle-left"},deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:!1}},{"../../core/methods/process/icon.coffee":88}],281:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[Array,String],dataFilter:!0,deprecates:["id_var",
"nesting"],grouping:{accepted:[Boolean],value:!0},mute:b(!0),nesting:["id"],solo:b(!0),value:"id"}},{"../../core/methods/filter.coffee":80}],282:[function(b,c,d){var g;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={accepted:[Boolean],align:{accepted:"start middle end left center right".split(" "),process:function(b){var c;c=["left","center","right"].indexOf(b);0<=c&&(b=this.accepted[c]);return b},
value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:d(),family:g(),size:11,transform:b(),weight:200},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],283:[function(b,c,d){b=b("../../core/methods/font/family.coffee");
c.exports={accepted:[Boolean],align:"middle",filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:b(),size:[8,14],weight:200},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text"],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":83}],
284:[function(b,c,d){var g;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={font:{color:"#444444",decoration:d(),family:g(),transform:b(),weight:200},hover:{color:"#444444",decoration:d(),family:g(),transform:b(),weight:200}}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],285:[function(b,c,d){arguments[4][122][0].apply(d,
arguments)},{"../../core/methods/process/margin.coffee":89,dup:122}],286:[function(b,c,d){var g;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},branding:{accepted:[Boolean],image:{dark:"http://d3plus.org/assets/img/icon-transparent-invert.png",light:"http://d3plus.org/assets/img/icon-transparent.png"},value:!1},font:{color:"#444",
decoration:d(),family:g(),size:16,transform:b(),weight:200},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],287:[function(b,c,d){c.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}},
{}],288:[function(b,c,d){b=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:b,value:!1}},{"../../core/methods/process/data.coffee":86}],289:[function(b,c,d){c.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},deprecates:["sort"],sort:{accepted:["asc","desc"],
value:"desc"},value:!1}},{}],290:[function(b,c,d){c.exports={accepted:[Boolean],value:!1,timeout:400,process:function(b,c){var d,k;if(!b)return!1;d=null;k=function(){var b,d;b=c.container.value.node().parentNode.getBoundingClientRect();d=b.width;b=b.height;c.width.value=d;c.height.value=b;return c.self(c.container.value)};d3.select(window).on("resize."+c.container.id,function(b){return function(c){clearTimeout(d);return d=setTimeout(k,b.timeout)}}(this));return b}}},{}],291:[function(b,c,d){b=b("../../core/methods/rendering.coffee");
c.exports={accepted:function(b){b=b.types[b.type.value].shapes;!b||b instanceof Array||(b=[b]);return b.length?b:["square"]},interpolate:{accepted:"basis basis-open cardinal cardinal-open linear monotone step step-before step-after".split(" "),deprecates:"stack_type",value:"linear"},rendering:b(),value:!1}},{"../../core/methods/rendering.coffee":91}],292:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,deprecates:["value",
"value_var"],mute:b(!0),scale:{accepted:[Function],deprecates:"size_scale",max:{accepted:[Function,Number],value:function(b){return Math.floor(d3.max([d3.min([b.width.viz,b.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3},value:d3.scale.sqrt()},solo:b(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],293:[function(b,c,d){c.exports={value:!1}},{}],294:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,
Function,Object,String],deprecates:["else_var","else"],mute:b(!0),solo:b(!0),value:!1}},{"../../core/methods/filter.coffee":80}],295:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],nesting:!0,mute:b(!0),solo:b(!0),value:!1}},{"../../core/methods/filter.coffee":80}],296:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,
deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},format:{accepted:[!1,Array,Function,String],value:!1},mute:b(!1),solo:b(!1),value:!1}},{"../../core/methods/filter.coffee":80}],297:[function(b,c,d){c.exports={accepted:[Boolean],align:"middle",hover:{accepted:"all-scroll col-resize crosshair default grab grabbing move pointer".split(" "),value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,
Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"\uf04b",fallback:"\u25ba"},pause:{accepted:[!1,String],awesome:"\uf04c",fallback:"\u275a\u275a"},timing:{accepted:[Number],value:1500},value:!0},value:!0}},{}],298:[function(b,c,d){c.exports={mouseevents:60,transitions:600,ui:200}},{}],299:[function(b,c,d){var g,f,h;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");h=b("../../core/methods/font/transform.coffee");f=b("../../string/strip.js");
c.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:d(),family:g(),size:16,transform:h(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(b,c){var d;0===c.container.id.indexOf("default")&&b&&(d=f(b).toLowerCase(),c.self.container({id:d}));return b},sub:{accepted:[!1,Function,String],deprecates:"sub_title",font:{align:"center",color:"#444444",decoration:d(),family:g(),size:12,transform:h(),weight:200},link:!1,padding:1,position:"top",value:!1},
total:{accepted:[Boolean,Object],deprecates:"total_bar",font:{align:"center",color:"#444444",decoration:d(),family:g(),size:12,transform:h(),weight:200,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../string/strip.js":174}],300:[function(b,c,d){d=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");
c.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},deprecates:"tooltip_info",extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:d(),size:12,transform:b(),weight:200},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],deprecates:"click_function",value:!1},iqr:{accepted:[Boolean],value:!0},
large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],301:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,Function,Object,String],deprecates:["total_var"],mute:b(!0),solo:b(!0),value:!1}},{"../../core/methods/filter.coffee":80}],302:[function(b,
c,d){c.exports={accepted:function(b){return d3.keys(b.types)},mode:{accepted:function(b){return b.types[b.type.value].modes||[!1]},value:!1},value:"tree_map"}},{}],303:[function(b,c,d){var g,f;f=b("../../core/methods/font/family.coffee");d=b("../../core/methods/font/align.coffee");g=b("../../core/methods/font/decoration.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={accepted:[Array,Boolean],align:d("center"),border:1,color:{primary:{process:function(b,c){var d;d=this.value;c.ui.color.secondary.value||
(c.ui.color.secondary.value=d3.rgb(d).darker(.75).toString());return b},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:g(),family:f(),size:11,transform:b(),weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],
304:[function(b,c,d){c.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}},{}],305:[function(b,c,d){c.exports={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},value:!0}},{}],306:[function(b,c,d){var g,f,h,k,l,m;b("../../util/closest.coffee");g=b("../../core/fetch/value.coffee");f=b("./helpers/graph/draw.coffee");h=b("./helpers/graph/nest.coffee");
k=b("../../array/sort.coffee");l=b("./helpers/graph/stack.coffee");m=b("../../core/data/threshold.js");b=function(b){var c,d,h,m,p,w,v,y,A,x;f(b,{buffer:b.axes.opposite,zero:!0});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];d=k(b.data.viz,null,null,null,b);h=b[b.axes.discrete];y=b[b.axes.opposite];m=0;for(w=d.length;m<w;m++)for(A=d[m],A.d3plus||(A.d3plus={}),x=A.values,p=0,v=x.length;p<v;p++)c=x[p],c.d3plus||(c.d3plus={}),c.d3plus.x=h.scale.viz(g(b,c,h.value)),c.d3plus.x+=
b.axes.margin.left,c.d3plus.y=y.scale.viz(g(b,c,y.value)),c.d3plus.y+=b.axes.margin.top,c.d3plus.merged instanceof Array&&(A.d3plus.merged||(A.d3plus.merged=[]),A.d3plus.merged=A.d3plus.merged.concat(c.d3plus.merged)),c.d3plus.text&&!A.d3plus.text&&(A.d3plus.text=c.d3plus.text);return l(b,d)};b.filter=function(b,c){return h(b,m(b,c,b[b.axes.discrete].value))};b.requirements=["data","x","y"];b.setup=function(b){var c,d;b.axes.discrete||(c=b.time.value===b.y.value?"y":"x",b.self[c]({scale:"discrete"}));
if(!b[b.axes.discrete].zerofill.value)b.self[b.axes.discrete]({zerofill:!0});if(!b[b.axes.opposite].stacked.value&&"stacked"===b.type.value)b.self[b.axes.opposite]({stacked:!0});d=b[b.axes.opposite];c=b.size;if(!d.value&&c.value||c.changed&&c.previous===d.value)return b.self[b.axes.opposite](c.value);if(!c.value&&d.value||d.changed&&d.previous===c.value)return b.self.size(d.value)};b.shapes=["area"];b.threshold=function(b){return 20/b.height.viz};b.tooltip="static";c.exports=b},{"../../array/sort.coffee":34,
"../../core/data/threshold.js":61,"../../core/fetch/value.coffee":67,"../../util/closest.coffee":205,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],307:[function(b,c,d){var g,f,h,k,l,m,t=[].indexOf||function(b){for(var c=0,d=this.length;c<d;c++)if(c in this&&this[c]===b)return c;return-1};g=b("../../util/buckets.coffee");f=b("../../core/fetch/value.coffee");h=b("./helpers/graph/draw.coffee");k=b("./helpers/graph/nest.coffee");l=b("./helpers/graph/stack.coffee");
m=b("../../util/uniques.coffee");b=function(b){var c,d,k,p,w,v,y,A,x,z,D,B,C,E,G,H,I,L,J,K,M,P,N,S,U,W,V,X;v=b.axes.discrete;x="x"===v?"height":"width";W="x"===v?"width":"height";P=b.axes.opposite;k="x"===v?"left":"top";M="x"===v?"top":"left";h(b,{buffer:!0,zero:P});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];J=b.data.viz;if(b.axes.stacked)for(D=0,E=J.length;D<E;D++)N=J[D],l(b,N.values);N=b.axes[W]/b[b.axes.discrete].ticks.values.length;E=b[b.axes.discrete].padding.value;
1>E&&(E*=N);2*E>N&&(E=.1*N);D=N-2*E;b.axes.stacked||(b[v].persist.position.value?(A=(w=b[v].value,0<=t.call(b.id.nesting,w))?d3.max(J,function(b){return b.values.length}):m(J,b.id.value,f,b).length,D/=A,p=N/2-D/2-E,V=d3.scale.ordinal(),1===A?V.domain([0]).range([0]):V.domain([0,A-1]).range([-p,p])):V=d3.scale.linear());w=[];X=0;b[v].persist.position.value&&!b.axes.stacked&&(c=m(d3.merge(J.map(function(b){return b.values})),b.id.value,f,b,b.id.value,!1),V.domain(c),1===c.length?V.range([0]):V.range(g(V.range(),
c.length)));L=d3.max(J,function(b){return b.values.length});B=0;for(G=J.length;B<G;B++)for(C=J[B],b.axes.stacked?(c=1,K=D):b[v].persist.position.value?(c=A,K=D):(c=C.values.length,b[v].persist.size.value?(K=D/L,p=N/2-K/2*(L-c)-K/2-E):(K=D/c,p=N/2-K/2-E),V.domain([0,c-1]),V.range([-p,p])),S=C.values,z=C=0,H=S.length;C<H;z=++C){p=S[z];I=b.axes.stacked?0:b[v].persist.position.value?V(f(b,p,b.id.value)):V(z%c);z=b[P];if(b.axes.stacked)U=p.d3plus[P],d=p.d3plus[P+"0"];else{d=f(b,p,z.value);null===d&&(z=
b[P+"2"],d=f(b,p,z.value));if(0===d)continue;"log"===z.scale.value&&(X=0>d?-1:1);U=z.scale.viz(d);d=z.scale.viz(X)}y=f(b,p,b[v].value);p.d3plus[v]=b[v].scale.viz(y);p.d3plus[v]+=b.axes.margin[k]+I;I=d-U;p.d3plus[P]=d-I/2;b.axes.stacked||(p.d3plus[P]+=b.axes.margin[M]);delete p.d3plus.r;p.d3plus[W]=K;p.d3plus[x]=Math.abs(I);p.d3plus.init={};p.d3plus.init[P]=z.scale.viz(X);p.d3plus.init[P]-=p.d3plus[P];p.d3plus.init[P]+=b.axes.margin[M];p.d3plus.init[W]=p.d3plus[W];b.text.value?delete p.d3plus.label:
p.d3plus.label=!1;w.push(p)}return w};b.filter=function(b,c){return k(b,c,b[b.axes.discrete].value)};b.requirements=["data","x","y"];b.setup=function(b){var c,d;b.axes.discrete||(c=b.time.value===b.y.value?"y":"x",b.self[c]({scale:"discrete"}));d=b[b.axes.opposite];c=b.size;if(!d.value&&c.value||c.changed&&c.previous===d.value)return b.self[b.axes.opposite](c.value);if(!c.value&&d.value||d.changed&&d.previous===c.value)return b.self.size(d.value)};b.shapes=["square"];c.exports=b},{"../../core/fetch/value.coffee":67,
"../../util/buckets.coffee":203,"../../util/uniques.coffee":209,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],308:[function(b,c,d){var g,f,h,k;g=b("../../core/fetch/value.coffee");f=b("./helpers/graph/draw.coffee");h=b("../../string/strip.js");k=b("../../util/uniques.coffee");b=function(b){var c,d,u,q,n,r,p,w,v,y,A,x,z;f(b,{buffer:!0});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];d=b.axes.discrete;v=b.axes.opposite;
c="x"===d?b.axes.margin.left:b.axes.margin.top;w="x"===v?b.axes.margin.left:b.axes.margin.top;u="x"===d?"height":"width";z="x"===d?"width":"height";x=b.axes[z]/b[d].ticks.values.length;A=b.size.value;x=d3.min([x-2*b.labels.padding,"number"===typeof A?A:100]);r=b.type.mode.value;r instanceof Array||(r=[r,r]);n=function(c){var d,f,h;f={};for(d in b.data.keys)h=k(c,d,g,b),f[d]=1===h.length?h[0]:h;return f};p=!1;q=[];y=[];d3.nest().key(function(c){return g(b,c,b[d].value)}).rollup(function(f){var A,C,
E,G,H,I,L,J,K,M,P,N,S,U,W,V,X;U=b[v].scale.viz;G=f.map(function(c){return g(b,c,b[v].value)});G.sort(function(b,c){return b-c});k(G);J=d3.quantile(G,.25);N=d3.quantile(G,.5);P=d3.quantile(G,.75);S={};"tukey"===r[1]?(W=P-1.5*(J-P),E="top tukey"):"extent"===r[1]?(W=d3.max(G),E="maximum"):"number"===typeof r[1]&&(W=d3.quantile(G,(100-r[1])/100),E=r[1]+" percentile");W=d3.min([d3.max(G),W]);b.tooltip.extent.value&&(S[E]={key:b[v].value,value:W});b.tooltip.iqr.value&&(S["third quartile"]={key:b[v].value,
value:P},S.median={key:b[v].value,value:N},S["first quartile"]={key:b[v].value,value:J});"tukey"===r[0]?(A=J+1.5*(J-P),C="bottom tukey"):"extent"===r[0]?(A=d3.min(G),C="minimum"):"number"===typeof r[0]&&(A=d3.quantile(G,r[0]/100),C=r[0]+" percentile");A=d3.max([d3.min(G),A]);b.tooltip.extent.value&&(S[C]={key:b[v].value,value:A});G=[];E=[];V=[];C=[];K=0;for(M=f.length;K<M;K++)H=f[K],X=g(b,H,b[v].value),X>=J&&X<=P?G.push(H):X>=A&&X<J?E.push(H):X<=W&&X>P?V.push(H):C.push(H);H=g(b,f[0],b[d].value);K=
b[d].scale.viz(H);K+=c;M=b.format.value(H,{key:b[d].value,vars:b});H.constructor===Date&&(H=H.getTime());H=h(H);G=n(G);G.d3plus={color:"white",id:"box_"+H,init:{},label:!1,shape:"square",stroke:"#444",text:"Interquartile Range for "+M};G.d3plus[z]=x;G.d3plus.init[z]=x;G.d3plus[u]=Math.abs(U(J)-U(P));G.d3plus[d]=K;X=d3.min([U(J),U(P)])+G.d3plus[u]/2;X+=w;G.d3plus[v]=X;G.d3plus.tooltip=S;y.push(G);S={d3plus:{id:"median_line_"+H,position:"height"===u?"top":"right",shape:"whisker","static":!0}};M={background:"#fff",
names:[b.format.value(N,{key:b[v].value,vars:b})],padding:0,resize:!1,x:0,y:0};I=Math.abs(U(N)-U(J));L=Math.abs(U(N)-U(P));L=2*d3.min([I,L]);I=2*b.data.stroke.width+2*b.labels.padding;M["width"===z?"w":"h"]=x-I;M["width"===u?"w":"h"]=L-I;S.d3plus.label=M;S.d3plus[z]=x;S.d3plus[d]=K;S.d3plus[v]=U(N)+w;y.push(S);E=n(E);E.d3plus={id:"bottom_whisker_line_"+H,offset:G.d3plus[u]/2,position:"height"===u?"bottom":"left",shape:"whisker","static":!0};"x"===v&&(E.d3plus.offset*=-1);E.d3plus[u]=Math.abs(U(A)-
U(J));E.d3plus[z]=x;E.d3plus[d]=K;E.d3plus[v]=X;y.push(E);V=n(V);V.d3plus={id:"top_whisker_line_"+H,offset:G.d3plus[u]/2,position:"height"===u?"top":"right",shape:"whisker","static":!0};"y"===v&&(V.d3plus.offset*=-1);V.d3plus[u]=Math.abs(U(W)-U(P));V.d3plus[z]=x;V.d3plus[d]=K;V.d3plus[v]=X;y.push(V);J=0;for(P=C.length;J<P;J++)H=C[J],H.d3plus[d]=K,H.d3plus[v]=U(g(b,H,b.y.value)),H.d3plus[v]+=w,H.d3plus.r=4,H.d3plus.shape=b.shape.value;p=!C.length&&0===W-A;q.push(N);y=y.concat(C);return f}).entries(b.data.viz);
return p&&1===k(q).length?[]:y};b.modes=["tukey","extent",Array,Number];b.requirements=["data","x","y"];b.shapes="circle check cross diamond square triangle triangle_up triangle_down".split(" ");b.setup=function(b){var c;if(!b.axes.discrete)return c=b.time.value===b.y.value?"y":"x",b.self[c]({scale:"discrete"})};c.exports=b},{"../../core/fetch/value.coffee":67,"../../string/strip.js":174,"../../util/uniques.coffee":209,"./helpers/graph/draw.coffee":313}],309:[function(b,c,d){var g,f,h,k,l,m;g=b("../../array/sort.coffee");
k=b("../../core/fetch/value.coffee");f=b("../../core/fetch/color.coffee");h=b("../../core/fetch/text.js");m=b("../../color/legible.coffee");l=b("../../core/data/group.coffee");b=function(b){var c,d,n,r,p,w,v,y,A,x,z,D,B,C,E,G,H,I,L,J;y=l(b,b.data.viz);y=g(y,null,null,null,b);w=y.length;4>w?(n=w,v=1):(v=b.width.viz/b.height.viz,n=Math.ceil(Math.sqrt(w*v)),v=Math.ceil(Math.sqrt(w/v)));if(0<w)for(;(v-1)*n>=w;)v--;d=b.width.viz/n;c=b.height.viz/v;b.size.value?(v=d3.min(b.data.viz,function(c){return k(b,
c,b.size.value,b.id.value,"min")}),w=d3.max(b.data.viz,function(c){return k(b,c,b.size.value,b.id.value)}),p=[v,w]):p=[0,0];v=d3.min([d,c])/2-10;w=b.labels.value&&!b.small&&40<=v?d3.max([20,d3.min([.25*v,50])]):0;v-=w;C=d3.min([v,b.size.scale.min.value]);G=b.size.scale.value.domain(p).rangeRound([C,v]);C=d3.layout.pack().children(function(b){return b.values}).padding(5).radius(function(b){return G(b)}).size([d-10,c-10-w]).value(function(b){return b.value});p=[];A=x=E=0;for(z=y.length;x<z;A=++x){r=
y[A];I=C.nodes(r);L=d*A%b.width.viz;J=c*E;r=0;for(D=I.length;r<D;r++)H=I[r],H.children?(B={d3plus:{}},B[b.id.value]=H.key):B=H.d3plus,B.d3plus.depth=b.id.grouping.value?H.depth:b.depth.value,B.d3plus.x=H.x,B.d3plus.xOffset=L,B.d3plus.y=H.y,B.d3plus.yOffset=J+w,B.d3plus.r=H.r,p.push(B);0===(A+1)%n&&E++}n=v/d3.max(p,function(b){return b.d3plus.r});y=C.size()[0]/2;A=C.size()[1]/2;d=0;for(c=p.length;d<c;d++)r=p[d],r.d3plus.x=(r.d3plus.x-y)*n+y+r.d3plus.xOffset,r.d3plus.y=(r.d3plus.y-A)*n+A+r.d3plus.yOffset,
r.d3plus.r*=n,delete r.d3plus.xOffset,delete r.d3plus.yOffset,r.d3plus["static"]=r.d3plus.depth<b.depth.value&&b.id.grouping.value,!w||0!==r.d3plus.depth&&!1!==b.id.grouping.value?delete r.d3plus.label:(r.d3plus.text=h(b,r[b.id.value],r.d3plus.depth),C=w>3*b.labels.padding?b.labels.padding:0,r.d3plus.label={x:0,y:-(v+C+w/2),w:2*v,h:w-C,padding:0,resize:!0,color:m(f(b,r,r.d3plus.depth)),force:!0});return p.sort(function(b,c){return b.d3plus.depth-c.d3plus.depth})};b.fill=!0;b.requirements=["data"];
b.scale=1.05;b.shapes=["circle","donut"];c.exports=b},{"../../array/sort.coffee":34,"../../color/legible.coffee":44,"../../core/data/group.coffee":57,"../../core/fetch/color.coffee":63,"../../core/fetch/text.js":66,"../../core/fetch/value.coffee":67}],310:[function(b,c,d){var g;g=b("../../../core/console/print.coffee");b=function(b){var c;c={circle:"scatter",donut:"scatter",line:"line",square:"scatter",area:"stacked"}[b.shape.value];g.warning('The "chart" visualization type has been deprecated and will be removed in version 2.0. Please use the "'+
c+'" visualization type.');b.self.type(c).draw()};b.shapes=["circle","donut","line","square","area"];c.exports=b},{"../../../core/console/print.coffee":52}],311:[function(b,c,d){b=function(b){var c,d,k,l;c=b.coords.value;d=b.coords.key||d3.keys(c.objects)[0];c=topojson.feature(c,c.objects[d]).features;l=b.coords.solo.value;k=b.coords.mute.value;return c=c.filter(function(c){c[b.id.value]=c.id;return l.length?0<=l.indexOf(c.id):k.length?0>k.indexOf(c.id):!0})};b.libs=["topojson"];b.nesting=!1;b.requirements=
["coords"];b.scale=1;b.shapes=["coordinates"];b.zoom=!0;c.exports=b},{}],312:[function(b,c,d){var g,f,h;g=b("../../../../core/fetch/color.coffee");f=b("../../../../color/legible.coffee");h=b("../../../../core/console/print.coffee");c.exports=function(b){var c,d,t,u,q,n,r,p,w,v;c=b.axes;u=c.stacked||!c.ticks.value?[]:b.data.viz;v=2*u.length>b.data.large?0:b.draw.timing;p=function(d,h){0===h.indexOf("y")?d.attr("x1",-2).attr("x2",-8).attr("y1",function(b){return b.d3plus.y-c.margin.top}).attr("y2",
function(b){return b.d3plus.y-c.margin.top}):d.attr("x1",function(b){return b.d3plus.x-c.margin.left}).attr("x2",function(b){return b.d3plus.x-c.margin.left}).attr("y1",c.height+2).attr("y2",c.height+8);return d.style("stroke",function(c){return f(g(b,c))}).style("stroke-width",b.data.stroke.width).attr("shape-rendering",b.shape.rendering.value)};b.dev.value&&h.time("creating axis tick groups");w=b.group.select("g#d3plus_graph_plane").selectAll("g.d3plus_data_tick").data(u,function(d){return"tick_"+
d[b.id.value]+"_"+d.d3plus.depth+(c.discrete?"_"+d.d3plus[c.discrete]:"")});w.enter().append("g").attr("class","d3plus_data_tick").attr("opacity",0);b.dev.value&&h.timeEnd("creating axis tick groups");r=["x","y"];q=0;for(n=r.length;q<n;q++)d=r[q],b.dev.value&&v&&h.time("creating "+d+" ticks"),t=v&&d!==c.discrete?u:[],t=w.selectAll("line.d3plus_data_"+d).data(t,function(c){return"tick_"+c[b.id.value]+"_"+c.d3plus.depth}),b.dev.value&&v&&h.timeEnd("creating "+d+" ticks"),b.dev.value&&v&&h.time("styling "+
d+" ticks"),0<v?t.transition().duration(v).call(p,d):t.call(p,d),t.enter().append("line").attr("class","d3plus_data_"+d).call(p,d),b.dev.value&&v&&h.timeEnd("styling "+d+" ticks");0<v?(w.transition().duration(v).attr("opacity",1),w.exit().transition().duration(v).attr("opacity",0).remove()):(w.attr("opacity",1),w.exit().remove())}},{"../../../../color/legible.coffee":44,"../../../../core/console/print.coffee":52,"../../../../core/fetch/color.coffee":63}],313:[function(b,c,d){var g,f,h,k;g=b("./includes/axes.coffee");
f=b("./includes/svg.coffee");h=b("./includes/mouse.coffee");k=b("./includes/plot.coffee");c.exports=function(b,c){void 0===c&&(c={});g(b,c);k(b,c);f(b,c);b.mouse.viz=!0===c.mouse?h:!1}},{"./includes/axes.coffee":314,"./includes/mouse.coffee":316,"./includes/plot.coffee":317,"./includes/svg.coffee":318}],314:[function(b,c,d){var g,f,h,k,l,m,t,u,q,n,r,p;g=b("../../../../../array/sort.coffee");k=b("./buffer.coffee");h=b("../../../../../util/buckets.coffee");m=b("../../../../../core/fetch/data.js");t=
b("../../../../../core/fetch/value.coffee");n=b("../../../../../core/console/print.coffee");p=b("../../../../../util/uniques.coffee");c.exports=function(b,c){var d,g,h,m,D,B;if((h=l(b))||!b.axes.dataset)b.axes.dataset=u(b);b.axes.scale=c.buffer&&!0!==c.buffer?r(b,c.buffer):!1;d=b.width.viz>b.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"];m=0;for(D=d.length;m<D;m++)g=d[m],B=0===g.indexOf("x")?"y":"x",B=b.order.changed||b.order.sort.changed||!0===b.order.value&&b[B].changed,b[g].value&&(!b[g].ticks.values||
h||B)&&(b.dev.value&&n.time("calculating "+g+" axis"),b[g].reset=!0,b[g].ticks.values=!1,g===b.axes.discrete&&b[g].value!==b.time.value&&(b[g].ticks.values=p(b.axes.dataset,b[g].value,t,b)),B=!0===c.zero||0===g.indexOf(c.zero)?!0:!1,B=f(b,g,B),0===g.indexOf("y")&&(B=B.reverse()),b[g].scale.viz=q(b,g,B),b[g].domain.viz=B,b.dev.value&&n.timeEnd("calculating "+g+" axis"));b.axes.mirror.value&&(g=d3.extent(b.y.domain.viz.concat(b.x.domain.viz)),b.x.domain.viz=g,b.x.scale.viz.domain(g),g=g.slice().reverse(),
b.y.domain.viz=g,b.y.scale.viz.domain(g));if(c.buffer)for(h=0,m=d.length;h<m;h++)g=d[h],g!==b.axes.discrete&&k(b,g,c.buffer)};l=function(b){var c,d,f,g,h,k,l,m,n;(d=b.time.fixed.value&&(b.time.solo.changed||b.time.mute.changed))||(d=b.id.solo.changed||b.id.mute.changed);if(d)return d;c="data time id depth type x y x2 y2".split(" ");f=0;for(h=c.length;f<h;f++)if(g=c[f],b[g].changed){d=!0;break}if(d)return d;n="mute range scale solo stacked zerofill".split(" ");l=["x","y","x2","y2"];f=0;for(h=l.length;f<
h;f++)for(c=l[f],g=0,k=n.length;g<k;g++)if(m=n[g],b[c][m].changed){d=!0;break}return d};u=function(b){var c,d;if(b.time.fixed.value)return b.data.viz;d=d3.range(0,b.id.nesting.length);return d3.merge([function(){var f,g,h;h=[];f=0;for(g=d.length;f<g;f++)c=d[f],h.push(m(b,"all",c));return h}()])};f=function(b,c,d,f){var h,k,l,m,n,r,q,u,I,L,J,K,M;I=0===c.indexOf("x")?"y":"x";if(b[c].range.value&&2===b[c].range.value.length)return b[c].range.value.slice();if("share"===b[c].scale.value)return b[c].ticks.values=
d3.range(0,1.1,.1),[0,1];if(b[c].stacked.value){r=[];h=b.axes.dataset;k=0;for(d=h.length;k<d;k++)f=h[k],f.values?r=r.concat(f.values):r.push(f);k=d3.nest().key(function(c){return t(b,c,b[I].value)}).rollup(function(d){var f;f=d3.sum(d,function(d){d=t(b,d,b[c].value);return 0<d?d:0});return[d3.sum(d,function(d){d=t(b,d,b[c].value);return 0>d?d:0}),f]}).entries(r);l=d3.merge(k.map(function(b){return b.values}));return d3.extent(l)}if(b[c].value===b.time.value)return b.time.solo.value.length?d3.extent(b.time.solo.value).map(function(b){return b.constructor!==
Date?(b+="",4===b.length&&parseInt(b)+""===b&&(b+="/01/01"),new Date(b)):b}):d3.extent(b.data.time.ticks);l=[];L=b.axes.dataset;h=0;for(r=L.length;h<r;h++)f=L[h],f=t(b,f,b[c].value),f instanceof Array?l=l.concat(f):l.push(f);l=l.filter(function(b){return null!==b});if(c===b.axes.discrete){if(L=!0===b.order.value?b[I].value:b.order.value){r=b.order.sort.value;d=b.order.agg.value||b.aggs.value[L]||"max";h=typeof d;l=l.reduce(function(b,c){b[c]=[];return b},{});J=b.axes.dataset;n=0;for(q=J.length;n<
q;n++)if(f=J[n],f.values)for(K=f.values,u=0,f=K.length;u<f;u++)M=K[u],m=t(b,M,b[c].value),l[m].push(t(b,M,L));else m=t(b,f,b[c].value),l[m].push(t(b,f,L));for(k in l)M=l[k],"string"===h?l[k]=d3[d](M):"function"===h&&(l[k]=d(M,L));l=g(d3.entries(l),"value",r);return l=l.reduce(function(b,c){b.push(c.key);return b},[])}return p(l).sort()}l.sort(function(b,c){return b-c});"log"===b[c].scale.value&&(0===l[0]&&(l[0]=1),0===l[l.length-1]&&(l[l.length-1]=-1));d&&(f=l.every(function(b){return 0<b}),k=l.every(function(b){return 0>
b}),(f||k)&&l.push("log"===b[c].scale.value?f?1:-1:0));return d3.extent(l)};q=function(b,c,d){var f,g,k,l;g=0===c.indexOf("x")?b.width.viz:b.height.viz;k=b[c].scale.value;0<=["discrete","share"].indexOf(k)&&(k="linear");l=10;"string"===typeof d[0]?(k="ordinal",f=h([0,g],d.length)):(f=[0,g],"linear"===b[c].scale.value&&(l=Math.floor(g/(4*b[c].ticks.font.size))));b[c].scale.ticks=l;return d3.scale[k]().domain(d).range(f)};r=function(b,c){var d,f,g;!0===c&&(c="size");c in b&&(c=b[c].value);g=b.size.scale.min.value;
"function"===typeof g&&(g=g(b));f=b.size.scale.max.value;"function"===typeof f&&(f=f(b));if(!1===c)return b.size.scale.value.rangeRound([f,f]);if("number"===typeof c)return b.size.scale.value.rangeRound([c,c]);if(c)return b.dev.value&&n.time("calculating buffer scale"),d=d3.extent(b.axes.dataset,function(d){return(d=t(b,d,c))?d:0}),d[0]===d[1]&&(g=f),b.dev.value&&n.timeEnd("calculating buffer scale"),b.size.scale.value.domain(d).rangeRound([g,f])}},{"../../../../../array/sort.coffee":34,"../../../../../core/console/print.coffee":52,
"../../../../../core/fetch/data.js":64,"../../../../../core/fetch/value.coffee":67,"../../../../../util/buckets.coffee":203,"../../../../../util/uniques.coffee":209,"./buffer.coffee":315}],315:[function(b,c,d){var g,f;g=b("../../../../../util/buckets.coffee");f=b("../../../../../util/closest.coffee");c.exports=function(b,c,d){var m,t,u,q,n;if("share"!==b[c].scale.value&&!b[c].range.value&&b[c].reset){if(c===b.axes.discrete){q=b[c].scale.viz.domain();if("string"===typeof q[0]){for(m=q.length;0<=m;)q.splice(m,
0,"d3plus_buffer_"+m),m--;d=b[c].scale.viz.range();d=g(d3.extent(d),q.length);return b[c].scale.viz.domain(q).range(d)}0===c.indexOf("y")&&(q=q.slice().reverse());if(1===b[c].ticks.values.length)b[c].value===b.time.value&&1!==b.data.time.ticks.length?(d=f(b.data.time.ticks,q[0]),m=b.data.time.ticks.indexOf(d),0<m?q[0]=b.data.time.ticks[m-1]:(u=b.data.time.ticks[m+1]-d,q[0]=new Date(d.getTime()-u)),m<b.data.time.ticks.length-1?q[1]=b.data.time.ticks[m+1]:(u=d-b.data.time.ticks[m-1],q[1]=new Date(d.getTime()+
u))):(--q[0],q[1]+=1);else if(b.axes.scale)d=Math.abs(q[1]-q[0]),m=d/(b[c].ticks.values.length-1),m/=2,t=b[c].scale.viz.range()[1],u=1.5*b.axes.scale.range()[1],d=b[c].scale.viz.invert(-u),u=b[c].scale.viz.invert(t+u),q[0]-m<d?(q[0]-=m,q[1]+=m):(q=[d,u],0===c.indexOf("y")&&(q=q.reverse()),d=b[c].scale.viz.domain(),d=d[1]-d[0],d||(--q[0],q[1]+=1));else if(b[c].value===b.time.value)d=Math.abs(q[1]-q[0]),m=d/(b[c].ticks.values.length-1),m/=2,q[0]-=m,q[1]+=m;else{d=Math.abs(q[1]-q[0]);d/=2;m=q.length;
for(t=q.slice();0<=m;)u=m?t[m-1]+d:t[m]-d,q.splice(m,0,u),m--;d=b[c].scale.viz.range();d=g(d3.extent(d),q.length);b[c].scale.viz.domain(q).range(d)}0===c.indexOf("y")&&(q=q.reverse());return b[c].scale.viz.domain(q)}if("x"===d&&0===c.indexOf("x")||"y"===d&&0===c.indexOf("y")||!0===d){q=b[c].scale.viz.domain();d=0<=q[0]&&0<=q[1];t=0>=q[0]&&0>=q[1];if("log"===b[c].scale.value)u=d?1:-1,d&&0===c.indexOf("y")&&(q=q.slice().reverse()),n=Math.pow(10,parseInt(Math.abs(q[0])).toString().length-1)*u,(m=t=q[0]%
n)&&.1>=m/n&&(m+=n*u),q[0]-=0===t?n:m,0===q[0]&&(q[0]=u),n=Math.pow(10,parseInt(Math.abs(q[1])).toString().length-1)*u,t=q[1]%n,m=Math.abs(n-t),t&&.1>=m/n&&(m+=n*u),q[1]+=0===t?n:m,0===q[1]&&(q[1]=u),d&&0===c.indexOf("y")&&(q=q.reverse());else{u=0;0===c.indexOf("y")&&(q=q.slice().reverse());n=q.filter(function(b){return b.constructor===String});m=.05*Math.abs(q[1]-q[0])||1;if(!n.length){q[0]-=m;q[1]+=m;if(d&&q[0]<u||t&&q[0]>u)q[0]=u;if(d&&q[1]<u||t&&q[1]>u)q[1]=u}0===c.indexOf("y")&&(q=q.reverse())}return b[c].scale.viz.domain(q)}if(b.axes.scale)return d=
!1,b.axes.mirror.value&&(q=0===c.indexOf("y")?"x":"y",d=b[q].scale.viz,q=b.width.viz>b.height.viz?"x":"y"),c===q&&d?q=d.domain().slice().reverse():(t=b[c].scale.viz.range()[1],u=b.axes.scale.range()[1],d=b[c].scale.viz.invert(1.5*-u),u=b[c].scale.viz.invert(t+1.5*u),q=[d,u],0===c.indexOf("y")&&(q=q.reverse()),d=b[c].scale.viz.domain(),d=d[1]-d[0],d||(--q[0],q[1]+=1),0===c.indexOf("y")&&(q=q.reverse())),b[c].scale.viz.domain(q)}}},{"../../../../../util/buckets.coffee":203,"../../../../../util/closest.coffee":205}],
316:[function(b,c,d){var g,f,h,k,l;b("../../../../../util/copy.coffee");g=b("../../../../../client/pointer.coffee");f=b("../../../../../core/fetch/color.coffee");h=b("../../../../../core/fetch/value.coffee");k=b("../../../../../color/legible.coffee");l=b("../../../../../color/text.coffee");c.exports=function(b,c){var d,q,n,r,p,w,v,y,A,x,z;d=d3.event.type===g.click&&(c.tooltip.value["long"]||c.tooltip.html.value);n=0<=[g.over,g.move].indexOf(d3.event.type);x=b.d3plus.x;z=b.d3plus.y;y=b.d3plus.r||0;
y*=c.types[c.type.value].scale||1;r=c.axes;A=c.draw.timing?c.timing.mouseevents:0;!d&&n?(q=k(f(c,b)),d=["x","y","x2","y2"].filter(function(d){var f;return(f=h(c,b,c[d].value))&&!(f instanceof Array)&&d!==c.axes.stacked&&c[d].mouse.value&&d!==c.axes.discrete})):d=[];n=function(b){return b.attr("x1",function(b){return 0===b.indexOf("x")?x:x-y}).attr("y1",function(b){return 0===b.indexOf("y")?z:z+y}).attr("x2",function(b){return 0===b.indexOf("x")?x:x-y}).attr("y2",function(b){return 0===b.indexOf("y")?
z:z+y}).attr("opacity",0)};p=function(b){return b.style("stroke",function(b){return"area"===c.shape.value?"white":q}).attr("stroke-dasharray",function(b){return c[b].mouse.dasharray.value}).attr("shape-rendering",function(b){return c[b].mouse.rendering.value}).style("stroke-width",function(b){return c[b].mouse.width})};w=function(d){return d.attr("x1",function(b){return 0===b.indexOf("x")?x:x-y}).attr("y1",function(b){return 0===b.indexOf("y")?z:z+y}).attr("x2",function(d){return 0===d.indexOf("x")?
x:b.d3plus.x0?b.d3plus.x0:"y"===d?r.margin.left-c[d].ticks.size:r.margin.left+r.width+c[d].ticks.size}).attr("y2",function(d){return 0===d.indexOf("y")?z:b.d3plus.y0?b.d3plus.y0:"x"===d?r.height+r.margin.top+c[d].ticks.size:r.margin.top-c[d].ticks.size}).style("opacity",1)};v=c.g.labels.selectAll("line.d3plus_mouse_axis_label").data(d);A?(v.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(n).call(p),v.transition().duration(A).call(w).call(p),v.exit().transition().duration(A).call(n).remove()):
(v.call(w).call(p),v.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(n).call(p),v.exit().remove());n=function(d){return d.attr("font-size",function(b){return c[b].ticks.font.size+"px"}).attr("font-family",function(b){return c[b].ticks.font.family.value}).attr("font-weight",function(b){return c[b].ticks.font.weight}).attr("x",function(b){return 0===b.indexOf("x")?x:"y"===b?r.margin.left-5-c[b].ticks.size:r.margin.left+r.width+5+c[b].ticks.size}).attr("y",
function(d){return 0===d.indexOf("y")?z:b.d3plus.y0?b.d3plus.y+(b.d3plus.y0-b.d3plus.y)/2+r.margin.top-6:"x"===d?r.height+r.margin.top+5+c[d].ticks.size:r.margin.top-5-c[d].ticks.size-1.35*c[d].ticks.font.size}).attr("fill","area"===c.shape.value?"white":l(q))};p=c.g.labels.selectAll("text.d3plus_mouse_axis_label").data(d);p.enter().append("text").attr("class","d3plus_mouse_axis_label").attr("id",function(b){return b+"_d3plusmouseaxislabel"}).attr("dy",function(b){return 0===b.indexOf("y")?.35*c[b].ticks.font.size:
c[b].ticks.font.size}).style("text-anchor",function(b){return"y"===b?"end":"y2"===b?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(n);p.text(function(d){var f;d=c.axes.stacked||d;f=h(c,b,c[d].value);return c.format.value(f,{key:c[d].value,vars:c,labels:c[d].affixes.value})});A?(p.transition().duration(A).delay(A).attr("opacity",1).call(n),p.exit().transition().duration(A).attr("opacity",0).remove()):(p.attr("opacity",1).call(n),p.exit().remove());n=function(d){var f;f=function(b){b=
d3.select("text#"+b+"_d3plusmouseaxislabel");return b.size()?b.node().getBBox():{width:0,height:0}};return d.attr("x",function(b){var d;d=f(b).width;return 0===b.indexOf("x")?x-d/2-5:"y"===b?r.margin.left-c[b].ticks.size-d-10:r.margin.left+r.width+c[b].ticks.size}).attr("y",function(d){var g;g=f(d).height;return 0===d.indexOf("y")?z-(g/2+5):b.d3plus.y0?b.d3plus.y+(b.d3plus.y0-b.d3plus.y)/2+r.margin.top-(g/2+5):"x"===d?r.height+r.margin.top+c[d].ticks.size:r.margin.top-c[d].ticks.size-g-10}).attr("width",
function(b){return f(b).width+10}).attr("height",function(b){return f(b).height+10}).style("stroke","area"===c.shape.value?"transparent":q).attr("fill",q).attr("shape-rendering",function(b){return c[b].mouse.rendering.value}).style("stroke-width",function(b){return c[b].mouse.width})};d=c.g.labels.selectAll("rect.d3plus_mouse_axis_label").data(d);if(A)return d.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").attr("opacity",
0).call(n),d.transition().duration(A).delay(A).attr("opacity",1).call(n),d.exit().transition().duration(A).attr("opacity",0).remove();d.attr("opacity",1).call(n);d.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(n);return d.exit().remove()}},{"../../../../../client/pointer.coffee":38,"../../../../../color/legible.coffee":44,"../../../../../color/text.coffee":50,"../../../../../core/fetch/color.coffee":63,"../../../../../core/fetch/value.coffee":67,
"../../../../../util/copy.coffee":206}],317:[function(b,c,d){var g,f,h,k,l,m,t,u,q,n;g=b("../../../../../util/buckets.coffee");f=b("./buffer.coffee");k=b("../../../../../core/fetch/value.coffee");l=b("../../../../../font/sizes.coffee");q=b("../../../../../textwrap/textwrap.coffee");n=b("../../../../../core/data/time.coffee");b("../../../../../util/uniques.coffee");c.exports=function(b,c){var d,g,l,m,q,z,D,B,C,E;b.axes.margin=u(b);b.axes.height=b.height.viz;b.axes.width=b.width.viz;d=b.width.viz>b.height.viz?
["y","y2","x","x2"]:["x","x2","y","y2"];q=0;for(z=d.length;q<z;q++)if(g=d[q],b[g].value){if(!1===b[g].ticks.values)if(b[g].value===b.time.value){l=b.time.solo.value;l=l.length?l.map(function(b){b.constructor!==Date&&(b+="",4===b.length&&parseInt(b)+""===b&&(b+="/01/01"),b=new Date(b));return b}):b.data.time.values;m=d3.extent(l);E=b.data.time.stepType;l=[m[0]];for(D=m[0];D<m[1];)D=new Date(D),D=new Date(D["set"+E](D["get"+E]()+1)),l.push(D);b[g].ticks.values=l}else 1===g.indexOf("2")?(B=b[g.slice(0,
1)].scale.viz,C=b[g].scale.viz,l=b[g.slice(0,1)].scale.ticks,b[g].ticks.values=B.ticks(l).map(function(b){return parseFloat(d3.format(".5f")(C.invert(B(b))))})):b[g].ticks.values=b[g].scale.viz.ticks(b[g].scale.ticks);b[g].ticks.values.length||(l=k(b,b.data.viz,b[g].value),l instanceof Array||(l=[l]),b[g].ticks.values=l);l=0===g.indexOf("x")?"y":"x";(1===b[g].ticks.values.length||c.buffer&&c.buffer!==l&&g===b.axes.discrete&&!0===b[g].reset)&&f(b,g,c.buffer);b[g].reset=!1;b[g].value===b.time.value?
(l={"font-family":b[g].ticks.font.family.value,"font-weight":b[g].ticks.font.weight,"font-size":b[g].ticks.font.size+"px","text-transform":b[g].ticks.font.transform.value,"letter-spacing":b[g].ticks.font.spacing+"px"},l=n(b,{values:b[g].ticks.values,limit:b.width.viz,style:l}),b[g].ticks.visible=b[g].ticks.value?b[g].ticks.value.map(Number):b[g].ticks.labels.value.constructor===Array?b[g].ticks.labels.value.map(Number):l.values.map(Number),b[g].ticks.format=l.format):b[g].ticks.value?(b[g].ticks.values=
b[g].ticks.value,b[g].ticks.visible=b[g].ticks.labels.value.constructor===Array?b[g].ticks.labels.value:b[g].ticks.value):b[g].ticks.labels.value.constructor===Array?b[g].ticks.visible=b[g].ticks.labels.value:"log"===b[g].scale.value?(l=b[g].ticks.values,m=l.filter(function(b){return"1"===Math.abs(b).toString().charAt(0)}),b[g].ticks.visible=3>m.length?l:m):b[g].ticks.visible=b[g].ticks.values}b.small||t(b);q=0;for(z=d.length;q<z;q++)g=d[q],b[g].axis.svg=h(b,g)};u=function(b){return b.small?{top:0,
right:0,bottom:0,left:0}:{top:10,right:10,bottom:10,left:10}};t=function(b){var c,d,f,h,k,n,t,u,B,C,E,G,H,I,L,J;C=b.x.scale.viz.domain();J=b.y.scale.viz.domain();b.x2.value&&(u=b.x2.scale.viz.domain());b.y2.value&&(L=b.y2.scale.viz.domain());n=["y","y2"];d=0;for(h=n.length;d<h;d++)c=n[d],b[c].value&&(k="y"===c?"left":"right",t={"font-size":b[c].ticks.font.size+"px","font-family":b[c].ticks.font.family.value,"font-weight":b[c].ticks.font.weight,"text-transform":b[c].ticks.font.transform.value,"letter-spacing":b[c].ticks.font.spacing+
"px"},f=b[c].ticks.visible,"log"===b[c].scale.value?f=f.map(function(b){return m(b)}):"share"===b[c].scale.value?f=f.map(function(d){return b.format.value(100*d,{key:"share",vars:b,output:c})}):b[c].value===b.time.value?f=f.map(function(d,f){return b[c].ticks.format(new Date(d))}):("string"===typeof f[0]&&(f=b[c].scale.viz.domain().filter(function(b){return 0!==b.indexOf("d3plus_buffer_")})),f=f.map(function(d){return b.format.value(d,{key:b[c].value,vars:b,labels:b[c].affixes.value,output:c})})),
b[c].ticks.labels.value?(b[c].ticks.hidden=!1,t=d3.max(l(f,t),function(b){return b.width}),t=Math.ceil(t+b.labels.padding),b.axes.margin[k]+=t):b[c].ticks.hidden=!0,(t=b[c].label.fetch(b))?(f={"font-family":b[c].label.font.family.value,"font-weight":b[c].label.font.weight,"font-size":b[c].label.font.size+"px","text-transform":b[c].label.font.transform.value,"letter-spacing":b[c].label.font.spacing+"px"},b[c].label.height=l([t],f)[0].height):b[c].label.height=0,b[c].label.value&&(b.axes.margin[k]+=
b[c].label.height,b.axes.margin[k]+=2*b[c].label.padding));b.axes.width-=b.axes.margin.left+b.axes.margin.right;b.x.scale.viz.range(g([0,b.axes.width],C.length));u&&b.x2.scale.viz.range(g([0,b.axes.width],u.length));n=["x","x2"];d=0;for(h=n.length;d<h;d++)c=n[d],b[c].value&&(k="x"===c?"bottom":"top",b[c].ticks.labels.value?(b[c].ticks.hidden=!1,f={"font-size":b[c].ticks.font.size+"px","font-family":b[c].ticks.font.family.value,"font-weight":b[c].ticks.font.weight,"text-transform":b[c].ticks.font.transform.value,
"letter-spacing":b[c].ticks.font.spacing+"px"},I=b[c].ticks.visible,"log"===b[c].scale.value?H=I.map(function(b){return m(b)}):"share"===b[c].scale.value?H=I.map(function(d){return b.format.value(100*d,{key:"share",vars:b,output:c})}):b[c].value===b.time.value?H=I.map(function(d,f){return b[c].ticks.format(new Date(d))}):("string"===typeof I[0]&&(I=b[c].scale.viz.domain().filter(function(b){return 0!==b.indexOf("d3plus_buffer_")})),H=I.map(function(d){return b.format.value(d,{key:b[c].value,vars:b,
labels:b[c].affixes.value,output:c})})),G=l(H,f),t=d3.max(G,function(b){return b.width}),B=d3.max(G,function(b){return b.height}),1===I.length?E=b.axes.width:(E=b[c].scale.viz(I[1])-b[c].scale.viz(I[0]),E=Math.abs(E)),t>E&&0<H.join("").indexOf(" ")?(b[c].ticks.wrap=!0,G=l(H,f,{mod:function(c){return q().container(d3.select(c)).height(b.axes.height/2).width(E).draw()}}),t=d3.max(G,function(b){return b.width}),B=d3.max(G,function(b){return b.height})):b[c].ticks.wrap=!1,b[c].ticks.baseline="auto",t<=
E?b[c].ticks.rotate=0:t<b.axes.height/2?(G=l(H,f,{mod:function(c){return q().container(d3.select(c)).width(b.axes.height/2).height(E).draw()}}),B=d3.max(G,function(b){return b.width}),t=d3.max(G,function(b){return b.height}),b[c].ticks.rotate=-90):B=t=0,t&&B||(b[c].ticks.hidden=!0,b[c].ticks.rotate=0),t=Math.ceil(t),B=Math.ceil(B),b[c].ticks.maxHeight=B,b[c].ticks.maxWidth=t,b.axes.margin[k]+=B+b.labels.padding,f=b[c].ticks.visible[b[c].ticks.visible.length-1],f=b[c].scale.viz(f),f+=t/2+b.axes.margin.left,
f>b.width.value&&(t=f-b.width.value+b.axes.margin.right,b.axes.width-=t,b.axes.margin.right+=t)):b[c].ticks.hidden=!0,(t=b[c].label.fetch(b))?(f={"font-family":b[c].label.font.family.value,"font-weight":b[c].label.font.weight,"font-size":b[c].label.font.size+"px","text-transform":b[c].label.font.transform.value,"letter-spacing":b[c].label.font.spacing+"px"},b[c].label.height=l([t],f)[0].height):b[c].label.height=0,b[c].label.value&&(b.axes.margin[k]+=b[c].label.height,b.axes.margin[k]+=2*b[c].label.padding));
b.axes.height-=b.axes.margin.top+b.axes.margin.bottom;b.x.scale.viz.range(g([0,b.axes.width],C.length));u&&b.x2.scale.viz.range(g([0,b.axes.width],u.length));b.y.scale.viz.range(g([0,b.axes.height],J.length));if(L)return b.y2.scale.viz.range(g([0,b.axes.height],L.length))};h=function(b,c){return d3.svg.axis().tickSize(b[c].ticks.size).tickPadding(5).orient(b[c].orient.value).scale(b[c].scale.viz).tickValues(b[c].ticks.values).tickFormat(function(d,f){var g;if(b[c].ticks.hidden)return null;g=b[c].scale.value;
return 0<=b[c].ticks.visible.indexOf(d.constructor===Date?+d:d)?"share"===g?b.format.value(100*d,{key:"share",vars:b,labels:b[c].affixes.value,output:c}):d.constructor===Date?b[c].ticks.format(d):"log"===g?m(d):b.format.value(d,{key:b[c].value,vars:b,labels:b[c].affixes.value,output:c}):null})};m=function(b){var c,d;c=Math.round(Math.log(Math.abs(b))/Math.LN10);d=Math.abs(b).toString().charAt(0);c="10 "+(c+"").split("").map(function(b){return"\u2070\u00b9\u00b2\u00b3\u2074\u2075\u2076\u2077\u2078\u2079"[b]}).join("");
"1"!==d&&(c=d+" x "+c);return 0>b?"-"+c:c}},{"../../../../../core/data/time.coffee":62,"../../../../../core/fetch/value.coffee":67,"../../../../../font/sizes.coffee":101,"../../../../../textwrap/textwrap.coffee":199,"../../../../../util/buckets.coffee":203,"../../../../../util/uniques.coffee":209,"./buffer.coffee":315}],318:[function(b,c,d){var g,f,h;g=b("../../../../../color/mix.coffee");f=b("../../../../../textwrap/textwrap.coffee");h=b("../../../../../object/validate.coffee");c.exports=function(b){var c,
d,t,u,q,n,r,p,w,v,y,A,x,z,D,B,C,E,G,H,I,L,J;if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return null;p={width:b.axes.width,height:b.axes.height,fill:b.axes.background.color,stroke:b.axes.background.stroke.color,"stroke-width":b.axes.background.stroke.width,"shape-rendering":b.axes.background.rendering.value};d={left:"start",center:"middle",right:"end"};u=b.small?[]:[0];n=function(c,d){return c.attr("x1",function(c){return 0===d.indexOf("x")?b.x.scale.viz(c):0}).attr("x2",function(c){return 0===
d.indexOf("x")?b.x.scale.viz(c):b.axes.width}).attr("y1",function(c){return 0===d.indexOf("y")?b.y.scale.viz(c):0}).attr("y2",function(c){return 0===d.indexOf("y")?b.y.scale.viz(c):b.axes.height})};x=function(c,d,f){var h,l;h=f?b[d].grid.color:b[d].ticks.color;l="log"===b[d].scale.value;return c.attr("stroke",function(c){if(0===c)return b[d].axis.color;c.constructor===Date&&(c=+c);return 0<=b[d].ticks.visible.indexOf(c)&&(!l||"1"===Math.abs(c).toString().charAt(0))?h:f&&"transparent"!==b.axes.background.color?
g(h,b.axes.background.color,.4,1):"transparent"!==b.background.value?g(h,b.background.value,.4,1):g(h,"white",.4,1)}).attr("stroke-width",b[d].ticks.width).attr("shape-rendering",b[d].ticks.rendering.value)};v=function(c,d,f){return(d=b[c][0===d?"axis":"ticks"].font[f])&&(d.length||"number"===typeof d)?d:b[c].ticks.font[f]};L=function(c,d){var f;f="log"===b[d].scale.value;return c.attr("font-size",function(b){return v(d,b,"size")+"px"}).attr("stroke","none").attr("fill",function(c){var h;h=v(d,c,
"color");return f&&"1"!==Math.abs(c).toString().charAt(0)?g(h,b.background.value,.4,1):h}).attr("font-family",function(b){return v(d,b,"family").value}).attr("font-weight",function(b){return v(d,b,"weight")}).style("text-transform",function(b){return v(d,b,"transform").value}).style("letter-spacing",function(b){return v(d,b,"spacing")+"px"})};C=function(c,d){var f,g;f=0===d.indexOf("x")?"height":"width";g=0===d.indexOf("x")?"y":"x";return c.attr(g+"1",0).attr(g+"2",b.axes[f]).attr(d+"1",function(b){return b.coords.line}).attr(d+
"2",function(b){return b.coords.line}).attr("stroke",function(c){return c.color||b[d].lines.color}).attr("stroke-width",b[d].lines.width).attr("shape-rendering",b[d].lines.rendering.value).attr("stroke-dasharray",b[d].lines.dasharray.value)};B=function(c,f){var g;g=0===f.indexOf("x")?"y":"x";return c.attr(g,function(b){return b.coords.text[g]+"px"}).attr(f,function(b){return b.coords.text[f]+"px"}).attr("dy",b[f].lines.font.position.value).attr("text-anchor",d[b[f].lines.font.align.value]).attr("transform",
function(b){return b.transform}).attr("font-size",b[f].lines.font.size+"px").attr("fill",function(c){return c.color||b[f].lines.color}).attr("font-family",b[f].lines.font.family.value).attr("font-weight",b[f].lines.font.weight)};r="translate("+b.axes.margin.left+","+b.axes.margin.top+")";E=b.group.selectAll("g#d3plus_graph_plane").data([0]);E.transition().duration(b.draw.timing).attr("transform",r);E.enter().append("g").attr("id","d3plus_graph_plane").attr("transform",r);r=E.selectAll("rect#d3plus_graph_background").data([0]);
r.transition().duration(b.draw.timing).attr(p);r.enter().append("rect").attr("id","d3plus_graph_background").attr("x",0).attr("y",0).attr(p);r=E.selectAll("path#d3plus_graph_mirror").data([0]);r.enter().append("path").attr("id","d3plus_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0);r.transition().duration(b.draw.timing).attr("opacity",function(){return b.axes.mirror.value?1:0}).attr("d",function(){var b,
c;c=p.width;b=p.height;return"M "+c+" "+b+" L 0 "+b+" L "+c+" 0 Z"});I=0!==b.x.ticks.rotate;c=function(c,d){var g;g=c.attr("transform","translate(0,"+("x"===d?b.axes.height:0)+")").call(b[d].axis.svg.scale(b[d].scale.viz)).selectAll("g.tick");g.selectAll("line").attr("y2",function(c){var f;c.constructor===Date&&(c=+c);f=d3.select(this).attr("y2");return 0<=b[d].ticks.visible.indexOf(c)?f:f/2});return g.select("text").style("text-anchor",I&&"x"===d?"end":I?"start":"middle").call(L,d).each(function(c){d3.select(this).attr("dy",
"0px").attr("font-size",function(b){return v(d,b,"size")+"px"});c.constructor===Date&&(c=+c);if(!b[d].ticks.hidden&&0<=b[d].ticks.visible.indexOf(c))return f().container(d3.select(this)).rotate(b[d].ticks.rotate).align(I?"end":"center").valign(I?"middle":"x"===d?"top":"bottom").width(b[d].ticks.maxWidth).height(b[d].ticks.maxHeight).padding(0).x(-b[d].ticks.maxWidth/2).y("x2"===d?-(b[d].ticks.maxHeight+2*b.labels.padding):0).draw()})};z=function(c,d){var f;f=c.attr("transform","translate("+("y2"===
d?b.axes.width:0)+", 0)").call(b[d].axis.svg.scale(b[d].scale.viz)).selectAll("g.tick");f.selectAll("line").attr("y2",function(c){var d;c.constructor===Date&&(c=+c);d=d3.select(this).attr("y2");return 0<=b.x.ticks.visible.indexOf(c)?d:d/2});return f.select("text").call(L,d)};w=["x","x2","y","y2"];r=0;for(A=w.length;r<A;r++)t=w[r],y=0===t.indexOf("x")?c:z,q=u.length&&b[t].value?[0]:[],q=E.selectAll("g#d3plus_graph_"+t+"ticks").data(q),q.transition().duration(b.draw.timing).call(y,t),q.selectAll("line").transition().duration(b.draw.timing).call(x,
t),y=q.enter().append("g").attr("id","d3plus_graph_"+t+"ticks").call(y,t),y.selectAll("path").attr("fill","none").attr("stroke","none"),y.selectAll("line").call(x,t),q.exit().transition().duration(b.data.timing).attr("opacity",0).remove();r=function(c,d){return c.attr("x",0===d.indexOf("x")?b.width.viz/2:-(b.axes.height/2+b.axes.margin.top)).attr("y","x"===d?b.height.viz-b[d].label.height/2-b[d].label.padding:"y2"===d?b.width.viz-b[d].label.height/2-b[d].label.padding:b[d].label.height/2+b[d].label.padding).attr("transform",
0===d.indexOf("y")?"rotate(-90)":null).attr("font-family",b[d].label.font.family.value).attr("font-weight",b[d].label.font.weight).attr("font-size",b[d].label.font.size+"px").attr("fill",b[d].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",b[d].label.font.transform.value).style("letter-spacing",b[d].label.font.spacing+"px")};z=["x","y"];A=0;for(c=z.length;A<c;A++)t=z[A],b[t].grid.value?w=b[t].ticks.value?b[t].ticks.value:b[t].ticks.values:
(w=[],q="x"===t?"y":"x",0<=b[t].ticks.values.indexOf(0)&&b[q].axis.value&&(w=[0])),q=E.selectAll("g#d3plus_graph_"+t+"grid").data([0]),q.enter().append("g").attr("id","d3plus_graph_"+t+"grid"),w=q.selectAll("line").data(w,function(b,c){return b.constructor===Date?b.getTime():b}),w.transition().duration(b.draw.timing).call(n,t).call(x,t,!0),w.enter().append("line").style("opacity",0).call(n,t).call(x,t,!0).transition().duration(b.draw.timing).delay(b.draw.timing/2).style("opacity",1),w.exit().transition().duration(b.draw.timing/
2).style("opacity",0).remove();w=["x","x2","y","y2"];x=0;for(A=w.length;x<A;x++)t=w[x],b[t].value?(n=b[t].label.fetch(b),z=u&&n?[0]:[],c=b.format.affixes.value[b[t].value],n&&!b[t].affixes.value&&c&&(q=b[t].affixes.separator.value,!0===q?q=["[","]"]:!1===q&&(q=["",""]),n+=" "+q[0]+c[0]+" "+c[1]+q[1])):(n="",z=[]),c=b.group.selectAll("text#d3plus_graph_"+t+"label").data(z),c.text(n).transition().duration(b.draw.timing).call(r,t),c.enter().append("text").attr("stroke","none").attr("id","d3plus_graph_"+
t+"label").text(n).call(r,t),c.exit().transition().duration(b.data.timing).attr("opacity",0).remove();x=["x","y","x2","y2"];n=0;for(u=x.length;n<u;n++)if(t=x[n],b[t].value){r=E.selectAll("g#d3plus_graph_"+t+"_userlines").data([0]);r.enter().append("g").attr("id","d3plus_graph_"+t+"_userlines");c=b[t].scale.viz.domain();0===t.indexOf("y")&&(c=c.slice().reverse());A=[];q=[];J=b[t].lines.value||[];y=0;for(z=J.length;y<z;y++)if(D=J[y],w=h(D)?D.position:D,G=t===b.axes.discrete?0<=c.indexOf(w):w>=c[0]&&
w<=c[1])w=h(D)?D:{position:w},w.coords={line:b[t].scale.viz(w.position)},q.push(w),w.text&&(w.axis=t,w.padding=.5*b[t].lines.font.padding.value,w.align=b[t].lines.font.align.value,G=b[t].lines.font.position.text,D="middle"===G?0:2*w.padding,"top"===G&&(D=-D),0===t.indexOf("x")?(G="left"===w.align?b.axes.height:"center"===w.align?b.axes.height/2:0,"left"===w.align&&(G-=2*w.padding),"right"===w.align&&(G+=2*w.padding)):(G="left"===w.align?0:"center"===w.align?b.axes.width/2:b.axes.width,"right"===w.align&&
(G-=2*w.padding),"left"===w.align&&(G+=2*w.padding)),w.coords.text={},w.coords.text[0===t.indexOf("x")?"y":"x"]=G,w.coords.text[t]=b[t].scale.viz(w.position)+D,w.transform=0===t.indexOf("x")?"rotate(-90,"+w.coords.text.x+","+w.coords.text.y+")":null,A.push(w));w=r.selectAll("line.d3plus_graph_"+t+"line").data(q,function(b){return b.position});w.enter().append("line").attr("class","d3plus_graph_"+t+"line").attr("opacity",0).call(C,t);w.transition().duration(b.draw.timing).attr("opacity",1).call(C,
t);w.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();w=r.selectAll("text.d3plus_graph_"+t+"line_text").data(A,function(b){return b.position});w.enter().append("text").attr("class","d3plus_graph_"+t+"line_text").attr("id",function(b){b=b.position+"";b=b.replace("-","neg");b=b.replace(".","p");return"d3plus_graph_"+t+"line_text_"+b}).attr("opacity",0).call(B,t);w.text(function(b){return b.text}).transition().duration(b.draw.timing).attr("opacity",1).call(B,t);w.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove();H=function(c){var d;d=function(b){var c;c=b.position+"";c=c.replace("-","neg");c=c.replace(".","p");return E.select("text#d3plus_graph_"+b.axis+"line_text_"+c).node().getBBox()};return c.attr("x",function(b){return d(b).x-b.padding}).attr("y",function(b){return d(b).y-b.padding}).attr("transform",function(b){return b.transform}).attr("width",function(b){return d(b).width+2*b.padding}).attr("height",function(b){return d(b).height+2*b.padding}).attr("fill","transparent"!==b.axes.background.color?
b.axes.background.color:"white")};A=b[t].lines.font.background.value?A:[];r=r.selectAll("rect.d3plus_graph_"+t+"line_rect").data(A,function(b){return b.position});r.enter().insert("rect","text.d3plus_graph_"+t+"line_text").attr("class","d3plus_graph_"+t+"line_rect").attr("pointer-events","none").attr("opacity",0).call(H);r.transition().delay(b.draw.timing).each("end",function(c){return d3.select(this).transition().duration(b.draw.timing).attr("opacity",1).call(H)});r.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove()}}},{"../../../../../color/mix.coffee":46,"../../../../../object/validate.coffee":171,"../../../../../textwrap/textwrap.coffee":199}],319:[function(b,c,d){var g,f,h;g=b("../../../../core/fetch/value.coffee");f=b("../../../../string/strip.js");h=b("../../../../util/uniques.coffee");c.exports=function(b,c,d){var t,u,q,n,r,p,w;void 0===d?d=b.id.nesting.slice(0,b.depth.value+1):d.constructor!==Array&&(d=[d]);void 0===u&&(u=[]);c||(c=b.data.viz);t=b[b.axes.discrete];n=b[b.axes.opposite];(w=
t.value===b.time.value)?(p=b.data.time.ticks,q=b.time.solo.value.length?"solo":"mute",b.time[q].value.length&&(r=b.time[q].value.slice().map(function(b){b.constructor!==Date&&(b+="",4===b.length&&parseInt(b)+""===b&&(b+="/01/01"),b=new Date(b));return+b}),p=p.filter(function(b){return"solo"===q?0<=r.indexOf(+b):0>r.indexOf(+b)}))):p=t.ticks.values?t.ticks.values:h(c,t.value,g,b);return d3.nest().key(function(c){var h,l,n,p;p="nesting";l=0;for(n=d.length;l<n;l++)h=d[l],h=g(b,c,h),h instanceof Array&&
(h=h.join("_")),p+="_"+f(h);return p}).rollup(function(c){var d,f,l,m,r,u,C,E,G,H;d=h(c,t.value,g,b);d.length&&d[0].constructor===Date&&(d=d.map(Number));if(t.zerofill.value)for(f="log"===t.scale.value?n.scale.viz.domain().every(function(b){return 0>b})?-1:1:0,l=m=0,u=p.length;m<u;l=++m)if(H=p[l],r=w?+H:H,0>d.indexOf(r)){E={d3plus:{}};G=b.id.nesting;r=0;for(C=G.length;r<C;r++)q=G[r],q in c[0]&&(E[q]=c[0][q]);E[t.value]=H;E[n.value]=0;E[n.value]=f;c.splice(l,0,E)}return"string"===typeof c[0][t.value]?
c:c.sort(function(c,d){var f,h;f=g(b,c,t.value);h=g(b,d,t.value);if(f-=h)return f;f=g(b,c,n.value);h=g(b,d,n.value);return f-h})}).entries(c)}},{"../../../../core/fetch/value.coffee":67,"../../../../string/strip.js":174,"../../../../util/uniques.coffee":209}],320:[function(b,c,d){var g;g=b("../../../../core/fetch/value.coffee");c.exports=function(b,c){var d,l,m,t,u,q,n,r,p,w,v,y,A,x,z,D;x=b.axes.stacked||b.axes.opposite;l=b[x].scale.viz(0);y=b[x].scale.value;w="x"===x?"y":"x";n="y"===x?b.axes.margin.top:
b.axes.margin.left;d="share"===y?"expand":"zero";A=d3.layout.stack().values(function(b){return b.values||[b]}).offset(d).x(function(b){return b.d3plus[w]}).y(function(c){return l-b[x].scale.viz(g(b,c,b[x].value))}).out(function(c,d,h){g(b,c,b[x].value);"share"===y?(c.d3plus[x+"0"]=(1-d)*l,c.d3plus[x]=c.d3plus[x+"0"]-h*l):(c.d3plus[x+"0"]=l,b.axes.stacked&&(c.d3plus[x+"0"]-=d),c.d3plus[x]=c.d3plus[x+"0"]-h);c.d3plus[x]+=n;return c.d3plus[x+"0"]+=n});v=[];p=[];m=0;for(u=c.length;m<u;m++)if(d=c[m],D=
g(b,d,b[x].value),D instanceof Array){r=!0;t=0;for(q=D.length;t<q;t++)if(z=D[t],0<=z){r=!1;break}r?p.push(d):v.push(d)}else 0<=D&&v.push(d),0>D&&p.push(d);if(0===v.length||0===p.length)return A(c);v.length&&(v=A(v));p.length&&(p=A(p));return v.concat(p)}},{"../../../../core/fetch/value.coffee":67}],321:[function(b,c,d){var g,f,h,k,l;g=b("../../core/fetch/value.coffee");f=b("./helpers/graph/draw.coffee");h=b("./helpers/graph/nest.coffee");k=b("../../array/sort.coffee");l=b("./helpers/graph/stack.coffee");
b=function(b){var c,d,h,n,r,p,w,v;f(b,{buffer:b.axes.opposite,mouse:!0});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];d=k(b.data.viz,null,null,null,b);h=0;for(r=d.length;h<r;h++)for(c=d[h],w=c.values,n=0,p=w.length;n<p;n++)c=w[n],(v=g(b,c,b.x.value))?(c.d3plus.x2=!1,c.d3plus.x=b.x.scale.viz(v)):(c.d3plus.x2=!0,c.d3plus.x=b.x2.scale.viz(g(b,c,b.x2.value))),c.d3plus.x+=b.axes.margin.left,(v=g(b,c,b.y.value))?(c.d3plus.y2=!1,c.d3plus.y=b.y.scale.viz(v)):(c.d3plus.y2=!0,c.d3plus.y=
b.y2.scale.viz(g(b,c,b.y2.value))),c.d3plus.y+=b.axes.margin.top;return b.axes.stacked?l(b,d):d};b.filter=function(b,c){return h(b,c)};b.requirements=["data","x","y"];b.setup=function(b){var c;b.axes.discrete||(c=b.time.value===b.y.value?"y":"x",b.self[c]({scale:"discrete"}))};b.shapes=["line"];b.tooltip="static";c.exports=b},{"../../array/sort.coffee":34,"../../core/fetch/value.coffee":67,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],322:[function(b,
c,d){var g=b("../../network/smallestGap.coffee"),f=b("../../core/fetch/value.coffee");b=function(b){var c=b.nodes.restricted||b.nodes.value,d=b.edges.restricted||b.edges.value,m=d3.extent(c,function(b){return b.x}),t=d3.extent(c,function(b){return b.y}),u=[1,1];"number"===typeof b.size.value?u=[b.size.value,b.size.value]:b.size.value&&(u=d3.extent(c,function(c){c=f(b,c,b.size.value);return 0===c?null:c}));"undefined"==typeof u[0]&&(u=[1,1]);if("number"===typeof b.size.value)var q=b.size.value,n=b.size.value;
else{var q=g(c,{accessor:function(b){return[b.x,b.y]}}),r=q/2,q=q*(b.size.value?b.nodes.overlap:.4);b.edges.arrows.value&&(q*=.5);u[0]===u[1]?q=n=r:(n=m[1]+1.1*q-(m[0]-1.1*q),r=t[1]+1.1*q-(t[0]-1.1*q),r=b.width.viz/b.height.viz>n/r?b.height.viz/r:b.width.viz/n,n=.25*q,2>n*r&&(n=2/r))}var p=b.size.scale.value.domain(u).range([n,q]);b.zoom.bounds=[[m[0]-1.1*q,t[0]-1.1*q],[m[1]+1.1*q,t[1]+1.1*q]];var w=[],v={};c.forEach(function(c){var d=b.data.viz.filter(function(d){return d[b.id.value]==c[b.id.value]})[0]||
{};d[b.id.value]=c[b.id.value];d.d3plus={};d.d3plus.x=c.x;d.d3plus.y=c.y;var g=f(b,d,b.size.value);d.d3plus.r=g?p(g):p.range()[0];v[d[b.id.value]]={x:d.d3plus.x,y:d.d3plus.y,r:d.d3plus.r};w.push(d)});w.sort(function(b,c){return c.d3plus.r-b.d3plus.r});d.forEach(function(c,d){c.d3plus&&delete c.d3plus.spline;c[b.edges.source].d3plus={};var f=v[c[b.edges.source][b.id.value]];c[b.edges.source].d3plus.r=f.r;c[b.edges.source].d3plus.x=f.x;c[b.edges.source].d3plus.y=f.y;c[b.edges.target].d3plus={};f=v[c[b.edges.target][b.id.value]];
c[b.edges.target].d3plus.r=f.r;c[b.edges.target].d3plus.x=f.x;c[b.edges.target].d3plus.y=f.y});return{nodes:w,edges:d}};b.nesting=!1;b.requirements=["nodes","edges"];b.scale=1.05;b.shapes=["circle","square","donut"];b.tooltip="static";b.zoom=!0;c.exports=b},{"../../core/fetch/value.coffee":67,"../../network/smallestGap.coffee":167}],323:[function(b,c,d){var g,f,h,k,l=[].indexOf||function(b){for(var c=0,d=this.length;c<d;c++)if(c in this&&this[c]===b)return c;return-1};f=b("../../network/shortestPath.coffee");
g=b("../../core/fetch/value.coffee");h=b("../../util/uniques.coffee");k=function(b){var c,d,f,h,r,p,w,v,y,A,x,z,D,B,C,E,G,H,I,L,J;p=[];I={};I[b.focus.value[0]]=0;I[b.focus.value[1]]=0;B={all:[[b.focus.value[0]],[b.focus.value[1]]]};x=k.paths;y=h=0;for(v=x.length;h<v;y=++h)for(w=x[y],p=p.concat(w.edges),c=b.focus.value[0],B[y]=[c],G=w.edges,d=w=0,A=G.length;w<A;d=++w)r=G[d],r[b.edges.source]=b.data.viz.filter(function(c){return r[b.edges.source][b.id.value]===c[b.id.value]})[0],r[b.edges.target]=b.data.viz.filter(function(c){return r[b.edges.target][b.id.value]===
c[b.id.value]})[0],d=r[b.edges.source][b.id.value]===c?"target":"source",f=r[b.edges[d]][b.id.value],void 0===I[f]&&(I[f]=y),B[y].push(f),c=f;h=0;for(y in B)if(w=B[y],"all"!==y){d=v=A=0;for(x=w.length;v<x;d=++v)if(c=w[d],0!==d&&d!==w.length-1&&I[c]===parseFloat(y)){A=1;G=w[d-1];D=w[d+1];E=L=null;J=B.all;f=C=0;for(z=J.length;C<z;f=++C)d=J[f],0<=l.call(d,G)&&(L=f),0<=l.call(d,D)&&(E=f);null!==L&&null===E?L+1===B.all.length-1?B.all.splice(L+1,0,[c]):B.all[L+1].push(c):1===E-L?B.all.splice(E,0,[c]):1<
E-L&&B.all[E-1].push(c)}h+=A}f=Math.floor(b.height.viz/h);w=[];for(d=0;d<h;)0===d%2?w.push(d):w.unshift(d),d++;y=b.size.value&&!b.small?30:0;w=d3.scale.ordinal().domain(w).range(d3.range(f/2-y,b.height.viz+f/2-y,(b.height.viz-f)/(h-1)));d=B.all.length;h=Math.floor(b.width.viz/d);c=d3.scale.linear().domain([0,d-1]).rangeRound([h/2,b.width.viz-h/2]);v=.4*d3.min([h,f-y]);d=d3.extent(b.data.viz,function(c){return g(b,c,b.size.value)||0});C=b.size.scale.value.domain(d).rangeRound([5,v]);z=b.data.viz;A=
0;for(x=z.length;A<x;A++){G=z[A];null==G.d3plus&&(G.d3plus={});L=B.all;f=E=0;for(D=L.length;E<D;f=++E)if(d=L[f],H=G[b.id.value],0<=l.call(d,H))G.d3plus.x=c(f);G.d3plus.y=w(I[G[b.id.value]]);b.size.value?(d=g(b,G,b.size.value),G.d3plus.r=d?C(d):5):G.d3plus.r=v;G.d3plus.r<.1*h&&!b.small?G.d3plus.label={x:0,y:G.d3plus.r+2*b.labels.padding,w:.6*h,h:y+v-G.d3plus.r,resize:!1}:delete G.d3plus.label}v=k.paths;y=H=0;for(B=v.length;H<B;y=++H)for(w=v[y],c=b.focus.value[0],x=w.edges,d=w=0,y=x.length;w<y;d=++w)r=
x[d],d=r[b.edges.source][b.id.value]===c?"target":"source",A="target"===d?"source":"target",f=r[b.edges[d]][b.id.value],I[c]!==I[f]?(r.d3plus={spline:!0},null==(c=r[b.edges.source]).d3plus&&(c.d3plus={}),null==(c=r[b.edges.source].d3plus).edges&&(c.edges={}),null==(c=r[b.edges.target]).d3plus&&(c.d3plus={}),null==(c=r[b.edges.target].d3plus).edges&&(c.edges={}),c=r[d].d3plus.x-r[A].d3plus.x,r[A].d3plus.edges[r[d][b.id.value]]={angle:Math.PI,radius:h/2},r[d].d3plus.edges[r[A][b.id.value]]={angle:0,
radius:h/2,offset:c-h}):delete r.d3plus,c=f;return{nodes:b.data.viz,edges:p}};k.filter=function(b,c){var d,l,n,r,p,w,v,y,A,x;k.paths=f(b.edges.filtered||b.edges.value,b.focus.value[0],{target:b.focus.value[1],distance:b.edges.size.value||void 0,nodeid:b.id.value,startpoint:b.edges.source,endpoint:b.edges.target,K:b.edges.limit.value||5});k.nodes=[];d=[];y=k.paths;p=0;for(w=y.length;p<w;p++)for(l=y[p],A=l.edges,l=0,v=A.length;l<v;l++)n=A[l],x=n[b.edges.source],n=n[b.edges.target],0>d.indexOf(x[b.id.value])&&
(k.nodes.push(x),d.push(x[b.id.value])),0>d.indexOf(n[b.id.value])&&(k.nodes.push(n),d.push(n[b.id.value]));d=h(k.nodes,b.id.value,g,b);y=[];p=0;for(w=d.length;p<w;p++)r=d[p],l=c.filter(function(c){return c[b.id.value]===r}),l[0]?y.push(l[0]):(l={d3plus:{}},l[b.id.value]=r,y.push(l));return y};k.nesting=!1;k.requirements=[function(b){return{status:2===b.focus.value.length,text:b.format.locale.value.method.focus+" x 2"}},"edges"];k.scale=1;k.shapes=["circle","square","donut"];k.tooltip="static";c.exports=
k},{"../../core/fetch/value.coffee":67,"../../network/shortestPath.coffee":166,"../../util/uniques.coffee":209}],324:[function(b,c,d){var g,f;g=b("../../array/comparator.coffee");d=b("../../core/data/threshold.js");f=b("../../core/data/group.coffee");b=function(b){var c,d,m,t,u,q,n;d=d3.layout.pie().value(function(b){return b.value}).sort(function(c,d){return b.order.value?g(c.d3plus,d.d3plus,[b.order.value],b.order.sort.value,[],b):1<b.id.nesting.length?g(c.d3plus,d.d3plus,b.id.nesting.concat([b.size.value]),
void 0,[],b):g(c.d3plus,d.d3plus,[b.size.value],"desc",[],b)});c=f(b,b.data.viz,[]);u=d(c);n=[];q=d3.min([b.width.viz,b.height.viz])/2-2*b.labels.padding;d=0;for(t=u.length;d<t;d++)c=u[d],m=c.data.d3plus,m.d3plus.startAngle=c.startAngle,m.d3plus.endAngle=c.endAngle,m.d3plus.r=q,m.d3plus.x=b.width.viz/2,m.d3plus.y=b.height.viz/2,m.d3plus.share=(c.endAngle-c.startAngle)/(2*Math.PI),n.push(m);return n};b.filter=d;b.requirements=["data","size"];b.shapes=["arc"];b.threshold=function(b){return 1600/(b.width.viz*
b.height.viz)};c.exports=b},{"../../array/comparator.coffee":32,"../../core/data/group.coffee":57,"../../core/data/threshold.js":61}],325:[function(b,c,d){var g,f,h,k,l,m,t;b("../../array/comparator.coffee");b("../../array/sort.coffee");b("../../core/data/threshold.js");f=b("../../core/fetch/text.js");h=b("../../core/fetch/value.coffee");k=b("../../font/sizes.coffee");l=b("../../geom/offset.coffee");m=b("../../textwrap/textwrap.coffee");g=b("../../util/buckets.coffee");t=b("../../util/uniques.coffee");
b=function(b){var c,d,r,p,w,v,y,A,x,z,D,B,C,E,G,H,I,L,J,K,M,P;x=b.data.viz;J=b.depth.value+1;K=b.id.nesting[J];y=function(){var b,c,d;d=[];b=0;for(c=x.length;b<c;b++)A=x[b],d.push(A[K]);return d}();p=function(){var c,d,f;f=[];c=0;for(d=x.length;c<d;c++)A=x[c],f.push(t(x,K,h,b,J));return f}();p=t(d3.merge(p)).length;p=2*Math.PI/p;I=d3.min([b.width.viz,b.height.viz])/2;G=C=0;z=function(){var c,d,g;g=[];c=0;for(d=y.length;c<d;c++)v=y[c],g.push(f(b,v,J)[0]);return g}();z=t(d3.merge(z));b.labels.value&&
(c=l(Math.PI/2,I),D=l(p+Math.PI/2,I),C=c.x-D.x-2*b.labels.padding,P={fill:b.x.ticks.font.color,"font-family":b.x.ticks.font.family.value,"font-weight":b.x.ticks.font.weight,"font-size":b.x.ticks.font.size+"px"},c=k(z,P,{mod:function(c){return m().container(d3.select(c)).width(b.height.viz/8).height(C).draw()}}),G=d3.max(c,function(b){return b.width}),I=I-G-2*b.labels.padding);c=function(){var c,d,f;f=[];c=0;for(d=y.length;c<d;c++)v=y[c],f.push(function(){var c,d,f;f=[];c=0;for(d=v.length;c<d;c++)A=
v[c],f.push(h(b,A,b.size.value));return f}());return f}();c=d3.max(d3.merge(c));D=d3.scale.linear().domain([0,c]).range([0,I]);c=function(){var c,d,f;f=[];c=0;for(d=y.length;c<d;c++)v=y[c],f.push(h(b,v,K));return f}();c=t(d3.merge(c));r=d3.scale.ordinal().domain(c).range(d3.range(0,c.length));w=0;for(E=x.length;w<E;w++)for(A=x[w],A.d3plus.x=b.width.viz/2+b.margin.top,A.d3plus.y=b.height.viz/2+b.margin.left,L=A[K],c=B=0,H=L.length;B<H;c=++B)c=L[c],c.d3plus||(c.d3plus={}),c.d3plus.r=D(h(b,c,b.size.value)),
c.d3plus.a=r(h(b,c,K))*p;D=1;B=[10,5,4,2];w=0;for(r=B.length;w<r;w++)if(c=B[w],20<=I/c){D=c;break}c=g([I/D,I],D-1).reverse();c.length===D&&c.shift();D=b.group.selectAll(".d3plus_radar_rings").data(c,function(b,c){return c});c=function(c){return c.attr("fill",function(c,d){return 0===d?b.axes.background.color:"transparent"}).attr("cx",b.width.viz/2+b.margin.top).attr("cy",b.height.viz/2+b.margin.left).attr("stroke",b.x.grid.value?b.x.grid.color:"transparent")};D.enter().append("circle").attr("class",
"d3plus_radar_rings").call(c).attr("r",0);D.transition().duration(b.draw.timing).call(c).attr("r",function(b){return b});D.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();E=d3.scale.ordinal().domain(z).range(d3.range(0,z.length));D=[];L=0;for(H=z.length;L<H;L++)B=z[L],d=p*E(B)-Math.PI/2,c=180/Math.PI*d,-90>c||90<c?(c-=180,w=-(I+2*b.labels.padding+G),r="end"):(w=I+2*b.labels.padding,r="start"),M=I,b.labels.value&&(M+=b.labels.padding),d=l(d,M),[0,Math.PI].indexOf(p*E(B)),D.push({text:B,
angle:c,x:w,anchor:r,offset:d});p=b.group.selectAll("g.d3plus_radar_label_group").data([0]);p.enter().append("g").attr("class","d3plus_radar_label_group").attr("transform","translate("+b.width.viz/2+","+b.height.viz/2+")");p.transition().duration(b.draw.timing).attr("transform","translate("+b.width.viz/2+","+b.height.viz/2+")");z=p.selectAll(".d3plus_radar_labels").data(b.labels.value?D:[],function(b,c){return c});p=function(b){return b.attr(P).each(function(b,c){return m().container(d3.select(this)).height(C).width(G).align(b.anchor).text(b.text).padding(0).valign("middle").x(b.x).y(-C/
2).draw()}).attr("transform",function(b){var c;c=d3.select(this).attr("transform")||"";c.length&&(c=c.split(")").slice(-3).join(")"));return"rotate("+b.angle+")"+c})};z.call(p);z.enter().append("text").attr("class","d3plus_radar_labels").attr("opacity",0).call(p).transition().duration(b.draw.timing).attr("opacity",1);z.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();p=b.group.selectAll(".d3plus_radar_lines").data(D,function(b,c){return c});z=function(c){return c.attr("stroke",
b.x.grid.color).attr("x1",b.width.viz/2+b.margin.left).attr("y1",b.height.viz/2+b.margin.top)};p.enter().append("line").attr("class","d3plus_radar_lines").call(z).attr("x2",b.width.viz/2+b.margin.left).attr("y2",b.height.viz/2+b.margin.top);p.transition().duration(b.draw.timing).call(z).attr("x2",function(c){return b.width.viz/2+b.margin.left+c.offset.x}).attr("y2",function(c){return b.height.viz/2+b.margin.top+c.offset.y});p.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();
b.mouse.viz={click:!1};return x};b.requirements=["data","size"];b.shapes=["radial"];c.exports=b},{"../../array/comparator.coffee":32,"../../array/sort.coffee":34,"../../core/data/threshold.js":61,"../../core/fetch/text.js":66,"../../core/fetch/value.coffee":67,"../../font/sizes.coffee":101,"../../geom/offset.coffee":160,"../../textwrap/textwrap.coffee":199,"../../util/buckets.coffee":203,"../../util/uniques.coffee":209}],326:[function(b,c,d){var g=b("../../array/sort.coffee"),f=b("../../client/pointer.coffee"),
h=b("../../core/fetch/value.coffee"),k=b("../../core/fetch/color.coffee"),l=b("../../color/legible.coffee"),m=b("../../tooltip/remove.coffee"),t=b("../../network/smallestGap.coffee"),u=b("../../color/text.coffee"),q=b("../../util/uniques.coffee");b=function(b){var c=d3.min([b.height.viz,b.width.viz])/2,d=b.small||!b.labels.value?(c-2*b.labels.padding)/2:c/3,w=b.small||!b.labels.value?1.4*d:d,v=2*d,y=[],A=[],x=b.data.viz.filter(function(c){return c[b.id.value]===b.focus.value[0]})[0];x||(x={d3plus:{}},
x[b.id.value]=b.focus.value[0]);x.d3plus.x=b.width.viz/2;x.d3plus.y=b.height.viz/2;x.d3plus.r=.65*w;var z=[],D=[b.focus.value[0]];b.edges.connections(b.focus.value[0],b.id.value).forEach(function(c){var d=c[b.edges.source][b.id.value]==b.focus.value[0]?c[b.edges.target]:c[b.edges.source],f=b.data.viz.filter(function(c){return c[b.id.value]===d[b.id.value]})[0];f||(f={d3plus:{}},f[b.id.value]=d[b.id.value]);f.d3plus.edges=b.edges.connections(f[b.id.value],b.id.value).filter(function(c){return c[b.edges.source][b.id.value]!=
b.focus.value[0]&&c[b.edges.target][b.id.value]!=b.focus.value[0]});f.d3plus.edge=c;D.push(f[b.id.value]);z.push(f)});var B=b.order.value||b.color.value||b.size.value||b.id.value;z.sort(function(c,d){var f=c.d3plus.edges.length-d.d3plus.edges.length;return f?f:g([c,d],B,b.order.sort.value,b.color.value||[],b)});"number"==typeof b.edges.limit.value?z=z.slice(0,b.edges.limit.value):"function"==typeof b.edges.limit.value&&(z=b.edges.limit.value(z));var C=[],E=0;z.forEach(function(c){var d=c[b.id.value];
c.d3plus.edges=c.d3plus.edges.filter(function(c){var f=c[b.edges.source][b.id.value];c=c[b.edges.target][b.id.value];return 0>D.indexOf(f)&&c==d||0>D.indexOf(c)&&f==d});E+=c.d3plus.edges.length||1;c.d3plus.edges.forEach(function(c){var f=c[b.edges.source];c=c[b.edges.target];D.push((c[b.id.value]==d?f:c)[b.id.value])})});g(z,B,b.order.sort.value,b.color.value||[],b);var G=0,H=2*Math.PI;z.forEach(function(c,d){var f=c.d3plus.edges.length||1,h=H/E*f;0==d&&(G-=h/2);var k=G+h/2,k=k-H/4;c.d3plus.radians=
k;c.d3plus.x=b.width.viz/2+w*Math.cos(k);c.d3plus.y=b.height.viz/2+w*Math.sin(k);G+=h;c.d3plus.edges.sort(function(d,f){d=d[b.edges.source][b.id.value]==c[b.id.value]?d[b.edges.target]:d[b.edges.source];f=f[b.edges.source][b.id.value]==c[b.id.value]?f[b.edges.target]:f[b.edges.source];return g([d,f],B,b.order.sort.value,b.color.value||[],b)});c.d3plus.edges.forEach(function(d,g){var h=d[b.edges.source][b.id.value]==c[b.id.value]?d[b.edges.target]:d[b.edges.source],l=H/E,m=b.data.viz.filter(function(c){return c[b.id.value]===
h[b.id.value]})[0];m||(m={d3plus:{}},m[b.id.value]=h[b.id.value]);a=k-l*f/2+l/2+l*g;m.d3plus.radians=a;m.d3plus.x=b.width.viz/2+v*Math.cos(a);m.d3plus.y=b.height.viz/2+v*Math.sin(a);C.push(m)})});var I=t(z,{accessor:function(b){return[b.d3plus.x,b.d3plus.y]}}),L=t(C,{accessor:function(b){return[b.d3plus.x,b.d3plus.y]}});I||(I=d/2);L||(L=d/4);var J=8>I/2-4?d3.min([I/2,8]):I/2-4,K=4>L/2-4?d3.min([L/2,4]):L/2-4;K>d/10&&(K=d/10);K>J&&10<K&&(K=.75*J);J>1.5*K&&(J=1.5*K);var J=Math.floor(J),K=Math.floor(K),
M=q(z,b.id.value,h,b),M=M.concat(q(C,b.id.value,h,b));M.push(b.focus.value[0]);var P=b.data.viz.filter(function(c){return 0<=M.indexOf(c[b.id.value])});if(b.size.value){var N=d3.extent(P,function(c){return h(b,c,b.size.value)});N[0]==N[1]&&(N[0]=0);c=d3.scale.linear().domain(N).rangeRound([3,d3.min([J,K])]);J=h(b,x,b.size.value);x.d3plus.r=c(J)}else c=d3.scale.linear().domain([1,2]).rangeRound([J,K]),b.edges.label&&(x.d3plus.r=1.5*c(1));C.forEach(function(d){d.d3plus.ring=2;var f=b.size.value?h(b,
d,b.size.value):2;d.d3plus.r=c(f)});z.forEach(function(d){d.d3plus.ring=1;var f=b.size.value?h(b,d,b.size.value):1;d.d3plus.r=c(f)});A=[x].concat(z).concat(C);z.forEach(function(c,f){var g=c.d3plus.edge;[b.edges.source,b.edges.target].forEach(function(c){g[c]=A.filter(function(d){return d[b.id.value]==g[c][b.id.value]})[0]});delete g.d3plus;y.push(g);b.edges.connections(c[b.id.value],b.id.value).forEach(function(f){var g=f[b.edges.source][b.id.value]==c[b.id.value]?f[b.edges.target]:f[b.edges.source];
if(g[b.id.value]!=x[b.id.value]){var h=C.filter(function(c){return c[b.id.value]==g[b.id.value]})[0];h||(h=z.filter(function(c){return c[b.id.value]==g[b.id.value]})[0]);h&&(f.d3plus={spline:!0,translate:{x:b.width.viz/2,y:b.height.viz/2}},[b.edges.source,b.edges.target].forEach(function(g,k){f[g]=A.filter(function(c){return c[b.id.value]==f[g][b.id.value]})[0];void 0===f[g].d3plus.edges&&(f[g].d3plus.edges={});f[g].d3plus.edges[0===k?f[b.edges.target][b.id.value]:f[b.edges.source][b.id.value]]=f[g][b.id.value]==
c[b.id.value]?{angle:c.d3plus.radians+Math.PI,radius:d/2}:{angle:h.d3plus.radians,radius:d/2}}),y.push(f))}})});var S=!1;b.background.value&&0>["transparent","none"].indexOf(b.background.value)&&.5>d3.hsl(b.background.value).l&&(S=u(b.background.value));A.forEach(function(c){if(!b.small&&b.labels.value)if(c[b.id.value]!=b.focus.value[0]){c.d3plus.rotate=180/Math.PI*c.d3plus.radians;var f=c.d3plus.rotate,g=d-3*b.labels.padding-c.d3plus.r;if(-90>f||90<f)var f=f-180,h=-(c.d3plus.r+g/2+b.labels.padding),
m="end";else h=c.d3plus.r+g/2+b.labels.padding,m="start";var r=0<=z.indexOf(c)?!0:!1,q=1==c.d3plus.ring?I:L;c.d3plus.label={x:h,y:0,w:g,h:q,angle:f,anchor:m,valign:"center",color:S||l(k(b,c)),resize:[8,b.labels.font.size],background:r,mouse:!0}}else b.size.value||b.edges.label?(q=w-2*c.d3plus.r-2*b.labels.padding,c.d3plus.label={x:0,y:c.d3plus.r+q/2,w:w,h:q,color:S||l(k(b,c)),resize:[10,40],background:!0,mouse:!0}):(delete c.d3plus.rotate,delete c.d3plus.label);else delete c.d3plus.rotate,delete c.d3plus.label});
b.mouse.viz={};b.mouse.viz[f.click]=function(c){if(c[b.id.value]!=b.focus.value[0]){m(b.type.value);var d=b.focus.value[0];b.history.states.push(function(){b.self.focus(d).draw()});b.self.focus(c[b.id.value]).draw()}};return{edges:y,nodes:A,data:P}};b.filter=function(b,c){var d=b.edges.connections(b.focus.value[0],b.id.value,!0),f=[];d.forEach(function(c){f=f.concat(b.edges.connections(c[b.id.value],b.id.value,!0))});var d=d.concat(f),g=[];q(d,b.id.value,h,b).forEach(function(d){var f=c.filter(function(c){return c[b.id.value]==
d})[0];f||(f={d3plus:{}},f[b.id.value]=d);g.push(f)});return g};b.nesting=!1;b.scale=1;b.shapes=["circle","square","donut"];b.requirements=["edges","focus"];b.tooltip="static";c.exports=b},{"../../array/sort.coffee":34,"../../client/pointer.coffee":38,"../../color/legible.coffee":44,"../../color/text.coffee":50,"../../core/fetch/color.coffee":63,"../../core/fetch/value.coffee":67,"../../network/smallestGap.coffee":167,"../../tooltip/remove.coffee":202,"../../util/uniques.coffee":209}],327:[function(b,
c,d){var g,f,h;g=b("./sankey.js");f=b("../../client/pointer.coffee");h=b("../../tooltip/remove.coffee");b("../../util/uniques.coffee");b=function(b){var c,d,t,u,q,n,r,p,w,v,y;t=b.focus.value[0];w=2*b.data.stroke.width;y=b.size.value.constructor===Number?b.size.value:20;d=b.edges.connections(t,b.id.value).filter(function(c){return c[b.edges.source][b.id.value]!==t||c[b.edges.target][b.id.value]!==t});p=[];v=[];d=d.map(function(c){var d,f;c[b.edges.target][b.id.value]===t?(d={id:"left_"+c[b.edges.source][b.id.value],
dupe:"left",data:c[b.edges.source]},f=c[b.edges.target]):(d=c[b.edges.source],f={id:"right_"+c[b.edges.target][b.id.value],dupe:"right",data:c[b.edges.target]});0>v.indexOf(d.id)&&p.push(d);0>v.indexOf(f.id)&&p.push(f);v.push(d.id);v.push(f.id);return{source:d,target:f,value:c[b.edges.strength.value]||1}});q=g().nodeWidth(y).nodePadding(b.data.padding.value).size([b.width.viz-2*w,b.height.viz-2*w]).nodes(p).links(d).layout(2);y=[];u=0;for(n=p.length;u<n;u++)r=p[u],c=r.data||r,c={id:c[b.id.value]},
c.d3plus={x:r.x+r.dx/2+w,y:r.y+r.dy/2+w,width:r.dx,height:r.dy,suffix:r.dupe},y.push(c);b.edges.path=q.link();u=0;for(q=d.length;u<q;u++)c=d[u],c.d3plus={x:w,y:w};b.mouse.viz={};b.mouse.viz[f.click]=function(c){var d;if(c[b.id.value]!==b.focus.value[0])return h(b.type.value),d=b.focus.value[0],b.history.states.push(function(){return b.self.focus(d).draw()}),b.self.focus(c[b.id.value]).draw()};return{nodes:y,edges:d}};b.requirements=["edges","focus","nodes"];b.shapes=["square"];c.exports=b},{"../../client/pointer.coffee":38,
"../../tooltip/remove.coffee":202,"../../util/uniques.coffee":209,"./sankey.js":328}],328:[function(b,c,d){c.exports=function(){function b(){v.forEach(function(b){b.sourceLinks=[];b.targetLinks=[]});y.forEach(function(b){var c=b.source,d=b.target;"number"===typeof c&&(c=b.source=v[b.source]);"number"===typeof d&&(d=b.target=v[b.target]);c.sourceLinks.push(b);d.targetLinks.push(b)})}function c(){v.forEach(function(b){b.value=Math.max(d3.sum(b.sourceLinks,q),d3.sum(b.targetLinks,q))})}function d(){for(var b=
v,c,f=0;b.length;)c=[],b.forEach(function(b){b.x=f;b.dx=r;b.sourceLinks.forEach(function(b){0>c.indexOf(b.target)&&c.push(b.target)})}),b=c,++f;k(f);l((w[0]-r)/(f-1))}function k(b){v.forEach(function(c){c.sourceLinks.length||(c.x=b-1)})}function l(b){v.forEach(function(c){c.x*=b})}function m(b){function c(b){function d(b){return u(b.source)*b.value}h.forEach(function(c,f){c.forEach(function(c){if(c.targetLinks.length){var f=d3.sum(c.targetLinks,d)/d3.sum(c.targetLinks,q);c.y+=(f-u(c))*b}})})}function d(b){function c(b){return u(b.target)*
b.value}h.slice().reverse().forEach(function(d){d.forEach(function(d){if(d.sourceLinks.length){var f=d3.sum(d.sourceLinks,c)/d3.sum(d.sourceLinks,q);d.y+=(f-u(d))*b}})})}function f(){h.forEach(function(b){var c,d;d=0;var f=b.length,h;b.sort(g);for(h=0;h<f;++h)c=b[h],d-=c.y,0<d&&(c.y+=d),d=c.y+c.dy+p;d=d-p-w[1];if(0<d)for(d=c.y-=d,h=f-2;0<=h;--h)c=b[h],d=c.y+c.dy+p-d,0<d&&(c.y-=d),d=c.y})}function g(b,c){return b.y-c.y}var h=d3.nest().key(function(b){return b.x}).sortKeys(d3.ascending).entries(v).map(function(b){return b.values});
(function(){var b=d3.min(h,function(b){return(w[1]-(b.length-1)*p)/d3.sum(b,q)});h.forEach(function(c){c.forEach(function(c,d){c.y=d;c.dy=c.value*b})});y.forEach(function(c){c.dy=c.value*b})})();f();for(var k=1;0<b;--b)d(k*=.99),f(),c(k),f()}function t(){function b(c,d){return c.source.y-d.source.y}function c(b,d){return b.target.y-d.target.y}v.forEach(function(d){d.sourceLinks.sort(c);d.targetLinks.sort(b)});v.forEach(function(b){var c=0,d=0;b.sourceLinks.forEach(function(b){b.sy=c;c+=b.dy});b.targetLinks.forEach(function(b){b.ty=
d;d+=b.dy})})}function u(b){return b.y+b.dy/2}function q(b){return b.value}var n={},r=24,p=8,w=[1,1],v=[],y=[];n.nodeWidth=function(b){if(!arguments.length)return r;r=+b;return n};n.nodePadding=function(b){if(!arguments.length)return p;p=+b;return n};n.nodes=function(b){if(!arguments.length)return v;v=b;return n};n.links=function(b){if(!arguments.length)return y;y=b;return n};n.size=function(b){if(!arguments.length)return w;w=b;return n};n.layout=function(k){b();c();d();m(k);t();return n};n.relayout=
function(){t();return n};n.link=function(){function b(d){var f=d.source.x+d.source.dx,g=d.target.x,h=d3.interpolateNumber(f,g),k=h(c),h=h(1-c),l=d.source.y+d.sy+d.dy/2;d=d.target.y+d.ty+d.dy/2;return"M"+f+","+l+"C"+k+","+l+" "+h+","+d+" "+g+","+d}var c=.5;b.curvature=function(d){if(!arguments.length)return c;c=+d;return b};return b};return n}},{}],329:[function(b,c,d){var g,f,h,k;g=b("../../core/fetch/value.coffee");f=b("./helpers/graph/draw.coffee");b("../../core/console/print.coffee");h=b("../../array/sort.coffee");
k=b("./helpers/graph/dataTicks.coffee");b=function(b){var c,d,u,q;f(b,{buffer:"size",mouse:!0});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];q=b.data.viz;d=0;for(u=q.length;d<u;d++)c=q[d],c.d3plus.x=b.x.scale.viz(g(b,c,b.x.value)),c.d3plus.x+=b.axes.margin.left,c.d3plus.y=b.y.scale.viz(g(b,c,b.y.value)),c.d3plus.y+=b.axes.margin.top,c.d3plus.r="number"!==typeof b.size.value&&b.size.value?b.axes.scale(g(b,c,b.size.value)):b.axes.scale(0);k(b);return h(b.data.viz,b.order.value||
b.size.value||b.id.value,"desc"===b.order.sort.value?"asc":"desc",b.color.value||[],b)};b.fill=!0;b.requirements=["data","x","y"];b.scale=1.1;b.setup=function(b){if(b.time.value&&!b.axes.discrete&&(b.time.value===b.x.value&&b.self.x({scale:"discrete"}),b.time.value===b.y.value))return b.self.y({scale:"discrete"})};b.shapes=["circle","square","donut"];b.tooltip="static";c.exports=b},{"../../array/sort.coffee":34,"../../core/console/print.coffee":52,"../../core/fetch/value.coffee":67,"./helpers/graph/dataTicks.coffee":312,
"./helpers/graph/draw.coffee":313}],330:[function(b,c,d){var g=b("../../core/fetch/value.coffee"),f=b("../../util/uniques.coffee"),h=b("../../util/copy.coffee"),k=b("../../color/random.coffee");b=function(b){var c=f(b.data.viz,b.id.value,g,b),d=f(b.cols.value);0>d.indexOf("label")&&b.cols.index.value&&d.unshift("label");var u=b.height.viz/(c.length+1),q=b.width.viz/d.length;b.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",b.height.viz).attr("width",
b.width.viz).style("fill",b.color.missing);c=b.group.selectAll("line.horiz").data(b.data.viz);c.enter().append("line").attr("class","horiz");c.attr("x1",0).attr("y1",function(b,c){return u*c+u}).attr("x2",b.width.viz).attr("y2",function(b,c){return u*c+u}).style("fill","#fff").style("stroke","#fff");c.exit().remove();c=b.group.selectAll("line.vert").data(d);c.enter().append("line").attr("class","vert");c.attr("x1",function(b,c){return q*c+q}).attr("y1",0).attr("x2",function(b,c){return q*c+q}).attr("y2",
b.height.viz).style("fill","#fff").style("stroke","#fff");c.exit().remove();var n=[],r={};d.forEach(function(c,d){var f={d3plus:{x:q*d+q/2,y:u/2,width:q,height:u,id:"d3p_header_"+c.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:b.format.value(c)}};c==b.id.value&&(f.d3plus.color="#fff");"label"==c&&(f.d3plus.label=!1,f.d3plus.color="#fff",f.d3plus.stroke="#fff");n.push(f);"number"==b.data.keys[c]?(f=d3.extent(b.data.viz,function(b){return b[c]}),f[0]==f[1]&&(f=[f[0]-1,f[1]]),r[c]=d3.scale.linear().domain(f).range([b.color.missing,
k(c)])):"boolean"==b.data.keys[c]&&(r[c]=function(d){return d?k(c):b.color.missing})});b.data.viz.forEach(function(c,f){f+=1;d.forEach(function(d,g){var k=h(c);k.d3plus.id="d3p_"+k[b.id.value].toString().replace(/ /g,"_")+"_"+d;k.d3plus.x=q*g+q/2;k.d3plus.y=u*f+u/2;k.d3plus.width=q;k.d3plus.height=u;"label"==d&&(k.d3plus.shape="square",k.d3plus.color="#fff",n.push(k));0<=d3.keys(c).indexOf(d)&&d in c&&(r[d]&&(k.d3plus.color=r[d](k[d])),k.d3plus.text=b.format.value(k[d]),"boolean"==b.data.keys[d]?
k.d3plus.label=!1:"string"==b.data.keys[d]&&(k.d3plus.color=b.color.missing,k.d3plus.stroke="#fff",k.d3plus.shape="square"),n.push(k))})});return n};b.shapes="check cross diamond square triangle triangle_up triangle_down".split(" ");b.requirements=["data","cols"];c.exports=b},{"../../color/random.coffee":47,"../../core/fetch/value.coffee":67,"../../util/copy.coffee":206,"../../util/uniques.coffee":209}],331:[function(b,c,d){var g,f;d=b("../../core/data/threshold.js");g=b("../../core/data/group.coffee");
f=b("../../object/merge.coffee");b=function(b){var c,d,m,t,u;c=g(b,b.data.viz);c=d3.layout.treemap().mode(b.type.mode.value).round(!0).size([b.width.viz,b.height.viz]).children(function(b){return b.values}).padding(b.data.padding.value).sort(function(b,c){var d;d=b.value-c.value;return 0===d?b.id<c.id:d}).nodes({name:"root",values:c}).filter(function(b){return!b.values&&b.area});if(c.length){for(u=c[0];u.parent;)u=u.parent;t=[];d=0;for(m=c.length;d<m;d++)b=c[d],b.d3plus.d3plus=f(b.d3plus.d3plus,{x:b.x+
b.dx/2,y:b.y+b.dy/2,width:b.dx,height:b.dy,share:b.value/u.value}),t.push(b.d3plus)}return t};b.filter=d;b.modes=["squarify","slice","dice","slice-dice"];b.requirements=["data","size"];b.shapes=["square"];b.threshold=function(b){return 1600/(b.width.viz*b.height.viz)};c.exports=b},{"../../core/data/group.coffee":57,"../../core/data/threshold.js":61,"../../object/merge.coffee":170}],332:[function(b,c,d){var g,f,h,k,l,m;g=b("../core/methods/attach.coffee");f=b("./methods/helpers/axis.coffee");k=b("./helpers/ui/message.js");
l=b("./helpers/drawSteps.js");m=b("../core/console/print.coffee");h=b("./helpers/container.coffee");b("../object/validate.coffee");c.exports=function(){var c;c={g:{apps:{}},types:{area:b("./types/area.coffee"),bar:b("./types/bar.coffee"),bubbles:b("./types/bubbles.coffee"),box:b("./types/box.coffee"),chart:b("./types/deprecated/chart.coffee"),geo_map:b("./types/geo_map.coffee"),line:b("./types/line.coffee"),network:b("./types/network.js"),paths:b("./types/paths.coffee"),pie:b("./types/pie.coffee"),
radar:b("./types/radar.coffee"),rings:b("./types/rings.js"),sankey:b("./types/sankey.coffee"),scatter:b("./types/scatter.coffee"),stacked:b("./types/area.coffee"),table:b("./types/table.js"),tree_map:b("./types/tree_map.coffee")},self:function(b){b.each(function(){var b,d,f,g,u,v,y;c.draw.frozen=!0;c.error.internal=null;"timing"in c.draw||(c.draw.timing=c.timing.transitions);c.error.value&&(c.draw.timing=0);h(c);v=c.width.value<=c.width.small;u=c.height.value<=c.height.small;c.small=v||u;c.width.viz=
c.width.value;c.height.viz=c.height.value;b=!1;d=function(){y.length?g():c.dev.value&&(m.groupEnd(),m.timeEnd("total draw time"),m.log("\n"))};f=function(b,f){f=f||"function";if(b[f]instanceof Array)b[f].forEach(function(b){b(c,d)});else if("function"===typeof b[f])b[f](c,d);b.wait||d()};g=function(){var g,h,l;l=y.shift();h=c.g.message&&b===l.message;g="check"in l?l.check:!0;"function"===typeof g&&(g=g(c));g?h?f(l):(c.dev.value&&(!1!==b&&m.groupEnd(),m.group(l.message)),"string"===typeof c.messages.value?
g=b=c.messages.value:(b=l.message,g=c.format.value(l.message)),c.draw.update?(k(c,g),c.error.value?f(l):setTimeout(function(){return f(l)},10)):f(l)):"otherwise"in l?c.error.value?f(l,"otherwise"):setTimeout(function(){return f(l,"otherwise")},10):d()};c.messages.style.backup=c.group&&"1"===c.group.attr("opacity")?"small":"large";y=l(c);g()});return c.self}};g(c,{active:b("./methods/active.coffee"),aggs:b("./methods/aggs.coffee"),attrs:b("./methods/attrs.coffee"),axes:b("./methods/axes.coffee"),background:b("./methods/background.coffee"),
"class":b("./methods/class.coffee"),color:b("./methods/color.coffee"),cols:b("./methods/cols.js"),config:b("./methods/config.coffee"),container:b("./methods/container.coffee"),coords:b("./methods/coords.coffee"),csv:b("./methods/csv.coffee"),data:b("./methods/data.coffee"),depth:b("./methods/depth.coffee"),descs:b("./methods/descs.coffee"),dev:b("./methods/dev.coffee"),draw:b("./methods/draw.js"),edges:b("./methods/edges.js"),error:b("./methods/error.coffee"),focus:b("./methods/focus.coffee"),font:b("./methods/font.coffee"),
footer:b("./methods/footer.coffee"),format:b("./methods/format.coffee"),height:b("./methods/height.coffee"),history:b("./methods/history.coffee"),icon:b("./methods/icon.coffee"),id:b("./methods/id.coffee"),labels:b("./methods/labels.coffee"),legend:b("./methods/legend.coffee"),links:b("./methods/links.coffee"),margin:b("./methods/margin.coffee"),messages:b("./methods/messages.coffee"),mouse:b("./methods/mouse.coffee"),nodes:b("./methods/nodes.coffee"),order:b("./methods/order.coffee"),resize:b("./methods/resize.coffee"),
shape:b("./methods/shape.coffee"),size:b("./methods/size.coffee"),style:b("./methods/style.coffee"),temp:b("./methods/temp.coffee"),text:b("./methods/text.coffee"),time:b("./methods/time.coffee"),timeline:b("./methods/timeline.coffee"),timing:b("./methods/timing.coffee"),title:b("./methods/title.coffee"),tooltip:b("./methods/tooltip.coffee"),total:b("./methods/total.coffee"),type:b("./methods/type.coffee"),ui:b("./methods/ui.coffee"),width:b("./methods/width.coffee"),x:f("x"),x2:f("x2"),y:f("y"),
y2:f("y2"),zoom:b("./methods/zoom.js")});return c.self}},{"../core/console/print.coffee":52,"../core/methods/attach.coffee":79,"../object/validate.coffee":171,"./helpers/container.coffee":210,"./helpers/drawSteps.js":211,"./helpers/ui/message.js":245,"./methods/active.coffee":254,"./methods/aggs.coffee":255,"./methods/attrs.coffee":256,"./methods/axes.coffee":257,"./methods/background.coffee":258,"./methods/class.coffee":259,"./methods/color.coffee":260,"./methods/cols.js":261,"./methods/config.coffee":262,
"./methods/container.coffee":263,"./methods/coords.coffee":264,"./methods/csv.coffee":265,"./methods/data.coffee":266,"./methods/depth.coffee":267,"./methods/descs.coffee":268,"./methods/dev.coffee":269,"./methods/draw.js":270,"./methods/edges.js":271,"./methods/error.coffee":272,"./methods/focus.coffee":273,"./methods/font.coffee":274,"./methods/footer.coffee":275,"./methods/format.coffee":276,"./methods/height.coffee":277,"./methods/helpers/axis.coffee":278,"./methods/history.coffee":279,"./methods/icon.coffee":280,
"./methods/id.coffee":281,"./methods/labels.coffee":282,"./methods/legend.coffee":283,"./methods/links.coffee":284,"./methods/margin.coffee":285,"./methods/messages.coffee":286,"./methods/mouse.coffee":287,"./methods/nodes.coffee":288,"./methods/order.coffee":289,"./methods/resize.coffee":290,"./methods/shape.coffee":291,"./methods/size.coffee":292,"./methods/style.coffee":293,"./methods/temp.coffee":294,"./methods/text.coffee":295,"./methods/time.coffee":296,"./methods/timeline.coffee":297,"./methods/timing.coffee":298,
"./methods/title.coffee":299,"./methods/tooltip.coffee":300,"./methods/total.coffee":301,"./methods/type.coffee":302,"./methods/ui.coffee":303,"./methods/width.coffee":304,"./methods/zoom.js":305,"./types/area.coffee":306,"./types/bar.coffee":307,"./types/box.coffee":308,"./types/bubbles.coffee":309,"./types/deprecated/chart.coffee":310,"./types/geo_map.coffee":311,"./types/line.coffee":321,"./types/network.js":322,"./types/paths.coffee":323,"./types/pie.coffee":324,"./types/radar.coffee":325,"./types/rings.js":326,
"./types/sankey.coffee":327,"./types/scatter.coffee":329,"./types/table.js":330,"./types/tree_map.coffee":331}]},{},[162]);window.D3GRPH={_data:{graphIds:[],nodeTypes:"instance concept-type relation relation-type resource resource-type role-type meta".split(" "),edgeTypes:["default","active","alert"],smallRadius:14,mediumRadius:27,largeRadius:45,nodeColors:"#a1d884 #ff7878 #77dd77 #bfc0d1 #a1d884 #ff7878 #ffb96d #5bc2e7".split(" "),edgeColors:["#bbbcbc","#77dd77","#ffbb71"],edgeLabelColors:["#ffffff","#2e4e00","#a95800"]},dx:function(b,c){return b*c},dy:function(b,c){return b*c},getLinkUniqueId:function(b,c){return b+
"_link_"+c.source.index+"_"+c.target.index},boundingRect:function(b){return document.getElementById(b).getBoundingClientRect()},hypotenuseLength:function(b){return Math.sqrt(Math.pow(b.top-b.bottom,2)+Math.pow(b.right-b.left,2))},rotate:function(b,c,d){return d.target.x<d.source.x?"rotate(180, "+Math.abs(this.dx(b,d.source.x)+this.dx(b,d.target.x))/2+", "+Math.abs(this.dy(c,d.source.y)+this.dy(c,d.target.y))/2+")":""},offset:function(b,c,d){var g=this._data,f=g.radius(d.source.type),h=g.radius(d.target.type),
k=g=null;d.source.x<d.target.x?(g=f,k=h):d.source.x>d.target.x?(g=h,k=f):d.source.y<d.target.Y?(g=h,k=f):(g=f,k=h);b=Math.sqrt(Math.pow(this.dy(c,d.target.y)-this.dy(c,d.source.y),2)+Math.pow(this.dx(b,d.target.x)-this.dx(b,d.source.x),2));return((b-(g+k))/2+g)/b*100+"%"},drawGraph:function(b,c){var d=this;d3.selectAll("g.node").attr("transform",function(g){return"translate("+d.dx(b,g.x)+","+d.dy(c,g.y)+")"});d3.selectAll(".edge").attr("x1",function(c){return d.dx(b,c.source.x)}).attr("y1",function(b){return d.dy(c,
b.source.y)}).attr("x2",function(c){return d.dx(b,c.target.x)}).attr("y2",function(b){return d.dy(c,b.target.y)});d3.selectAll(".edgepath").attr("d",function(g){return"M"+d.dx(b,g.source.x)+","+d.dy(c,g.source.y)+"L "+d.dx(b,g.target.x)+","+d.dy(c,g.target.y)});d3.selectAll(".edgelabel").attr("transform",function(g,f){return g.target.x<g.source.x?(this.getBBox(),"rotate(180 "+Math.abs(d.dx(b,g.source.x)+d.dx(b,g.target.x))/2+" "+Math.abs(d.dy(c,g.source.y)+d.dy(c,g.target.y))/2+")"):"rotate(0)"})},
resize:function(b,c){var d=parseInt(d3.select("#graph_"+b).style("width")),g=parseInt(d3.select("#graph_"+b).style("height"));d3.select("svg").attr("width",d).attr("height",g);c.size([d,g]).start().stop();this.drawGraph(d,g)},buildGraph:function(b){var c=this,d=this._data,g=b.size.width,f=b.size.height,h=b.graph.id,k=d3.select(b.node).append("svg").attr("id",function(b){return"graph_"+h}).attr("width",g).attr("height",f),l=d3.layout.force().nodes(b.graph.nodes).links(b.graph.edges).size([g,f]).start().stop();
d.graphIds.push(h);k.append("svg:defs").append("svg:marker").attr("id","default-arrow").attr("viewBox","0 -5 10 10").attr("refX",23).attr("markerWidth",2).attr("markerHeight",2.5).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("stroke","#bbbcbc").style("fill","#bbbcbc");k.append("svg:defs").append("svg:marker").attr("id","active-arrow").attr("viewBox","0 -5 10 10").attr("refX",23).attr("markerWidth",2).attr("markerHeight",2.5).attr("orient","auto").append("svg:path").attr("d",
"M0,-5L10,0L0,5").attr("stroke","#77dd77").style("fill","#77dd77");k.append("svg:defs").append("svg:marker").attr("id","alert-arrow").attr("viewBox","0 -5 10 10").attr("refX",23).attr("markerWidth",2).attr("markerHeight",2.5).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("stroke","#FFBB71").style("fill","#FFBB71");k.selectAll("line").data(b.graph.edges).enter().append("line").attr("class","edge").attr("stroke",function(b){return d.edgeColor(b.type)}).attr("stroke-width",
9).attr("marker-end",function(b){return null!=b.type?"url(#"+b.type+"-arrow)":"url(#default-arrow)"});k.selectAll(".edgepath").data(b.graph.edges).enter().append("path").attr("id",function(b){return c.getLinkUniqueId(h,b)}).attr({"class":"edgepath","fill-opacity":0,"stroke-opacity":0,fill:"blue",stroke:"red"});k.selectAll(".edgelabel").data(b.graph.edges).enter().append("text").attr("class","edgelabel").style("font","9px sans-serif").attr("id",function(b){return c.getLinkUniqueId(h,b)+"text"}).attr("transform",
function(b){return c.rotate(g,f,b)}).attr("dy","3").append("textPath").attr("fill",function(b){return d.edgeLabelColor(b.type)}).attr("xlink:href",function(b){return"#"+c.getLinkUniqueId(h,b)}).attr("startOffset",function(b){return c.offset(g,f,b)}).attr("text-anchor","middle").text(function(b){return b.text.toUpperCase()});b=k.selectAll("g.node").data(b.graph.nodes).enter().append("g").attr("class","node");b.append("circle").attr("r",function(b){return d.radius(b.type)}).style("fill",function(b){return d.nodeColor(b.type)}).style("stroke",
function(b){return d.borderColor(b.type)}).style("stroke-width",6);b.append("text").attr("class","textWrap").style("text-anchor","middle").style("fill","white").style("font","12px sans-serif").text(function(b){return b.text}).each(function(b){d3plus.textwrap().align("center").valign("middle").container(d3.select(this)).draw()});d3.select(window).on("resize",function(){for(var b=0;b<d.graphIds.length;b++)c.resize(d.graphIds[b],l)});this.drawGraph(g,f)},init:function(){var b=this._data,c=b.nodeTypes,
d=b.nodeColors,g=b.edgeTypes,f=b.edgeColors,h=b.edgeLabelColors,k=b.mediumRadius,l=b.smallRadius;b.nodeColor=d3.scale.ordinal().domain(c).range(d);b.borderColor=d3.scale.ordinal().domain(c).range(d);b.edgeColor=d3.scale.ordinal().domain(g).range(f);b.edgeLabelColor=d3.scale.ordinal().domain(g).range(h);b.radius=d3.scale.ordinal().domain(c).range([k,k,l,k,k,k,k])}};window.D3GRPH=window.D3GRPH||{};
window.D3GRPH._data.homepageGraphs=[{id:1,width:562,height:400,nodes:[{id:0,type:"meta",text:"relation-type",x:.8,y:.15},{id:1,type:"relation-type",text:"director-ship",x:.5,y:.1},{id:2,type:"relation",text:"\u2022",x:.3,y:.267},{id:3,type:"relation",text:"\u2022",x:.7,y:.267},{id:4,type:"instance",text:"$x: Titanic",x:.1,y:.533},{id:5,type:"instance",text:"$y: James Cameron",x:.5,y:.533},{id:6,type:"instance",text:"$z: Avatar",x:.9,y:.533},{id:7,type:"concept-type",text:"person",x:.15,y:.8},{id:8,
type:"concept-type",text:"movie",x:.85,y:.8},{id:9,type:"meta",text:"concept-type",x:.5,y:.9}],edges:[{source:1,target:0,text:"isa"},{source:2,target:1,text:"isa"},{source:3,target:1,text:"isa"},{source:3,target:5,text:"director",type:"active"},{source:3,target:6,text:"movie-directed",type:"active"},{source:2,target:4,text:"movie-directed",type:"active"},{source:2,target:5,text:"director",type:"active"},{source:4,target:8,text:"isa"},{source:6,target:8,text:"isa"},{source:5,target:7,text:"isa"},{source:7,
target:9,text:"isa"},{source:8,target:9,text:"isa"}]},{id:2,width:562,height:400,nodes:[{id:0,type:"meta",text:"concept-type",x:.2,y:.15},{id:1,type:"concept-type",text:"movie",x:.1,y:.5},{id:2,type:"instance",text:"$x: id1234",x:.2,y:.85},{id:3,type:"relation",text:"has",x:.37,y:.1},{id:4,type:"relation",text:"has",x:.32,y:.5},{id:5,type:"relation",text:"has",x:.37,y:.9},{id:6,type:"resource",text:"8.3",x:.57,y:.1},{id:7,type:"resource",text:"The Martian",x:.5,y:.5},{id:8,type:"resource",text:"30 Sep 2015",
x:.57,y:.9},{id:9,type:"resource-type",text:"rating",x:.8,y:.15},{id:10,type:"resource-type",text:"title",x:.7,y:.5},{id:11,type:"resource-type",text:"release-date",x:.8,y:.85},{id:12,type:"meta",text:"resource-type",x:.9,y:.5}],edges:[{source:1,target:0,text:"isa"},{source:2,target:1,text:"isa",type:"active"},{source:3,target:2,text:"owner"},{source:4,target:2,text:"owner",type:"active"},{source:5,target:2,text:"owner"},{source:3,target:6,text:"value"},{source:4,target:7,text:"value",type:"active"},
{source:5,target:8,text:"value"},{source:6,target:9,text:"isa"},{source:7,target:10,text:"isa",type:"active"},{source:8,target:11,text:"isa"},{source:9,target:12,text:"isa"},{source:10,target:12,text:"isa"},{source:11,target:12,text:"isa"}]},{id:3,width:562,height:400,nodes:[{id:0,type:"meta",text:"relation-type",x:.5,y:.1},{id:1,type:"relation-type",text:"director-ship",x:.2,y:.2},{id:2,type:"relation-type",text:"casting",x:.8,y:.2},{id:3,type:"relation",text:"\u2022",x:.3,y:.36},{id:4,type:"relation",
text:"\u2022",x:.7,y:.36},{id:5,type:"instance",text:"$z: Ang Lee",x:.1,y:.56},{id:6,type:"instance",text:"$y: Life of Pi",x:.5,y:.56},{id:7,type:"instance",text:"$y: Irrfan Khan",x:.9,y:.56},{id:8,type:"concept-type",text:"person",x:.2,y:.8},{id:9,type:"concept-type",text:"movie",x:.8,y:.8},{id:10,type:"meta",text:"concept-type",x:.5,y:.9}],edges:[{source:1,target:0,text:"isa"},{source:2,target:0,text:"isa"},{source:3,target:1,text:"isa"},{source:3,target:5,text:"director",type:"active"},{source:3,
target:6,text:"movie-directed",type:"active"},{source:4,target:2,text:"isa"},{source:4,target:6,text:"movie-cast",type:"active"},{source:4,target:7,text:"actor",type:"active"},{source:7,target:8,text:"isa"},{source:6,target:9,text:"isa"},{source:5,target:8,text:"isa"},{source:9,target:10,text:"isa"},{source:8,target:10,text:"isa"}]},{id:4,width:562,height:400,nodes:[{id:0,type:"meta",text:"concept-type",x:.2,y:.15},{id:1,type:"concept-type",text:"movie",x:.1,y:.5},{id:2,type:"instance",text:"$x",
x:.2,y:.85},{id:3,type:"relation",text:"has",x:.4,y:.1},{id:4,type:"relation",text:"has",x:.367,y:.5},{id:5,type:"relation",text:"has",x:.4,y:.9},{id:6,type:"resource",text:"Friday the 13th",x:.6,y:.1},{id:7,type:"resource",text:"Slasher",x:.633,y:.5},{id:8,type:"resource",text:"Horror",x:.6,y:.9},{id:9,type:"resource-type",text:"title",x:.8,y:.15},{id:10,type:"meta",text:"resource-type",x:.9,y:.5},{id:11,type:"resource-type",text:"genre",x:.8,y:.85}],edges:[{source:1,target:0,text:"isa"},{source:2,
target:1,text:"isa"},{source:3,target:2,text:"owner"},{source:4,target:2,text:"owner"},{source:5,target:2,text:"owner",type:"active"},{source:3,target:6,text:"value"},{source:4,target:7,text:"value"},{source:5,target:8,text:"value",type:"active"},{source:6,target:9,text:"isa"},{source:7,target:11,text:"isa"},{source:8,target:11,text:"isa",type:"active"},{source:9,target:10,text:"isa"},{source:11,target:10,text:"isa"}]},{id:5,width:562,height:400,nodes:[{id:0,type:"meta",text:"concept-type",x:.18,
y:.2},{id:1,type:"meta",text:"relation-type",x:.5,y:.1},{id:2,type:"relation-type",text:"director-ship",x:.82,y:.2},{id:3,type:"concept-type",text:"movie",x:.1,y:.6},{id:4,type:"relation",text:"$z",x:.5,y:.6},{id:5,type:"concept-type",text:"person",x:.9,y:.6},{id:6,type:"instance",text:"$x: Big Fish",x:.3,y:.9},{id:7,type:"instance",text:"$y: Tim Burton",x:.7,y:.9}],edges:[{source:2,target:1,text:"isa"},{source:3,target:0,text:"isa"},{source:4,target:2,text:"isa"},{source:4,target:6,text:"movie-directed",
type:"active"},{source:4,target:7,text:"director",type:"active"},{source:5,target:0,text:"isa"},{source:6,target:3,text:"isa",type:"active"},{source:7,target:5,text:"isa",type:"active"}]}];
window.D3GRPH._data.platformGraphs=[{id:1,width:562,height:400,nodes:[{id:0,type:"concept-type",text:"person",x:.5,y:.1},{id:1,type:"instance",text:"Alice",x:.1,y:.9},{id:2,type:"instance",text:"Bob",x:.9,y:.9}],edges:[{source:1,target:0,text:"isa"},{source:2,target:0,text:"isa"}]},{id:2,width:562,height:400,nodes:[{id:0,type:"concept-type",text:"person",x:.1,y:.1},{id:1,type:"instance",text:"Alice",x:.1,y:.9},{id:2,type:"instance",text:"Honesty Inc.",x:.9,y:.9},{id:3,type:"relation",text:"\u2022",
x:.5,y:.5},{id:4,type:"concept-type",text:"company",x:.9,y:.1},{id:5,type:"relation-type",text:"director-ship",x:.5,y:.1}],edges:[{source:1,target:0,text:"isa"},{source:2,target:4,text:"isa"},{source:3,target:2,text:"directed"},{source:3,target:1,text:"director"},{source:3,target:5,text:"isa"}]},{id:3,width:562,height:400,nodes:[{id:0,type:"relation-type",text:"marriage",x:.5,y:.1},{id:1,type:"role-type",text:"wife",x:.1,y:.3},{id:2,type:"role-type",text:"husband",x:.9,y:.3},{id:3,type:"instance",
text:"Alice",x:.1,y:.7},{id:4,type:"relation",text:"\u2022",x:.5,y:.5},{id:5,type:"instance",text:"Bob",x:.9,y:.7},{id:6,type:"concept-type",text:"person",x:.5,y:.9}],edges:[{source:0,target:1,text:"has role"},{source:0,target:2,text:"has role"},{source:4,target:0,text:"isa"},{source:4,target:3,text:"wife"},{source:4,target:5,text:"husband"},{source:3,target:6,text:"isa"},{source:5,target:6,text:"isa"}]},{id:4,width:562,height:400,nodes:[{id:0,type:"relation-type",text:"director-ship",x:.5,y:.1},
{id:1,type:"role-type",text:"director",x:.1,y:.1},{id:2,type:"role-type",text:"directed",x:.9,y:.1},{id:3,type:"instance",text:"Alice",x:.3,y:.9},{id:4,type:"relation",text:"\u2022",x:.5,y:.5},{id:5,type:"instance",text:"Honesty Inc.",x:.7,y:.9},{id:6,type:"concept-type",text:"person",x:.1,y:.55},{id:7,type:"concept-type",text:"company",x:.9,y:.55}],edges:[{source:0,target:1,text:"has role"},{source:0,target:2,text:"has role"},{source:4,target:0,text:"isa"},{source:4,target:3,text:"director"},{source:4,
target:5,text:"directed"},{source:3,target:6,text:"isa"},{source:5,target:7,text:"isa"},{source:6,target:1,text:"plays role"},{source:7,target:2,text:"plays role"}]},{id:5,width:562,height:400,nodes:[{id:0,type:"relation-type",text:"director-ship",x:.5,y:.1},{id:1,type:"role-type",text:"director",x:.1,y:.5},{id:2,type:"role-type",text:"directed",x:.9,y:.5},{id:3,type:"concept-type",text:"person",x:.1,y:.9},{id:4,type:"concept-type",text:"company",x:.9,y:.9},{id:5,type:"meta",text:"relation-type",
x:.9,y:.1},{id:6,type:"meta",text:"role-type",x:.5,y:.5},{id:7,type:"meta",text:"concept-type",x:.5,y:.9}],edges:[{source:0,target:1,text:"has role"},{source:0,target:2,text:"has role"},{source:3,target:1,text:"plays role"},{source:4,target:2,text:"plays role"},{source:0,target:5,text:"isa"},{source:1,target:6,text:"isa"},{source:2,target:6,text:"isa"},{source:3,target:7,text:"isa"},{source:4,target:7,text:"isa"}]},{id:6,width:562,height:400,nodes:[{id:0,type:"relation-type",text:"director-ship",
x:.5,y:.1},{id:1,type:"role-type",text:"director",x:.1,y:.1},{id:2,type:"role-type",text:"directed",x:.9,y:.1},{id:3,type:"relation-type",text:"marriage",x:.5,y:.9},{id:4,type:"role-type",text:"husband",x:.1,y:.9},{id:5,type:"role-type",text:"wife",x:.9,y:.9},{id:6,type:"concept-type",text:"person",x:.3,y:.5},{id:7,type:"concept-type",text:"company",x:.7,y:.5}],edges:[{source:0,target:1,text:"has role"},{source:0,target:2,text:"has role"},{source:3,target:4,text:"has role"},{source:3,target:5,text:"has role"},
{source:6,target:1,text:"plays role"},{source:7,target:2,text:"plays role"},{source:6,target:4,text:"plays role"},{source:6,target:5,text:"plays role"}]},{id:7,width:562,height:400,nodes:[{id:0,type:"relation-type",text:"marriage",x:.3,y:.1},{id:1,type:"instance",text:"Bob",x:.1,y:.633},{id:2,type:"relation",text:"\u2022",x:.3,y:.367},{id:3,type:"instance",text:"Alice",x:.5,y:.633},{id:4,type:"concept-type",text:"person",x:.3,y:.9},{id:5,type:"relation",text:"\u2022",x:.7,y:.367},{id:6,type:"instance",
text:"Honesty Inc.",x:.9,y:.633},{id:7,type:"relation-type",text:"director-ship",x:.7,y:.1},{id:8,type:"concept-type",text:"company",x:.7,y:.9}],edges:[{source:2,target:0,text:"isa"},{source:2,target:1,text:"husband"},{source:2,target:3,text:"wife"},{source:1,target:4,text:"isa"},{source:3,target:4,text:"isa"},{source:5,target:3,text:"director"},{source:5,target:6,text:"directed"},{source:6,target:8,text:"isa"},{source:5,target:7,text:"isa"}]},{id:8,width:562,height:400,nodes:[{id:0,type:"relation-type",
text:"marriage",x:.3,y:.1},{id:1,type:"instance",text:"Bob",x:.1,y:.633},{id:2,type:"relation",text:"\u2022",x:.3,y:.367},{id:3,type:"instance",text:"Alice",x:.5,y:.633},{id:4,type:"concept-type",text:"person",x:.3,y:.9},{id:5,type:"relation",text:"\u2022",x:.7,y:.367},{id:6,type:"instance",text:"Honesty Inc.",x:.9,y:.633},{id:7,type:"relation-type",text:"director-ship",x:.7,y:.1},{id:8,type:"concept-type",text:"company",x:.7,y:.9}],edges:[{source:2,target:0,text:"isa"},{source:2,target:1,text:"husband",
type:"active"},{source:2,target:3,text:"wife",type:"active"},{source:1,target:4,text:"isa"},{source:3,target:4,text:"isa"},{source:5,target:3,text:"director",type:"active"},{source:5,target:6,text:"directed",type:"active"},{source:6,target:8,text:"isa"},{source:5,target:7,text:"isa"}]},{id:10,width:562,height:400,nodes:[{id:0,type:"relation-type",text:"marriage",x:.5,y:.1},{id:1,type:"role-type",text:"husband",x:.1,y:.5},{id:2,type:"role-type",text:"wife",x:.9,y:.5},{id:3,type:"concept-type",text:"person",
x:.5,y:.9}],edges:[{source:0,target:1,text:"has role"},{source:0,target:2,text:"has role"},{source:3,target:1,text:"plays role"},{source:3,target:2,text:"plays role"}]},{id:11,width:562,height:400,nodes:[{id:0,type:"relation",text:"\u2022",x:.5,y:.1},{id:1,type:"relation",text:"\u2022",x:.5,y:.9},{id:2,type:"instance",text:"Honesty Inc.",x:.3,y:.3},{id:3,type:"instance",text:"Evilcorp",x:.3,y:.7},{id:4,type:"instance",text:"TrustMe.co",x:.1,y:.9},{id:5,type:"concept-type",text:"company",x:.1,y:.5},
{id:6,type:"instance",text:"Alice",x:.7,y:.3},{id:7,type:"instance",text:"Bob",x:.7,y:.7},{id:8,type:"concept-type",text:"person",x:.9,y:.5},{id:9,type:"relation-type",text:"director-ship",x:.5,y:.5}],edges:[{source:0,target:9,text:"isa"},{source:1,target:9,text:"isa"},{source:2,target:5,text:"isa",type:"active"},{source:3,target:5,text:"isa",type:"active"},{source:4,target:5,text:"isa",type:"alert"},{source:0,target:2,text:"directed",type:"active"},{source:1,target:3,text:"directed",type:"active"},
{source:0,target:6,text:"director",type:"active"},{source:1,target:7,text:"director",type:"active"},{source:6,target:8,text:"isa",type:"active"},{source:7,target:8,text:"isa",type:"active"}]},{id:12,width:562,height:400,nodes:[{id:0,type:"relation-type",text:"marriage",x:.5,y:.1},{id:1,type:"instance",text:"Alice",x:.1,y:.1},{id:2,type:"relation",text:"\u2022",x:.5,y:.35},{id:3,type:"instance",text:"Bob",x:.9,y:.1},{id:4,type:"relation",text:"\u2022",x:.35,y:.4},{id:5,type:"relation-type",text:"director-ship",
x:.7,y:.7},{id:6,type:"relation",text:"\u2022",x:.65,y:.4},{id:7,type:"instance",text:"Honesty Inc.",x:.1,y:.5},{id:8,type:"relation-type",text:"address",x:.3,y:.7},{id:9,type:"instance",text:"Evilcorp",x:.9,y:.5},{id:10,type:"relation",text:"\u2022",x:.1,y:.9},{id:11,type:"relation",text:"\u2022",x:.9,y:.9},{id:12,type:"instance",text:"Easy Street",x:.5,y:.9}],edges:[{source:2,target:0,text:"isa"},{source:2,target:1,text:"wife",type:"active"},{source:2,target:3,text:"husband",type:"active"},{source:4,
target:5,text:"isa"},{source:6,target:5,text:"isa"},{source:10,target:8,text:"isa"},{source:11,target:8,text:"isa"},{source:4,target:1,text:"director",type:"active"},{source:6,target:3,text:"director",type:"active"},{source:4,target:7,text:"directed",type:"active"},{source:6,target:9,text:"directed",type:"active"},{source:10,target:7,text:"houses",type:"active"},{source:11,target:9,text:"houses",type:"active"},{source:10,target:12,text:"location",type:"active"},{source:11,target:12,text:"location",
type:"active"}]}];Math.radians=function(b){return b*Math.PI/180};Math.degrees=function(b){return 180*b/Math.PI};function selectText(b){var c,d;document.body.createTextRange?(c=document.body.createTextRange(),c.moveToElementText(b),c.select()):window.getSelection&&(d=window.getSelection(),c=document.createRange(),c.selectNodeContents(b),d.removeAllRanges(),d.addRange(c))}
function serializeObject(b){var c={};b=b.serializeArray();$.each(b,function(){void 0!==c[this.name]?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||"")):c[this.name]=this.value||""});return c}function getParentElement(b,c){if(b)return b.classList.contains(c)?b:"BODY"===b.nodeName||"HTML"===b.nodeName?!1:getParentElement(b.parentNode,c)}function getParentElements(b,c){for(var d=[],g=getParentElement(b,c);g;)d.push(g),g=getParentElement(g.parentNode,c);return d}
function getChildren(b,c){for(var d=[];b;b=b.nextSibling)1==b.nodeType&&b!=c&&d.push(b);return d}function getSiblings(b){return getChildren(b.parentNode.firstChild,b)}function f_filterResults(b,c,d){b=b?b:0;c&&(!b||b>c)&&(b=c);return d&&(!b||b>d)?d:b}function f_clientWidth(){return f_filterResults(window.innerWidth?window.innerWidth:0,document.documentElement?document.documentElement.clientWidth:0,document.body?document.body.clientWidth:0)}
function f_clientHeight(){return f_filterResults(window.innerHeight?window.innerHeight:0,document.documentElement?document.documentElement.clientHeight:0,document.body?document.body.clientHeight:0)}function f_scrollLeft(){return f_filterResults(window.pageXOffset?window.pageXOffset:0,document.documentElement?document.documentElement.scrollLeft:0,document.body?document.body.scrollLeft:0)}
function f_scrollTop(){return f_filterResults(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0)}
function dontScrollParent(b,c){function d(b){function c(){b.stopPropagation();b.preventDefault();return b.returnValue=!1}var d=this.scrollTop,k=this.scrollHeight,l=this.offsetHeight,m=b.wheelDelta,t=0<m;if(!t&&-m>k-l-d)return this.scrollTop=k,c();if(t&&m>d)return this.scrollTop=0,c()}b.removeEventListener("DOMMouseScroll",d,!1);b.removeEventListener("mousewheel",d,!1);c||(b.addEventListener("DOMMouseScroll",d,!1),b.addEventListener("mousewheel",d,!1))}
function webGLAvailable(){var b=document.createElement("canvas"),c;try{c=b.getContext("webgl")}catch(d){c=null}if(null===c)try{c=b.getContext("experimental-webgl")}catch(d){c=null}return null===c?!1:!0};window.MNDMPS=window.MNDMPS||{};
window.MNDMPS.ajax={_data:{},call:function(b){return new Promise(function(c,d){var g=new XMLHttpRequest;g.open(b.method,b.url,!0);b.contentType&&g.setRequestHeader("Content-type",b.contentType);g.send(b.data);g.onload=function(){200<=this.status&&300>this.status?c(this.response):d(this.statusText)};g.onerror=function(){d(this.statusText)}})},getAngelJobs:function(){return this.call({method:"GET",url:"/angel_jobs.php"})},sendSubscribe:function(b){return this.call({method:"POST",contentType:"application/json;charset=UTF-8",
data:JSON.stringify(b.data),url:"/mail/"})}};window.MNDMPS=window.MNDMPS||{};
window.MNDMPS.modal={_data:{},open:function(){var b=window.MNDMPS.modal,c=b._data;c.underlay.classList.contains("display")||(c.sent&&(c.sent=!1,b.resetForm(c.form)),clearTimeout(c.closeTimeout),c.underlay.classList.add("display"),setTimeout(function(){c.underlay.classList.add("active")},25))},close:function(){var b=window.MNDMPS.modal._data;b.underlay.classList.contains("active")&&(b.underlay.classList.remove("active"),setTimeout(function(){b.underlay.classList.remove("display")},200))},closeByKey:function(b){var c=
window.MNDMPS.modal;27===b.which&&c.close()},resetForm:function(b){var c=window.MNDMPS.modal._data,d=[].slice.call(b.getElementsByTagName("input"),0);d.push(b.getElementsByTagName("textarea")[0]);for(b=0;b<d.length;b++)"submit"!==d[b].type&&(d[b].value="");c.sendButton.classList.remove("disabled");c.sendButton.classList.remove("done")},init:function(){var b=this,c=this._data;c.underlay=document.getElementsByClassName("modal-underlay")[0];c.modal=c.underlay.children[0];c.form=c.modal.getElementsByTagName("form")[0];
c.sendButton=c.form.getElementsByClassName("sendButton")[0];c.sendButton.addEventListener("click",function(d){d.preventDefault();this.classList.contains("disabled")||(this.classList.add("disabled"),window.MNDMPS.ajax.sendSubscribe({data:serializeObject($(c.form))}).then(function(d){c.sent=!0;c.sendButton.classList.add("done");c.closeTimeout=setTimeout(function(){b.close()},1500)},function(b){console.log(b)}))},!1);c.underlay.addEventListener("click",function(c){(c.target.classList.contains("modal-underlay")||
c.target.classList.contains("modal-close"))&&b.close()},!1);document.addEventListener("keydown",this.closeByKey,!1);dontScrollParent(c.underlay)}};window.MNDMPS=window.MNDMPS||{};
window.MNDMPS.map={data:{},center:function(b,c,d,g){if(b.getBounds()){var f=Math.pow(2,b.getZoom());new google.maps.LatLng(b.getBounds().getNorthEast().lat(),b.getBounds().getSouthWest().lng());c=b.getProjection().fromLatLngToPoint(c);d=new google.maps.Point(d/f||0,g/f||0);d=new google.maps.Point(c.x-d.x,c.y+d.y);d=b.getProjection().fromPointToLatLng(d);b.setCenter(d)}},load:function(){var b=window.MNDMPS.map,c={path:"M15.2,5.2v9.5L20,10L15.2,5.2z M10,0L5.2,4.8L10,9.7l4.8-4.8L10,0z M0,10l4.8,4.7V5.2L0,10z M14.8,15.3l-4.4,4.4l3.4,3.4l-0.4,0.3l-8.2-8.2V5.6l4.8,4.8l4.7-4.8V15.3z",fillColor:"#5bc2e7",
fillOpacity:1,anchor:new google.maps.Point(12,23),strokeWeight:0,scale:2},d=new google.maps.LatLng(51.551157,-.114799),g={zoom:560>window.MNDMPS.App.data.windowWidth?13:15,center:d,scrollwheel:!1,disableDefaultUI:!0,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},
{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",
stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},
{weight:1.2}]}],draggable:!1},f=new google.maps.Map(document.getElementsByClassName("google-map")[0],g),h=new google.maps.Marker({position:d,map:f,icon:c,url:"//google.co.uk/maps/place/Mindmaps+Research+Ltd/@51.5512213,-0.1169207,17z/data=!3m1!4b1!4m2!3m1!1s0x48761b7382210035:0x9ca7d8a98838539f"});b.data.googleMapLatLng=d;b.data.googleMap=f;google.maps.event.addListener(h,"click",function(){window.open(h.url,"_blank").focus()});google.maps.event.addListener(f,"idle",function(){1E3>b.data.windowWidth&&
b.center(f,d,(b.data.windowWidth-f.getDiv().parentNode.getElementsByClassName("info")[0].offsetWidth)/2-(b.data.windowWidth/2-f.getDiv().parentNode.getElementsByClassName("info")[0].offsetWidth),0)})}};window.MNDMPS=window.MNDMPS||{};
window.MNDMPS.threeD={data:{},init:function(){function b(b,c){return b[0][0]===c[0][0]&&b[0][1]===c[0][1]&&b[0][2]===c[0][2]&&b[1][0]===c[1][0]&&b[1][1]===c[1][1]&&b[1][2]===c[1][2]||b[1][0]===c[0][0]&&b[1][1]===c[0][1]&&b[1][2]===c[0][2]&&b[0][0]===c[1][0]&&b[0][1]===c[1][1]&&b[0][2]===c[1][2]?!0:!1}function c(){m.data.windowWidth=f_clientWidth();m.data.windowHeight=f_clientHeight();window.MNDMPS.App.processScroll(f_scrollTop(),f_scrollLeft());u=m.data.windowWidth;q=.8*m.data.windowHeight;N=q/n;
w.left=u/-2;w.right=u/2;w.top=q/2;w.bottom=q/-2;w.updateProjectionMatrix();r.setSize(u,q)}function d(){if(m.data.threeDRunning){for(var b=0,c=0,f=null,g=null,h=0;20>h;h++)A[h].numConnections=0;for(h=0;20>h;h++){f=A[h];D[3*h]+=f.velocity.x;D[3*h+1]+=f.velocity.y;D[3*h+2]+=f.velocity.z;if(D[3*h+1]<-q/2||D[3*h+1]>q/2)f.velocity.y=-f.velocity.y;if(D[3*h]<-u/2||D[3*h]>u/2)f.velocity.x=-f.velocity.x;if(-100>D[3*h+2]||200<D[3*h+2])f.velocity.z=-f.velocity.z;if(!(B.limitConnections&&f.numConnections>=B.maxConnections))for(var k=
h+1;20>k;k++)g=A[k],!(B.limitConnections&&g.numConnections>=B.maxConnections)&&Math.sqrt(Math.pow(D[3*h]-D[3*k],2)+Math.pow(D[3*h+1]-D[3*k+1],2)+Math.pow(D[3*h+2]-D[3*k+2],2))<B.minDistance&&(f.numConnections++,g.numConnections++,x[b++]=D[3*h],x[b++]=D[3*h+1],x[b++]=D[3*h+2],x[b++]=D[3*k],x[b++]=D[3*k+1],x[b++]=D[3*k+2],c++)}y.geometry.setDrawRange(0,2*c);y.geometry.attributes.position.needsUpdate=!0;for(b=E.length-1;0<=b;b--)if(E[b].fadingOut){if(E[b].material.opacity+=E[b].fadeOutSpeed,0>=E[b].material.opacity){c=
E[b];f=[];g=null;h=c.geometry.attributes.position.array;for(k=0;10>k;k++)for(;3>f.length;)g=Math.floor(Math.random()*J.length),0>f.indexOf(g)&&f.push(J[g]);for(k=0;k<f.length;k++)h[3*k+0]=f[k][0],h[3*k+1]=f[k][1],h[3*k+2]=f[k][2];c.geometry.attributes.position.needsUpdate=!0;E[b].fadingOut=!1}}else E[b].material.opacity+=E[b].fadeInSpeed,.075<=E[b].material.opacity&&(E[b].fadingOut=!0);w.position.x=.01*-(m.data.mouseX-u/2);w.position.y=.01*(m.data.mouseY-q/2);w.position.z=600;w.lookAt(p.position);
C.rotation.set(Math.radians(.04*(m.data.mouseY-q/4)),Math.radians(.03*(m.data.mouseX-u/2)),0);C.position.setY(.13*q);C.scale.set(N,N,N);r.render(p,w)}window.requestAnimationFrame(d)}function g(b){l({x:b.pageX,y:b.pageY})}function f(b){l({x:b.touches[0].pageX,y:b.touches[0].pageY});document.addEventListener("touchmove",k,!1)}function h(b){document.removeEventListener("touchmove",k,!1);l({x:b.changedTouches[0].pageX,y:b.changedTouches[0].pageY})}function k(b){l({x:b.touches[0].pageX,y:b.touches[0].pageY})}
function l(b){m.data.threeDRunning&&(m.data.mouseX=b.x,m.data.mouseY=b.y,m.data.mouseX=m.data.mouseX>m.data.windowWidth?m.data.windowWidth:m.data.mouseX,m.data.mouseY=m.data.mouseY>m.data.windowHeight?m.data.windowHeight:m.data.mouseY)}var m=this,t=document.getElementsByClassName("splash")[0],u=f_clientWidth(),q=.8*f_clientHeight(),n=f_clientHeight(),r=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),p=new THREE.Scene,w=new THREE.OrthographicCamera(u/-2,u/2,q/2,q/-2,1,1200),v=new THREE.Object3D,y=
null,A=[],x=new Float32Array(3*Math.pow(40,2));new THREE.PointsMaterial;var z=new THREE.BufferGeometry,D=new Float32Array(120),B={minDistance:Math.sqrt(u*u+q*q)/3,limitConnections:!0,maxConnections:3},C=new THREE.Object3D,E=[],G=q/100*5,H=Math.sqrt(Math.pow(G,2)+Math.pow(G,2)),I=new THREE.LineBasicMaterial({color:16777215,linewidth:.8,transparent:!0,opacity:.2}),L=new THREE.LineBasicMaterial({color:16777215,linewidth:1.6,transparent:!0,opacity:.8}),J=[[0,0,2*-G],[0,-G,-G],[-G,0,-G],[0,0,-G],[G,0,
-G],[0,G,-G],[0,2*-G,0],[2*G,0,0],[0,2*G,0],[2*-G,0,0],[-G,-G,0],[0,-G,0],[G,-G,0],[-G,0,0],[0,0,0],[G,0,0],[-G,G,0],[0,G,0],[G,G,0]],K=[[-G,-G,0],[-G,0,0],[-G,G,0],[0,0,0],[G,G,0],[G,0,0],[G,-G,0]],M=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.4}),P=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.8}),N=1;m.data.threeDRunning=!1;m.data.mouseX=u/2;m.data.mouseY=q/2;w.updateProjectionMatrix();w.position.z=600;w.lookAt(p.position);w.zoom=2;p.add(w);r.setPixelRatio(window.devicePixelRatio);
r.setSize(u,q);t.appendChild(r.domElement);(function(){for(var b=new THREE.BufferGeometry,c=0;40>c;c++){var d=Math.random()*q*1-.5*q,f=200*Math.random()-100;D[3*c+0]=Math.random()*u*1-.5*u;D[3*c+1]=d;D[3*c+2]=f;A.push({velocity:new THREE.Vector3(-.1+.2*Math.random(),-.1+.2*Math.random(),-.1+.2*Math.random()),numConnections:0})}z.setDrawRange(0,0);z.addAttribute("position",(new THREE.BufferAttribute(D,3)).setDynamic(!0));b.addAttribute("position",(new THREE.BufferAttribute(x,3)).setDynamic(!0));b.computeBoundingSphere();
b.setDrawRange(0,0);y=new THREE.LineSegments(b,I);v.add(y)})();v.position.set(0,0,-200);p.add(v);(function(){for(var c=new THREE.BufferGeometry,d=new THREE.BufferGeometry,f=new Float32Array(3*Math.pow(J.length,2)),g=new Float32Array(3*Math.pow(K.length,2)),h=[],k=[],l=[],m=[],n=[],p=null,r=!1,q=0;q<K.length;q++)K[q+1]&&m.push([K[q],K[q+1]]);for(q=0;q<J.length;q++)for(p=0;p<J.length;p++)q!==p&&h.push([J[q],J[p]]);for(q=0;q<h.length;q++){r=!1;for(p=0;p<k.length;p++)if(b(h[q],k[p])){r=!0;break}for(p=
0;p<m.length;p++)if(b(h[q],m[p])){r=!0;break}var p=h[q][0],t=h[q][1],p=Math.sqrt(Math.pow(t[0]-p[0],2)+Math.pow(t[1]-p[1],2)+Math.pow(t[2]-p[2],2));if(p>G&&0===p%G||p>H&&0===p%H)r=!0;r||k.push([h[q][0],h[q][1]])}for(q=0;q<k.length;q++)l.push(k[q][0],k[q][1]);for(q=0;q<l.length;q++)f[3*q+0]=l[q][0],f[3*q+1]=l[q][1],f[3*q+2]=l[q][2];for(q=0;q<m.length;q++)n.push(m[q][0],m[q][1]);for(q=0;q<n.length;q++)g[3*q+0]=n[q][0],g[3*q+1]=n[q][1],g[3*q+2]=n[q][2];r=null;h=new THREE.Geometry;k=new THREE.Matrix4;
for(q=0;q<J.length;q++){r=!1;for(p=0;p<K.length;p++)if(l=J[q],m=K[p],l=l[0]===m[0]&&l[1]===m[1]&&l[2]===m[2]?!0:!1,l){r=!0;break}r||(r=new THREE.SphereGeometry(G/25,8,6),r.applyMatrix(k.makeTranslation(J[q][0],J[q][1],J[q][2])),h.merge(r))}p=null;r=new THREE.Geometry;for(q=0;q<K.length;q++)p=new THREE.SphereGeometry(G/20,8,6),p.applyMatrix(k.makeTranslation(K[q][0],K[q][1],K[q][2])),r.merge(p);c.addAttribute("position",new THREE.BufferAttribute(f,3));d.addAttribute("position",new THREE.BufferAttribute(g,
3));h=(new THREE.BufferGeometry).fromGeometry(h);r=(new THREE.BufferGeometry).fromGeometry(r);c=new THREE.LineSegments(c,I);d=new THREE.LineSegments(d,L);f=new THREE.Mesh(h,M);g=new THREE.Mesh(r,P);c.geometry.setDrawRange(0,Math.pow(J.length,2));d.geometry.setDrawRange(0,Math.pow(K.length,2));f.geometry.setDrawRange(0,h.attributes.position.array.length);g.geometry.setDrawRange(0,r.attributes.position.array.length);C.add(c);C.add(d);C.add(f);C.add(g)})();(function(){for(var b=null,c=null,d=null,f=
[],g=c=b=null,h=0;10>h;h++){c=new THREE.Color(Math.random(),Math.random(),Math.random());d=Math.random()/500;b=new THREE.Geometry;for(f=[];3>f.length;)g=Math.floor(Math.random()*J.length),0>f.indexOf(g)&&(f.push(g),b.vertices.push(new THREE.Vector3(J[g][0],J[g][1],J[g][2])));b.faces.push(new THREE.Face3(0,1,2));b.faces[0].color=c;b=(new THREE.BufferGeometry).fromGeometry(b);c=new THREE.MeshBasicMaterial({transparent:!0,opacity:0,blending:THREE.AdditiveBlending,vertexColors:THREE.VertexColors});b=
new THREE.Mesh(b,c);b.material.side=THREE.DoubleSide;b.fadeInSpeed=d;b.fadeOutSpeed=-d;b.fadingOut=!1;E.push(b);C.add(b)}})();p.add(C);"ontouchstart"in window||navigator.msMaxTouchPoints?(document.addEventListener("touchstart",f,!1),document.addEventListener("touchend",h,!1)):document.addEventListener("mousemove",g,!1);window.addEventListener("resize",function(){c();setTimeout(function(){var b=0;1E3>m.data.windowWidth&&(b=(m.data.windowWidth-m.data.googleMap.getDiv().parentNode.getElementsByClassName("info")[0].offsetWidth)/
2-(m.data.windowWidth/2-m.data.googleMap.getDiv().parentNode.getElementsByClassName("info")[0].offsetWidth));window.MNDMPS.map.center(window.MNDMPS.map.data.googleMap,window.MNDMPS.map.data.googleMapLatLng,b,0)},0)},!1);document.addEventListener("visibilitychange",function(){document.hidden?m.data.threeDRunning=!1:window.MNDMPS.App.processScroll(f_scrollTop(),f_scrollLeft())},!1);c();d()}};window.MNDMPS=window.MNDMPS||{};
window.MNDMPS.App={data:{},processScroll:function(b,c){window.MNDMPS.threeD.data.threeDRunning&&this.refreshMousePositionOnScroll(b,c);b>.5*this.data.windowHeight-this.data.menuBar.offsetHeight?(this.data.menuBar.classList.add("scrolled"),window.MNDMPS.threeD.data.threeDRunning=!1):(this.data.menuBar.classList.remove("scrolled"),window.MNDMPS.threeD.data.threeDRunning=!0)},refreshMousePositionOnScroll:function(b,c){this.data.lastScrolledLeft=this.data.lastScrolledLeft||0;this.data.lastScrolledTop=
this.data.lastScrolledTop||0;this.data.lastScrolledLeft!==c&&(this.data.mouseX-=this.data.lastScrolledLeft,this.data.lastScrolledLeft=c,this.data.mouseX+=this.data.lastScrolledLeft);this.data.lastScrolledTop!=b&&(this.data.mouseY-=this.data.lastScrolledTop,this.data.lastScrolledTop=b,this.data.mouseY+=this.data.lastScrolledTop);this.data.mouseX=this.data.mouseX>this.data.windowWidth?this.data.windowWidth:this.data.mouseX;this.data.mouseY=this.data.mouseY>this.data.windowHeight?this.data.windowHeight:
this.data.mouseY},watchScroll:function(){document.addEventListener("scroll",function(b){window.MNDMPS.App.processScroll(f_scrollTop(),f_scrollLeft())},!1)},appendSVGSplash:function(){var b=document.getElementsByClassName("splash")[0],c=document.createElement("div"),d=document.createElement("div");d.classList.add("svg-logo");d.innerHTML='<svg viewBox="0 0 130 130"><style type="text/css">.st0{fill: #ffffff; stroke-width: 0;}.st1{fill: none; stroke: #ffffff; stroke-width: 0.1;}.st2{fill: none; stroke: #ffffff; stroke-width: 0.5;}</style><g class="polygons"><polygon points="77,89 43.6,77.9 75,35"/><polygon points="85,45 65,35 35,55"/><polygon points="55,55 35,35 65,5"/><polygon points="77.9,43.6 65,5 95,35"/><polygon points="53,41 65,5 90.7,47.9"/><polygon points="78.3,61.7 95,35 125,65"/><polygon points="55,75 35,35 83,59"/><polygon points="53,41 5,65 35,35"/><polygon points="47.9,39.3 5,65 47,71"/><polygon points="50,50 65,65 95,35"/><polygon points="80,80 35,65 95,50"/><polygon points="85,85 35,95 47,59"/><polygon points="65,125 47,71 83,89"/><polygon points="86.4,69.3 125,65 95,80"/><polygon points="89,47 125,65 95,95"/><polygon points="95,50 95,95 72.5,42.5"/><polygon points="95,95 85,45 65,93.5"/><polygon points="35,95 72.3,76.3 65,125"/><polygon points="35,75 45,45 5,65"/><polygon points="65,125 95,95 45,85"/><polygon points="35,95 5,65 55,55"/></g><g><line class="st1" x1="5" y1="65" x2="35" y2="35"/><line class="st1" x1="35" y1="35" x2="65" y2="5"/><line class="st1" x1="65" y1="5" x2="95" y2="35"/><line class="st1" x1="95" y1="35" x2="125" y2="65"/><line class="st1" x1="125" y1="65" x2="95" y2="95"/><line class="st1" x1="95" y1="95" x2="65" y2="125"/><line class="st1" x1="65" y1="125" x2="35" y2="95"/><line class="st1" x1="35" y1="95" x2="5" y2="65"/><line class="st1" x1="5" y1="65" x2="35" y2="65"/><line class="st1" x1="35" y1="65" x2="65" y2="65"/><line class="st1" x1="65" y1="65" x2="95" y2="65"/><line class="st1" x1="95" y1="65" x2="125" y2="65"/><line class="st1" x1="95" y1="65" x2="65" y2="95"/><line class="st1" x1="65" y1="95" x2="95" y2="95"/><line class="st1" x1="65" y1="95" x2="65" y2="125"/><line class="st1" x1="65" y1="95" x2="35" y2="95"/><line class="st1" x1="35" y1="65" x2="65" y2="95"/><line class="st1" x1="35" y1="95" x2="65" y2="65"/><line class="st1" x1="65" y1="65" x2="95" y2="95"/><line class="st1" x1="35" y1="65" x2="65" y2="35"/><line class="st1" x1="65" y1="35" x2="95" y2="65"/><line class="st1" x1="65" y1="35" x2="35" y2="35"/><line class="st1" x1="65" y1="35" x2="65" y2="5"/><line class="st1" x1="65" y1="35" x2="95" y2="35"/><line class="st1" x1="95" y1="65" x2="65" y2="5"/><line class="st1" x1="65" y1="5" x2="35" y2="65"/><line class="st1" x1="35" y1="65" x2="65" y2="125"/><line class="st1" x1="65" y1="125" x2="95" y2="65"/><line class="st1" x1="65" y1="95" x2="125" y2="65"/><line class="st1" x1="125" y1="65" x2="65" y2="35"/><line class="st1" x1="65" y1="35" x2="5" y2="65"/><line class="st1" x1="5" y1="65" x2="65" y2="95"/><line class="st1" x1="65" y1="35" x2="35" y2="95"/><line class="st1" x1="65" y1="35" x2="95" y2="95"/><line class="st1" x1="65" y1="95" x2="35" y2="35"/><line class="st1" x1="95" y1="35" x2="65" y2="95"/><line class="st1" x1="65" y1="65" x2="65" y2="35"/><line class="st1" x1="65" y1="65" x2="65" y2="95"/><line class="st1" x1="35" y1="65" x2="95" y2="35"/><line class="st1" x1="35" y1="65" x2="95" y2="95"/><line class="st1" x1="5" y1="65" x2="95" y2="35"/><line class="st1" x1="5" y1="65" x2="95" y2="95"/><line class="st1" x1="65" y1="125" x2="35" y2="35"/><line class="st1" x1="95" y1="35" x2="65" y2="125"/><line class="st1" x1="125" y1="65" x2="35" y2="35"/><line class="st1" x1="125" y1="65" x2="35" y2="95"/><line class="st1" x1="65" y1="5" x2="35" y2="95"/><line class="st1" x1="65" y1="5" x2="95" y2="95"/><line class="st1" x1="95" y1="65" x2="35" y2="35"/><line class="st1" x1="95" y1="65" x2="35" y2="95"/><circle class="st0" cx="65" cy="35" r="1"/><circle class="st0" cx="65" cy="5" r="1"/><circle class="st0" cx="65" cy="95" r="1"/><circle class="st0" cx="65" cy="125" r="1"/><circle class="st0" cx="125" cy="65" r="1"/><circle class="st0" cx="5" cy="65" r="1"/></g><g><line class="st2" x1="35" y1="95" x2="35" y2="65"/><line class="st2" x1="35" y1="65" x2="35" y2="35"/><line class="st2" x1="35" y1="35" x2="65" y2="65"/><line class="st2" x1="65" y1="65" x2="95" y2="35"/><line class="st2" x1="95" y1="35" x2="95" y2="65"/><line class="st2" x1="95" y1="65" x2="95" y2="95"/><circle class="st0" cx="65" cy="65" r="1.5"/><circle class="st0" cx="35" cy="35" r="1.5"/><circle class="st0" cx="35" cy="65" r="1.5"/><circle class="st0" cx="35" cy="95" r="1.5"/><circle class="st0" cx="95" cy="35" r="1.5"/><circle class="st0" cx="95" cy="65" r="1.5"/><circle class="st0" cx="95" cy="95" r="1.5"/></g></svg>';
c.appendChild(d);c.classList.add("svg-splash");b.appendChild(c)},initSlick:function(){$(".slider-container").slick({slidesToShow:1,slidesToScroll:1,cssEase:"ease-in-out",infinite:!1,draggable:!1,dots:!0,easing:"easeInOutQuart",mobileFirst:!0,lazyLoad:"progressive",speed:200,zIndex:1,arrows:!1,responsive:[{breakpoint:559,settings:{arrows:!0}}]})},initPlatformGraphs:function(){for(var b=window.D3GRPH._data.platformGraphs,c=document.getElementsByClassName("graph"),d=c[0],d={width:d.offsetWidth,height:d.offsetHeight},
g=0;g<b.length;g++)window.D3GRPH.buildGraph({node:c[g],graph:b[g],size:d})},initHomepageGraphs:function(){for(var b=window.D3GRPH._data.homepageGraphs,c=document.getElementsByClassName("graph"),d=c[0],d={width:d.children[0].offsetWidth,height:d.children[0].offsetHeight},g=0;g<b.length;g++)window.D3GRPH.buildGraph({node:c[g].children[0],graph:b[g],size:d})},initPrism:function(){function b(b){var c=b.value,c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"\n";$(b).next().children(0)[0].innerHTML=
c;Prism.highlightAll()}function c(b){b.addEventListener("scroll",function(b){$(this).next()[0].scrollTop=this.scrollTop},!1)}for(var d=document.getElementsByClassName("code-input"),g=0;g<d.length;g++)b(d[g]),c(d[g])},initStack:function(){function b(b){for(var g=c.techDescription.children,f=0;f<g.length;f++)g[f].getAttribute("data-name")!==b?g[f].classList.remove("active"):(g[f].classList.add("active"),c.techDescription.style.height=g[f].offsetHeight+"px")}var c=this.data;c.techStack=document.getElementsByClassName("tech-stack")[0];
c.techDescription=c.techStack.getElementsByClassName("description")[0];c.techTabs=c.techStack.getElementsByClassName("tab");c.techStack.addEventListener("click",function(d){if(d=getParentElement(d.target,"tab")){for(var g=d.getAttribute("data-target"),f=0;f<c.techTabs.length;f++)c.techTabs[f].classList.remove("active");d.classList.add("active");b(g)}},!1);b("graph")},initJobs:function(){function b(b){b=parseInt(b,10);return(999<b?Math.floor(b/1E3):b)+"K"}function c(c){var d=document.createElement("div");
d.classList.add("job");var g="<h3>"+c.title+'</h3>                <div class="text-block columns">                    <p>'+c.description.replace(/[0-9]+\.[^.]*\.(?!\s*[0-9])/g,"$&<br>").replace(/[0-9]+\./g,"<br>$&").replace(/\*/g,"<br>")+"</p>                </div>                <ul>                    <li>Updated on: ",l,m=c.updated_at,m=new Date(m);l=m.getDate();var t=m.getMonth(),m=m.getFullYear();l=newDate=l+" "+"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[t]+" "+m;d.innerHTML=
g+l+"</li>                    <li>Remote: "+(c.remote_ok?"Yes":"No")+'</li>                    <li>Type: <span class="capitalise">'+c.job_type+"</span></li>                    <li>Compensation: &pound;"+b(c.salary_min)+" \u2014 &pound;"+b(c.salary_max)+"</li>                    <li>Equity: "+c.equity_min+"% \u2014 "+c.equity_max+'%</li>                </ul>                <div class="bottomLinks">                    <a href="mailto:recruitment@mindmaps.io">Apply</a> or <a target="_blank" rel="nofollow" href="'+
c.angellist_url+'">Check on AngelList</a>                </div>';return d}var d=this.data;new DOMParser;var g=document.getElementsByClassName("loading")[0];d.jobsBlock=document.getElementById("section-jobs").children[0];window.MNDMPS.ajax.getAngelJobs().then(function(b){b=JSON.parse(b);d.jobsBlock.removeChild(g);for(var h=0;h<b.jobs.length;h++)d.jobsBlock.appendChild(c(b.jobs[h]))},function(b){console.log(b)})},initPlatform:function(){function b(b){if(b=b.target.getAttribute("data-target")){for(var c=
this.children,d=this.nextElementSibling.children,f=0;f<d.length;f++)d[f].classList.remove("active"),d[f].getAttribute("data-type")===b&&d[f].classList.add("active");for(f=0;f<c.length;f++)c[f].classList.remove("active"),c[f].getAttribute("data-target")===b&&c[f].classList.add("active")}}function c(b){var c=this;c.style.transform="translateZ(0)";setTimeout(function(){c.style.transform="scale(1)"},0)}for(var d=document.getElementsByClassName("example"),g=null,f=0;f<d.length;f++){d[f].children[0].addEventListener("click",
b,!1);d[f].children[0].children[0].classList.add("active");d[f].children[1].children[0].classList.add("active");for(var g=d[f].children[1].getElementsByClassName("code-output"),h=0;h<g.length;h++)g[h].addEventListener("scroll",c,!1)}},init:function(){this.data.windowHeight=f_clientHeight();this.data.windowWidth=f_clientWidth();this.data.menuBar=document.getElementsByClassName("nav")[0];document.getElementsByClassName("splash").length&&(webGLAvailable()?window.MNDMPS.threeD.init():this.appendSVGSplash());
vanillaSmoothScroller.bind({selector:".scrollTrigger",offset:function(){return window.MNDMPS.App.data.menuBar.offsetHeight}});document.getElementById("graql-slider")&&(this.initSlick(),this.initHomepageGraphs(),this.initPrism());document.getElementById("section-jobs")&&this.initJobs();document.getElementById("section-platform")&&this.initStack();document.getElementsByClassName("splash").length?this.watchScroll():this.data.menuBar.classList.add("white");document.getElementById("section-team")&&atvImg();
document.getElementsByClassName("modal-underlay").length&&window.MNDMPS.modal.init();document.getElementsByClassName("google-map")[0]&&google.maps.event.addDomListener(window,"load",window.MNDMPS.map.load);document.getElementById("section-platform-full")&&(this.initPlatform(),this.initPrism(),this.initPlatformGraphs());var b=document.getElementsByClassName("getMindmapsx");if(b.length)for(var c=0;c<b.length;c++)b[c].addEventListener("click",window.MNDMPS.modal.open,!1)}};window.D3GRPH.init();window.MNDMPS.App.init();

(function(b,c){"object"===typeof module&&"object"===typeof module.exports?module.exports=b.document?c(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return c(b)}:c(b)})("undefined"!==typeof window?window:this,function(b,c){function d(b){var c=!!b&&"length"in b&&b.length,f=E.type(b);return"function"===f||E.isWindow(b)?!1:"array"===f||0===c||"number"===typeof c&&0<c&&c-1 in b}function g(b,c,f){if(E.isFunction(c))return E.grep(b,function(b,h){return!!c.call(b,
h,b)!==f});if(c.nodeType)return E.grep(b,function(b){return b===c!==f});if("string"===typeof c){if(Na.test(c))return E.filter(c,b,f);c=E.filter(c,b)}return E.grep(b,function(b){return-1<Ba.call(c,b)!==f})}function f(b,c){for(;(b=b[c])&&1!==b.nodeType;);return b}function h(b){var c={};E.each(b.match(Wa)||[],function(b,f){c[f]=!0});return c}function k(){ba.removeEventListener("DOMContentLoaded",k);b.removeEventListener("load",k);E.ready()}function l(){this.expando=E.expando+l.uid++}function m(b,c,f){if(void 0===
f&&1===b.nodeType)if(f="data-"+c.replace(ha,"-$&").toLowerCase(),f=b.getAttribute(f),"string"===typeof f){try{f="true"===f?!0:"false"===f?!1:"null"===f?null:+f+""===f?+f:jb.test(f)?E.parseJSON(f):f}catch(h){}ja.set(b,c,f)}else f=void 0;return f}function p(b,c,f,h){var d,g=1,k=20,l=h?function(){return h.cur()}:function(){return E.css(b,c,"")},m=l(),n=f&&f[3]||(E.cssNumber[c]?"":"px"),r=(E.cssNumber[c]||"px"!==n&&+m)&&Sa.exec(E.css(b,c));if(r&&r[3]!==n){n=n||r[3];f=f||[];r=+m||1;do g=g||".5",r/=g,E.style(b,
c,r+n);while(g!==(g=l()/m)&&1!==g&&--k)}f&&(r=+r||+m||0,d=f[1]?r+(f[1]+1)*f[2]:+f[2],h&&(h.unit=n,h.start=r,h.end=d));return d}function t(b,c){var f="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName(c||"*"):"undefined"!==typeof b.querySelectorAll?b.querySelectorAll(c||"*"):[];return void 0===c||c&&E.nodeName(b,c)?E.merge([b],f):f}function u(b,c){for(var f=0,h=b.length;f<h;f++)O.set(b[f],"globalEval",!c||O.get(c[f],"globalEval"))}function n(b,c,f,h,d){for(var g,k,l,m=c.createDocumentFragment(),
n=[],r=0,q=b.length;r<q;r++)if((g=b[r])||0===g)if("object"===E.type(g))E.merge(n,g.nodeType?[g]:g);else if(Ta.test(g)){k=k||m.appendChild(c.createElement("div"));l=(Ya.exec(g)||["",""])[1].toLowerCase();l=Ha[l]||Ha._default;k.innerHTML=l[1]+E.htmlPrefilter(g)+l[2];for(l=l[0];l--;)k=k.lastChild;E.merge(n,k.childNodes);k=m.firstChild;k.textContent=""}else n.push(c.createTextNode(g));m.textContent="";for(r=0;g=n[r++];)if(h&&-1<E.inArray(g,h))d&&d.push(g);else if(b=E.contains(g.ownerDocument,g),k=t(m.appendChild(g),
"script"),b&&u(k),f)for(l=0;g=k[l++];)Oa.test(g.type||"")&&f.push(g);return m}function q(){return!0}function r(){return!1}function w(){try{return ba.activeElement}catch(b){}}function v(b,c,f,h,g,d){var k,l;if("object"===typeof c){"string"!==typeof f&&(h=h||f,f=void 0);for(l in c)v(b,l,f,h,c[l],d);return b}null==h&&null==g?(g=f,h=f=void 0):null==g&&("string"===typeof f?(g=h,h=void 0):(g=h,h=f,f=void 0));if(!1===g)g=r;else if(!g)return b;1===d&&(k=g,g=function(b){E().off(b);return k.apply(this,arguments)},
g.guid=k.guid||(k.guid=E.guid++));return b.each(function(){E.event.add(this,c,g,h,f)})}function y(b,c){return E.nodeName(b,"table")&&E.nodeName(11!==c.nodeType?c:c.firstChild,"tr")?b.getElementsByTagName("tbody")[0]||b.appendChild(b.ownerDocument.createElement("tbody")):b}function A(b){b.type=(null!==b.getAttribute("type"))+"/"+b.type;return b}function x(b){var c=Ec.exec(b.type);c?b.type=c[1]:b.removeAttribute("type");return b}function z(b,c){var f,h,g,d;if(1===c.nodeType){if(O.hasData(b)&&(d=O.access(b),
f=O.set(c,d),d=d.events))for(g in delete f.handle,f.events={},d)for(f=0,h=d[g].length;f<h;f++)E.event.add(c,g,d[g][f]);ja.hasData(b)&&(g=ja.access(b),g=E.extend({},g),ja.set(c,g))}}function C(b,c,f,h){c=ra.apply([],c);var g,d,k,l,m=0,r=b.length,q=r-1,p=c[0],u=E.isFunction(p);if(u||1<r&&"string"===typeof p&&!ga.checkClone&&ad.test(p))return b.each(function(g){var d=b.eq(g);u&&(c[0]=p.call(this,g,d.html()));C(d,c,f,h)});if(r&&(g=n(c,b[0].ownerDocument,!1,b,h),d=g.firstChild,1===g.childNodes.length&&
(g=d),d||h)){d=E.map(t(g,"script"),A);for(k=d.length;m<r;m++)l=g,m!==q&&(l=E.clone(l,!0,!0),k&&E.merge(d,t(l,"script"))),f.call(b[m],l,m);if(k)for(g=d[d.length-1].ownerDocument,E.map(d,x),m=0;m<k;m++)l=d[m],Oa.test(l.type||"")&&!O.access(l,"globalEval")&&E.contains(g,l)&&(l.src?E._evalUrl&&E._evalUrl(l.src):E.globalEval(l.textContent.replace(cd,"")))}return b}function D(b,c,f){for(var h=c?E.filter(c,b):b,g=0;null!=(c=h[g]);g++)f||1!==c.nodeType||E.cleanData(t(c)),c.parentNode&&(f&&E.contains(c.ownerDocument,
c)&&u(t(c,"script")),c.parentNode.removeChild(c));return b}function B(b,c){var f=E(c.createElement(b)).appendTo(c.body),h=E.css(f[0],"display");f.detach();return h}function F(b){var c=ba,f=zd[b];f||(f=B(b,c),"none"!==f&&f||(Fc=(Fc||E("<iframe frameborder='0' width='0' height='0'/>")).appendTo(c.documentElement),c=Fc[0].contentDocument,c.write(),c.close(),f=B(b,c),Fc.detach()),zd[b]=f);return f}function H(b,c,f){var h,g,d=b.style;g=(f=f||Gc(b))?f.getPropertyValue(c)||f[c]:void 0;""!==g&&void 0!==g||
E.contains(b.ownerDocument,b)||(g=E.style(b,c));f&&!ga.pixelMarginRight()&&Hc.test(g)&&Ad.test(c)&&(b=d.width,c=d.minWidth,h=d.maxWidth,d.minWidth=d.maxWidth=d.width=g,g=f.width,d.width=b,d.minWidth=c,d.maxWidth=h);return void 0!==g?g+"":g}function I(b,c){return{get:function(){if(b())delete this.get;else return(this.get=c).apply(this,arguments)}}}function G(b){if(b in Bd)return b;for(var c=b[0].toUpperCase()+b.slice(1),f=Cd.length;f--;)if(b=Cd[f]+c,b in Bd)return b}function M(b,c,f){return(b=Sa.exec(c))?
Math.max(0,b[2]-(f||0))+(b[3]||"px"):c}function J(b,c,f,h,g){c=f===(h?"border":"content")?4:"width"===c?1:0;for(var d=0;4>c;c+=2)"margin"===f&&(d+=E.css(b,f+cb[c],!0,g)),h?("content"===f&&(d-=E.css(b,"padding"+cb[c],!0,g)),"margin"!==f&&(d-=E.css(b,"border"+cb[c]+"Width",!0,g))):(d+=E.css(b,"padding"+cb[c],!0,g),"padding"!==f&&(d+=E.css(b,"border"+cb[c]+"Width",!0,g)));return d}function K(c,f,h){var g=!0,d="width"===f?c.offsetWidth:c.offsetHeight,k=Gc(c),l="border-box"===E.css(c,"boxSizing",!1,k);
ba.msFullscreenElement&&b.top!==b&&c.getClientRects().length&&(d=Math.round(100*c.getBoundingClientRect()[f]));if(0>=d||null==d){d=H(c,f,k);if(0>d||null==d)d=c.style[f];if(Hc.test(d))return d;g=l&&(ga.boxSizingReliable()||d===c.style[f]);d=parseFloat(d)||0}return d+J(c,f,h||(l?"border":"content"),g,k)+"px"}function L(b,c){for(var f,h,g,d=[],k=0,l=b.length;k<l;k++)h=b[k],h.style&&(d[k]=O.get(h,"olddisplay"),f=h.style.display,c?(d[k]||"none"!==f||(h.style.display=""),""===h.style.display&&gb(h)&&(d[k]=
O.access(h,"olddisplay",F(h.nodeName)))):(g=gb(h),"none"===f&&g||O.set(h,"olddisplay",g?f:E.css(h,"display"))));for(k=0;k<l;k++)h=b[k],!h.style||c&&"none"!==h.style.display&&""!==h.style.display||(h.style.display=c?d[k]||"":"none");return b}function N(b,c,f,h,g){return new N.prototype.init(b,c,f,h,g)}function Q(){b.setTimeout(function(){Fb=void 0});return Fb=E.now()}function S(b,c){var f,h=0,g={height:b};for(c=c?1:0;4>h;h+=2-c)f=cb[h],g["margin"+f]=g["padding"+f]=b;c&&(g.opacity=g.width=b);return g}
function U(b,c,f){for(var h,g=(W.tweeners[c]||[]).concat(W.tweeners["*"]),d=0,k=g.length;d<k;d++)if(h=g[d].call(f,c,b))return h}function V(b,c){var f,h,g,d,k;for(f in b)if(h=E.camelCase(f),g=c[h],d=b[f],E.isArray(d)&&(g=d[1],d=b[f]=d[0]),f!==h&&(b[h]=d,delete b[f]),(k=E.cssHooks[h])&&"expand"in k)for(f in d=k.expand(d),delete b[h],d)f in b||(b[f]=d[f],c[f]=g);else c[h]=g}function W(b,c,f){var h,g=0,d=W.prefilters.length,k=E.Deferred().always(function(){delete l.elem}),l=function(){if(h)return!1;for(var c=
Fb||Q(),c=Math.max(0,m.startTime+m.duration-c),f=1-(c/m.duration||0),g=0,d=m.tweens.length;g<d;g++)m.tweens[g].run(f);k.notifyWith(b,[m,f,c]);if(1>f&&d)return c;k.resolveWith(b,[m]);return!1},m=k.promise({elem:b,props:E.extend({},c),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},f),originalProperties:c,originalOptions:f,startTime:Fb||Q(),duration:f.duration,tweens:[],createTween:function(c,f){var h=E.Tween(b,m.opts,c,f,m.opts.specialEasing[c]||m.opts.easing);m.tweens.push(h);return h},
stop:function(c){var f=0,g=c?m.tweens.length:0;if(h)return this;for(h=!0;f<g;f++)m.tweens[f].run(1);c?(k.notifyWith(b,[m,1,0]),k.resolveWith(b,[m,c])):k.rejectWith(b,[m,c]);return this}});f=m.props;for(V(f,m.opts.specialEasing);g<d;g++)if(c=W.prefilters[g].call(m,b,f,m.opts))return E.isFunction(c.stop)&&(E._queueHooks(m.elem,m.opts.queue).stop=E.proxy(c.stop,c)),c;E.map(f,U,m);E.isFunction(m.opts.start)&&m.opts.start.call(b,m);E.fx.timer(E.extend(l,{elem:b,anim:m,queue:m.opts.queue}));return m.progress(m.opts.progress).done(m.opts.done,
m.opts.complete).fail(m.opts.fail).always(m.opts.always)}function X(b){return b.getAttribute&&b.getAttribute("class")||""}function ea(b){return function(c,f){"string"!==typeof c&&(f=c,c="*");var h,g=0,d=c.toLowerCase().match(Wa)||[];if(E.isFunction(f))for(;h=d[g++];)"+"===h[0]?(h=h.slice(1)||"*",(b[h]=b[h]||[]).unshift(f)):(b[h]=b[h]||[]).push(f)}}function da(b,c,f,h){function g(l){var m;d[l]=!0;E.each(b[l]||[],function(b,l){var n=l(c,f,h);if("string"===typeof n&&!k&&!d[n])return c.dataTypes.unshift(n),
g(n),!1;if(k)return!(m=n)});return m}var d={},k=b===Rb;return g(c.dataTypes[0])||!d["*"]&&g("*")}function R(b,c){var f,h,g=E.ajaxSettings.flatOptions||{};for(f in c)void 0!==c[f]&&((g[f]?b:h||(h={}))[f]=c[f]);h&&E.extend(!0,b,h);return b}function Y(b,c,f,h){var g;if(E.isArray(c))E.each(c,function(c,g){f||Dd.test(b)?h(b,g):Y(b+"["+("object"===typeof g&&null!=g?c:"")+"]",g,f,h)});else if(f||"object"!==E.type(c))h(b,c);else for(g in c)Y(b+"["+g+"]",c[g],f,h)}function Z(b){return E.isWindow(b)?b:9===
b.nodeType&&b.defaultView}var ca=[],ba=b.document,aa=ca.slice,ra=ca.concat,pa=ca.push,Ba=ca.indexOf,wa={},sa=wa.toString,qa=wa.hasOwnProperty,ga={},E=function(b,c){return new E.fn.init(b,c)},Ca=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ta=/^-ms-/,oa=/-([\da-z])/gi,ya=function(b,c){return c.toUpperCase()};E.fn=E.prototype={jquery:"2.2.1",constructor:E,selector:"",length:0,toArray:function(){return aa.call(this)},get:function(b){return null!=b?0>b?this[b+this.length]:this[b]:aa.call(this)},pushStack:function(b){b=
E.merge(this.constructor(),b);b.prevObject=this;b.context=this.context;return b},each:function(b){return E.each(this,b)},map:function(b){return this.pushStack(E.map(this,function(c,f){return b.call(c,f,c)}))},slice:function(){return this.pushStack(aa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var c=this.length;b=+b+(0>b?c:0);return this.pushStack(0<=b&&b<c?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},
push:pa,sort:ca.sort,splice:ca.splice};E.extend=E.fn.extend=function(){var b,c,f,h,g,d=arguments[0]||{},k=1,l=arguments.length,m=!1;"boolean"===typeof d&&(m=d,d=arguments[k]||{},k++);"object"===typeof d||E.isFunction(d)||(d={});k===l&&(d=this,k--);for(;k<l;k++)if(null!=(b=arguments[k]))for(c in b)f=d[c],h=b[c],d!==h&&(m&&h&&(E.isPlainObject(h)||(g=E.isArray(h)))?(g?(g=!1,f=f&&E.isArray(f)?f:[]):f=f&&E.isPlainObject(f)?f:{},d[c]=E.extend(m,f,h)):void 0!==h&&(d[c]=h));return d};E.extend({expando:"jQuery"+
("2.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===E.type(b)},isArray:Array.isArray,isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var c=b&&b.toString();return!E.isArray(b)&&0<=c-parseFloat(c)+1},isPlainObject:function(b){return"object"!==E.type(b)||b.nodeType||E.isWindow(b)||b.constructor&&!qa.call(b.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(b){for(var c in b)return!1;
return!0},type:function(b){return null==b?b+"":"object"===typeof b||"function"===typeof b?wa[sa.call(b)]||"object":typeof b},globalEval:function(b){var c;c=eval;if(b=E.trim(b))1===b.indexOf("use strict")?(c=ba.createElement("script"),c.text=b,ba.head.appendChild(c).parentNode.removeChild(c)):c(b)},camelCase:function(b){return b.replace(ta,"ms-").replace(oa,ya)},nodeName:function(b,c){return b.nodeName&&b.nodeName.toLowerCase()===c.toLowerCase()},each:function(b,c){var f,h=0;if(d(b))for(f=b.length;h<
f&&!1!==c.call(b[h],h,b[h]);h++);else for(h in b)if(!1===c.call(b[h],h,b[h]))break;return b},trim:function(b){return null==b?"":(b+"").replace(Ca,"")},makeArray:function(b,c){var f=c||[];null!=b&&(d(Object(b))?E.merge(f,"string"===typeof b?[b]:b):pa.call(f,b));return f},inArray:function(b,c,f){return null==c?-1:Ba.call(c,b,f)},merge:function(b,c){for(var f=+c.length,h=0,g=b.length;h<f;h++)b[g++]=c[h];b.length=g;return b},grep:function(b,c,f){for(var h=[],g=0,d=b.length,k=!f;g<d;g++)f=!c(b[g],g),f!==
k&&h.push(b[g]);return h},map:function(b,c,f){var h,g,k=0,l=[];if(d(b))for(h=b.length;k<h;k++)g=c(b[k],k,f),null!=g&&l.push(g);else for(k in b)g=c(b[k],k,f),null!=g&&l.push(g);return ra.apply([],l)},guid:1,proxy:function(b,c){var f,h;"string"===typeof c&&(f=b[c],c=b,b=f);if(E.isFunction(b))return h=aa.call(arguments,2),f=function(){return b.apply(c||this,h.concat(aa.call(arguments)))},f.guid=b.guid=b.guid||E.guid++,f},now:Date.now,support:ga});"function"===typeof Symbol&&(E.fn[Symbol.iterator]=ca[Symbol.iterator]);
E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,c){wa["[object "+c+"]"]=c.toLowerCase()});var Pa=function(b){function c(b,f,h,g){var d,k,l,m,n,q=f&&f.ownerDocument,u=f?f.nodeType:9;h=h||[];if("string"!==typeof b||!b||1!==u&&9!==u&&11!==u)return h;if(!g&&((f?f.ownerDocument||f:Ta)!==E&&I(f),f=f||E,M)){if(11!==u&&(m=cd.exec(b)))if(d=m[1])if(9===u)if(k=f.getElementById(d)){if(k.id===d)return h.push(k),h}else return h;else{if(q&&(k=q.getElementById(d))&&
W(f,k)&&k.id===d)return h.push(k),h}else{if(m[2])return Z.apply(h,f.getElementsByTagName(b)),h;if((d=m[3])&&C.getElementsByClassName&&f.getElementsByClassName)return Z.apply(h,f.getElementsByClassName(d)),h}if(!(!C.qsa||Y[b+" "]||K&&K.test(b))){if(1!==u)q=f,n=b;else if("object"!==f.nodeName.toLowerCase()){(l=f.getAttribute("id"))?l=l.replace(qa,"\\$&"):f.setAttribute("id",l=V);m=F(b);d=m.length;for(k=ha.test(l)?"#"+l:"[id='"+l+"']";d--;)m[d]=k+" "+p(m[d]);n=m.join(",");q=sa.test(b)&&r(f.parentNode)||
f}if(n)try{return Z.apply(h,q.querySelectorAll(n)),h}catch(v){}finally{l===V&&f.removeAttribute("id")}}}return H(b.replace(Ab,"$1"),f,h,g)}function f(){function b(f,h){c.push(f+" ")>D.cacheLength&&delete b[c.shift()];return b[f+" "]=h}var c=[];return b}function h(b){b[V]=!0;return b}function g(b){var c=E.createElement("div");try{return!!b(c)}catch(f){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function d(b,c){for(var f=b.split("|"),h=f.length;h--;)D.attrHandle[f[h]]=c}function k(b,
c){var f=c&&b,h=f&&1===b.nodeType&&1===c.nodeType&&(~c.sourceIndex||-2147483648)-(~b.sourceIndex||-2147483648);if(h)return h;if(f)for(;f=f.nextSibling;)if(f===c)return-1;return b?1:-1}function l(b){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===b}}function m(b){return function(c){var f=c.nodeName.toLowerCase();return("input"===f||"button"===f)&&c.type===b}}function n(b){return h(function(c){c=+c;return h(function(f,h){for(var g,d=b([],f.length,c),k=d.length;k--;)f[g=d[k]]&&
(f[g]=!(h[g]=f[g]))})})}function r(b){return b&&"undefined"!==typeof b.getElementsByTagName&&b}function q(){}function p(b){for(var c=0,f=b.length,h="";c<f;c++)h+=b[c].value;return h}function u(b,c,f){var h=c.dir,g=f&&"parentNode"===h,d=R++;return c.first?function(c,f,d){for(;c=c[h];)if(1===c.nodeType||g)return b(c,f,d)}:function(c,f,k){var l,m,n=[O,d];if(k)for(;c=c[h];){if((1===c.nodeType||g)&&b(c,f,k))return!0}else for(;c=c[h];)if(1===c.nodeType||g){m=c[V]||(c[V]={});m=m[c.uniqueID]||(m[c.uniqueID]=
{});if((l=m[h])&&l[0]===O&&l[1]===d)return n[2]=l[2];m[h]=n;if(n[2]=b(c,f,k))return!0}}}function v(b){return 1<b.length?function(c,f,h){for(var g=b.length;g--;)if(!b[g](c,f,h))return!1;return!0}:b[0]}function w(b,c,f,h,g){for(var d,k=[],l=0,m=b.length,n=null!=c;l<m;l++)if(d=b[l])if(!f||f(d,h,g))k.push(d),n&&c.push(l);return k}function t(b,f,g,d,k,l){d&&!d[V]&&(d=t(d));k&&!k[V]&&(k=t(k,l));return h(function(h,l,m,n){var r,q,p=[],u=[],v=l.length,t;if(!(t=h)){t=f||"*";for(var y=m.nodeType?[m]:m,A=[],
x=0,C=y.length;x<C;x++)c(t,y[x],A);t=A}t=!b||!h&&f?t:w(t,p,b,m,n);y=g?k||(h?b:v||d)?[]:l:t;g&&g(t,y,m,n);if(d)for(r=w(y,u),d(r,[],m,n),m=r.length;m--;)if(q=r[m])y[u[m]]=!(t[u[m]]=q);if(h){if(k||b){if(k){r=[];for(m=y.length;m--;)(q=y[m])&&r.push(t[m]=q);k(null,y=[],r,n)}for(m=y.length;m--;)(q=y[m])&&-1<(r=k?ca(h,q):p[m])&&(h[r]=!(l[r]=q))}}else y=w(y===l?y.splice(v,y.length):y),k?k(null,l,y,n):Z.apply(l,y)})}function y(b){var c,f,h,g=b.length,d=D.relative[b[0].type];f=d||D.relative[" "];for(var k=
d?1:0,l=u(function(b){return b===c},f,!0),m=u(function(b){return-1<ca(c,b)},f,!0),n=[function(b,f,h){b=!d&&(h||f!==Q)||((c=f).nodeType?l(b,f,h):m(b,f,h));c=null;return b}];k<g;k++)if(f=D.relative[b[k].type])n=[u(v(n),f)];else{f=D.filter[b[k].type].apply(null,b[k].matches);if(f[V]){for(h=++k;h<g&&!D.relative[b[h].type];h++);return t(1<k&&v(n),1<k&&p(b.slice(0,k-1).concat({value:" "===b[k-2].type?"*":""})).replace(Ab,"$1"),f,k<h&&y(b.slice(k,h)),h<g&&y(b=b.slice(h)),h<g&&p(b))}n.push(f)}return v(n)}
function A(b,f){var g=0<f.length,d=0<b.length,k=function(h,k,l,m,n){var r,q,p,u=0,v="0",t=h&&[],y=[],A=Q,x=h||d&&D.find.TAG("*",n),C=O+=null==A?1:Math.random()||.1,z=x.length;for(n&&(Q=k===E||k||n);v!==z&&null!=(r=x[v]);v++){if(d&&r){q=0;k||r.ownerDocument===E||(I(r),l=!M);for(;p=b[q++];)if(p(r,k||E,l)){m.push(r);break}n&&(O=C)}g&&((r=!p&&r)&&u--,h&&t.push(r))}u+=v;if(g&&v!==u){for(q=0;p=f[q++];)p(t,y,k,l);if(h){if(0<u)for(;v--;)t[v]||y[v]||(y[v]=ba.call(m));y=w(y)}Z.apply(m,y);n&&!h&&0<y.length&&
1<u+f.length&&c.uniqueSort(m)}n&&(O=C,Q=A);return t};return g?h(k):k}var x,C,D,z,B,F,L,H,Q,N,G,I,E,J,M,K,U,S,W,V="sizzle"+1*new Date,Ta=b.document,O=0,R=0,X=f(),aa=f(),Y=f(),zb=function(b,c){b===c&&(G=!0);return 0},ea={}.hasOwnProperty,yb=[],ba=yb.pop,da=yb.push,Z=yb.push,ra=yb.slice,ca=function(b,c){for(var f=0,h=b.length;f<h;f++)if(b[f]===c)return f;return-1},ab=RegExp("[\\x20\\t\\r\\n\\f]+","g"),Ab=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),ga=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
pa=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Vb=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),ad=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,ha=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,Ba={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},kd=/^(?:input|select|textarea|button)$/i,wa=/^h\d$/i,ja=
/^[^{]+\{\s*\[native \w/,cd=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,qa=/'|\\/g,ka=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),oa=function(b,c,f){b="0x"+c-65536;return b!==b||f?c:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,b&1023|56320)},Ec=function(){I()};try{Z.apply(yb=ra.call(Ta.childNodes),Ta.childNodes),yb[Ta.childNodes.length].nodeType}catch(dc){Z={apply:yb.length?function(b,c){da.apply(b,ra.call(c))}:function(b,c){for(var f=b.length,
h=0;b[f++]=c[h++];);b.length=f-1}}}C=c.support={};B=c.isXML=function(b){return(b=b&&(b.ownerDocument||b).documentElement)?"HTML"!==b.nodeName:!1};I=c.setDocument=function(b){var c;b=b?b.ownerDocument||b:Ta;if(b===E||9!==b.nodeType||!b.documentElement)return E;E=b;J=E.documentElement;M=!B(E);(c=E.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",Ec,!1):c.attachEvent&&c.attachEvent("onunload",Ec));C.attributes=g(function(b){b.className="i";return!b.getAttribute("className")});
C.getElementsByTagName=g(function(b){b.appendChild(E.createComment(""));return!b.getElementsByTagName("*").length});C.getElementsByClassName=ja.test(E.getElementsByClassName);C.getById=g(function(b){J.appendChild(b).id=V;return!E.getElementsByName||!E.getElementsByName(V).length});C.getById?(D.find.ID=function(b,c){if("undefined"!==typeof c.getElementById&&M){var f=c.getElementById(b);return f?[f]:[]}},D.filter.ID=function(b){var c=b.replace(ka,oa);return function(b){return b.getAttribute("id")===
c}}):(delete D.find.ID,D.filter.ID=function(b){var c=b.replace(ka,oa);return function(b){return(b="undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===c}});D.find.TAG=C.getElementsByTagName?function(b,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(b);if(C.qsa)return c.querySelectorAll(b)}:function(b,c){var f,h=[],g=0,d=c.getElementsByTagName(b);if("*"===b){for(;f=d[g++];)1===f.nodeType&&h.push(f);return h}return d};D.find.CLASS=C.getElementsByClassName&&
function(b,c){if("undefined"!==typeof c.getElementsByClassName&&M)return c.getElementsByClassName(b)};U=[];K=[];if(C.qsa=ja.test(E.querySelectorAll))g(function(b){J.appendChild(b).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||K.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+V+"-]").length||K.push("~=");b.querySelectorAll(":checked").length||K.push(":checked");b.querySelectorAll("a#"+V+"+*").length||K.push(".#.+[+~]")}),g(function(b){var c=E.createElement("input");c.setAttribute("type","hidden");b.appendChild(c).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&K.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");b.querySelectorAll(":enabled").length||K.push(":enabled",":disabled");b.querySelectorAll("*,:x");K.push(",.*:")});(C.matchesSelector=
ja.test(S=J.matches||J.webkitMatchesSelector||J.mozMatchesSelector||J.oMatchesSelector||J.msMatchesSelector))&&g(function(b){C.disconnectedMatch=S.call(b,"div");S.call(b,"[s!='']:x");U.push("!=",":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")});
K=K.length&&new RegExp(K.join("|"));U=U.length&&new RegExp(U.join("|"));W=(c=ja.test(J.compareDocumentPosition))||ja.test(J.contains)?function(b,c){var f=9===b.nodeType?b.documentElement:b,h=c&&c.parentNode;return b===h||!!(h&&1===h.nodeType&&(f.contains?f.contains(h):b.compareDocumentPosition&&b.compareDocumentPosition(h)&16))}:function(b,c){if(c)for(;c=c.parentNode;)if(c===b)return!0;return!1};zb=c?function(b,c){if(b===c)return G=!0,0;var f=!b.compareDocumentPosition-!c.compareDocumentPosition;
if(f)return f;f=(b.ownerDocument||b)===(c.ownerDocument||c)?b.compareDocumentPosition(c):1;return f&1||!C.sortDetached&&c.compareDocumentPosition(b)===f?b===E||b.ownerDocument===Ta&&W(Ta,b)?-1:c===E||c.ownerDocument===Ta&&W(Ta,c)?1:N?ca(N,b)-ca(N,c):0:f&4?-1:1}:function(b,c){if(b===c)return G=!0,0;var f,h=0;f=b.parentNode;var g=c.parentNode,d=[b],l=[c];if(!f||!g)return b===E?-1:c===E?1:f?-1:g?1:N?ca(N,b)-ca(N,c):0;if(f===g)return k(b,c);for(f=b;f=f.parentNode;)d.unshift(f);for(f=c;f=f.parentNode;)l.unshift(f);
for(;d[h]===l[h];)h++;return h?k(d[h],l[h]):d[h]===Ta?-1:l[h]===Ta?1:0};return E};c.matches=function(b,f){return c(b,null,null,f)};c.matchesSelector=function(b,f){(b.ownerDocument||b)!==E&&I(b);f=f.replace(Vb,"='$1']");if(!(!C.matchesSelector||!M||Y[f+" "]||U&&U.test(f)||K&&K.test(f)))try{var h=S.call(b,f);if(h||C.disconnectedMatch||b.document&&11!==b.document.nodeType)return h}catch(g){}return 0<c(f,E,null,[b]).length};c.contains=function(b,c){(b.ownerDocument||b)!==E&&I(b);return W(b,c)};c.attr=
function(b,c){(b.ownerDocument||b)!==E&&I(b);var f=D.attrHandle[c.toLowerCase()],f=f&&ea.call(D.attrHandle,c.toLowerCase())?f(b,c,!M):void 0;return void 0!==f?f:C.attributes||!M?b.getAttribute(c):(f=b.getAttributeNode(c))&&f.specified?f.value:null};c.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};c.uniqueSort=function(b){var c,f=[],h=0,g=0;G=!C.detectDuplicates;N=!C.sortStable&&b.slice(0);b.sort(zb);if(G){for(;c=b[g++];)c===b[g]&&(h=f.push(g));for(;h--;)b.splice(f[h],
1)}N=null;return b};z=c.getText=function(b){var c,f="",h=0;c=b.nodeType;if(!c)for(;c=b[h++];)f+=z(c);else if(1===c||9===c||11===c){if("string"===typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)f+=z(b)}else if(3===c||4===c)return b.nodeValue;return f};D=c.selectors={cacheLength:50,createPseudo:h,match:Ba,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){b[1]=
b[1].replace(ka,oa);b[3]=(b[3]||b[4]||b[5]||"").replace(ka,oa);"~="===b[2]&&(b[3]=" "+b[3]+" ");return b.slice(0,4)},CHILD:function(b){b[1]=b[1].toLowerCase();"nth"===b[1].slice(0,3)?(b[3]||c.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&c.error(b[0]);return b},PSEUDO:function(b){var c,f=!b[6]&&b[2];if(Ba.CHILD.test(b[0]))return null;b[3]?b[2]=b[4]||b[5]||"":f&&ad.test(f)&&(c=F(f,!0))&&(c=f.indexOf(")",f.length-c)-f.length)&&(b[0]=b[0].slice(0,
c),b[2]=f.slice(0,c));return b.slice(0,3)}},filter:{TAG:function(b){var c=b.replace(ka,oa).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===c}},CLASS:function(b){var c=X[b+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"),X(b,function(b){return c.test("string"===typeof b.className&&b.className||"undefined"!==typeof b.getAttribute&&b.getAttribute("class")||"")}))},ATTR:function(b,f,h){return function(g){g=c.attr(g,
b);if(null==g)return"!="===f;if(!f)return!0;g+="";return"="===f?g===h:"!="===f?g!==h:"^="===f?h&&0===g.indexOf(h):"*="===f?h&&-1<g.indexOf(h):"$="===f?h&&g.slice(-h.length)===h:"~="===f?-1<(" "+g.replace(ab," ")+" ").indexOf(h):"|="===f?g===h||g.slice(0,h.length+1)===h+"-":!1}},CHILD:function(b,c,f,h,g){var d="nth"!==b.slice(0,3),k="last"!==b.slice(-4),l="of-type"===c;return 1===h&&0===g?function(b){return!!b.parentNode}:function(c,f,m){var n,r,q,p,u;f=d!==k?"nextSibling":"previousSibling";var v=
c.parentNode,w=l&&c.nodeName.toLowerCase();m=!m&&!l;n=!1;if(v){if(d){for(;f;){for(q=c;q=q[f];)if(l?q.nodeName.toLowerCase()===w:1===q.nodeType)return!1;u=f="only"===b&&!u&&"nextSibling"}return!0}u=[k?v.firstChild:v.lastChild];if(k&&m)for(q=v,r=q[V]||(q[V]={}),r=r[q.uniqueID]||(r[q.uniqueID]={}),n=r[b]||[],n=(p=n[0]===O&&n[1])&&n[2],q=p&&v.childNodes[p];q=++p&&q&&q[f]||(n=p=0)||u.pop();){if(1===q.nodeType&&++n&&q===c){r[b]=[O,p,n];break}}else if(m&&(q=c,r=q[V]||(q[V]={}),r=r[q.uniqueID]||(r[q.uniqueID]=
{}),n=r[b]||[],n=p=n[0]===O&&n[1]),!1===n)for(;(q=++p&&q&&q[f]||(n=p=0)||u.pop())&&((l?q.nodeName.toLowerCase()!==w:1!==q.nodeType)||!++n||(m&&(r=q[V]||(q[V]={}),r=r[q.uniqueID]||(r[q.uniqueID]={}),r[b]=[O,n]),q!==c)););n-=g;return n===h||0===n%h&&0<=n/h}}},PSEUDO:function(b,f){var g,d=D.pseudos[b]||D.setFilters[b.toLowerCase()]||c.error("unsupported pseudo: "+b);return d[V]?d(f):1<d.length?(g=[b,b,"",f],D.setFilters.hasOwnProperty(b.toLowerCase())?h(function(b,c){for(var h,g=d(b,f),k=g.length;k--;)h=
ca(b,g[k]),b[h]=!(c[h]=g[k])}):function(b){return d(b,0,g)}):d}},pseudos:{not:h(function(b){var c=[],f=[],g=L(b.replace(Ab,"$1"));return g[V]?h(function(b,c,f,h){h=g(b,null,h,[]);for(var d=b.length;d--;)if(f=h[d])b[d]=!(c[d]=f)}):function(b,h,d){c[0]=b;g(c,null,d,f);c[0]=null;return!f.pop()}}),has:h(function(b){return function(f){return 0<c(b,f).length}}),contains:h(function(b){b=b.replace(ka,oa);return function(c){return-1<(c.textContent||c.innerText||z(c)).indexOf(b)}}),lang:h(function(b){ha.test(b||
"")||c.error("unsupported lang: "+b);b=b.replace(ka,oa).toLowerCase();return function(c){var f;do if(f=M?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return f=f.toLowerCase(),f===b||0===f.indexOf(b+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(c){var f=b.location&&b.location.hash;return f&&f.slice(1)===c.id},root:function(b){return b===J},focus:function(b){return b===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(b.type||b.href||~b.tabIndex)},enabled:function(b){return!1===
b.disabled},disabled:function(b){return!0===b.disabled},checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===c&&!!b.selected},selected:function(b){b.parentNode&&b.parentNode.selectedIndex;return!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!D.pseudos.empty(b)},header:function(b){return wa.test(b.nodeName)},input:function(b){return kd.test(b.nodeName)},button:function(b){var c=
b.nodeName.toLowerCase();return"input"===c&&"button"===b.type||"button"===c},text:function(b){var c;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(c=b.getAttribute("type"))||"text"===c.toLowerCase())},first:n(function(){return[0]}),last:n(function(b,c){return[c-1]}),eq:n(function(b,c,f){return[0>f?f+c:f]}),even:n(function(b,c){for(var f=0;f<c;f+=2)b.push(f);return b}),odd:n(function(b,c){for(var f=1;f<c;f+=2)b.push(f);return b}),lt:n(function(b,c,f){for(c=0>f?f+c:f;0<=--c;)b.push(c);
return b}),gt:n(function(b,c,f){for(f=0>f?f+c:f;++f<c;)b.push(f);return b})}};D.pseudos.nth=D.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[x]=l(x);for(x in{submit:!0,reset:!0})D.pseudos[x]=m(x);q.prototype=D.filters=D.pseudos;D.setFilters=new q;F=c.tokenize=function(b,f){var h,g,d,k,l,m,n;if(l=aa[b+" "])return f?0:l.slice(0);l=b;m=[];for(n=D.preFilter;l;){if(!h||(g=ga.exec(l)))g&&(l=l.slice(g[0].length)||l),m.push(d=[]);h=!1;if(g=pa.exec(l))h=g.shift(),d.push({value:h,
type:g[0].replace(Ab," ")}),l=l.slice(h.length);for(k in D.filter)!(g=Ba[k].exec(l))||n[k]&&!(g=n[k](g))||(h=g.shift(),d.push({value:h,type:k,matches:g}),l=l.slice(h.length));if(!h)break}return f?l.length:l?c.error(b):aa(b,m).slice(0)};L=c.compile=function(b,c){var f,h=[],g=[],d=Y[b+" "];if(!d){c||(c=F(b));for(f=c.length;f--;)d=y(c[f]),d[V]?h.push(d):g.push(d);d=Y(b,A(g,h));d.selector=b}return d};H=c.select=function(b,c,f,h){var g,d,k,l,m="function"===typeof b&&b,n=!h&&F(b=m.selector||b);f=f||[];
if(1===n.length){d=n[0]=n[0].slice(0);if(2<d.length&&"ID"===(k=d[0]).type&&C.getById&&9===c.nodeType&&M&&D.relative[d[1].type]){c=(D.find.ID(k.matches[0].replace(ka,oa),c)||[])[0];if(!c)return f;m&&(c=c.parentNode);b=b.slice(d.shift().value.length)}for(g=Ba.needsContext.test(b)?0:d.length;g--;){k=d[g];if(D.relative[l=k.type])break;if(l=D.find[l])if(h=l(k.matches[0].replace(ka,oa),sa.test(d[0].type)&&r(c.parentNode)||c)){d.splice(g,1);b=h.length&&p(d);if(!b)return Z.apply(f,h),f;break}}}(m||L(b,n))(h,
c,!M,f,!c||sa.test(b)&&r(c.parentNode)||c);return f};C.sortStable=V.split("").sort(zb).join("")===V;C.detectDuplicates=!!G;I();C.sortDetached=g(function(b){return b.compareDocumentPosition(E.createElement("div"))&1});g(function(b){b.innerHTML="<a href='#'></a>";return"#"===b.firstChild.getAttribute("href")})||d("type|href|height|width",function(b,c,f){if(!f)return b.getAttribute(c,"type"===c.toLowerCase()?1:2)});C.attributes&&g(function(b){b.innerHTML="<input/>";b.firstChild.setAttribute("value",
"");return""===b.firstChild.getAttribute("value")})||d("value",function(b,c,f){if(!f&&"input"===b.nodeName.toLowerCase())return b.defaultValue});g(function(b){return null==b.getAttribute("disabled")})||d("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,c,f){var h;if(!f)return!0===b[c]?c.toLowerCase():(h=b.getAttributeNode(c))&&h.specified?h.value:null});return c}(b);E.find=Pa;E.expr=Pa.selectors;E.expr[":"]=E.expr.pseudos;
E.uniqueSort=E.unique=Pa.uniqueSort;E.text=Pa.getText;E.isXMLDoc=Pa.isXML;E.contains=Pa.contains;var Ia=function(b,c,f){for(var h=[],g=void 0!==f;(b=b[c])&&9!==b.nodeType;)if(1===b.nodeType){if(g&&E(b).is(f))break;h.push(b)}return h},Za=function(b,c){for(var f=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&f.push(b);return f},La=E.expr.match.needsContext,$a=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Na=/^.[^:#\[\.,]*$/;E.filter=function(b,c,f){var h=c[0];f&&(b=":not("+b+")");return 1===c.length&&1===h.nodeType?
E.find.matchesSelector(h,b)?[h]:[]:E.find.matches(b,E.grep(c,function(b){return 1===b.nodeType}))};E.fn.extend({find:function(b){var c,f=this.length,h=[],g=this;if("string"!==typeof b)return this.pushStack(E(b).filter(function(){for(c=0;c<f;c++)if(E.contains(g[c],this))return!0}));for(c=0;c<f;c++)E.find(b,g[c],h);h=this.pushStack(1<f?E.unique(h):h);h.selector=this.selector?this.selector+" "+b:b;return h},filter:function(b){return this.pushStack(g(this,b||[],!1))},not:function(b){return this.pushStack(g(this,
b||[],!0))},is:function(b){return!!g(this,"string"===typeof b&&La.test(b)?E(b):b||[],!1).length}});var kb,eb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(E.fn.init=function(b,c,f){var h;if(!b)return this;f=f||kb;if("string"===typeof b){h="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:eb.exec(b);if(!h||!h[1]&&c)return!c||c.jquery?(c||f).find(b):this.constructor(c).find(b);if(h[1]){if(c=c instanceof E?c[0]:c,E.merge(this,E.parseHTML(h[1],c&&c.nodeType?c.ownerDocument||c:ba,!0)),$a.test(h[1])&&
E.isPlainObject(c))for(h in c)if(E.isFunction(this[h]))this[h](c[h]);else this.attr(h,c[h])}else(c=ba.getElementById(h[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=ba,this.selector=b;return this}if(b.nodeType)return this.context=this[0]=b,this.length=1,this;if(E.isFunction(b))return void 0!==f.ready?f.ready(b):b(E);void 0!==b.selector&&(this.selector=b.selector,this.context=b.context);return E.makeArray(b,this)}).prototype=E.fn;kb=E(ba);var Ea=/^(?:parents|prev(?:Until|All))/,Ma={children:!0,
contents:!0,next:!0,prev:!0};E.fn.extend({has:function(b){var c=E(b,this),f=c.length;return this.filter(function(){for(var b=0;b<f;b++)if(E.contains(this,c[b]))return!0})},closest:function(b,c){for(var f,h=0,g=this.length,d=[],k=La.test(b)||"string"!==typeof b?E(b,c||this.context):0;h<g;h++)for(f=this[h];f&&f!==c;f=f.parentNode)if(11>f.nodeType&&(k?-1<k.index(f):1===f.nodeType&&E.find.matchesSelector(f,b))){d.push(f);break}return this.pushStack(1<d.length?E.uniqueSort(d):d)},index:function(b){return b?
"string"===typeof b?Ba.call(E(b),this[0]):Ba.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,c){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(b,c))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});E.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Ia(b,"parentNode")},parentsUntil:function(b,c,f){return Ia(b,"parentNode",f)},next:function(b){return f(b,
"nextSibling")},prev:function(b){return f(b,"previousSibling")},nextAll:function(b){return Ia(b,"nextSibling")},prevAll:function(b){return Ia(b,"previousSibling")},nextUntil:function(b,c,f){return Ia(b,"nextSibling",f)},prevUntil:function(b,c,f){return Ia(b,"previousSibling",f)},siblings:function(b){return Za((b.parentNode||{}).firstChild,b)},children:function(b){return Za(b.firstChild)},contents:function(b){return b.contentDocument||E.merge([],b.childNodes)}},function(b,c){E.fn[b]=function(f,h){var g=
E.map(this,c,f);"Until"!==b.slice(-5)&&(h=f);h&&"string"===typeof h&&(g=E.filter(h,g));1<this.length&&(Ma[b]||E.uniqueSort(g),Ea.test(b)&&g.reverse());return this.pushStack(g)}});var Wa=/\S+/g;E.Callbacks=function(b){b="string"===typeof b?h(b):E.extend({},b);var c,f,g,d,k=[],l=[],m=-1,n=function(){d=b.once;for(g=c=!0;l.length;m=-1)for(f=l.shift();++m<k.length;)!1===k[m].apply(f[0],f[1])&&b.stopOnFalse&&(m=k.length,f=!1);b.memory||(f=!1);c=!1;d&&(k=f?[]:"")},r={add:function(){k&&(f&&!c&&(m=k.length-
1,l.push(f)),function bc(c){E.each(c,function(c,f){E.isFunction(f)?b.unique&&r.has(f)||k.push(f):f&&f.length&&"string"!==E.type(f)&&bc(f)})}(arguments),f&&!c&&n());return this},remove:function(){E.each(arguments,function(b,c){for(var f;-1<(f=E.inArray(c,k,f));)k.splice(f,1),f<=m&&m--});return this},has:function(b){return b?-1<E.inArray(b,k):0<k.length},empty:function(){k&&(k=[]);return this},disable:function(){d=l=[];k=f="";return this},disabled:function(){return!k},lock:function(){d=l=[];f||(k=f=
"");return this},locked:function(){return!!d},fireWith:function(b,f){d||(f=f||[],f=[b,f.slice?f.slice():f],l.push(f),c||n());return this},fire:function(){r.fireWith(this,arguments);return this},fired:function(){return!!g}};return r};E.extend({Deferred:function(b){var c=[["resolve","done",E.Callbacks("once memory"),"resolved"],["reject","fail",E.Callbacks("once memory"),"rejected"],["notify","progress",E.Callbacks("memory")]],f="pending",h={state:function(){return f},always:function(){g.done(arguments).fail(arguments);
return this},then:function(){var b=arguments;return E.Deferred(function(f){E.each(c,function(c,d){var k=E.isFunction(b[c])&&b[c];g[d[1]](function(){var b=k&&k.apply(this,arguments);if(b&&E.isFunction(b.promise))b.promise().progress(f.notify).done(f.resolve).fail(f.reject);else f[d[0]+"With"](this===h?f.promise():this,k?[b]:arguments)})});b=null}).promise()},promise:function(b){return null!=b?E.extend(b,h):h}},g={};h.pipe=h.then;E.each(c,function(b,d){var k=d[2],l=d[3];h[d[1]]=k.add;l&&k.add(function(){f=
l},c[b^1][2].disable,c[2][2].lock);g[d[0]]=function(){g[d[0]+"With"](this===g?h:this,arguments);return this};g[d[0]+"With"]=k.fireWith});h.promise(g);b&&b.call(g,g);return g},when:function(b){var c=0,f=aa.call(arguments),h=f.length,g=1!==h||b&&E.isFunction(b.promise)?h:0,d=1===g?b:E.Deferred(),k=function(b,c,f){return function(h){c[b]=this;f[b]=1<arguments.length?aa.call(arguments):h;f===l?d.notifyWith(c,f):--g||d.resolveWith(c,f)}},l,m,n;if(1<h)for(l=Array(h),m=Array(h),n=Array(h);c<h;c++)f[c]&&
E.isFunction(f[c].promise)?f[c].promise().progress(k(c,m,l)).done(k(c,n,f)).fail(d.reject):--g;g||d.resolveWith(n,f);return d.promise()}});var wb;E.fn.ready=function(b){E.ready.promise().done(b);return this};E.extend({isReady:!1,readyWait:1,holdReady:function(b){b?E.readyWait++:E.ready(!0)},ready:function(b){(!0===b?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==b&&0<--E.readyWait||(wb.resolveWith(ba,[E]),E.fn.triggerHandler&&(E(ba).triggerHandler("ready"),E(ba).off("ready"))))}});E.ready.promise=function(c){wb||
(wb=E.Deferred(),"complete"===ba.readyState||"loading"!==ba.readyState&&!ba.documentElement.doScroll?b.setTimeout(E.ready):(ba.addEventListener("DOMContentLoaded",k),b.addEventListener("load",k)));return wb.promise(c)};E.ready.promise();var Va=function(b,c,f,h,g,d,k){var l=0,m=b.length,n=null==f;if("object"===E.type(f))for(l in g=!0,f)Va(b,c,l,f[l],!0,d,k);else if(void 0!==h&&(g=!0,E.isFunction(h)||(k=!0),n&&(k?(c.call(b,h),c=null):(n=c,c=function(b,c,f){return n.call(E(b),f)})),c))for(;l<m;l++)c(b[l],
f,k?h:h.call(b[l],l,c(b[l],f)));return g?b:n?c.call(b):m?c(b[0],f):d},ka=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};l.uid=1;l.prototype={register:function(b,c){var f=c||{};b.nodeType?b[this.expando]=f:Object.defineProperty(b,this.expando,{value:f,writable:!0,configurable:!0});return b[this.expando]},cache:function(b){if(!ka(b))return{};var c=b[this.expando];c||(c={},ka(b)&&(b.nodeType?b[this.expando]=c:Object.defineProperty(b,this.expando,{value:c,configurable:!0})));return c},
set:function(b,c,f){var h;b=this.cache(b);if("string"===typeof c)b[c]=f;else for(h in c)b[h]=c[h];return b},get:function(b,c){return void 0===c?this.cache(b):b[this.expando]&&b[this.expando][c]},access:function(b,c,f){if(void 0===c||c&&"string"===typeof c&&void 0===f)return f=this.get(b,c),void 0!==f?f:this.get(b,E.camelCase(c));this.set(b,c,f);return void 0!==f?f:c},remove:function(b,c){var f,h,g=b[this.expando];if(void 0!==g){if(void 0===c)this.register(b);else for(E.isArray(c)?h=c.concat(c.map(E.camelCase)):
(f=E.camelCase(c),c in g?h=[c,f]:(h=f,h=h in g?[h]:h.match(Wa)||[])),f=h.length;f--;)delete g[h[f]];if(void 0===c||E.isEmptyObject(g))b.nodeType?b[this.expando]=void 0:delete b[this.expando]}},hasData:function(b){b=b[this.expando];return void 0!==b&&!E.isEmptyObject(b)}};var O=new l,ja=new l,jb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ha=/[A-Z]/g;E.extend({hasData:function(b){return ja.hasData(b)||O.hasData(b)},data:function(b,c,f){return ja.access(b,c,f)},removeData:function(b,c){ja.remove(b,c)},_data:function(b,
c,f){return O.access(b,c,f)},_removeData:function(b,c){O.remove(b,c)}});E.fn.extend({data:function(b,c){var f,h,g,d=this[0],k=d&&d.attributes;if(void 0===b){if(this.length&&(g=ja.get(d),1===d.nodeType&&!O.get(d,"hasDataAttrs"))){for(f=k.length;f--;)k[f]&&(h=k[f].name,0===h.indexOf("data-")&&(h=E.camelCase(h.slice(5)),m(d,h,g[h])));O.set(d,"hasDataAttrs",!0)}return g}return"object"===typeof b?this.each(function(){ja.set(this,b)}):Va(this,function(c){var f,h;if(d&&void 0===c){f=ja.get(d,b)||ja.get(d,
b.replace(ha,"-$&").toLowerCase());if(void 0!==f)return f;h=E.camelCase(b);f=ja.get(d,h);if(void 0!==f)return f;f=m(d,h,void 0);if(void 0!==f)return f}else h=E.camelCase(b),this.each(function(){var f=ja.get(this,h);ja.set(this,h,c);-1<b.indexOf("-")&&void 0!==f&&ja.set(this,b,c)})},null,c,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){ja.remove(this,b)})}});E.extend({queue:function(b,c,f){var h;if(b)return c=(c||"fx")+"queue",h=O.get(b,c),f&&(!h||E.isArray(f)?h=O.access(b,
c,E.makeArray(f)):h.push(f)),h||[]},dequeue:function(b,c){c=c||"fx";var f=E.queue(b,c),h=f.length,g=f.shift(),d=E._queueHooks(b,c),k=function(){E.dequeue(b,c)};"inprogress"===g&&(g=f.shift(),h--);g&&("fx"===c&&f.unshift("inprogress"),delete d.stop,g.call(b,k,d));!h&&d&&d.empty.fire()},_queueHooks:function(b,c){var f=c+"queueHooks";return O.get(b,f)||O.access(b,f,{empty:E.Callbacks("once memory").add(function(){O.remove(b,[c+"queue",f])})})}});E.fn.extend({queue:function(b,c){var f=2;"string"!==typeof b&&
(c=b,b="fx",f--);return arguments.length<f?E.queue(this[0],b):void 0===c?this:this.each(function(){var f=E.queue(this,b,c);E._queueHooks(this,b);"fx"===b&&"inprogress"!==f[0]&&E.dequeue(this,b)})},dequeue:function(b){return this.each(function(){E.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,c){var f,h=1,g=E.Deferred(),d=this,k=this.length,l=function(){--h||g.resolveWith(d,[d])};"string"!==typeof b&&(c=b,b=void 0);for(b=b||"fx";k--;)(f=O.get(d[k],b+"queueHooks"))&&
f.empty&&(h++,f.empty.add(l));l();return g.promise(c)}});var Da=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Sa=new RegExp("^(?:([+-])=|)("+Da+")([a-z%]*)$","i"),cb=["Top","Right","Bottom","Left"],gb=function(b,c){b=c||b;return"none"===E.css(b,"display")||!E.contains(b.ownerDocument,b)},xb=/^(?:checkbox|radio)$/i,Ya=/<([\w:-]+)/,Oa=/^$|\/(?:java|ecma)script/i,Ha={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ha.optgroup=Ha.option;Ha.tbody=Ha.tfoot=Ha.colgroup=Ha.caption=Ha.thead;Ha.th=Ha.td;var Ta=/<|&#?\w+;/;(function(){var b=ba.createDocumentFragment().appendChild(ba.createElement("div")),c=ba.createElement("input");c.setAttribute("type","radio");c.setAttribute("checked","checked");c.setAttribute("name","t");b.appendChild(c);ga.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;
b.innerHTML="<textarea>x</textarea>";ga.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue})();var yb=/^key/,ab=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,zb=/^([^.]*)(?:\.(.+)|)/;E.event={global:{},add:function(b,c,f,h,g){var d,k,l,m,n,r,q,p,u;if(n=O.get(b))for(f.handler&&(d=f,f=d.handler,g=d.selector),f.guid||(f.guid=E.guid++),(m=n.events)||(m=n.events={}),(k=n.handle)||(k=n.handle=function(c){return"undefined"!==typeof E&&E.event.triggered!==c.type?E.event.dispatch.apply(b,arguments):
void 0}),c=(c||"").match(Wa)||[""],n=c.length;n--;)l=zb.exec(c[n])||[],p=r=l[1],u=(l[2]||"").split(".").sort(),p&&(l=E.event.special[p]||{},p=(g?l.delegateType:l.bindType)||p,l=E.event.special[p]||{},r=E.extend({type:p,origType:r,data:h,handler:f,guid:f.guid,selector:g,needsContext:g&&E.expr.match.needsContext.test(g),namespace:u.join(".")},d),(q=m[p])||(q=m[p]=[],q.delegateCount=0,l.setup&&!1!==l.setup.call(b,h,u,k)||b.addEventListener&&b.addEventListener(p,k)),l.add&&(l.add.call(b,r),r.handler.guid||
(r.handler.guid=f.guid)),g?q.splice(q.delegateCount++,0,r):q.push(r),E.event.global[p]=!0)},remove:function(b,c,f,h,g){var d,k,l,m,n,r,q,p,u,v,w,t=O.hasData(b)&&O.get(b);if(t&&(m=t.events)){c=(c||"").match(Wa)||[""];for(n=c.length;n--;)if(l=zb.exec(c[n])||[],u=w=l[1],v=(l[2]||"").split(".").sort(),u){q=E.event.special[u]||{};u=(h?q.delegateType:q.bindType)||u;p=m[u]||[];l=l[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)");for(k=d=p.length;d--;)r=p[d],!g&&w!==r.origType||f&&f.guid!==r.guid||
l&&!l.test(r.namespace)||h&&h!==r.selector&&("**"!==h||!r.selector)||(p.splice(d,1),r.selector&&p.delegateCount--,q.remove&&q.remove.call(b,r));k&&!p.length&&(q.teardown&&!1!==q.teardown.call(b,v,t.handle)||E.removeEvent(b,u,t.handle),delete m[u])}else for(u in m)E.event.remove(b,u+c[n],f,h,!0);E.isEmptyObject(m)&&O.remove(b,"handle events")}},dispatch:function(b){b=E.event.fix(b);var c,f,h,g,d=[],k=aa.call(arguments);c=(O.get(this,"events")||{})[b.type]||[];var l=E.event.special[b.type]||{};k[0]=
b;b.delegateTarget=this;if(!l.preDispatch||!1!==l.preDispatch.call(this,b)){d=E.event.handlers.call(this,b,c);for(c=0;(g=d[c++])&&!b.isPropagationStopped();)for(b.currentTarget=g.elem,f=0;(h=g.handlers[f++])&&!b.isImmediatePropagationStopped();)if(!b.rnamespace||b.rnamespace.test(h.namespace))b.handleObj=h,b.data=h.data,h=((E.event.special[h.origType]||{}).handle||h.handler).apply(g.elem,k),void 0!==h&&!1===(b.result=h)&&(b.preventDefault(),b.stopPropagation());l.postDispatch&&l.postDispatch.call(this,
b);return b.result}},handlers:function(b,c){var f,h,g,d,k=[],l=c.delegateCount,m=b.target;if(l&&m.nodeType&&("click"!==b.type||isNaN(b.button)||1>b.button))for(;m!==this;m=m.parentNode||this)if(1===m.nodeType&&(!0!==m.disabled||"click"!==b.type)){h=[];for(f=0;f<l;f++)d=c[f],g=d.selector+" ",void 0===h[g]&&(h[g]=d.needsContext?-1<E(g,this).index(m):E.find(g,this,null,[m]).length),h[g]&&h.push(d);h.length&&k.push({elem:m,handlers:h})}l<c.length&&k.push({elem:this,handlers:c.slice(l)});return k},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(b,c){null==b.which&&(b.which=null!=c.charCode?c.charCode:c.keyCode);return b}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b,c){var f,h,g=c.button;null==b.pageX&&null!=c.clientX&&(f=b.target.ownerDocument||ba,h=f.documentElement,f=f.body,b.pageX=c.clientX+(h&&h.scrollLeft||f&&f.scrollLeft||0)-(h&&h.clientLeft||f&&f.clientLeft||0),b.pageY=
c.clientY+(h&&h.scrollTop||f&&f.scrollTop||0)-(h&&h.clientTop||f&&f.clientTop||0));b.which||void 0===g||(b.which=g&1?1:g&2?3:g&4?2:0);return b}},fix:function(b){if(b[E.expando])return b;var c,f,h;c=b.type;var g=b,d=this.fixHooks[c];d||(this.fixHooks[c]=d=ab.test(c)?this.mouseHooks:yb.test(c)?this.keyHooks:{});h=d.props?this.props.concat(d.props):this.props;b=new E.Event(g);for(c=h.length;c--;)f=h[c],b[f]=g[f];b.target||(b.target=ba);3===b.target.nodeType&&(b.target=b.target.parentNode);return d.filter?
d.filter(b,g):b},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===w()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&E.nodeName(this,"input"))return this.click(),!1},_default:function(b){return E.nodeName(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=
b.result)}}}};E.removeEvent=function(b,c,f){b.removeEventListener&&b.removeEventListener(c,f)};E.Event=function(b,c){if(!(this instanceof E.Event))return new E.Event(b,c);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?q:r):this.type=b;c&&E.extend(this,c);this.timeStamp=b&&b.timeStamp||E.now();this[E.expando]=!0};E.Event.prototype={constructor:E.Event,isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r,
preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=q;b&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=q;b&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=q;b&&b.stopImmediatePropagation();this.stopPropagation()}};E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,c){E.event.special[b]={delegateType:c,
bindType:c,handle:function(b){var f,h=b.relatedTarget,g=b.handleObj;if(!h||h!==this&&!E.contains(this,h))b.type=g.origType,f=g.handler.apply(this,arguments),b.type=c;return f}}});E.fn.extend({on:function(b,c,f,h){return v(this,b,c,f,h)},one:function(b,c,f,h){return v(this,b,c,f,h,1)},off:function(b,c,f){var h;if(b&&b.preventDefault&&b.handleObj)return h=b.handleObj,E(b.delegateTarget).off(h.namespace?h.origType+"."+h.namespace:h.origType,h.selector,h.handler),this;if("object"===typeof b){for(h in b)this.off(h,
c,b[h]);return this}if(!1===c||"function"===typeof c)f=c,c=void 0;!1===f&&(f=r);return this.each(function(){E.event.remove(this,b,f,c)})}});var Ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,kd=/<script|<style|<link/i,ad=/checked\s*(?:[^=]|=\s*.checked.)/i,Ec=/^true\/(.*)/,cd=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;E.extend({htmlPrefilter:function(b){return b.replace(Ab,"<$1></$2>")},clone:function(b,c,f){var h,g,d,k,l=b.cloneNode(!0),m=E.contains(b.ownerDocument,
b);if(!(ga.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||E.isXMLDoc(b)))for(k=t(l),d=t(b),h=0,g=d.length;h<g;h++){var n=d[h],r=k[h],q=r.nodeName.toLowerCase();if("input"===q&&xb.test(n.type))r.checked=n.checked;else if("input"===q||"textarea"===q)r.defaultValue=n.defaultValue}if(c)if(f)for(d=d||t(b),k=k||t(l),h=0,g=d.length;h<g;h++)z(d[h],k[h]);else z(b,l);k=t(l,"script");0<k.length&&u(k,!m&&t(b,"script"));return l},cleanData:function(b){for(var c,f,h,g=E.event.special,d=0;void 0!==(f=b[d]);d++)if(ka(f)){if(c=
f[O.expando]){if(c.events)for(h in c.events)g[h]?E.event.remove(f,h):E.removeEvent(f,h,c.handle);f[O.expando]=void 0}f[ja.expando]&&(f[ja.expando]=void 0)}}});E.fn.extend({domManip:C,detach:function(b){return D(this,b,!0)},remove:function(b){return D(this,b)},text:function(b){return Va(this,function(b){return void 0===b?E.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=b})},null,b,arguments.length)},append:function(){return C(this,
arguments,function(b){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||y(this,b).appendChild(b)})},prepend:function(){return C(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=y(this,b);c.insertBefore(b,c.firstChild)}})},before:function(){return C(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return C(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},
empty:function(){for(var b,c=0;null!=(b=this[c]);c++)1===b.nodeType&&(E.cleanData(t(b,!1)),b.textContent="");return this},clone:function(b,c){b=null==b?!1:b;c=null==c?b:c;return this.map(function(){return E.clone(this,b,c)})},html:function(b){return Va(this,function(b){var c=this[0]||{},f=0,h=this.length;if(void 0===b&&1===c.nodeType)return c.innerHTML;if("string"===typeof b&&!kd.test(b)&&!Ha[(Ya.exec(b)||["",""])[1].toLowerCase()]){b=E.htmlPrefilter(b);try{for(;f<h;f++)c=this[f]||{},1===c.nodeType&&
(E.cleanData(t(c,!1)),c.innerHTML=b);c=0}catch(g){}}c&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=[];return C(this,arguments,function(c){var f=this.parentNode;0>E.inArray(this,b)&&(E.cleanData(t(this)),f&&f.replaceChild(c,this))},b)}});E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){E.fn[b]=function(b){for(var f=[],h=E(b),g=h.length-1,d=0;d<=g;d++)b=d===g?this:this.clone(!0),E(h[d])[c](b),
pa.apply(f,b.get());return this.pushStack(f)}});var Fc,zd={HTML:"block",BODY:"block"},Ad=/^margin/,Hc=new RegExp("^("+Da+")(?!px)[a-z%]+$","i"),Gc=function(c){var f=c.ownerDocument.defaultView;f&&f.opener||(f=b);return f.getComputedStyle(c)},Nc=function(b,c,f,h){var g,d={};for(g in c)d[g]=b.style[g],b.style[g]=c[g];f=f.apply(b,h||[]);for(g in c)b.style[g]=d[g];return f},vc=ba.documentElement;(function(){function c(){l.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
l.innerHTML="";vc.appendChild(k);var m=b.getComputedStyle(l);f="1%"!==m.top;d="2px"===m.marginLeft;h="4px"===m.width;l.style.marginRight="50%";g="4px"===m.marginRight;vc.removeChild(k)}var f,h,g,d,k=ba.createElement("div"),l=ba.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",ga.clearCloneStyle="content-box"===l.style.backgroundClip,k.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
k.appendChild(l),E.extend(ga,{pixelPosition:function(){c();return f},boxSizingReliable:function(){null==h&&c();return h},pixelMarginRight:function(){null==h&&c();return g},reliableMarginLeft:function(){null==h&&c();return d},reliableMarginRight:function(){var c,f=l.appendChild(ba.createElement("div"));f.style.cssText=l.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";f.style.marginRight=f.style.width="0";l.style.width="1px";vc.appendChild(k);
c=!parseFloat(b.getComputedStyle(f).marginRight);vc.removeChild(k);l.removeChild(f);return c}}))})();var Ce=/^(none|table(?!-c[ea]).+)/,De={position:"absolute",visibility:"hidden",display:"block"},Ld={letterSpacing:"0",fontWeight:"400"},Cd=["Webkit","O","Moz","ms"],Bd=ba.createElement("div").style;E.extend({cssHooks:{opacity:{get:function(b,c){if(c){var f=H(b,"opacity");return""===f?"1":f}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,
lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,c,f,h){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var g,d,k,l=E.camelCase(c),m=b.style;c=E.cssProps[l]||(E.cssProps[l]=G(l)||l);k=E.cssHooks[c]||E.cssHooks[l];if(void 0!==f)d=typeof f,"string"===d&&(g=Sa.exec(f))&&g[1]&&(f=p(b,c,g),d="number"),null!=f&&f===f&&("number"===d&&(f+=g&&g[3]||(E.cssNumber[l]?"":"px")),ga.clearCloneStyle||""!==f||0!==c.indexOf("background")||(m[c]=
"inherit"),k&&"set"in k&&void 0===(f=k.set(b,f,h))||(m[c]=f));else return k&&"get"in k&&void 0!==(g=k.get(b,!1,h))?g:m[c]}},css:function(b,c,f,h){var g,d;d=E.camelCase(c);c=E.cssProps[d]||(E.cssProps[d]=G(d)||d);(d=E.cssHooks[c]||E.cssHooks[d])&&"get"in d&&(g=d.get(b,!0,f));void 0===g&&(g=H(b,c,h));"normal"===g&&c in Ld&&(g=Ld[c]);return""===f||f?(b=parseFloat(g),!0===f||isFinite(b)?b||0:g):g}});E.each(["height","width"],function(b,c){E.cssHooks[c]={get:function(b,f,h){if(f)return Ce.test(E.css(b,
"display"))&&0===b.offsetWidth?Nc(b,De,function(){return K(b,c,h)}):K(b,c,h)},set:function(b,f,h){var g,d=h&&Gc(b);(h=h&&J(b,c,h,"border-box"===E.css(b,"boxSizing",!1,d),d))&&(g=Sa.exec(f))&&"px"!==(g[3]||"px")&&(b.style[c]=f,f=E.css(b,c));return M(b,f,h)}}});E.cssHooks.marginLeft=I(ga.reliableMarginLeft,function(b,c){if(c)return(parseFloat(H(b,"marginLeft"))||b.getBoundingClientRect().left-Nc(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});E.cssHooks.marginRight=I(ga.reliableMarginRight,
function(b,c){if(c)return Nc(b,{display:"inline-block"},H,[b,"marginRight"])});E.each({margin:"",padding:"",border:"Width"},function(b,c){E.cssHooks[b+c]={expand:function(f){var h=0,g={};for(f="string"===typeof f?f.split(" "):[f];4>h;h++)g[b+cb[h]+c]=f[h]||f[h-2]||f[0];return g}};Ad.test(b)||(E.cssHooks[b+c].set=M)});E.fn.extend({css:function(b,c){return Va(this,function(b,c,f){var h,g={},d=0;if(E.isArray(c)){f=Gc(b);for(h=c.length;d<h;d++)g[c[d]]=E.css(b,c[d],!1,f);return g}return void 0!==f?E.style(b,
c,f):E.css(b,c)},b,c,1<arguments.length)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(b){return"boolean"===typeof b?b?this.show():this.hide():this.each(function(){gb(this)?E(this).show():E(this).hide()})}});E.Tween=N;N.prototype={constructor:N,init:function(b,c,f,h,g,d){this.elem=b;this.prop=f;this.easing=g||E.easing._default;this.options=c;this.start=this.now=this.cur();this.end=h;this.unit=d||(E.cssNumber[f]?"":"px")},cur:function(){var b=N.propHooks[this.prop];
return b&&b.get?b.get(this):N.propHooks._default.get(this)},run:function(b){var c,f=N.propHooks[this.prop];this.pos=this.options.duration?c=E.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):c=b;this.now=(this.end-this.start)*c+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);f&&f.set?f.set(this):N.propHooks._default.set(this);return this}};N.prototype.init.prototype=N.prototype;N.propHooks={_default:{get:function(b){return 1!==b.elem.nodeType||
null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(b=E.css(b.elem,b.prop,""))&&"auto"!==b?b:0},set:function(b){if(E.fx.step[b.prop])E.fx.step[b.prop](b);else 1!==b.elem.nodeType||null==b.elem.style[E.cssProps[b.prop]]&&!E.cssHooks[b.prop]?b.elem[b.prop]=b.now:E.style(b.elem,b.prop,b.now+b.unit)}}};N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};E.easing={linear:function(b){return b},swing:function(b){return.5-
Math.cos(b*Math.PI)/2},_default:"swing"};E.fx=N.prototype.init;E.fx.step={};var Fb,Vb,Oc=/^(?:toggle|show|hide)$/,ld=/queueHooks$/;E.Animation=E.extend(W,{tweeners:{"*":[function(b,c){var f=this.createTween(b,c);p(f.elem,b,Sa.exec(c),f);return f}]},tweener:function(b,c){E.isFunction(b)?(c=b,b=["*"]):b=b.match(Wa);for(var f,h=0,g=b.length;h<g;h++)f=b[h],W.tweeners[f]=W.tweeners[f]||[],W.tweeners[f].unshift(c)},prefilters:[function(b,c,f){var h,g,d,k,l,m,n=this,r={},q=b.style,p=b.nodeType&&gb(b),u=
O.get(b,"fxshow");f.queue||(k=E._queueHooks(b,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,n.always(function(){n.always(function(){k.unqueued--;E.queue(b,"fx").length||k.empty.fire()})}));1===b.nodeType&&("height"in c||"width"in c)&&(f.overflow=[q.overflow,q.overflowX,q.overflowY],m=E.css(b,"display"),g="none"===m?O.get(b,"olddisplay")||F(b.nodeName):m,"inline"===g&&"none"===E.css(b,"float")&&(q.display="inline-block"));f.overflow&&(q.overflow=
"hidden",n.always(function(){q.overflow=f.overflow[0];q.overflowX=f.overflow[1];q.overflowY=f.overflow[2]}));for(h in c)if(g=c[h],Oc.exec(g)){delete c[h];d=d||"toggle"===g;if(g===(p?"hide":"show"))if("show"===g&&u&&void 0!==u[h])p=!0;else continue;r[h]=u&&u[h]||E.style(b,h)}else m=void 0;if(E.isEmptyObject(r))"inline"===("none"===m?F(b.nodeName):m)&&(q.display=m);else for(h in u?"hidden"in u&&(p=u.hidden):u=O.access(b,"fxshow",{}),d&&(u.hidden=!p),p?E(b).show():n.done(function(){E(b).hide()}),n.done(function(){var c;
O.remove(b,"fxshow");for(c in r)E.style(b,c,r[c])}),r)c=U(p?u[h]:0,h,n),h in u||(u[h]=c.start,p&&(c.end=c.start,c.start="width"===h||"height"===h?1:0))}],prefilter:function(b,c){c?W.prefilters.unshift(b):W.prefilters.push(b)}});E.speed=function(b,c,f){var h=b&&"object"===typeof b?E.extend({},b):{complete:f||!f&&c||E.isFunction(b)&&b,duration:b,easing:f&&c||c&&!E.isFunction(c)&&c};h.duration=E.fx.off?0:"number"===typeof h.duration?h.duration:h.duration in E.fx.speeds?E.fx.speeds[h.duration]:E.fx.speeds._default;
if(null==h.queue||!0===h.queue)h.queue="fx";h.old=h.complete;h.complete=function(){E.isFunction(h.old)&&h.old.call(this);h.queue&&E.dequeue(this,h.queue)};return h};E.fn.extend({fadeTo:function(b,c,f,h){return this.filter(gb).css("opacity",0).show().end().animate({opacity:c},b,f,h)},animate:function(b,c,f,h){var g=E.isEmptyObject(b),d=E.speed(c,f,h);c=function(){var c=W(this,E.extend({},b),d);(g||O.get(this,"finish"))&&c.stop(!0)};c.finish=c;return g||!1===d.queue?this.each(c):this.queue(d.queue,
c)},stop:function(b,c,f){var h=function(b){var c=b.stop;delete b.stop;c(f)};"string"!==typeof b&&(f=c,c=b,b=void 0);c&&!1!==b&&this.queue(b||"fx",[]);return this.each(function(){var c=!0,g=null!=b&&b+"queueHooks",d=E.timers,k=O.get(this);if(g)k[g]&&k[g].stop&&h(k[g]);else for(g in k)k[g]&&k[g].stop&&ld.test(g)&&h(k[g]);for(g=d.length;g--;)d[g].elem!==this||null!=b&&d[g].queue!==b||(d[g].anim.stop(f),c=!1,d.splice(g,1));!c&&f||E.dequeue(this,b)})},finish:function(b){!1!==b&&(b=b||"fx");return this.each(function(){var c,
f=O.get(this),h=f[b+"queue"];c=f[b+"queueHooks"];var g=E.timers,d=h?h.length:0;f.finish=!0;E.queue(this,b,[]);c&&c.stop&&c.stop.call(this,!0);for(c=g.length;c--;)g[c].elem===this&&g[c].queue===b&&(g[c].anim.stop(!0),g.splice(c,1));for(c=0;c<d;c++)h[c]&&h[c].finish&&h[c].finish.call(this);delete f.finish})}});E.each(["toggle","show","hide"],function(b,c){var f=E.fn[c];E.fn[c]=function(b,h,g){return null==b||"boolean"===typeof b?f.apply(this,arguments):this.animate(S(c,!0),b,h,g)}});E.each({slideDown:S("show"),
slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,c){E.fn[b]=function(b,f,h){return this.animate(c,b,f,h)}});E.timers=[];E.fx.tick=function(){var b,c=0,f=E.timers;for(Fb=E.now();c<f.length;c++)b=f[c],b()||f[c]!==b||f.splice(c--,1);f.length||E.fx.stop();Fb=void 0};E.fx.timer=function(b){E.timers.push(b);b()?E.fx.start():E.timers.pop()};E.fx.interval=13;E.fx.start=function(){Vb||(Vb=b.setInterval(E.fx.tick,E.fx.interval))};
E.fx.stop=function(){b.clearInterval(Vb);Vb=null};E.fx.speeds={slow:600,fast:200,_default:400};E.fn.delay=function(c,f){c=E.fx?E.fx.speeds[c]||c:c;return this.queue(f||"fx",function(f,h){var g=b.setTimeout(f,c);h.stop=function(){b.clearTimeout(g)}})};(function(){var b=ba.createElement("input"),c=ba.createElement("select"),f=c.appendChild(ba.createElement("option"));b.type="checkbox";ga.checkOn=""!==b.value;ga.optSelected=f.selected;c.disabled=!0;ga.optDisabled=!f.disabled;b=ba.createElement("input");
b.value="t";b.type="radio";ga.radioValue="t"===b.value})();var md,wc=E.expr.attrHandle;E.fn.extend({attr:function(b,c){return Va(this,E.attr,b,c,1<arguments.length)},removeAttr:function(b){return this.each(function(){E.removeAttr(this,b)})}});E.extend({attr:function(b,c,f){var h,g,d=b.nodeType;if(3!==d&&8!==d&&2!==d){if("undefined"===typeof b.getAttribute)return E.prop(b,c,f);1===d&&E.isXMLDoc(b)||(c=c.toLowerCase(),g=E.attrHooks[c]||(E.expr.match.bool.test(c)?md:void 0));if(void 0!==f){if(null===
f){E.removeAttr(b,c);return}if(g&&"set"in g&&void 0!==(h=g.set(b,f,c)))return h;b.setAttribute(c,f+"");return f}if(g&&"get"in g&&null!==(h=g.get(b,c)))return h;h=E.find.attr(b,c);return null==h?void 0:h}},attrHooks:{type:{set:function(b,c){if(!ga.radioValue&&"radio"===c&&E.nodeName(b,"input")){var f=b.value;b.setAttribute("type",c);f&&(b.value=f);return c}}}},removeAttr:function(b,c){var f,h,g=0,d=c&&c.match(Wa);if(d&&1===b.nodeType)for(;f=d[g++];)h=E.propFix[f]||f,E.expr.match.bool.test(f)&&(b[h]=
!1),b.removeAttribute(f)}});md={set:function(b,c,f){!1===c?E.removeAttr(b,f):b.setAttribute(f,f);return f}};E.each(E.expr.match.bool.source.match(/\w+/g),function(b,c){var f=wc[c]||E.find.attr;wc[c]=function(b,c,h){var g,d;h||(d=wc[c],wc[c]=g,g=null!=f(b,c,h)?c.toLowerCase():null,wc[c]=d);return g}});var Wb=/^(?:input|select|textarea|button)$/i,Pc=/^(?:a|area)$/i;E.fn.extend({prop:function(b,c){return Va(this,E.prop,b,c,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[E.propFix[b]||
b]})}});E.extend({prop:function(b,c,f){var h,g,d=b.nodeType;if(3!==d&&8!==d&&2!==d)return 1===d&&E.isXMLDoc(b)||(c=E.propFix[c]||c,g=E.propHooks[c]),void 0!==f?g&&"set"in g&&void 0!==(h=g.set(b,f,c))?h:b[c]=f:g&&"get"in g&&null!==(h=g.get(b,c))?h:b[c]},propHooks:{tabIndex:{get:function(b){var c=E.find.attr(b,"tabindex");return c?parseInt(c,10):Wb.test(b.nodeName)||Pc.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});ga.optSelected||(E.propHooks.selected={get:function(b){(b=
b.parentNode)&&b.parentNode&&b.parentNode.selectedIndex;return null}});E.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){E.propFix[this.toLowerCase()]=this});var Kb=/[\t\r\n\f]/g;E.fn.extend({addClass:function(b){var c,f,h,g,d,k,l=0;if(E.isFunction(b))return this.each(function(c){E(this).addClass(b.call(this,c,X(this)))});if("string"===typeof b&&b)for(c=b.match(Wa)||[];f=this[l++];)if(g=X(f),h=1===f.nodeType&&(" "+
g+" ").replace(Kb," ")){for(k=0;d=c[k++];)0>h.indexOf(" "+d+" ")&&(h+=d+" ");h=E.trim(h);g!==h&&f.setAttribute("class",h)}return this},removeClass:function(b){var c,f,h,g,d,k,l=0;if(E.isFunction(b))return this.each(function(c){E(this).removeClass(b.call(this,c,X(this)))});if(!arguments.length)return this.attr("class","");if("string"===typeof b&&b)for(c=b.match(Wa)||[];f=this[l++];)if(g=X(f),h=1===f.nodeType&&(" "+g+" ").replace(Kb," ")){for(k=0;d=c[k++];)for(;-1<h.indexOf(" "+d+" ");)h=h.replace(" "+
d+" "," ");h=E.trim(h);g!==h&&f.setAttribute("class",h)}return this},toggleClass:function(b,c){var f=typeof b;return"boolean"===typeof c&&"string"===f?c?this.addClass(b):this.removeClass(b):E.isFunction(b)?this.each(function(f){E(this).toggleClass(b.call(this,f,X(this),c),c)}):this.each(function(){var c,h,g,d;if("string"===f)for(h=0,g=E(this),d=b.match(Wa)||[];c=d[h++];)g.hasClass(c)?g.removeClass(c):g.addClass(c);else if(void 0===b||"boolean"===f)(c=X(this))&&O.set(this,"__className__",c),this.setAttribute&&
this.setAttribute("class",c||!1===b?"":O.get(this,"__className__")||"")})},hasClass:function(b){var c,f=0;for(b=" "+b+" ";c=this[f++];)if(1===c.nodeType&&-1<(" "+X(c)+" ").replace(Kb," ").indexOf(b))return!0;return!1}});var nd=/\r/g;E.fn.extend({val:function(b){var c,f,h,g=this[0];if(arguments.length)return h=E.isFunction(b),this.each(function(f){1===this.nodeType&&(f=h?b.call(this,f,E(this).val()):b,null==f?f="":"number"===typeof f?f+="":E.isArray(f)&&(f=E.map(f,function(b){return null==b?"":b+""})),
c=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,f,"value")||(this.value=f))});if(g){if((c=E.valHooks[g.type]||E.valHooks[g.nodeName.toLowerCase()])&&"get"in c&&void 0!==(f=c.get(g,"value")))return f;f=g.value;return"string"===typeof f?f.replace(nd,""):null==f?"":f}}});E.extend({valHooks:{option:{get:function(b){return E.trim(b.value)}},select:{get:function(b){for(var c,f=b.options,h=b.selectedIndex,g=(b="select-one"===b.type||0>h)?null:[],d=b?h+1:
f.length,k=0>h?d:b?h:0;k<d;k++)if(c=f[k],!(!c.selected&&k!==h||(ga.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&E.nodeName(c.parentNode,"optgroup"))){c=E(c).val();if(b)return c;g.push(c)}return g},set:function(b,c){for(var f,h,g=b.options,d=E.makeArray(c),k=g.length;k--;)if(h=g[k],h.selected=-1<E.inArray(E.valHooks.option.get(h),d))f=!0;f||(b.selectedIndex=-1);return d}}}});E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(b,c){if(E.isArray(c))return b.checked=
-1<E.inArray(E(b).val(),c)}};ga.checkOn||(E.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var xc=/^(?:focusinfocus|focusoutblur)$/;E.extend(E.event,{trigger:function(c,f,h,g){var d,k,l,m,n,r,q=[h||ba],p=qa.call(c,"type")?c.type:c;r=qa.call(c,"namespace")?c.namespace.split("."):[];k=d=h=h||ba;if(3!==h.nodeType&&8!==h.nodeType&&!xc.test(p+E.event.triggered)&&(-1<p.indexOf(".")&&(r=p.split("."),p=r.shift(),r.sort()),m=0>p.indexOf(":")&&"on"+p,c=c[E.expando]?c:
new E.Event(p,"object"===typeof c&&c),c.isTrigger=g?2:3,c.namespace=r.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=h),f=null==f?[c]:E.makeArray(f,[c]),r=E.event.special[p]||{},g||!r.trigger||!1!==r.trigger.apply(h,f))){if(!g&&!r.noBubble&&!E.isWindow(h)){l=r.delegateType||p;xc.test(l+p)||(k=k.parentNode);for(;k;k=k.parentNode)q.push(k),d=k;d===(h.ownerDocument||ba)&&q.push(d.defaultView||d.parentWindow||b)}for(d=
0;(k=q[d++])&&!c.isPropagationStopped();)c.type=1<d?l:r.bindType||p,(n=(O.get(k,"events")||{})[c.type]&&O.get(k,"handle"))&&n.apply(k,f),(n=m&&k[m])&&n.apply&&ka(k)&&(c.result=n.apply(k,f),!1===c.result&&c.preventDefault());c.type=p;g||c.isDefaultPrevented()||r._default&&!1!==r._default.apply(q.pop(),f)||!ka(h)||!m||!E.isFunction(h[p])||E.isWindow(h)||((d=h[m])&&(h[m]=null),E.event.triggered=p,h[p](),E.event.triggered=void 0,d&&(h[m]=d));return c.result}},simulate:function(b,c,f){b=E.extend(new E.Event,
f,{type:b,isSimulated:!0});E.event.trigger(b,null,c);b.isDefaultPrevented()&&f.preventDefault()}});E.fn.extend({trigger:function(b,c){return this.each(function(){E.event.trigger(b,c,this)})},triggerHandler:function(b,c){var f=this[0];if(f)return E.event.trigger(b,c,f,!0)}});E.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(b,
c){E.fn[c]=function(b,f){return 0<arguments.length?this.on(c,null,b,f):this.trigger(c)}});E.fn.extend({hover:function(b,c){return this.mouseenter(b).mouseleave(c||b)}});ga.focusin="onfocusin"in b;ga.focusin||E.each({focus:"focusin",blur:"focusout"},function(b,c){var f=function(b){E.event.simulate(c,b.target,E.event.fix(b))};E.event.special[c]={setup:function(){var h=this.ownerDocument||this,g=O.access(h,c);g||h.addEventListener(b,f,!0);O.access(h,c,(g||0)+1)},teardown:function(){var h=this.ownerDocument||
this,g=O.access(h,c)-1;g?O.access(h,c,g):(h.removeEventListener(b,f,!0),O.remove(h,c))}}});var Lb=b.location,gc=E.now(),hc=/\?/;E.parseJSON=function(b){return JSON.parse(b+"")};E.parseXML=function(c){var f;if(!c||"string"!==typeof c)return null;try{f=(new b.DOMParser).parseFromString(c,"text/xml")}catch(h){f=void 0}f&&!f.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+c);return f};var od=/#.*$/,ic=/([?&])_=[^&]*/,Md=/^(.*?):[ \t]*([^\r\n]*)$/mg,Nd=/^(?:GET|HEAD)$/,Ee=/^\/\//,pd=
{},Rb={},qd="*/".concat("*"),Qc=ba.createElement("a");Qc.href=Lb.href;E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lb.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Lb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qd,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},
responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":E.parseJSON,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,c){return c?R(R(b,E.ajaxSettings),c):R(E.ajaxSettings,b)},ajaxPrefilter:ea(pd),ajaxTransport:ea(Rb),ajax:function(c,f){function h(c,f,l,n){var q,A,x,D;D=f;if(2!==C){C=2;m&&b.clearTimeout(m);g=void 0;k=n||"";z.readyState=0<c?4:0;n=200<=c&&300>c||304===c;if(l){x=p;for(var B=z,F,L,H,Q,
N=x.contents,G=x.dataTypes;"*"===G[0];)G.shift(),void 0===F&&(F=x.mimeType||B.getResponseHeader("Content-Type"));if(F)for(L in N)if(N[L]&&N[L].test(F)){G.unshift(L);break}if(G[0]in l)H=G[0];else{for(L in l){if(!G[0]||x.converters[L+" "+G[0]]){H=L;break}Q||(Q=L)}H=H||Q}H?(H!==G[0]&&G.unshift(H),x=l[H]):x=void 0}a:{l=p;F=x;L=z;H=n;var I,J,M,B={},N=l.dataTypes.slice();if(N[1])for(J in l.converters)B[J.toLowerCase()]=l.converters[J];for(Q=N.shift();Q;)if(l.responseFields[Q]&&(L[l.responseFields[Q]]=F),
!M&&H&&l.dataFilter&&(F=l.dataFilter(F,l.dataType)),M=Q,Q=N.shift())if("*"===Q)Q=M;else if("*"!==M&&M!==Q){J=B[M+" "+Q]||B["* "+Q];if(!J)for(I in B)if(x=I.split(" "),x[1]===Q&&(J=B[M+" "+x[0]]||B["* "+x[0]])){!0===J?J=B[I]:!0!==B[I]&&(Q=x[0],N.unshift(x[1]));break}if(!0!==J)if(J&&l["throws"])F=J(F);else try{F=J(F)}catch(K){x={state:"parsererror",error:J?K:"No conversion from "+M+" to "+Q};break a}}x={state:"success",data:F}}if(n)p.ifModified&&((D=z.getResponseHeader("Last-Modified"))&&(E.lastModified[d]=
D),(D=z.getResponseHeader("etag"))&&(E.etag[d]=D)),204===c||"HEAD"===p.type?D="nocontent":304===c?D="notmodified":(D=x.state,q=x.data,A=x.error,n=!A);else if(A=D,c||!D)D="error",0>c&&(c=0);z.status=c;z.statusText=(f||D)+"";n?w.resolveWith(u,[q,D,z]):w.rejectWith(u,[z,D,A]);z.statusCode(y);y=void 0;r&&v.trigger(n?"ajaxSuccess":"ajaxError",[z,p,n?q:A]);t.fireWith(u,[z,D]);r&&(v.trigger("ajaxComplete",[z,p]),--E.active||E.event.trigger("ajaxStop"))}}"object"===typeof c&&(f=c,c=void 0);f=f||{};var g,
d,k,l,m,n,r,q,p=E.ajaxSetup({},f),u=p.context||p,v=p.context&&(u.nodeType||u.jquery)?E(u):E.event,w=E.Deferred(),t=E.Callbacks("once memory"),y=p.statusCode||{},A={},x={},C=0,D="canceled",z={readyState:0,getResponseHeader:function(b){var c;if(2===C){if(!l)for(l={};c=Md.exec(k);)l[c[1].toLowerCase()]=c[2];c=l[b.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return 2===C?k:null},setRequestHeader:function(b,c){var f=b.toLowerCase();C||(b=x[f]=x[f]||b,A[b]=c);return this},overrideMimeType:function(b){C||
(p.mimeType=b);return this},statusCode:function(b){var c;if(b)if(2>C)for(c in b)y[c]=[y[c],b[c]];else z.always(b[z.status]);return this},abort:function(b){b=b||D;g&&g.abort(b);h(0,b);return this}};w.promise(z).complete=t.add;z.success=z.done;z.error=z.fail;p.url=((c||p.url||Lb.href)+"").replace(od,"").replace(Ee,Lb.protocol+"//");p.type=f.method||f.type||p.method||p.type;p.dataTypes=E.trim(p.dataType||"*").toLowerCase().match(Wa)||[""];if(null==p.crossDomain){n=ba.createElement("a");try{n.href=p.url,
n.href=n.href,p.crossDomain=Qc.protocol+"//"+Qc.host!==n.protocol+"//"+n.host}catch(B){p.crossDomain=!0}}p.data&&p.processData&&"string"!==typeof p.data&&(p.data=E.param(p.data,p.traditional));da(pd,p,f,z);if(2===C)return z;(r=E.event&&p.global)&&0===E.active++&&E.event.trigger("ajaxStart");p.type=p.type.toUpperCase();p.hasContent=!Nd.test(p.type);d=p.url;p.hasContent||(p.data&&(d=p.url+=(hc.test(d)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=ic.test(d)?d.replace(ic,"$1_="+gc++):d+(hc.test(d)?
"&":"?")+"_="+gc++));p.ifModified&&(E.lastModified[d]&&z.setRequestHeader("If-Modified-Since",E.lastModified[d]),E.etag[d]&&z.setRequestHeader("If-None-Match",E.etag[d]));(p.data&&p.hasContent&&!1!==p.contentType||f.contentType)&&z.setRequestHeader("Content-Type",p.contentType);z.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+qd+"; q=0.01":""):p.accepts["*"]);for(q in p.headers)z.setRequestHeader(q,p.headers[q]);if(p.beforeSend&&
(!1===p.beforeSend.call(u,z,p)||2===C))return z.abort();D="abort";for(q in{success:1,error:1,complete:1})z[q](p[q]);if(g=da(Rb,p,f,z)){z.readyState=1;r&&v.trigger("ajaxSend",[z,p]);if(2===C)return z;p.async&&0<p.timeout&&(m=b.setTimeout(function(){z.abort("timeout")},p.timeout));try{C=1,g.send(A,h)}catch(B){if(2>C)h(-1,B);else throw B;}}else h(-1,"No Transport");return z},getJSON:function(b,c,f){return E.get(b,c,f,"json")},getScript:function(b,c){return E.get(b,void 0,c,"script")}});E.each(["get",
"post"],function(b,c){E[c]=function(b,f,h,g){E.isFunction(f)&&(g=g||h,h=f,f=void 0);return E.ajax(E.extend({url:b,type:c,dataType:g,data:f,success:h},E.isPlainObject(b)&&b))}});E._evalUrl=function(b){return E.ajax({url:b,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};E.fn.extend({wrapAll:function(b){var c;if(E.isFunction(b))return this.each(function(c){E(this).wrapAll(b.call(this,c))});this[0]&&(c=E(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),
c.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this));return this},wrapInner:function(b){return E.isFunction(b)?this.each(function(c){E(this).wrapInner(b.call(this,c))}):this.each(function(){var c=E(this),f=c.contents();f.length?f.wrapAll(b):c.append(b)})},wrap:function(b){var c=E.isFunction(b);return this.each(function(f){E(this).wrapAll(c?b.call(this,f):b)})},unwrap:function(){return this.parent().each(function(){E.nodeName(this,"body")||E(this).replaceWith(this.childNodes)}).end()}});
E.expr.filters.hidden=function(b){return!E.expr.filters.visible(b)};E.expr.filters.visible=function(b){return 0<b.offsetWidth||0<b.offsetHeight||0<b.getClientRects().length};var Rc=/%20/g,Dd=/\[\]$/,Od=/\r?\n/g,Pd=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;E.param=function(b,c){var f,h=[],g=function(b,c){c=E.isFunction(c)?c():null==c?"":c;h[h.length]=encodeURIComponent(b)+"="+encodeURIComponent(c)};void 0===c&&(c=E.ajaxSettings&&E.ajaxSettings.traditional);if(E.isArray(b)||
b.jquery&&!E.isPlainObject(b))E.each(b,function(){g(this.name,this.value)});else for(f in b)Y(f,b[f],c,g);return h.join("&").replace(Rc,"+")};E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=E.prop(this,"elements");return b?E.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!E(this).is(":disabled")&&Fe.test(this.nodeName)&&!Pd.test(b)&&(this.checked||!xb.test(b))}).map(function(b,c){var f=E(this).val();
return null==f?null:E.isArray(f)?E.map(f,function(b){return{name:c.name,value:b.replace(Od,"\r\n")}}):{name:c.name,value:f.replace(Od,"\r\n")}}).get()}});E.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(c){}};var Ge={0:200,1223:204},jc=E.ajaxSettings.xhr();ga.cors=!!jc&&"withCredentials"in jc;ga.ajax=jc=!!jc;E.ajaxTransport(function(c){var f,h;if(ga.cors||jc&&!c.crossDomain)return{send:function(g,d){var k,l=c.xhr();l.open(c.type,c.url,c.async,c.username,c.password);if(c.xhrFields)for(k in c.xhrFields)l[k]=
c.xhrFields[k];c.mimeType&&l.overrideMimeType&&l.overrideMimeType(c.mimeType);c.crossDomain||g["X-Requested-With"]||(g["X-Requested-With"]="XMLHttpRequest");for(k in g)l.setRequestHeader(k,g[k]);f=function(b){return function(){f&&(f=h=l.onload=l.onerror=l.onabort=l.onreadystatechange=null,"abort"===b?l.abort():"error"===b?"number"!==typeof l.status?d(0,"error"):d(l.status,l.statusText):d(Ge[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!==typeof l.responseText?{binary:l.response}:
{text:l.responseText},l.getAllResponseHeaders()))}};l.onload=f();h=l.onerror=f("error");void 0!==l.onabort?l.onabort=h:l.onreadystatechange=function(){4===l.readyState&&b.setTimeout(function(){f&&h()})};f=f("abort");try{l.send(c.hasContent&&c.data||null)}catch(m){if(f)throw m;}},abort:function(){f&&f()}}});E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){E.globalEval(b);
return b}}});E.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});E.ajaxTransport("script",function(b){if(b.crossDomain){var c,f;return{send:function(h,g){c=E("<script>").prop({charset:b.scriptCharset,src:b.url}).on("load error",f=function(b){c.remove();f=null;b&&g("error"===b.type?404:200,b.type)});ba.head.appendChild(c[0])},abort:function(){f&&f()}}}});var rd=[],yc=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=rd.pop()||
E.expando+"_"+gc++;this[b]=!0;return b}});E.ajaxPrefilter("json jsonp",function(c,f,h){var g,d,k,l=!1!==c.jsonp&&(yc.test(c.url)?"url":"string"===typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&yc.test(c.data)&&"data");if(l||"jsonp"===c.dataTypes[0])return g=c.jsonpCallback=E.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,l?c[l]=c[l].replace(yc,"$1"+g):!1!==c.jsonp&&(c.url+=(hc.test(c.url)?"&":"?")+c.jsonp+"="+g),c.converters["script json"]=function(){k||
E.error(g+" was not called");return k[0]},c.dataTypes[0]="json",d=b[g],b[g]=function(){k=arguments},h.always(function(){void 0===d?E(b).removeProp(g):b[g]=d;c[g]&&(c.jsonpCallback=f.jsonpCallback,rd.push(g));k&&E.isFunction(d)&&d(k[0]);k=d=void 0}),"script"});ga.createHTMLDocument=function(){var b=ba.implementation.createHTMLDocument("").body;b.innerHTML="<form></form><form></form>";return 2===b.childNodes.length}();E.parseHTML=function(b,c,f){if(!b||"string"!==typeof b)return null;"boolean"===typeof c&&
(f=c,c=!1);c=c||(ga.createHTMLDocument?ba.implementation.createHTMLDocument(""):ba);var h=$a.exec(b);f=!f&&[];if(h)return[c.createElement(h[1])];h=n([b],c,f);f&&f.length&&E(f).remove();return E.merge([],h.childNodes)};var sd=E.fn.load;E.fn.load=function(b,c,f){if("string"!==typeof b&&sd)return sd.apply(this,arguments);var h,g,d,k=this,l=b.indexOf(" ");-1<l&&(h=E.trim(b.slice(l)),b=b.slice(0,l));E.isFunction(c)?(f=c,c=void 0):c&&"object"===typeof c&&(g="POST");0<k.length&&E.ajax({url:b,type:g||"GET",
dataType:"html",data:c}).done(function(b){d=arguments;k.html(h?E("<div>").append(E.parseHTML(b)).find(h):b)}).always(f&&function(b,c){k.each(function(){f.apply(k,d||[b.responseText,c,b])})});return this};E.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,c){E.fn[c]=function(b){return this.on(c,b)}});E.expr.filters.animated=function(b){return E.grep(E.timers,function(c){return b===c.elem}).length};E.offset={setOffset:function(b,c,f){var h,g,d,k=E.css(b,"position"),
l=E(b),m={};"static"===k&&(b.style.position="relative");d=l.offset();g=E.css(b,"top");h=E.css(b,"left");("absolute"===k||"fixed"===k)&&-1<(g+h).indexOf("auto")?(h=l.position(),g=h.top,h=h.left):(g=parseFloat(g)||0,h=parseFloat(h)||0);E.isFunction(c)&&(c=c.call(b,f,E.extend({},d)));null!=c.top&&(m.top=c.top-d.top+g);null!=c.left&&(m.left=c.left-d.left+h);"using"in c?c.using.call(b,m):l.css(m)}};E.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(c){E.offset.setOffset(this,
b,c)});var c,f;f=this[0];var h={top:0,left:0},g=f&&f.ownerDocument;if(g){c=g.documentElement;if(!E.contains(c,f))return h;h=f.getBoundingClientRect();f=Z(g);return{top:h.top+f.pageYOffset-c.clientTop,left:h.left+f.pageXOffset-c.clientLeft}}},position:function(){if(this[0]){var b,c,f=this[0],h={top:0,left:0};"fixed"===E.css(f,"position")?c=f.getBoundingClientRect():(b=this.offsetParent(),c=this.offset(),E.nodeName(b[0],"html")||(h=b.offset()),h.top+=E.css(b[0],"borderTopWidth",!0),h.left+=E.css(b[0],
"borderLeftWidth",!0));return{top:c.top-h.top-E.css(f,"marginTop",!0),left:c.left-h.left-E.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===E.css(b,"position");)b=b.offsetParent;return b||vc})}});E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var f="pageYOffset"===c;E.fn[b]=function(h){return Va(this,function(b,h,g){var d=Z(b);if(void 0===g)return d?d[c]:b[h];d?d.scrollTo(f?d.pageXOffset:g,f?g:d.pageYOffset):
b[h]=g},b,h,arguments.length)}});E.each(["top","left"],function(b,c){E.cssHooks[c]=I(ga.pixelPosition,function(b,f){if(f)return f=H(b,c),Hc.test(f)?E(b).position()[c]+"px":f})});E.each({Height:"height",Width:"width"},function(b,c){E.each({padding:"inner"+b,content:c,"":"outer"+b},function(f,h){E.fn[h]=function(h,g){var d=arguments.length&&(f||"boolean"!==typeof h),k=f||(!0===h||!0===g?"margin":"border");return Va(this,function(c,f,h){return E.isWindow(c)?c.document.documentElement["client"+b]:9===
c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+b],f["scroll"+b],c.body["offset"+b],f["offset"+b],f["client"+b])):void 0===h?E.css(c,f,k):E.style(c,f,h,k)},c,d?h:void 0,d,null)}})});E.fn.extend({bind:function(b,c,f){return this.on(b,null,c,f)},unbind:function(b,c){return this.off(b,null,c)},delegate:function(b,c,f,h){return this.on(c,b,f,h)},undelegate:function(b,c,f){return 1===arguments.length?this.off(b,"**"):this.off(c,b||"**",f)},size:function(){return this.length}});E.fn.andSelf=E.fn.addBack;
"function"===typeof define&&define.amd&&define("jquery",[],function(){return E});var He=b.jQuery,nb=b.$;E.noConflict=function(c){b.$===E&&(b.$=nb);c&&b.jQuery===E&&(b.jQuery=He);return E};c||(b.jQuery=b.$=E);return E});function atvImg(){function b(b){return 0<b?1:0===b?0:-1}function c(c,f,h,g,d,k){var l=f_scrollTop(),m=f_scrollLeft(),n=f?c.touches[0].pageX:c.pageX,r=f?c.touches[0].pageY:c.pageY,q=h.getBoundingClientRect(),p=h.clientWidth||h.offsetWidth||h.scrollWidth,u=h.clientHeight||h.offsetHeight||h.scrollHeight;c=160/p;f=.52-(n-q.left-m)/p;var v=.52-(r-q.top-l)/u,w=r-q.top-l-u/2,n=n-q.left-m-p/2;f=.6<Math.abs(f)?.6*b(f):f;v=.6<Math.abs(v)?.6*b(v):v;n=140<Math.abs(n)?140*b(n):n;w=140<Math.abs(w)?140*b(w):w;m=
"rotateX("+.1*(w-v)*c+"deg) rotateY("+.07*(f-n)*c+"deg) translateZ(20px)";n=180*Math.atan2(w,n)/Math.PI-90;0>n&&(n+=360);h.firstChild.classList.contains("over")&&(m+=" scale3d(0.98, 0.98, 0.98)");h.firstChild.style.webkitTransform=m;h.firstChild.style.transform=m;l=r-q.top-l;h=1.2*h.offsetHeight;k.style.background="linear-gradient("+n+"deg, rgba(255,255,255,"+(l>h?h:l)/u*.24+") 0%,rgba(255,255,255,0) 80%)";k.style.webkitTransform="translateX("+f*d-.1+"px) translateY("+v*d-.1+"px)";k.style.transform=
"translateX("+f*d-.1+"px) translateY("+v*d-.1+"px)";k=d;for(h=0;h<d;h++)g[h].style.webkitTransform="translateX("+2.5*h/c*k*f+"px) translateY("+2.5*h/c*d*v+"px)",g[h].style.transform="translateX("+2.5*h/c*k*f+"px) translateY("+2.5*h/c*d*v+"px)",k--}function d(b){var c=Math.random();b=b.getElementsByClassName("bg")[0];b.classList.remove("fly");b.classList.remove("fade");0<c&&.5>c||0===c?b.classList.add("fly"):b.classList.add("fade")}function g(b,c,f,h,g){b=c.firstChild;b.classList.remove("over");b.style.webkitTransform=
"";b.style.transform="";g.style.cssText="";for(g=0;g<h;g++)f[g].style.webkitTransform="",f[g].style.transform=""}var f=document;f.getElementsByTagName("body");var h=window,k=f.querySelectorAll(".atvImg"),l=k.length,m="ontouchstart"in h||navigator.msMaxTouchPoints;if(!(0>=l)){for(var p=0;p<l;p++){var t=k[p],u=t.querySelectorAll(".atvImg-layer"),n=u.length;if(!(0>=n)){for(;t.firstChild;)t.removeChild(t.firstChild);var q=f.createElement("div"),r=f.createElement("div"),w=f.createElement("div"),v=f.createElement("div"),
y=[];t.id="atvImg__"+p;q.className="atvImg-container";r.className="atvImg-shine";w.className="atvImg-shadow";v.className="atvImg-layers";for(var A=0;A<n;A++){var x=f.createElement("div");if("true"===u[A].getAttribute("data-text"))x.innerHTML=u[A].innerHTML;else{var z=u[A].getAttribute("data-img");x.style.backgroundImage="url("+z+")"}x.className="atvImg-rendered-layer";x.setAttribute("data-layer",A);v.appendChild(x);if(1<u[A].classList.length)for(z=0;z<u[A].classList.length;z++)"atvImg-layer"!==u[A].classList[z]&&
x.classList.add(u[A].classList[z]);y.push(x)}q.appendChild(w);q.appendChild(v);q.appendChild(r);t.appendChild(q);u=t.clientWidth||t.offsetWidth||t.scrollWidth;t.style.webkitTransform="perspective("+3*u+"px)";t.style.transform="perspective("+3*u+"px)";m?(h.preventScroll=!1,function(b,f,m,n){t.addEventListener("touchmove",function(g){h.preventScroll&&g.preventDefault();c(g,!0,b,f,m,n)});t.addEventListener("touchstart",function(c){h.preventScroll=!1;for(c=0;c<l;c++)k[c].firstChild.classList.remove("over");
b.firstChild.classList.add("over");d(b.firstChild)});t.addEventListener("touchend",function(c){h.preventScroll=!1;g(c,b,f,m,n)})}(t,y,n,r)):function(b,f,h,k){t.addEventListener("mousemove",function(g){c(g,!1,b,f,h,k)});t.addEventListener("mouseenter",function(c){b.firstChild.classList.add("over");d(b.firstChild)});t.addEventListener("mouseleave",function(c){g(c,b,f,h,k)})}(t,y,n,r)}}window.addEventListener("contextmenu",function(b){for(b=0;b<l;b++)k[b].firstChild.classList.remove("over")},!1)}};var THREE={REVISION:"72"};"function"===typeof define&&define.amd?define("three",THREE):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=THREE);
void 0!==self.requestAnimationFrame&&void 0!==self.cancelAnimationFrame||function(){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!self.requestAnimationFrame;++d)self.requestAnimationFrame=self[c[d]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[c[d]+"CancelAnimationFrame"]||self[c[d]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(c){var f=Date.now(),h=Math.max(0,16-(f-b)),d=self.setTimeout(function(){c(f+
h)},h);b=f+h;return d});void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(b){self.clearTimeout(b)})}();void 0===Math.sign&&(Math.sign=function(b){return 0>b?-1:0<b?1:+b});void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};THREE.CullFaceNone=0;THREE.CullFaceBack=1;
THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;
THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.MinEquation=103;THREE.MaxEquation=104;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.NeverDepth=0;THREE.AlwaysDepth=1;THREE.LessDepth=2;THREE.LessEqualDepth=3;
THREE.EqualDepth=4;THREE.GreaterEqualDepth=5;THREE.GreaterDepth=6;THREE.NotEqualDepth=7;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=300;THREE.CubeReflectionMapping=301;THREE.CubeRefractionMapping=302;THREE.EquirectangularReflectionMapping=303;THREE.EquirectangularRefractionMapping=304;THREE.SphericalReflectionMapping=305;THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;
THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.HalfFloatType=1025;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;
THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGBEFormat=THREE.RGBAFormat;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.RGB_PVRTC_4BPPV1_Format=2100;THREE.RGB_PVRTC_2BPPV1_Format=2101;THREE.RGBA_PVRTC_4BPPV1_Format=2102;THREE.RGBA_PVRTC_2BPPV1_Format=2103;
THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(b,c){console.warn("THREE.Projector: .projectVector() is now vector.project().");b.project(c)};this.unprojectVector=function(b,c){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");b.unproject(c)};this.pickingRay=function(b,c){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};
THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};THREE.Color=function(b){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(b)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(b){b instanceof THREE.Color?this.copy(b):"number"===typeof b?this.setHex(b):"string"===typeof b&&this.setStyle(b);return this},setHex:function(b){b=Math.floor(b);this.r=(b>>16&255)/255;this.g=(b>>8&255)/255;this.b=(b&255)/255;return this},setRGB:function(b,c,d){this.r=b;this.g=c;this.b=d;return this},setHSL:function(){function b(b,d,g){0>g&&(g+=1);1<g&&--g;return g<1/6?b+6*(d-b)*g:.5>g?d:g<2/3?b+6*(d-b)*(2/3-g):b}return function(c,
d,g){c=THREE.Math.euclideanModulo(c,1);d=THREE.Math.clamp(d,0,1);g=THREE.Math.clamp(g,0,1);0===d?this.r=this.g=this.b=g:(d=.5>=g?g*(1+d):g+d-g*d,g=2*g-d,this.r=b(g,d,c+1/3),this.g=b(g,d,c),this.b=b(g,d,c-1/3));return this}}(),setStyle:function(b){var c=function(c){c=parseFloat(c);1>c&&console.warn("THREE.Color: Alpha component of color "+b+" will be ignored.");return c},d;if(d=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var g=d[2];switch(d[1]){case "rgb":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/.exec(g))return this.r=
Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,this;if(d=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(g))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,this;break;case "rgba":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(g))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/
255,this.b=Math.min(255,parseInt(d[3],10))/255,c(d[4]),this;if(d=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(g))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,c(d[4]),this;break;case "hsl":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(g)){var g=parseFloat(d[1]),f=parseInt(d[2],10)/100,h=parseInt(d[3],10)/100;return this.setHSL(g,f,h)}break;case "hsla":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(g))return g=
parseFloat(d[1]),f=parseInt(d[2],10)/100,h=parseInt(d[3],10)/100,c(d[4]),this.setHSL(g,f,h)}}else if(d=/^\#([A-Fa-f0-9]+)$/.exec(b)){c=d[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}b&&0<b.length&&(c=THREE.ColorKeywords[b],
void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+b));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(b){this.r=b.r;this.g=b.g;this.b=b.b;return this},copyGammaToLinear:function(b,c){void 0===c&&(c=2);this.r=Math.pow(b.r,c);this.g=Math.pow(b.g,c);this.b=Math.pow(b.b,c);return this},copyLinearToGamma:function(b,c){void 0===c&&(c=2);var d=0<c?1/c:1;this.r=Math.pow(b.r,d);this.g=Math.pow(b.g,d);this.b=Math.pow(b.b,d);return this},convertGammaToLinear:function(){var b=
this.r,c=this.g,d=this.b;this.r=b*b;this.g=c*c;this.b=d*d;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(b){b=b||{h:0,s:0,l:0};var c=this.r,d=this.g,g=this.b,f=Math.max(c,d,g),h=Math.min(c,d,g),k,l=(h+f)/2;if(h===f)h=k=0;else{var m=f-h,h=.5>=l?m/(f+h):
m/(2-f-h);switch(f){case c:k=(d-g)/m+(d<g?6:0);break;case d:k=(g-c)/m+2;break;case g:k=(c-d)/m+4}k/=6}b.h=k;b.s=h;b.l=l;return b},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(b,c,d){var g=this.getHSL();g.h+=b;g.s+=c;g.l+=d;this.setHSL(g.h,g.s,g.l);return this},add:function(b){this.r+=b.r;this.g+=b.g;this.b+=b.b;return this},addColors:function(b,c){this.r=b.r+c.r;this.g=b.g+c.g;this.b=b.b+c.b;return this},addScalar:function(b){this.r+=
b;this.g+=b;this.b+=b;return this},multiply:function(b){this.r*=b.r;this.g*=b.g;this.b*=b.b;return this},multiplyScalar:function(b){this.r*=b;this.g*=b;this.b*=b;return this},lerp:function(b,c){this.r+=(b.r-this.r)*c;this.g+=(b.g-this.g)*c;this.b+=(b.b-this.b)*c;return this},equals:function(b){return b.r===this.r&&b.g===this.g&&b.b===this.b},fromArray:function(b){this.r=b[0];this.g=b[1];this.b=b[2];return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this.r;b[c+1]=this.g;b[c+
2]=this.b;return b}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(b,c,d,g){this._x=b||0;this._y=c||0;this._z=d||0;this._w=void 0!==g?g:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(b){this._x=b;this.onChangeCallback()},get y(){return this._y},set y(b){this._y=b;this.onChangeCallback()},get z(){return this._z},set z(b){this._z=b;this.onChangeCallback()},get w(){return this._w},set w(b){this._w=b;this.onChangeCallback()},set:function(b,c,d,g){this._x=b;this._y=c;this._z=d;this._w=g;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},
copy:function(b){this._x=b.x;this._y=b.y;this._z=b.z;this._w=b.w;this.onChangeCallback();return this},setFromEuler:function(b,c){if(!1===b instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var d=Math.cos(b._x/2),g=Math.cos(b._y/2),f=Math.cos(b._z/2),h=Math.sin(b._x/2),k=Math.sin(b._y/2),l=Math.sin(b._z/2),m=b.order;"XYZ"===m?(this._x=h*g*f+d*k*l,this._y=d*k*f-h*g*l,this._z=d*g*l+h*k*f,this._w=d*g*f-h*k*l):"YXZ"===
m?(this._x=h*g*f+d*k*l,this._y=d*k*f-h*g*l,this._z=d*g*l-h*k*f,this._w=d*g*f+h*k*l):"ZXY"===m?(this._x=h*g*f-d*k*l,this._y=d*k*f+h*g*l,this._z=d*g*l+h*k*f,this._w=d*g*f-h*k*l):"ZYX"===m?(this._x=h*g*f-d*k*l,this._y=d*k*f+h*g*l,this._z=d*g*l-h*k*f,this._w=d*g*f+h*k*l):"YZX"===m?(this._x=h*g*f+d*k*l,this._y=d*k*f+h*g*l,this._z=d*g*l-h*k*f,this._w=d*g*f-h*k*l):"XZY"===m&&(this._x=h*g*f-d*k*l,this._y=d*k*f-h*g*l,this._z=d*g*l+h*k*f,this._w=d*g*f+h*k*l);if(!1!==c)this.onChangeCallback();return this},setFromAxisAngle:function(b,
c){var d=c/2,g=Math.sin(d);this._x=b.x*g;this._y=b.y*g;this._z=b.z*g;this._w=Math.cos(d);this.onChangeCallback();return this},setFromRotationMatrix:function(b){var c=b.elements,d=c[0];b=c[4];var g=c[8],f=c[1],h=c[5],k=c[9],l=c[2],m=c[6],c=c[10],p=d+h+c;0<p?(d=.5/Math.sqrt(p+1),this._w=.25/d,this._x=(m-k)*d,this._y=(g-l)*d,this._z=(f-b)*d):d>h&&d>c?(d=2*Math.sqrt(1+d-h-c),this._w=(m-k)/d,this._x=.25*d,this._y=(b+f)/d,this._z=(g+l)/d):h>c?(d=2*Math.sqrt(1+h-d-c),this._w=(g-l)/d,this._x=(b+f)/d,this._y=
.25*d,this._z=(k+m)/d):(d=2*Math.sqrt(1+c-d-h),this._w=(f-b)/d,this._x=(g+l)/d,this._y=(k+m)/d,this._z=.25*d);this.onChangeCallback();return this},setFromUnitVectors:function(){var b,c;return function(d,g){void 0===b&&(b=new THREE.Vector3);c=d.dot(g)+1;1E-6>c?(c=0,Math.abs(d.x)>Math.abs(d.z)?b.set(-d.y,d.x,0):b.set(0,-d.z,d.y)):b.crossVectors(d,g);this._x=b.x;this._y=b.y;this._z=b.z;this._w=c;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(b){return this._x*b._x+this._y*b._y+this._z*b._z+this._w*b._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var b=this.length();0===b?(this._z=this._y=this._x=0,this._w=1):(b=1/b,this._x*=b,this._y*=b,this._z*=b,this._w*=b);this.onChangeCallback();return this},
multiply:function(b,c){return void 0!==c?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(b,c)):this.multiplyQuaternions(this,b)},multiplyQuaternions:function(b,c){var d=b._x,g=b._y,f=b._z,h=b._w,k=c._x,l=c._y,m=c._z,p=c._w;this._x=d*p+h*k+g*m-f*l;this._y=g*p+h*l+f*k-d*m;this._z=f*p+h*m+d*l-g*k;this._w=h*p-d*k-g*l-f*m;this.onChangeCallback();return this},multiplyVector3:function(b){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return b.applyQuaternion(this)},slerp:function(b,c){if(0===c)return this;if(1===c)return this.copy(b);var d=this._x,g=this._y,f=this._z,h=this._w,k=h*b._w+d*b._x+g*b._y+f*b._z;0>k?(this._w=-b._w,this._x=-b._x,this._y=-b._y,this._z=-b._z,k=-k):this.copy(b);if(1<=k)return this._w=h,this._x=d,this._y=g,this._z=f,this;var l=Math.acos(k),m=Math.sqrt(1-k*k);if(.001>Math.abs(m))return this._w=.5*(h+this._w),this._x=.5*(d+this._x),this._y=.5*(g+this._y),this._z=.5*(f+this._z),this;k=Math.sin((1-c)*l)/m;l=
Math.sin(c*l)/m;this._w=h*k+this._w*l;this._x=d*k+this._x*l;this._y=g*k+this._y*l;this._z=f*k+this._z*l;this.onChangeCallback();return this},equals:function(b){return b._x===this._x&&b._y===this._y&&b._z===this._z&&b._w===this._w},fromArray:function(b,c){void 0===c&&(c=0);this._x=b[c];this._y=b[c+1];this._z=b[c+2];this._w=b[c+3];this.onChangeCallback();return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this._x;b[c+1]=this._y;b[c+2]=this._z;b[c+3]=this._w;return b},onChange:function(b){this.onChangeCallback=
b;return this},onChangeCallback:function(){}};THREE.Quaternion.slerp=function(b,c,d,g){return d.copy(b).slerp(c,g)};THREE.Vector2=function(b,c){this.x=b||0;this.y=c||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(b,c){this.x=b;this.y=c;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setComponent:function(b,c){switch(b){case 0:this.x=c;break;case 1:this.y=c;break;default:throw Error("index is out of range: "+b);}},getComponent:function(b){switch(b){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+b);}},clone:function(){return new this.constructor(this.x,this.y)},
copy:function(b){this.x=b.x;this.y=b.y;return this},add:function(b,c){if(void 0!==c)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(b,c);this.x+=b.x;this.y+=b.y;return this},addScalar:function(b){this.x+=b;this.y+=b;return this},addVectors:function(b,c){this.x=b.x+c.x;this.y=b.y+c.y;return this},addScaledVector:function(b,c){this.x+=b.x*c;this.y+=b.y*c;return this},sub:function(b,c){if(void 0!==c)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(b,c);this.x-=b.x;this.y-=b.y;return this},subScalar:function(b){this.x-=b;this.y-=b;return this},subVectors:function(b,c){this.x=b.x-c.x;this.y=b.y-c.y;return this},multiply:function(b){this.x*=b.x;this.y*=b.y;return this},multiplyScalar:function(b){this.x*=b;this.y*=b;return this},divide:function(b){this.x/=b.x;this.y/=b.y;return this},divideScalar:function(b){0!==b?(b=1/b,this.x*=b,this.y*=b):this.y=this.x=0;return this},min:function(b){this.x>b.x&&(this.x=b.x);this.y>b.y&&(this.y=
b.y);return this},max:function(b){this.x<b.x&&(this.x=b.x);this.y<b.y&&(this.y=b.y);return this},clamp:function(b,c){this.x<b.x?this.x=b.x:this.x>c.x&&(this.x=c.x);this.y<b.y?this.y=b.y:this.y>c.y&&(this.y=c.y);return this},clampScalar:function(){var b,c;return function(d,g){void 0===b&&(b=new THREE.Vector2,c=new THREE.Vector2);b.set(d,d);c.set(g,g);return this.clamp(b,c)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);
this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(b){return this.x*b.x+this.y*b.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+
Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(b){return Math.sqrt(this.distanceToSquared(b))},distanceToSquared:function(b){var c=this.x-b.x;b=this.y-b.y;return c*c+b*b},setLength:function(b){var c=this.length();0!==c&&b!==c&&this.multiplyScalar(b/c);return this},lerp:function(b,c){this.x+=(b.x-this.x)*c;this.y+=(b.y-this.y)*c;return this},lerpVectors:function(b,c,d){this.subVectors(c,b).multiplyScalar(d).add(b);return this},equals:function(b){return b.x===
this.x&&b.y===this.y},fromArray:function(b,c){void 0===c&&(c=0);this.x=b[c];this.y=b[c+1];return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this.x;b[c+1]=this.y;return b},fromAttribute:function(b,c,d){void 0===d&&(d=0);c=c*b.itemSize+d;this.x=b.array[c];this.y=b.array[c+1];return this}};THREE.Vector3=function(b,c,d){this.x=b||0;this.y=c||0;this.z=d||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(b,c,d){this.x=b;this.y=c;this.z=d;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setZ:function(b){this.z=b;return this},setComponent:function(b,c){switch(b){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;default:throw Error("index is out of range: "+b);}},getComponent:function(b){switch(b){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
b);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(b){this.x=b.x;this.y=b.y;this.z=b.z;return this},add:function(b,c){if(void 0!==c)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(b,c);this.x+=b.x;this.y+=b.y;this.z+=b.z;return this},addScalar:function(b){this.x+=b;this.y+=b;this.z+=b;return this},addVectors:function(b,c){this.x=b.x+c.x;this.y=b.y+c.y;this.z=b.z+c.z;return this},addScaledVector:function(b,
c){this.x+=b.x*c;this.y+=b.y*c;this.z+=b.z*c;return this},sub:function(b,c){if(void 0!==c)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(b,c);this.x-=b.x;this.y-=b.y;this.z-=b.z;return this},subScalar:function(b){this.x-=b;this.y-=b;this.z-=b;return this},subVectors:function(b,c){this.x=b.x-c.x;this.y=b.y-c.y;this.z=b.z-c.z;return this},multiply:function(b,c){if(void 0!==c)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.multiplyVectors(b,c);this.x*=b.x;this.y*=b.y;this.z*=b.z;return this},multiplyScalar:function(b){this.x*=b;this.y*=b;this.z*=b;return this},multiplyVectors:function(b,c){this.x=b.x*c.x;this.y=b.y*c.y;this.z=b.z*c.z;return this},applyEuler:function(){var b;return function(c){!1===c instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===b&&(b=new THREE.Quaternion);this.applyQuaternion(b.setFromEuler(c));return this}}(),
applyAxisAngle:function(){var b;return function(c,d){void 0===b&&(b=new THREE.Quaternion);this.applyQuaternion(b.setFromAxisAngle(c,d));return this}}(),applyMatrix3:function(b){var c=this.x,d=this.y,g=this.z;b=b.elements;this.x=b[0]*c+b[3]*d+b[6]*g;this.y=b[1]*c+b[4]*d+b[7]*g;this.z=b[2]*c+b[5]*d+b[8]*g;return this},applyMatrix4:function(b){var c=this.x,d=this.y,g=this.z;b=b.elements;this.x=b[0]*c+b[4]*d+b[8]*g+b[12];this.y=b[1]*c+b[5]*d+b[9]*g+b[13];this.z=b[2]*c+b[6]*d+b[10]*g+b[14];return this},
applyProjection:function(b){var c=this.x,d=this.y,g=this.z;b=b.elements;var f=1/(b[3]*c+b[7]*d+b[11]*g+b[15]);this.x=(b[0]*c+b[4]*d+b[8]*g+b[12])*f;this.y=(b[1]*c+b[5]*d+b[9]*g+b[13])*f;this.z=(b[2]*c+b[6]*d+b[10]*g+b[14])*f;return this},applyQuaternion:function(b){var c=this.x,d=this.y,g=this.z,f=b.x,h=b.y,k=b.z;b=b.w;var l=b*c+h*g-k*d,m=b*d+k*c-f*g,p=b*g+f*d-h*c,c=-f*c-h*d-k*g;this.x=l*b+c*-f+m*-k-p*-h;this.y=m*b+c*-h+p*-f-l*-k;this.z=p*b+c*-k+l*-h-m*-f;return this},project:function(){var b;return function(c){void 0===
b&&(b=new THREE.Matrix4);b.multiplyMatrices(c.projectionMatrix,b.getInverse(c.matrixWorld));return this.applyProjection(b)}}(),unproject:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.multiplyMatrices(c.matrixWorld,b.getInverse(c.projectionMatrix));return this.applyProjection(b)}}(),transformDirection:function(b){var c=this.x,d=this.y,g=this.z;b=b.elements;this.x=b[0]*c+b[4]*d+b[8]*g;this.y=b[1]*c+b[5]*d+b[9]*g;this.z=b[2]*c+b[6]*d+b[10]*g;this.normalize();return this},divide:function(b){this.x/=
b.x;this.y/=b.y;this.z/=b.z;return this},divideScalar:function(b){0!==b?(b=1/b,this.x*=b,this.y*=b,this.z*=b):this.z=this.y=this.x=0;return this},min:function(b){this.x>b.x&&(this.x=b.x);this.y>b.y&&(this.y=b.y);this.z>b.z&&(this.z=b.z);return this},max:function(b){this.x<b.x&&(this.x=b.x);this.y<b.y&&(this.y=b.y);this.z<b.z&&(this.z=b.z);return this},clamp:function(b,c){this.x<b.x?this.x=b.x:this.x>c.x&&(this.x=c.x);this.y<b.y?this.y=b.y:this.y>c.y&&(this.y=c.y);this.z<b.z?this.z=b.z:this.z>c.z&&
(this.z=c.z);return this},clampScalar:function(){var b,c;return function(d,g){void 0===b&&(b=new THREE.Vector3,c=new THREE.Vector3);b.set(d,d,d);c.set(g,g,g);return this.clamp(b,c)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},
roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(b){var c=this.length();0!==c&&b!==c&&this.multiplyScalar(b/c);return this},lerp:function(b,c){this.x+=(b.x-this.x)*c;this.y+=(b.y-this.y)*c;this.z+=(b.z-this.z)*c;return this},lerpVectors:function(b,c,d){this.subVectors(c,b).multiplyScalar(d).add(b);return this},cross:function(b,c){if(void 0!==c)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
this.crossVectors(b,c);var d=this.x,g=this.y,f=this.z;this.x=g*b.z-f*b.y;this.y=f*b.x-d*b.z;this.z=d*b.y-g*b.x;return this},crossVectors:function(b,c){var d=b.x,g=b.y,f=b.z,h=c.x,k=c.y,l=c.z;this.x=g*l-f*k;this.y=f*h-d*l;this.z=d*k-g*h;return this},projectOnVector:function(){var b,c;return function(d){void 0===b&&(b=new THREE.Vector3);b.copy(d).normalize();c=this.dot(b);return this.copy(b).multiplyScalar(c)}}(),projectOnPlane:function(){var b;return function(c){void 0===b&&(b=new THREE.Vector3);b.copy(this).projectOnVector(c);
return this.sub(b)}}(),reflect:function(){var b;return function(c){void 0===b&&(b=new THREE.Vector3);return this.sub(b.copy(c).multiplyScalar(2*this.dot(c)))}}(),angleTo:function(b){b=this.dot(b)/(this.length()*b.length());return Math.acos(THREE.Math.clamp(b,-1,1))},distanceTo:function(b){return Math.sqrt(this.distanceToSquared(b))},distanceToSquared:function(b){var c=this.x-b.x,d=this.y-b.y;b=this.z-b.z;return c*c+d*d+b*b},setEulerFromRotationMatrix:function(b,c){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},
setEulerFromQuaternion:function(b,c){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(b){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(b)},getScaleFromMatrix:function(b){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(b)},getColumnFromMatrix:function(b,
c){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,c)},setFromMatrixPosition:function(b){this.x=b.elements[12];this.y=b.elements[13];this.z=b.elements[14];return this},setFromMatrixScale:function(b){var c=this.set(b.elements[0],b.elements[1],b.elements[2]).length(),d=this.set(b.elements[4],b.elements[5],b.elements[6]).length();b=this.set(b.elements[8],b.elements[9],b.elements[10]).length();this.x=c;this.y=d;this.z=
b;return this},setFromMatrixColumn:function(b,c){var d=4*b,g=c.elements;this.x=g[d];this.y=g[d+1];this.z=g[d+2];return this},equals:function(b){return b.x===this.x&&b.y===this.y&&b.z===this.z},fromArray:function(b,c){void 0===c&&(c=0);this.x=b[c];this.y=b[c+1];this.z=b[c+2];return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this.x;b[c+1]=this.y;b[c+2]=this.z;return b},fromAttribute:function(b,c,d){void 0===d&&(d=0);c=c*b.itemSize+d;this.x=b.array[c];this.y=b.array[c+1];this.z=
b.array[c+2];return this}};THREE.Vector4=function(b,c,d,g){this.x=b||0;this.y=c||0;this.z=d||0;this.w=void 0!==g?g:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(b,c,d,g){this.x=b;this.y=c;this.z=d;this.w=g;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setZ:function(b){this.z=b;return this},setW:function(b){this.w=b;return this},setComponent:function(b,c){switch(b){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;case 3:this.w=c;break;default:throw Error("index is out of range: "+b);}},getComponent:function(b){switch(b){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+b);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(b){this.x=b.x;this.y=b.y;this.z=b.z;this.w=void 0!==b.w?b.w:1;return this},add:function(b,c){if(void 0!==c)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(b,c);this.x+=b.x;this.y+=b.y;this.z+=b.z;this.w+=b.w;return this},
addScalar:function(b){this.x+=b;this.y+=b;this.z+=b;this.w+=b;return this},addVectors:function(b,c){this.x=b.x+c.x;this.y=b.y+c.y;this.z=b.z+c.z;this.w=b.w+c.w;return this},addScaledVector:function(b,c){this.x+=b.x*c;this.y+=b.y*c;this.z+=b.z*c;this.w+=b.w*c;return this},sub:function(b,c){if(void 0!==c)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(b,c);this.x-=b.x;this.y-=b.y;this.z-=b.z;this.w-=b.w;return this},subScalar:function(b){this.x-=
b;this.y-=b;this.z-=b;this.w-=b;return this},subVectors:function(b,c){this.x=b.x-c.x;this.y=b.y-c.y;this.z=b.z-c.z;this.w=b.w-c.w;return this},multiplyScalar:function(b){this.x*=b;this.y*=b;this.z*=b;this.w*=b;return this},applyMatrix4:function(b){var c=this.x,d=this.y,g=this.z,f=this.w;b=b.elements;this.x=b[0]*c+b[4]*d+b[8]*g+b[12]*f;this.y=b[1]*c+b[5]*d+b[9]*g+b[13]*f;this.z=b[2]*c+b[6]*d+b[10]*g+b[14]*f;this.w=b[3]*c+b[7]*d+b[11]*g+b[15]*f;return this},divideScalar:function(b){0!==b?(b=1/b,this.x*=
b,this.y*=b,this.z*=b,this.w*=b):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(b){this.w=2*Math.acos(b.w);var c=Math.sqrt(1-b.w*b.w);1E-4>c?(this.x=1,this.z=this.y=0):(this.x=b.x/c,this.y=b.y/c,this.z=b.z/c);return this},setAxisAngleFromRotationMatrix:function(b){var c,d,g;b=b.elements;var f=b[0];g=b[4];var h=b[8],k=b[1],l=b[5],m=b[9];d=b[2];c=b[6];var p=b[10];if(.01>Math.abs(g-k)&&.01>Math.abs(h-d)&&.01>Math.abs(m-c)){if(.1>Math.abs(g+k)&&.1>Math.abs(h+d)&&.1>
Math.abs(m+c)&&.1>Math.abs(f+l+p-3))return this.set(1,0,0,0),this;b=Math.PI;f=(f+1)/2;l=(l+1)/2;p=(p+1)/2;g=(g+k)/4;h=(h+d)/4;m=(m+c)/4;f>l&&f>p?.01>f?(c=0,g=d=.707106781):(c=Math.sqrt(f),d=g/c,g=h/c):l>p?.01>l?(c=.707106781,d=0,g=.707106781):(d=Math.sqrt(l),c=g/d,g=m/d):.01>p?(d=c=.707106781,g=0):(g=Math.sqrt(p),c=h/g,d=m/g);this.set(c,d,g,b);return this}b=Math.sqrt((c-m)*(c-m)+(h-d)*(h-d)+(k-g)*(k-g));.001>Math.abs(b)&&(b=1);this.x=(c-m)/b;this.y=(h-d)/b;this.z=(k-g)/b;this.w=Math.acos((f+l+p-1)/
2);return this},min:function(b){this.x>b.x&&(this.x=b.x);this.y>b.y&&(this.y=b.y);this.z>b.z&&(this.z=b.z);this.w>b.w&&(this.w=b.w);return this},max:function(b){this.x<b.x&&(this.x=b.x);this.y<b.y&&(this.y=b.y);this.z<b.z&&(this.z=b.z);this.w<b.w&&(this.w=b.w);return this},clamp:function(b,c){this.x<b.x?this.x=b.x:this.x>c.x&&(this.x=c.x);this.y<b.y?this.y=b.y:this.y>c.y&&(this.y=c.y);this.z<b.z?this.z=b.z:this.z>c.z&&(this.z=c.z);this.w<b.w?this.w=b.w:this.w>c.w&&(this.w=c.w);return this},clampScalar:function(){var b,
c;return function(d,g){void 0===b&&(b=new THREE.Vector4,c=new THREE.Vector4);b.set(d,d,d,d);c.set(g,g,g,g);return this.clamp(b,c)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);
return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z+this.w*b.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},
length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(b){var c=this.length();0!==c&&b!==c&&this.multiplyScalar(b/c);return this},lerp:function(b,c){this.x+=(b.x-this.x)*c;this.y+=(b.y-this.y)*c;this.z+=(b.z-this.z)*c;this.w+=(b.w-this.w)*c;return this},lerpVectors:function(b,c,
d){this.subVectors(c,b).multiplyScalar(d).add(b);return this},equals:function(b){return b.x===this.x&&b.y===this.y&&b.z===this.z&&b.w===this.w},fromArray:function(b,c){void 0===c&&(c=0);this.x=b[c];this.y=b[c+1];this.z=b[c+2];this.w=b[c+3];return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this.x;b[c+1]=this.y;b[c+2]=this.z;b[c+3]=this.w;return b},fromAttribute:function(b,c,d){void 0===d&&(d=0);c=c*b.itemSize+d;this.x=b.array[c];this.y=b.array[c+1];this.z=b.array[c+2];this.w=
b.array[c+3];return this}};THREE.Euler=function(b,c,d,g){this._x=b||0;this._y=c||0;this._z=d||0;this._order=g||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(b){this._x=b;this.onChangeCallback()},get y(){return this._y},set y(b){this._y=b;this.onChangeCallback()},get z(){return this._z},set z(b){this._z=b;this.onChangeCallback()},get order(){return this._order},set order(b){this._order=b;this.onChangeCallback()},set:function(b,c,d,g){this._x=b;this._y=c;this._z=d;this._order=g||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,
this._y,this._z,this._order)},copy:function(b){this._x=b._x;this._y=b._y;this._z=b._z;this._order=b._order;this.onChangeCallback();return this},setFromRotationMatrix:function(b,c,d){var g=THREE.Math.clamp,f=b.elements;b=f[0];var h=f[4],k=f[8],l=f[1],m=f[5],p=f[9],t=f[2],u=f[6],f=f[10];c=c||this._order;"XYZ"===c?(this._y=Math.asin(g(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-p,f),this._z=Math.atan2(-h,b)):(this._x=Math.atan2(u,m),this._z=0)):"YXZ"===c?(this._x=Math.asin(-g(p,-1,1)),.99999>Math.abs(p)?
(this._y=Math.atan2(k,f),this._z=Math.atan2(l,m)):(this._y=Math.atan2(-t,b),this._z=0)):"ZXY"===c?(this._x=Math.asin(g(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(-t,f),this._z=Math.atan2(-h,m)):(this._y=0,this._z=Math.atan2(l,b))):"ZYX"===c?(this._y=Math.asin(-g(t,-1,1)),.99999>Math.abs(t)?(this._x=Math.atan2(u,f),this._z=Math.atan2(l,b)):(this._x=0,this._z=Math.atan2(-h,m))):"YZX"===c?(this._z=Math.asin(g(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(-p,m),this._y=Math.atan2(-t,b)):(this._x=
0,this._y=Math.atan2(k,f))):"XZY"===c?(this._z=Math.asin(-g(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(u,m),this._y=Math.atan2(k,b)):(this._x=Math.atan2(-p,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+c);this._order=c;if(!1!==d)this.onChangeCallback();return this},setFromQuaternion:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Matrix4);b.makeRotationFromQuaternion(c);this.setFromRotationMatrix(b,d,g);return this}}(),setFromVector3:function(b,
c){return this.set(b.x,b.y,b.z,c||this._order)},reorder:function(){var b=new THREE.Quaternion;return function(c){b.setFromEuler(this);this.setFromQuaternion(b,c)}}(),equals:function(b){return b._x===this._x&&b._y===this._y&&b._z===this._z&&b._order===this._order},fromArray:function(b){this._x=b[0];this._y=b[1];this._z=b[2];void 0!==b[3]&&(this._order=b[3]);this.onChangeCallback();return this},toArray:function(b,c){void 0===b&&(b=[]);void 0===c&&(c=0);b[c]=this._x;b[c+1]=this._y;b[c+2]=this._z;b[c+
3]=this._order;return b},toVector3:function(b){return b?b.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(b){this.onChangeCallback=b;return this},onChangeCallback:function(){}};THREE.Line3=function(b,c){this.start=void 0!==b?b:new THREE.Vector3;this.end=void 0!==c?c:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(b,c){this.start.copy(b);this.end.copy(c);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.start.copy(b.start);this.end.copy(b.end);return this},center:function(b){return(b||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(b){return(b||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
at:function(b,c){var d=c||new THREE.Vector3;return this.delta(d).multiplyScalar(b).add(this.start)},closestPointToPointParameter:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d,g){b.subVectors(d,this.start);c.subVectors(this.end,this.start);var f=c.dot(c),f=c.dot(b)/f;g&&(f=THREE.Math.clamp(f,0,1));return f}}(),closestPointToPoint:function(b,c,d){b=this.closestPointToPointParameter(b,c);d=d||new THREE.Vector3;return this.delta(d).multiplyScalar(b).add(this.start)},applyMatrix4:function(b){this.start.applyMatrix4(b);
this.end.applyMatrix4(b);return this},equals:function(b){return b.start.equals(this.start)&&b.end.equals(this.end)}};THREE.Box2=function(b,c){this.min=void 0!==b?b:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==c?c:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(b,c){this.min.copy(b);this.max.copy(c);return this},setFromPoints:function(b){this.makeEmpty();for(var c=0,d=b.length;c<d;c++)this.expandByPoint(b[c]);return this},setFromCenterAndSize:function(){var b=new THREE.Vector2;return function(c,d){var g=b.copy(d).multiplyScalar(.5);this.min.copy(c).sub(g);this.max.copy(c).add(g);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.min.copy(b.min);this.max.copy(b.max);
return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(b){return(b||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(b){return(b||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(b){this.min.min(b);this.max.max(b);return this},expandByVector:function(b){this.min.sub(b);this.max.add(b);return this},expandByScalar:function(b){this.min.addScalar(-b);
this.max.addScalar(b);return this},containsPoint:function(b){return b.x<this.min.x||b.x>this.max.x||b.y<this.min.y||b.y>this.max.y?!1:!0},containsBox:function(b){return this.min.x<=b.min.x&&b.max.x<=this.max.x&&this.min.y<=b.min.y&&b.max.y<=this.max.y?!0:!1},getParameter:function(b,c){return(c||new THREE.Vector2).set((b.x-this.min.x)/(this.max.x-this.min.x),(b.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(b){return b.max.x<this.min.x||b.min.x>this.max.x||b.max.y<this.min.y||b.min.y>
this.max.y?!1:!0},clampPoint:function(b,c){return(c||new THREE.Vector2).copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var b=new THREE.Vector2;return function(c){return b.copy(c).clamp(this.min,this.max).sub(c).length()}}(),intersect:function(b){this.min.max(b.min);this.max.min(b.max);return this},union:function(b){this.min.min(b.min);this.max.max(b.max);return this},translate:function(b){this.min.add(b);this.max.add(b);return this},equals:function(b){return b.min.equals(this.min)&&
b.max.equals(this.max)}};THREE.Box3=function(b,c){this.min=void 0!==b?b:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==c?c:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(b,c){this.min.copy(b);this.max.copy(c);return this},setFromPoints:function(b){this.makeEmpty();for(var c=0,d=b.length;c<d;c++)this.expandByPoint(b[c]);return this},setFromCenterAndSize:function(){var b=new THREE.Vector3;return function(c,d){var g=b.copy(d).multiplyScalar(.5);this.min.copy(c).sub(g);this.max.copy(c).add(g);return this}}(),setFromObject:function(){var b=new THREE.Vector3;return function(c){var d=this;c.updateMatrixWorld(!0);
this.makeEmpty();c.traverse(function(c){var f=c.geometry;if(void 0!==f)if(f instanceof THREE.Geometry)for(var h=f.vertices,f=0,k=h.length;f<k;f++)b.copy(h[f]),b.applyMatrix4(c.matrixWorld),d.expandByPoint(b);else if(f instanceof THREE.BufferGeometry&&void 0!==f.attributes.position)for(h=f.attributes.position.array,f=0,k=h.length;f<k;f+=3)b.set(h[f],h[f+1],h[f+2]),b.applyMatrix4(c.matrixWorld),d.expandByPoint(b)});return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.min.copy(b.min);
this.max.copy(b.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(b){return(b||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(b){return(b||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(b){this.min.min(b);this.max.max(b);return this},expandByVector:function(b){this.min.sub(b);
this.max.add(b);return this},expandByScalar:function(b){this.min.addScalar(-b);this.max.addScalar(b);return this},containsPoint:function(b){return b.x<this.min.x||b.x>this.max.x||b.y<this.min.y||b.y>this.max.y||b.z<this.min.z||b.z>this.max.z?!1:!0},containsBox:function(b){return this.min.x<=b.min.x&&b.max.x<=this.max.x&&this.min.y<=b.min.y&&b.max.y<=this.max.y&&this.min.z<=b.min.z&&b.max.z<=this.max.z?!0:!1},getParameter:function(b,c){return(c||new THREE.Vector3).set((b.x-this.min.x)/(this.max.x-
this.min.x),(b.y-this.min.y)/(this.max.y-this.min.y),(b.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(b){return b.max.x<this.min.x||b.min.x>this.max.x||b.max.y<this.min.y||b.min.y>this.max.y||b.max.z<this.min.z||b.min.z>this.max.z?!1:!0},clampPoint:function(b,c){return(c||new THREE.Vector3).copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var b=new THREE.Vector3;return function(c){return b.copy(c).clamp(this.min,this.max).sub(c).length()}}(),getBoundingSphere:function(){var b=
new THREE.Vector3;return function(c){c=c||new THREE.Sphere;c.center=this.center();c.radius=.5*this.size(b).length();return c}}(),intersect:function(b){this.min.max(b.min);this.max.min(b.max);return this},union:function(b){this.min.min(b.min);this.max.max(b.max);return this},applyMatrix4:function(){var b=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(c){b[0].set(this.min.x,this.min.y,
this.min.z).applyMatrix4(c);b[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(c);b[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(c);b[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(c);b[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(c);b[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(c);b[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(c);b[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(c);this.makeEmpty();this.setFromPoints(b);return this}}(),translate:function(b){this.min.add(b);
this.max.add(b);return this},equals:function(b){return b.min.equals(this.min)&&b.max.equals(this.max)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(b,c,d,g,f,h,k,l,m){var p=this.elements;p[0]=b;p[3]=c;p[6]=d;p[1]=g;p[4]=f;p[7]=h;p[2]=k;p[5]=l;p[8]=m;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(b){b=b.elements;this.set(b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8]);return this},multiplyVector3:function(b){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");
return b.applyMatrix3(this)},multiplyVector3Array:function(b){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(b)},applyToVector3Array:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Vector3);void 0===d&&(d=0);void 0===g&&(g=c.length);for(var f=0;f<g;f+=3,d+=3)b.fromArray(c,d),b.applyMatrix3(this),b.toArray(c,d);return c}}(),applyToBuffer:function(){var b;return function(c,d,g){void 0===
b&&(b=new THREE.Vector3);void 0===d&&(d=0);void 0===g&&(g=c.length/c.itemSize);for(var f=0;f<g;f++,d++)b.x=c.getX(d),b.y=c.getY(d),b.z=c.getZ(d),b.applyMatrix3(this),c.setXYZ(b.x,b.y,b.z);return c}}(),multiplyScalar:function(b){var c=this.elements;c[0]*=b;c[3]*=b;c[6]*=b;c[1]*=b;c[4]*=b;c[7]*=b;c[2]*=b;c[5]*=b;c[8]*=b;return this},determinant:function(){var b=this.elements,c=b[0],d=b[1],g=b[2],f=b[3],h=b[4],k=b[5],l=b[6],m=b[7],b=b[8];return c*h*b-c*k*m-d*f*b+d*k*l+g*f*m-g*h*l},getInverse:function(b,
c){var d=b.elements,g=this.elements;g[0]=d[10]*d[5]-d[6]*d[9];g[1]=-d[10]*d[1]+d[2]*d[9];g[2]=d[6]*d[1]-d[2]*d[5];g[3]=-d[10]*d[4]+d[6]*d[8];g[4]=d[10]*d[0]-d[2]*d[8];g[5]=-d[6]*d[0]+d[2]*d[4];g[6]=d[9]*d[4]-d[5]*d[8];g[7]=-d[9]*d[0]+d[1]*d[8];g[8]=d[5]*d[0]-d[1]*d[4];d=d[0]*g[0]+d[1]*g[3]+d[2]*g[6];if(0===d){if(c)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/
d);return this},transpose:function(){var b,c=this.elements;b=c[1];c[1]=c[3];c[3]=b;b=c[2];c[2]=c[6];c[6]=b;b=c[5];c[5]=c[7];c[7]=b;return this},flattenToArrayOffset:function(b,c){var d=this.elements;b[c]=d[0];b[c+1]=d[1];b[c+2]=d[2];b[c+3]=d[3];b[c+4]=d[4];b[c+5]=d[5];b[c+6]=d[6];b[c+7]=d[7];b[c+8]=d[8];return b},getNormalMatrix:function(b){this.getInverse(b).transpose();return this},transposeIntoArray:function(b){var c=this.elements;b[0]=c[0];b[1]=c[3];b[2]=c[6];b[3]=c[1];b[4]=c[4];b[5]=c[7];b[6]=
c[2];b[7]=c[5];b[8]=c[8];return this},fromArray:function(b){this.elements.set(b);return this},toArray:function(){var b=this.elements;return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]]}};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(b,c,d,g,f,h,k,l,m,p,t,u,n,q,r,w){var v=this.elements;v[0]=b;v[4]=c;v[8]=d;v[12]=g;v[1]=f;v[5]=h;v[9]=k;v[13]=l;v[2]=m;v[6]=p;v[10]=t;v[14]=u;v[3]=n;v[7]=q;v[11]=r;v[15]=w;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(b){this.elements.set(b.elements);return this},extractPosition:function(b){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(b)},copyPosition:function(b){var c=this.elements;b=b.elements;c[12]=b[12];c[13]=b[13];c[14]=b[14];return this},extractBasis:function(b,c,d){var g=this.elements;b.set(g[0],g[1],g[2]);c.set(g[4],g[5],g[6]);d.set(g[8],g[9],g[10]);return this},makeBasis:function(b,c,d){this.set(b.x,c.x,d.x,0,b.y,c.y,d.y,0,b.z,c.z,d.z,0,0,0,0,1);return this},extractRotation:function(){var b;return function(c){void 0===b&&(b=new THREE.Vector3);var d=this.elements;c=c.elements;var g=1/b.set(c[0],
c[1],c[2]).length(),f=1/b.set(c[4],c[5],c[6]).length(),h=1/b.set(c[8],c[9],c[10]).length();d[0]=c[0]*g;d[1]=c[1]*g;d[2]=c[2]*g;d[4]=c[4]*f;d[5]=c[5]*f;d[6]=c[6]*f;d[8]=c[8]*h;d[9]=c[9]*h;d[10]=c[10]*h;return this}}(),makeRotationFromEuler:function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=this.elements,d=b.x,g=b.y,f=b.z,h=Math.cos(d),d=Math.sin(d),k=Math.cos(g),g=Math.sin(g),l=Math.cos(f),
f=Math.sin(f);if("XYZ"===b.order){b=h*l;var m=h*f,p=d*l,t=d*f;c[0]=k*l;c[4]=-k*f;c[8]=g;c[1]=m+p*g;c[5]=b-t*g;c[9]=-d*k;c[2]=t-b*g;c[6]=p+m*g;c[10]=h*k}else"YXZ"===b.order?(b=k*l,m=k*f,p=g*l,t=g*f,c[0]=b+t*d,c[4]=p*d-m,c[8]=h*g,c[1]=h*f,c[5]=h*l,c[9]=-d,c[2]=m*d-p,c[6]=t+b*d,c[10]=h*k):"ZXY"===b.order?(b=k*l,m=k*f,p=g*l,t=g*f,c[0]=b-t*d,c[4]=-h*f,c[8]=p+m*d,c[1]=m+p*d,c[5]=h*l,c[9]=t-b*d,c[2]=-h*g,c[6]=d,c[10]=h*k):"ZYX"===b.order?(b=h*l,m=h*f,p=d*l,t=d*f,c[0]=k*l,c[4]=p*g-m,c[8]=b*g+t,c[1]=k*f,c[5]=
t*g+b,c[9]=m*g-p,c[2]=-g,c[6]=d*k,c[10]=h*k):"YZX"===b.order?(b=h*k,m=h*g,p=d*k,t=d*g,c[0]=k*l,c[4]=t-b*f,c[8]=p*f+m,c[1]=f,c[5]=h*l,c[9]=-d*l,c[2]=-g*l,c[6]=m*f+p,c[10]=b-t*f):"XZY"===b.order&&(b=h*k,m=h*g,p=d*k,t=d*g,c[0]=k*l,c[4]=-f,c[8]=g*l,c[1]=b*f+t,c[5]=h*l,c[9]=m*f-p,c[2]=p*f-m,c[6]=d*l,c[10]=t*f+b);c[3]=0;c[7]=0;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this},setRotationFromQuaternion:function(b){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
return this.makeRotationFromQuaternion(b)},makeRotationFromQuaternion:function(b){var c=this.elements,d=b.x,g=b.y,f=b.z,h=b.w,k=d+d,l=g+g,m=f+f;b=d*k;var p=d*l,d=d*m,t=g*l,g=g*m,f=f*m,k=h*k,l=h*l,h=h*m;c[0]=1-(t+f);c[4]=p-h;c[8]=d+l;c[1]=p+h;c[5]=1-(b+f);c[9]=g-k;c[2]=d-l;c[6]=g+k;c[10]=1-(b+t);c[3]=0;c[7]=0;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this},lookAt:function(){var b,c,d;return function(g,f,h){void 0===b&&(b=new THREE.Vector3);void 0===c&&(c=new THREE.Vector3);void 0===d&&(d=new THREE.Vector3);
var k=this.elements;d.subVectors(g,f).normalize();0===d.length()&&(d.z=1);b.crossVectors(h,d).normalize();0===b.length()&&(d.x+=1E-4,b.crossVectors(h,d).normalize());c.crossVectors(d,b);k[0]=b.x;k[4]=c.x;k[8]=d.x;k[1]=b.y;k[5]=c.y;k[9]=d.y;k[2]=b.z;k[6]=c.z;k[10]=d.z;return this}}(),multiply:function(b,c){return void 0!==c?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(b,c)):this.multiplyMatrices(this,b)},multiplyMatrices:function(b,
c){var d=b.elements,g=c.elements,f=this.elements,h=d[0],k=d[4],l=d[8],m=d[12],p=d[1],t=d[5],u=d[9],n=d[13],q=d[2],r=d[6],w=d[10],v=d[14],y=d[3],A=d[7],x=d[11],d=d[15],z=g[0],C=g[4],D=g[8],B=g[12],F=g[1],H=g[5],I=g[9],G=g[13],M=g[2],J=g[6],K=g[10],L=g[14],N=g[3],Q=g[7],S=g[11],g=g[15];f[0]=h*z+k*F+l*M+m*N;f[4]=h*C+k*H+l*J+m*Q;f[8]=h*D+k*I+l*K+m*S;f[12]=h*B+k*G+l*L+m*g;f[1]=p*z+t*F+u*M+n*N;f[5]=p*C+t*H+u*J+n*Q;f[9]=p*D+t*I+u*K+n*S;f[13]=p*B+t*G+u*L+n*g;f[2]=q*z+r*F+w*M+v*N;f[6]=q*C+r*H+w*J+v*Q;f[10]=
q*D+r*I+w*K+v*S;f[14]=q*B+r*G+w*L+v*g;f[3]=y*z+A*F+x*M+d*N;f[7]=y*C+A*H+x*J+d*Q;f[11]=y*D+A*I+x*K+d*S;f[15]=y*B+A*G+x*L+d*g;return this},multiplyToArray:function(b,c,d){var g=this.elements;this.multiplyMatrices(b,c);d[0]=g[0];d[1]=g[1];d[2]=g[2];d[3]=g[3];d[4]=g[4];d[5]=g[5];d[6]=g[6];d[7]=g[7];d[8]=g[8];d[9]=g[9];d[10]=g[10];d[11]=g[11];d[12]=g[12];d[13]=g[13];d[14]=g[14];d[15]=g[15];return this},multiplyScalar:function(b){var c=this.elements;c[0]*=b;c[4]*=b;c[8]*=b;c[12]*=b;c[1]*=b;c[5]*=b;c[9]*=
b;c[13]*=b;c[2]*=b;c[6]*=b;c[10]*=b;c[14]*=b;c[3]*=b;c[7]*=b;c[11]*=b;c[15]*=b;return this},multiplyVector3:function(b){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return b.applyProjection(this)},multiplyVector4:function(b){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return b.applyMatrix4(this)},multiplyVector3Array:function(b){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");
return this.applyToVector3Array(b)},applyToVector3Array:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Vector3);void 0===d&&(d=0);void 0===g&&(g=c.length);for(var f=0;f<g;f+=3,d+=3)b.fromArray(c,d),b.applyMatrix4(this),b.toArray(c,d);return c}}(),applyToBuffer:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Vector3);void 0===d&&(d=0);void 0===g&&(g=c.length/c.itemSize);for(var f=0;f<g;f++,d++)b.x=c.getX(d),b.y=c.getY(d),b.z=c.getZ(d),b.applyMatrix4(this),c.setXYZ(b.x,
b.y,b.z);return c}}(),rotateAxis:function(b){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");b.transformDirection(this)},crossVector:function(b){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return b.applyMatrix4(this)},determinant:function(){var b=this.elements,c=b[0],d=b[4],g=b[8],f=b[12],h=b[1],k=b[5],l=b[9],m=b[13],p=b[2],t=b[6],u=b[10],n=b[14];return b[3]*(+f*l*t-g*m*
t-f*k*u+d*m*u+g*k*n-d*l*n)+b[7]*(+c*l*n-c*m*u+f*h*u-g*h*n+g*m*p-f*l*p)+b[11]*(+c*m*t-c*k*n-f*h*t+d*h*n+f*k*p-d*m*p)+b[15]*(-g*k*p-c*l*t+c*k*u+g*h*t-d*h*u+d*l*p)},transpose:function(){var b=this.elements,c;c=b[1];b[1]=b[4];b[4]=c;c=b[2];b[2]=b[8];b[8]=c;c=b[6];b[6]=b[9];b[9]=c;c=b[3];b[3]=b[12];b[12]=c;c=b[7];b[7]=b[13];b[13]=c;c=b[11];b[11]=b[14];b[14]=c;return this},flattenToArrayOffset:function(b,c){var d=this.elements;b[c]=d[0];b[c+1]=d[1];b[c+2]=d[2];b[c+3]=d[3];b[c+4]=d[4];b[c+5]=d[5];b[c+6]=
d[6];b[c+7]=d[7];b[c+8]=d[8];b[c+9]=d[9];b[c+10]=d[10];b[c+11]=d[11];b[c+12]=d[12];b[c+13]=d[13];b[c+14]=d[14];b[c+15]=d[15];return b},getPosition:function(){var b;return function(){void 0===b&&(b=new THREE.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var c=this.elements;return b.set(c[12],c[13],c[14])}}(),setPosition:function(b){var c=this.elements;c[12]=b.x;c[13]=b.y;c[14]=b.z;return this},getInverse:function(b,c){var d=
this.elements,g=b.elements,f=g[0],h=g[4],k=g[8],l=g[12],m=g[1],p=g[5],t=g[9],u=g[13],n=g[2],q=g[6],r=g[10],w=g[14],v=g[3],y=g[7],A=g[11],g=g[15];d[0]=t*w*y-u*r*y+u*q*A-p*w*A-t*q*g+p*r*g;d[4]=l*r*y-k*w*y-l*q*A+h*w*A+k*q*g-h*r*g;d[8]=k*u*y-l*t*y+l*p*A-h*u*A-k*p*g+h*t*g;d[12]=l*t*q-k*u*q-l*p*r+h*u*r+k*p*w-h*t*w;d[1]=u*r*v-t*w*v-u*n*A+m*w*A+t*n*g-m*r*g;d[5]=k*w*v-l*r*v+l*n*A-f*w*A-k*n*g+f*r*g;d[9]=l*t*v-k*u*v-l*m*A+f*u*A+k*m*g-f*t*g;d[13]=k*u*n-l*t*n+l*m*r-f*u*r-k*m*w+f*t*w;d[2]=p*w*v-u*q*v+u*n*y-m*w*
y-p*n*g+m*q*g;d[6]=l*q*v-h*w*v-l*n*y+f*w*y+h*n*g-f*q*g;d[10]=h*u*v-l*p*v+l*m*y-f*u*y-h*m*g+f*p*g;d[14]=l*p*n-h*u*n-l*m*q+f*u*q+h*m*w-f*p*w;d[3]=t*q*v-p*r*v-t*n*y+m*r*y+p*n*A-m*q*A;d[7]=h*r*v-k*q*v+k*n*y-f*r*y-h*n*A+f*q*A;d[11]=k*p*v-h*t*v-k*m*y+f*t*y+h*m*A-f*p*A;d[15]=h*t*n-k*p*n+k*m*q-f*t*q-h*m*r+f*p*r;d=f*d[0]+m*d[4]+n*d[8]+v*d[12];if(0===d){if(c)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");
this.identity();return this}this.multiplyScalar(1/d);return this},translate:function(b){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(b){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(b){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(b){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(b,c){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(b){var c=
this.elements,d=b.x,g=b.y;b=b.z;c[0]*=d;c[4]*=g;c[8]*=b;c[1]*=d;c[5]*=g;c[9]*=b;c[2]*=d;c[6]*=g;c[10]*=b;c[3]*=d;c[7]*=g;c[11]*=b;return this},getMaxScaleOnAxis:function(){var b=this.elements;return Math.sqrt(Math.max(b[0]*b[0]+b[1]*b[1]+b[2]*b[2],Math.max(b[4]*b[4]+b[5]*b[5]+b[6]*b[6],b[8]*b[8]+b[9]*b[9]+b[10]*b[10])))},makeTranslation:function(b,c,d){this.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1);return this},makeRotationX:function(b){var c=Math.cos(b);b=Math.sin(b);this.set(1,0,0,0,0,c,-b,0,0,b,c,0,
0,0,0,1);return this},makeRotationY:function(b){var c=Math.cos(b);b=Math.sin(b);this.set(c,0,b,0,0,1,0,0,-b,0,c,0,0,0,0,1);return this},makeRotationZ:function(b){var c=Math.cos(b);b=Math.sin(b);this.set(c,-b,0,0,b,c,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(b,c){var d=Math.cos(c),g=Math.sin(c),f=1-d,h=b.x,k=b.y,l=b.z,m=f*h,p=f*k;this.set(m*h+d,m*k-g*l,m*l+g*k,0,m*k+g*l,p*k+d,p*l-g*h,0,m*l-g*k,p*l+g*h,f*l*l+d,0,0,0,0,1);return this},makeScale:function(b,c,d){this.set(b,0,0,0,0,c,
0,0,0,0,d,0,0,0,0,1);return this},compose:function(b,c,d){this.makeRotationFromQuaternion(c);this.scale(d);this.setPosition(b);return this},decompose:function(){var b,c;return function(d,g,f){void 0===b&&(b=new THREE.Vector3);void 0===c&&(c=new THREE.Matrix4);var h=this.elements,k=b.set(h[0],h[1],h[2]).length(),l=b.set(h[4],h[5],h[6]).length(),m=b.set(h[8],h[9],h[10]).length();0>this.determinant()&&(k=-k);d.x=h[12];d.y=h[13];d.z=h[14];c.elements.set(this.elements);d=1/k;var h=1/l,p=1/m;c.elements[0]*=
d;c.elements[1]*=d;c.elements[2]*=d;c.elements[4]*=h;c.elements[5]*=h;c.elements[6]*=h;c.elements[8]*=p;c.elements[9]*=p;c.elements[10]*=p;g.setFromRotationMatrix(c);f.x=k;f.y=l;f.z=m;return this}}(),makeFrustum:function(b,c,d,g,f,h){var k=this.elements;k[0]=2*f/(c-b);k[4]=0;k[8]=(c+b)/(c-b);k[12]=0;k[1]=0;k[5]=2*f/(g-d);k[9]=(g+d)/(g-d);k[13]=0;k[2]=0;k[6]=0;k[10]=-(h+f)/(h-f);k[14]=-2*h*f/(h-f);k[3]=0;k[7]=0;k[11]=-1;k[15]=0;return this},makePerspective:function(b,c,d,g){b=d*Math.tan(THREE.Math.degToRad(.5*
b));var f=-b;return this.makeFrustum(f*c,b*c,f,b,d,g)},makeOrthographic:function(b,c,d,g,f,h){var k=this.elements,l=c-b,m=d-g,p=h-f;k[0]=2/l;k[4]=0;k[8]=0;k[12]=-((c+b)/l);k[1]=0;k[5]=2/m;k[9]=0;k[13]=-((d+g)/m);k[2]=0;k[6]=0;k[10]=-2/p;k[14]=-((h+f)/p);k[3]=0;k[7]=0;k[11]=0;k[15]=1;return this},equals:function(b){var c=this.elements;b=b.elements;for(var d=0;16>d;d++)if(c[d]!==b[d])return!1;return!0},fromArray:function(b){this.elements.set(b);return this},toArray:function(){var b=this.elements;return[b[0],
b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15]]}};THREE.Ray=function(b,c){this.origin=void 0!==b?b:new THREE.Vector3;this.direction=void 0!==c?c:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(b,c){this.origin.copy(b);this.direction.copy(c);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.origin.copy(b.origin);this.direction.copy(b.direction);return this},at:function(b,c){return(c||new THREE.Vector3).copy(this.direction).multiplyScalar(b).add(this.origin)},recast:function(){var b=new THREE.Vector3;return function(c){this.origin.copy(this.at(c,b));return this}}(),closestPointToPoint:function(b,
c){var d=c||new THREE.Vector3;d.subVectors(b,this.origin);var g=d.dot(this.direction);return 0>g?d.copy(this.origin):d.copy(this.direction).multiplyScalar(g).add(this.origin)},distanceToPoint:function(b){return Math.sqrt(this.distanceSqToPoint(b))},distanceSqToPoint:function(){var b=new THREE.Vector3;return function(c){var d=b.subVectors(c,this.origin).dot(this.direction);if(0>d)return this.origin.distanceToSquared(c);b.copy(this.direction).multiplyScalar(d).add(this.origin);return b.distanceToSquared(c)}}(),
distanceSqToSegment:function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(g,f,h,k){b.copy(g).add(f).multiplyScalar(.5);c.copy(f).sub(g).normalize();d.copy(this.origin).sub(b);var l=.5*g.distanceTo(f),m=-this.direction.dot(c),p=d.dot(this.direction),t=-d.dot(c),u=d.lengthSq(),n=Math.abs(1-m*m),q;0<n?(g=m*t-p,f=m*p-t,q=l*n,0<=g?f>=-q?f<=q?(l=1/n,g*=l,f*=l,m=g*(g+m*f+2*p)+f*(m*g+f+2*t)+u):(f=l,g=Math.max(0,-(m*f+p)),m=-g*g+f*(f+2*t)+u):(f=-l,g=Math.max(0,-(m*f+p)),
m=-g*g+f*(f+2*t)+u):f<=-q?(g=Math.max(0,-(-m*l+p)),f=0<g?-l:Math.min(Math.max(-l,-t),l),m=-g*g+f*(f+2*t)+u):f<=q?(g=0,f=Math.min(Math.max(-l,-t),l),m=f*(f+2*t)+u):(g=Math.max(0,-(m*l+p)),f=0<g?l:Math.min(Math.max(-l,-t),l),m=-g*g+f*(f+2*t)+u)):(f=0<m?-l:l,g=Math.max(0,-(m*f+p)),m=-g*g+f*(f+2*t)+u);h&&h.copy(this.direction).multiplyScalar(g).add(this.origin);k&&k.copy(c).multiplyScalar(f).add(b);return m}}(),isIntersectionSphere:function(b){return this.distanceToPoint(b.center)<=b.radius},intersectSphere:function(){var b=
new THREE.Vector3;return function(c,d){b.subVectors(c.center,this.origin);var g=b.dot(this.direction),f=b.dot(b)-g*g,h=c.radius*c.radius;if(f>h)return null;h=Math.sqrt(h-f);f=g-h;g+=h;return 0>f&&0>g?null:0>f?this.at(g,d):this.at(f,d)}}(),isIntersectionPlane:function(b){var c=b.distanceToPoint(this.origin);return 0===c||0>b.normal.dot(this.direction)*c?!0:!1},distanceToPlane:function(b){var c=b.normal.dot(this.direction);if(0===c)return 0===b.distanceToPoint(this.origin)?0:null;b=-(this.origin.dot(b.normal)+
b.constant)/c;return 0<=b?b:null},intersectPlane:function(b,c){var d=this.distanceToPlane(b);return null===d?null:this.at(d,c)},isIntersectionBox:function(){var b=new THREE.Vector3;return function(c){return null!==this.intersectBox(c,b)}}(),intersectBox:function(b,c){var d,g,f,h,k;g=1/this.direction.x;h=1/this.direction.y;k=1/this.direction.z;var l=this.origin;0<=g?(d=(b.min.x-l.x)*g,g*=b.max.x-l.x):(d=(b.max.x-l.x)*g,g*=b.min.x-l.x);0<=h?(f=(b.min.y-l.y)*h,h*=b.max.y-l.y):(f=(b.max.y-l.y)*h,h*=b.min.y-
l.y);if(d>h||f>g)return null;if(f>d||d!==d)d=f;if(h<g||g!==g)g=h;0<=k?(f=(b.min.z-l.z)*k,k*=b.max.z-l.z):(f=(b.max.z-l.z)*k,k*=b.min.z-l.z);if(d>k||f>g)return null;if(f>d||d!==d)d=f;if(k<g||g!==g)g=k;return 0>g?null:this.at(0<=d?d:g,c)},intersectTriangle:function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3,g=new THREE.Vector3;return function(f,h,k,l,m){c.subVectors(h,f);d.subVectors(k,f);g.crossVectors(c,d);h=this.direction.dot(g);if(0<h){if(l)return null;l=1}else if(0>h)l=-1,
h=-h;else return null;b.subVectors(this.origin,f);f=l*this.direction.dot(d.crossVectors(b,d));if(0>f)return null;k=l*this.direction.dot(c.cross(b));if(0>k||f+k>h)return null;f=-l*b.dot(g);return 0>f?null:this.at(f/h,m)}}(),applyMatrix4:function(b){this.direction.add(this.origin).applyMatrix4(b);this.origin.applyMatrix4(b);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(b){return b.origin.equals(this.origin)&&b.direction.equals(this.direction)}};
THREE.Sphere=function(b,c){this.center=void 0!==b?b:new THREE.Vector3;this.radius=void 0!==c?c:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(b,c){this.center.copy(b);this.radius=c;return this},setFromPoints:function(){var b=new THREE.Box3;return function(c,d){var g=this.center;void 0!==d?g.copy(d):b.setFromPoints(c).center(g);for(var f=0,h=0,k=c.length;h<k;h++)f=Math.max(f,g.distanceToSquared(c[h]));this.radius=Math.sqrt(f);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.center.copy(b.center);this.radius=b.radius;return this},
empty:function(){return 0>=this.radius},containsPoint:function(b){return b.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(b){return b.distanceTo(this.center)-this.radius},intersectsSphere:function(b){var c=this.radius+b.radius;return b.center.distanceToSquared(this.center)<=c*c},clampPoint:function(b,c){var d=this.center.distanceToSquared(b),g=c||new THREE.Vector3;g.copy(b);d>this.radius*this.radius&&(g.sub(this.center).normalize(),g.multiplyScalar(this.radius).add(this.center));
return g},getBoundingBox:function(b){b=b||new THREE.Box3;b.set(this.center,this.center);b.expandByScalar(this.radius);return b},applyMatrix4:function(b){this.center.applyMatrix4(b);this.radius*=b.getMaxScaleOnAxis();return this},translate:function(b){this.center.add(b);return this},equals:function(b){return b.center.equals(this.center)&&b.radius===this.radius}};
THREE.Frustum=function(b,c,d,g,f,h){this.planes=[void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==g?g:new THREE.Plane,void 0!==f?f:new THREE.Plane,void 0!==h?h:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(b,c,d,g,f,h){var k=this.planes;k[0].copy(b);k[1].copy(c);k[2].copy(d);k[3].copy(g);k[4].copy(f);k[5].copy(h);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){for(var c=this.planes,d=0;6>d;d++)c[d].copy(b.planes[d]);return this},setFromMatrix:function(b){var c=this.planes,d=b.elements;b=d[0];var g=d[1],f=d[2],h=d[3],k=d[4],l=d[5],m=d[6],p=d[7],t=d[8],u=d[9],n=d[10],q=d[11],r=d[12],w=d[13],v=d[14],
d=d[15];c[0].setComponents(h-b,p-k,q-t,d-r).normalize();c[1].setComponents(h+b,p+k,q+t,d+r).normalize();c[2].setComponents(h+g,p+l,q+u,d+w).normalize();c[3].setComponents(h-g,p-l,q-u,d-w).normalize();c[4].setComponents(h-f,p-m,q-n,d-v).normalize();c[5].setComponents(h+f,p+m,q+n,d+v).normalize();return this},intersectsObject:function(){var b=new THREE.Sphere;return function(c){var d=c.geometry;null===d.boundingSphere&&d.computeBoundingSphere();b.copy(d.boundingSphere);b.applyMatrix4(c.matrixWorld);
return this.intersectsSphere(b)}}(),intersectsSphere:function(b){var c=this.planes,d=b.center;b=-b.radius;for(var g=0;6>g;g++)if(c[g].distanceToPoint(d)<b)return!1;return!0},intersectsBox:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d){for(var g=this.planes,f=0;6>f;f++){var h=g[f];b.x=0<h.normal.x?d.min.x:d.max.x;c.x=0<h.normal.x?d.max.x:d.min.x;b.y=0<h.normal.y?d.min.y:d.max.y;c.y=0<h.normal.y?d.max.y:d.min.y;b.z=0<h.normal.z?d.min.z:d.max.z;c.z=0<h.normal.z?d.max.z:d.min.z;
var k=h.distanceToPoint(b),h=h.distanceToPoint(c);if(0>k&&0>h)return!1}return!0}}(),containsPoint:function(b){for(var c=this.planes,d=0;6>d;d++)if(0>c[d].distanceToPoint(b))return!1;return!0}};THREE.Plane=function(b,c){this.normal=void 0!==b?b:new THREE.Vector3(1,0,0);this.constant=void 0!==c?c:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(b,c){this.normal.copy(b);this.constant=c;return this},setComponents:function(b,c,d,g){this.normal.set(b,c,d);this.constant=g;return this},setFromNormalAndCoplanarPoint:function(b,c){this.normal.copy(b);this.constant=-c.dot(this.normal);return this},setFromCoplanarPoints:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d,g,f){g=b.subVectors(f,g).cross(c.subVectors(d,g)).normalize();this.setFromNormalAndCoplanarPoint(g,
d);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.normal.copy(b.normal);this.constant=b.constant;return this},normalize:function(){var b=1/this.normal.length();this.normal.multiplyScalar(b);this.constant*=b;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(b){return this.normal.dot(b)+this.constant},distanceToSphere:function(b){return this.distanceToPoint(b.center)-b.radius},projectPoint:function(b,
c){return this.orthoPoint(b,c).sub(b).negate()},orthoPoint:function(b,c){var d=this.distanceToPoint(b);return(c||new THREE.Vector3).copy(this.normal).multiplyScalar(d)},isIntersectionLine:function(b){var c=this.distanceToPoint(b.start);b=this.distanceToPoint(b.end);return 0>c&&0<b||0>b&&0<c},intersectLine:function(){var b=new THREE.Vector3;return function(c,d){var g=d||new THREE.Vector3,f=c.delta(b),h=this.normal.dot(f);if(0===h){if(0===this.distanceToPoint(c.start))return g.copy(c.start)}else return h=
-(c.start.dot(this.normal)+this.constant)/h,0>h||1<h?void 0:g.copy(f).multiplyScalar(h).add(c.start)}}(),coplanarPoint:function(b){return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Matrix3;return function(g,f){var h=f||d.getNormalMatrix(g),h=b.copy(this.normal).applyMatrix3(h),k=this.coplanarPoint(c);k.applyMatrix4(g);this.setFromNormalAndCoplanarPoint(h,k);return this}}(),translate:function(b){this.constant-=
b.dot(this.normal);return this},equals:function(b){return b.normal.equals(this.normal)&&b.constant===this.constant}};
THREE.Math={generateUUID:function(){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=Array(36),d=0,g;return function(){for(var f=0;36>f;f++)8===f||13===f||18===f||23===f?c[f]="-":14===f?c[f]="4":(2>=d&&(d=33554432+16777216*Math.random()|0),g=d&15,d>>=4,c[f]=b[19===f?g&3|8:g]);return c.join("")}}(),clamp:function(b,c,d){return b<c?c:b>d?d:b},clampBottom:function(b,c){return b<c?c:b},euclideanModulo:function(b,c){return(b%c+c)%c},mapLinear:function(b,c,d,g,f){return g+
(b-c)*(f-g)/(d-c)},smoothstep:function(b,c,d){if(b<=c)return 0;if(b>=d)return 1;b=(b-c)/(d-c);return b*b*(3-2*b)},smootherstep:function(b,c,d){if(b<=c)return 0;if(b>=d)return 1;b=(b-c)/(d-c);return b*b*b*(b*(6*b-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(b,c){return b+Math.floor(Math.random()*(c-b+1))},randFloat:function(b,c){return b+Math.random()*(c-b)},randFloatSpread:function(b){return b*(.5-Math.random())},degToRad:function(){var b=Math.PI/
180;return function(c){return c*b}}(),radToDeg:function(){var b=180/Math.PI;return function(c){return c*b}}(),isPowerOfTwo:function(b){return 0===(b&b-1)&&0!==b},nextPowerOfTwo:function(b){b--;b|=b>>1;b|=b>>2;b|=b>>4;b|=b>>8;b|=b>>16;b++;return b}};
THREE.Spline=function(b){function c(b,c,f,h,g,d,k){b=.5*(f-b);h=.5*(h-c);return(2*(c-f)+b+h)*k+(-3*(c-f)-2*b-h)*d+b*g+c}this.points=b;var d=[],g={x:0,y:0,z:0},f,h,k,l,m,p,t,u,n;this.initFromArray=function(b){this.points=[];for(var c=0;c<b.length;c++)this.points[c]={x:b[c][0],y:b[c][1],z:b[c][2]}};this.getPoint=function(b){f=(this.points.length-1)*b;h=Math.floor(f);k=f-h;d[0]=0===h?h:h-1;d[1]=h;d[2]=h>this.points.length-2?this.points.length-1:h+1;d[3]=h>this.points.length-3?this.points.length-1:h+
2;p=this.points[d[0]];t=this.points[d[1]];u=this.points[d[2]];n=this.points[d[3]];l=k*k;m=k*l;g.x=c(p.x,t.x,u.x,n.x,k,l,m);g.y=c(p.y,t.y,u.y,n.y,k,l,m);g.z=c(p.z,t.z,u.z,n.z,k,l,m);return g};this.getControlPointsArray=function(){var b,c,f=this.points.length,h=[];for(b=0;b<f;b++)c=this.points[b],h[b]=[c.x,c.y,c.z];return h};this.getLength=function(b){var c,f,h,g=0,d=new THREE.Vector3,k=new THREE.Vector3,l=[],m=0;l[0]=0;b||(b=100);f=this.points.length*b;d.copy(this.points[0]);for(b=1;b<f;b++)c=b/f,
h=this.getPoint(c),k.copy(h),m+=k.distanceTo(d),d.copy(h),c*=this.points.length-1,c=Math.floor(c),c!==g&&(l[c]=m,g=c);l[l.length]=m;return{chunks:l,total:m}};this.reparametrizeByArcLength=function(b){var c,f,h,g,d,k,l=[],m=new THREE.Vector3,n=this.getLength();l.push(m.copy(this.points[0]).clone());for(c=1;c<this.points.length;c++){f=n.chunks[c]-n.chunks[c-1];k=Math.ceil(b*f/n.total);g=(c-1)/(this.points.length-1);d=c/(this.points.length-1);for(f=1;f<k-1;f++)h=g+1/k*f*(d-g),h=this.getPoint(h),l.push(m.copy(h).clone());
l.push(m.copy(this.points[c]).clone())}this.points=l}};THREE.Triangle=function(b,c,d){this.a=void 0!==b?b:new THREE.Vector3;this.b=void 0!==c?c:new THREE.Vector3;this.c=void 0!==d?d:new THREE.Vector3};THREE.Triangle.normal=function(){var b=new THREE.Vector3;return function(c,d,g,f){f=f||new THREE.Vector3;f.subVectors(g,d);b.subVectors(c,d);f.cross(b);c=f.lengthSq();return 0<c?f.multiplyScalar(1/Math.sqrt(c)):f.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(g,f,h,k,l){b.subVectors(k,f);c.subVectors(h,f);d.subVectors(g,f);g=b.dot(b);f=b.dot(c);h=b.dot(d);var m=c.dot(c);k=c.dot(d);var p=g*m-f*f;l=l||new THREE.Vector3;if(0===p)return l.set(-2,-1,-1);p=1/p;m=(m*h-f*k)*p;g=(g*k-f*h)*p;return l.set(1-m-g,g,m)}}();
THREE.Triangle.containsPoint=function(){var b=new THREE.Vector3;return function(c,d,g,f){c=THREE.Triangle.barycoordFromPoint(c,d,g,f,b);return 0<=c.x&&0<=c.y&&1>=c.x+c.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(b,c,d){this.a.copy(b);this.b.copy(c);this.c.copy(d);return this},setFromPointsAndIndices:function(b,c,d,g){this.a.copy(b[c]);this.b.copy(b[d]);this.c.copy(b[g]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.a.copy(b.a);this.b.copy(b.b);this.c.copy(b.c);return this},area:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(){b.subVectors(this.c,this.b);c.subVectors(this.a,
this.b);return.5*b.cross(c).length()}}(),midpoint:function(b){return(b||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(b){return THREE.Triangle.normal(this.a,this.b,this.c,b)},plane:function(b){return(b||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(b,c){return THREE.Triangle.barycoordFromPoint(b,this.a,this.b,this.c,c)},containsPoint:function(b){return THREE.Triangle.containsPoint(b,this.a,this.b,this.c)},
equals:function(b){return b.a.equals(this.a)&&b.b.equals(this.b)&&b.c.equals(this.c)}};THREE.Clock=function(b){this.autoStart=void 0!==b?b:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var b=0;this.autoStart&&!this.running&&this.start();if(this.running){var c=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
b=.001*(c-this.oldTime);this.oldTime=c;this.elapsedTime+=b}return b}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(b){b.addEventListener=THREE.EventDispatcher.prototype.addEventListener;b.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;b.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;b.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(b,c){void 0===this._listeners&&(this._listeners={});var d=this._listeners;void 0===d[b]&&(d[b]=[]);-1===d[b].indexOf(c)&&
d[b].push(c)},hasEventListener:function(b,c){if(void 0===this._listeners)return!1;var d=this._listeners;return void 0!==d[b]&&-1!==d[b].indexOf(c)?!0:!1},removeEventListener:function(b,c){if(void 0!==this._listeners){var d=this._listeners[b];if(void 0!==d){var g=d.indexOf(c);-1!==g&&d.splice(g,1)}}},dispatchEvent:function(b){if(void 0!==this._listeners){var c=this._listeners[b.type];if(void 0!==c){b.target=this;for(var d=[],g=c.length,f=0;f<g;f++)d[f]=c[f];for(f=0;f<g;f++)d[f].call(this,b)}}}};
(function(b){function c(b,c){return b.distance-c.distance}b.Raycaster=function(c,f,h,d){this.ray=new b.Ray(c,f);this.near=h||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})};var d=function(b,c,h,k){if(!1!==b.visible&&(b.raycast(c,h),!0===k)){b=b.children;k=0;for(var l=b.length;k<l;k++)d(b[k],
c,h,!0)}};b.Raycaster.prototype={constructor:b.Raycaster,linePrecision:1,set:function(b,c){this.ray.set(b,c)},setFromCamera:function(c,f){f instanceof b.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(f.matrixWorld),this.ray.direction.set(c.x,c.y,.5).unproject(f).sub(this.ray.origin).normalize()):f instanceof b.OrthographicCamera?(this.ray.origin.set(c.x,c.y,-1).unproject(f),this.ray.direction.set(0,0,-1).transformDirection(f.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},
intersectObject:function(b,f){var h=[];d(b,this,h,f);h.sort(c);return h},intersectObjects:function(b,f){var h=[];if(!1===Array.isArray(b))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),h;for(var k=0,l=b.length;k<l;k++)d(b[k],this,h,f);h.sort(c);return h}}})(THREE);
THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var b=new THREE.Vector3,c=new THREE.Euler,d=new THREE.Quaternion,g=new THREE.Vector3(1,1,1);c.onChange(function(){d.setFromEuler(c,!1)});d.onChange(function(){c.setFromQuaternion(d,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:b},rotation:{enumerable:!0,
value:c},quaternion:{enumerable:!0,value:d},scale:{enumerable:!0,value:g},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}});this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};
THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);THREE.Object3D.DefaultMatrixAutoUpdate=!0;
THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");return this.rotation.order},set eulerOrder(b){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");this.rotation.order=b},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(b){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
set renderDepth(b){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(b){this.matrix.multiplyMatrices(b,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(b,c){this.quaternion.setFromAxisAngle(b,c)},setRotationFromEuler:function(b){this.quaternion.setFromEuler(b,!0)},setRotationFromMatrix:function(b){this.quaternion.setFromRotationMatrix(b)},setRotationFromQuaternion:function(b){this.quaternion.copy(b)},
rotateOnAxis:function(){var b=new THREE.Quaternion;return function(c,d){b.setFromAxisAngle(c,d);this.quaternion.multiply(b);return this}}(),rotateX:function(){var b=new THREE.Vector3(1,0,0);return function(c){return this.rotateOnAxis(b,c)}}(),rotateY:function(){var b=new THREE.Vector3(0,1,0);return function(c){return this.rotateOnAxis(b,c)}}(),rotateZ:function(){var b=new THREE.Vector3(0,0,1);return function(c){return this.rotateOnAxis(b,c)}}(),translateOnAxis:function(){var b=new THREE.Vector3;return function(c,
d){b.copy(c).applyQuaternion(this.quaternion);this.position.add(b.multiplyScalar(d));return this}}(),translate:function(b,c){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(c,b)},translateX:function(){var b=new THREE.Vector3(1,0,0);return function(c){return this.translateOnAxis(b,c)}}(),translateY:function(){var b=new THREE.Vector3(0,1,0);return function(c){return this.translateOnAxis(b,c)}}(),translateZ:function(){var b=
new THREE.Vector3(0,0,1);return function(c){return this.translateOnAxis(b,c)}}(),localToWorld:function(b){return b.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var b=new THREE.Matrix4;return function(c){return c.applyMatrix4(b.getInverse(this.matrixWorld))}}(),lookAt:function(){var b=new THREE.Matrix4;return function(c){b.lookAt(c,this.position,this.up);this.quaternion.setFromRotationMatrix(b)}}(),add:function(b){if(1<arguments.length){for(var c=0;c<arguments.length;c++)this.add(arguments[c]);
return this}if(b===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",b),this;b instanceof THREE.Object3D?(null!==b.parent&&b.parent.remove(b),b.parent=this,b.dispatchEvent({type:"added"}),this.children.push(b)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",b);return this},remove:function(b){if(1<arguments.length)for(var c=0;c<arguments.length;c++)this.remove(arguments[c]);c=this.children.indexOf(b);-1!==c&&(b.parent=null,b.dispatchEvent({type:"removed"}),
this.children.splice(c,1))},getChildByName:function(b){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(b)},getObjectById:function(b){return this.getObjectByProperty("id",b)},getObjectByName:function(b){return this.getObjectByProperty("name",b)},getObjectByProperty:function(b,c){if(this[b]===c)return this;for(var d=0,g=this.children.length;d<g;d++){var f=this.children[d].getObjectByProperty(b,c);if(void 0!==f)return f}},getWorldPosition:function(b){b=
b||new THREE.Vector3;this.updateMatrixWorld(!0);return b.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d){d=d||new THREE.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(b,d,c);return d}}(),getWorldRotation:function(){var b=new THREE.Quaternion;return function(c){c=c||new THREE.Euler;this.getWorldQuaternion(b);return c.setFromQuaternion(b,this.rotation.order,!1)}}(),getWorldScale:function(){var b=
new THREE.Vector3,c=new THREE.Quaternion;return function(d){d=d||new THREE.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(b,c,d);return d}}(),getWorldDirection:function(){var b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.getWorldQuaternion(b);return c.set(0,0,1).applyQuaternion(b)}}(),raycast:function(){},traverse:function(b){b(this);for(var c=this.children,d=0,g=c.length;d<g;d++)c[d].traverse(b)},traverseVisible:function(b){if(!1!==this.visible){b(this);for(var c=
this.children,d=0,g=c.length;d<g;d++)c[d].traverseVisible(b)}},traverseAncestors:function(b){var c=this.parent;null!==c&&(b(c),c.traverseAncestors(b))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(b){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===b)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;for(var c=0,d=this.children.length;c<d;c++)this.children[c].updateMatrixWorld(b)},toJSON:function(b){function c(b){var c=[],f;for(f in b){var h=b[f];delete h.metadata;c.push(h)}return c}var d=void 0===b,g={},f={object:g};d&&(b={geometries:{},materials:{},textures:{},images:{}},f.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});g.uuid=this.uuid;g.type=this.type;""!==this.name&&(g.name=this.name);"{}"!==JSON.stringify(this.userData)&&
(g.userData=this.userData);!0!==this.visible&&(g.visible=this.visible);g.matrix=this.matrix.toArray();if(0<this.children.length){g.children=[];for(var h=0;h<this.children.length;h++)g.children.push(this.children[h].toJSON(b).object)}d&&(d=c(b.geometries),g=c(b.materials),h=c(b.textures),b=c(b.images),0<d.length&&(f.geometries=d),0<g.length&&(f.materials=g),0<h.length&&(f.textures=h),0<b.length&&(f.images=b));return f},clone:function(b){return(new this.constructor).copy(this,b)},copy:function(b,c){void 0===
c&&(c=!0);this.name=b.name;this.up.copy(b.up);this.position.copy(b.position);this.quaternion.copy(b.quaternion);this.scale.copy(b.scale);this.rotationAutoUpdate=b.rotationAutoUpdate;this.matrix.copy(b.matrix);this.matrixWorld.copy(b.matrixWorld);this.matrixAutoUpdate=b.matrixAutoUpdate;this.matrixWorldNeedsUpdate=b.matrixWorldNeedsUpdate;this.visible=b.visible;this.castShadow=b.castShadow;this.receiveShadow=b.receiveShadow;this.frustumCulled=b.frustumCulled;this.renderOrder=b.renderOrder;this.userData=
JSON.parse(JSON.stringify(b.userData));if(!0===c)for(var d=0;d<b.children.length;d++)this.add(b.children[d].clone());return this}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;
THREE.Face3=function(b,c,d,g,f,h){this.a=b;this.b=c;this.c=d;this.normal=g instanceof THREE.Vector3?g:new THREE.Vector3;this.vertexNormals=Array.isArray(g)?g:[];this.color=f instanceof THREE.Color?f:new THREE.Color;this.vertexColors=Array.isArray(f)?f:[];this.materialIndex=void 0!==h?h:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.a=b.a;this.b=b.b;this.c=b.c;this.normal.copy(b.normal);this.color.copy(b.color);this.materialIndex=b.materialIndex;for(var c=0,d=b.vertexNormals.length;c<d;c++)this.vertexNormals[c]=b.vertexNormals[c].clone();c=0;for(d=b.vertexColors.length;c<d;c++)this.vertexColors[c]=b.vertexColors[c].clone();return this}};
THREE.Face4=function(b,c,d,g,f,h,k){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(b,c,d,f,h,k)};THREE.BufferAttribute=function(b,c){this.uuid=THREE.Math.generateUUID();this.array=b;this.itemSize=c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(b){!0===b&&this.version++},setDynamic:function(b){this.dynamic=b;return this},copy:function(b){this.array=new b.array.constructor(b.array);this.itemSize=b.itemSize;this.dynamic=b.dynamic;return this},copyAt:function(b,c,d){b*=this.itemSize;
d*=c.itemSize;for(var g=0,f=this.itemSize;g<f;g++)this.array[b+g]=c.array[d+g];return this},copyArray:function(b){this.array.set(b);return this},copyColorsArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];void 0===h&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",g),h=new THREE.Color);c[d++]=h.r;c[d++]=h.g;c[d++]=h.b}return this},copyIndicesArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];c[d++]=h.a;c[d++]=h.b;c[d++]=
h.c}return this},copyVector2sArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",g),h=new THREE.Vector2);c[d++]=h.x;c[d++]=h.y}return this},copyVector3sArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",g),h=new THREE.Vector3);c[d++]=h.x;c[d++]=h.y;c[d++]=h.z}return this},
copyVector4sArray:function(b){for(var c=this.array,d=0,g=0,f=b.length;g<f;g++){var h=b[g];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",g),h=new THREE.Vector4);c[d++]=h.x;c[d++]=h.y;c[d++]=h.z;c[d++]=h.w}return this},set:function(b,c){void 0===c&&(c=0);this.array.set(b,c);return this},getX:function(b){return this.array[b*this.itemSize]},setX:function(b,c){this.array[b*this.itemSize]=c;return this},getY:function(b){return this.array[b*this.itemSize+1]},
setY:function(b,c){this.array[b*this.itemSize+1]=c;return this},getZ:function(b){return this.array[b*this.itemSize+2]},setZ:function(b,c){this.array[b*this.itemSize+2]=c;return this},getW:function(b){return this.array[b*this.itemSize+3]},setW:function(b,c){this.array[b*this.itemSize+3]=c;return this},setXY:function(b,c,d){b*=this.itemSize;this.array[b+0]=c;this.array[b+1]=d;return this},setXYZ:function(b,c,d,g){b*=this.itemSize;this.array[b+0]=c;this.array[b+1]=d;this.array[b+2]=g;return this},setXYZW:function(b,
c,d,g,f){b*=this.itemSize;this.array[b+0]=c;this.array[b+1]=d;this.array[b+2]=g;this.array[b+3]=f;return this},clone:function(){return(new this.constructor).copy(this)}};THREE.Int8Attribute=function(b,c){return new THREE.BufferAttribute(new Int8Array(b),c)};THREE.Uint8Attribute=function(b,c){return new THREE.BufferAttribute(new Uint8Array(b),c)};THREE.Uint8ClampedAttribute=function(b,c){return new THREE.BufferAttribute(new Uint8ClampedArray(b),c)};
THREE.Int16Attribute=function(b,c){return new THREE.BufferAttribute(new Int16Array(b),c)};THREE.Uint16Attribute=function(b,c){return new THREE.BufferAttribute(new Uint16Array(b),c)};THREE.Int32Attribute=function(b,c){return new THREE.BufferAttribute(new Int32Array(b),c)};THREE.Uint32Attribute=function(b,c){return new THREE.BufferAttribute(new Uint32Array(b),c)};THREE.Float32Attribute=function(b,c){return new THREE.BufferAttribute(new Float32Array(b),c)};
THREE.Float64Attribute=function(b,c){return new THREE.BufferAttribute(new Float64Array(b),c)};THREE.DynamicBufferAttribute=function(b,c){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new THREE.BufferAttribute(b,c)).setDynamic(!0)};THREE.InstancedBufferAttribute=function(b,c,d){THREE.BufferAttribute.call(this,b,c);this.meshPerAttribute=d||1};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);
THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute;THREE.InstancedBufferAttribute.prototype.copy=function(b){THREE.BufferAttribute.prototype.copy.call(this,b);this.meshPerAttribute=b.meshPerAttribute;return this};THREE.InterleavedBuffer=function(b,c){this.uuid=THREE.Math.generateUUID();this.array=b;this.stride=c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(b){!0===b&&this.version++},setDynamic:function(b){this.dynamic=b;return this},copy:function(b){this.array=new b.array.constructor(b.array);this.stride=b.stride;this.dynamic=b.dynamic},copyAt:function(b,c,d){b*=this.stride;d*=c.stride;for(var g=0,f=this.stride;g<f;g++)this.array[b+g]=c.array[d+g];return this},set:function(b,
c){void 0===c&&(c=0);this.array.set(b,c);return this},clone:function(){return(new this.constructor).copy(this)}};THREE.InstancedInterleavedBuffer=function(b,c,d){THREE.InterleavedBuffer.call(this,b,c);this.meshPerAttribute=d||1};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;
THREE.InstancedInterleavedBuffer.prototype.copy=function(b){THREE.InterleavedBuffer.prototype.copy.call(this,b);this.meshPerAttribute=b.meshPerAttribute;return this};THREE.InterleavedBufferAttribute=function(b,c,d){this.uuid=THREE.Math.generateUUID();this.data=b;this.itemSize=c;this.offset=d};
THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.data.array.length/this.data.stride},setX:function(b,c){this.data.array[b*this.data.stride+this.offset]=c;return this},setY:function(b,c){this.data.array[b*this.data.stride+this.offset+1]=c;return this},setZ:function(b,c){this.data.array[b*this.data.stride+this.offset+
2]=c;return this},setW:function(b,c){this.data.array[b*this.data.stride+this.offset+3]=c;return this},getX:function(b){return this.data.array[b*this.data.stride+this.offset]},getY:function(b){return this.data.array[b*this.data.stride+this.offset+1]},getZ:function(b){return this.data.array[b*this.data.stride+this.offset+2]},getW:function(b){return this.data.array[b*this.data.stride+this.offset+3]},setXY:function(b,c,d){b=b*this.data.stride+this.offset;this.data.array[b+0]=c;this.data.array[b+1]=d;
return this},setXYZ:function(b,c,d,g){b=b*this.data.stride+this.offset;this.data.array[b+0]=c;this.data.array[b+1]=d;this.data.array[b+2]=g;return this},setXYZW:function(b,c,d,g,f){b=b*this.data.stride+this.offset;this.data.array[b+0]=c;this.data.array[b+1]=d;this.data.array[b+2]=g;this.data.array[b+3]=f;return this}};
THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=
this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(b){for(var c=(new THREE.Matrix3).getNormalMatrix(b),d=0,g=this.vertices.length;d<g;d++)this.vertices[d].applyMatrix4(b);d=0;for(g=this.faces.length;d<g;d++){b=this.faces[d];b.normal.applyMatrix3(c).normalize();for(var f=0,h=b.vertexNormals.length;f<h;f++)b.vertexNormals[f].applyMatrix3(c).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=
this.verticesNeedUpdate=!0},rotateX:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationX(c);this.applyMatrix(b);return this}}(),rotateY:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationY(c);this.applyMatrix(b);return this}}(),rotateZ:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationZ(c);this.applyMatrix(b);return this}}(),translate:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Matrix4);
b.makeTranslation(c,d,g);this.applyMatrix(b);return this}}(),scale:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Matrix4);b.makeScale(c,d,g);this.applyMatrix(b);return this}}(),lookAt:function(){var b;return function(c){void 0===b&&(b=new THREE.Object3D);b.lookAt(c);b.updateMatrix();this.applyMatrix(b.matrix)}}(),fromBufferGeometry:function(b){var c=this,d=null!==b.index?b.index.array:void 0,g=b.attributes,f=g.position.array,h=void 0!==g.normal?g.normal.array:void 0,k=void 0!==
g.color?g.color.array:void 0,l=void 0!==g.uv?g.uv.array:void 0,m=void 0!==g.uv2?g.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var p=[],t=[],u=[],n=g=0;g<f.length;g+=3,n+=2)c.vertices.push(new THREE.Vector3(f[g],f[g+1],f[g+2])),void 0!==h&&p.push(new THREE.Vector3(h[g],h[g+1],h[g+2])),void 0!==k&&c.colors.push(new THREE.Color(k[g],k[g+1],k[g+2])),void 0!==l&&t.push(new THREE.Vector2(l[n],l[n+1])),void 0!==m&&u.push(new THREE.Vector2(m[n],m[n+1]));var q=function(b,f,g){var d=void 0!==
h?[p[b].clone(),p[f].clone(),p[g].clone()]:[],n=void 0!==k?[c.colors[b].clone(),c.colors[f].clone(),c.colors[g].clone()]:[],d=new THREE.Face3(b,f,g,d,n);c.faces.push(d);void 0!==l&&c.faceVertexUvs[0].push([t[b].clone(),t[f].clone(),t[g].clone()]);void 0!==m&&c.faceVertexUvs[1].push([u[b].clone(),u[f].clone(),u[g].clone()])};if(void 0!==d)if(f=b.groups,0<f.length)for(g=0;g<f.length;g++)for(var n=f[g],r=n.start,w=n.count,n=r,r=r+w;n<r;n+=3)q(d[n],d[n+1],d[n+2]);else for(g=0;g<d.length;g+=3)q(d[g],d[g+
1],d[g+2]);else for(g=0;g<f.length/3;g+=3)q(g,g+1,g+2);this.computeFaceNormals();null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone());null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var b=this.boundingBox.center().negate();this.translate(b.x,b.y,b.z);return b},normalize:function(){this.computeBoundingSphere();var b=this.boundingSphere.center,c=this.boundingSphere.radius,c=0===c?1:1/c,d=new THREE.Matrix4;d.set(c,
0,0,-c*b.x,0,c,0,-c*b.y,0,0,c,-c*b.z,0,0,0,1);this.applyMatrix(d);return this},computeFaceNormals:function(){for(var b=new THREE.Vector3,c=new THREE.Vector3,d=0,g=this.faces.length;d<g;d++){var f=this.faces[d],h=this.vertices[f.a],k=this.vertices[f.b];b.subVectors(this.vertices[f.c],k);c.subVectors(h,k);b.cross(c);b.normalize();f.normal.copy(b)}},computeVertexNormals:function(b){var c,d,g;g=Array(this.vertices.length);c=0;for(d=this.vertices.length;c<d;c++)g[c]=new THREE.Vector3;if(b){var f,h,k,l=
new THREE.Vector3,m=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],f=this.vertices[d.a],h=this.vertices[d.b],k=this.vertices[d.c],l.subVectors(k,h),m.subVectors(f,h),l.cross(m),g[d.a].add(l),g[d.b].add(l),g[d.c].add(l)}else for(b=0,c=this.faces.length;b<c;b++)d=this.faces[b],g[d.a].add(d.normal),g[d.b].add(d.normal),g[d.c].add(d.normal);c=0;for(d=this.vertices.length;c<d;c++)g[c].normalize();b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],f=d.vertexNormals,3===f.length?
(f[0].copy(g[d.a]),f[1].copy(g[d.b]),f[2].copy(g[d.c])):(f[0]=g[d.a].clone(),f[1]=g[d.b].clone(),f[2]=g[d.c].clone())},computeMorphNormals:function(){var b,c,d,g,f;d=0;for(g=this.faces.length;d<g;d++)for(f=this.faces[d],f.__originalFaceNormal?f.__originalFaceNormal.copy(f.normal):f.__originalFaceNormal=f.normal.clone(),f.__originalVertexNormals||(f.__originalVertexNormals=[]),b=0,c=f.vertexNormals.length;b<c;b++)f.__originalVertexNormals[b]?f.__originalVertexNormals[b].copy(f.vertexNormals[b]):f.__originalVertexNormals[b]=
f.vertexNormals[b].clone();var h=new THREE.Geometry;h.faces=this.faces;b=0;for(c=this.morphTargets.length;b<c;b++){if(!this.morphNormals[b]){this.morphNormals[b]={};this.morphNormals[b].faceNormals=[];this.morphNormals[b].vertexNormals=[];f=this.morphNormals[b].faceNormals;var k=this.morphNormals[b].vertexNormals,l,m;d=0;for(g=this.faces.length;d<g;d++)l=new THREE.Vector3,m={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},f.push(l),k.push(m)}k=this.morphNormals[b];h.vertices=this.morphTargets[b].vertices;
h.computeFaceNormals();h.computeVertexNormals();d=0;for(g=this.faces.length;d<g;d++)f=this.faces[d],l=k.faceNormals[d],m=k.vertexNormals[d],l.copy(f.normal),m.a.copy(f.vertexNormals[0]),m.b.copy(f.vertexNormals[1]),m.c.copy(f.vertexNormals[2])}d=0;for(g=this.faces.length;d<g;d++)f=this.faces[d],f.normal=f.__originalFaceNormal,f.vertexNormals=f.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var b=
0,c=this.vertices,d=0,g=c.length;d<g;d++)0<d&&(b+=c[d].distanceTo(c[d-1])),this.lineDistances[d]=b},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(b,c,d){if(!1===b instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
b);else{var g,f=this.vertices.length,h=this.vertices,k=b.vertices,l=this.faces,m=b.faces,p=this.faceVertexUvs[0];b=b.faceVertexUvs[0];void 0===d&&(d=0);void 0!==c&&(g=(new THREE.Matrix3).getNormalMatrix(c));for(var t=0,u=k.length;t<u;t++){var n=k[t].clone();void 0!==c&&n.applyMatrix4(c);h.push(n)}t=0;for(u=m.length;t<u;t++){var k=m[t],q,r=k.vertexNormals,w=k.vertexColors,n=new THREE.Face3(k.a+f,k.b+f,k.c+f);n.normal.copy(k.normal);void 0!==g&&n.normal.applyMatrix3(g).normalize();c=0;for(h=r.length;c<
h;c++)q=r[c].clone(),void 0!==g&&q.applyMatrix3(g).normalize(),n.vertexNormals.push(q);n.color.copy(k.color);c=0;for(h=w.length;c<h;c++)q=w[c],n.vertexColors.push(q.clone());n.materialIndex=k.materialIndex+d;l.push(n)}t=0;for(u=b.length;t<u;t++)if(d=b[t],g=[],void 0!==d){c=0;for(h=d.length;c<h;c++)g.push(d[c].clone());p.push(g)}}},mergeMesh:function(b){!1===b instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",b):(b.matrixAutoUpdate&&b.updateMatrix(),
this.merge(b.geometry,b.matrix))},mergeVertices:function(){var b={},c=[],d=[],g,f=Math.pow(10,4),h,k;h=0;for(k=this.vertices.length;h<k;h++)g=this.vertices[h],g=Math.round(g.x*f)+"_"+Math.round(g.y*f)+"_"+Math.round(g.z*f),void 0===b[g]?(b[g]=h,c.push(this.vertices[h]),d[h]=c.length-1):d[h]=d[b[g]];b=[];h=0;for(k=this.faces.length;h<k;h++)for(f=this.faces[h],f.a=d[f.a],f.b=d[f.b],f.c=d[f.c],f=[f.a,f.b,f.c],g=0;3>g;g++)if(f[g]===f[(g+1)%3]){b.push(h);break}for(h=b.length-1;0<=h;h--)for(f=b[h],this.faces.splice(f,
1),d=0,k=this.faceVertexUvs.length;d<k;d++)this.faceVertexUvs[d].splice(f,1);h=this.vertices.length-c.length;this.vertices=c;return h},toJSON:function(){function b(b,c,f){return f?b|1<<c:b&~(1<<c)}function c(b){var c=b.x.toString()+b.y.toString()+b.z.toString();if(void 0!==p[c])return p[c];p[c]=m.length/3;m.push(b.x,b.y,b.z);return p[c]}function d(b){var c=b.r.toString()+b.g.toString()+b.b.toString();if(void 0!==u[c])return u[c];u[c]=t.length;t.push(b.getHex());return u[c]}function g(b){var c=b.x.toString()+
b.y.toString();if(void 0!==q[c])return q[c];q[c]=n.length/2;n.push(b.x,b.y);return q[c]}var f={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);if(void 0!==this.parameters){var h=this.parameters,k;for(k in h)void 0!==h[k]&&(f[k]=h[k]);return f}h=[];for(k=0;k<this.vertices.length;k++){var l=this.vertices[k];h.push(l.x,l.y,l.z)}var l=[],m=[],p={},t=[],u={},n=[],q={};for(k=0;k<this.faces.length;k++){var r=this.faces[k],
w=void 0!==this.faceVertexUvs[0][k],v=0<r.normal.length(),y=0<r.vertexNormals.length,A=1!==r.color.r||1!==r.color.g||1!==r.color.b,x=0<r.vertexColors.length,z=0,z=b(z,0,0),z=b(z,1,!1),z=b(z,2,!1),z=b(z,3,w),z=b(z,4,v),z=b(z,5,y),z=b(z,6,A),z=b(z,7,x);l.push(z);l.push(r.a,r.b,r.c);w&&(w=this.faceVertexUvs[0][k],l.push(g(w[0]),g(w[1]),g(w[2])));v&&l.push(c(r.normal));y&&(v=r.vertexNormals,l.push(c(v[0]),c(v[1]),c(v[2])));A&&l.push(d(r.color));x&&(r=r.vertexColors,l.push(d(r[0]),d(r[1]),d(r[2])))}f.data=
{};f.data.vertices=h;f.data.normals=m;0<t.length&&(f.data.colors=t);0<n.length&&(f.data.uvs=[n]);f.data.faces=l;return f},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var c=b.vertices,d=0,g=c.length;d<g;d++)this.vertices.push(c[d].clone());c=b.faces;d=0;for(g=c.length;d<g;d++)this.faces.push(c[d].clone());d=0;for(g=b.faceVertexUvs.length;d<g;d++){c=b.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=
[]);for(var f=0,h=c.length;f<h;f++){for(var k=c[f],l=[],m=0,p=k.length;m<p;m++)l.push(k[m].clone());this.faceVertexUvs[d].push(l)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;
THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.DirectGeometry.prototype={constructor:THREE.DirectGeometry,computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(b){var c,d=[],
g;b=b.faces;for(var f=0;f<b.length;f++){var h=b[f];h.materialIndex!==g&&(g=h.materialIndex,void 0!==c&&(c.count=3*f-c.start,d.push(c)),c={start:3*f,materialIndex:g})}void 0!==c&&(c.count=3*f-c.start,d.push(c));this.groups=d},fromGeometry:function(b){var c=b.faces,d=b.vertices,g=b.faceVertexUvs,f=g[0]&&0<g[0].length,h=g[1]&&0<g[1].length,k=b.morphTargets,l=k.length;if(0<l){for(var m=[],p=0;p<l;p++)m[p]=[];this.morphTargets.position=m}var t=b.morphNormals,u=t.length;if(0<u){for(var n=[],p=0;p<u;p++)n[p]=
[];this.morphTargets.normal=n}for(var q=b.skinIndices,r=b.skinWeights,w=q.length===d.length,v=r.length===d.length,p=0;p<c.length;p++){var y=c[p];this.vertices.push(d[y.a],d[y.b],d[y.c]);var A=y.vertexNormals;3===A.length?this.normals.push(A[0],A[1],A[2]):(A=y.normal,this.normals.push(A,A,A));A=y.vertexColors;3===A.length?this.colors.push(A[0],A[1],A[2]):(A=y.color,this.colors.push(A,A,A));!0===f&&(A=g[0][p],void 0!==A?this.uvs.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
p),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));!0===h&&(A=g[1][p],void 0!==A?this.uvs2.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",p),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));for(A=0;A<l;A++){var x=k[A].vertices;m[A].push(x[y.a],x[y.b],x[y.c])}for(A=0;A<u;A++)x=t[A].vertexNormals[p],n[A].push(x.a,x.b,x.c);w&&this.skinIndices.push(q[y.a],q[y.b],q[y.c]);v&&this.skinWeights.push(r[y.a],r[y.b],
r[y.c])}this.computeGroups(b);this.verticesNeedUpdate=b.verticesNeedUpdate;this.normalsNeedUpdate=b.normalsNeedUpdate;this.colorsNeedUpdate=b.colorsNeedUpdate;this.uvsNeedUpdate=b.uvsNeedUpdate;this.groupsNeedUpdate=b.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.DirectGeometry.prototype);
THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addIndex:function(b){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(b)},getIndex:function(){return this.index},setIndex:function(b){this.index=b},addAttribute:function(b,c,d){!1===c instanceof THREE.BufferAttribute&&!1===c instanceof THREE.InterleavedBufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(b,new THREE.BufferAttribute(c,
d))):"index"===b?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(c)):this.attributes[b]=c},getAttribute:function(b){return this.attributes[b]},removeAttribute:function(b){delete this.attributes[b]},get drawcalls(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups},get offsets(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups},addDrawCall:function(b,
c,d){void 0!==d&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(b,c)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},addGroup:function(b,c,d){this.groups.push({start:b,count:c,materialIndex:void 0!==d?d:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(b,c){this.drawRange.start=b;this.drawRange.count=
c},applyMatrix:function(b){var c=this.attributes.position;void 0!==c&&(b.applyToVector3Array(c.array),c.needsUpdate=!0);c=this.attributes.normal;void 0!==c&&((new THREE.Matrix3).getNormalMatrix(b).applyToVector3Array(c.array),c.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationX(c);this.applyMatrix(b);return this}}(),rotateY:function(){var b;
return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationY(c);this.applyMatrix(b);return this}}(),rotateZ:function(){var b;return function(c){void 0===b&&(b=new THREE.Matrix4);b.makeRotationZ(c);this.applyMatrix(b);return this}}(),translate:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Matrix4);b.makeTranslation(c,d,g);this.applyMatrix(b);return this}}(),scale:function(){var b;return function(c,d,g){void 0===b&&(b=new THREE.Matrix4);b.makeScale(c,d,g);this.applyMatrix(b);
return this}}(),lookAt:function(){var b;return function(c){void 0===b&&(b=new THREE.Object3D);b.lookAt(c);b.updateMatrix();this.applyMatrix(b.matrix)}}(),center:function(){this.computeBoundingBox();var b=this.boundingBox.center().negate();this.translate(b.x,b.y,b.z);return b},setFromObject:function(b){var c=b.geometry;if(b instanceof THREE.Points||b instanceof THREE.Line){b=new THREE.Float32Attribute(3*c.vertices.length,3);var d=new THREE.Float32Attribute(3*c.colors.length,3);this.addAttribute("position",
b.copyVector3sArray(c.vertices));this.addAttribute("color",d.copyColorsArray(c.colors));c.lineDistances&&c.lineDistances.length===c.vertices.length&&(b=new THREE.Float32Attribute(c.lineDistances.length,1),this.addAttribute("lineDistance",b.copyArray(c.lineDistances)));null!==c.boundingSphere&&(this.boundingSphere=c.boundingSphere.clone());null!==c.boundingBox&&(this.boundingBox=c.boundingBox.clone())}else b instanceof THREE.Mesh&&c instanceof THREE.Geometry&&this.fromGeometry(c);return this},updateFromObject:function(b){var c=
b.geometry;if(b instanceof THREE.Mesh){var d=c.__directGeometry;if(void 0===d)return this.fromGeometry(c);d.verticesNeedUpdate=c.verticesNeedUpdate;d.normalsNeedUpdate=c.normalsNeedUpdate;d.colorsNeedUpdate=c.colorsNeedUpdate;d.uvsNeedUpdate=c.uvsNeedUpdate;d.groupsNeedUpdate=c.groupsNeedUpdate;c.verticesNeedUpdate=!1;c.normalsNeedUpdate=!1;c.colorsNeedUpdate=!1;c.uvsNeedUpdate=!1;c.groupsNeedUpdate=!1;c=d}!0===c.verticesNeedUpdate&&(d=this.attributes.position,void 0!==d&&(d.copyVector3sArray(c.vertices),
d.needsUpdate=!0),c.verticesNeedUpdate=!1);!0===c.normalsNeedUpdate&&(d=this.attributes.normal,void 0!==d&&(d.copyVector3sArray(c.normals),d.needsUpdate=!0),c.normalsNeedUpdate=!1);!0===c.colorsNeedUpdate&&(d=this.attributes.color,void 0!==d&&(d.copyColorsArray(c.colors),d.needsUpdate=!0),c.colorsNeedUpdate=!1);c.lineDistancesNeedUpdate&&(d=this.attributes.lineDistance,void 0!==d&&(d.copyArray(c.lineDistances),d.needsUpdate=!0),c.lineDistancesNeedUpdate=!1);c.groupsNeedUpdate&&(c.computeGroups(b.geometry),
this.groups=c.groups,c.groupsNeedUpdate=!1);return this},fromGeometry:function(b){b.__directGeometry=(new THREE.DirectGeometry).fromGeometry(b);return this.fromDirectGeometry(b.__directGeometry)},fromDirectGeometry:function(b){var c=new Float32Array(3*b.vertices.length);this.addAttribute("position",(new THREE.BufferAttribute(c,3)).copyVector3sArray(b.vertices));0<b.normals.length&&(c=new Float32Array(3*b.normals.length),this.addAttribute("normal",(new THREE.BufferAttribute(c,3)).copyVector3sArray(b.normals)));
0<b.colors.length&&(c=new Float32Array(3*b.colors.length),this.addAttribute("color",(new THREE.BufferAttribute(c,3)).copyColorsArray(b.colors)));0<b.uvs.length&&(c=new Float32Array(2*b.uvs.length),this.addAttribute("uv",(new THREE.BufferAttribute(c,2)).copyVector2sArray(b.uvs)));0<b.uvs2.length&&(c=new Float32Array(2*b.uvs2.length),this.addAttribute("uv2",(new THREE.BufferAttribute(c,2)).copyVector2sArray(b.uvs2)));0<b.indices.length&&(c=new (65535<b.vertices.length?Uint32Array:Uint16Array)(3*b.indices.length),
this.setIndex((new THREE.BufferAttribute(c,1)).copyIndicesArray(b.indices)));this.groups=b.groups;for(var d in b.morphTargets){for(var c=[],g=b.morphTargets[d],f=0,h=g.length;f<h;f++){var k=g[f],l=new THREE.Float32Attribute(3*k.length,3);c.push(l.copyVector3sArray(k))}this.morphAttributes[d]=c}0<b.skinIndices.length&&(d=new THREE.Float32Attribute(4*b.skinIndices.length,4),this.addAttribute("skinIndex",d.copyVector4sArray(b.skinIndices)));0<b.skinWeights.length&&(d=new THREE.Float32Attribute(4*b.skinWeights.length,
4),this.addAttribute("skinWeight",d.copyVector4sArray(b.skinWeights)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone());return this},computeBoundingBox:function(){var b=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var c=this.attributes.position.array;if(c){var d=this.boundingBox;d.makeEmpty();for(var g=0,f=c.length;g<f;g+=3)b.fromArray(c,g),d.expandByPoint(b)}if(void 0===
c||0===c.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var b=new THREE.Box3,c=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var d=this.attributes.position.array;
if(d){b.makeEmpty();for(var g=this.boundingSphere.center,f=0,h=d.length;f<h;f+=3)c.fromArray(d,f),b.expandByPoint(c);b.center(g);for(var k=0,f=0,h=d.length;f<h;f+=3)c.fromArray(d,f),k=Math.max(k,g.distanceToSquared(c));this.boundingSphere.radius=Math.sqrt(k);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var b=
this.index,c=this.attributes,d=this.groups;if(c.position){var g=c.position.array;if(void 0===c.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(g.length),3));else for(var f=c.normal.array,h=0,k=f.length;h<k;h++)f[h]=0;var f=c.normal.array,l,m,p,t=new THREE.Vector3,u=new THREE.Vector3,n=new THREE.Vector3,q=new THREE.Vector3,r=new THREE.Vector3;if(b){b=b.array;0===d.length&&this.addGroup(0,b.length);for(var w=0,v=d.length;w<v;++w)for(h=d[w],k=h.start,l=h.count,h=k,k+=l;h<
k;h+=3)l=3*b[h+0],m=3*b[h+1],p=3*b[h+2],t.fromArray(g,l),u.fromArray(g,m),n.fromArray(g,p),q.subVectors(n,u),r.subVectors(t,u),q.cross(r),f[l]+=q.x,f[l+1]+=q.y,f[l+2]+=q.z,f[m]+=q.x,f[m+1]+=q.y,f[m+2]+=q.z,f[p]+=q.x,f[p+1]+=q.y,f[p+2]+=q.z}else for(h=0,k=g.length;h<k;h+=9)t.fromArray(g,h),u.fromArray(g,h+3),n.fromArray(g,h+6),q.subVectors(n,u),r.subVectors(t,u),q.cross(r),f[h]=q.x,f[h+1]=q.y,f[h+2]=q.z,f[h+3]=q.x,f[h+4]=q.y,f[h+5]=q.z,f[h+6]=q.x,f[h+7]=q.y,f[h+8]=q.z;this.normalizeNormals();c.normal.needsUpdate=
!0}},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(b){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},merge:function(b,c){if(!1===b instanceof THREE.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",b);else{void 0===c&&(c=0);var d=this.attributes,g;for(g in d)if(void 0!==b.attributes[g])for(var f=d[g].array,h=b.attributes[g],k=h.array,
l=0,h=h.itemSize*c;l<k.length;l++,h++)f[h]=k[l];return this}},normalizeNormals:function(){for(var b=this.attributes.normal.array,c,d,g,f=0,h=b.length;f<h;f+=3)c=b[f],d=b[f+1],g=b[f+2],c=1/Math.sqrt(c*c+d*d+g*g),b[f]*=c,b[f+1]*=c,b[f+2]*=c},toJSON:function(){var b={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};b.uuid=this.uuid;b.type=this.type;""!==this.name&&(b.name=this.name);if(void 0!==this.parameters){var c=this.parameters,d;for(d in c)void 0!==c[d]&&(b[d]=c[d]);
return b}b.data={attributes:{}};var g=this.index;null!==g&&(c=Array.prototype.slice.call(g.array),b.data.index={type:g.array.constructor.name,array:c});g=this.attributes;for(d in g){var f=g[d],c=Array.prototype.slice.call(f.array);b.data.attributes[d]={itemSize:f.itemSize,type:f.array.constructor.name,array:c}}d=this.groups;0<d.length&&(b.data.groups=JSON.parse(JSON.stringify(d)));d=this.boundingSphere;null!==d&&(b.data.boundingSphere={center:d.center.toArray(),radius:d.radius});return b},clone:function(){return(new this.constructor).copy(this)},
copy:function(b){var c=b.index;null!==c&&this.setIndex(c.clone());var c=b.attributes,d;for(d in c)this.addAttribute(d,c[d].clone());b=b.groups;d=0;for(c=b.length;d<c;d++){var g=b[d];this.addGroup(g.start,g.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);THREE.BufferGeometry.MaxIndex=65535;
THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;THREE.InstancedBufferGeometry.prototype.addGroup=function(b,c,d){this.groups.push({start:b,count:c,instances:d})};
THREE.InstancedBufferGeometry.prototype.copy=function(b){var c=b.index;null!==c&&this.setIndex(c.clone());var c=b.attributes,d;for(d in c)this.addAttribute(d,c[d].clone());b=b.groups;d=0;for(c=b.length;d<c;d++){var g=b[d];this.addGroup(g.start,g.count,g.instances)}return this};THREE.EventDispatcher.prototype.apply(THREE.InstancedBufferGeometry.prototype);THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};
THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.constructor=THREE.Camera;THREE.Camera.prototype.getWorldDirection=function(){var b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.getWorldQuaternion(b);return c.set(0,0,-1).applyQuaternion(b)}}();THREE.Camera.prototype.lookAt=function(){var b=new THREE.Matrix4;return function(c){b.lookAt(this.position,c,this.up);this.quaternion.setFromRotationMatrix(b)}}();THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)};
THREE.Camera.prototype.copy=function(b){THREE.Object3D.prototype.copy.call(this,b);this.matrixWorldInverse.copy(b.matrixWorldInverse);this.projectionMatrix.copy(b.projectionMatrix);return this};
THREE.CubeCamera=function(b,c,d){THREE.Object3D.call(this);this.type="CubeCamera";var g=new THREE.PerspectiveCamera(90,1,b,c);g.up.set(0,-1,0);g.lookAt(new THREE.Vector3(1,0,0));this.add(g);var f=new THREE.PerspectiveCamera(90,1,b,c);f.up.set(0,-1,0);f.lookAt(new THREE.Vector3(-1,0,0));this.add(f);var h=new THREE.PerspectiveCamera(90,1,b,c);h.up.set(0,0,1);h.lookAt(new THREE.Vector3(0,1,0));this.add(h);var k=new THREE.PerspectiveCamera(90,1,b,c);k.up.set(0,0,-1);k.lookAt(new THREE.Vector3(0,-1,0));
this.add(k);var l=new THREE.PerspectiveCamera(90,1,b,c);l.up.set(0,-1,0);l.lookAt(new THREE.Vector3(0,0,1));this.add(l);var m=new THREE.PerspectiveCamera(90,1,b,c);m.up.set(0,-1,0);m.lookAt(new THREE.Vector3(0,0,-1));this.add(m);this.renderTarget=new THREE.WebGLRenderTargetCube(d,d,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(b,c){null===this.parent&&this.updateMatrixWorld();var d=this.renderTarget,n=d.generateMipmaps;d.generateMipmaps=
!1;d.activeCubeFace=0;b.render(c,g,d);d.activeCubeFace=1;b.render(c,f,d);d.activeCubeFace=2;b.render(c,h,d);d.activeCubeFace=3;b.render(c,k,d);d.activeCubeFace=4;b.render(c,l,d);d.generateMipmaps=n;d.activeCubeFace=5;b.render(c,m,d);b.setRenderTarget(null)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;
THREE.OrthographicCamera=function(b,c,d,g,f,h){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=b;this.right=c;this.top=d;this.bottom=g;this.near=void 0!==f?f:.1;this.far=void 0!==h?h:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera;
THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var b=(this.right-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),d=(this.right+this.left)/2,g=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(d-b,d+b,g+c,g-c,this.near,this.far)};THREE.OrthographicCamera.prototype.copy=function(b){THREE.Camera.prototype.copy.call(this,b);this.left=b.left;this.right=b.right;this.top=b.top;this.bottom=b.bottom;this.near=b.near;this.far=b.far;this.zoom=b.zoom;return this};
THREE.OrthographicCamera.prototype.toJSON=function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.zoom=this.zoom;b.object.left=this.left;b.object.right=this.right;b.object.top=this.top;b.object.bottom=this.bottom;b.object.near=this.near;b.object.far=this.far;return b};THREE.PerspectiveCamera=function(b,c,d,g){THREE.Camera.call(this);this.type="PerspectiveCamera";this.zoom=1;this.fov=void 0!==b?b:50;this.aspect=void 0!==c?c:1;this.near=void 0!==d?d:.1;this.far=void 0!==g?g:2E3;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera;THREE.PerspectiveCamera.prototype.setLens=function(b,c){void 0===c&&(c=24);this.fov=2*THREE.Math.radToDeg(Math.atan(c/(2*b)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(b,c,d,g,f,h){this.fullWidth=b;this.fullHeight=c;this.x=d;this.y=g;this.width=f;this.height=h;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var b=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var c=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(.5*b))*this.near,d=-b,g=c*d,c=Math.abs(c*b-g),d=Math.abs(b-d);this.projectionMatrix.makeFrustum(g+this.x*c/this.fullWidth,g+(this.x+this.width)*c/this.fullWidth,b-(this.y+this.height)*d/this.fullHeight,b-this.y*d/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(b,
this.aspect,this.near,this.far)};THREE.PerspectiveCamera.prototype.copy=function(b){THREE.Camera.prototype.copy.call(this,b);this.fov=b.fov;this.aspect=b.aspect;this.near=b.near;this.far=b.far;this.zoom=b.zoom;return this};THREE.PerspectiveCamera.prototype.toJSON=function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.zoom=this.zoom;b.object.fov=this.fov;b.object.aspect=this.aspect;b.object.near=this.near;b.object.far=this.far;return b};
THREE.Light=function(b){THREE.Object3D.call(this);this.type="Light";this.color=new THREE.Color(b)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.constructor=THREE.Light;THREE.Light.prototype.copy=function(b){THREE.Object3D.prototype.copy.call(this,b);this.color.copy(b.color);return this};THREE.AmbientLight=function(b){THREE.Light.call(this,b);this.type="AmbientLight"};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);
THREE.AmbientLight.prototype.constructor=THREE.AmbientLight;THREE.AmbientLight.prototype.toJSON=function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.color=this.color.getHex();return b};
THREE.DirectionalLight=function(b,c){THREE.Light.call(this,b);this.type="DirectionalLight";this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D;this.intensity=void 0!==c?c:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=
this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight;
THREE.DirectionalLight.prototype.copy=function(b){THREE.Light.prototype.copy.call(this,b);this.intensity=b.intensity;this.target=b.target.clone();this.castShadow=b.castShadow;this.onlyShadow=b.onlyShadow;this.shadowCameraNear=b.shadowCameraNear;this.shadowCameraFar=b.shadowCameraFar;this.shadowCameraLeft=b.shadowCameraLeft;this.shadowCameraRight=b.shadowCameraRight;this.shadowCameraTop=b.shadowCameraTop;this.shadowCameraBottom=b.shadowCameraBottom;this.shadowCameraVisible=b.shadowCameraVisible;this.shadowBias=
b.shadowBias;this.shadowDarkness=b.shadowDarkness;this.shadowMapWidth=b.shadowMapWidth;this.shadowMapHeight=b.shadowMapHeight;return this};THREE.DirectionalLight.prototype.toJSON=function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.color=this.color.getHex();b.object.intensity=this.intensity;return b};
THREE.HemisphereLight=function(b,c,d){THREE.Light.call(this,b);this.type="HemisphereLight";this.position.set(0,1,0);this.updateMatrix();this.groundColor=new THREE.Color(c);this.intensity=void 0!==d?d:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight;THREE.HemisphereLight.prototype.copy=function(b){THREE.Light.prototype.copy.call(this,b);this.groundColor.copy(b.groundColor);this.intensity=b.intensity;return this};
THREE.HemisphereLight.prototype.toJSON=function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.color=this.color.getHex();b.object.groundColor=this.groundColor.getHex();b.object.intensity=this.intensity;return b};THREE.PointLight=function(b,c,d,g){THREE.Light.call(this,b);this.type="PointLight";this.intensity=void 0!==c?c:1;this.distance=void 0!==d?d:0;this.decay=void 0!==g?g:1};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.constructor=THREE.PointLight;
THREE.PointLight.prototype.copy=function(b){THREE.Light.prototype.copy.call(this,b);this.intensity=b.intensity;this.distance=b.distance;this.decay=b.decay;return this};THREE.PointLight.prototype.toJSON=function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.color=this.color.getHex();b.object.intensity=this.intensity;b.object.distance=this.distance;b.object.decay=this.decay;return b};
THREE.SpotLight=function(b,c,d,g,f,h){THREE.Light.call(this,b);this.type="SpotLight";this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D;this.intensity=void 0!==c?c:1;this.distance=void 0!==d?d:0;this.angle=void 0!==g?g:Math.PI/3;this.exponent=void 0!==f?f:10;this.decay=void 0!==h?h:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=
this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.constructor=THREE.SpotLight;
THREE.SpotLight.prototype.copy=function(b){THREE.Light.prototype.copy.call(this,b);this.intensity=b.intensity;this.distance=b.distance;this.angle=b.angle;this.exponent=b.exponent;this.decay=b.decay;this.target=b.target.clone();this.castShadow=b.castShadow;this.onlyShadow=b.onlyShadow;this.shadowCameraNear=b.shadowCameraNear;this.shadowCameraFar=b.shadowCameraFar;this.shadowCameraFov=b.shadowCameraFov;this.shadowCameraVisible=b.shadowCameraVisible;this.shadowBias=b.shadowBias;this.shadowDarkness=b.shadowDarkness;
this.shadowMapWidth=b.shadowMapWidth;this.shadowMapHeight=b.shadowMapHeight;return this};THREE.SpotLight.prototype.toJSON=function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.color=this.color.getHex();b.object.intensity=this.intensity;b.object.distance=this.distance;b.object.angle=this.angle;b.object.exponent=this.exponent;b.object.decay=this.decay;return b};
THREE.Cache={enabled:!1,files:{},add:function(b,c){!1!==this.enabled&&(this.files[b]=c)},get:function(b){if(!1!==this.enabled)return this.files[b]},remove:function(b){delete this.files[b]},clear:function(){this.files={}}};THREE.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(b){b=b.split("/");if(1===b.length)return"./";b.pop();return b.join("/")+"/"},initMaterials:function(b,c,d){for(var g=[],f=0;f<b.length;++f)g[f]=this.createMaterial(b[f],c,d);return g},createMaterial:function(){var b;return function(c,d,g){function f(b){b=Math.log(b)/Math.LN2;return Math.pow(2,Math.round(b))}function h(c,h,k,l,m,p,v){var y=d+k,A,x=THREE.Loader.Handlers.get(y);null!==x?A=x.load(y):(A=new THREE.Texture,
x=b,x.setCrossOrigin(g),x.load(y,function(b){if(!1===THREE.Math.isPowerOfTwo(b.width)||!1===THREE.Math.isPowerOfTwo(b.height)){var c=f(b.width),h=f(b.height),g=document.createElement("canvas");g.width=c;g.height=h;g.getContext("2d").drawImage(b,0,0,c,h);A.image=g}else A.image=b;A.needsUpdate=!0}));A.sourceFile=k;l&&(A.repeat.set(l[0],l[1]),1!==l[0]&&(A.wrapS=THREE.RepeatWrapping),1!==l[1]&&(A.wrapT=THREE.RepeatWrapping));m&&A.offset.set(m[0],m[1]);p&&(k={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},
void 0!==k[p[0]]&&(A.wrapS=k[p[0]]),void 0!==k[p[1]]&&(A.wrapT=k[p[1]]));v&&(A.anisotropy=v);c[h]=A}function k(b){return(255*b[0]<<16)+(255*b[1]<<8)+255*b[2]}void 0===g&&void 0!==this.crossOrigin&&(g=this.crossOrigin);void 0===b&&(b=new THREE.ImageLoader);var l="MeshLambertMaterial",m={};if(c.shading){var p=c.shading.toLowerCase();"phong"===p?l="MeshPhongMaterial":"basic"===p&&(l="MeshBasicMaterial")}void 0!==c.blending&&void 0!==THREE[c.blending]&&(m.blending=THREE[c.blending]);void 0!==c.transparent&&
(m.transparent=c.transparent);void 0!==c.opacity&&1>c.opacity&&(m.transparent=!0);void 0!==c.depthTest&&(m.depthTest=c.depthTest);void 0!==c.depthWrite&&(m.depthWrite=c.depthWrite);void 0!==c.visible&&(m.visible=c.visible);void 0!==c.flipSided&&(m.side=THREE.BackSide);void 0!==c.doubleSided&&(m.side=THREE.DoubleSide);void 0!==c.wireframe&&(m.wireframe=c.wireframe);void 0!==c.vertexColors&&("face"===c.vertexColors?m.vertexColors=THREE.FaceColors:c.vertexColors&&(m.vertexColors=THREE.VertexColors));
c.colorDiffuse?m.color=k(c.colorDiffuse):c.DbgColor&&(m.color=c.DbgColor);c.colorEmissive&&(m.emissive=k(c.colorEmissive));"MeshPhongMaterial"===l&&(c.colorSpecular&&(m.specular=k(c.colorSpecular)),c.specularCoef&&(m.shininess=c.specularCoef));void 0!==c.transparency&&(console.warn("THREE.Loader: transparency has been renamed to opacity"),c.opacity=c.transparency);void 0!==c.opacity&&(m.opacity=c.opacity);d&&(c.mapDiffuse&&h(m,"map",c.mapDiffuse,c.mapDiffuseRepeat,c.mapDiffuseOffset,c.mapDiffuseWrap,
c.mapDiffuseAnisotropy),c.mapLight&&h(m,"lightMap",c.mapLight,c.mapLightRepeat,c.mapLightOffset,c.mapLightWrap,c.mapLightAnisotropy),c.mapAO&&h(m,"aoMap",c.mapAO,c.mapAORepeat,c.mapAOOffset,c.mapAOWrap,c.mapAOAnisotropy),c.mapBump&&h(m,"bumpMap",c.mapBump,c.mapBumpRepeat,c.mapBumpOffset,c.mapBumpWrap,c.mapBumpAnisotropy),c.mapNormal&&h(m,"normalMap",c.mapNormal,c.mapNormalRepeat,c.mapNormalOffset,c.mapNormalWrap,c.mapNormalAnisotropy),c.mapSpecular&&h(m,"specularMap",c.mapSpecular,c.mapSpecularRepeat,
c.mapSpecularOffset,c.mapSpecularWrap,c.mapSpecularAnisotropy),c.mapAlpha&&h(m,"alphaMap",c.mapAlpha,c.mapAlphaRepeat,c.mapAlphaOffset,c.mapAlphaWrap,c.mapAlphaAnisotropy));c.mapBumpScale&&(m.bumpScale=c.mapBumpScale);c.mapNormalFactor&&(m.normalScale=new THREE.Vector2(c.mapNormalFactor,c.mapNormalFactor));l=new THREE[l](m);void 0!==c.DbgName&&(l.name=c.DbgName);return l}}()};
THREE.Loader.Handlers={handlers:[],add:function(b,c){this.handlers.push(b,c)},get:function(b){for(var c=0,d=this.handlers.length;c<d;c+=2){var g=this.handlers[c+1];if(this.handlers[c].test(b))return g}return null}};THREE.XHRLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(b,c,d,g){var f=this,h=THREE.Cache.get(b);if(void 0!==h)return c&&setTimeout(function(){c(h)},0),h;var k=new XMLHttpRequest;k.open("GET",b,!0);k.addEventListener("load",function(h){THREE.Cache.add(b,this.response);c&&c(this.response);f.manager.itemEnd(b)},!1);void 0!==d&&k.addEventListener("progress",function(b){d(b)},!1);k.addEventListener("error",function(c){g&&g(c);f.manager.itemError(b)},!1);void 0!==this.crossOrigin&&(k.crossOrigin=
this.crossOrigin);void 0!==this.responseType&&(k.responseType=this.responseType);void 0!==this.withCredentials&&(k.withCredentials=this.withCredentials);k.send(null);f.manager.itemStart(b);return k},setResponseType:function(b){this.responseType=b},setCrossOrigin:function(b){this.crossOrigin=b},setWithCredentials:function(b){this.withCredentials=b}};THREE.ImageLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(b,c,d,g){var f=this,h=THREE.Cache.get(b);if(void 0!==h)return c&&setTimeout(function(){c(h)},0),h;var k=document.createElement("img");k.addEventListener("load",function(h){THREE.Cache.add(b,this);c&&c(this);f.manager.itemEnd(b)},!1);void 0!==d&&k.addEventListener("progress",function(b){d(b)},!1);k.addEventListener("error",function(c){g&&g(c);f.manager.itemError(b)},!1);void 0!==this.crossOrigin&&(k.crossOrigin=this.crossOrigin);
f.manager.itemStart(b);k.src=b;return k},setCrossOrigin:function(b){this.crossOrigin=b}};THREE.JSONLoader=function(b){"boolean"===typeof b&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),b=void 0);this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this.withCredentials=!1};
THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,get statusDomElement(){void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div"));console.warn("THREE.JSONLoader: .statusDomElement has been removed.");return this._statusDomElement},load:function(b,c,d,g){var f=this,h=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(b);d=new THREE.XHRLoader(this.manager);d.setCrossOrigin(this.crossOrigin);d.setWithCredentials(this.withCredentials);
d.load(b,function(g){g=JSON.parse(g);var d=g.metadata;if(void 0!==d){if("object"===d.type){console.error("THREE.JSONLoader: "+b+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===d.type){console.error("THREE.JSONLoader: "+b+" should be loaded with THREE.SceneLoader instead.");return}}g=f.parse(g,h);c(g.geometry,g.materials)})},setCrossOrigin:function(b){this.crossOrigin=b},setTexturePath:function(b){this.texturePath=b},parse:function(b,c){var d=new THREE.Geometry,g=void 0!==
b.scale?1/b.scale:1;(function(c){var h,g,l,m,p,t,u,n,q,r,w,v,y,A=b.faces;t=b.vertices;var x=b.normals,z=b.colors,C=0;if(void 0!==b.uvs){for(h=0;h<b.uvs.length;h++)b.uvs[h].length&&C++;for(h=0;h<C;h++)d.faceVertexUvs[h]=[]}m=0;for(p=t.length;m<p;)h=new THREE.Vector3,h.x=t[m++]*c,h.y=t[m++]*c,h.z=t[m++]*c,d.vertices.push(h);m=0;for(p=A.length;m<p;)if(c=A[m++],q=c&1,l=c&2,h=c&8,u=c&16,r=c&32,t=c&64,c&=128,q){q=new THREE.Face3;q.a=A[m];q.b=A[m+1];q.c=A[m+3];w=new THREE.Face3;w.a=A[m+1];w.b=A[m+2];w.c=
A[m+3];m+=4;l&&(l=A[m++],q.materialIndex=l,w.materialIndex=l);l=d.faces.length;if(h)for(h=0;h<C;h++)for(v=b.uvs[h],d.faceVertexUvs[h][l]=[],d.faceVertexUvs[h][l+1]=[],g=0;4>g;g++)n=A[m++],y=v[2*n],n=v[2*n+1],y=new THREE.Vector2(y,n),2!==g&&d.faceVertexUvs[h][l].push(y),0!==g&&d.faceVertexUvs[h][l+1].push(y);u&&(u=3*A[m++],q.normal.set(x[u++],x[u++],x[u]),w.normal.copy(q.normal));if(r)for(h=0;4>h;h++)u=3*A[m++],r=new THREE.Vector3(x[u++],x[u++],x[u]),2!==h&&q.vertexNormals.push(r),0!==h&&w.vertexNormals.push(r);
t&&(t=A[m++],t=z[t],q.color.setHex(t),w.color.setHex(t));if(c)for(h=0;4>h;h++)t=A[m++],t=z[t],2!==h&&q.vertexColors.push(new THREE.Color(t)),0!==h&&w.vertexColors.push(new THREE.Color(t));d.faces.push(q);d.faces.push(w)}else{q=new THREE.Face3;q.a=A[m++];q.b=A[m++];q.c=A[m++];l&&(l=A[m++],q.materialIndex=l);l=d.faces.length;if(h)for(h=0;h<C;h++)for(v=b.uvs[h],d.faceVertexUvs[h][l]=[],g=0;3>g;g++)n=A[m++],y=v[2*n],n=v[2*n+1],y=new THREE.Vector2(y,n),d.faceVertexUvs[h][l].push(y);u&&(u=3*A[m++],q.normal.set(x[u++],
x[u++],x[u]));if(r)for(h=0;3>h;h++)u=3*A[m++],r=new THREE.Vector3(x[u++],x[u++],x[u]),q.vertexNormals.push(r);t&&(t=A[m++],q.color.setHex(z[t]));if(c)for(h=0;3>h;h++)t=A[m++],q.vertexColors.push(new THREE.Color(z[t]));d.faces.push(q)}})(g);(function(){var c=void 0!==b.influencesPerVertex?b.influencesPerVertex:2;if(b.skinWeights)for(var h=0,g=b.skinWeights.length;h<g;h+=c)d.skinWeights.push(new THREE.Vector4(b.skinWeights[h],1<c?b.skinWeights[h+1]:0,2<c?b.skinWeights[h+2]:0,3<c?b.skinWeights[h+3]:
0));if(b.skinIndices)for(h=0,g=b.skinIndices.length;h<g;h+=c)d.skinIndices.push(new THREE.Vector4(b.skinIndices[h],1<c?b.skinIndices[h+1]:0,2<c?b.skinIndices[h+2]:0,3<c?b.skinIndices[h+3]:0));d.bones=b.bones;d.bones&&0<d.bones.length&&(d.skinWeights.length!==d.skinIndices.length||d.skinIndices.length!==d.vertices.length)&&console.warn("When skinning, number of vertices ("+d.vertices.length+"), skinIndices ("+d.skinIndices.length+"), and skinWeights ("+d.skinWeights.length+") should match.");d.animation=
b.animation;d.animations=b.animations})();(function(c){if(void 0!==b.morphTargets){var h,g,l,m,p,t;h=0;for(g=b.morphTargets.length;h<g;h++)for(d.morphTargets[h]={},d.morphTargets[h].name=b.morphTargets[h].name,d.morphTargets[h].vertices=[],p=d.morphTargets[h].vertices,t=b.morphTargets[h].vertices,l=0,m=t.length;l<m;l+=3){var u=new THREE.Vector3;u.x=t[l]*c;u.y=t[l+1]*c;u.z=t[l+2]*c;p.push(u)}}if(void 0!==b.morphColors)for(h=0,g=b.morphColors.length;h<g;h++)for(d.morphColors[h]={},d.morphColors[h].name=
b.morphColors[h].name,d.morphColors[h].colors=[],m=d.morphColors[h].colors,p=b.morphColors[h].colors,c=0,l=p.length;c<l;c+=3)t=new THREE.Color(16755200),t.setRGB(p[c],p[c+1],p[c+2]),m.push(t)})(g);d.computeFaceNormals();d.computeBoundingSphere();if(void 0===b.materials||0===b.materials.length)return{geometry:d};g=THREE.Loader.prototype.initMaterials(b.materials,c,this.crossOrigin);return{geometry:d,materials:g}}};
THREE.LoadingManager=function(b,c,d){var g=this,f=!1,h=0,k=0;this.onStart=void 0;this.onLoad=b;this.onProgress=c;this.onError=d;this.itemStart=function(b){k++;if(!1===f&&void 0!==g.onStart)g.onStart(b,h,k);f=!0};this.itemEnd=function(b){h++;if(void 0!==g.onProgress)g.onProgress(b,h,k);if(h===k&&(f=!1,void 0!==g.onLoad))g.onLoad()};this.itemError=function(b){if(void 0!==g.onError)g.onError(b)}};THREE.DefaultLoadingManager=new THREE.LoadingManager;
THREE.BufferGeometryLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(b,c,d,g){var f=this,h=new THREE.XHRLoader(f.manager);h.setCrossOrigin(this.crossOrigin);h.load(b,function(b){c(f.parse(JSON.parse(b)))},d,g)},setCrossOrigin:function(b){this.crossOrigin=b},parse:function(b){var c=new THREE.BufferGeometry,d=b.data.index;void 0!==d&&(d=new self[d.type](d.array),c.setIndex(new THREE.BufferAttribute(d,1)));var g=b.data.attributes,f;for(f in g){var h=g[f],d=new self[h.type](h.array);
c.addAttribute(f,new THREE.BufferAttribute(d,h.itemSize))}f=b.data.groups||b.data.drawcalls||b.data.offsets;if(void 0!==f)for(d=0,g=f.length;d!==g;++d)h=f[d],c.addGroup(h.start,h.count);b=b.data.boundingSphere;void 0!==b&&(f=new THREE.Vector3,void 0!==b.center&&f.fromArray(b.center),c.boundingSphere=new THREE.Sphere(f,b.radius));return c}};THREE.MaterialLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this.textures={}};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(b,c,d,g){var f=this,h=new THREE.XHRLoader(f.manager);h.setCrossOrigin(this.crossOrigin);h.load(b,function(b){c(f.parse(JSON.parse(b)))},d,g)},setCrossOrigin:function(b){this.crossOrigin=b},setTextures:function(b){this.textures=b},getTexture:function(b){var c=this.textures;void 0===c[b]&&console.warn("THREE.MaterialLoader: Undefined texture",b);return c[b]},parse:function(b){var c=new THREE[b.type];c.uuid=b.uuid;void 0!==
b.name&&(c.name=b.name);void 0!==b.color&&c.color.setHex(b.color);void 0!==b.emissive&&c.emissive.setHex(b.emissive);void 0!==b.specular&&c.specular.setHex(b.specular);void 0!==b.shininess&&(c.shininess=b.shininess);void 0!==b.uniforms&&(c.uniforms=b.uniforms);void 0!==b.vertexShader&&(c.vertexShader=b.vertexShader);void 0!==b.fragmentShader&&(c.fragmentShader=b.fragmentShader);void 0!==b.vertexColors&&(c.vertexColors=b.vertexColors);void 0!==b.shading&&(c.shading=b.shading);void 0!==b.blending&&
(c.blending=b.blending);void 0!==b.side&&(c.side=b.side);void 0!==b.opacity&&(c.opacity=b.opacity);void 0!==b.transparent&&(c.transparent=b.transparent);void 0!==b.alphaTest&&(c.alphaTest=b.alphaTest);void 0!==b.depthTest&&(c.depthTest=b.depthTest);void 0!==b.depthWrite&&(c.depthWrite=b.depthWrite);void 0!==b.wireframe&&(c.wireframe=b.wireframe);void 0!==b.wireframeLinewidth&&(c.wireframeLinewidth=b.wireframeLinewidth);void 0!==b.size&&(c.size=b.size);void 0!==b.sizeAttenuation&&(c.sizeAttenuation=
b.sizeAttenuation);void 0!==b.map&&(c.map=this.getTexture(b.map));void 0!==b.alphaMap&&(c.alphaMap=this.getTexture(b.alphaMap),c.transparent=!0);void 0!==b.bumpMap&&(c.bumpMap=this.getTexture(b.bumpMap));void 0!==b.bumpScale&&(c.bumpScale=b.bumpScale);void 0!==b.normalMap&&(c.normalMap=this.getTexture(b.normalMap));b.normalScale&&(c.normalScale=new THREE.Vector2(b.normalScale,b.normalScale));void 0!==b.displacementMap&&(c.displacementMap=this.getTexture(b.displacementMap));void 0!==b.displacementScale&&
(c.displacementScale=b.displacementScale);void 0!==b.displacementBias&&(c.displacementBias=b.displacementBias);void 0!==b.specularMap&&(c.specularMap=this.getTexture(b.specularMap));void 0!==b.envMap&&(c.envMap=this.getTexture(b.envMap),c.combine=THREE.MultiplyOperation);b.reflectivity&&(c.reflectivity=b.reflectivity);void 0!==b.lightMap&&(c.lightMap=this.getTexture(b.lightMap));void 0!==b.lightMapIntensity&&(c.lightMapIntensity=b.lightMapIntensity);void 0!==b.aoMap&&(c.aoMap=this.getTexture(b.aoMap));
void 0!==b.aoMapIntensity&&(c.aoMapIntensity=b.aoMapIntensity);if(void 0!==b.materials)for(var d=0,g=b.materials.length;d<g;d++)c.materials.push(this.parse(b.materials[d]));return c}};THREE.ObjectLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this.texturePath=""};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(b,c,d,g){""===this.texturePath&&(this.texturePath=b.substring(0,b.lastIndexOf("/")+1));var f=this,h=new THREE.XHRLoader(f.manager);h.setCrossOrigin(this.crossOrigin);h.load(b,function(b){f.parse(JSON.parse(b),c)},d,g)},setTexturePath:function(b){this.texturePath=b},setCrossOrigin:function(b){this.crossOrigin=b},parse:function(b,c){var d=this.parseGeometries(b.geometries),g=this.parseImages(b.images,function(){void 0!==c&&c(f)}),
g=this.parseTextures(b.textures,g),g=this.parseMaterials(b.materials,g),f=this.parseObject(b.object,d,g);void 0!==b.images&&0!==b.images.length||void 0===c||c(f);return f},parseGeometries:function(b){var c={};if(void 0!==b)for(var d=new THREE.JSONLoader,g=new THREE.BufferGeometryLoader,f=0,h=b.length;f<h;f++){var k,l=b[f];switch(l.type){case "PlaneGeometry":case "PlaneBufferGeometry":k=new THREE[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case "BoxGeometry":case "CubeGeometry":k=
new THREE.BoxGeometry(l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case "CircleBufferGeometry":k=new THREE.CircleBufferGeometry(l.radius,l.segments,l.thetaStart,l.thetaLength);break;case "CircleGeometry":k=new THREE.CircleGeometry(l.radius,l.segments,l.thetaStart,l.thetaLength);break;case "CylinderGeometry":k=new THREE.CylinderGeometry(l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case "SphereGeometry":k=
new THREE.SphereGeometry(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case "SphereBufferGeometry":k=new THREE.SphereBufferGeometry(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case "DodecahedronGeometry":k=new THREE.DodecahedronGeometry(l.radius,l.detail);break;case "IcosahedronGeometry":k=new THREE.IcosahedronGeometry(l.radius,l.detail);break;case "OctahedronGeometry":k=new THREE.OctahedronGeometry(l.radius,
l.detail);break;case "TetrahedronGeometry":k=new THREE.TetrahedronGeometry(l.radius,l.detail);break;case "RingGeometry":k=new THREE.RingGeometry(l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case "TorusGeometry":k=new THREE.TorusGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case "TorusKnotGeometry":k=new THREE.TorusKnotGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.p,l.q,l.heightScale);break;case "TextGeometry":k=
new THREE.TextGeometry(l.text,l.data);break;case "BufferGeometry":k=g.parse(l);break;case "Geometry":k=d.parse(l.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}k.uuid=l.uuid;void 0!==l.name&&(k.name=l.name);c[l.uuid]=k}return c},parseMaterials:function(b,c){var d={};if(void 0!==b){var g=new THREE.MaterialLoader;g.setTextures(c);for(var f=0,h=b.length;f<h;f++){var k=g.parse(b[f]);d[k.uuid]=k}}return d},parseImages:function(b,
c){function d(b){g.manager.itemStart(b);return k.load(b,function(){g.manager.itemEnd(b)})}var g=this,f={};if(void 0!==b&&0<b.length){var h=new THREE.LoadingManager(c),k=new THREE.ImageLoader(h);k.setCrossOrigin(this.crossOrigin);for(var h=0,l=b.length;h<l;h++){var m=b[h],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m.url)?m.url:g.texturePath+m.url;f[m.uuid]=d(p)}}return f},parseTextures:function(b,c){function d(b){if("number"===typeof b)return b;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",
b);return THREE[b]}var g={};if(void 0!==b)for(var f=0,h=b.length;f<h;f++){var k=b[f];void 0===k.image&&console.warn('THREE.ObjectLoader: No "image" specified for',k.uuid);void 0===c[k.image]&&console.warn("THREE.ObjectLoader: Undefined image",k.image);var l=new THREE.Texture(c[k.image]);l.needsUpdate=!0;l.uuid=k.uuid;void 0!==k.name&&(l.name=k.name);void 0!==k.mapping&&(l.mapping=d(k.mapping));void 0!==k.offset&&(l.offset=new THREE.Vector2(k.offset[0],k.offset[1]));void 0!==k.repeat&&(l.repeat=new THREE.Vector2(k.repeat[0],
k.repeat[1]));void 0!==k.minFilter&&(l.minFilter=d(k.minFilter));void 0!==k.magFilter&&(l.magFilter=d(k.magFilter));void 0!==k.anisotropy&&(l.anisotropy=k.anisotropy);Array.isArray(k.wrap)&&(l.wrapS=d(k.wrap[0]),l.wrapT=d(k.wrap[1]));g[k.uuid]=l}return g},parseObject:function(){var b=new THREE.Matrix4;return function(c,d,g){var f;f=function(b){void 0===d[b]&&console.warn("THREE.ObjectLoader: Undefined geometry",b);return d[b]};var h=function(b){void 0===g[b]&&console.warn("THREE.ObjectLoader: Undefined material",
b);return g[b]};switch(c.type){case "Scene":f=new THREE.Scene;break;case "PerspectiveCamera":f=new THREE.PerspectiveCamera(c.fov,c.aspect,c.near,c.far);break;case "OrthographicCamera":f=new THREE.OrthographicCamera(c.left,c.right,c.top,c.bottom,c.near,c.far);break;case "AmbientLight":f=new THREE.AmbientLight(c.color);break;case "DirectionalLight":f=new THREE.DirectionalLight(c.color,c.intensity);break;case "PointLight":f=new THREE.PointLight(c.color,c.intensity,c.distance,c.decay);break;case "SpotLight":f=
new THREE.SpotLight(c.color,c.intensity,c.distance,c.angle,c.exponent,c.decay);break;case "HemisphereLight":f=new THREE.HemisphereLight(c.color,c.groundColor,c.intensity);break;case "Mesh":f=new THREE.Mesh(f(c.geometry),h(c.material));break;case "LOD":f=new THREE.LOD;break;case "Line":f=new THREE.Line(f(c.geometry),h(c.material),c.mode);break;case "PointCloud":case "Points":f=new THREE.Points(f(c.geometry),h(c.material));break;case "Sprite":f=new THREE.Sprite(h(c.material));break;case "Group":f=new THREE.Group;
break;default:f=new THREE.Object3D}f.uuid=c.uuid;void 0!==c.name&&(f.name=c.name);void 0!==c.matrix?(b.fromArray(c.matrix),b.decompose(f.position,f.quaternion,f.scale)):(void 0!==c.position&&f.position.fromArray(c.position),void 0!==c.rotation&&f.rotation.fromArray(c.rotation),void 0!==c.scale&&f.scale.fromArray(c.scale));void 0!==c.castShadow&&(f.castShadow=c.castShadow);void 0!==c.receiveShadow&&(f.receiveShadow=c.receiveShadow);void 0!==c.visible&&(f.visible=c.visible);void 0!==c.userData&&(f.userData=
c.userData);if(void 0!==c.children)for(var k in c.children)f.add(this.parseObject(c.children[k],d,g));if("LOD"===c.type)for(c=c.levels,h=0;h<c.length;h++){var l=c[h];k=f.getObjectByProperty("uuid",l.object);void 0!==k&&f.addLevel(k,l.distance)}return f}}()};THREE.TextureLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(b,c,d,g){var f=new THREE.ImageLoader(this.manager);f.setCrossOrigin(this.crossOrigin);f.load(b,function(b){b=new THREE.Texture(b);b.needsUpdate=!0;void 0!==c&&c(b)},d,g)},setCrossOrigin:function(b){this.crossOrigin=b}};THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this._parser=null};
THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(b,c,d,g){var f=this,h=new THREE.DataTexture,k=new THREE.XHRLoader(this.manager);k.setCrossOrigin(this.crossOrigin);k.setResponseType("arraybuffer");k.load(b,function(b){if(b=f._parser(b))void 0!==b.image?h.image=b.image:void 0!==b.data&&(h.image.width=b.width,h.image.height=b.height,h.image.data=b.data),h.wrapS=void 0!==b.wrapS?b.wrapS:THREE.ClampToEdgeWrapping,h.wrapT=void 0!==b.wrapT?b.wrapT:THREE.ClampToEdgeWrapping,
h.magFilter=void 0!==b.magFilter?b.magFilter:THREE.LinearFilter,h.minFilter=void 0!==b.minFilter?b.minFilter:THREE.LinearMipMapLinearFilter,h.anisotropy=void 0!==b.anisotropy?b.anisotropy:1,void 0!==b.format&&(h.format=b.format),void 0!==b.type&&(h.type=b.type),void 0!==b.mipmaps&&(h.mipmaps=b.mipmaps),1===b.mipmapCount&&(h.minFilter=THREE.LinearFilter),h.needsUpdate=!0,c&&c(h,b)},d,g);return h},setCrossOrigin:function(b){this.crossOrigin=b}};
THREE.CompressedTextureLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager;this._parser=null};
THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(b,c,d,g){var f=this,h=[],k=new THREE.CompressedTexture;k.image=h;var l=new THREE.XHRLoader(this.manager);l.setCrossOrigin(this.crossOrigin);l.setResponseType("arraybuffer");if(Array.isArray(b))for(var m=0,p=function(n){l.load(b[n],function(b){b=f._parser(b,!0);h[n]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps};m+=1;6===m&&(1===b.mipmapCount&&(k.minFilter=THREE.LinearFilter),k.format=
b.format,k.needsUpdate=!0,c&&c(k))},d,g)},t=0,u=b.length;t<u;++t)p(t);else l.load(b,function(b){b=f._parser(b,!0);if(b.isCubemap)for(var g=b.mipmaps.length/b.mipmapCount,d=0;d<g;d++){h[d]={mipmaps:[]};for(var l=0;l<b.mipmapCount;l++)h[d].mipmaps.push(b.mipmaps[d*b.mipmapCount+l]),h[d].format=b.format,h[d].width=b.width,h[d].height=b.height}else k.image.width=b.width,k.image.height=b.height,k.mipmaps=b.mipmaps;1===b.mipmapCount&&(k.minFilter=THREE.LinearFilter);k.format=b.format;k.needsUpdate=!0;c&&
c(k)},d,g);return k},setCrossOrigin:function(b){this.crossOrigin=b}};
THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=THREE.LessEqualDepth;this.colorWrite=this.depthWrite=
this.depthTest=!0;this.precision=null;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this._needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(b){!0===b&&this.update();this._needsUpdate=b},setValues:function(b){if(void 0!==b)for(var c in b){var d=b[c];if(void 0===d)console.warn("THREE.Material: '"+c+"' parameter is undefined.");else{var g=this[c];void 0===g?console.warn("THREE."+this.type+": '"+c+"' is not a property of this material."):g instanceof THREE.Color?g.set(d):g instanceof THREE.Vector3&&d instanceof THREE.Vector3?g.copy(d):
this[c]="overdraw"===c?Number(d):d}}},toJSON:function(b){var c={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};c.uuid=this.uuid;c.type=this.type;""!==this.name&&(c.name=this.name);this.color instanceof THREE.Color&&(c.color=this.color.getHex());this.emissive instanceof THREE.Color&&(c.emissive=this.emissive.getHex());this.specular instanceof THREE.Color&&(c.specular=this.specular.getHex());void 0!==this.shininess&&(c.shininess=this.shininess);this.map instanceof THREE.Texture&&
(c.map=this.map.toJSON(b).uuid);this.alphaMap instanceof THREE.Texture&&(c.alphaMap=this.alphaMap.toJSON(b).uuid);this.lightMap instanceof THREE.Texture&&(c.lightMap=this.lightMap.toJSON(b).uuid);this.bumpMap instanceof THREE.Texture&&(c.bumpMap=this.bumpMap.toJSON(b).uuid,c.bumpScale=this.bumpScale);this.normalMap instanceof THREE.Texture&&(c.normalMap=this.normalMap.toJSON(b).uuid,c.normalScale=this.normalScale);this.displacementMap instanceof THREE.Texture&&(c.displacementMap=this.displacementMap.toJSON(b).uuid,
c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias);this.specularMap instanceof THREE.Texture&&(c.specularMap=this.specularMap.toJSON(b).uuid);this.envMap instanceof THREE.Texture&&(c.envMap=this.envMap.toJSON(b).uuid,c.reflectivity=this.reflectivity);void 0!==this.size&&(c.size=this.size);void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation);void 0!==this.vertexColors&&this.vertexColors!==THREE.NoColors&&(c.vertexColors=this.vertexColors);void 0!==
this.shading&&this.shading!==THREE.SmoothShading&&(c.shading=this.shading);void 0!==this.blending&&this.blending!==THREE.NormalBlending&&(c.blending=this.blending);void 0!==this.side&&this.side!==THREE.FrontSide&&(c.side=this.side);1>this.opacity&&(c.opacity=this.opacity);!0===this.transparent&&(c.transparent=this.transparent);0<this.alphaTest&&(c.alphaTest=this.alphaTest);!0===this.wireframe&&(c.wireframe=this.wireframe);1<this.wireframeLinewidth&&(c.wireframeLinewidth=this.wireframeLinewidth);return c},
clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.name=b.name;this.side=b.side;this.opacity=b.opacity;this.transparent=b.transparent;this.blending=b.blending;this.blendSrc=b.blendSrc;this.blendDst=b.blendDst;this.blendEquation=b.blendEquation;this.blendSrcAlpha=b.blendSrcAlpha;this.blendDstAlpha=b.blendDstAlpha;this.blendEquationAlpha=b.blendEquationAlpha;this.depthFunc=b.depthFunc;this.depthTest=b.depthTest;this.depthWrite=b.depthWrite;this.precision=b.precision;this.polygonOffset=
b.polygonOffset;this.polygonOffsetFactor=b.polygonOffsetFactor;this.polygonOffsetUnits=b.polygonOffsetUnits;this.alphaTest=b.alphaTest;this.overdraw=b.overdraw;this.visible=b.visible;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})},get wrapAround(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set wrapAround(b){console.warn("THREE."+this.type+": .wrapAround has been removed.")},get wrapRGB(){console.warn("THREE."+
this.type+": .wrapRGB has been removed.");return new THREE.Color}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(b){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(b)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;THREE.LineBasicMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.linewidth=b.linewidth;this.linecap=b.linecap;this.linejoin=b.linejoin;this.vertexColors=b.vertexColors;this.fog=b.fog;return this};
THREE.LineDashedMaterial=function(b){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(b)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;
THREE.LineDashedMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.linewidth=b.linewidth;this.scale=b.scale;this.dashSize=b.dashSize;this.gapSize=b.gapSize;this.vertexColors=b.vertexColors;this.fog=b.fog;return this};
THREE.MeshBasicMaterial=function(b){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new THREE.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=
!1;this.setValues(b)};THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;
THREE.MeshBasicMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.fog=b.fog;this.shading=b.shading;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;
this.wireframeLinejoin=b.wireframeLinejoin;this.vertexColors=b.vertexColors;this.skinning=b.skinning;this.morphTargets=b.morphTargets;return this};
THREE.MeshLambertMaterial=function(b){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.envMap=this.alphaMap=this.specularMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)};
THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;
THREE.MeshLambertMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.emissive.copy(b.emissive);this.map=b.map;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.fog=b.fog;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;
this.vertexColors=b.vertexColors;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};
THREE.MeshPhongMaterial=function(b){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=!1;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;
THREE.MeshPhongMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.emissive.copy(b.emissive);this.specular.copy(b.specular);this.shininess=b.shininess;this.metal=b.metal;this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissiveMap=b.emissiveMap;this.bumpMap=b.bumpMap;this.bumpScale=b.bumpScale;this.normalMap=b.normalMap;this.normalScale.copy(b.normalScale);
this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.fog=b.fog;this.shading=b.shading;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.vertexColors=
b.vertexColors;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};THREE.MeshDepthMaterial=function(b){THREE.Material.call(this);this.type="MeshDepthMaterial";this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(b)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;
THREE.MeshDepthMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;return this};THREE.MeshNormalMaterial=function(b){THREE.Material.call(this,b);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(b)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;
THREE.MeshNormalMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;return this};THREE.MultiMaterial=function(b){this.uuid=THREE.Math.generateUUID();this.type="MultiMaterial";this.materials=b instanceof Array?b:[];this.visible=!0};
THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(){for(var b={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},c=0,d=this.materials.length;c<d;c++)b.materials.push(this.materials[c].toJSON());b.visible=this.visible;return b},clone:function(){for(var b=new this.constructor,c=0;c<this.materials.length;c++)b.materials.push(this.materials[c].clone());b.visible=this.visible;return b}};THREE.MeshFaceMaterial=THREE.MultiMaterial;
THREE.PointsMaterial=function(b){THREE.Material.call(this);this.type="PointsMaterial";this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(b)};THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial;
THREE.PointsMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.size=b.size;this.sizeAttenuation=b.sizeAttenuation;this.vertexColors=b.vertexColors;this.fog=b.fog;return this};THREE.PointCloudMaterial=function(b){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(b)};
THREE.ParticleBasicMaterial=function(b){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(b)};THREE.ParticleSystemMaterial=function(b){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(b)};
THREE.ShaderMaterial=function(b){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.derivatives=this.morphNormals=
this.morphTargets=this.skinning=!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==b&&(void 0!==b.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(b))};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;
THREE.ShaderMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.fragmentShader=b.fragmentShader;this.vertexShader=b.vertexShader;this.uniforms=THREE.UniformsUtils.clone(b.uniforms);this.attributes=b.attributes;this.defines=b.defines;this.shading=b.shading;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.fog=b.fog;this.lights=b.lights;this.vertexColors=b.vertexColors;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=
b.morphNormals;this.derivatives=b.derivatives;return this};THREE.ShaderMaterial.prototype.toJSON=function(b){b=THREE.Material.prototype.toJSON.call(this,b);b.uniforms=this.uniforms;b.attributes=this.attributes;b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;return b};THREE.RawShaderMaterial=function(b){THREE.ShaderMaterial.call(this,b);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);
THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial;THREE.SpriteMaterial=function(b){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.setValues(b)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial;
THREE.SpriteMaterial.prototype.copy=function(b){THREE.Material.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.rotation=b.rotation;this.fog=b.fog;return this};
THREE.Texture=function(b,c,d,g,f,h,k,l,m){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==b?b:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==c?c:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==d?d:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==g?g:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==f?f:THREE.LinearFilter;this.minFilter=void 0!==h?h:THREE.LinearMipMapLinearFilter;
this.anisotropy=void 0!==m?m:1;this.format=void 0!==k?k:THREE.RGBAFormat;this.type=void 0!==l?l:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.version=0;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(b){!0===b&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.image=b.image;this.mipmaps=b.mipmaps.slice(0);this.mapping=b.mapping;this.wrapS=b.wrapS;this.wrapT=b.wrapT;this.magFilter=b.magFilter;this.minFilter=b.minFilter;this.anisotropy=b.anisotropy;this.format=b.format;this.type=b.type;this.offset.copy(b.offset);this.repeat.copy(b.repeat);this.generateMipmaps=b.generateMipmaps;this.premultiplyAlpha=
b.premultiplyAlpha;this.flipY=b.flipY;this.unpackAlignment=b.unpackAlignment;return this},toJSON:function(b){if(void 0!==b.textures[this.uuid])return b.textures[this.uuid];var c={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var d=
this.image;void 0===d.uuid&&(d.uuid=THREE.Math.generateUUID());if(void 0===b.images[d.uuid]){var g=b.images,f=d.uuid,h=d.uuid,k;void 0!==d.toDataURL?k=d:(k=document.createElement("canvas"),k.width=d.width,k.height=d.height,k.getContext("2d").drawImage(d,0,0,d.width,d.height));k=2048<k.width||2048<k.height?k.toDataURL("image/jpeg",.6):k.toDataURL("image/png");g[f]={uuid:h,url:k}}c.image=d.uuid}return b.textures[this.uuid]=c},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(b){if(this.mapping===
THREE.UVMapping){b.multiply(this.repeat);b.add(this.offset);if(0>b.x||1<b.x)switch(this.wrapS){case THREE.RepeatWrapping:b.x-=Math.floor(b.x);break;case THREE.ClampToEdgeWrapping:b.x=0>b.x?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(b.x)%2)?b.x=Math.ceil(b.x)-b.x:b.x-=Math.floor(b.x)}if(0>b.y||1<b.y)switch(this.wrapT){case THREE.RepeatWrapping:b.y-=Math.floor(b.y);break;case THREE.ClampToEdgeWrapping:b.y=0>b.y?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(b.y)%
2)?b.y=Math.ceil(b.y)-b.y:b.y-=Math.floor(b.y)}this.flipY&&(b.y=1-b.y)}}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CanvasTexture=function(b,c,d,g,f,h,k,l,m){THREE.Texture.call(this,b,c,d,g,f,h,k,l,m);this.needsUpdate=!0};THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture;
THREE.CubeTexture=function(b,c,d,g,f,h,k,l,m){c=void 0!==c?c:THREE.CubeReflectionMapping;THREE.Texture.call(this,b,c,d,g,f,h,k,l,m);this.images=b;this.flipY=!1};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;THREE.CubeTexture.prototype.copy=function(b){THREE.Texture.prototype.copy.call(this,b);this.images=b.images;return this};
THREE.CompressedTexture=function(b,c,d,g,f,h,k,l,m,p,t){THREE.Texture.call(this,null,h,k,l,m,p,g,f,t);this.image={width:c,height:d};this.mipmaps=b;this.generateMipmaps=this.flipY=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;
THREE.DataTexture=function(b,c,d,g,f,h,k,l,m,p,t){THREE.Texture.call(this,null,h,k,l,m,p,g,f,t);this.image={data:b,width:c,height:d};this.magFilter=void 0!==m?m:THREE.NearestFilter;this.minFilter=void 0!==p?p:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;
THREE.VideoTexture=function(b,c,d,g,f,h,k,l,m){THREE.Texture.call(this,b,c,d,g,f,h,k,l,m);this.generateMipmaps=!1;var p=this,t=function(){requestAnimationFrame(t);b.readyState===b.HAVE_ENOUGH_DATA&&(p.needsUpdate=!0)};t()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.create(THREE.Object3D.prototype);
THREE.Group.prototype.constructor=THREE.Group;THREE.Points=function(b,c){THREE.Object3D.call(this);this.type="Points";this.geometry=void 0!==b?b:new THREE.Geometry;this.material=void 0!==c?c:new THREE.PointsMaterial({color:16777215*Math.random()})};THREE.Points.prototype=Object.create(THREE.Object3D.prototype);THREE.Points.prototype.constructor=THREE.Points;
THREE.Points.prototype.raycast=function(){var b=new THREE.Matrix4,c=new THREE.Ray;return function(d,g){function f(b,f){var k=c.distanceSqToPoint(b);if(k<m){var l=c.closestPointToPoint(b);l.applyMatrix4(h.matrixWorld);var n=d.ray.origin.distanceTo(l);n<d.near||n>d.far||g.push({distance:n,distanceToRay:Math.sqrt(k),point:l.clone(),index:f,face:null,object:h})}}var h=this,k=h.geometry,l=d.params.Points.threshold;b.getInverse(this.matrixWorld);c.copy(d.ray).applyMatrix4(b);if(null===k.boundingBox||!1!==
c.isIntersectionBox(k.boundingBox)){var l=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=l*l,l=new THREE.Vector3;if(k instanceof THREE.BufferGeometry){var p=k.index,k=k.attributes.position.array;if(null!==p)for(var t=p.array,p=0,u=t.length;p<u;p++){var n=t[p];l.fromArray(k,3*n);f(l,n)}else for(p=0,t=k.length/3;p<t;p++)l.fromArray(k,3*p),f(l,p)}else for(l=k.vertices,p=0,t=l.length;p<t;p++)f(l[p],p)}}}();THREE.Points.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};
THREE.Points.prototype.toJSON=function(b){var c=THREE.Object3D.prototype.toJSON.call(this,b);void 0===b.geometries[this.geometry.uuid]&&(b.geometries[this.geometry.uuid]=this.geometry.toJSON());void 0===b.materials[this.material.uuid]&&(b.materials[this.material.uuid]=this.material.toJSON());c.object.geometry=this.geometry.uuid;c.object.material=this.material.uuid;return c};
THREE.PointCloud=function(b,c){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new THREE.Points(b,c)};THREE.ParticleSystem=function(b,c){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new THREE.Points(b,c)};
THREE.Line=function(b,c,d){if(1===d)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(b,c);THREE.Object3D.call(this);this.type="Line";this.geometry=void 0!==b?b:new THREE.Geometry;this.material=void 0!==c?c:new THREE.LineBasicMaterial({color:16777215*Math.random()})};THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.constructor=THREE.Line;
THREE.Line.prototype.raycast=function(){var b=new THREE.Matrix4,c=new THREE.Ray,d=new THREE.Sphere;return function(g,f){var h=g.linePrecision,h=h*h,k=this.geometry;null===k.boundingSphere&&k.computeBoundingSphere();d.copy(k.boundingSphere);d.applyMatrix4(this.matrixWorld);if(!1!==g.ray.isIntersectionSphere(d)){b.getInverse(this.matrixWorld);c.copy(g.ray).applyMatrix4(b);var l=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3,t=new THREE.Vector3,u=this instanceof THREE.LineSegments?2:1;if(k instanceof
THREE.BufferGeometry){var n=k.index,q=k.attributes;if(null!==n)for(var k=n.array,q=q.position.array,n=0,r=k.length-1;n<r;n+=u){var w=k[n+1];l.fromArray(q,3*k[n]);m.fromArray(q,3*w);w=c.distanceSqToSegment(l,m,t,p);w>h||(t.applyMatrix4(this.matrixWorld),w=g.ray.origin.distanceTo(t),w<g.near||w>g.far||f.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else for(q=q.position.array,n=0,r=q.length/3-1;n<r;n+=u)l.fromArray(q,3*n),m.fromArray(q,
3*n+3),w=c.distanceSqToSegment(l,m,t,p),w>h||(t.applyMatrix4(this.matrixWorld),w=g.ray.origin.distanceTo(t),w<g.near||w>g.far||f.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(k instanceof THREE.Geometry)for(l=k.vertices,m=l.length,n=0;n<m-1;n+=u)w=c.distanceSqToSegment(l[n],l[n+1],t,p),w>h||(t.applyMatrix4(this.matrixWorld),w=g.ray.origin.distanceTo(t),w<g.near||w>g.far||f.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),
index:n,face:null,faceIndex:null,object:this}))}}}();THREE.Line.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};
THREE.Line.prototype.toJSON=function(b){var c=THREE.Object3D.prototype.toJSON.call(this,b);void 0===b.geometries[this.geometry.uuid]&&(b.geometries[this.geometry.uuid]=this.geometry.toJSON());void 0===b.materials[this.material.uuid]&&(b.materials[this.material.uuid]=this.material.toJSON());c.object.geometry=this.geometry.uuid;c.object.material=this.material.uuid;return c};THREE.LineStrip=0;THREE.LinePieces=1;THREE.LineSegments=function(b,c){THREE.Line.call(this,b,c);this.type="LineSegments"};
THREE.LineSegments.prototype=Object.create(THREE.Line.prototype);THREE.LineSegments.prototype.constructor=THREE.LineSegments;THREE.Mesh=function(b,c){THREE.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==b?b:new THREE.Geometry;this.material=void 0!==c?c:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);THREE.Mesh.prototype.constructor=THREE.Mesh;
THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var b=0,c=this.geometry.morphTargets.length;b<c;b++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[b].name]=b}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(b){if(void 0!==this.morphTargetDictionary[b])return this.morphTargetDictionary[b];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+b+" does not exist. Returning 0.");return 0};
THREE.Mesh.prototype.raycast=function(){function b(b,c,f,h,g,d,k){THREE.Triangle.barycoordFromPoint(b,c,f,h,q);g.multiplyScalar(q.x);d.multiplyScalar(q.y);k.multiplyScalar(q.z);g.add(d).add(k);return g.clone()}var c=new THREE.Matrix4,d=new THREE.Ray,g=new THREE.Sphere,f=new THREE.Vector3,h=new THREE.Vector3,k=new THREE.Vector3,l=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3,t=new THREE.Vector2,u=new THREE.Vector2,n=new THREE.Vector2,q=new THREE.Vector3,r=new THREE.Vector3,w=new THREE.Vector3;
return function(q,y){var A=this.geometry,x=this.material;if(void 0!==x&&(null===A.boundingSphere&&A.computeBoundingSphere(),g.copy(A.boundingSphere),g.applyMatrix4(this.matrixWorld),!1!==q.ray.isIntersectionSphere(g)&&(c.getInverse(this.matrixWorld),d.copy(q.ray).applyMatrix4(c),null===A.boundingBox||!1!==d.isIntersectionBox(A.boundingBox)))){var z,C,D;if(A instanceof THREE.BufferGeometry)if(z=A.index,A=A.attributes,null!==z)for(var B=z.array,F=A.position.array,H=0,I=B.length;H<I;H+=3){z=B[H];C=B[H+
1];D=B[H+2];f.fromArray(F,3*z);h.fromArray(F,3*C);k.fromArray(F,3*D);if(x.side===THREE.BackSide){if(null===d.intersectTriangle(k,h,f,!0,r))continue}else if(null===d.intersectTriangle(f,h,k,x.side!==THREE.DoubleSide,r))continue;w.copy(r);w.applyMatrix4(this.matrixWorld);var G=q.ray.origin.distanceTo(w);if(!(G<q.near||G>q.far)){var M;void 0!==A.uv&&(M=A.uv.array,t.fromArray(M,2*z),u.fromArray(M,2*C),n.fromArray(M,2*D),M=b(r,f,h,k,t,u,n));y.push({distance:G,point:w.clone(),uv:M,face:new THREE.Face3(z,
C,D,THREE.Triangle.normal(f,h,k)),faceIndex:Math.floor(H/3),object:this})}}else for(F=A.position.array,H=0,I=F.length;H<I;H+=9){f.fromArray(F,H);h.fromArray(F,H+3);k.fromArray(F,H+6);if(x.side===THREE.BackSide){if(null===d.intersectTriangle(k,h,f,!0,r))continue}else if(null===d.intersectTriangle(f,h,k,x.side!==THREE.DoubleSide,r))continue;w.copy(r);w.applyMatrix4(this.matrixWorld);G=q.ray.origin.distanceTo(w);G<q.near||G>q.far||(void 0!==A.uv&&(M=A.uv.array,t.fromArray(M,H),u.fromArray(M,H+2),n.fromArray(M,
H+4),M=b(r,f,h,k,t,u,n)),z=H/3,C=z+1,D=z+2,y.push({distance:G,point:w.clone(),uv:M,face:new THREE.Face3(z,C,D,THREE.Triangle.normal(f,h,k)),index:z,object:this}))}else if(A instanceof THREE.Geometry)for(var B=x instanceof THREE.MeshFaceMaterial,F=!0===B?x.materials:null,H=A.vertices,I=A.faces,J=0,K=I.length;J<K;J++){var L=I[J],G=!0===B?F[L.materialIndex]:x;if(void 0!==G){z=H[L.a];C=H[L.b];D=H[L.c];if(!0===G.morphTargets){var N=A.morphTargets,Q=this.morphTargetInfluences;f.set(0,0,0);h.set(0,0,0);
k.set(0,0,0);for(var S=0,U=N.length;S<U;S++){var V=Q[S];if(0!==V){var W=N[S].vertices;f.addScaledVector(l.subVectors(W[L.a],z),V);h.addScaledVector(m.subVectors(W[L.b],C),V);k.addScaledVector(p.subVectors(W[L.c],D),V)}}f.add(z);h.add(C);k.add(D);z=f;C=h;D=k}if(G.side===THREE.BackSide){if(null===d.intersectTriangle(D,C,z,!0,r))continue}else if(null===d.intersectTriangle(z,C,D,G.side!==THREE.DoubleSide,r))continue;w.copy(r);w.applyMatrix4(this.matrixWorld);G=q.ray.origin.distanceTo(w);G<q.near||G>q.far||
(0<A.faceVertexUvs[0].length&&(M=A.faceVertexUvs[0][J],t.copy(M[0]),u.copy(M[1]),n.copy(M[2]),M=b(r,z,C,D,t,u,n)),y.push({distance:G,point:w.clone(),uv:M,face:L,faceIndex:J,object:this}))}}}}}();THREE.Mesh.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};
THREE.Mesh.prototype.toJSON=function(b){var c=THREE.Object3D.prototype.toJSON.call(this,b);void 0===b.geometries[this.geometry.uuid]&&(b.geometries[this.geometry.uuid]=this.geometry.toJSON(b));void 0===b.materials[this.material.uuid]&&(b.materials[this.material.uuid]=this.material.toJSON(b));c.object.geometry=this.geometry.uuid;c.object.material=this.material.uuid;return c};THREE.Bone=function(b){THREE.Object3D.call(this);this.type="Bone";this.skin=b};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);
THREE.Bone.prototype.constructor=THREE.Bone;THREE.Bone.prototype.copy=function(b){THREE.Object3D.prototype.copy.call(this,b);this.skin=b.skin;return this};
THREE.Skeleton=function(b,c,d){this.useVertexTexture=void 0!==d?d:!0;this.identityMatrix=new THREE.Matrix4;b=b||[];this.bones=b.slice(0);this.useVertexTexture?(b=Math.sqrt(4*this.bones.length),b=THREE.Math.nextPowerOfTwo(Math.ceil(b)),this.boneTextureHeight=this.boneTextureWidth=Math.max(b,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)):
this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===c)this.calculateInverses();else if(this.bones.length===c.length)this.boneInverses=c.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],c=0,b=this.bones.length;c<b;c++)this.boneInverses.push(new THREE.Matrix4)};
THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var b=0,c=this.bones.length;b<c;b++){var d=new THREE.Matrix4;this.bones[b]&&d.getInverse(this.bones[b].matrixWorld);this.boneInverses.push(d)}};
THREE.Skeleton.prototype.pose=function(){for(var b,c=0,d=this.bones.length;c<d;c++)(b=this.bones[c])&&b.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(d=this.bones.length;c<d;c++)if(b=this.bones[c])b.parent?(b.matrix.getInverse(b.parent.matrixWorld),b.matrix.multiply(b.matrixWorld)):b.matrix.copy(b.matrixWorld),b.matrix.decompose(b.position,b.quaternion,b.scale)};
THREE.Skeleton.prototype.update=function(){var b=new THREE.Matrix4;return function(){for(var c=0,d=this.bones.length;c<d;c++)b.multiplyMatrices(this.bones[c]?this.bones[c].matrixWorld:this.identityMatrix,this.boneInverses[c]),b.flattenToArrayOffset(this.boneMatrices,16*c);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}();THREE.Skeleton.prototype.clone=function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)};
THREE.SkinnedMesh=function(b,c,d){THREE.Mesh.call(this,b,c);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;b=[];if(this.geometry&&void 0!==this.geometry.bones){for(var g,f=0,h=this.geometry.bones.length;f<h;++f)g=this.geometry.bones[f],c=new THREE.Bone(this),b.push(c),c.name=g.name,c.position.fromArray(g.pos),c.quaternion.fromArray(g.rotq),void 0!==g.scl&&c.scale.fromArray(g.scl);f=0;for(h=this.geometry.bones.length;f<h;++f)g=
this.geometry.bones[f],-1!==g.parent?b[g.parent].add(b[f]):this.add(b[f])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(b,void 0,d),this.matrixWorld)};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh;THREE.SkinnedMesh.prototype.bind=function(b,c){this.skeleton=b;void 0===c&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),c=this.matrixWorld);this.bindMatrix.copy(c);this.bindMatrixInverse.getInverse(c)};
THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()};THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var b=0;b<this.geometry.skinIndices.length;b++){var c=this.geometry.skinWeights[b],d=1/c.lengthManhattan();Infinity!==d?c.multiplyScalar(d):c.set(1)}};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(b){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)};THREE.SkinnedMesh.prototype.clone=function(){return(new this.constructor(this.geometry,this.material,this.useVertexTexture)).copy(this)};
THREE.MorphAnimMesh=function(b,c){THREE.Mesh.call(this,b,c);this.type="MorphAnimMesh";this.duration=1E3;this.mirroredLoop=!1;this.currentKeyframe=this.lastKeyframe=this.time=0;this.direction=1;this.directionBackwards=!1;this.setFrameRange(0,b.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphAnimMesh.prototype.constructor=THREE.MorphAnimMesh;
THREE.MorphAnimMesh.prototype.setFrameRange=function(b,c){this.startKeyframe=b;this.endKeyframe=c;this.length=this.endKeyframe-this.startKeyframe+1};THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=!1};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=!0};
THREE.MorphAnimMesh.prototype.parseAnimations=function(){var b=this.geometry;b.animations||(b.animations={});for(var c,d=b.animations,g=/([a-z]+)_?(\d+)/,f=0,h=b.morphTargets.length;f<h;f++){var k=b.morphTargets[f].name.match(g);if(k&&1<k.length){k=k[1];d[k]||(d[k]={start:Infinity,end:-Infinity});var l=d[k];f<l.start&&(l.start=f);f>l.end&&(l.end=f);c||(c=k)}}b.firstAnimation=c};
THREE.MorphAnimMesh.prototype.setAnimationLabel=function(b,c,d){this.geometry.animations||(this.geometry.animations={});this.geometry.animations[b]={start:c,end:d}};THREE.MorphAnimMesh.prototype.playAnimation=function(b,c){var d=this.geometry.animations[b];d?(this.setFrameRange(d.start,d.end),this.duration=(d.end-d.start)/c*1E3,this.time=0):console.warn("THREE.MorphAnimMesh: animation["+b+"] undefined in .playAnimation()")};
THREE.MorphAnimMesh.prototype.updateAnimation=function(b){var c=this.duration/this.length;this.time+=this.direction*b;if(this.mirroredLoop){if(this.time>this.duration||0>this.time)this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)}else this.time%=this.duration,0>this.time&&(this.time+=this.duration);var d=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/c),0,this.length-1);b=this.morphTargetInfluences;
d!==this.currentKeyframe&&(b[this.lastKeyframe]=0,b[this.currentKeyframe]=1,b[d]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=d);c=this.time%c/c;this.directionBackwards&&(c=1-c);b[this.currentKeyframe]=c;b[this.lastKeyframe]=1-c};THREE.MorphAnimMesh.prototype.interpolateTargets=function(b,c,d){for(var g=this.morphTargetInfluences,f=0,h=g.length;f<h;f++)g[f]=0;-1<b&&(g[b]=1-d);-1<c&&(g[c]=d)};
THREE.MorphAnimMesh.prototype.copy=function(b){THREE.Mesh.prototype.copy.call(this,b);this.duration=b.duration;this.mirroredLoop=b.mirroredLoop;this.time=b.time;this.lastKeyframe=b.lastKeyframe;this.currentKeyframe=b.currentKeyframe;this.direction=b.direction;this.directionBackwards=b.directionBackwards;return this};
THREE.LOD=function(){THREE.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}})};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.constructor=THREE.LOD;
THREE.LOD.prototype.addLevel=function(b,c){void 0===c&&(c=0);c=Math.abs(c);for(var d=this.levels,g=0;g<d.length&&!(c<d[g].distance);g++);d.splice(g,0,{distance:c,object:b});this.add(b)};THREE.LOD.prototype.getObjectForDistance=function(b){for(var c=this.levels,d=1,g=c.length;d<g&&!(b<c[d].distance);d++);return c[d-1].object};
THREE.LOD.prototype.raycast=function(){var b=new THREE.Vector3;return function(c,d){b.setFromMatrixPosition(this.matrixWorld);var g=c.ray.origin.distanceTo(b);this.getObjectForDistance(g).raycast(c,d)}}();
THREE.LOD.prototype.update=function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(d){var g=this.levels;if(1<g.length){b.setFromMatrixPosition(d.matrixWorld);c.setFromMatrixPosition(this.matrixWorld);d=b.distanceTo(c);g[0].object.visible=!0;for(var f=1,h=g.length;f<h;f++)if(d>=g[f].distance)g[f-1].object.visible=!1,g[f].object.visible=!0;else break;for(;f<h;f++)g[f].object.visible=!1}}}();
THREE.LOD.prototype.copy=function(b){THREE.Object3D.prototype.copy.call(this,b,!1);b=b.levels;for(var c=0,d=b.length;c<d;c++){var g=b[c];this.addLevel(g.object.clone(),g.distance)}return this};THREE.LOD.prototype.toJSON=function(b){b=THREE.Object3D.prototype.toJSON.call(this,b);b.object.levels=[];for(var c=this.levels,d=0,g=c.length;d<g;d++){var f=c[d];b.object.levels.push({object:f.object.uuid,distance:f.distance})}return b};
THREE.Sprite=function(){var b=new Uint16Array([0,1,2,0,2,3]),c=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),d=new Float32Array([0,0,1,0,1,1,0,1]),g=new THREE.BufferGeometry;g.setIndex(new THREE.BufferAttribute(b,1));g.addAttribute("position",new THREE.BufferAttribute(c,3));g.addAttribute("uv",new THREE.BufferAttribute(d,2));return function(b){THREE.Object3D.call(this);this.type="Sprite";this.geometry=g;this.material=void 0!==b?b:new THREE.SpriteMaterial}}();THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);
THREE.Sprite.prototype.constructor=THREE.Sprite;THREE.Sprite.prototype.raycast=function(){var b=new THREE.Vector3;return function(c,d){b.setFromMatrixPosition(this.matrixWorld);var g=c.ray.distanceSqToPoint(b);g>this.scale.x*this.scale.y||d.push({distance:Math.sqrt(g),point:this.position,face:null,object:this})}}();THREE.Sprite.prototype.clone=function(){return(new this.constructor(this.material)).copy(this)};
THREE.Sprite.prototype.toJSON=function(b){var c=THREE.Object3D.prototype.toJSON.call(this,b);void 0===b.materials[this.material.uuid]&&(b.materials[this.material.uuid]=this.material.toJSON());c.object.material=this.material.uuid;return c};THREE.Particle=THREE.Sprite;THREE.LensFlare=function(b,c,d,g,f){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==b&&this.add(b,c,d,g,f)};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);
THREE.LensFlare.prototype.constructor=THREE.LensFlare;THREE.LensFlare.prototype.add=function(b,c,d,g,f,h){void 0===c&&(c=-1);void 0===d&&(d=0);void 0===h&&(h=1);void 0===f&&(f=new THREE.Color(16777215));void 0===g&&(g=THREE.NormalBlending);d=Math.min(d,Math.max(0,d));this.lensFlares.push({texture:b,size:c,distance:d,x:0,y:0,z:0,scale:1,rotation:0,opacity:h,color:f,blending:g})};
THREE.LensFlare.prototype.updateLensFlares=function(){var b,c=this.lensFlares.length,d,g=2*-this.positionScreen.x,f=2*-this.positionScreen.y;for(b=0;b<c;b++)d=this.lensFlares[b],d.x=this.positionScreen.x+g*d.distance,d.y=this.positionScreen.y+f*d.distance,d.wantedRotation=d.x*Math.PI*.25,d.rotation+=.25*(d.wantedRotation-d.rotation)};
THREE.LensFlare.prototype.copy=function(b){THREE.Object3D.prototype.copy.call(this,b);this.positionScreen.copy(b.positionScreen);this.customUpdateCallback=b.customUpdateCallback;for(var c=0,d=b.lensFlares.length;c<d;c++)this.lensFlares.push(b.lensFlares[c]);return this};THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;
THREE.Scene.prototype.copy=function(b){THREE.Object3D.prototype.copy.call(this,b);null!==b.fog&&(this.fog=b.fog.clone());null!==b.overrideMaterial&&(this.overrideMaterial=b.overrideMaterial.clone());this.autoUpdate=b.autoUpdate;this.matrixAutoUpdate=b.matrixAutoUpdate;return this};THREE.Fog=function(b,c,d){this.name="";this.color=new THREE.Color(b);this.near=void 0!==c?c:1;this.far=void 0!==d?d:1E3};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};
THREE.FogExp2=function(b,c){this.name="";this.color=new THREE.Color(b);this.density=void 0!==c?c:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n";
THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n";THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif";THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n";THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n";THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif";THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n\tif ( decayExponent > 0.0 ) {\n\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\t// geometry term is (n\u22c5l)(n\u22c5v) / 4(n\u22c5l)(n\u22c5v)\n\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\t// factor of 1/PI in distribution term omitted\n\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\t//float dotNL = saturate( dot( normal, lightDir ) );\n\t//float dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n\t#ifdef GAMMA_INPUT\n\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n";
THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n";THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n";THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n";
THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n\ttotalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n";THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n";
THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif";THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif";
THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n";
THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\t// attenuation\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\t\t\t// attenuation\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack += ambientLightColor;\n\n#endif\n";
THREE.ShaderChunk.lights_phong_fragment="#ifndef FLAT_SHADED\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n\t#endif\n\n#else\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lightPosition = pointLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\t// attenuation\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\t// diffuse\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\t\t// specular\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\t\t\t// attenuation\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\t\t\t// diffuse\n\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\t\t\t// specular\n\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\t\t// diffuse\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\n\n\t\t// specular\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\ttotalDiffuseLight += lightColor;\n\n\t\t// specular (sky term only)\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * max( dotProduct, 0.0 );\n\n\t}\n\n#endif\n\n#ifdef METAL\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\n\n#else\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n";THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n";THREE.ShaderChunk.linear_to_gamma_fragment="\n\toutgoingLight = linearToOutput( outgoingLight );\n";THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";
THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif";THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif\n";THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n";
THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n";
THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n";THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n\t\t#endif\n\n\t}\n\n\toutgoingLight = outgoingLight * shadowColor;\n\n#endif\n";
THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif";
THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif";THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif";THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif";
THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif";THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif";THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif";
THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif";THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif";THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\n#endif";
THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n";THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n\t#endif\n\n#endif\n";
THREE.UniformsUtils={merge:function(b){for(var c={},d=0;d<b.length;d++){var g=this.clone(b[d]),f;for(f in g)c[f]=g[f]}return c},clone:function(b){var c={},d;for(d in b){c[d]={};for(var g in b[d]){var f=b[d][g];f instanceof THREE.Color||f instanceof THREE.Vector2||f instanceof THREE.Vector3||f instanceof THREE.Vector4||f instanceof THREE.Matrix3||f instanceof THREE.Matrix4||f instanceof THREE.Texture?c[d][g]=f.clone():Array.isArray(f)?c[d][g]=f.slice():c[d][g]=f}}return c}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",
value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},
lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},
spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},points:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},
fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,
"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,
THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.aomap_fragment,"\toutgoingLight = diffuseColor.rgb * totalAmbientLight;",
THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",
THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,
THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",
THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );",
THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\n\t\telse\n\t\t\toutgoingLight += diffuseColor.rgb * vLightBack + emissive;\n\t#else\n\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\n\t#endif",THREE.ShaderChunk.envmap_fragment,
THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",
value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.displacementmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,
THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif",THREE.ShaderChunk.begin_vertex,
THREE.ShaderChunk.displacementmap_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = - mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;",
THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.emissivemap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,
THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = ambientLightColor;\n\tvec3 totalEmissiveLight = emissive;",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,
THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.aomap_fragment,THREE.ShaderChunk.emissivemap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",
THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,
THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,
THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",
THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.common,
THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},
depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,
"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,
"void main() {\n\tvNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",
value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,
"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,
"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,
"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")}};
THREE.WebGLRenderer=function(b){function c(b,c,f,h){!0===V&&(b*=h,c*=h,f*=h);O.clearColor(b,c,f,h)}function d(){ha.init();O.viewport(Pa,Ia,Za,La);c(X.r,X.g,X.b,ea)}function g(){oa=ga=null;ta="";Ca=-1;Wa=!0;ha.reset()}function f(b){b.preventDefault();g();d();Da.clear()}function h(b){b=b.target;b.removeEventListener("dispose",h);a:{var c=Da.get(b);if(b.image&&c.__image__webglTextureCube)O.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;O.deleteTexture(c.__webglTexture)}Da["delete"](b)}Va.textures--}
function k(b){b=b.target;b.removeEventListener("dispose",k);var c=Da.get(b);if(b&&void 0!==c.__webglTexture){O.deleteTexture(c.__webglTexture);if(b instanceof THREE.WebGLRenderTargetCube)for(var f=0;6>f;f++)O.deleteFramebuffer(c.__webglFramebuffer[f]),O.deleteRenderbuffer(c.__webglRenderbuffer[f]);else O.deleteFramebuffer(c.__webglFramebuffer),O.deleteRenderbuffer(c.__webglRenderbuffer);Da["delete"](b)}Va.textures--}function l(b){b=b.target;b.removeEventListener("dispose",l);m(b);Da["delete"](b)}
function m(b){var c=Da.get(b).program;b.program=void 0;void 0!==c&&cb.releaseProgram(c)}function p(b,c){return c[0]-b[0]}function t(b,c){return b.object.renderOrder!==c.object.renderOrder?b.object.renderOrder-c.object.renderOrder:b.material.id!==c.material.id?b.material.id-c.material.id:b.z!==c.z?b.z-c.z:b.id-c.id}function u(b,c){return b.object.renderOrder!==c.object.renderOrder?b.object.renderOrder-c.object.renderOrder:b.z!==c.z?c.z-b.z:b.id-c.id}function n(b,c,f,h,g){var d;f.transparent?(h=Z,d=
++ca):(h=R,d=++Y);d=h[d];void 0!==d?(d.id=b.id,d.object=b,d.geometry=c,d.material=f,d.z=Ea.z,d.group=g):(d={id:b.id,object:b,geometry:c,material:f,z:Ea.z,group:g},h.push(d))}function q(b){if(!1!==b.visible){if(b instanceof THREE.Light)da.push(b);else if(b instanceof THREE.Sprite)wa.push(b);else if(b instanceof THREE.LensFlare)sa.push(b);else if(b instanceof THREE.ImmediateRenderObject){var c,f;b.material.transparent?(c=ra,f=++pa):(c=ba,f=++aa);f<c.length?c[f]=b:c.push(b)}else if(b instanceof THREE.Mesh||
b instanceof THREE.Line||b instanceof THREE.Points)if(b instanceof THREE.SkinnedMesh&&b.skeleton.update(),!1===b.frustumCulled||!0===kb.intersectsObject(b)){var h=b.material;if(!0===h.visible)if(!0===qa.sortObjects&&(Ea.setFromMatrixPosition(b.matrixWorld),Ea.applyProjection(eb)),c=Sa.update(b),h instanceof THREE.MeshFaceMaterial){f=c.groups;for(var g=h.materials,h=0,d=f.length;h<d;h++){var k=f[h],l=g[k.materialIndex];!0===l.visible&&n(b,c,l,Ea.z,k)}}else n(b,c,h,Ea.z)}b=b.children;h=0;for(d=b.length;h<
d;h++)q(b[h])}}function r(b,c,f,h,g){for(var d=0,k=b.length;d<k;d++){var l=b[d],m=l.object,n=l.geometry,r=void 0===g?l.material:g,l=l.group;m.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,m.matrixWorld);m.normalMatrix.getNormalMatrix(m.modelViewMatrix);qa.renderBufferDirect(c,f,h,n,r,m,l)}}function w(b,c,f,h,g){for(var d=g,k=0,l=b.length;k<l;k++){var m=b[k];m.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,m.matrixWorld);m.normalMatrix.getNormalMatrix(m.modelViewMatrix);void 0===g&&
(d=m.material);v(d);var n=y(c,f,h,d,m);ta="";m.render(function(b){qa.renderBufferImmediate(b,n,d)})}}function v(b){b.side!==THREE.DoubleSide?ha.enable(O.CULL_FACE):ha.disable(O.CULL_FACE);ha.setFlipSided(b.side===THREE.BackSide);!0===b.transparent?ha.setBlending(b.blending,b.blendEquation,b.blendSrc,b.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha):ha.setBlending(THREE.NoBlending);ha.setDepthFunc(b.depthFunc);ha.setDepthTest(b.depthTest);ha.setDepthWrite(b.depthWrite);ha.setColorWrite(b.colorWrite);
ha.setPolygonOffset(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits)}function y(b,c,f,g,d){ya=0;var k=Da.get(g);if(g.needsUpdate||!k.program){a:{var n=Da.get(g),r=cb.getParameters(g,c,f,d),q=cb.getProgramCode(g,r),p=n.program,u=!0;if(void 0===p)g.addEventListener("dispose",l);else if(p.code!==q)m(g);else if(void 0!==r.shaderID)break a;else u=!1;if(u){if(r.shaderID){var v=THREE.ShaderLib[r.shaderID];n.__webglShader={name:g.type,uniforms:THREE.UniformsUtils.clone(v.uniforms),vertexShader:v.vertexShader,
fragmentShader:v.fragmentShader}}else n.__webglShader={name:g.type,uniforms:g.uniforms,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader};g.__webglShader=n.__webglShader;p=cb.acquireProgram(g,r,q);n.program=p;g.program=p}var w=p.getAttributes();if(g.morphTargets)for(var t=g.numSupportedMorphTargets=0;t<qa.maxMorphTargets;t++)0<=w["morphTarget"+t]&&g.numSupportedMorphTargets++;if(g.morphNormals)for(t=g.numSupportedMorphNormals=0;t<qa.maxMorphNormals;t++)0<=w["morphNormal"+t]&&g.numSupportedMorphNormals++;
n.uniformsList=[];var y=n.program.getUniforms(),B;for(B in n.__webglShader.uniforms){var F=y[B];F&&n.uniformsList.push([n.__webglShader.uniforms[B],F])}}g.needsUpdate=!1}var L=!1,H=!1,Q=!1,N=k.program,E=N.getUniforms(),J=k.__webglShader.uniforms;N.id!==ga&&(O.useProgram(N.program),ga=N.id,Q=H=L=!0);g.id!==Ca&&(-1===Ca&&(Q=!0),Ca=g.id,H=!0);if(L||b!==oa)O.uniformMatrix4fv(E.projectionMatrix,!1,b.projectionMatrix.elements),jb.logarithmicDepthBuffer&&O.uniform1f(E.logDepthBufFC,2/(Math.log(b.far+1)/
Math.LN2)),b!==oa&&(oa=b),(g instanceof THREE.ShaderMaterial||g instanceof THREE.MeshPhongMaterial||g.envMap)&&void 0!==E.cameraPosition&&(Ea.setFromMatrixPosition(b.matrixWorld),O.uniform3f(E.cameraPosition,Ea.x,Ea.y,Ea.z)),(g instanceof THREE.MeshPhongMaterial||g instanceof THREE.MeshLambertMaterial||g instanceof THREE.MeshBasicMaterial||g instanceof THREE.ShaderMaterial||g.skinning)&&void 0!==E.viewMatrix&&O.uniformMatrix4fv(E.viewMatrix,!1,b.matrixWorldInverse.elements);if(g.skinning)if(d.bindMatrix&&
void 0!==E.bindMatrix&&O.uniformMatrix4fv(E.bindMatrix,!1,d.bindMatrix.elements),d.bindMatrixInverse&&void 0!==E.bindMatrixInverse&&O.uniformMatrix4fv(E.bindMatrixInverse,!1,d.bindMatrixInverse.elements),jb.floatVertexTextures&&d.skeleton&&d.skeleton.useVertexTexture){if(void 0!==E.boneTexture){var M=x();O.uniform1i(E.boneTexture,M);qa.setTexture(d.skeleton.boneTexture,M)}void 0!==E.boneTextureWidth&&O.uniform1i(E.boneTextureWidth,d.skeleton.boneTextureWidth);void 0!==E.boneTextureHeight&&O.uniform1i(E.boneTextureHeight,
d.skeleton.boneTextureHeight)}else d.skeleton&&d.skeleton.boneMatrices&&void 0!==E.boneGlobalMatrices&&O.uniformMatrix4fv(E.boneGlobalMatrices,!1,d.skeleton.boneMatrices);if(H){f&&g.fog&&(J.fogColor.value=f.color,f instanceof THREE.Fog?(J.fogNear.value=f.near,J.fogFar.value=f.far):f instanceof THREE.FogExp2&&(J.fogDensity.value=f.density));if(g instanceof THREE.MeshPhongMaterial||g instanceof THREE.MeshLambertMaterial||g.lights){if(Wa){var Q=!0,K,U,S,W=0,V=0,R=0,X,aa,Y,ea,ba,da=wb,Z=b.matrixWorldInverse,
ra=da.directional.colors,ca=da.directional.positions,pa=da.point.colors,Ba=da.point.positions,ja=da.point.distances,wa=da.point.decays,sa=da.spot.colors,ka=da.spot.positions,ta=da.spot.distances,Ha=da.spot.directions,La=da.spot.anglesCos,Na=da.spot.exponents,Pa=da.spot.decays,Ia=da.hemi.skyColors,Ya=da.hemi.groundColors,Za=da.hemi.positions,Sa=0,Oa=0,nb=0,$a=0,eb=0,gb=0,kb=0,xb=0,rc=0,ac=0,Eb=0,Qb=0;K=0;for(U=c.length;K<U;K++)S=c[K],S.onlyShadow||(X=S.color,ea=S.intensity,ba=S.distance,S instanceof
THREE.AmbientLight?S.visible&&(W+=X.r,V+=X.g,R+=X.b):S instanceof THREE.DirectionalLight?(eb+=1,S.visible&&(Ma.setFromMatrixPosition(S.matrixWorld),Ea.setFromMatrixPosition(S.target.matrixWorld),Ma.sub(Ea),Ma.transformDirection(Z),rc=3*Sa,ca[rc+0]=Ma.x,ca[rc+1]=Ma.y,ca[rc+2]=Ma.z,z(ra,rc,X,ea),Sa+=1)):S instanceof THREE.PointLight?(gb+=1,S.visible&&(ac=3*Oa,z(pa,ac,X,ea),Ea.setFromMatrixPosition(S.matrixWorld),Ea.applyMatrix4(Z),Ba[ac+0]=Ea.x,Ba[ac+1]=Ea.y,Ba[ac+2]=Ea.z,ja[Oa]=ba,wa[Oa]=0===S.distance?
0:S.decay,Oa+=1)):S instanceof THREE.SpotLight?(kb+=1,S.visible&&(Eb=3*nb,z(sa,Eb,X,ea),Ma.setFromMatrixPosition(S.matrixWorld),Ea.copy(Ma).applyMatrix4(Z),ka[Eb+0]=Ea.x,ka[Eb+1]=Ea.y,ka[Eb+2]=Ea.z,ta[nb]=ba,Ea.setFromMatrixPosition(S.target.matrixWorld),Ma.sub(Ea),Ma.transformDirection(Z),Ha[Eb+0]=Ma.x,Ha[Eb+1]=Ma.y,Ha[Eb+2]=Ma.z,La[nb]=Math.cos(S.angle),Na[nb]=S.exponent,Pa[nb]=0===S.distance?0:S.decay,nb+=1)):S instanceof THREE.HemisphereLight&&(xb+=1,S.visible&&(Ma.setFromMatrixPosition(S.matrixWorld),
Ma.transformDirection(Z),Qb=3*$a,Za[Qb+0]=Ma.x,Za[Qb+1]=Ma.y,Za[Qb+2]=Ma.z,aa=S.color,Y=S.groundColor,z(Ia,Qb,aa,ea),z(Ya,Qb,Y,ea),$a+=1)));K=3*Sa;for(U=Math.max(ra.length,3*eb);K<U;K++)ra[K]=0;K=3*Oa;for(U=Math.max(pa.length,3*gb);K<U;K++)pa[K]=0;K=3*nb;for(U=Math.max(sa.length,3*kb);K<U;K++)sa[K]=0;K=3*$a;for(U=Math.max(Ia.length,3*xb);K<U;K++)Ia[K]=0;K=3*$a;for(U=Math.max(Ya.length,3*xb);K<U;K++)Ya[K]=0;da.directional.length=Sa;da.point.length=Oa;da.spot.length=nb;da.hemi.length=$a;da.ambient[0]=
W;da.ambient[1]=V;da.ambient[2]=R;Wa=!1}if(Q){var Ra=wb;J.ambientLightColor.value=Ra.ambient;J.directionalLightColor.value=Ra.directional.colors;J.directionalLightDirection.value=Ra.directional.positions;J.pointLightColor.value=Ra.point.colors;J.pointLightPosition.value=Ra.point.positions;J.pointLightDistance.value=Ra.point.distances;J.pointLightDecay.value=Ra.point.decays;J.spotLightColor.value=Ra.spot.colors;J.spotLightPosition.value=Ra.spot.positions;J.spotLightDistance.value=Ra.spot.distances;
J.spotLightDirection.value=Ra.spot.directions;J.spotLightAngleCos.value=Ra.spot.anglesCos;J.spotLightExponent.value=Ra.spot.exponents;J.spotLightDecay.value=Ra.spot.decays;J.hemisphereLightSkyColor.value=Ra.hemi.skyColors;J.hemisphereLightGroundColor.value=Ra.hemi.groundColors;J.hemisphereLightDirection.value=Ra.hemi.positions;A(J,!0)}else A(J,!1)}if(g instanceof THREE.MeshBasicMaterial||g instanceof THREE.MeshLambertMaterial||g instanceof THREE.MeshPhongMaterial){J.opacity.value=g.opacity;J.diffuse.value=
g.color;g.emissive&&(J.emissive.value=g.emissive);J.map.value=g.map;J.specularMap.value=g.specularMap;J.alphaMap.value=g.alphaMap;g.aoMap&&(J.aoMap.value=g.aoMap,J.aoMapIntensity.value=g.aoMapIntensity);var Xa;g.map?Xa=g.map:g.specularMap?Xa=g.specularMap:g.displacementMap?Xa=g.displacementMap:g.normalMap?Xa=g.normalMap:g.bumpMap?Xa=g.bumpMap:g.alphaMap?Xa=g.alphaMap:g.emissiveMap&&(Xa=g.emissiveMap);if(void 0!==Xa){var bc=Xa.offset,$c=Xa.repeat;J.offsetRepeat.value.set(bc.x,bc.y,$c.x,$c.y)}J.envMap.value=
g.envMap;J.flipEnvMap.value=g.envMap instanceof THREE.WebGLRenderTargetCube?1:-1;J.reflectivity.value=g.reflectivity;J.refractionRatio.value=g.refractionRatio}if(g instanceof THREE.LineBasicMaterial)J.diffuse.value=g.color,J.opacity.value=g.opacity;else if(g instanceof THREE.LineDashedMaterial)J.diffuse.value=g.color,J.opacity.value=g.opacity,J.dashSize.value=g.dashSize,J.totalSize.value=g.dashSize+g.gapSize,J.scale.value=g.scale;else if(g instanceof THREE.PointsMaterial){if(J.psColor.value=g.color,
J.opacity.value=g.opacity,J.size.value=g.size,J.scale.value=G.height/2,J.map.value=g.map,null!==g.map){var cc=g.map.offset,bd=g.map.repeat;J.offsetRepeat.value.set(cc.x,cc.y,bd.x,bd.y)}}else g instanceof THREE.MeshPhongMaterial?(J.specular.value=g.specular,J.shininess.value=g.shininess,g.lightMap&&(J.lightMap.value=g.lightMap,J.lightMapIntensity.value=g.lightMapIntensity),g.emissiveMap&&(J.emissiveMap.value=g.emissiveMap),g.bumpMap&&(J.bumpMap.value=g.bumpMap,J.bumpScale.value=g.bumpScale),g.normalMap&&
(J.normalMap.value=g.normalMap,J.normalScale.value.copy(g.normalScale)),g.displacementMap&&(J.displacementMap.value=g.displacementMap,J.displacementScale.value=g.displacementScale,J.displacementBias.value=g.displacementBias)):g instanceof THREE.MeshDepthMaterial?(J.mNear.value=b.near,J.mFar.value=b.far,J.opacity.value=g.opacity):g instanceof THREE.MeshNormalMaterial&&(J.opacity.value=g.opacity);if(d.receiveShadow&&!g._shadowPass&&J.shadowMatrix)for(var Jb=0,Jc=0,Gd=c.length;Jc<Gd;Jc++){var ub=c[Jc];
ub.castShadow&&(ub instanceof THREE.SpotLight||ub instanceof THREE.DirectionalLight)&&(J.shadowMap.value[Jb]=ub.shadowMap,J.shadowMapSize.value[Jb]=ub.shadowMapSize,J.shadowMatrix.value[Jb]=ub.shadowMatrix,J.shadowDarkness.value[Jb]=ub.shadowDarkness,J.shadowBias.value[Jb]=ub.shadowBias,Jb++)}for(var tc=k.uniformsList,hb,Ib,uc=0,hd=tc.length;uc<hd;uc++){var va=tc[uc][0];if(!1!==va.needsUpdate){var Hd=va.type,ia=va.value,za=tc[uc][1];switch(Hd){case "1i":O.uniform1i(za,ia);break;case "1f":O.uniform1f(za,
ia);break;case "2f":O.uniform2f(za,ia[0],ia[1]);break;case "3f":O.uniform3f(za,ia[0],ia[1],ia[2]);break;case "4f":O.uniform4f(za,ia[0],ia[1],ia[2],ia[3]);break;case "1iv":O.uniform1iv(za,ia);break;case "3iv":O.uniform3iv(za,ia);break;case "1fv":O.uniform1fv(za,ia);break;case "2fv":O.uniform2fv(za,ia);break;case "3fv":O.uniform3fv(za,ia);break;case "4fv":O.uniform4fv(za,ia);break;case "Matrix3fv":O.uniformMatrix3fv(za,!1,ia);break;case "Matrix4fv":O.uniformMatrix4fv(za,!1,ia);break;case "i":O.uniform1i(za,
ia);break;case "f":O.uniform1f(za,ia);break;case "v2":O.uniform2f(za,ia.x,ia.y);break;case "v3":O.uniform3f(za,ia.x,ia.y,ia.z);break;case "v4":O.uniform4f(za,ia.x,ia.y,ia.z,ia.w);break;case "c":O.uniform3f(za,ia.r,ia.g,ia.b);break;case "iv1":O.uniform1iv(za,ia);break;case "iv":O.uniform3iv(za,ia);break;case "fv1":O.uniform1fv(za,ia);break;case "fv":O.uniform3fv(za,ia);break;case "v2v":void 0===va._array&&(va._array=new Float32Array(2*ia.length));for(var xa=0,Tb=0,db=ia.length;xa<db;xa++,Tb+=2)va._array[Tb+
0]=ia[xa].x,va._array[Tb+1]=ia[xa].y;O.uniform2fv(za,va._array);break;case "v3v":void 0===va._array&&(va._array=new Float32Array(3*ia.length));for(var Sb=xa=0,db=ia.length;xa<db;xa++,Sb+=3)va._array[Sb+0]=ia[xa].x,va._array[Sb+1]=ia[xa].y,va._array[Sb+2]=ia[xa].z;O.uniform3fv(za,va._array);break;case "v4v":void 0===va._array&&(va._array=new Float32Array(4*ia.length));for(var mb=xa=0,db=ia.length;xa<db;xa++,mb+=4)va._array[mb+0]=ia[xa].x,va._array[mb+1]=ia[xa].y,va._array[mb+2]=ia[xa].z,va._array[mb+
3]=ia[xa].w;O.uniform4fv(za,va._array);break;case "m3":O.uniformMatrix3fv(za,!1,ia.elements);break;case "m3v":void 0===va._array&&(va._array=new Float32Array(9*ia.length));xa=0;for(db=ia.length;xa<db;xa++)ia[xa].flattenToArrayOffset(va._array,9*xa);O.uniformMatrix3fv(za,!1,va._array);break;case "m4":O.uniformMatrix4fv(za,!1,ia.elements);break;case "m4v":void 0===va._array&&(va._array=new Float32Array(16*ia.length));xa=0;for(db=ia.length;xa<db;xa++)ia[xa].flattenToArrayOffset(va._array,16*xa);O.uniformMatrix4fv(za,
!1,va._array);break;case "t":hb=ia;Ib=x();O.uniform1i(za,Ib);if(!hb)continue;if(hb instanceof THREE.CubeTexture||Array.isArray(hb.image)&&6===hb.image.length){var Fa=hb,fd=Ib,ec=Da.get(Fa);if(6===Fa.image.length)if(0<Fa.version&&ec.__version!==Fa.version){ec.__image__webglTextureCube||(Fa.addEventListener("dispose",h),ec.__image__webglTextureCube=O.createTexture(),Va.textures++);ha.activeTexture(O.TEXTURE0+fd);ha.bindTexture(O.TEXTURE_CUBE_MAP,ec.__image__webglTextureCube);O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,
Fa.flipY);for(var Lc=Fa instanceof THREE.CompressedTexture,sc=Fa.image[0]instanceof THREE.DataTexture,Hb=[],Ua=0;6>Ua;Ua++)Hb[Ua]=!qa.autoScaleCubemaps||Lc||sc?sc?Fa.image[Ua].image:Fa.image[Ua]:D(Fa.image[Ua],jb.maxCubemapSize);var gd=Hb[0],Ic=THREE.Math.isPowerOfTwo(gd.width)&&THREE.Math.isPowerOfTwo(gd.height),vb=I(Fa.format),Mc=I(Fa.type);C(O.TEXTURE_CUBE_MAP,Fa,Ic);for(Ua=0;6>Ua;Ua++)if(Lc)for(var Gb,Id=Hb[Ua].mipmaps,qb=0,fc=Id.length;qb<fc;qb++)Gb=Id[qb],Fa.format!==THREE.RGBAFormat&&Fa.format!==
THREE.RGBFormat?-1<ha.getCompressedTextureFormats().indexOf(vb)?ha.compressedTexImage2D(O.TEXTURE_CUBE_MAP_POSITIVE_X+Ua,qb,vb,Gb.width,Gb.height,0,Gb.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):ha.texImage2D(O.TEXTURE_CUBE_MAP_POSITIVE_X+Ua,qb,vb,Gb.width,Gb.height,0,vb,Mc,Gb.data);else sc?ha.texImage2D(O.TEXTURE_CUBE_MAP_POSITIVE_X+Ua,0,vb,Hb[Ua].width,Hb[Ua].height,0,vb,Mc,Hb[Ua].data):ha.texImage2D(O.TEXTURE_CUBE_MAP_POSITIVE_X+
Ua,0,vb,vb,Mc,Hb[Ua]);Fa.generateMipmaps&&Ic&&O.generateMipmap(O.TEXTURE_CUBE_MAP);ec.__version=Fa.version;if(Fa.onUpdate)Fa.onUpdate(Fa)}else ha.activeTexture(O.TEXTURE0+fd),ha.bindTexture(O.TEXTURE_CUBE_MAP,ec.__image__webglTextureCube)}else if(hb instanceof THREE.WebGLRenderTargetCube){var Be=hb;ha.activeTexture(O.TEXTURE0+Ib);ha.bindTexture(O.TEXTURE_CUBE_MAP,Da.get(Be).__webglTexture)}else qa.setTexture(hb,Ib);break;case "tv":void 0===va._array&&(va._array=[]);xa=0;for(db=va.value.length;xa<
db;xa++)va._array[xa]=x();O.uniform1iv(za,va._array);xa=0;for(db=va.value.length;xa<db;xa++)hb=va.value[xa],Ib=va._array[xa],hb&&qa.setTexture(hb,Ib);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+Hd)}}}}O.uniformMatrix4fv(E.modelViewMatrix,!1,d.modelViewMatrix.elements);E.normalMatrix&&O.uniformMatrix3fv(E.normalMatrix,!1,d.normalMatrix.elements);void 0!==E.modelMatrix&&O.uniformMatrix4fv(E.modelMatrix,!1,d.matrixWorld.elements);return N}function A(b,c){b.ambientLightColor.needsUpdate=
c;b.directionalLightColor.needsUpdate=c;b.directionalLightDirection.needsUpdate=c;b.pointLightColor.needsUpdate=c;b.pointLightPosition.needsUpdate=c;b.pointLightDistance.needsUpdate=c;b.pointLightDecay.needsUpdate=c;b.spotLightColor.needsUpdate=c;b.spotLightPosition.needsUpdate=c;b.spotLightDistance.needsUpdate=c;b.spotLightDirection.needsUpdate=c;b.spotLightAngleCos.needsUpdate=c;b.spotLightExponent.needsUpdate=c;b.spotLightDecay.needsUpdate=c;b.hemisphereLightSkyColor.needsUpdate=c;b.hemisphereLightGroundColor.needsUpdate=
c;b.hemisphereLightDirection.needsUpdate=c}function x(){var b=ya;b>=jb.maxTextures&&console.warn("WebGLRenderer: trying to use "+b+" texture units while this GPU supports only "+jb.maxTextures);ya+=1;return b}function z(b,c,f,h){b[c+0]=f.r*h;b[c+1]=f.g*h;b[c+2]=f.b*h}function C(b,c,f){f?(O.texParameteri(b,O.TEXTURE_WRAP_S,I(c.wrapS)),O.texParameteri(b,O.TEXTURE_WRAP_T,I(c.wrapT)),O.texParameteri(b,O.TEXTURE_MAG_FILTER,I(c.magFilter)),O.texParameteri(b,O.TEXTURE_MIN_FILTER,I(c.minFilter))):(O.texParameteri(b,
O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(b,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE),c.wrapS===THREE.ClampToEdgeWrapping&&c.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( "+c.sourceFile+" )"),O.texParameteri(b,O.TEXTURE_MAG_FILTER,H(c.magFilter)),O.texParameteri(b,O.TEXTURE_MIN_FILTER,H(c.minFilter)),c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter&&
console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( "+c.sourceFile+" )"));!(f=ja.get("EXT_texture_filter_anisotropic"))||c.type===THREE.FloatType&&null===ja.get("OES_texture_float_linear")||c.type===THREE.HalfFloatType&&null===ja.get("OES_texture_half_float_linear")||!(1<c.anisotropy||Da.get(c).__currentAnisotropy)||(O.texParameterf(b,f.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(c.anisotropy,qa.getMaxAnisotropy())),
Da.get(c).__currentAnisotropy=c.anisotropy)}function D(b,c){if(b.width>c||b.height>c){var f=c/Math.max(b.width,b.height),h=document.createElement("canvas");h.width=Math.floor(b.width*f);h.height=Math.floor(b.height*f);h.getContext("2d").drawImage(b,0,0,b.width,b.height,0,0,h.width,h.height);console.warn("THREE.WebGLRenderer: image is too big ("+b.width+"x"+b.height+"). Resized to "+h.width+"x"+h.height,b);return h}return b}function B(b,c,f){O.bindFramebuffer(O.FRAMEBUFFER,b);O.framebufferTexture2D(O.FRAMEBUFFER,
O.COLOR_ATTACHMENT0,f,Da.get(c).__webglTexture,0)}function F(b,c){O.bindRenderbuffer(O.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_COMPONENT16,c.width,c.height),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_ATTACHMENT,O.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_STENCIL,c.width,c.height),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,b)):O.renderbufferStorage(O.RENDERBUFFER,
O.RGBA4,c.width,c.height)}function H(b){return b===THREE.NearestFilter||b===THREE.NearestMipMapNearestFilter||b===THREE.NearestMipMapLinearFilter?O.NEAREST:O.LINEAR}function I(b){var c;if(b===THREE.RepeatWrapping)return O.REPEAT;if(b===THREE.ClampToEdgeWrapping)return O.CLAMP_TO_EDGE;if(b===THREE.MirroredRepeatWrapping)return O.MIRRORED_REPEAT;if(b===THREE.NearestFilter)return O.NEAREST;if(b===THREE.NearestMipMapNearestFilter)return O.NEAREST_MIPMAP_NEAREST;if(b===THREE.NearestMipMapLinearFilter)return O.NEAREST_MIPMAP_LINEAR;
if(b===THREE.LinearFilter)return O.LINEAR;if(b===THREE.LinearMipMapNearestFilter)return O.LINEAR_MIPMAP_NEAREST;if(b===THREE.LinearMipMapLinearFilter)return O.LINEAR_MIPMAP_LINEAR;if(b===THREE.UnsignedByteType)return O.UNSIGNED_BYTE;if(b===THREE.UnsignedShort4444Type)return O.UNSIGNED_SHORT_4_4_4_4;if(b===THREE.UnsignedShort5551Type)return O.UNSIGNED_SHORT_5_5_5_1;if(b===THREE.UnsignedShort565Type)return O.UNSIGNED_SHORT_5_6_5;if(b===THREE.ByteType)return O.BYTE;if(b===THREE.ShortType)return O.SHORT;
if(b===THREE.UnsignedShortType)return O.UNSIGNED_SHORT;if(b===THREE.IntType)return O.INT;if(b===THREE.UnsignedIntType)return O.UNSIGNED_INT;if(b===THREE.FloatType)return O.FLOAT;c=ja.get("OES_texture_half_float");if(null!==c&&b===THREE.HalfFloatType)return c.HALF_FLOAT_OES;if(b===THREE.AlphaFormat)return O.ALPHA;if(b===THREE.RGBFormat)return O.RGB;if(b===THREE.RGBAFormat)return O.RGBA;if(b===THREE.LuminanceFormat)return O.LUMINANCE;if(b===THREE.LuminanceAlphaFormat)return O.LUMINANCE_ALPHA;if(b===
THREE.AddEquation)return O.FUNC_ADD;if(b===THREE.SubtractEquation)return O.FUNC_SUBTRACT;if(b===THREE.ReverseSubtractEquation)return O.FUNC_REVERSE_SUBTRACT;if(b===THREE.ZeroFactor)return O.ZERO;if(b===THREE.OneFactor)return O.ONE;if(b===THREE.SrcColorFactor)return O.SRC_COLOR;if(b===THREE.OneMinusSrcColorFactor)return O.ONE_MINUS_SRC_COLOR;if(b===THREE.SrcAlphaFactor)return O.SRC_ALPHA;if(b===THREE.OneMinusSrcAlphaFactor)return O.ONE_MINUS_SRC_ALPHA;if(b===THREE.DstAlphaFactor)return O.DST_ALPHA;
if(b===THREE.OneMinusDstAlphaFactor)return O.ONE_MINUS_DST_ALPHA;if(b===THREE.DstColorFactor)return O.DST_COLOR;if(b===THREE.OneMinusDstColorFactor)return O.ONE_MINUS_DST_COLOR;if(b===THREE.SrcAlphaSaturateFactor)return O.SRC_ALPHA_SATURATE;c=ja.get("WEBGL_compressed_texture_s3tc");if(null!==c){if(b===THREE.RGB_S3TC_DXT1_Format)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(b===THREE.RGBA_S3TC_DXT1_Format)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(b===THREE.RGBA_S3TC_DXT3_Format)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;
if(b===THREE.RGBA_S3TC_DXT5_Format)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}c=ja.get("WEBGL_compressed_texture_pvrtc");if(null!==c){if(b===THREE.RGB_PVRTC_4BPPV1_Format)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(b===THREE.RGB_PVRTC_2BPPV1_Format)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(b===THREE.RGBA_PVRTC_4BPPV1_Format)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(b===THREE.RGBA_PVRTC_2BPPV1_Format)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}c=ja.get("EXT_blend_minmax");if(null!==c){if(b===THREE.MinEquation)return c.MIN_EXT;
if(b===THREE.MaxEquation)return c.MAX_EXT}return 0}b=b||{};var G=void 0!==b.canvas?b.canvas:document.createElement("canvas"),M=void 0!==b.context?b.context:null,J=G.width,K=G.height,L=1,N=void 0!==b.alpha?b.alpha:!1,Q=void 0!==b.depth?b.depth:!0,S=void 0!==b.stencil?b.stencil:!0,U=void 0!==b.antialias?b.antialias:!1,V=void 0!==b.premultipliedAlpha?b.premultipliedAlpha:!0,W=void 0!==b.preserveDrawingBuffer?b.preserveDrawingBuffer:!1,X=new THREE.Color(0),ea=0,da=[],R=[],Y=-1,Z=[],ca=-1,ba=[],aa=-1,
ra=[],pa=-1,Ba=new Float32Array(8),wa=[],sa=[];this.domElement=G;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.gammaFactor=2;this.gammaOutput=this.gammaInput=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;var qa=this,ga=null,E=null,Ca=-1,ta="",oa=null,ya=0,Pa=0,Ia=0,Za=G.width,La=G.height,$a=0,Na=0,kb=new THREE.Frustum,eb=new THREE.Matrix4,Ea=new THREE.Vector3,Ma=new THREE.Vector3,Wa=!0,wb={ambient:[0,
0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},Va={geometries:0,textures:0},ka={calls:0,vertices:0,faces:0,points:0};this.info={render:ka,memory:Va,programs:null};var O;try{N={alpha:N,depth:Q,stencil:S,antialias:U,premultipliedAlpha:V,preserveDrawingBuffer:W};O=M||G.getContext("webgl",
N)||G.getContext("experimental-webgl",N);if(null===O){if(null!==G.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context.";}G.addEventListener("webglcontextlost",f,!1)}catch(Ta){console.error("THREE.WebGLRenderer: "+Ta)}var ja=new THREE.WebGLExtensions(O);ja.get("OES_texture_float");ja.get("OES_texture_float_linear");ja.get("OES_texture_half_float");ja.get("OES_texture_half_float_linear");ja.get("OES_standard_derivatives");ja.get("ANGLE_instanced_arrays");
ja.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=4294967296);var jb=new THREE.WebGLCapabilities(O,ja,b),ha=new THREE.WebGLState(O,ja,I),Da=new THREE.WebGLProperties,Sa=new THREE.WebGLObjects(O,Da,this.info),cb=new THREE.WebGLPrograms(this,jb);this.info.programs=cb.programs;var gb=new THREE.WebGLBufferRenderer(O,ja,ka),xb=new THREE.WebGLIndexedBufferRenderer(O,ja,ka);d();this.context=O;this.capabilities=jb;this.extensions=ja;this.state=ha;var Ya=new THREE.WebGLShadowMap(this,da,Sa);
this.shadowMap=Ya;var Oa=new THREE.SpritePlugin(this,wa),Ha=new THREE.LensFlarePlugin(this,sa);this.getContext=function(){return O};this.getContextAttributes=function(){return O.getContextAttributes()};this.forceContextLoss=function(){ja.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){var b;return function(){if(void 0!==b)return b;var c=ja.get("EXT_texture_filter_anisotropic");return b=null!==c?O.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}();this.getPrecision=function(){return jb.precision};
this.getPixelRatio=function(){return L};this.setPixelRatio=function(b){void 0!==b&&(L=b)};this.getSize=function(){return{width:J,height:K}};this.setSize=function(b,c,f){J=b;K=c;G.width=b*L;G.height=c*L;!1!==f&&(G.style.width=b+"px",G.style.height=c+"px");this.setViewport(0,0,b,c)};this.setViewport=function(b,c,f,h){Pa=b*L;Ia=c*L;Za=f*L;La=h*L;O.viewport(Pa,Ia,Za,La)};this.setScissor=function(b,c,f,h){O.scissor(b*L,c*L,f*L,h*L)};this.enableScissorTest=function(b){ha.setScissorTest(b)};this.getClearColor=
function(){return X};this.setClearColor=function(b,f){X.set(b);ea=void 0!==f?f:1;c(X.r,X.g,X.b,ea)};this.getClearAlpha=function(){return ea};this.setClearAlpha=function(b){ea=b;c(X.r,X.g,X.b,ea)};this.clear=function(b,c,f){var h=0;if(void 0===b||b)h|=O.COLOR_BUFFER_BIT;if(void 0===c||c)h|=O.DEPTH_BUFFER_BIT;if(void 0===f||f)h|=O.STENCIL_BUFFER_BIT;O.clear(h)};this.clearColor=function(){O.clear(O.COLOR_BUFFER_BIT)};this.clearDepth=function(){O.clear(O.DEPTH_BUFFER_BIT)};this.clearStencil=function(){O.clear(O.STENCIL_BUFFER_BIT)};
this.clearTarget=function(b,c,f,h){this.setRenderTarget(b);this.clear(c,f,h)};this.resetGLState=g;this.dispose=function(){G.removeEventListener("webglcontextlost",f,!1)};this.renderBufferImmediate=function(b,c,f){ha.initAttributes();var h=Da.get(b);b.hasPositions&&!h.position&&(h.position=O.createBuffer());b.hasNormals&&!h.normal&&(h.normal=O.createBuffer());b.hasUvs&&!h.uv&&(h.uv=O.createBuffer());b.hasColors&&!h.color&&(h.color=O.createBuffer());c=c.getAttributes();b.hasPositions&&(O.bindBuffer(O.ARRAY_BUFFER,
h.position),O.bufferData(O.ARRAY_BUFFER,b.positionArray,O.DYNAMIC_DRAW),ha.enableAttribute(c.position),O.vertexAttribPointer(c.position,3,O.FLOAT,!1,0,0));if(b.hasNormals){O.bindBuffer(O.ARRAY_BUFFER,h.normal);if("MeshPhongMaterial"!==f.type&&f.shading===THREE.FlatShading)for(var g=0,d=3*b.count;g<d;g+=9){var k=b.normalArray,l=(k[g+0]+k[g+3]+k[g+6])/3,m=(k[g+1]+k[g+4]+k[g+7])/3,n=(k[g+2]+k[g+5]+k[g+8])/3;k[g+0]=l;k[g+1]=m;k[g+2]=n;k[g+3]=l;k[g+4]=m;k[g+5]=n;k[g+6]=l;k[g+7]=m;k[g+8]=n}O.bufferData(O.ARRAY_BUFFER,
b.normalArray,O.DYNAMIC_DRAW);ha.enableAttribute(c.normal);O.vertexAttribPointer(c.normal,3,O.FLOAT,!1,0,0)}b.hasUvs&&f.map&&(O.bindBuffer(O.ARRAY_BUFFER,h.uv),O.bufferData(O.ARRAY_BUFFER,b.uvArray,O.DYNAMIC_DRAW),ha.enableAttribute(c.uv),O.vertexAttribPointer(c.uv,2,O.FLOAT,!1,0,0));b.hasColors&&f.vertexColors!==THREE.NoColors&&(O.bindBuffer(O.ARRAY_BUFFER,h.color),O.bufferData(O.ARRAY_BUFFER,b.colorArray,O.DYNAMIC_DRAW),ha.enableAttribute(c.color),O.vertexAttribPointer(c.color,3,O.FLOAT,!1,0,0));
ha.disableUnusedAttributes();O.drawArrays(O.TRIANGLES,0,b.count);b.count=0};this.renderBufferDirect=function(b,c,f,h,g,d,k){v(g);var l=y(b,c,f,g,d),m=!1;b=h.id+"_"+l.id+"_"+g.wireframe;b!==ta&&(ta=b,m=!0);b=d.morphTargetInfluences;if(void 0!==b){c=[];f=0;for(m=b.length;f<m;f++){var n=b[f];c.push([n,f])}c.sort(p);8<c.length&&(c.length=8);var r=h.morphAttributes;f=0;for(m=c.length;f<m;f++)n=c[f],Ba[f]=n[0],0!==n[0]?(b=n[1],!0===g.morphTargets&&r.position&&h.addAttribute("morphTarget"+f,r.position[b]),
!0===g.morphNormals&&r.normal&&h.addAttribute("morphNormal"+f,r.normal[b])):(!0===g.morphTargets&&h.removeAttribute("morphTarget"+f),!0===g.morphNormals&&h.removeAttribute("morphNormal"+f));b=l.getUniforms();null!==b.morphTargetInfluences&&O.uniform1fv(b.morphTargetInfluences,Ba);m=!0}b=h.index;f=h.attributes.position;!0===g.wireframe&&(b=Sa.getWireframeAttribute(h));null!==b?(c=xb,c.setIndex(b)):c=gb;if(m){a:{var m=void 0,q;if(h instanceof THREE.InstancedBufferGeometry&&(q=ja.get("ANGLE_instanced_arrays"),
null===q))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===m&&(m=0);ha.initAttributes();var n=h.attributes,l=l.getAttributes(),r=g.defaultAttributeValues,u;for(u in l){var w=l[u];if(0<=w){var t=n[u];if(void 0!==t){ha.enableAttribute(w);var A=t.itemSize,x=Sa.getAttributeBuffer(t);if(t instanceof THREE.InterleavedBufferAttribute){var z=t.data,D=z.stride,t=t.offset;O.bindBuffer(O.ARRAY_BUFFER,
x);O.vertexAttribPointer(w,A,O.FLOAT,!1,D*z.array.BYTES_PER_ELEMENT,(m*D+t)*z.array.BYTES_PER_ELEMENT);if(z instanceof THREE.InstancedInterleavedBuffer){if(null===q){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.");break a}q.vertexAttribDivisorANGLE(w,z.meshPerAttribute);void 0===h.maxInstancedCount&&(h.maxInstancedCount=z.meshPerAttribute*z.count)}}else if(O.bindBuffer(O.ARRAY_BUFFER,x),
O.vertexAttribPointer(w,A,O.FLOAT,!1,0,m*A*4),t instanceof THREE.InstancedBufferAttribute){if(null===q){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.");break a}q.vertexAttribDivisorANGLE(w,t.meshPerAttribute);void 0===h.maxInstancedCount&&(h.maxInstancedCount=t.meshPerAttribute*t.count)}}else if(void 0!==r&&(A=r[u],void 0!==A))switch(A.length){case 2:O.vertexAttrib2fv(w,A);break;case 3:O.vertexAttrib3fv(w,
A);break;case 4:O.vertexAttrib4fv(w,A);break;default:O.vertexAttrib1fv(w,A)}}}ha.disableUnusedAttributes()}}null!==b&&O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,Sa.getAttributeBuffer(b))}void 0===k&&(k=h.drawRange,k={start:k.start,count:Math.min(k.count,null!==b?b.array.length:f.count)});d instanceof THREE.Mesh?(!0===g.wireframe?(ha.setLineWidth(g.wireframeLinewidth*L),c.setMode(O.LINES)):c.setMode(O.TRIANGLES),h instanceof THREE.InstancedBufferGeometry&&0<h.maxInstancedCount?c.renderInstances(h):c.render(k.start,
k.count)):d instanceof THREE.Line?(h=g.linewidth,void 0===h&&(h=1),ha.setLineWidth(h*L),d instanceof THREE.LineSegments?c.setMode(O.LINES):c.setMode(O.LINE_STRIP),c.render(k.start,k.count)):d instanceof THREE.Points&&(c.setMode(O.POINTS),c.render(k.start,k.count))};this.render=function(b,c,f,h){if(!1===c instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var g=b.fog;ta="";Ca=-1;oa=null;Wa=!0;!0===b.autoUpdate&&b.updateMatrixWorld();
null===c.parent&&c.updateMatrixWorld();c.matrixWorldInverse.getInverse(c.matrixWorld);eb.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);kb.setFromMatrix(eb);da.length=0;pa=aa=ca=Y=-1;wa.length=0;sa.length=0;q(b);R.length=Y+1;Z.length=ca+1;ba.length=aa+1;ra.length=pa+1;!0===qa.sortObjects&&(R.sort(t),Z.sort(u));Ya.render(b,c);ka.calls=0;ka.vertices=0;ka.faces=0;ka.points=0;this.setRenderTarget(f);(this.autoClear||h)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);
b.overrideMaterial?(h=b.overrideMaterial,r(R,c,da,g,h),r(Z,c,da,g,h),w(ba,c,da,g,h),w(ra,c,da,g,h)):(ha.setBlending(THREE.NoBlending),r(R,c,da,g),w(ba,c,da,g),r(Z,c,da,g),w(ra,c,da,g));Oa.render(b,c);Ha.render(b,c,$a,Na);f&&f.generateMipmaps&&f.minFilter!==THREE.NearestFilter&&f.minFilter!==THREE.LinearFilter&&(f instanceof THREE.WebGLRenderTargetCube?(ha.bindTexture(O.TEXTURE_CUBE_MAP,Da.get(f).__webglTexture),O.generateMipmap(O.TEXTURE_CUBE_MAP),ha.bindTexture(O.TEXTURE_CUBE_MAP,null)):(ha.bindTexture(O.TEXTURE_2D,
Da.get(f).__webglTexture),O.generateMipmap(O.TEXTURE_2D),ha.bindTexture(O.TEXTURE_2D,null)));ha.setDepthTest(!0);ha.setDepthWrite(!0);ha.setColorWrite(!0)}};this.setFaceCulling=function(b,c){b===THREE.CullFaceNone?ha.disable(O.CULL_FACE):(c===THREE.FrontFaceDirectionCW?O.frontFace(O.CW):O.frontFace(O.CCW),b===THREE.CullFaceBack?O.cullFace(O.BACK):b===THREE.CullFaceFront?O.cullFace(O.FRONT):O.cullFace(O.FRONT_AND_BACK),ha.enable(O.CULL_FACE))};this.setTexture=function(b,c){var f=Da.get(b);if(0<b.version&&
f.__version!==b.version){var g=b.image;if(void 0===g)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===g.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",b);else{void 0===f.__webglInit&&(f.__webglInit=!0,b.__webglInit=!0,b.addEventListener("dispose",h),f.__webglTexture=O.createTexture(),Va.textures++);ha.activeTexture(O.TEXTURE0+c);ha.bindTexture(O.TEXTURE_2D,f.__webglTexture);O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,
b.flipY);O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);O.pixelStorei(O.UNPACK_ALIGNMENT,b.unpackAlignment);b.image=D(b.image,jb.maxTextureSize);var d=b.image,g=THREE.Math.isPowerOfTwo(d.width)&&THREE.Math.isPowerOfTwo(d.height),k=I(b.format),l=I(b.type);C(O.TEXTURE_2D,b,g);var m=b.mipmaps;if(b instanceof THREE.DataTexture)if(0<m.length&&g){for(var n=0,r=m.length;n<r;n++)d=m[n],ha.texImage2D(O.TEXTURE_2D,n,k,d.width,d.height,0,k,l,d.data);b.generateMipmaps=!1}else ha.texImage2D(O.TEXTURE_2D,
0,k,d.width,d.height,0,k,l,d.data);else if(b instanceof THREE.CompressedTexture)for(n=0,r=m.length;n<r;n++)d=m[n],b.format!==THREE.RGBAFormat&&b.format!==THREE.RGBFormat?-1<ha.getCompressedTextureFormats().indexOf(k)?ha.compressedTexImage2D(O.TEXTURE_2D,n,k,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ha.texImage2D(O.TEXTURE_2D,n,k,d.width,d.height,0,k,l,d.data);else if(0<m.length&&g){n=0;for(r=m.length;n<
r;n++)d=m[n],ha.texImage2D(O.TEXTURE_2D,n,k,k,l,d);b.generateMipmaps=!1}else ha.texImage2D(O.TEXTURE_2D,0,k,k,l,b.image);b.generateMipmaps&&g&&O.generateMipmap(O.TEXTURE_2D);f.__version=b.version;if(b.onUpdate)b.onUpdate(b)}}else ha.activeTexture(O.TEXTURE0+c),ha.bindTexture(O.TEXTURE_2D,f.__webglTexture)};this.setRenderTarget=function(b){var c=b instanceof THREE.WebGLRenderTargetCube;if(b&&void 0===Da.get(b).__webglFramebuffer){var f=Da.get(b);void 0===b.depthBuffer&&(b.depthBuffer=!0);void 0===
b.stencilBuffer&&(b.stencilBuffer=!0);b.addEventListener("dispose",k);f.__webglTexture=O.createTexture();Va.textures++;var h=THREE.Math.isPowerOfTwo(b.width)&&THREE.Math.isPowerOfTwo(b.height),g=I(b.format),d=I(b.type);if(c){f.__webglFramebuffer=[];f.__webglRenderbuffer=[];ha.bindTexture(O.TEXTURE_CUBE_MAP,f.__webglTexture);C(O.TEXTURE_CUBE_MAP,b,h);for(var l=0;6>l;l++)f.__webglFramebuffer[l]=O.createFramebuffer(),f.__webglRenderbuffer[l]=O.createRenderbuffer(),ha.texImage2D(O.TEXTURE_CUBE_MAP_POSITIVE_X+
l,0,g,b.width,b.height,0,g,d,null),B(f.__webglFramebuffer[l],b,O.TEXTURE_CUBE_MAP_POSITIVE_X+l),F(f.__webglRenderbuffer[l],b);b.generateMipmaps&&h&&O.generateMipmap(O.TEXTURE_CUBE_MAP)}else f.__webglFramebuffer=O.createFramebuffer(),f.__webglRenderbuffer=b.shareDepthFrom?b.shareDepthFrom.__webglRenderbuffer:O.createRenderbuffer(),ha.bindTexture(O.TEXTURE_2D,f.__webglTexture),C(O.TEXTURE_2D,b,h),ha.texImage2D(O.TEXTURE_2D,0,g,b.width,b.height,0,g,d,null),B(f.__webglFramebuffer,b,O.TEXTURE_2D),b.shareDepthFrom?
b.depthBuffer&&!b.stencilBuffer?O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_ATTACHMENT,O.RENDERBUFFER,f.__webglRenderbuffer):b.depthBuffer&&b.stencilBuffer&&O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,f.__webglRenderbuffer):F(f.__webglRenderbuffer,b),b.generateMipmaps&&h&&O.generateMipmap(O.TEXTURE_2D);c?ha.bindTexture(O.TEXTURE_CUBE_MAP,null):ha.bindTexture(O.TEXTURE_2D,null);O.bindRenderbuffer(O.RENDERBUFFER,null);O.bindFramebuffer(O.FRAMEBUFFER,null)}b?
(f=Da.get(b),c=c?f.__webglFramebuffer[b.activeCubeFace]:f.__webglFramebuffer,f=b.width,b=b.height,g=h=0):(c=null,f=Za,b=La,h=Pa,g=Ia);c!==E&&(O.bindFramebuffer(O.FRAMEBUFFER,c),O.viewport(h,g,f,b),E=c);$a=f;Na=b};this.readRenderTargetPixels=function(b,c,f,h,g,d){if(!(b instanceof THREE.WebGLRenderTarget))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else if(Da.get(b).__webglFramebuffer)if(b.format!==THREE.RGBAFormat)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");
else{var k=!1;Da.get(b).__webglFramebuffer!==E&&(O.bindFramebuffer(O.FRAMEBUFFER,Da.get(b).__webglFramebuffer),k=!0);O.checkFramebufferStatus(O.FRAMEBUFFER)===O.FRAMEBUFFER_COMPLETE?O.readPixels(c,f,h,g,O.RGBA,O.UNSIGNED_BYTE,d):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.");k&&O.bindFramebuffer(O.FRAMEBUFFER,E)}};this.supportsFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");
return ja.get("OES_texture_float")};this.supportsHalfFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return ja.get("OES_texture_half_float")};this.supportsStandardDerivatives=function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return ja.get("OES_standard_derivatives")};this.supportsCompressedTextureS3TC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");
return ja.get("WEBGL_compressed_texture_s3tc")};this.supportsCompressedTexturePVRTC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return ja.get("WEBGL_compressed_texture_pvrtc")};this.supportsBlendMinMax=function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return ja.get("EXT_blend_minmax")};this.supportsVertexTextures=function(){return jb.vertexTextures};
this.supportsInstancedArrays=function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return ja.get("ANGLE_instanced_arrays")};this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};
this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Object.defineProperties(this,{shadowMapEnabled:{get:function(){return Ya.enabled},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");Ya.enabled=b}},shadowMapType:{get:function(){return Ya.type},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");Ya.type=b}},shadowMapCullFace:{get:function(){return Ya.cullFace},
set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");Ya.cullFace=b}},shadowMapDebug:{get:function(){return Ya.debug},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug.");Ya.debug=b}}})};
THREE.WebGLRenderTarget=function(b,c,d){this.uuid=THREE.Math.generateUUID();this.width=b;this.height=c;d=d||{};this.wrapS=void 0!==d.wrapS?d.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d.wrapT?d.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==d.magFilter?d.magFilter:THREE.LinearFilter;this.minFilter=void 0!==d.minFilter?d.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==d.anisotropy?d.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,
1);this.format=void 0!==d.format?d.format:THREE.RGBAFormat;this.type=void 0!==d.type?d.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==d.depthBuffer?d.depthBuffer:!0;this.stencilBuffer=void 0!==d.stencilBuffer?d.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=void 0!==d.shareDepthFrom?d.shareDepthFrom:null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(b,c){if(this.width!==b||this.height!==c)this.width=b,this.height=c,this.dispose()},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.width=b.width;this.height=b.height;this.wrapS=b.wrapS;this.wrapT=b.wrapT;this.magFilter=b.magFilter;this.minFilter=b.minFilter;this.anisotropy=b.anisotropy;this.offset.copy(b.offset);this.repeat.copy(b.repeat);this.format=b.format;this.type=b.type;this.depthBuffer=
b.depthBuffer;this.stencilBuffer=b.stencilBuffer;this.generateMipmaps=b.generateMipmaps;this.shareDepthFrom=b.shareDepthFrom;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(b,c,d){THREE.WebGLRenderTarget.call(this,b,c,d);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);
THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;
THREE.WebGLBufferRenderer=function(b,c,d){var g;this.setMode=function(b){g=b};this.render=function(c,h){b.drawArrays(g,c,h);d.calls++;d.vertices+=h;g===b.TRIANGLES&&(d.faces+=h/3)};this.renderInstances=function(b){var h=c.get("ANGLE_instanced_arrays");if(null===h)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var d=b.attributes.position;d instanceof THREE.InterleavedBufferAttribute?h.drawArraysInstancedANGLE(g,
0,d.data.count,b.maxInstancedCount):h.drawArraysInstancedANGLE(g,0,d.count,b.maxInstancedCount)}}};
THREE.WebGLIndexedBufferRenderer=function(b,c,d){var g,f,h;this.setMode=function(b){g=b};this.setIndex=function(g){g.array instanceof Uint32Array&&c.get("OES_element_index_uint")?(f=b.UNSIGNED_INT,h=4):(f=b.UNSIGNED_SHORT,h=2)};this.render=function(c,l){b.drawElements(g,l,f,c*h);d.calls++;d.vertices+=l;g===b.TRIANGLES&&(d.faces+=l/3)};this.renderInstances=function(b){var h=c.get("ANGLE_instanced_arrays");null===h?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
h.drawElementsInstancedANGLE(g,b.index.array.length,f,0,b.maxInstancedCount)}};
THREE.WebGLExtensions=function(b){var c={};this.get=function(d){if(void 0!==c[d])return c[d];var g;switch(d){case "EXT_texture_filter_anisotropic":g=b.getExtension("EXT_texture_filter_anisotropic")||b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":g=b.getExtension("WEBGL_compressed_texture_s3tc")||b.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
break;case "WEBGL_compressed_texture_pvrtc":g=b.getExtension("WEBGL_compressed_texture_pvrtc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:g=b.getExtension(d)}null===g&&console.warn("THREE.WebGLRenderer: "+d+" extension not supported.");return c[d]=g}};
THREE.WebGLCapabilities=function(b,c,d){function g(c){if("highp"===c){if(0<b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.HIGH_FLOAT).precision&&0<b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT).precision)return"highp";c="mediump"}return"mediump"===c&&0<b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.MEDIUM_FLOAT).precision&&0<b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT).precision?"mediump":"lowp"}this.getMaxPrecision=g;this.precision=void 0!==d.precision?d.precision:"highp";
this.logarithmicDepthBuffer=void 0!==d.logarithmicDepthBuffer?d.logarithmicDepthBuffer:!1;this.maxTextures=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=b.getParameter(b.MAX_TEXTURE_SIZE);this.maxCubemapSize=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=b.getParameter(b.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=b.getParameter(b.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=b.getParameter(b.MAX_VARYING_VECTORS);
this.maxFragmentUniforms=b.getParameter(b.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!c.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;d=g(this.precision);d!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",d,"instead."),this.precision=d);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!c.get("EXT_frag_depth"))};
THREE.WebGLGeometries=function(b,c,d){function g(b){b=b.target;var l=h[b.id].attributes,m;for(m in l)f(l[m]);b.removeEventListener("dispose",g);delete h[b.id];m=c.get(b);m.wireframe&&f(m.wireframe);d.memory.geometries--}function f(f){var h;h=f instanceof THREE.InterleavedBufferAttribute?c.get(f.data).__webglBuffer:c.get(f).__webglBuffer;void 0!==h&&(b.deleteBuffer(h),f instanceof THREE.InterleavedBufferAttribute?c["delete"](f.data):c["delete"](f))}var h={};this.get=function(b){var c=b.geometry;if(void 0!==
h[c.id])return h[c.id];c.addEventListener("dispose",g);var f;c instanceof THREE.BufferGeometry?f=c:c instanceof THREE.Geometry&&(void 0===c._bufferGeometry&&(c._bufferGeometry=(new THREE.BufferGeometry).setFromObject(b)),f=c._bufferGeometry);h[c.id]=f;d.memory.geometries++;return f}};
THREE.WebGLObjects=function(b,c,d){function g(f,h){var g=f instanceof THREE.InterleavedBufferAttribute?f.data:f,d=c.get(g);void 0===d.__webglBuffer?(d.__webglBuffer=b.createBuffer(),b.bindBuffer(h,d.__webglBuffer),b.bufferData(h,g.array,g.dynamic?b.DYNAMIC_DRAW:b.STATIC_DRAW),d.version=g.version):d.version!==g.version&&(b.bindBuffer(h,d.__webglBuffer),!1===g.dynamic||-1===g.updateRange.count?b.bufferSubData(h,0,g.array):0===g.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
(b.bufferSubData(h,g.updateRange.offset*g.array.BYTES_PER_ELEMENT,g.array.subarray(g.updateRange.offset,g.updateRange.offset+g.updateRange.count)),g.updateRange.count=0),d.version=g.version)}function f(b,c,f){if(c>f){var h=c;c=f;f=h}h=b[c];return void 0===h?(b[c]=[f],!0):-1===h.indexOf(f)?(h.push(f),!0):!1}var h=new THREE.WebGLGeometries(b,c,d);this.getAttributeBuffer=function(b){return b instanceof THREE.InterleavedBufferAttribute?c.get(b.data).__webglBuffer:c.get(b).__webglBuffer};this.getWireframeAttribute=
function(h){var d=c.get(h);if(void 0!==d.wireframe)return d.wireframe;var m=[],p=h.index,t=h.attributes;h=t.position;if(null!==p)for(var t={},p=p.array,u=0,n=p.length;u<n;u+=3){var q=p[u+0],r=p[u+1],w=p[u+2];f(t,q,r)&&m.push(q,r);f(t,r,w)&&m.push(r,w);f(t,w,q)&&m.push(w,q)}else for(p=t.position.array,u=0,n=p.length/3-1;u<n;u+=3)q=u+0,r=u+1,w=u+2,m.push(q,r,r,w,w,q);m=new THREE.BufferAttribute(new (65535<h.count?Uint32Array:Uint16Array)(m),1);g(m,b.ELEMENT_ARRAY_BUFFER);return d.wireframe=m};this.update=
function(c){var f=h.get(c);c.geometry instanceof THREE.Geometry&&f.updateFromObject(c);c=f.index;var d=f.attributes;null!==c&&g(c,b.ELEMENT_ARRAY_BUFFER);for(var p in d)g(d[p],b.ARRAY_BUFFER);c=f.morphAttributes;for(p in c)for(var d=c[p],t=0,u=d.length;t<u;t++)g(d[t],b.ARRAY_BUFFER);return f}};
THREE.WebGLProgram=function(){function b(b){var c=[],h;for(h in b){var d=b[h];!1!==d&&c.push("#define "+h+" "+d)}return c.join("\n")}function c(b){return""!==b}var d=0;return function(g,f,h,k){var l=g.context,m=h.defines,p=h.__webglShader.vertexShader,t=h.__webglShader.fragmentShader,u="SHADOWMAP_TYPE_BASIC";k.shadowMapType===THREE.PCFShadowMap?u="SHADOWMAP_TYPE_PCF":k.shadowMapType===THREE.PCFSoftShadowMap&&(u="SHADOWMAP_TYPE_PCF_SOFT");var n="ENVMAP_TYPE_CUBE",q="ENVMAP_MODE_REFLECTION",r="ENVMAP_BLENDING_MULTIPLY";
if(k.envMap){switch(h.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:n="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:n="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:n="ENVMAP_TYPE_SPHERE"}switch(h.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:q="ENVMAP_MODE_REFRACTION"}switch(h.combine){case THREE.MultiplyOperation:r="ENVMAP_BLENDING_MULTIPLY";
break;case THREE.MixOperation:r="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:r="ENVMAP_BLENDING_ADD"}}var w=0<g.gammaFactor?g.gammaFactor:1,v=b(m),y=l.createProgram();h instanceof THREE.RawShaderMaterial?g=m="":(m=["precision "+k.precision+" float;","precision "+k.precision+" int;","#define SHADER_NAME "+h.__webglShader.name,v,k.supportsVertexTextures?"#define VERTEX_TEXTURES":"",g.gammaInput?"#define GAMMA_INPUT":"",g.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+w,"#define MAX_DIR_LIGHTS "+
k.maxDirLights,"#define MAX_POINT_LIGHTS "+k.maxPointLights,"#define MAX_SPOT_LIGHTS "+k.maxSpotLights,"#define MAX_HEMI_LIGHTS "+k.maxHemiLights,"#define MAX_SHADOWS "+k.maxShadows,"#define MAX_BONES "+k.maxBones,k.map?"#define USE_MAP":"",k.envMap?"#define USE_ENVMAP":"",k.envMap?"#define "+q:"",k.lightMap?"#define USE_LIGHTMAP":"",k.aoMap?"#define USE_AOMAP":"",k.emissiveMap?"#define USE_EMISSIVEMAP":"",k.bumpMap?"#define USE_BUMPMAP":"",k.normalMap?"#define USE_NORMALMAP":"",k.displacementMap&&
k.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",k.specularMap?"#define USE_SPECULARMAP":"",k.alphaMap?"#define USE_ALPHAMAP":"",k.vertexColors?"#define USE_COLOR":"",k.flatShading?"#define FLAT_SHADED":"",k.skinning?"#define USE_SKINNING":"",k.useVertexTexture?"#define BONE_TEXTURE":"",k.morphTargets?"#define USE_MORPHTARGETS":"",k.morphNormals&&!1===k.flatShading?"#define USE_MORPHNORMALS":"",k.doubleSided?"#define DOUBLE_SIDED":"",k.flipSided?"#define FLIP_SIDED":"",k.shadowMapEnabled?
"#define USE_SHADOWMAP":"",k.shadowMapEnabled?"#define "+u:"",k.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",k.sizeAttenuation?"#define USE_SIZEATTENUATION":"",k.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",k.logarithmicDepthBuffer&&g.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;",
"attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;",
"\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(c).join("\n"),g=[k.bumpMap||k.normalMap||k.flatShading||h.derivatives?"#extension GL_OES_standard_derivatives : enable":"",k.logarithmicDepthBuffer&&g.extensions.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"","precision "+k.precision+" float;","precision "+k.precision+" int;","#define SHADER_NAME "+
h.__webglShader.name,v,"#define MAX_DIR_LIGHTS "+k.maxDirLights,"#define MAX_POINT_LIGHTS "+k.maxPointLights,"#define MAX_SPOT_LIGHTS "+k.maxSpotLights,"#define MAX_HEMI_LIGHTS "+k.maxHemiLights,"#define MAX_SHADOWS "+k.maxShadows,k.alphaTest?"#define ALPHATEST "+k.alphaTest:"",g.gammaInput?"#define GAMMA_INPUT":"",g.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+w,k.useFog&&k.fog?"#define USE_FOG":"",k.useFog&&k.fogExp?"#define FOG_EXP2":"",k.map?"#define USE_MAP":"",k.envMap?"#define USE_ENVMAP":
"",k.envMap?"#define "+n:"",k.envMap?"#define "+q:"",k.envMap?"#define "+r:"",k.lightMap?"#define USE_LIGHTMAP":"",k.aoMap?"#define USE_AOMAP":"",k.emissiveMap?"#define USE_EMISSIVEMAP":"",k.bumpMap?"#define USE_BUMPMAP":"",k.normalMap?"#define USE_NORMALMAP":"",k.specularMap?"#define USE_SPECULARMAP":"",k.alphaMap?"#define USE_ALPHAMAP":"",k.vertexColors?"#define USE_COLOR":"",k.flatShading?"#define FLAT_SHADED":"",k.metal?"#define METAL":"",k.doubleSided?"#define DOUBLE_SIDED":"",k.flipSided?"#define FLIP_SIDED":
"",k.shadowMapEnabled?"#define USE_SHADOWMAP":"",k.shadowMapEnabled?"#define "+u:"",k.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",k.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",k.logarithmicDepthBuffer&&g.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(c).join("\n"));t=g+t;p=THREE.WebGLShader(l,l.VERTEX_SHADER,m+p);t=THREE.WebGLShader(l,l.FRAGMENT_SHADER,t);l.attachShader(y,p);l.attachShader(y,t);void 0!==
h.index0AttributeName?l.bindAttribLocation(y,0,h.index0AttributeName):!0===k.morphTargets&&l.bindAttribLocation(y,0,"position");l.linkProgram(y);k=l.getProgramInfoLog(y);u=l.getShaderInfoLog(p);n=l.getShaderInfoLog(t);r=q=!0;if(!1===l.getProgramParameter(y,l.LINK_STATUS))q=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"gl.VALIDATE_STATUS",l.getProgramParameter(y,l.VALIDATE_STATUS),"gl.getProgramInfoLog",k,u,n);else if(""!==k)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",
k);else if(""===u||""===n)r=!1;r&&(this.diagnostics={runnable:q,material:h,programLog:k,vertexShader:{log:u,prefix:m},fragmentShader:{log:n,prefix:g}});l.deleteShader(p);l.deleteShader(t);var A;this.getUniforms=function(){if(void 0===A){for(var b={},c=l.getProgramParameter(y,l.ACTIVE_UNIFORMS),f=0;f<c;f++){var h=l.getActiveUniform(y,f).name,g=l.getUniformLocation(y,h),d=h.lastIndexOf("[0]");-1!==d&&d===h.length-3&&(b[h.substr(0,d)]=g);b[h]=g}A=b}return A};var x;this.getAttributes=function(){if(void 0===
x){for(var b={},c=l.getProgramParameter(y,l.ACTIVE_ATTRIBUTES),f=0;f<c;f++){var h=l.getActiveAttrib(y,f).name;b[h]=l.getAttribLocation(y,h)}x=b}return x};this.destroy=function(){l.deleteProgram(y);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});
this.id=d++;this.code=f;this.usedTimes=1;this.program=y;this.vertexShader=p;this.fragmentShader=t;return this}}();
THREE.WebGLPrograms=function(b,c){var d=[],g={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},f="precision supportsVertexTextures map envMap envMapMode lightMap aoMap emissiveMap bumpMap normalMap specularMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals maxDirLights maxPointLights maxSpotLights maxHemiLights maxShadows shadowMapEnabled shadowMapType shadowMapDebug alphaTest metal doubleSided flipSided".split(" ");this.getParameters=
function(f,d,l,m){for(var p,t,u,n,q=g[f.type],r=n=u=t=p=0,w=d.length;r<w;r++){var v=d[r];v.onlyShadow||!1===v.visible||(v instanceof THREE.DirectionalLight&&p++,v instanceof THREE.PointLight&&t++,v instanceof THREE.SpotLight&&u++,v instanceof THREE.HemisphereLight&&n++)}w=r=0;for(v=d.length;w<v;w++){var y=d[w];y.castShadow&&(y instanceof THREE.SpotLight&&r++,y instanceof THREE.DirectionalLight&&r++)}d=r;c.floatVertexTextures&&m&&m.skeleton&&m.skeleton.useVertexTexture?r=1024:(r=Math.floor((c.maxVertexUniforms-
20)/4),void 0!==m&&m instanceof THREE.SkinnedMesh&&(r=Math.min(m.skeleton.bones.length,r),r<m.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+m.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")));w=b.getPrecision();null!==f.precision&&(w=c.getMaxPrecision(f.precision),w!==f.precision&&console.warn("THREE.WebGLRenderer.initMaterial:",f.precision,"not supported, using",w,"instead."));return{shaderID:q,precision:w,supportsVertexTextures:c.vertexTextures,
map:!!f.map,envMap:!!f.envMap,envMapMode:f.envMap&&f.envMap.mapping,lightMap:!!f.lightMap,aoMap:!!f.aoMap,emissiveMap:!!f.emissiveMap,bumpMap:!!f.bumpMap,normalMap:!!f.normalMap,displacementMap:!!f.displacementMap,specularMap:!!f.specularMap,alphaMap:!!f.alphaMap,combine:f.combine,vertexColors:f.vertexColors,fog:l,useFog:f.fog,fogExp:l instanceof THREE.FogExp2,flatShading:f.shading===THREE.FlatShading,sizeAttenuation:f.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:f.skinning,
maxBones:r,useVertexTexture:c.floatVertexTextures&&m&&m.skeleton&&m.skeleton.useVertexTexture,morphTargets:f.morphTargets,morphNormals:f.morphNormals,maxMorphTargets:b.maxMorphTargets,maxMorphNormals:b.maxMorphNormals,maxDirLights:p,maxPointLights:t,maxSpotLights:u,maxHemiLights:n,maxShadows:d,shadowMapEnabled:b.shadowMap.enabled&&m.receiveShadow&&0<d,shadowMapType:b.shadowMap.type,shadowMapDebug:b.shadowMap.debug,alphaTest:f.alphaTest,metal:f.metal,doubleSided:f.side===THREE.DoubleSide,flipSided:f.side===
THREE.BackSide}};this.getProgramCode=function(b,c){var g=[];c.shaderID?g.push(c.shaderID):(g.push(b.fragmentShader),g.push(b.vertexShader));if(void 0!==b.defines)for(var d in b.defines)g.push(d),g.push(b.defines[d]);for(d=0;d<f.length;d++){var p=f[d];g.push(p);g.push(c[p])}return g.join()};this.acquireProgram=function(c,f,g){for(var m,p=0,t=d.length;p<t;p++){var u=d[p];if(u.code===g){m=u;++m.usedTimes;break}}void 0===m&&(m=new THREE.WebGLProgram(b,g,c,f),d.push(m));return m};this.releaseProgram=function(b){if(0===
--b.usedTimes){var c=d.indexOf(b);d[c]=d[d.length-1];d.pop();b.destroy()}};this.programs=d};THREE.WebGLProperties=function(){var b={};this.get=function(c){c=c.uuid;var d=b[c];void 0===d&&(d={},b[c]=d);return d};this["delete"]=function(c){delete b[c.uuid]};this.clear=function(){b={}}};
THREE.WebGLShader=function(){var b=function(b){b=b.split("\n");for(var d=0;d<b.length;d++)b[d]=d+1+": "+b[d];return b.join("\n")};return function(c,d,g){var f=c.createShader(d);c.shaderSource(f,g);c.compileShader(f);!1===c.getShaderParameter(f,c.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==c.getShaderInfoLog(f)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",d===c.VERTEX_SHADER?"vertex":"fragment",c.getShaderInfoLog(f),b(g));return f}}();
THREE.WebGLShadowMap=function(b,c,d){function g(b,c){var f=b.geometry,f=void 0!==f.morphTargets&&0<f.morphTargets.length&&c.morphTargets,h=b instanceof THREE.SkinnedMesh&&c.skinning,f=b.customDepthMaterial?b.customDepthMaterial:h?f?v:w:f?r:q;f.visible=c.visible;f.wireframe=c.wireframe;f.wireframeLinewidth=c.wireframeLinewidth;return f}function f(b,c){if(!1!==b.visible){(b instanceof THREE.Mesh||b instanceof THREE.Line||b instanceof THREE.Points)&&b.castShadow&&(!1===b.frustumCulled||!0===l.intersectsObject(b))&&
!0===b.material.visible&&(b.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,b.matrixWorld),t.push(b));for(var h=b.children,g=0,d=h.length;g<d;g++)f(h[g],c)}}var h=b.context,k=b.state,l=new THREE.Frustum,m=new THREE.Matrix4;new THREE.Vector3;new THREE.Vector3;var p=new THREE.Vector3,t=[],u=THREE.ShaderLib.depthRGBA,n=THREE.UniformsUtils.clone(u.uniforms),q=new THREE.ShaderMaterial({uniforms:n,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),r=new THREE.ShaderMaterial({uniforms:n,
vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,morphTargets:!0}),w=new THREE.ShaderMaterial({uniforms:n,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,skinning:!0}),v=new THREE.ShaderMaterial({uniforms:n,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,morphTargets:!0,skinning:!0});q._shadowPass=!0;r._shadowPass=!0;w._shadowPass=!0;v._shadowPass=!0;var y=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=THREE.PCFShadowMap;this.cullFace=THREE.CullFaceFront;
this.render=function(n,r){if(!1!==y.enabled&&(!1!==y.autoUpdate||!1!==y.needsUpdate)){h.clearColor(1,1,1,1);k.disable(h.BLEND);k.enable(h.CULL_FACE);h.frontFace(h.CCW);y.cullFace===THREE.CullFaceFront?h.cullFace(h.FRONT):h.cullFace(h.BACK);k.setDepthTest(!0);for(var q=0,u=c.length;q<u;q++){var v=c[q];if(v.castShadow){if(!v.shadowMap){var w=THREE.LinearFilter;y.type===THREE.PCFSoftShadowMap&&(w=THREE.NearestFilter);v.shadowMap=new THREE.WebGLRenderTarget(v.shadowMapWidth,v.shadowMapHeight,{minFilter:w,
magFilter:w,format:THREE.RGBAFormat});v.shadowMapSize=new THREE.Vector2(v.shadowMapWidth,v.shadowMapHeight);v.shadowMatrix=new THREE.Matrix4}if(!v.shadowCamera){if(v instanceof THREE.SpotLight)v.shadowCamera=new THREE.PerspectiveCamera(v.shadowCameraFov,v.shadowMapWidth/v.shadowMapHeight,v.shadowCameraNear,v.shadowCameraFar);else if(v instanceof THREE.DirectionalLight)v.shadowCamera=new THREE.OrthographicCamera(v.shadowCameraLeft,v.shadowCameraRight,v.shadowCameraTop,v.shadowCameraBottom,v.shadowCameraNear,
v.shadowCameraFar);else{console.error("THREE.ShadowMapPlugin: Unsupported light type for shadow",v);continue}n.add(v.shadowCamera);!0===n.autoUpdate&&n.updateMatrixWorld()}v.shadowCameraVisible&&!v.cameraHelper&&(v.cameraHelper=new THREE.CameraHelper(v.shadowCamera),n.add(v.cameraHelper));var F=v.shadowMap,H=v.shadowMatrix,w=v.shadowCamera;w.position.setFromMatrixPosition(v.matrixWorld);p.setFromMatrixPosition(v.target.matrixWorld);w.lookAt(p);w.updateMatrixWorld();w.matrixWorldInverse.getInverse(w.matrixWorld);
v.cameraHelper&&(v.cameraHelper.visible=v.shadowCameraVisible);v.shadowCameraVisible&&v.cameraHelper.update();H.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);H.multiply(w.projectionMatrix);H.multiply(w.matrixWorldInverse);m.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse);l.setFromMatrix(m);b.setRenderTarget(F);b.clear();t.length=0;f(n,w);v=0;for(F=t.length;v<F;v++){var H=t[v],I=d.update(H),G=H.material;if(G instanceof THREE.MeshFaceMaterial)for(var M=I.groups,G=G.materials,J=0,K=M.length;J<
K;J++){var L=M[J],N=G[L.materialIndex];!0===N.visible&&b.renderBufferDirect(w,c,null,I,g(H,N),H,L)}else b.renderBufferDirect(w,c,null,I,g(H,G),H)}}}q=b.getClearColor();u=b.getClearAlpha();b.setClearColor(q,u);k.enable(h.BLEND);y.cullFace===THREE.CullFaceFront&&h.cullFace(h.BACK);b.resetGLState();y.needsUpdate=!1}}};
THREE.WebGLState=function(b,c,d){var g=this,f=new Uint8Array(16),h=new Uint8Array(16),k={},l=null,m=null,p=null,t=null,u=null,n=null,q=null,r=null,w=null,v=null,y=null,A=null,x=null,z=null,C=null,D=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS),B=void 0,F={};this.init=function(){b.clearColor(0,0,0,1);b.clearDepth(1);b.clearStencil(0);this.enable(b.DEPTH_TEST);b.depthFunc(b.LEQUAL);b.frontFace(b.CCW);b.cullFace(b.BACK);this.enable(b.CULL_FACE);this.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);b.blendFunc(b.SRC_ALPHA,
b.ONE_MINUS_SRC_ALPHA)};this.initAttributes=function(){for(var b=0,c=f.length;b<c;b++)f[b]=0};this.enableAttribute=function(c){f[c]=1;0===h[c]&&(b.enableVertexAttribArray(c),h[c]=1)};this.disableUnusedAttributes=function(){for(var c=0,g=h.length;c<g;c++)h[c]!==f[c]&&(b.disableVertexAttribArray(c),h[c]=0)};this.enable=function(c){!0!==k[c]&&(b.enable(c),k[c]=!0)};this.disable=function(c){!1!==k[c]&&(b.disable(c),k[c]=!1)};this.getCompressedTextureFormats=function(){if(null===l&&(l=[],c.get("WEBGL_compressed_texture_pvrtc")||
c.get("WEBGL_compressed_texture_s3tc")))for(var f=b.getParameter(b.COMPRESSED_TEXTURE_FORMATS),h=0;h<f.length;h++)l.push(f[h]);return l};this.setBlending=function(c,f,h,g,k,l,v){c!==m&&(c===THREE.NoBlending?this.disable(b.BLEND):c===THREE.AdditiveBlending?(this.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE)):c===THREE.SubtractiveBlending?(this.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.ONE_MINUS_SRC_COLOR)):c===THREE.MultiplyBlending?(this.enable(b.BLEND),
b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.SRC_COLOR)):c===THREE.CustomBlending?this.enable(b.BLEND):(this.enable(b.BLEND),b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA)),m=c);if(c===THREE.CustomBlending){k=k||f;l=l||h;v=v||g;if(f!==p||k!==n)b.blendEquationSeparate(d(f),d(k)),p=f,n=k;if(h!==t||g!==u||l!==q||v!==r)b.blendFuncSeparate(d(h),d(g),d(l),d(v)),t=h,u=g,q=l,r=v}else r=q=n=u=t=p=null};this.setDepthFunc=
function(c){if(w!==c){if(c)switch(c){case THREE.NeverDepth:b.depthFunc(b.NEVER);break;case THREE.AlwaysDepth:b.depthFunc(b.ALWAYS);break;case THREE.LessDepth:b.depthFunc(b.LESS);break;case THREE.LessEqualDepth:b.depthFunc(b.LEQUAL);break;case THREE.EqualDepth:b.depthFunc(b.EQUAL);break;case THREE.GreaterEqualDepth:b.depthFunc(b.GEQUAL);break;case THREE.GreaterDepth:b.depthFunc(b.GREATER);break;case THREE.NotEqualDepth:b.depthFunc(b.NOTEQUAL);break;default:b.depthFunc(b.LEQUAL)}else b.depthFunc(b.LEQUAL);
w=c}};this.setDepthTest=function(c){c?this.enable(b.DEPTH_TEST):this.disable(b.DEPTH_TEST)};this.setDepthWrite=function(c){v!==c&&(b.depthMask(c),v=c)};this.setColorWrite=function(c){y!==c&&(b.colorMask(c,c,c,c),y=c)};this.setFlipSided=function(c){A!==c&&(c?b.frontFace(b.CW):b.frontFace(b.CCW),A=c)};this.setLineWidth=function(c){c!==x&&(b.lineWidth(c),x=c)};this.setPolygonOffset=function(c,f,h){c?this.enable(b.POLYGON_OFFSET_FILL):this.disable(b.POLYGON_OFFSET_FILL);!c||z===f&&C===h||(b.polygonOffset(f,
h),z=f,C=h)};this.setScissorTest=function(c){c?this.enable(b.SCISSOR_TEST):this.disable(b.SCISSOR_TEST)};this.activeTexture=function(c){void 0===c&&(c=b.TEXTURE0+D-1);B!==c&&(b.activeTexture(c),B=c)};this.bindTexture=function(c,f){void 0===B&&g.activeTexture();var h=F[B];void 0===h&&(h={type:void 0,texture:void 0},F[B]=h);if(h.type!==c||h.texture!==f)b.bindTexture(c,f),h.type=c,h.texture=f};this.compressedTexImage2D=function(){try{b.compressedTexImage2D.apply(b,arguments)}catch(c){console.error(c)}};
this.texImage2D=function(){try{b.texImage2D.apply(b,arguments)}catch(c){console.error(c)}};this.reset=function(){for(var c=0;c<h.length;c++)1===h[c]&&(b.disableVertexAttribArray(c),h[c]=0);k={};A=y=v=m=l=null}};
THREE.LensFlarePlugin=function(b,c){var d,g,f,h,k,l,m,p,t,u,n=b.context,q=b.state,r,w,v,y,A,x;this.render=function(z,C,D,B){if(0!==c.length){z=new THREE.Vector3;var F=B/D,H=.5*D,I=.5*B,G=16/B,M=new THREE.Vector2(G*F,G),J=new THREE.Vector3(1,1,0),K=new THREE.Vector2(1,1);if(void 0===v){var G=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),L=new Uint16Array([0,1,2,0,2,3]);r=n.createBuffer();w=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,r);n.bufferData(n.ARRAY_BUFFER,G,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,
w);n.bufferData(n.ELEMENT_ARRAY_BUFFER,L,n.STATIC_DRAW);A=n.createTexture();x=n.createTexture();q.bindTexture(n.TEXTURE_2D,A);n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);q.bindTexture(n.TEXTURE_2D,x);n.texImage2D(n.TEXTURE_2D,0,
n.RGBA,16,16,0,n.RGBA,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);var G=(y=0<n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},
L=n.createProgram(),N=n.createShader(n.FRAGMENT_SHADER),Q=n.createShader(n.VERTEX_SHADER),S="precision "+b.getPrecision()+" float;\n";n.shaderSource(N,S+G.fragmentShader);n.shaderSource(Q,S+G.vertexShader);n.compileShader(N);n.compileShader(Q);n.attachShader(L,N);n.attachShader(L,Q);n.linkProgram(L);v=L;t=n.getAttribLocation(v,"position");u=n.getAttribLocation(v,"uv");d=n.getUniformLocation(v,"renderType");g=n.getUniformLocation(v,"map");f=n.getUniformLocation(v,"occlusionMap");h=n.getUniformLocation(v,
"opacity");k=n.getUniformLocation(v,"color");l=n.getUniformLocation(v,"scale");m=n.getUniformLocation(v,"rotation");p=n.getUniformLocation(v,"screenPosition")}n.useProgram(v);q.initAttributes();q.enableAttribute(t);q.enableAttribute(u);q.disableUnusedAttributes();n.uniform1i(f,0);n.uniform1i(g,1);n.bindBuffer(n.ARRAY_BUFFER,r);n.vertexAttribPointer(t,2,n.FLOAT,!1,16,0);n.vertexAttribPointer(u,2,n.FLOAT,!1,16,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,w);q.disable(n.CULL_FACE);n.depthMask(!1);L=0;for(N=
c.length;L<N;L++)if(G=16/B,M.set(G*F,G),Q=c[L],z.set(Q.matrixWorld.elements[12],Q.matrixWorld.elements[13],Q.matrixWorld.elements[14]),z.applyMatrix4(C.matrixWorldInverse),z.applyProjection(C.projectionMatrix),J.copy(z),K.x=J.x*H+H,K.y=J.y*I+I,y||0<K.x&&K.x<D&&0<K.y&&K.y<B){q.activeTexture(n.TEXTURE0);q.bindTexture(n.TEXTURE_2D,null);q.activeTexture(n.TEXTURE1);q.bindTexture(n.TEXTURE_2D,A);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,K.x-8,K.y-8,16,16,0);n.uniform1i(d,0);n.uniform2f(l,M.x,M.y);n.uniform3f(p,
J.x,J.y,J.z);q.disable(n.BLEND);q.enable(n.DEPTH_TEST);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);q.activeTexture(n.TEXTURE0);q.bindTexture(n.TEXTURE_2D,x);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,K.x-8,K.y-8,16,16,0);n.uniform1i(d,1);q.disable(n.DEPTH_TEST);q.activeTexture(n.TEXTURE1);q.bindTexture(n.TEXTURE_2D,A);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);Q.positionScreen.copy(J);Q.customUpdateCallback?Q.customUpdateCallback(Q):Q.updateLensFlares();n.uniform1i(d,2);q.enable(n.BLEND);for(var S=
0,U=Q.lensFlares.length;S<U;S++){var V=Q.lensFlares[S];.001<V.opacity&&.001<V.scale&&(J.x=V.x,J.y=V.y,J.z=V.z,G=V.size*V.scale/B,M.x=G*F,M.y=G,n.uniform3f(p,J.x,J.y,J.z),n.uniform2f(l,M.x,M.y),n.uniform1f(m,V.rotation),n.uniform1f(h,V.opacity),n.uniform3f(k,V.color.r,V.color.g,V.color.b),q.setBlending(V.blending,V.blendEquation,V.blendSrc,V.blendDst),b.setTexture(V.texture,1),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}}q.enable(n.CULL_FACE);q.enable(n.DEPTH_TEST);n.depthMask(!0);b.resetGLState()}}};
THREE.SpritePlugin=function(b,c){function d(b,c){return b.z!==c.z?c.z-b.z:c.id-b.id}var g,f,h,k,l,m,p,t,u,n,q,r,w,v,y,A,x,z=b.context,C=b.state,D,B,F,H,I=new THREE.Vector3,G=new THREE.Quaternion,M=new THREE.Vector3;this.render=function(J,K){if(0!==c.length){if(void 0===F){var L=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),N=new Uint16Array([0,1,2,0,2,3]);D=z.createBuffer();B=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,D);z.bufferData(z.ARRAY_BUFFER,L,z.STATIC_DRAW);z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,
B);z.bufferData(z.ELEMENT_ARRAY_BUFFER,N,z.STATIC_DRAW);var L=z.createProgram(),N=z.createShader(z.VERTEX_SHADER),Q=z.createShader(z.FRAGMENT_SHADER);z.shaderSource(N,["precision "+b.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
z.shaderSource(Q,["precision "+b.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
z.compileShader(N);z.compileShader(Q);z.attachShader(L,N);z.attachShader(L,Q);z.linkProgram(L);F=L;A=z.getAttribLocation(F,"position");x=z.getAttribLocation(F,"uv");g=z.getUniformLocation(F,"uvOffset");f=z.getUniformLocation(F,"uvScale");h=z.getUniformLocation(F,"rotation");k=z.getUniformLocation(F,"scale");l=z.getUniformLocation(F,"color");m=z.getUniformLocation(F,"map");p=z.getUniformLocation(F,"opacity");t=z.getUniformLocation(F,"modelViewMatrix");u=z.getUniformLocation(F,"projectionMatrix");n=
z.getUniformLocation(F,"fogType");q=z.getUniformLocation(F,"fogDensity");r=z.getUniformLocation(F,"fogNear");w=z.getUniformLocation(F,"fogFar");v=z.getUniformLocation(F,"fogColor");y=z.getUniformLocation(F,"alphaTest");L=document.createElement("canvas");L.width=8;L.height=8;N=L.getContext("2d");N.fillStyle="white";N.fillRect(0,0,8,8);H=new THREE.Texture(L);H.needsUpdate=!0}z.useProgram(F);C.initAttributes();C.enableAttribute(A);C.enableAttribute(x);C.disableUnusedAttributes();C.disable(z.CULL_FACE);
C.enable(z.BLEND);z.bindBuffer(z.ARRAY_BUFFER,D);z.vertexAttribPointer(A,2,z.FLOAT,!1,16,0);z.vertexAttribPointer(x,2,z.FLOAT,!1,16,8);z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,B);z.uniformMatrix4fv(u,!1,K.projectionMatrix.elements);C.activeTexture(z.TEXTURE0);z.uniform1i(m,0);N=L=0;(Q=J.fog)?(z.uniform3f(v,Q.color.r,Q.color.g,Q.color.b),Q instanceof THREE.Fog?(z.uniform1f(r,Q.near),z.uniform1f(w,Q.far),z.uniform1i(n,1),N=L=1):Q instanceof THREE.FogExp2&&(z.uniform1f(q,Q.density),z.uniform1i(n,2),N=L=2)):
(z.uniform1i(n,0),N=L=0);for(var Q=0,S=c.length;Q<S;Q++){var U=c[Q];U.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,U.matrixWorld);U.z=-U.modelViewMatrix.elements[14]}c.sort(d);for(var V=[],Q=0,S=c.length;Q<S;Q++){var U=c[Q],W=U.material;z.uniform1f(y,W.alphaTest);z.uniformMatrix4fv(t,!1,U.modelViewMatrix.elements);U.matrixWorld.decompose(I,G,M);V[0]=M.x;V[1]=M.y;U=0;J.fog&&W.fog&&(U=N);L!==U&&(z.uniform1i(n,U),L=U);null!==W.map?(z.uniform2f(g,W.map.offset.x,W.map.offset.y),z.uniform2f(f,
W.map.repeat.x,W.map.repeat.y)):(z.uniform2f(g,0,0),z.uniform2f(f,1,1));z.uniform1f(p,W.opacity);z.uniform3f(l,W.color.r,W.color.g,W.color.b);z.uniform1f(h,W.rotation);z.uniform2fv(k,V);C.setBlending(W.blending,W.blendEquation,W.blendSrc,W.blendDst);C.setDepthTest(W.depthTest);C.setDepthWrite(W.depthWrite);W.map&&W.map.image&&W.map.image.width?b.setTexture(W.map,0):b.setTexture(H,0);z.drawElements(z.TRIANGLES,6,z.UNSIGNED_SHORT,0)}C.enable(z.CULL_FACE);b.resetGLState()}}};
THREE.GeometryUtils={merge:function(b,c,d){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var g;c instanceof THREE.Mesh&&(c.matrixAutoUpdate&&c.updateMatrix(),g=c.matrix,c=c.geometry);b.merge(c,g,d)},center:function(b){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return b.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(b,c,d,g){var f=new THREE.ImageLoader;f.crossOrigin=this.crossOrigin;var h=new THREE.Texture(void 0,c);f.load(b,function(b){h.image=b;h.needsUpdate=!0;d&&d(h)},void 0,function(b){g&&g(b)});h.sourceFile=b;return h},loadTextureCube:function(b,c,d,g){var f=new THREE.ImageLoader;f.crossOrigin=this.crossOrigin;var h=new THREE.CubeTexture([],c),k=0;c=function(c){f.load(b[c],function(b){h.images[c]=b;k+=1;6===k&&(h.needsUpdate=!0,d&&d(h))},void 0,
g)};for(var l=0,m=b.length;l<m;++l)c(l);return h},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(b,c){var d=function(b){var c=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);return[b[0]/c,b[1]/c,b[2]/c]};c|=1;var g=b.width,f=b.height,h=document.createElement("canvas");
h.width=g;h.height=f;var k=h.getContext("2d");k.drawImage(b,0,0);for(var l=k.getImageData(0,0,g,f).data,m=k.createImageData(g,f),p=m.data,t=0;t<g;t++)for(var u=0;u<f;u++){var n=0>u-1?0:u-1,q=u+1>f-1?f-1:u+1,r=0>t-1?0:t-1,w=t+1>g-1?g-1:t+1,v=[],y=[0,0,l[4*(u*g+t)]/255*c];v.push([-1,0,l[4*(u*g+r)]/255*c]);v.push([-1,-1,l[4*(n*g+r)]/255*c]);v.push([0,-1,l[4*(n*g+t)]/255*c]);v.push([1,-1,l[4*(n*g+w)]/255*c]);v.push([1,0,l[4*(u*g+w)]/255*c]);v.push([1,1,l[4*(q*g+w)]/255*c]);v.push([0,1,l[4*(q*g+t)]/255*
c]);v.push([-1,1,l[4*(q*g+r)]/255*c]);n=[];r=v.length;for(q=0;q<r;q++){var w=v[q],A=v[(q+1)%r],w=[w[0]-y[0],w[1]-y[1],w[2]-y[2]],A=[A[0]-y[0],A[1]-y[1],A[2]-y[2]];n.push(d([w[1]*A[2]-w[2]*A[1],w[2]*A[0]-w[0]*A[2],w[0]*A[1]-w[1]*A[0]]))}v=[0,0,0];for(q=0;q<n.length;q++)v[0]+=n[q][0],v[1]+=n[q][1],v[2]+=n[q][2];v[0]/=n.length;v[1]/=n.length;v[2]/=n.length;y=4*(u*g+t);p[y]=(v[0]+1)/2*255|0;p[y+1]=(v[1]+1)/2*255|0;p[y+2]=255*v[2]|0;p[y+3]=255}k.putImageData(m,0,0);return h},generateDataTexture:function(b,
c,d){var g=b*c,f=new Uint8Array(3*g),h=Math.floor(255*d.r),k=Math.floor(255*d.g);d=Math.floor(255*d.b);for(var l=0;l<g;l++)f[3*l]=h,f[3*l+1]=k,f[3*l+2]=d;b=new THREE.DataTexture(f,b,c,THREE.RGBFormat);b.needsUpdate=!0;return b}};
THREE.SceneUtils={createMultiMaterialObject:function(b,c){for(var d=new THREE.Group,g=0,f=c.length;g<f;g++)d.add(new THREE.Mesh(b,c[g]));return d},detach:function(b,c,d){b.applyMatrix(c.matrixWorld);c.remove(b);d.add(b)},attach:function(b,c,d){var g=new THREE.Matrix4;g.getInverse(d.matrixWorld);b.applyMatrix(g);c.remove(b);d.add(b)}};
THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face.toLowerCase()][this.weight][this.style]}catch(b){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing.";}},loadFace:function(b){var c=b.familyName.toLowerCase();this.faces[c]=this.faces[c]||{};this.faces[c][b.cssFontWeight]=this.faces[c][b.cssFontWeight]||{};this.faces[c][b.cssFontWeight][b.cssFontStyle]=b;return this.faces[c][b.cssFontWeight][b.cssFontStyle]=
b},drawText:function(b){var c=this.getFace(),d=this.size/c.resolution,g=0,f=String(b).split(""),h=f.length,k=[];for(b=0;b<h;b++){var l=new THREE.Path,l=this.extractGlyphPoints(f[b],c,d,g,l),g=g+l.offset;k.push(l.path)}return{paths:k,offset:g/2}},extractGlyphPoints:function(b,c,d,g,f){var h=[],k,l,m,p,t,u,n,q,r,w,v,y=c.glyphs[b]||c.glyphs["?"];if(y){if(y.o)for(c=y._cachedOutline||(y._cachedOutline=y.o.split(" ")),p=c.length,b=0;b<p;)switch(m=c[b++],m){case "m":m=c[b++]*d+g;t=c[b++]*d;f.moveTo(m,t);
break;case "l":m=c[b++]*d+g;t=c[b++]*d;f.lineTo(m,t);break;case "q":m=c[b++]*d+g;t=c[b++]*d;q=c[b++]*d+g;r=c[b++]*d;f.quadraticCurveTo(q,r,m,t);if(k=h[h.length-1])for(u=k.x,n=k.y,k=1,l=this.divisions;k<=l;k++){var A=k/l;THREE.Shape.Utils.b2(A,u,q,m);THREE.Shape.Utils.b2(A,n,r,t)}break;case "b":if(m=c[b++]*d+g,t=c[b++]*d,q=c[b++]*d+g,r=c[b++]*d,w=c[b++]*d+g,v=c[b++]*d,f.bezierCurveTo(q,r,w,v,m,t),k=h[h.length-1])for(u=k.x,n=k.y,k=1,l=this.divisions;k<=l;k++)A=k/l,THREE.Shape.Utils.b3(A,u,q,w,m),THREE.Shape.Utils.b3(A,
n,r,v,t)}return{offset:y.ha*d,path:f}}}};
THREE.FontUtils.generateShapes=function(b,c){c=c||{};var d=void 0!==c.curveSegments?c.curveSegments:4,g=void 0!==c.font?c.font:"helvetiker",f=void 0!==c.weight?c.weight:"normal",h=void 0!==c.style?c.style:"normal";THREE.FontUtils.size=void 0!==c.size?c.size:100;THREE.FontUtils.divisions=d;THREE.FontUtils.face=g;THREE.FontUtils.weight=f;THREE.FontUtils.style=h;d=THREE.FontUtils.drawText(b).paths;g=[];f=0;for(h=d.length;f<h;f++)Array.prototype.push.apply(g,d[f].toShapes());return g};
(function(b){var c=function(b){for(var c=b.length,f=0,h=c-1,k=0;k<c;h=k++)f+=b[h].x*b[k].y-b[k].x*b[h].y;return.5*f};b.Triangulate=function(b,g){var f=b.length;if(3>f)return null;var h=[],k=[],l=[],m,p,t;if(0<c(b))for(p=0;p<f;p++)k[p]=p;else for(p=0;p<f;p++)k[p]=f-1-p;var u=2*f;for(p=f-1;2<f;){if(0>=u--){console.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()");break}m=p;f<=m&&(m=0);p=m+1;f<=p&&(p=0);t=p+1;f<=t&&(t=0);var n;a:{var q=void 0,r=void 0,w=void 0,
v=void 0,y=void 0,A=void 0,x=void 0,z=void 0,q=b[k[m]].x,r=b[k[m]].y,w=b[k[p]].x,v=b[k[p]].y,y=b[k[t]].x,A=b[k[t]].y;if(1E-10>(w-q)*(A-r)-(v-r)*(y-q))n=!1;else{var C=void 0,D=void 0,B=void 0,F=void 0,H=void 0,I=void 0,G=void 0,M=void 0,J=void 0,K=void 0,J=M=G=z=x=void 0,C=y-w,D=A-v,B=q-y,F=r-A,H=w-q,I=v-r;for(n=0;n<f;n++)if(x=b[k[n]].x,z=b[k[n]].y,!(x===q&&z===r||x===w&&z===v||x===y&&z===A)&&(G=x-q,M=z-r,J=x-w,K=z-v,x-=y,z-=A,J=C*K-D*J,G=H*M-I*G,M=B*z-F*x,-1E-10<=J&&-1E-10<=M&&-1E-10<=G)){n=!1;break a}n=
!0}}if(n){h.push([b[k[m]],b[k[p]],b[k[t]]]);l.push([k[m],k[p],k[t]]);m=p;for(t=p+1;t<f;m++,t++)k[m]=k[t];f--;u=2*f}}return g?l:h};b.Triangulate.area=c;return b})(THREE.FontUtils);THREE.typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};"undefined"!==typeof self&&(self._typeface_js=THREE.typeface_js);
THREE.Audio=function(b){THREE.Object3D.call(this);this.type="Audio";this.context=b.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.panner=this.context.createPanner();this.panner.connect(this.gain);this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1};THREE.Audio.prototype=Object.create(THREE.Object3D.prototype);
THREE.Audio.prototype.constructor=THREE.Audio;THREE.Audio.prototype.load=function(b){var c=this,d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="arraybuffer";d.onload=function(b){c.context.decodeAudioData(this.response,function(b){c.source.buffer=b;c.autoplay&&c.play()})};d.send();return this};
THREE.Audio.prototype.play=function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{var b=this.context.createBufferSource();b.buffer=this.source.buffer;b.loop=this.source.loop;b.onended=this.source.onended;b.start(0,this.startTime);b.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=b;this.connect()}};THREE.Audio.prototype.pause=function(){this.source.stop();this.startTime=this.context.currentTime};
THREE.Audio.prototype.stop=function(){this.source.stop();this.startTime=0};THREE.Audio.prototype.connect=function(){void 0!==this.filter?(this.source.connect(this.filter),this.filter.connect(this.panner)):this.source.connect(this.panner)};THREE.Audio.prototype.disconnect=function(){void 0!==this.filter?(this.source.disconnect(this.filter),this.filter.disconnect(this.panner)):this.source.disconnect(this.panner)};
THREE.Audio.prototype.setFilter=function(b){!0===this.isPlaying?(this.disconnect(),this.filter=b,this.connect()):this.filter=b};THREE.Audio.prototype.getFilter=function(){return this.filter};THREE.Audio.prototype.setPlaybackRate=function(b){this.playbackRate=b;!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate)};THREE.Audio.prototype.getPlaybackRate=function(){return this.playbackRate};THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1};
THREE.Audio.prototype.setLoop=function(b){this.source.loop=b};THREE.Audio.prototype.getLoop=function(){return this.source.loop};THREE.Audio.prototype.setRefDistance=function(b){this.panner.refDistance=b};THREE.Audio.prototype.getRefDistance=function(){return this.panner.refDistance};THREE.Audio.prototype.setRolloffFactor=function(b){this.panner.rolloffFactor=b};THREE.Audio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor};
THREE.Audio.prototype.setVolume=function(b){this.gain.gain.value=b};THREE.Audio.prototype.getVolume=function(){return this.gain.gain.value};THREE.Audio.prototype.updateMatrixWorld=function(){var b=new THREE.Vector3;return function(c){THREE.Object3D.prototype.updateMatrixWorld.call(this,c);b.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(b.x,b.y,b.z)}}();THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=new (window.AudioContext||window.webkitAudioContext)};
THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype);THREE.AudioListener.prototype.constructor=THREE.AudioListener;
THREE.AudioListener.prototype.updateMatrixWorld=function(){var b=new THREE.Vector3,c=new THREE.Quaternion,d=new THREE.Vector3,g=new THREE.Vector3;return function(f){THREE.Object3D.prototype.updateMatrixWorld.call(this,f);f=this.context.listener;var h=this.up;this.matrixWorld.decompose(b,c,d);g.set(0,0,-1).applyQuaternion(c);f.setPosition(b.x,b.y,b.z);f.setOrientation(g.x,g.y,g.z,h.x,h.y,h.z)}}();THREE.Curve=function(){};
THREE.Curve.prototype.getPoint=function(b){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(b){b=this.getUtoTmapping(b);return this.getPoint(b)};THREE.Curve.prototype.getPoints=function(b){b||(b=5);var c,d=[];for(c=0;c<=b;c++)d.push(this.getPoint(c/b));return d};THREE.Curve.prototype.getSpacedPoints=function(b){b||(b=5);var c,d=[];for(c=0;c<=b;c++)d.push(this.getPointAt(c/b));return d};
THREE.Curve.prototype.getLength=function(){var b=this.getLengths();return b[b.length-1]};THREE.Curve.prototype.getLengths=function(b){b||(b=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===b+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var c=[],d,g=this.getPoint(0),f,h=0;c.push(0);for(f=1;f<=b;f++)d=this.getPoint(f/b),h+=d.distanceTo(g),c.push(h),g=d;return this.cacheArcLengths=c};
THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.getLengths()};THREE.Curve.prototype.getUtoTmapping=function(b,c){var d=this.getLengths(),g=0,f=d.length,h;h=c?c:b*d[f-1];for(var k=0,l=f-1,m;k<=l;)if(g=Math.floor(k+(l-k)/2),m=d[g]-h,0>m)k=g+1;else if(0<m)l=g-1;else{l=g;break}g=l;if(d[g]===h)return g/(f-1);k=d[g];return(g+(h-k)/(d[g+1]-k))/(f-1)};THREE.Curve.prototype.getTangent=function(b){var c=b-1E-4;b+=1E-4;0>c&&(c=0);1<b&&(b=1);c=this.getPoint(c);return this.getPoint(b).clone().sub(c).normalize()};
THREE.Curve.prototype.getTangentAt=function(b){b=this.getUtoTmapping(b);return this.getTangent(b)};
THREE.Curve.Utils={tangentQuadraticBezier:function(b,c,d,g){return 2*(1-b)*(d-c)+2*b*(g-d)},tangentCubicBezier:function(b,c,d,g,f){return-3*c*(1-b)*(1-b)+3*d*(1-b)*(1-b)-6*b*d*(1-b)+6*b*g*(1-b)-3*b*b*g+3*b*b*f},tangentSpline:function(b,c,d,g,f){return 6*b*b-6*b+(3*b*b-4*b+1)+(-6*b*b+6*b)+(3*b*b-2*b)},interpolate:function(b,c,d,g,f){b=.5*(d-b);g=.5*(g-c);var h=f*f;return(2*c-2*d+b+g)*f*h+(-3*c+3*d-2*b-g)*h+b*f+c}};
THREE.Curve.create=function(b,c){b.prototype=Object.create(THREE.Curve.prototype);b.prototype.constructor=b;b.prototype.getPoint=c;return b};THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.constructor=THREE.CurvePath;THREE.CurvePath.prototype.add=function(b){this.curves.push(b)};THREE.CurvePath.prototype.checkConnection=function(){};
THREE.CurvePath.prototype.closePath=function(){var b=this.curves[0].getPoint(0),c=this.curves[this.curves.length-1].getPoint(1);b.equals(c)||this.curves.push(new THREE.LineCurve(c,b))};THREE.CurvePath.prototype.getPoint=function(b){var c=b*this.getLength(),d=this.getCurveLengths();for(b=0;b<d.length;){if(d[b]>=c)return c=d[b]-c,b=this.curves[b],c=1-c/b.getLength(),b.getPointAt(c);b++}return null};THREE.CurvePath.prototype.getLength=function(){var b=this.getCurveLengths();return b[b.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;var b=[],c=0,d,g=this.curves.length;for(d=0;d<g;d++)c+=this.curves[d].getLength(),b.push(c);return this.cacheLengths=b};
THREE.CurvePath.prototype.getBoundingBox=function(){var b=this.getPoints(),c,d,g,f,h,k;c=d=Number.NEGATIVE_INFINITY;f=h=Number.POSITIVE_INFINITY;var l,m,p,t,u=b[0]instanceof THREE.Vector3;t=u?new THREE.Vector3:new THREE.Vector2;m=0;for(p=b.length;m<p;m++)l=b[m],l.x>c?c=l.x:l.x<f&&(f=l.x),l.y>d?d=l.y:l.y<h&&(h=l.y),u&&(l.z>g?g=l.z:l.z<k&&(k=l.z)),t.add(l);b={minX:f,minY:h,maxX:c,maxY:d};u&&(b.maxZ=g,b.minZ=k);return b};
THREE.CurvePath.prototype.createPointsGeometry=function(b){b=this.getPoints(b,!0);return this.createGeometry(b)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(b){b=this.getSpacedPoints(b,!0);return this.createGeometry(b)};THREE.CurvePath.prototype.createGeometry=function(b){for(var c=new THREE.Geometry,d=0;d<b.length;d++)c.vertices.push(new THREE.Vector3(b[d].x,b[d].y,b[d].z||0));return c};THREE.CurvePath.prototype.addWrapPath=function(b){this.bends.push(b)};
THREE.CurvePath.prototype.getTransformedPoints=function(b,c){var d=this.getPoints(b),g,f;c||(c=this.bends);g=0;for(f=c.length;g<f;g++)d=this.getWrapPoints(d,c[g]);return d};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(b,c){var d=this.getSpacedPoints(b),g,f;c||(c=this.bends);g=0;for(f=c.length;g<f;g++)d=this.getWrapPoints(d,c[g]);return d};
THREE.CurvePath.prototype.getWrapPoints=function(b,c){var d=this.getBoundingBox(),g,f,h,k,l,m;g=0;for(f=b.length;g<f;g++)h=b[g],k=h.x,l=h.y,m=k/d.maxX,m=c.getUtoTmapping(m,k),k=c.getPoint(m),m=c.getTangent(m),m.set(-m.y,m.x).multiplyScalar(l),h.x=k.x+m.x,h.y=k.y+m.y;return b};THREE.Path=function(b){THREE.CurvePath.call(this);this.actions=[];b&&this.fromPoints(b)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.Path.prototype.constructor=THREE.Path;
THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(b){this.moveTo(b[0].x,b[0].y);for(var c=1,d=b.length;c<d;c++)this.lineTo(b[c].x,b[c].y)};THREE.Path.prototype.moveTo=function(b,c){var d=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:d})};
THREE.Path.prototype.lineTo=function(b,c){var d=Array.prototype.slice.call(arguments),g=this.actions[this.actions.length-1].args,g=new THREE.LineCurve(new THREE.Vector2(g[g.length-2],g[g.length-1]),new THREE.Vector2(b,c));this.curves.push(g);this.actions.push({action:THREE.PathActions.LINE_TO,args:d})};
THREE.Path.prototype.quadraticCurveTo=function(b,c,d,g){var f=Array.prototype.slice.call(arguments),h=this.actions[this.actions.length-1].args,h=new THREE.QuadraticBezierCurve(new THREE.Vector2(h[h.length-2],h[h.length-1]),new THREE.Vector2(b,c),new THREE.Vector2(d,g));this.curves.push(h);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:f})};
THREE.Path.prototype.bezierCurveTo=function(b,c,d,g,f,h){var k=Array.prototype.slice.call(arguments),l=this.actions[this.actions.length-1].args,l=new THREE.CubicBezierCurve(new THREE.Vector2(l[l.length-2],l[l.length-1]),new THREE.Vector2(b,c),new THREE.Vector2(d,g),new THREE.Vector2(f,h));this.curves.push(l);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:k})};
THREE.Path.prototype.splineThru=function(b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,d=[new THREE.Vector2(d[d.length-2],d[d.length-1])];Array.prototype.push.apply(d,b);d=new THREE.SplineCurve(d);this.curves.push(d);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:c})};THREE.Path.prototype.arc=function(b,c,d,g,f,h){var k=this.actions[this.actions.length-1].args;this.absarc(b+k[k.length-2],c+k[k.length-1],d,g,f,h)};
THREE.Path.prototype.absarc=function(b,c,d,g,f,h){this.absellipse(b,c,d,d,g,f,h)};THREE.Path.prototype.ellipse=function(b,c,d,g,f,h,k,l){var m=this.actions[this.actions.length-1].args;this.absellipse(b+m[m.length-2],c+m[m.length-1],d,g,f,h,k,l)};THREE.Path.prototype.absellipse=function(b,c,d,g,f,h,k,l){var m=[b,c,d,g,f,h,k,l||0];b=new THREE.EllipseCurve(b,c,d,g,f,h,k,l);this.curves.push(b);b=b.getPoint(1);m.push(b.x);m.push(b.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:m})};
THREE.Path.prototype.getSpacedPoints=function(b,c){b||(b=40);for(var d=[],g=0;g<b;g++)d.push(this.getPoint(g/b));return d};
THREE.Path.prototype.getPoints=function(b,c){if(this.useSpacedPoints)return this.getSpacedPoints(b,c);b=b||12;var d=[],g,f,h,k,l,m,p,t,u,n,q,r,w;g=0;for(f=this.actions.length;g<f;g++)switch(h=this.actions[g],k=h.action,h=h.args,k){case THREE.PathActions.MOVE_TO:d.push(new THREE.Vector2(h[0],h[1]));break;case THREE.PathActions.LINE_TO:d.push(new THREE.Vector2(h[0],h[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:l=h[2];m=h[3];u=h[0];n=h[1];0<d.length?(k=d[d.length-1],q=k.x,r=k.y):(k=this.actions[g-
1].args,q=k[k.length-2],r=k[k.length-1]);for(h=1;h<=b;h++)w=h/b,k=THREE.Shape.Utils.b2(w,q,u,l),w=THREE.Shape.Utils.b2(w,r,n,m),d.push(new THREE.Vector2(k,w));break;case THREE.PathActions.BEZIER_CURVE_TO:l=h[4];m=h[5];u=h[0];n=h[1];p=h[2];t=h[3];0<d.length?(k=d[d.length-1],q=k.x,r=k.y):(k=this.actions[g-1].args,q=k[k.length-2],r=k[k.length-1]);for(h=1;h<=b;h++)w=h/b,k=THREE.Shape.Utils.b3(w,q,u,p,l),w=THREE.Shape.Utils.b3(w,r,n,t,m),d.push(new THREE.Vector2(k,w));break;case THREE.PathActions.CSPLINE_THRU:k=
this.actions[g-1].args;w=[new THREE.Vector2(k[k.length-2],k[k.length-1])];k=b*h[0].length;w=w.concat(h[0]);w=new THREE.SplineCurve(w);for(h=1;h<=k;h++)d.push(w.getPointAt(h/k));break;case THREE.PathActions.ARC:l=h[0];m=h[1];n=h[2];p=h[3];k=h[4];u=!!h[5];q=k-p;r=2*b;for(h=1;h<=r;h++)w=h/r,u||(w=1-w),w=p+w*q,k=l+n*Math.cos(w),w=m+n*Math.sin(w),d.push(new THREE.Vector2(k,w));break;case THREE.PathActions.ELLIPSE:l=h[0];m=h[1];n=h[2];t=h[3];p=h[4];k=h[5];u=!!h[6];var v=h[7];q=k-p;r=2*b;var y,A;0!==v&&
(y=Math.cos(v),A=Math.sin(v));for(h=1;h<=r;h++){w=h/r;u||(w=1-w);w=p+w*q;k=l+n*Math.cos(w);w=m+t*Math.sin(w);if(0!==v){var x=k;k=(x-l)*y-(w-m)*A+l;w=(x-l)*A+(w-m)*y+m}d.push(new THREE.Vector2(k,w))}}g=d[d.length-1];1E-10>Math.abs(g.x-d[0].x)&&1E-10>Math.abs(g.y-d[0].y)&&d.splice(d.length-1,1);c&&d.push(d[0]);return d};
THREE.Path.prototype.toShapes=function(b,c){function d(b){for(var c=[],f=0,h=b.length;f<h;f++){var g=b[f],d=new THREE.Shape;d.actions=g.actions;d.curves=g.curves;c.push(d)}return c}function g(b,c){for(var f=c.length,h=!1,g=f-1,d=0;d<f;g=d++){var k=c[g],l=c[d],m=l.x-k.x,n=l.y-k.y;if(1E-10<Math.abs(n)){if(0>n&&(k=c[d],m=-m,l=c[g],n=-n),!(b.y<k.y||b.y>l.y))if(b.y===k.y){if(b.x===k.x)return!0}else{g=n*(b.x-k.x)-m*(b.y-k.y);if(0===g)return!0;0>g||(h=!h)}}else if(b.y===k.y&&(l.x<=b.x&&b.x<=k.x||k.x<=b.x&&
b.x<=l.x))return!0}return h}var f=function(b){var c,f,h,g,d=[],k=new THREE.Path;c=0;for(f=b.length;c<f;c++)h=b[c],g=h.args,h=h.action,h===THREE.PathActions.MOVE_TO&&0!==k.actions.length&&(d.push(k),k=new THREE.Path),k[h].apply(k,g);0!==k.actions.length&&d.push(k);return d}(this.actions);if(0===f.length)return[];if(!0===c)return d(f);var h,k,l,m=[];if(1===f.length)return k=f[0],l=new THREE.Shape,l.actions=k.actions,l.curves=k.curves,m.push(l),m;var p=!THREE.Shape.Utils.isClockWise(f[0].getPoints()),
p=b?!p:p;l=[];var t=[],u=[],n=0,q;t[n]=void 0;u[n]=[];var r,w;r=0;for(w=f.length;r<w;r++)k=f[r],q=k.getPoints(),h=THREE.Shape.Utils.isClockWise(q),(h=b?!h:h)?(!p&&t[n]&&n++,t[n]={s:new THREE.Shape,p:q},t[n].s.actions=k.actions,t[n].s.curves=k.curves,p&&n++,u[n]=[]):u[n].push({h:k,p:q[0]});if(!t[0])return d(f);if(1<t.length){r=!1;w=[];k=0;for(f=t.length;k<f;k++)l[k]=[];k=0;for(f=t.length;k<f;k++)for(h=u[k],p=0;p<h.length;p++){n=h[p];q=!0;for(var v=0;v<t.length;v++)g(n.p,t[v].p)&&(k!==v&&w.push({froms:k,
tos:v,hole:p}),q?(q=!1,l[v].push(n)):r=!0);q&&l[k].push(n)}0<w.length&&(r||(u=l))}r=0;for(w=t.length;r<w;r++)for(l=t[r].s,m.push(l),k=u[r],f=0,h=k.length;f<h;f++)l.holes.push(k[f].h);return m};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.constructor=THREE.Shape;THREE.Shape.prototype.extrude=function(b){return new THREE.ExtrudeGeometry(this,b)};
THREE.Shape.prototype.makeGeometry=function(b){return new THREE.ShapeGeometry(this,b)};THREE.Shape.prototype.getPointsHoles=function(b){var c,d=this.holes.length,g=[];for(c=0;c<d;c++)g[c]=this.holes[c].getTransformedPoints(b,this.bends);return g};THREE.Shape.prototype.getSpacedPointsHoles=function(b){var c,d=this.holes.length,g=[];for(c=0;c<d;c++)g[c]=this.holes[c].getTransformedSpacedPoints(b,this.bends);return g};
THREE.Shape.prototype.extractAllPoints=function(b){return{shape:this.getTransformedPoints(b),holes:this.getPointsHoles(b)}};THREE.Shape.prototype.extractPoints=function(b){return this.useSpacedPoints?this.extractAllSpacedPoints(b):this.extractAllPoints(b)};THREE.Shape.prototype.extractAllSpacedPoints=function(b){return{shape:this.getTransformedSpacedPoints(b),holes:this.getSpacedPointsHoles(b)}};
THREE.Shape.Utils={triangulateShape:function(b,c){function d(b,c,f){return b.x!==c.x?b.x<c.x?b.x<=f.x&&f.x<=c.x:c.x<=f.x&&f.x<=b.x:b.y<c.y?b.y<=f.y&&f.y<=c.y:c.y<=f.y&&f.y<=b.y}function g(b,c,f,h,g){var k=c.x-b.x,l=c.y-b.y,m=h.x-f.x,p=h.y-f.y,u=b.x-f.x,t=b.y-f.y,B=l*m-k*p,F=l*u-k*t;if(1E-10<Math.abs(B)){if(0<B){if(0>F||F>B)return[];m=p*u-m*t;if(0>m||m>B)return[]}else{if(0<F||F<B)return[];m=p*u-m*t;if(0<m||m<B)return[]}if(0===m)return!g||0!==F&&F!==B?[b]:[];if(m===B)return!g||0!==F&&F!==B?[c]:[];if(0===
F)return[f];if(F===B)return[h];g=m/B;return[{x:b.x+g*k,y:b.y+g*l}]}if(0!==F||p*u!==m*t)return[];l=0===k&&0===l;m=0===m&&0===p;if(l&&m)return b.x!==f.x||b.y!==f.y?[]:[b];if(l)return d(f,h,b)?[b]:[];if(m)return d(b,c,f)?[f]:[];0!==k?(b.x<c.x?(k=b,m=b.x,l=c,b=c.x):(k=c,m=c.x,l=b,b=b.x),f.x<h.x?(c=f,B=f.x,p=h,f=h.x):(c=h,B=h.x,p=f,f=f.x)):(b.y<c.y?(k=b,m=b.y,l=c,b=c.y):(k=c,m=c.y,l=b,b=b.y),f.y<h.y?(c=f,B=f.y,p=h,f=h.y):(c=h,B=h.y,p=f,f=f.y));return m<=B?b<B?[]:b===B?g?[]:[c]:b<=f?[c,l]:[c,p]:m>f?[]:
m===f?g?[]:[k]:b<=f?[k,l]:[k,p]}function f(b,c,f,h){var g=c.x-b.x,d=c.y-b.y;c=f.x-b.x;f=f.y-b.y;var k=h.x-b.x;h=h.y-b.y;b=g*f-d*c;g=g*h-d*k;return 1E-10<Math.abs(b)?(c=k*f-h*c,0<b?0<=g&&0<=c:0<=g||0<=c):0<g}var h,k,l,m,p,t={};l=b.concat();h=0;for(k=c.length;h<k;h++)Array.prototype.push.apply(l,c[h]);h=0;for(k=l.length;h<k;h++)p=l[h].x+":"+l[h].y,void 0!==t[p]&&console.warn("THREE.Shape: Duplicate point",p),t[p]=h;h=function(b,c){function h(b,c){var g=l.length-1,d=b-1;0>d&&(d=g);var k=b+1;k>g&&(k=
0);g=f(l[b],l[d],l[k],m[c]);if(!g)return!1;g=m.length-1;d=c-1;0>d&&(d=g);k=c+1;k>g&&(k=0);return f(m[c],m[d],m[k],l[b])?!0:!1}function d(b,c){var f,h;for(f=0;f<l.length;f++)if(h=f+1,h%=l.length,h=g(b,c,l[f],l[h],!0),0<h.length)return!0;return!1}function k(b,f){var h,d,l,m;for(h=0;h<p.length;h++)for(d=c[p[h]],l=0;l<d.length;l++)if(m=l+1,m%=d.length,m=g(b,f,d[l],d[m],!0),0<m.length)return!0;return!1}var l=b.concat(),m,p=[],u,t,D,B,F,H=[],I,G,M,J=0;for(u=c.length;J<u;J++)p.push(J);I=0;for(var K=2*p.length;0<
p.length;){K--;if(0>K){console.log("Infinite Loop! Holes left:"+p.length+", Probably Hole outside Shape!");break}for(t=I;t<l.length;t++){D=l[t];u=-1;for(J=0;J<p.length;J++)if(B=p[J],F=D.x+":"+D.y+":"+B,void 0===H[F]){m=c[B];for(G=0;G<m.length;G++)if(B=m[G],h(t,G)&&!d(D,B)&&!k(D,B)){u=G;p.splice(J,1);I=l.slice(0,t+1);B=l.slice(t);G=m.slice(u);M=m.slice(0,u+1);l=I.concat(G).concat(M).concat(B);I=t;break}if(0<=u)break;H[F]=!0}if(0<=u)break}}return l}(b,c);var u=THREE.FontUtils.Triangulate(h,!1);h=0;
for(k=u.length;h<k;h++)for(m=u[h],l=0;3>l;l++)p=m[l].x+":"+m[l].y,p=t[p],void 0!==p&&(m[l]=p);return u.concat()},isClockWise:function(b){return 0>THREE.FontUtils.Triangulate.area(b)},b2p0:function(b,c){var d=1-b;return d*d*c},b2p1:function(b,c){return 2*(1-b)*b*c},b2p2:function(b,c){return b*b*c},b2:function(b,c,d,g){return this.b2p0(b,c)+this.b2p1(b,d)+this.b2p2(b,g)},b3p0:function(b,c){var d=1-b;return d*d*d*c},b3p1:function(b,c){var d=1-b;return 3*d*d*b*c},b3p2:function(b,c){return 3*(1-b)*b*b*
c},b3p3:function(b,c){return b*b*b*c},b3:function(b,c,d,g,f){return this.b3p0(b,c)+this.b3p1(b,d)+this.b3p2(b,g)+this.b3p3(b,f)}};THREE.LineCurve=function(b,c){this.v1=b;this.v2=c};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.constructor=THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(b){var c=this.v2.clone().sub(this.v1);c.multiplyScalar(b).add(this.v1);return c};THREE.LineCurve.prototype.getPointAt=function(b){return this.getPoint(b)};
THREE.LineCurve.prototype.getTangent=function(b){return this.v2.clone().sub(this.v1).normalize()};THREE.QuadraticBezierCurve=function(b,c,d){this.v0=b;this.v1=c;this.v2=d};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve;
THREE.QuadraticBezierCurve.prototype.getPoint=function(b){var c=new THREE.Vector2;c.x=THREE.Shape.Utils.b2(b,this.v0.x,this.v1.x,this.v2.x);c.y=THREE.Shape.Utils.b2(b,this.v0.y,this.v1.y,this.v2.y);return c};THREE.QuadraticBezierCurve.prototype.getTangent=function(b){var c=new THREE.Vector2;c.x=THREE.Curve.Utils.tangentQuadraticBezier(b,this.v0.x,this.v1.x,this.v2.x);c.y=THREE.Curve.Utils.tangentQuadraticBezier(b,this.v0.y,this.v1.y,this.v2.y);return c.normalize()};
THREE.CubicBezierCurve=function(b,c,d,g){this.v0=b;this.v1=c;this.v2=d;this.v3=g};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;THREE.CubicBezierCurve.prototype.getPoint=function(b){var c;c=THREE.Shape.Utils.b3(b,this.v0.x,this.v1.x,this.v2.x,this.v3.x);b=THREE.Shape.Utils.b3(b,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(c,b)};
THREE.CubicBezierCurve.prototype.getTangent=function(b){var c;c=THREE.Curve.Utils.tangentCubicBezier(b,this.v0.x,this.v1.x,this.v2.x,this.v3.x);b=THREE.Curve.Utils.tangentCubicBezier(b,this.v0.y,this.v1.y,this.v2.y,this.v3.y);c=new THREE.Vector2(c,b);c.normalize();return c};THREE.SplineCurve=function(b){this.points=void 0==b?[]:b};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;
THREE.SplineCurve.prototype.getPoint=function(b){var c=this.points;b*=c.length-1;var d=Math.floor(b);b-=d;var g=c[0===d?d:d-1],f=c[d],h=c[d>c.length-2?c.length-1:d+1],c=c[d>c.length-3?c.length-1:d+2],d=new THREE.Vector2;d.x=THREE.Curve.Utils.interpolate(g.x,f.x,h.x,c.x,b);d.y=THREE.Curve.Utils.interpolate(g.y,f.y,h.y,c.y,b);return d};
THREE.EllipseCurve=function(b,c,d,g,f,h,k,l){this.aX=b;this.aY=c;this.xRadius=d;this.yRadius=g;this.aStartAngle=f;this.aEndAngle=h;this.aClockwise=k;this.aRotation=l||0};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;
THREE.EllipseCurve.prototype.getPoint=function(b){var c=this.aEndAngle-this.aStartAngle;0>c&&(c+=2*Math.PI);c>2*Math.PI&&(c-=2*Math.PI);c=!0===this.aClockwise?this.aEndAngle+(1-b)*(2*Math.PI-c):this.aStartAngle+b*c;b=this.aX+this.xRadius*Math.cos(c);var d=this.aY+this.yRadius*Math.sin(c);if(0!==this.aRotation){var c=Math.cos(this.aRotation),g=Math.sin(this.aRotation),f=b;b=(f-this.aX)*c-(d-this.aY)*g+this.aX;d=(f-this.aX)*g+(d-this.aY)*c+this.aY}return new THREE.Vector2(b,d)};
THREE.ArcCurve=function(b,c,d,g,f,h){THREE.EllipseCurve.call(this,b,c,d,d,g,f,h)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;THREE.LineCurve3=THREE.Curve.create(function(b,c){this.v1=b;this.v2=c},function(b){var c=new THREE.Vector3;c.subVectors(this.v2,this.v1);c.multiplyScalar(b);c.add(this.v1);return c});
THREE.QuadraticBezierCurve3=THREE.Curve.create(function(b,c,d){this.v0=b;this.v1=c;this.v2=d},function(b){var c=new THREE.Vector3;c.x=THREE.Shape.Utils.b2(b,this.v0.x,this.v1.x,this.v2.x);c.y=THREE.Shape.Utils.b2(b,this.v0.y,this.v1.y,this.v2.y);c.z=THREE.Shape.Utils.b2(b,this.v0.z,this.v1.z,this.v2.z);return c});
THREE.CubicBezierCurve3=THREE.Curve.create(function(b,c,d,g){this.v0=b;this.v1=c;this.v2=d;this.v3=g},function(b){var c=new THREE.Vector3;c.x=THREE.Shape.Utils.b3(b,this.v0.x,this.v1.x,this.v2.x,this.v3.x);c.y=THREE.Shape.Utils.b3(b,this.v0.y,this.v1.y,this.v2.y,this.v3.y);c.z=THREE.Shape.Utils.b3(b,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return c});
THREE.SplineCurve3=THREE.Curve.create(function(b){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==b?[]:b},function(b){var c=this.points;b*=c.length-1;var d=Math.floor(b);b-=d;var g=c[0==d?d:d-1],f=c[d],h=c[d>c.length-2?c.length-1:d+1],c=c[d>c.length-3?c.length-1:d+2],d=new THREE.Vector3;d.x=THREE.Curve.Utils.interpolate(g.x,f.x,h.x,c.x,b);d.y=THREE.Curve.Utils.interpolate(g.y,f.y,h.y,c.y,b);d.z=THREE.Curve.Utils.interpolate(g.z,f.z,h.z,
c.z,b);return d});
THREE.CatmullRomCurve3=function(){function b(){}var c=new THREE.Vector3,d=new b,g=new b,f=new b;b.prototype.init=function(b,c,f,g){this.c0=b;this.c1=f;this.c2=-3*b+3*c-2*f-g;this.c3=2*b-2*c+f+g};b.prototype.initNonuniformCatmullRom=function(b,c,f,g,d,t,u){this.init(c,f,((c-b)/d-(f-b)/(d+t)+(f-c)/t)*t,((f-c)/t-(g-c)/(t+u)+(g-f)/u)*t)};b.prototype.initCatmullRom=function(b,c,f,g,d){this.init(c,f,d*(f-b),d*(g-c))};b.prototype.calc=function(b){var c=b*b;return this.c0+this.c1*b+this.c2*c+this.c3*c*b};
return THREE.Curve.create(function(b){this.points=b||[]},function(b){var k=this.points,l,m;m=k.length;2>m&&console.log("duh, you need at least 2 points");b*=m-1;l=Math.floor(b);b-=l;0===b&&l===m-1&&(l=m-2,b=1);var p,t,u;0===l?(c.subVectors(k[0],k[1]).add(k[0]),p=c):p=k[l-1];t=k[l];u=k[l+1];l+2<m?k=k[l+2]:(c.subVectors(k[m-1],k[m-2]).add(k[m-2]),k=c);if(void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var n="chordal"===this.type?.5:.25;m=Math.pow(p.distanceToSquared(t),n);l=Math.pow(t.distanceToSquared(u),
n);n=Math.pow(u.distanceToSquared(k),n);1E-4>l&&(l=1);1E-4>m&&(m=l);1E-4>n&&(n=l);d.initNonuniformCatmullRom(p.x,t.x,u.x,k.x,m,l,n);g.initNonuniformCatmullRom(p.y,t.y,u.y,k.y,m,l,n);f.initNonuniformCatmullRom(p.z,t.z,u.z,k.z,m,l,n)}else"catmullrom"===this.type&&(m=void 0!==this.tension?this.tension:.5,d.initCatmullRom(p.x,t.x,u.x,k.x,m),g.initCatmullRom(p.y,t.y,u.y,k.y,m),f.initCatmullRom(p.z,t.z,u.z,k.z,m));return new THREE.Vector3(d.calc(b),g.calc(b),f.calc(b))})}();
THREE.ClosedSplineCurve3=THREE.Curve.create(function(b){this.points=void 0==b?[]:b},function(b){var c=this.points;b*=c.length-0;var d=Math.floor(b);b-=d;var d=d+(0<d?0:(Math.floor(Math.abs(d)/c.length)+1)*c.length),g=c[(d-1)%c.length],f=c[d%c.length],h=c[(d+1)%c.length],c=c[(d+2)%c.length],d=new THREE.Vector3;d.x=THREE.Curve.Utils.interpolate(g.x,f.x,h.x,c.x,b);d.y=THREE.Curve.Utils.interpolate(g.y,f.y,h.y,c.y,b);d.z=THREE.Curve.Utils.interpolate(g.z,f.z,h.z,c.z,b);return d});
THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(b){if(!0===b.initialized)return b;for(var c=0;c<b.hierarchy.length;c++){for(var d=0;d<b.hierarchy[c].keys.length;d++)if(0>b.hierarchy[c].keys[d].time&&(b.hierarchy[c].keys[d].time=
0),void 0!==b.hierarchy[c].keys[d].rot&&!(b.hierarchy[c].keys[d].rot instanceof THREE.Quaternion)){var g=b.hierarchy[c].keys[d].rot;b.hierarchy[c].keys[d].rot=(new THREE.Quaternion).fromArray(g)}if(b.hierarchy[c].keys.length&&void 0!==b.hierarchy[c].keys[0].morphTargets){g={};for(d=0;d<b.hierarchy[c].keys.length;d++)for(var f=0;f<b.hierarchy[c].keys[d].morphTargets.length;f++){var h=b.hierarchy[c].keys[d].morphTargets[f];g[h]=-1}b.hierarchy[c].usedMorphTargets=g;for(d=0;d<b.hierarchy[c].keys.length;d++){var k=
{};for(h in g){for(f=0;f<b.hierarchy[c].keys[d].morphTargets.length;f++)if(b.hierarchy[c].keys[d].morphTargets[f]===h){k[h]=b.hierarchy[c].keys[d].morphTargetsInfluences[f];break}f===b.hierarchy[c].keys[d].morphTargets.length&&(k[h]=0)}b.hierarchy[c].keys[d].morphTargetsInfluences=k}}for(d=1;d<b.hierarchy[c].keys.length;d++)b.hierarchy[c].keys[d].time===b.hierarchy[c].keys[d-1].time&&(b.hierarchy[c].keys.splice(d,1),d--);for(d=0;d<b.hierarchy[c].keys.length;d++)b.hierarchy[c].keys[d].index=d}b.initialized=
!0;return b},parse:function(b){var c=function(b,h){h.push(b);for(var g=0;g<b.children.length;g++)c(b.children[g],h)},d=[];if(b instanceof THREE.SkinnedMesh)for(var g=0;g<b.skeleton.bones.length;g++)d.push(b.skeleton.bones[g]);else c(b,d);return d},play:function(b){-1===this.animations.indexOf(b)&&this.animations.push(b)},stop:function(b){b=this.animations.indexOf(b);-1!==b&&this.animations.splice(b,1)},update:function(b){for(var c=0;c<this.animations.length;c++)this.animations[c].resetBlendWeights();
for(c=0;c<this.animations.length;c++)this.animations[c].update(b)}};THREE.Animation=function(b,c){this.root=b;this.data=THREE.AnimationHandler.init(c);this.hierarchy=THREE.AnimationHandler.parse(b);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=!0;this.weight=0;this.interpolationType=THREE.AnimationHandler.LINEAR};
THREE.Animation.prototype={constructor:THREE.Animation,keyTypes:["pos","rot","scl"],play:function(b,c){this.currentTime=void 0!==b?b:0;this.weight=void 0!==c?c:1;this.isPlaying=!0;this.reset();THREE.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1;THREE.AnimationHandler.stop(this)},reset:function(){for(var b=0,c=this.hierarchy.length;b<c;b++){var d=this.hierarchy[b];void 0===d.animationCache&&(d.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}});
var g=this.data.name,f=d.animationCache.animations,h=f[g];void 0===h&&(h={prevKey:{pos:0,rot:0,scl:0},nextKey:{pos:0,rot:0,scl:0},originalMatrix:d.matrix},f[g]=h);for(d=0;3>d;d++){for(var g=this.keyTypes[d],f=this.data.hierarchy[b].keys[0],k=this.getNextKeyWith(g,b,1);k.time<this.currentTime&&k.index>f.index;)f=k,k=this.getNextKeyWith(g,b,k.index+1);h.prevKey[g]=f;h.nextKey[g]=k}}},resetBlendWeights:function(){for(var b=0,c=this.hierarchy.length;b<c;b++){var d=this.hierarchy[b].animationCache;void 0!==
d&&(d=d.blending,d.positionWeight=0,d.quaternionWeight=0,d.scaleWeight=0)}},update:function(){var b=[],c=new THREE.Vector3,d=new THREE.Vector3,g=new THREE.Quaternion,f=function(b,c){var f=[],g=[],d,u,n,q,r,w;d=(b.length-1)*c;u=Math.floor(d);d-=u;f[0]=0===u?u:u-1;f[1]=u;f[2]=u>b.length-2?u:u+1;f[3]=u>b.length-3?u:u+2;u=b[f[0]];q=b[f[1]];r=b[f[2]];w=b[f[3]];f=d*d;n=d*f;g[0]=h(u[0],q[0],r[0],w[0],d,f,n);g[1]=h(u[1],q[1],r[1],w[1],d,f,n);g[2]=h(u[2],q[2],r[2],w[2],d,f,n);return g},h=function(b,c,f,h,
g,d,n){b=.5*(f-b);h=.5*(h-c);return(2*(c-f)+b+h)*n+(-3*(c-f)-2*b-h)*d+b*g+c};return function(h){if(!1!==this.isPlaying&&(this.currentTime+=h*this.timeScale,0!==this.weight)){h=this.data.length;if(this.currentTime>h||0>this.currentTime)this.loop?(this.currentTime%=h,0>this.currentTime&&(this.currentTime+=h),this.reset()):this.stop();h=0;for(var l=this.hierarchy.length;h<l;h++)for(var m=this.hierarchy[h],p=m.animationCache.animations[this.data.name],t=m.animationCache.blending,u=0;3>u;u++){var n=this.keyTypes[u],
q=p.prevKey[n],r=p.nextKey[n];if(0<this.timeScale&&r.time<=this.currentTime||0>this.timeScale&&q.time>=this.currentTime){q=this.data.hierarchy[h].keys[0];for(r=this.getNextKeyWith(n,h,1);r.time<this.currentTime&&r.index>q.index;)q=r,r=this.getNextKeyWith(n,h,r.index+1);p.prevKey[n]=q;p.nextKey[n]=r}var w=(this.currentTime-q.time)/(r.time-q.time),v=q[n],y=r[n];0>w&&(w=0);1<w&&(w=1);if("pos"===n)if(this.interpolationType===THREE.AnimationHandler.LINEAR)d.x=v[0]+(y[0]-v[0])*w,d.y=v[1]+(y[1]-v[1])*w,
d.z=v[2]+(y[2]-v[2])*w,q=this.weight/(this.weight+t.positionWeight),m.position.lerp(d,q),t.positionWeight+=this.weight;else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)b[0]=this.getPrevKeyWith("pos",h,q.index-1).pos,b[1]=v,b[2]=y,b[3]=this.getNextKeyWith("pos",h,r.index+1).pos,w=.33*w+.33,r=f(b,w),q=this.weight/(this.weight+t.positionWeight),t.positionWeight+=this.weight,n=m.position,n.x+=(r[0]-n.x)*q,n.y+=(r[1]-
n.y)*q,n.z+=(r[2]-n.z)*q,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(w=f(b,1.01*w),c.set(w[0],w[1],w[2]),c.sub(n),c.y=0,c.normalize(),w=Math.atan2(c.x,c.z),m.rotation.set(0,w,0))}else"rot"===n?(THREE.Quaternion.slerp(v,y,g,w),0===t.quaternionWeight?(m.quaternion.copy(g),t.quaternionWeight=this.weight):(q=this.weight/(this.weight+t.quaternionWeight),THREE.Quaternion.slerp(m.quaternion,g,m.quaternion,q),t.quaternionWeight+=this.weight)):"scl"===n&&(d.x=v[0]+(y[0]-v[0])*w,d.y=
v[1]+(y[1]-v[1])*w,d.z=v[2]+(y[2]-v[2])*w,q=this.weight/(this.weight+t.scaleWeight),m.scale.lerp(d,q),t.scaleWeight+=this.weight)}return!0}}}(),getNextKeyWith:function(b,c,d){var g=this.data.hierarchy[c].keys;for(d=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?d<g.length-1?d:g.length-1:d%g.length;d<g.length;d++)if(void 0!==g[d][b])return g[d];return this.data.hierarchy[c].keys[0]},getPrevKeyWith:function(b,c,d){var g=
this.data.hierarchy[c].keys;for(d=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<d?d:0:0<=d?d:d+g.length;0<=d;d--)if(void 0!==g[d][b])return g[d];return this.data.hierarchy[c].keys[g.length-1]}};
THREE.KeyFrameAnimation=function(b){this.root=b.node;this.data=THREE.AnimationHandler.init(b);this.hierarchy=THREE.AnimationHandler.parse(this.root);this.currentTime=0;this.timeScale=.001;this.isPlaying=!1;this.loop=this.isPaused=!0;b=0;for(var c=this.hierarchy.length;b<c;b++){var d=this.data.hierarchy[b].sids,g=this.hierarchy[b];if(this.data.hierarchy[b].keys.length&&d){for(var f=0;f<d.length;f++){var h=d[f],k=this.getNextKeyWith(h,b,0);k&&k.apply(h)}g.matrixAutoUpdate=!1;this.data.hierarchy[b].node.updateMatrix();
g.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype={constructor:THREE.KeyFrameAnimation,play:function(b){this.currentTime=void 0!==b?b:0;if(!1===this.isPlaying){this.isPlaying=!0;var c=this.hierarchy.length,d,g;for(b=0;b<c;b++)d=this.hierarchy[b],g=this.data.hierarchy[b],void 0===g.animationCache&&(g.animationCache={},g.animationCache.prevKey=null,g.animationCache.nextKey=null,g.animationCache.originalMatrix=d.matrix),d=this.data.hierarchy[b].keys,d.length&&(g.animationCache.prevKey=d[0],g.animationCache.nextKey=
d[1],this.startTime=Math.min(d[0].time,this.startTime),this.endTime=Math.max(d[d.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.play(this)},stop:function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.stop(this);for(var b=0;b<this.data.hierarchy.length;b++){var c=this.hierarchy[b],d=this.data.hierarchy[b];if(void 0!==d.animationCache){var g=d.animationCache.originalMatrix;g.copy(c.matrix);c.matrix=g;delete d.animationCache}}},update:function(b){if(!1!==
this.isPlaying){this.currentTime+=b*this.timeScale;b=this.data.length;!0===this.loop&&this.currentTime>b&&(this.currentTime%=b);this.currentTime=Math.min(this.currentTime,b);b=0;for(var c=this.hierarchy.length;b<c;b++){var d=this.hierarchy[b],g=this.data.hierarchy[b],f=g.keys,g=g.animationCache;if(f.length){var h=g.prevKey,k=g.nextKey;if(k.time<=this.currentTime){for(;k.time<this.currentTime&&k.index>h.index;)h=k,k=f[h.index+1];g.prevKey=h;g.nextKey=k}k.time>=this.currentTime?h.interpolate(k,this.currentTime):
h.interpolate(k,k.time);this.data.hierarchy[b].node.updateMatrix();d.matrixWorldNeedsUpdate=!0}}}},getNextKeyWith:function(b,c,d){c=this.data.hierarchy[c].keys;for(d%=c.length;d<c.length;d++)if(c[d].hasTarget(b))return c[d];return c[0]},getPrevKeyWith:function(b,c,d){c=this.data.hierarchy[c].keys;for(d=0<=d?d:d+c.length;0<=d;d--)if(c[d].hasTarget(b))return c[d];return c[c.length-1]}};
THREE.MorphAnimation=function(b){this.mesh=b;this.frames=b.morphTargetInfluences.length;this.currentTime=0;this.duration=1E3;this.loop=!0;this.currentFrame=this.lastFrame=0;this.isPlaying=!1};
THREE.MorphAnimation.prototype={constructor:THREE.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(b){if(!1!==this.isPlaying){this.currentTime+=b;!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration);this.currentTime=Math.min(this.currentTime,this.duration);var c=this.duration/this.frames;b=Math.floor(this.currentTime/c);var d=this.mesh.morphTargetInfluences;b!==this.currentFrame&&(d[this.lastFrame]=0,d[this.currentFrame]=
1,d[b]=0,this.lastFrame=this.currentFrame,this.currentFrame=b);c=this.currentTime%c/c;d[b]=c;d[this.lastFrame]=1-c}}};
THREE.BoxGeometry=function(b,c,d,g,f,h){function k(b,c,f,h,g,d,k,w){var v,y=l.widthSegments,A=l.heightSegments,x=g/2,z=d/2,C=l.vertices.length;if("x"===b&&"y"===c||"y"===b&&"x"===c)v="z";else if("x"===b&&"z"===c||"z"===b&&"x"===c)v="y",A=l.depthSegments;else if("z"===b&&"y"===c||"y"===b&&"z"===c)v="x",y=l.depthSegments;var D=y+1,B=A+1,F=g/y,H=d/A,I=new THREE.Vector3;I[v]=0<k?1:-1;for(g=0;g<B;g++)for(d=0;d<D;d++){var G=new THREE.Vector3;G[b]=(d*F-x)*f;G[c]=(g*H-z)*h;G[v]=k;l.vertices.push(G)}for(g=
0;g<A;g++)for(d=0;d<y;d++)z=d+D*g,b=d+D*(g+1),c=d+1+D*(g+1),f=d+1+D*g,h=new THREE.Vector2(d/y,1-g/A),k=new THREE.Vector2(d/y,1-(g+1)/A),v=new THREE.Vector2((d+1)/y,1-(g+1)/A),x=new THREE.Vector2((d+1)/y,1-g/A),z=new THREE.Face3(z+C,b+C,f+C),z.normal.copy(I),z.vertexNormals.push(I.clone(),I.clone(),I.clone()),z.materialIndex=w,l.faces.push(z),l.faceVertexUvs[0].push([h,k,x]),z=new THREE.Face3(b+C,c+C,f+C),z.normal.copy(I),z.vertexNormals.push(I.clone(),I.clone(),I.clone()),z.materialIndex=w,l.faces.push(z),
l.faceVertexUvs[0].push([k.clone(),v,x.clone()])}THREE.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:b,height:c,depth:d,widthSegments:g,heightSegments:f,depthSegments:h};this.widthSegments=g||1;this.heightSegments=f||1;this.depthSegments=h||1;var l=this;g=b/2;f=c/2;h=d/2;k("z","y",-1,-1,d,c,g,0);k("z","y",1,-1,d,c,-g,1);k("x","z",1,1,b,d,f,2);k("x","z",1,-1,b,d,-f,3);k("x","y",1,-1,b,c,h,4);k("x","y",-1,-1,b,c,-h,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry;THREE.BoxGeometry.prototype.clone=function(){return new THREE.BoxGeometry(this.parameters.width,this.parameters.height,this.parameters.depth,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.depthSegments)};THREE.CubeGeometry=THREE.BoxGeometry;
THREE.CircleGeometry=function(b,c,d,g){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:b,segments:c,thetaStart:d,thetaLength:g};b=b||50;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?d:0;g=void 0!==g?g:2*Math.PI;var f,h=[];f=new THREE.Vector3;var k=new THREE.Vector2(.5,.5);this.vertices.push(f);h.push(k);for(f=0;f<=c;f++){var l=new THREE.Vector3,m=d+f/c*g;l.x=b*Math.cos(m);l.y=b*Math.sin(m);this.vertices.push(l);h.push(new THREE.Vector2((l.x/b+1)/2,(l.y/b+1)/2))}d=new THREE.Vector3(0,
0,1);for(f=1;f<=c;f++)this.faces.push(new THREE.Face3(f,f+1,0,[d.clone(),d.clone(),d.clone()])),this.faceVertexUvs[0].push([h[f].clone(),h[f+1].clone(),k.clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,b)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;
THREE.CircleGeometry.prototype.clone=function(){return new THREE.CircleGeometry(this.parameters.radius,this.parameters.segments,this.parameters.thetaStart,this.parameters.thetaLength)};
THREE.CircleBufferGeometry=function(b,c,d,g){THREE.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:b,segments:c,thetaStart:d,thetaLength:g};b=b||50;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?d:0;g=void 0!==g?g:2*Math.PI;var f=c+2,h=new Float32Array(3*f),k=new Float32Array(3*f),f=new Float32Array(2*f);k[3]=1;f[0]=.5;f[1]=.5;for(var l=0,m=3,p=2;l<=c;l++,m+=3,p+=2){var t=d+l/c*g;h[m]=b*Math.cos(t);h[m+1]=b*Math.sin(t);k[m+2]=1;f[p]=(h[m]/b+1)/2;f[p+1]=(h[m+1]/b+1)/2}d=
[];for(m=1;m<=c;m++)d.push(m),d.push(m+1),d.push(0);this.setIndex(new THREE.BufferAttribute(new Uint16Array(d),1));this.addAttribute("position",new THREE.BufferAttribute(h,3));this.addAttribute("normal",new THREE.BufferAttribute(k,3));this.addAttribute("uv",new THREE.BufferAttribute(f,2));this.boundingSphere=new THREE.Sphere(new THREE.Vector3,b)};THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;
THREE.CircleBufferGeometry.prototype.clone=function(){var b=new THREE.CircleBufferGeometry(this.parameters.radius,this.parameters.segments,this.parameters.thetaStart,this.parameters.thetaLength);b.copy(this);return b};
THREE.CylinderGeometry=function(b,c,d,g,f,h,k,l){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:b,radiusBottom:c,height:d,radialSegments:g,heightSegments:f,openEnded:h,thetaStart:k,thetaLength:l};b=void 0!==b?b:20;c=void 0!==c?c:20;d=void 0!==d?d:100;g=g||8;f=f||1;h=void 0!==h?h:!1;k=void 0!==k?k:0;l=void 0!==l?l:2*Math.PI;var m=d/2,p,t,u=[],n=[];for(t=0;t<=f;t++){var q=[],r=[],w=t/f,v=w*(c-b)+b;for(p=0;p<=g;p++){var y=p/g,A=new THREE.Vector3;A.x=v*Math.sin(y*l+
k);A.y=-w*d+m;A.z=v*Math.cos(y*l+k);this.vertices.push(A);q.push(this.vertices.length-1);r.push(new THREE.Vector2(y,1-w))}u.push(q);n.push(r)}d=(c-b)/d;for(p=0;p<g;p++)for(0!==b?(k=this.vertices[u[0][p]].clone(),l=this.vertices[u[0][p+1]].clone()):(k=this.vertices[u[1][p]].clone(),l=this.vertices[u[1][p+1]].clone()),k.setY(Math.sqrt(k.x*k.x+k.z*k.z)*d).normalize(),l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*d).normalize(),t=0;t<f;t++){var q=u[t][p],r=u[t+1][p],w=u[t+1][p+1],v=u[t][p+1],y=k.clone(),A=k.clone(),
x=l.clone(),z=l.clone(),C=n[t][p].clone(),D=n[t+1][p].clone(),B=n[t+1][p+1].clone(),F=n[t][p+1].clone();this.faces.push(new THREE.Face3(q,r,v,[y,A,z]));this.faceVertexUvs[0].push([C,D,F]);this.faces.push(new THREE.Face3(r,w,v,[A.clone(),x,z.clone()]));this.faceVertexUvs[0].push([D.clone(),B,F.clone()])}if(!1===h&&0<b)for(this.vertices.push(new THREE.Vector3(0,m,0)),p=0;p<g;p++)q=u[0][p],r=u[0][p+1],w=this.vertices.length-1,y=new THREE.Vector3(0,1,0),A=new THREE.Vector3(0,1,0),x=new THREE.Vector3(0,
1,0),C=n[0][p].clone(),D=n[0][p+1].clone(),B=new THREE.Vector2(D.x,0),this.faces.push(new THREE.Face3(q,r,w,[y,A,x],void 0,1)),this.faceVertexUvs[0].push([C,D,B]);if(!1===h&&0<c)for(this.vertices.push(new THREE.Vector3(0,-m,0)),p=0;p<g;p++)q=u[f][p+1],r=u[f][p],w=this.vertices.length-1,y=new THREE.Vector3(0,-1,0),A=new THREE.Vector3(0,-1,0),x=new THREE.Vector3(0,-1,0),C=n[f][p+1].clone(),D=n[f][p].clone(),B=new THREE.Vector2(D.x,1),this.faces.push(new THREE.Face3(q,r,w,[y,A,x],void 0,2)),this.faceVertexUvs[0].push([C,
D,B]);this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;THREE.CylinderGeometry.prototype.clone=function(){return new THREE.CylinderGeometry(this.parameters.radiusTop,this.parameters.radiusBottom,this.parameters.height,this.parameters.radialSegments,this.parameters.heightSegments,this.parameters.openEnded,this.parameters.thetaStart,this.parameters.thetaLength)};
THREE.EdgesGeometry=function(b,c){THREE.BufferGeometry.call(this);var d=Math.cos(THREE.Math.degToRad(void 0!==c?c:1)),g=[0,0],f={},h=function(b,c){return b-c},k=["a","b","c"],l;b instanceof THREE.BufferGeometry?(l=new THREE.Geometry,l.fromBufferGeometry(b)):l=b.clone();l.mergeVertices();l.computeFaceNormals();var m=l.vertices;l=l.faces;for(var p=0,t=l.length;p<t;p++)for(var u=l[p],n=0;3>n;n++){g[0]=u[k[n]];g[1]=u[k[(n+1)%3]];g.sort(h);var q=g.toString();void 0===f[q]?f[q]={vert1:g[0],vert2:g[1],face1:p,
face2:void 0}:f[q].face2=p}g=[];for(q in f)if(h=f[q],void 0===h.face2||l[h.face1].normal.dot(l[h.face2].normal)<=d)k=m[h.vert1],g.push(k.x),g.push(k.y),g.push(k.z),k=m[h.vert2],g.push(k.x),g.push(k.y),g.push(k.z);this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(g),3))};THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;
THREE.ExtrudeGeometry=function(b,c){"undefined"!==typeof b&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",b=Array.isArray(b)?b:[b],this.addShapeList(b,c),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(b,c){for(var d=b.length,g=0;g<d;g++)this.addShape(b[g],c)};
THREE.ExtrudeGeometry.prototype.addShape=function(b,c){function d(b,c,f){c||console.error("THREE.ExtrudeGeometry: vec does not exist");return c.clone().multiplyScalar(f).add(b)}function g(b,c,f){var h=1,h=b.x-c.x,g=b.y-c.y,d=f.x-b.x,k=f.y-b.y,l=h*h+g*g;if(1E-10<Math.abs(h*k-g*d)){var m=Math.sqrt(l),n=Math.sqrt(d*d+k*k),l=c.x-g/m;c=c.y+h/m;d=((f.x-k/n-l)*k-(f.y+d/n-c)*d)/(h*k-g*d);f=l+h*d-b.x;b=c+g*d-b.y;h=f*f+b*b;if(2>=h)return new THREE.Vector2(f,b);h=Math.sqrt(h/2)}else b=!1,1E-10<h?1E-10<d&&(b=
!0):-1E-10>h?-1E-10>d&&(b=!0):Math.sign(g)===Math.sign(k)&&(b=!0),b?(f=-g,b=h,h=Math.sqrt(l)):(f=h,b=g,h=Math.sqrt(l/2));return new THREE.Vector2(f/h,b/h)}function f(b,c){var f,h;for(X=b.length;0<=--X;){f=X;h=X-1;0>h&&(h=b.length-1);for(var g=0,d=q+2*t,g=0;g<d;g++){var k=U*g,l=U*(g+1),m=c+f+k,k=c+h+k,n=c+h+l,l=c+f+l,m=m+I,k=k+I,n=n+I,l=l+I;H.faces.push(new THREE.Face3(m,k,l));H.faces.push(new THREE.Face3(k,n,l));m=y.generateSideWallUV(H,m,k,n,l);H.faceVertexUvs[0].push([m[0],m[1],m[3]]);H.faceVertexUvs[0].push([m[1],
m[2],m[3]])}}}function h(b,c,f){H.vertices.push(new THREE.Vector3(b,c,f))}function k(b,c,f){b+=I;c+=I;f+=I;H.faces.push(new THREE.Face3(b,c,f));b=y.generateTopUV(H,b,c,f);H.faceVertexUvs[0].push(b)}var l=void 0!==c.amount?c.amount:100,m=void 0!==c.bevelThickness?c.bevelThickness:6,p=void 0!==c.bevelSize?c.bevelSize:m-2,t=void 0!==c.bevelSegments?c.bevelSegments:3,u=void 0!==c.bevelEnabled?c.bevelEnabled:!0,n=void 0!==c.curveSegments?c.curveSegments:12,q=void 0!==c.steps?c.steps:1,r=c.extrudePath,
w,v=!1,y=void 0!==c.UVGenerator?c.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,A,x,z,C;r&&(w=r.getSpacedPoints(q),v=!0,u=!1,A=void 0!==c.frames?c.frames:new THREE.TubeGeometry.FrenetFrames(r,q,!1),x=new THREE.Vector3,z=new THREE.Vector3,C=new THREE.Vector3);u||(p=m=t=0);var D,B,F,H=this,I=this.vertices.length,r=b.extractPoints(n),n=r.shape,G=r.holes;if(r=!THREE.Shape.Utils.isClockWise(n)){n=n.reverse();B=0;for(F=G.length;B<F;B++)D=G[B],THREE.Shape.Utils.isClockWise(D)&&(G[B]=D.reverse());r=
!1}var M=THREE.Shape.Utils.triangulateShape(n,G),J=n;B=0;for(F=G.length;B<F;B++)D=G[B],n=n.concat(D);var K,L,N,Q,S,U=n.length,V,W=M.length,r=[],X=0;N=J.length;K=N-1;for(L=X+1;X<N;X++,K++,L++)K===N&&(K=0),L===N&&(L=0),r[X]=g(J[X],J[K],J[L]);var ea=[],da,R=r.concat();B=0;for(F=G.length;B<F;B++){D=G[B];da=[];X=0;N=D.length;K=N-1;for(L=X+1;X<N;X++,K++,L++)K===N&&(K=0),L===N&&(L=0),da[X]=g(D[X],D[K],D[L]);ea.push(da);R=R.concat(da)}for(K=0;K<t;K++){N=K/t;Q=m*(1-N);L=p*Math.sin(N*Math.PI/2);X=0;for(N=J.length;X<
N;X++)S=d(J[X],r[X],L),h(S.x,S.y,-Q);B=0;for(F=G.length;B<F;B++)for(D=G[B],da=ea[B],X=0,N=D.length;X<N;X++)S=d(D[X],da[X],L),h(S.x,S.y,-Q)}L=p;for(X=0;X<U;X++)S=u?d(n[X],R[X],L):n[X],v?(z.copy(A.normals[0]).multiplyScalar(S.x),x.copy(A.binormals[0]).multiplyScalar(S.y),C.copy(w[0]).add(z).add(x),h(C.x,C.y,C.z)):h(S.x,S.y,0);for(N=1;N<=q;N++)for(X=0;X<U;X++)S=u?d(n[X],R[X],L):n[X],v?(z.copy(A.normals[N]).multiplyScalar(S.x),x.copy(A.binormals[N]).multiplyScalar(S.y),C.copy(w[N]).add(z).add(x),h(C.x,
C.y,C.z)):h(S.x,S.y,l/q*N);for(K=t-1;0<=K;K--){N=K/t;Q=m*(1-N);L=p*Math.sin(N*Math.PI/2);X=0;for(N=J.length;X<N;X++)S=d(J[X],r[X],L),h(S.x,S.y,l+Q);B=0;for(F=G.length;B<F;B++)for(D=G[B],da=ea[B],X=0,N=D.length;X<N;X++)S=d(D[X],da[X],L),v?h(S.x,S.y+w[q-1].y,w[q-1].x+Q):h(S.x,S.y,l+Q)}(function(){if(u){var b;b=0*U;for(X=0;X<W;X++)V=M[X],k(V[2]+b,V[1]+b,V[0]+b);b=q+2*t;b*=U;for(X=0;X<W;X++)V=M[X],k(V[0]+b,V[1]+b,V[2]+b)}else{for(X=0;X<W;X++)V=M[X],k(V[2],V[1],V[0]);for(X=0;X<W;X++)V=M[X],k(V[0]+U*q,
V[1]+U*q,V[2]+U*q)}})();(function(){var b=0;f(J,b);b+=J.length;B=0;for(F=G.length;B<F;B++)D=G[B],f(D,b),b+=D.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(b,c,d,g){b=b.vertices;c=b[c];d=b[d];g=b[g];return[new THREE.Vector2(c.x,c.y),new THREE.Vector2(d.x,d.y),new THREE.Vector2(g.x,g.y)]},generateSideWallUV:function(b,c,d,g,f){b=b.vertices;c=b[c];d=b[d];g=b[g];f=b[f];return.01>Math.abs(c.y-d.y)?[new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z),new THREE.Vector2(g.x,1-g.z),new THREE.Vector2(f.x,1-f.z)]:[new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,1-d.z),new THREE.Vector2(g.y,
1-g.z),new THREE.Vector2(f.y,1-f.z)]}};THREE.ShapeGeometry=function(b,c){THREE.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(b)&&(b=[b]);this.addShapeList(b,c);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;THREE.ShapeGeometry.prototype.addShapeList=function(b,c){for(var d=0,g=b.length;d<g;d++)this.addShape(b[d],c);return this};
THREE.ShapeGeometry.prototype.addShape=function(b,c){void 0===c&&(c={});var d=c.material,g=void 0===c.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:c.UVGenerator,f,h,k,l=this.vertices.length;f=b.extractPoints(void 0!==c.curveSegments?c.curveSegments:12);var m=f.shape,p=f.holes;if(!THREE.Shape.Utils.isClockWise(m))for(m=m.reverse(),f=0,h=p.length;f<h;f++)k=p[f],THREE.Shape.Utils.isClockWise(k)&&(p[f]=k.reverse());var t=THREE.Shape.Utils.triangulateShape(m,p);f=0;for(h=p.length;f<h;f++)k=p[f],
m=m.concat(k);p=m.length;h=t.length;for(f=0;f<p;f++)k=m[f],this.vertices.push(new THREE.Vector3(k.x,k.y,0));for(f=0;f<h;f++)p=t[f],m=p[0]+l,k=p[1]+l,p=p[2]+l,this.faces.push(new THREE.Face3(m,k,p,null,null,d)),this.faceVertexUvs[0].push(g.generateTopUV(this,m,k,p))};
THREE.LatheGeometry=function(b,c,d,g){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:b,segments:c,phiStart:d,phiLength:g};c=c||12;d=d||0;g=g||2*Math.PI;for(var f=1/(b.length-1),h=1/c,k=0,l=c;k<=l;k++)for(var m=d+k*h*g,p=Math.cos(m),t=Math.sin(m),m=0,u=b.length;m<u;m++){var n=b[m],q=new THREE.Vector3;q.x=p*n.x-t*n.y;q.y=t*n.x+p*n.y;q.z=n.z;this.vertices.push(q)}d=b.length;k=0;for(l=c;k<l;k++)for(m=0,u=b.length-1;m<u;m++){c=t=m+d*k;g=t+d;var p=t+1+d,t=t+1,n=k*h,q=m*f,r=
n+h,w=q+f;this.faces.push(new THREE.Face3(c,g,t));this.faceVertexUvs[0].push([new THREE.Vector2(n,q),new THREE.Vector2(r,q),new THREE.Vector2(n,w)]);this.faces.push(new THREE.Face3(g,p,t));this.faceVertexUvs[0].push([new THREE.Vector2(r,q),new THREE.Vector2(r,w),new THREE.Vector2(n,w)])}this.mergeVertices();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;
THREE.PlaneGeometry=function(b,c,d,g){THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:b,height:c,widthSegments:d,heightSegments:g};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(b,c,d,g))};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;
THREE.PlaneGeometry.prototype.clone=function(){return new THREE.PlaneGeometry(this.parameters.width,this.parameters.height,this.parameters.widthSegments,this.parameters.heightSegments)};
THREE.PlaneBufferGeometry=function(b,c,d,g){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:b,height:c,widthSegments:d,heightSegments:g};var f=b/2,h=c/2;d=Math.floor(d)||1;g=Math.floor(g)||1;var k=d+1,l=g+1,m=b/d,p=c/g;c=new Float32Array(k*l*3);b=new Float32Array(k*l*3);for(var t=new Float32Array(k*l*2),u=0,n=0,q=0;q<l;q++)for(var r=q*p-h,w=0;w<k;w++)c[u]=w*m-f,c[u+1]=-r,b[u+2]=1,t[n]=w/d,t[n+1]=1-q/g,u+=3,n+=2;u=0;f=new (65535<c.length/3?Uint32Array:Uint16Array)(d*
g*6);for(q=0;q<g;q++)for(w=0;w<d;w++)h=w+k*(q+1),l=w+1+k*(q+1),m=w+1+k*q,f[u]=w+k*q,f[u+1]=h,f[u+2]=m,f[u+3]=h,f[u+4]=l,f[u+5]=m,u+=6;this.setIndex(new THREE.BufferAttribute(f,1));this.addAttribute("position",new THREE.BufferAttribute(c,3));this.addAttribute("normal",new THREE.BufferAttribute(b,3));this.addAttribute("uv",new THREE.BufferAttribute(t,2))};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;
THREE.PlaneBufferGeometry.prototype.clone=function(){var b=new THREE.PlaneBufferGeometry(this.parameters.width,this.parameters.height,this.parameters.widthSegments,this.parameters.heightSegments);b.copy(this);return b};
THREE.RingGeometry=function(b,c,d,g,f,h){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:b,outerRadius:c,thetaSegments:d,phiSegments:g,thetaStart:f,thetaLength:h};b=b||0;c=c||50;f=void 0!==f?f:0;h=void 0!==h?h:2*Math.PI;d=void 0!==d?Math.max(3,d):8;g=void 0!==g?Math.max(1,g):8;var k,l=[],m=b,p=(c-b)/g;for(b=0;b<g+1;b++){for(k=0;k<d+1;k++){var t=new THREE.Vector3,u=f+k/d*h;t.x=m*Math.cos(u);t.y=m*Math.sin(u);this.vertices.push(t);l.push(new THREE.Vector2((t.x/c+1)/2,
(t.y/c+1)/2))}m+=p}c=new THREE.Vector3(0,0,1);for(b=0;b<g;b++)for(f=b*(d+1),k=0;k<d;k++)h=u=k+f,p=u+d+1,t=u+d+2,this.faces.push(new THREE.Face3(h,p,t,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([l[h].clone(),l[p].clone(),l[t].clone()]),h=u,p=u+d+2,t=u+1,this.faces.push(new THREE.Face3(h,p,t,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([l[h].clone(),l[p].clone(),l[t].clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,m)};
THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;THREE.RingGeometry.prototype.clone=function(){return new THREE.RingGeometry(this.parameters.innerRadius,this.parameters.outerRadius,this.parameters.thetaSegments,this.parameters.phiSegments,this.parameters.thetaStart,this.parameters.thetaLength)};
THREE.SphereGeometry=function(b,c,d,g,f,h,k){THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:b,widthSegments:c,heightSegments:d,phiStart:g,phiLength:f,thetaStart:h,thetaLength:k};this.fromBufferGeometry(new THREE.SphereBufferGeometry(b,c,d,g,f,h,k))};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;
THREE.SphereGeometry.prototype.clone=function(){return new THREE.SphereGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength)};
THREE.SphereBufferGeometry=function(b,c,d,g,f,h,k){THREE.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:b,widthSegments:c,heightSegments:d,phiStart:g,phiLength:f,thetaStart:h,thetaLength:k};b=b||50;c=Math.max(3,Math.floor(c)||8);d=Math.max(2,Math.floor(d)||6);g=void 0!==g?g:0;f=void 0!==f?f:2*Math.PI;h=void 0!==h?h:0;k=void 0!==k?k:Math.PI;for(var l=h+k,m=(c+1)*(d+1),p=new THREE.BufferAttribute(new Float32Array(3*m),3),t=new THREE.BufferAttribute(new Float32Array(3*
m),3),m=new THREE.BufferAttribute(new Float32Array(2*m),2),u=0,n=[],q=new THREE.Vector3,r=0;r<=d;r++){for(var w=[],v=r/d,y=0;y<=c;y++){var A=y/c,x=-b*Math.cos(g+A*f)*Math.sin(h+v*k),z=b*Math.cos(h+v*k),C=b*Math.sin(g+A*f)*Math.sin(h+v*k);q.set(x,z,C).normalize();p.setXYZ(u,x,z,C);t.setXYZ(u,q.x,q.y,q.z);m.setXY(u,A,1-v);w.push(u);u++}n.push(w)}g=[];for(r=0;r<d;r++)for(y=0;y<c;y++)f=n[r][y+1],k=n[r][y],u=n[r+1][y],q=n[r+1][y+1],(0!==r||0<h)&&g.push(f,k,q),(r!==d-1||l<Math.PI)&&g.push(k,u,q);this.setIndex(new THREE.BufferAttribute(new Uint16Array(g),
1));this.addAttribute("position",p);this.addAttribute("normal",t);this.addAttribute("uv",m);this.boundingSphere=new THREE.Sphere(new THREE.Vector3,b)};THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;
THREE.SphereBufferGeometry.prototype.clone=function(){var b=new THREE.SphereBufferGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength);b.copy(this);return b};
THREE.TextGeometry=function(b,c){c=c||{};var d=THREE.FontUtils.generateShapes(b,c);c.amount=void 0!==c.height?c.height:50;void 0===c.bevelThickness&&(c.bevelThickness=10);void 0===c.bevelSize&&(c.bevelSize=8);void 0===c.bevelEnabled&&(c.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,d,c);this.type="TextGeometry"};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TextGeometry.prototype.constructor=THREE.TextGeometry;
THREE.TorusGeometry=function(b,c,d,g,f){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:b,tube:c,radialSegments:d,tubularSegments:g,arc:f};b=b||100;c=c||40;d=d||8;g=g||6;f=f||2*Math.PI;for(var h=new THREE.Vector3,k=[],l=[],m=0;m<=d;m++)for(var p=0;p<=g;p++){var t=p/g*f,u=m/d*Math.PI*2;h.x=b*Math.cos(t);h.y=b*Math.sin(t);var n=new THREE.Vector3;n.x=(b+c*Math.cos(u))*Math.cos(t);n.y=(b+c*Math.cos(u))*Math.sin(t);n.z=c*Math.sin(u);this.vertices.push(n);k.push(new THREE.Vector2(p/
g,m/d));l.push(n.clone().sub(h).normalize())}for(m=1;m<=d;m++)for(p=1;p<=g;p++)b=(g+1)*m+p-1,c=(g+1)*(m-1)+p-1,f=(g+1)*(m-1)+p,h=(g+1)*m+p,t=new THREE.Face3(b,c,h,[l[b].clone(),l[c].clone(),l[h].clone()]),this.faces.push(t),this.faceVertexUvs[0].push([k[b].clone(),k[c].clone(),k[h].clone()]),t=new THREE.Face3(c,f,h,[l[c].clone(),l[f].clone(),l[h].clone()]),this.faces.push(t),this.faceVertexUvs[0].push([k[c].clone(),k[f].clone(),k[h].clone()]);this.computeFaceNormals()};
THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;THREE.TorusGeometry.prototype.clone=function(){return new THREE.TorusGeometry(this.parameters.radius,this.parameters.tube,this.parameters.radialSegments,this.parameters.tubularSegments,this.parameters.arc)};
THREE.TorusKnotGeometry=function(b,c,d,g,f,h,k){function l(b,c,f,h,g){var d=Math.cos(b),k=Math.sin(b);b*=c/f;c=Math.cos(b);d=d*h*(2+c)*.5;k=h*(2+c)*k*.5;h=g*h*Math.sin(b)*.5;return new THREE.Vector3(d,k,h)}THREE.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:b,tube:c,radialSegments:d,tubularSegments:g,p:f,q:h,heightScale:k};b=b||100;c=c||40;d=d||64;g=g||8;f=f||2;h=h||3;k=k||1;for(var m=Array(d),p=new THREE.Vector3,t=new THREE.Vector3,u=new THREE.Vector3,n=0;n<d;++n){m[n]=
Array(g);var q=n/d*2*f*Math.PI,r=l(q,h,f,b,k),q=l(q+.01,h,f,b,k);p.subVectors(q,r);t.addVectors(q,r);u.crossVectors(p,t);t.crossVectors(u,p);u.normalize();t.normalize();for(q=0;q<g;++q){var w=q/g*2*Math.PI,v=-c*Math.cos(w),w=c*Math.sin(w),y=new THREE.Vector3;y.x=r.x+v*t.x+w*u.x;y.y=r.y+v*t.y+w*u.y;y.z=r.z+v*t.z+w*u.z;m[n][q]=this.vertices.push(y)-1}}for(n=0;n<d;++n)for(q=0;q<g;++q)f=(n+1)%d,h=(q+1)%g,b=m[n][q],c=m[f][q],f=m[f][h],h=m[n][h],k=new THREE.Vector2(n/d,q/g),p=new THREE.Vector2((n+1)/d,
q/g),t=new THREE.Vector2((n+1)/d,(q+1)/g),u=new THREE.Vector2(n/d,(q+1)/g),this.faces.push(new THREE.Face3(b,c,h)),this.faceVertexUvs[0].push([k,p,u]),this.faces.push(new THREE.Face3(c,f,h)),this.faceVertexUvs[0].push([p.clone(),t,u.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;
THREE.TorusKnotGeometry.prototype.clone=function(){return new THREE.TorusKnotGeometry(this.parameters.radius,this.parameters.tube,this.parameters.radialSegments,this.parameters.tubularSegments,this.parameters.p,this.parameters.q,this.parameters.heightScale)};
THREE.TubeGeometry=function(b,c,d,g,f,h){THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:b,segments:c,radius:d,radialSegments:g,closed:f};c=c||64;d=d||1;g=g||8;f=f||!1;h=h||THREE.TubeGeometry.NoTaper;var k=[],l,m,p=c+1,t,u,n,q,r,w=new THREE.Vector3,v,y,A;v=new THREE.TubeGeometry.FrenetFrames(b,c,f);y=v.normals;A=v.binormals;this.tangents=v.tangents;this.normals=y;this.binormals=A;for(v=0;v<p;v++)for(k[v]=[],t=v/(p-1),r=b.getPointAt(t),l=y[v],m=A[v],n=d*h(t),t=0;t<g;t++)u=
t/g*2*Math.PI,q=-n*Math.cos(u),u=n*Math.sin(u),w.copy(r),w.x+=q*l.x+u*m.x,w.y+=q*l.y+u*m.y,w.z+=q*l.z+u*m.z,k[v][t]=this.vertices.push(new THREE.Vector3(w.x,w.y,w.z))-1;for(v=0;v<c;v++)for(t=0;t<g;t++)h=f?(v+1)%c:v+1,p=(t+1)%g,b=k[v][t],d=k[h][t],h=k[h][p],p=k[v][p],w=new THREE.Vector2(v/c,t/g),y=new THREE.Vector2((v+1)/c,t/g),A=new THREE.Vector2((v+1)/c,(t+1)/g),l=new THREE.Vector2(v/c,(t+1)/g),this.faces.push(new THREE.Face3(b,d,p)),this.faceVertexUvs[0].push([w,y,l]),this.faces.push(new THREE.Face3(d,
h,p)),this.faceVertexUvs[0].push([y.clone(),A,l.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.NoTaper=function(b){return 1};THREE.TubeGeometry.SinusoidalTaper=function(b){return Math.sin(Math.PI*b)};
THREE.TubeGeometry.FrenetFrames=function(b,c,d){var g=new THREE.Vector3,f=[],h=[],k=[],l=new THREE.Vector3,m=new THREE.Matrix4;c+=1;var p,t,u;this.tangents=f;this.normals=h;this.binormals=k;for(p=0;p<c;p++)t=p/(c-1),f[p]=b.getTangentAt(t),f[p].normalize();h[0]=new THREE.Vector3;k[0]=new THREE.Vector3;b=Number.MAX_VALUE;p=Math.abs(f[0].x);t=Math.abs(f[0].y);u=Math.abs(f[0].z);p<=b&&(b=p,g.set(1,0,0));t<=b&&(b=t,g.set(0,1,0));u<=b&&g.set(0,0,1);l.crossVectors(f[0],g).normalize();h[0].crossVectors(f[0],
l);k[0].crossVectors(f[0],h[0]);for(p=1;p<c;p++)h[p]=h[p-1].clone(),k[p]=k[p-1].clone(),l.crossVectors(f[p-1],f[p]),1E-4<l.length()&&(l.normalize(),g=Math.acos(THREE.Math.clamp(f[p-1].dot(f[p]),-1,1)),h[p].applyMatrix4(m.makeRotationAxis(l,g))),k[p].crossVectors(f[p],h[p]);if(d)for(g=Math.acos(THREE.Math.clamp(h[0].dot(h[c-1]),-1,1)),g/=c-1,0<f[0].dot(l.crossVectors(h[0],h[c-1]))&&(g=-g),p=1;p<c;p++)h[p].applyMatrix4(m.makeRotationAxis(f[p],g*p)),k[p].crossVectors(f[p],h[p])};
THREE.PolyhedronGeometry=function(b,c,d,g){function f(b){var c=b.normalize().clone();c.index=m.vertices.push(c)-1;var f=Math.atan2(b.z,-b.x)/2/Math.PI+.5;b=Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))/Math.PI+.5;c.uv=new THREE.Vector2(f,1-b);return c}function h(b,c,f,h){h=new THREE.Face3(b.index,c.index,f.index,[b.clone(),c.clone(),f.clone()],void 0,h);m.faces.push(h);v.copy(b).add(c).add(f).divideScalar(3);h=Math.atan2(v.z,-v.x);m.faceVertexUvs[0].push([l(b.uv,b,h),l(c.uv,c,h),l(f.uv,f,h)])}function k(b,
c){for(var g=Math.pow(2,c),d=f(m.vertices[b.a]),k=f(m.vertices[b.b]),l=f(m.vertices[b.c]),n=[],r=b.materialIndex,q=0;q<=g;q++){n[q]=[];for(var p=f(d.clone().lerp(l,q/g)),u=f(k.clone().lerp(l,q/g)),v=g-q,w=0;w<=v;w++)n[q][w]=0===w&&q===g?p:f(p.clone().lerp(u,w/v))}for(q=0;q<g;q++)for(w=0;w<2*(g-q)-1;w++)d=Math.floor(w/2),0===w%2?h(n[q][d+1],n[q+1][d],n[q][d],r):h(n[q][d+1],n[q+1][d+1],n[q+1][d],r)}function l(b,c,f){0>f&&1===b.x&&(b=new THREE.Vector2(b.x-1,b.y));0===c.x&&0===c.z&&(b=new THREE.Vector2(f/
2/Math.PI+.5,b.y));return b.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:b,indices:c,radius:d,detail:g};d=d||1;g=g||0;for(var m=this,p=0,t=b.length;p<t;p+=3)f(new THREE.Vector3(b[p],b[p+1],b[p+2]));b=this.vertices;for(var u=[],n=p=0,t=c.length;p<t;p+=3,n++){var q=b[c[p]],r=b[c[p+1]],w=b[c[p+2]];u[n]=new THREE.Face3(q.index,r.index,w.index,[q.clone(),r.clone(),w.clone()],void 0,n)}for(var v=new THREE.Vector3,p=0,t=u.length;p<t;p++)k(u[p],g);p=0;for(t=this.faceVertexUvs[0].length;p<
t;p++)c=this.faceVertexUvs[0][p],g=c[0].x,b=c[1].x,u=c[2].x,n=Math.max(g,Math.max(b,u)),q=Math.min(g,Math.min(b,u)),.9<n&&.1>q&&(.2>g&&(c[0].x+=1),.2>b&&(c[1].x+=1),.2>u&&(c[2].x+=1));p=0;for(t=this.vertices.length;p<t;p++)this.vertices[p].multiplyScalar(d);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,d)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;
THREE.PolyhedronGeometry.prototype.clone=function(){return(new THREE.PolyhedronGeometry(this.parameters.vertices,this.parameters.indices,this.parameters.radius,this.parameters.detail)).copy(this)};THREE.PolyhedronGeometry.prototype.copy=function(b){THREE.Geometry.prototype.copy.call(this,b);return this};
THREE.DodecahedronGeometry=function(b,c){var d=(1+Math.sqrt(5))/2,g=1/d;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-g,-d,0,-g,d,0,g,-d,0,g,d,-g,-d,0,-g,d,0,g,-d,0,g,d,0,-d,0,-g,d,0,-g,-d,0,g,d,0,g],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,
12,14,1,14,5,1,5,9],b,c);this.type="DodecahedronGeometry";this.parameters={radius:b,detail:c}};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;THREE.DodecahedronGeometry.prototype.clone=function(){var b=new THREE.DodecahedronGeometry(this.parameters.radius,this.parameters.detail);b.copy(this);return b};
THREE.IcosahedronGeometry=function(b,c){var d=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,d,0,1,d,0,-1,-d,0,1,-d,0,0,-1,d,0,1,d,0,-1,-d,0,1,-d,d,0,-1,d,0,1,-d,0,-1,-d,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],b,c);this.type="IcosahedronGeometry";this.parameters={radius:b,detail:c}};THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);
THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry;THREE.IcosahedronGeometry.prototype.clone=function(){var b=new THREE.IcosahedronGeometry(this.parameters.radius,this.parameters.detail);b.copy(this);return b};THREE.OctahedronGeometry=function(b,c){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],b,c);this.type="OctahedronGeometry";this.parameters={radius:b,detail:c}};
THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry;THREE.OctahedronGeometry.prototype.clone=function(){var b=new THREE.OctahedronGeometry(this.parameters.radius,this.parameters.detail);b.copy(this);return b};
THREE.TetrahedronGeometry=function(b,c){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],b,c);this.type="TetrahedronGeometry";this.parameters={radius:b,detail:c}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;
THREE.TetrahedronGeometry.prototype.clone=function(){var b=new THREE.TetrahedronGeometry(this.parameters.radius,this.parameters.detail);b.copy(this);return b};
THREE.ParametricGeometry=function(b,c,d){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:b,slices:c,stacks:d};var g=this.vertices,f=this.faces,h=this.faceVertexUvs[0],k,l,m,p,t=c+1;for(k=0;k<=d;k++)for(p=k/d,l=0;l<=c;l++)m=l/c,m=b(m,p),g.push(m);var u,n,q,r;for(k=0;k<d;k++)for(l=0;l<c;l++)b=k*t+l,g=k*t+l+1,p=(k+1)*t+l+1,m=(k+1)*t+l,u=new THREE.Vector2(l/c,k/d),n=new THREE.Vector2((l+1)/c,k/d),q=new THREE.Vector2((l+1)/c,(k+1)/d),r=new THREE.Vector2(l/c,(k+1)/d),f.push(new THREE.Face3(b,
g,m)),h.push([u,n,r]),f.push(new THREE.Face3(g,p,m)),h.push([n.clone(),q,r.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;
THREE.WireframeGeometry=function(b){THREE.BufferGeometry.call(this);var c=[0,0],d={},g=function(b,c){return b-c},f=["a","b","c"];if(b instanceof THREE.Geometry){var h=b.vertices,k=b.faces,l=0,m=new Uint32Array(6*k.length);b=0;for(var p=k.length;b<p;b++)for(var t=k[b],u=0;3>u;u++){c[0]=t[f[u]];c[1]=t[f[(u+1)%3]];c.sort(g);var n=c.toString();void 0===d[n]&&(m[2*l]=c[0],m[2*l+1]=c[1],d[n]=!0,l++)}c=new Float32Array(6*l);b=0;for(p=l;b<p;b++)for(u=0;2>u;u++)d=h[m[2*b+u]],l=6*b+3*u,c[l+0]=d.x,c[l+1]=d.y,
c[l+2]=d.z;this.addAttribute("position",new THREE.BufferAttribute(c,3))}else if(b instanceof THREE.BufferGeometry){if(null!==b.index){p=b.index.array;h=b.attributes.position;f=b.drawcalls;l=0;0===f.length&&b.addDrawCall(0,p.length);m=new Uint32Array(2*p.length);k=0;for(t=f.length;k<t;++k){b=f[k];u=b.start;n=b.count;b=u;for(var q=u+n;b<q;b+=3)for(u=0;3>u;u++)c[0]=p[b+u],c[1]=p[b+(u+1)%3],c.sort(g),n=c.toString(),void 0===d[n]&&(m[2*l]=c[0],m[2*l+1]=c[1],d[n]=!0,l++)}c=new Float32Array(6*l);b=0;for(p=
l;b<p;b++)for(u=0;2>u;u++)l=6*b+3*u,d=m[2*b+u],c[l+0]=h.getX(d),c[l+1]=h.getY(d),c[l+2]=h.getZ(d)}else for(h=b.attributes.position.array,l=h.length/3,m=l/3,c=new Float32Array(6*l),b=0,p=m;b<p;b++)for(u=0;3>u;u++)l=18*b+6*u,m=9*b+3*u,c[l+0]=h[m],c[l+1]=h[m+1],c[l+2]=h[m+2],d=9*b+(u+1)%3*3,c[l+3]=h[d],c[l+4]=h[d+1],c[l+5]=h[d+2];this.addAttribute("position",new THREE.BufferAttribute(c,3))}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;THREE.AxisHelper=function(b){b=b||1;var c=new Float32Array([0,0,0,b,0,0,0,0,0,0,b,0,0,0,0,0,0,b]),d=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(c,3));b.addAttribute("color",new THREE.BufferAttribute(d,3));c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,b,c)};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;
THREE.ArrowHelper=function(){var b=new THREE.Geometry;b.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var c=new THREE.CylinderGeometry(0,.5,1,5,1);c.translate(0,-.5,0);return function(d,g,f,h,k,l){THREE.Object3D.call(this);void 0===h&&(h=16776960);void 0===f&&(f=1);void 0===k&&(k=.2*f);void 0===l&&(l=.2*k);this.position.copy(g);k<f&&(this.line=new THREE.Line(b,new THREE.LineBasicMaterial({color:h})),this.line.matrixAutoUpdate=!1,this.add(this.line));this.cone=new THREE.Mesh(c,new THREE.MeshBasicMaterial({color:h}));
this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(d);this.setLength(f,k,l)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;THREE.ArrowHelper.prototype.setDirection=function(){var b=new THREE.Vector3,c;return function(d){.99999<d.y?this.quaternion.set(0,0,0,1):-.99999>d.y?this.quaternion.set(1,0,0,0):(b.set(d.z,0,-d.x).normalize(),c=Math.acos(d.y),this.quaternion.setFromAxisAngle(b,c))}}();
THREE.ArrowHelper.prototype.setLength=function(b,c,d){void 0===c&&(c=.2*b);void 0===d&&(d=.2*c);c<b&&(this.line.scale.set(1,b-c,1),this.line.updateMatrix());this.cone.scale.set(d,c,d);this.cone.position.y=b;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(b){void 0!==this.line&&this.line.material.color.set(b);this.cone.material.color.set(b)};
THREE.BoxHelper=function(b){var c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),g=new THREE.BufferGeometry;g.setIndex(new THREE.BufferAttribute(c,1));g.addAttribute("position",new THREE.BufferAttribute(d,3));THREE.LineSegments.call(this,g,new THREE.LineBasicMaterial({color:16776960}));void 0!==b&&this.update(b)};THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.BoxHelper.prototype.constructor=THREE.BoxHelper;
THREE.BoxHelper.prototype.update=function(){var b=new THREE.Box3;return function(c){b.setFromObject(c);if(!b.empty()){c=b.min;var d=b.max,g=this.geometry.attributes.position,f=g.array;f[0]=d.x;f[1]=d.y;f[2]=d.z;f[3]=c.x;f[4]=d.y;f[5]=d.z;f[6]=c.x;f[7]=c.y;f[8]=d.z;f[9]=d.x;f[10]=c.y;f[11]=d.z;f[12]=d.x;f[13]=d.y;f[14]=c.z;f[15]=c.x;f[16]=d.y;f[17]=c.z;f[18]=c.x;f[19]=c.y;f[20]=c.z;f[21]=d.x;f[22]=c.y;f[23]=c.z;g.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();
THREE.BoundingBoxHelper=function(b,c){var d=void 0!==c?c:8947848;this.object=b;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:d,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(b){function c(b,c,f){d(b,f);d(c,f)}function d(b,c){g.vertices.push(new THREE.Vector3);g.colors.push(new THREE.Color(c));void 0===h[b]&&(h[b]=[]);h[b].push(g.vertices.length-1)}var g=new THREE.Geometry,f=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),h={};c("n1","n2",16755200);c("n2","n4",16755200);c("n4","n3",16755200);c("n3","n1",16755200);c("f1","f2",16755200);c("f2","f4",16755200);c("f4","f3",16755200);c("f3","f1",16755200);c("n1","f1",16755200);
c("n2","f2",16755200);c("n3","f3",16755200);c("n4","f4",16755200);c("p","n1",16711680);c("p","n2",16711680);c("p","n3",16711680);c("p","n4",16711680);c("u1","u2",43775);c("u2","u3",43775);c("u3","u1",43775);c("c","t",16777215);c("p","c",3355443);c("cn1","cn2",3355443);c("cn3","cn4",3355443);c("cf1","cf2",3355443);c("cf3","cf4",3355443);THREE.LineSegments.call(this,g,f);this.camera=b;this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()};THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;
THREE.CameraHelper.prototype.update=function(){var b,c,d=new THREE.Vector3,g=new THREE.Camera,f=function(f,k,l,m){d.set(k,l,m).unproject(g);f=c[f];if(void 0!==f)for(k=0,l=f.length;k<l;k++)b.vertices[f[k]].copy(d)};return function(){b=this.geometry;c=this.pointMap;g.projectionMatrix.copy(this.camera.projectionMatrix);f("c",0,0,-1);f("t",0,0,1);f("n1",-1,-1,-1);f("n2",1,-1,-1);f("n3",-1,1,-1);f("n4",1,1,-1);f("f1",-1,-1,1);f("f2",1,-1,1);f("f3",-1,1,1);f("f4",1,1,1);f("u1",.7,1.1,-1);f("u2",-.7,1.1,
-1);f("u3",0,2,-1);f("cf1",-1,0,1);f("cf2",1,0,1);f("cf3",0,-1,1);f("cf4",0,1,1);f("cn1",-1,0,-1);f("cn2",1,0,-1);f("cn3",0,-1,-1);f("cn4",0,1,-1);b.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(b,c){THREE.Object3D.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;c=c||1;var d=new THREE.Geometry;d.vertices.push(new THREE.Vector3(-c,c,0),new THREE.Vector3(c,c,0),new THREE.Vector3(c,-c,0),new THREE.Vector3(-c,-c,0),new THREE.Vector3(-c,c,0));var g=new THREE.LineBasicMaterial({fog:!1});g.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Line(d,g);this.add(this.lightPlane);
d=new THREE.Geometry;d.vertices.push(new THREE.Vector3,new THREE.Vector3);g=new THREE.LineBasicMaterial({fog:!1});g.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(d,g);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;
THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(){b.setFromMatrixPosition(this.light.matrixWorld);c.setFromMatrixPosition(this.light.target.matrixWorld);d.subVectors(c,b);this.lightPlane.lookAt(d);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(d);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();
THREE.EdgesHelper=function(b,c,d){c=void 0!==c?c:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(b.geometry,d),new THREE.LineBasicMaterial({color:c}));this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;
THREE.FaceNormalsHelper=function(b,c,d,g){this.object=b;this.size=void 0!==c?c:1;b=void 0!==d?d:16776960;g=void 0!==g?g:1;c=0;d=this.object.geometry;d instanceof THREE.Geometry?c=d.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");d=new THREE.BufferGeometry;c=new THREE.Float32Attribute(6*c,3);d.addAttribute("position",c);THREE.LineSegments.call(this,d,new THREE.LineBasicMaterial({color:b,linewidth:g}));this.matrixAutoUpdate=
!1;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;
THREE.FaceNormalsHelper.prototype.update=function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0);d.getNormalMatrix(this.object.matrixWorld);for(var g=this.object.matrixWorld,f=this.geometry.attributes.position,h=this.object.geometry,k=h.vertices,h=h.faces,l=0,m=0,p=h.length;m<p;m++){var t=h[m],u=t.normal;b.copy(k[t.a]).add(k[t.b]).add(k[t.c]).divideScalar(3).applyMatrix4(g);c.copy(u).applyMatrix3(d).normalize().multiplyScalar(this.size).add(b);
f.setXYZ(l,b.x,b.y,b.z);l+=1;f.setXYZ(l,c.x,c.y,c.z);l+=1}f.needsUpdate=!0;return this}}();
THREE.GridHelper=function(b,c){var d=new THREE.Geometry,g=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var f=-b;f<=b;f+=c){d.vertices.push(new THREE.Vector3(-b,0,f),new THREE.Vector3(b,0,f),new THREE.Vector3(f,0,-b),new THREE.Vector3(f,0,b));var h=0===f?this.color1:this.color2;d.colors.push(h,h,h,h)}THREE.LineSegments.call(this,d,g)};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.GridHelper.prototype.constructor=THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(b,c){this.color1.set(b);this.color2.set(c);this.geometry.colorsNeedUpdate=!0};
THREE.HemisphereLightHelper=function(b,c){THREE.Object3D.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var d=new THREE.SphereGeometry(c,4,2);d.rotateX(-Math.PI/2);for(var g=0;8>g;g++)d.faces[g].color=this.colors[4>g?0:1];g=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(d,g);this.add(this.lightSphere);this.update()};
THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var b=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(b.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(b,c){this.light=b;this.light.updateMatrixWorld();var d=new THREE.SphereGeometry(c,4,2),g=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});g.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,d,g);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;
THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(b){this.bones=this.getBoneList(b);for(var c=new THREE.Geometry,d=0;d<this.bones.length;d++)this.bones[d].parent instanceof THREE.Bone&&(c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3),c.colors.push(new THREE.Color(0,0,1)),c.colors.push(new THREE.Color(0,1,0)));c.dynamic=!0;d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,c,d);this.root=b;this.matrix=b.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(b){var c=[];b instanceof THREE.Bone&&c.push(b);for(var d=0;d<b.children.length;d++)c.push.apply(c,this.getBoneList(b.children[d]));return c};
THREE.SkeletonHelper.prototype.update=function(){for(var b=this.geometry,c=(new THREE.Matrix4).getInverse(this.root.matrixWorld),d=new THREE.Matrix4,g=0,f=0;f<this.bones.length;f++){var h=this.bones[f];h.parent instanceof THREE.Bone&&(d.multiplyMatrices(c,h.matrixWorld),b.vertices[g].setFromMatrixPosition(d),d.multiplyMatrices(c,h.parent.matrixWorld),b.vertices[g+1].setFromMatrixPosition(d),g+=2)}b.verticesNeedUpdate=!0;b.computeBoundingSphere()};
THREE.SpotLightHelper=function(b){THREE.Object3D.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;b=new THREE.CylinderGeometry(0,1,1,8,1,!0);b.translate(0,-.5,0);b.rotateX(-Math.PI/2);var c=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(b,c);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var b=new THREE.Vector3,c=new THREE.Vector3;return function(){var d=this.light.distance?this.light.distance:1E4,g=d*Math.tan(this.light.angle);this.cone.scale.set(g,g,d);b.setFromMatrixPosition(this.light.matrixWorld);c.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(c.sub(b));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(b,c,d,g){this.object=b;this.size=void 0!==c?c:1;b=void 0!==d?d:16711680;g=void 0!==g?g:1;c=0;d=this.object.geometry;d instanceof THREE.Geometry?c=3*d.faces.length:d instanceof THREE.BufferGeometry&&(c=d.attributes.normal.count);d=new THREE.BufferGeometry;c=new THREE.Float32Attribute(6*c,3);d.addAttribute("position",c);THREE.LineSegments.call(this,d,new THREE.LineBasicMaterial({color:b,linewidth:g}));this.matrixAutoUpdate=!1;this.update()};
THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;
THREE.VertexNormalsHelper.prototype.update=function(){var b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Matrix3;return function(){var g=["a","b","c"];this.object.updateMatrixWorld(!0);d.getNormalMatrix(this.object.matrixWorld);var f=this.object.matrixWorld,h=this.geometry.attributes.position,k=this.object.geometry;if(k instanceof THREE.Geometry)for(var l=k.vertices,m=k.faces,p=k=0,t=m.length;p<t;p++)for(var u=m[p],n=0,q=u.vertexNormals.length;n<q;n++){var r=u.vertexNormals[n];b.copy(l[u[g[n]]]).applyMatrix4(f);
c.copy(r).applyMatrix3(d).normalize().multiplyScalar(this.size).add(b);h.setXYZ(k,b.x,b.y,b.z);k+=1;h.setXYZ(k,c.x,c.y,c.z);k+=1}else if(k instanceof THREE.BufferGeometry)for(g=k.attributes.position,l=k.attributes.normal,n=k=0,q=g.count;n<q;n++)b.set(g.getX(n),g.getY(n),g.getZ(n)).applyMatrix4(f),c.set(l.getX(n),l.getY(n),l.getZ(n)),c.applyMatrix3(d).normalize().multiplyScalar(this.size).add(b),h.setXYZ(k,b.x,b.y,b.z),k+=1,h.setXYZ(k,c.x,c.y,c.z),k+=1;h.needsUpdate=!0;return this}}();
THREE.WireframeHelper=function(b,c){var d=void 0!==c?c:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(b.geometry),new THREE.LineBasicMaterial({color:d}));this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(b){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);
THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;THREE.MorphBlendMesh=function(b,c){THREE.Mesh.call(this,b,c);this.animationsMap={};this.animationsList=[];var d=this.geometry.morphTargets.length;this.createAnimation("__default",0,d-1,d/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh;
THREE.MorphBlendMesh.prototype.createAnimation=function(b,c,d,g){c={start:c,end:d,length:d-c+1,fps:g,duration:(d-c)/g,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[b]=c;this.animationsList.push(c)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(b){for(var c=/([a-z]+)_?(\d+)/,d,g={},f=this.geometry,h=0,k=f.morphTargets.length;h<k;h++){var l=f.morphTargets[h].name.match(c);if(l&&1<l.length){var m=l[1];g[m]||(g[m]={start:Infinity,end:-Infinity});l=g[m];h<l.start&&(l.start=h);h>l.end&&(l.end=h);d||(d=m)}}for(m in g)l=g[m],this.createAnimation(m,l.start,l.end,b);this.firstAnimation=d};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(b){if(b=this.animationsMap[b])b.direction=1,b.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(b){if(b=this.animationsMap[b])b.direction=-1,b.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(b,c){var d=this.animationsMap[b];d&&(d.fps=c,d.duration=(d.end-d.start)/d.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(b,c){var d=this.animationsMap[b];d&&(d.duration=c,d.fps=(d.end-d.start)/d.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(b,c){var d=this.animationsMap[b];d&&(d.weight=c)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(b,c){var d=this.animationsMap[b];d&&(d.time=c)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(b){var c=0;if(b=this.animationsMap[b])c=b.time;return c};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(b){var c=-1;if(b=this.animationsMap[b])c=b.duration;return c};THREE.MorphBlendMesh.prototype.playAnimation=function(b){var c=this.animationsMap[b];c?(c.time=0,c.active=!0):console.warn("THREE.MorphBlendMesh: animation["+b+"] undefined in .playAnimation()")};THREE.MorphBlendMesh.prototype.stopAnimation=function(b){if(b=this.animationsMap[b])b.active=!1};
THREE.MorphBlendMesh.prototype.update=function(b){for(var c=0,d=this.animationsList.length;c<d;c++){var g=this.animationsList[c];if(g.active){var f=g.duration/g.length;g.time+=g.direction*b;if(g.mirroredLoop){if(g.time>g.duration||0>g.time)g.direction*=-1,g.time>g.duration&&(g.time=g.duration,g.directionBackwards=!0),0>g.time&&(g.time=0,g.directionBackwards=!1)}else g.time%=g.duration,0>g.time&&(g.time+=g.duration);var h=g.start+THREE.Math.clamp(Math.floor(g.time/f),0,g.length-1),k=g.weight;h!==g.currentFrame&&
(this.morphTargetInfluences[g.lastFrame]=0,this.morphTargetInfluences[g.currentFrame]=1*k,this.morphTargetInfluences[h]=0,g.lastFrame=g.currentFrame,g.currentFrame=h);f=g.time%f/f;g.directionBackwards&&(f=1-f);g.currentFrame!==g.lastFrame?(this.morphTargetInfluences[g.currentFrame]=f*k,this.morphTargetInfluences[g.lastFrame]=(1-f)*k):this.morphTargetInfluences[g.currentFrame]=k}}};window.vanillaSmoothScroller={_data:{params:{}},getTargetNode:function(b){if(b.sourceEl==b.el)return b.el;b.el=b.el.parentNode;return this.getTargetNode(b)},getDocumentHeight:function(){var b=document.body,c=document.documentElement;return Math.max(b.scrollHeight,b.offsetHeight,c.clientHeight,c.scrollHeight,c.offsetHeight)},processDestination:function(b){return b?isNaN(b)?0<b.indexOf("%")?(b=parseInt(b,10),Math.floor(this.getDocumentHeight()/100*b)):"top"===b?0:"bottom"===b?this.getDocumentHeight()-
window.innerHeight:Math.floor((window.pageYOffset||document.documentElement.scrollTop)+document.querySelectorAll(b)[0].getBoundingClientRect().top):parseInt(b,10):!1},scroll:function(b){function c(){var b=window.vanillaSmoothScroller._data.params,f=b.destination,g=b.scrollMargin,d=b.scrollHeight,p=window.vanillaSmoothScroller.getDocumentHeight(),t=window.innerHeight,u=window.pageYOffset||document.documentElement.scrollTop,p=u<b.destination-b.gap&&u+t<p-b.scrollStep;b.scrollUp&&(g=b.scrollHeight,d=
b.scrollMargin,p=u>b.destination+b.gap&&u>b.scrollStep);p?(window.requestAnimationFrame(c),b.scrollCount+=1,b.scrollMargin=b.cosParameter-b.cosParameter*Math.cos(b.scrollCount*b.scrollStep),window.scrollTo(0,f+g-d)):window.scrollTo(0,b.destination)}b.preventDefault();var d=window.vanillaSmoothScroller,g=d._data,f;g.defaults={destination:0,duration:400,scrollUp:!0};b||(b={});b.target?f=d.getTargetNode({sourceEl:b.currentTarget,el:b.target}):b.nodeType||(f={dataset:b});g.params.destination=d.processDestination(f.dataset.to)||
g.defaults.destination;g.offset&&(g.params.destination="function"===typeof g.offset?g.params.destination-g.offset():g.params.destination-g.offset);g.params.duration=parseInt(f.dataset.duration,10)||g.defaults.duration;g.params.scrollUp=0<(window.pageYOffset||document.documentElement.scrollTop)-g.params.destination?!0:!1;g.params.scrollHeight=Math.abs((window.pageYOffset||document.documentElement.scrollTop)-g.params.destination);g.params.scrollStep=Math.PI/(g.params.duration/15);g.params.gap=Math.floor(100*
g.params.scrollStep);g.params.cosParameter=g.params.scrollHeight/2;g.params.scrollCount=0;g.params.scrollMargin=0;window.requestAnimationFrame(c);return!1},bind:function(b){if(!b||!b.selector)return!1;var c=this._data,d=[].slice.call(document.querySelectorAll(b.selector));c.offset=b.offset;for(c=d.length-1;0<=c;c--)d[c].addEventListener(b.event||"click",window.vanillaSmoothScroller.scroll,!1),b.event&&"click"!==b.event&&d[c].addEventListener("click",function(b){b.preventDefault();return!1},!1)}};(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"undefined"!==typeof exports?module.exports=b(require("jquery")):b(jQuery)})(function(b){var c=window.Slick||{},c=function(){var c=0;return function(g,f){var h;this.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:b(g),appendDots:b(g),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',
autoplay:!1,autoplaySpeed:3E3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(c,f){return b('<button type="button" data-role="none" role="button" tabindex="0" />').text(f+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,
slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1E3};this.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,
touchObject:{},transformsEnabled:!1,unslicked:!1};b.extend(this,this.initials);this.animProp=this.animType=this.activeBreakpoint=null;this.breakpoints=[];this.breakpointSettings=[];this.interrupted=this.focussed=this.cssTransitions=!1;this.hidden="hidden";this.paused=!0;this.respondTo=this.positionProp=null;this.rowCount=1;this.shouldClick=!0;this.$slider=b(g);this.transitionType=this.transformType=this.$slidesCache=null;this.visibilityChange="visibilitychange";this.windowWidth=0;this.windowTimer=
null;h=b(g).data("slick")||{};this.options=b.extend({},this.defaults,f,h);this.currentSlide=this.options.initialSlide;this.originalSettings=this.options;"undefined"!==typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange");this.autoPlay=b.proxy(this.autoPlay,this);this.autoPlayClear=b.proxy(this.autoPlayClear,this);this.autoPlayIterator=b.proxy(this.autoPlayIterator,
this);this.changeSlide=b.proxy(this.changeSlide,this);this.clickHandler=b.proxy(this.clickHandler,this);this.selectHandler=b.proxy(this.selectHandler,this);this.setPosition=b.proxy(this.setPosition,this);this.swipeHandler=b.proxy(this.swipeHandler,this);this.dragHandler=b.proxy(this.dragHandler,this);this.keyHandler=b.proxy(this.keyHandler,this);this.instanceUid=c++;this.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;this.registerBreakpoints();this.init(!0)}}();c.prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})};
c.prototype.addSlide=c.prototype.slickAdd=function(c,g,f){if("boolean"===typeof g)f=g,g=null;else if(0>g||g>=this.slideCount)return!1;this.unload();"number"===typeof g?0===g&&0===this.$slides.length?b(c).appendTo(this.$slideTrack):f?b(c).insertBefore(this.$slides.eq(g)):b(c).insertAfter(this.$slides.eq(g)):!0===f?b(c).prependTo(this.$slideTrack):b(c).appendTo(this.$slideTrack);this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);
this.$slides.each(function(c,f){b(f).attr("data-slick-index",c)});this.$slidesCache=this.$slides;this.reinit()};c.prototype.animateHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var b=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.animate({height:b},this.options.speed)}};c.prototype.animateSlide=function(c,g){var f={},h=this;h.animateHeight();!0===h.options.rtl&&!1===h.options.vertical&&(c=-c);!1===h.transformsEnabled?
!1===h.options.vertical?h.$slideTrack.animate({left:c},h.options.speed,h.options.easing,g):h.$slideTrack.animate({top:c},h.options.speed,h.options.easing,g):!1===h.cssTransitions?(!0===h.options.rtl&&(h.currentLeft=-h.currentLeft),b({animStart:h.currentLeft}).animate({animStart:c},{duration:h.options.speed,easing:h.options.easing,step:function(b){b=Math.ceil(b);f[h.animType]=!1===h.options.vertical?"translate("+b+"px, 0px)":"translate(0px,"+b+"px)";h.$slideTrack.css(f)},complete:function(){g&&g.call()}})):
(h.applyTransition(),c=Math.ceil(c),f[h.animType]=!1===h.options.vertical?"translate3d("+c+"px, 0px, 0px)":"translate3d(0px,"+c+"px, 0px)",h.$slideTrack.css(f),g&&setTimeout(function(){h.disableTransition();g.call()},h.options.speed))};c.prototype.getNavTarget=function(){var c=this.options.asNavFor;c&&null!==c&&(c=b(c).not(this.$slider));return c};c.prototype.asNavFor=function(c){var g=this.getNavTarget();null!==g&&"object"===typeof g&&g.each(function(){var f=b(this).slick("getSlick");f.unslicked||
f.slideHandler(c,!0)})};c.prototype.applyTransition=function(b){var c={};c[this.transitionType]=!1===this.options.fade?this.transformType+" "+this.options.speed+"ms "+this.options.cssEase:"opacity "+this.options.speed+"ms "+this.options.cssEase;!1===this.options.fade?this.$slideTrack.css(c):this.$slides.eq(b).css(c)};c.prototype.autoPlay=function(){this.autoPlayClear();this.slideCount>this.options.slidesToShow&&(this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed))};c.prototype.autoPlayClear=
function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)};c.prototype.autoPlayIterator=function(){var b=this.currentSlide+this.options.slidesToScroll;this.paused||this.interrupted||this.focussed||(!1===this.options.infinite&&(1===this.direction&&this.currentSlide+1===this.slideCount-1?this.direction=0:0===this.direction&&(b=this.currentSlide-this.options.slidesToScroll,0===this.currentSlide-1&&(this.direction=1))),this.slideHandler(b))};c.prototype.buildArrows=function(){!0===this.options.arrows&&
(this.$prevArrow=b(this.options.prevArrow).addClass("slick-arrow"),this.$nextArrow=b(this.options.nextArrow).addClass("slick-arrow"),this.slideCount>this.options.slidesToShow?(this.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),this.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.prependTo(this.options.appendArrows),this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.appendTo(this.options.appendArrows),
!0!==this.options.infinite&&this.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):this.$prevArrow.add(this.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))};c.prototype.buildDots=function(){var c,g;if(!0===this.options.dots&&this.slideCount>this.options.slidesToShow){this.$slider.addClass("slick-dotted");g=b("<ul />").addClass(this.options.dotsClass);for(c=0;c<=this.getDotCount();c+=1)g.append(b("<li />").append(this.options.customPaging.call(this,
this,c)));this.$dots=g.appendTo(this.options.appendDots);this.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}};c.prototype.buildOut=function(){this.$slides=this.$slider.children(this.options.slide+":not(.slick-cloned)").addClass("slick-slide");this.slideCount=this.$slides.length;this.$slides.each(function(c,g){b(g).attr("data-slick-index",c).data("originalStyling",b(g).attr("style")||"")});this.$slider.addClass("slick-slider");this.$slideTrack=0===this.slideCount?b('<div class="slick-track"/>').appendTo(this.$slider):
this.$slides.wrapAll('<div class="slick-track"/>').parent();this.$list=this.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent();this.$slideTrack.css("opacity",0);if(!0===this.options.centerMode||!0===this.options.swipeToSlide)this.options.slidesToScroll=1;b("img[data-lazy]",this.$slider).not("[src]").addClass("slick-loading");this.setupInfinite();this.buildArrows();this.buildDots();this.updateDots();this.setSlideClasses("number"===typeof this.currentSlide?this.currentSlide:0);
!0===this.options.draggable&&this.$list.addClass("draggable")};c.prototype.buildRows=function(){var b,c,f,h,k,l,m;h=document.createDocumentFragment();l=this.$slider.children();if(1<this.options.rows){m=this.options.slidesPerRow*this.options.rows;k=Math.ceil(l.length/m);for(b=0;b<k;b++){var p=document.createElement("div");for(c=0;c<this.options.rows;c++){var t=document.createElement("div");for(f=0;f<this.options.slidesPerRow;f++){var u=b*m+(c*this.options.slidesPerRow+f);l.get(u)&&t.appendChild(l.get(u))}p.appendChild(t)}h.appendChild(p)}this.$slider.empty().append(h);
this.$slider.children().children().children().css({width:100/this.options.slidesPerRow+"%",display:"inline-block"})}};c.prototype.checkResponsive=function(c,g){var f,h,k,l=!1;h=this.$slider.width();var m=window.innerWidth||b(window).width();"window"===this.respondTo?k=m:"slider"===this.respondTo?k=h:"min"===this.respondTo&&(k=Math.min(m,h));if(this.options.responsive&&this.options.responsive.length&&null!==this.options.responsive){h=null;for(f in this.breakpoints)this.breakpoints.hasOwnProperty(f)&&
(!1===this.originalSettings.mobileFirst?k<this.breakpoints[f]&&(h=this.breakpoints[f]):k>this.breakpoints[f]&&(h=this.breakpoints[f]));if(null!==h)if(null!==this.activeBreakpoint){if(h!==this.activeBreakpoint||g)this.activeBreakpoint=h,"unslick"===this.breakpointSettings[h]?this.unslick(h):(this.options=b.extend({},this.originalSettings,this.breakpointSettings[h]),!0===c&&(this.currentSlide=this.options.initialSlide),this.refresh(c)),l=h}else this.activeBreakpoint=h,"unslick"===this.breakpointSettings[h]?
this.unslick(h):(this.options=b.extend({},this.originalSettings,this.breakpointSettings[h]),!0===c&&(this.currentSlide=this.options.initialSlide),this.refresh(c)),l=h;else null!==this.activeBreakpoint&&(this.activeBreakpoint=null,this.options=this.originalSettings,!0===c&&(this.currentSlide=this.options.initialSlide),this.refresh(c),l=h);c||!1===l||this.$slider.trigger("breakpoint",[this,l])}};c.prototype.changeSlide=function(c,g){var f=b(c.currentTarget),h;f.is("a")&&c.preventDefault();f.is("li")||
(f=f.closest("li"));h=0!==this.slideCount%this.options.slidesToScroll?0:(this.slideCount-this.currentSlide)%this.options.slidesToScroll;switch(c.data.message){case "previous":f=0===h?this.options.slidesToScroll:this.options.slidesToShow-h;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide-f,!1,g);break;case "next":f=0===h?this.options.slidesToScroll:h;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide+f,!1,g);break;case "index":h=0===c.data.index?
0:c.data.index||f.index()*this.options.slidesToScroll,this.slideHandler(this.checkNavigable(h),!1,g),f.children().trigger("focus")}};c.prototype.checkNavigable=function(b){var c,f;c=this.getNavigableIndexes();f=0;if(b>c[c.length-1])b=c[c.length-1];else for(var h in c){if(b<c[h]){b=f;break}f=c[h]}return b};c.prototype.cleanUpEvents=function(){this.options.dots&&null!==this.$dots&&b("li",this.$dots).off("click.slick",this.changeSlide).off("mouseenter.slick",b.proxy(this.interrupt,this,!0)).off("mouseleave.slick",
b.proxy(this.interrupt,this,!1));this.$slider.off("focus.slick blur.slick");!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow&&this.$prevArrow.off("click.slick",this.changeSlide),this.$nextArrow&&this.$nextArrow.off("click.slick",this.changeSlide));this.$list.off("touchstart.slick mousedown.slick",this.swipeHandler);this.$list.off("touchmove.slick mousemove.slick",this.swipeHandler);this.$list.off("touchend.slick mouseup.slick",this.swipeHandler);this.$list.off("touchcancel.slick mouseleave.slick",
this.swipeHandler);this.$list.off("click.slick",this.clickHandler);b(document).off(this.visibilityChange,this.visibility);this.cleanUpSlideEvents();!0===this.options.accessibility&&this.$list.off("keydown.slick",this.keyHandler);!0===this.options.focusOnSelect&&b(this.$slideTrack).children().off("click.slick",this.selectHandler);b(window).off("orientationchange.slick.slick-"+this.instanceUid,this.orientationChange);b(window).off("resize.slick.slick-"+this.instanceUid,this.resize);b("[draggable!=true]",
this.$slideTrack).off("dragstart",this.preventDefault);b(window).off("load.slick.slick-"+this.instanceUid,this.setPosition);b(document).off("ready.slick.slick-"+this.instanceUid,this.setPosition)};c.prototype.cleanUpSlideEvents=function(){this.$list.off("mouseenter.slick",b.proxy(this.interrupt,this,!0));this.$list.off("mouseleave.slick",b.proxy(this.interrupt,this,!1))};c.prototype.cleanUpRows=function(){var b;1<this.options.rows&&(b=this.$slides.children().children(),b.removeAttr("style"),this.$slider.empty().append(b))};
c.prototype.clickHandler=function(b){!1===this.shouldClick&&(b.stopImmediatePropagation(),b.stopPropagation(),b.preventDefault())};c.prototype.destroy=function(c){this.autoPlayClear();this.touchObject={};this.cleanUpEvents();b(".slick-cloned",this.$slider).detach();this.$dots&&this.$dots.remove();this.$prevArrow&&this.$prevArrow.length&&(this.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),this.htmlExpr.test(this.options.prevArrow)&&
this.$prevArrow.remove());this.$nextArrow&&this.$nextArrow.length&&(this.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove());this.$slides&&(this.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){b(this).attr("style",b(this).data("originalStyling"))}),
this.$slideTrack.children(this.options.slide).detach(),this.$slideTrack.detach(),this.$list.detach(),this.$slider.append(this.$slides));this.cleanUpRows();this.$slider.removeClass("slick-slider");this.$slider.removeClass("slick-initialized");this.$slider.removeClass("slick-dotted");this.unslicked=!0;c||this.$slider.trigger("destroy",[this])};c.prototype.disableTransition=function(b){var c={};c[this.transitionType]="";!1===this.options.fade?this.$slideTrack.css(c):this.$slides.eq(b).css(c)};c.prototype.fadeSlide=
function(b,c){var f=this;!1===f.cssTransitions?(f.$slides.eq(b).css({zIndex:f.options.zIndex}),f.$slides.eq(b).animate({opacity:1},f.options.speed,f.options.easing,c)):(f.applyTransition(b),f.$slides.eq(b).css({opacity:1,zIndex:f.options.zIndex}),c&&setTimeout(function(){f.disableTransition(b);c.call()},f.options.speed))};c.prototype.fadeSlideOut=function(b){!1===this.cssTransitions?this.$slides.eq(b).animate({opacity:0,zIndex:this.options.zIndex-2},this.options.speed,this.options.easing):(this.applyTransition(b),
this.$slides.eq(b).css({opacity:0,zIndex:this.options.zIndex-2}))};c.prototype.filterSlides=c.prototype.slickFilter=function(b){null!==b&&(this.$slidesCache=this.$slides,this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.filter(b).appendTo(this.$slideTrack),this.reinit())};c.prototype.focusHandler=function(){var c=this;c.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(g){g.stopImmediatePropagation();var f=b(this);
setTimeout(function(){c.options.pauseOnFocus&&(c.focussed=f.is(":focus"),c.autoPlay())},0)})};c.prototype.getCurrent=c.prototype.slickCurrentSlide=function(){return this.currentSlide};c.prototype.getDotCount=function(){var b=0,c=0,f=0;if(!0===this.options.infinite)for(;b<this.slideCount;)++f,b=c+this.options.slidesToScroll,c+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;else if(!0===this.options.centerMode)f=this.slideCount;else for(;b<
this.slideCount;)++f,b=c+this.options.slidesToScroll,c+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;return f-1};c.prototype.getLeft=function(b){var c,f=0;this.slideOffset=0;c=this.$slides.first().outerHeight(!0);!0===this.options.infinite?(this.slideCount>this.options.slidesToShow&&(this.slideOffset=this.slideWidth*this.options.slidesToShow*-1,f=c*this.options.slidesToShow*-1),0!==this.slideCount%this.options.slidesToScroll&&b+this.options.slidesToScroll>
this.slideCount&&this.slideCount>this.options.slidesToShow&&(b>this.slideCount?(this.slideOffset=(this.options.slidesToShow-(b-this.slideCount))*this.slideWidth*-1,f=(this.options.slidesToShow-(b-this.slideCount))*c*-1):(this.slideOffset=this.slideCount%this.options.slidesToScroll*this.slideWidth*-1,f=this.slideCount%this.options.slidesToScroll*c*-1))):b+this.options.slidesToShow>this.slideCount&&(this.slideOffset=(b+this.options.slidesToShow-this.slideCount)*this.slideWidth,f=(b+this.options.slidesToShow-
this.slideCount)*c);this.slideCount<=this.options.slidesToShow&&(f=this.slideOffset=0);!0===this.options.centerMode&&!0===this.options.infinite?this.slideOffset+=this.slideWidth*Math.floor(this.options.slidesToShow/2)-this.slideWidth:!0===this.options.centerMode&&(this.slideOffset=0,this.slideOffset+=this.slideWidth*Math.floor(this.options.slidesToShow/2));c=!1===this.options.vertical?b*this.slideWidth*-1+this.slideOffset:b*c*-1+f;!0===this.options.variableWidth&&(f=this.slideCount<=this.options.slidesToShow||
!1===this.options.infinite?this.$slideTrack.children(".slick-slide").eq(b):this.$slideTrack.children(".slick-slide").eq(b+this.options.slidesToShow),c=!0===this.options.rtl?f[0]?-1*(this.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,!0===this.options.centerMode&&(f=this.slideCount<=this.options.slidesToShow||!1===this.options.infinite?this.$slideTrack.children(".slick-slide").eq(b):this.$slideTrack.children(".slick-slide").eq(b+this.options.slidesToShow+1),c=!0===this.options.rtl?
f[0]?-1*(this.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,c+=(this.$list.width()-f.outerWidth())/2));return c};c.prototype.getOption=c.prototype.slickGetOption=function(b){return this.options[b]};c.prototype.getNavigableIndexes=function(){var b=0,c=0,f=[],h;!1===this.options.infinite?h=this.slideCount:(b=-1*this.options.slidesToScroll,c=-1*this.options.slidesToScroll,h=2*this.slideCount);for(;b<h;)f.push(b),b=c+this.options.slidesToScroll,c+=this.options.slidesToScroll<=
this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow;return f};c.prototype.getSlick=function(){return this};c.prototype.getSlideCount=function(){var c=this,g,f,h;h=!0===c.options.centerMode?c.slideWidth*Math.floor(c.options.slidesToShow/2):0;return!0===c.options.swipeToSlide?(c.$slideTrack.find(".slick-slide").each(function(g,l){if(l.offsetLeft-h+b(l).outerWidth()/2>-1*c.swipeLeft)return f=l,!1}),g=Math.abs(b(f).attr("data-slick-index")-c.currentSlide)||1):c.options.slidesToScroll};
c.prototype.goTo=c.prototype.slickGoTo=function(b,c){this.changeSlide({data:{message:"index",index:parseInt(b)}},c)};c.prototype.init=function(c){b(this.$slider).hasClass("slick-initialized")||(b(this.$slider).addClass("slick-initialized"),this.buildRows(),this.buildOut(),this.setProps(),this.startLoad(),this.loadSlider(),this.initializeEvents(),this.updateArrows(),this.updateDots(),this.checkResponsive(!0),this.focusHandler());c&&this.$slider.trigger("init",[this]);!0===this.options.accessibility&&
this.initADA();this.options.autoplay&&(this.paused=!1,this.autoPlay())};c.prototype.initADA=function(){var c=this;c.$slides.add(c.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"});c.$slideTrack.attr("role","listbox");c.$slides.not(c.$slideTrack.find(".slick-cloned")).each(function(g){b(this).attr({role:"option","aria-describedby":"slick-slide"+c.instanceUid+g+""})});null!==c.$dots&&c.$dots.attr("role","tablist").find("li").each(function(g){b(this).attr({role:"presentation",
"aria-selected":"false","aria-controls":"navigation"+c.instanceUid+g+"",id:"slick-slide"+c.instanceUid+g+""})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar");c.activateADA()};c.prototype.initArrowEvents=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},this.changeSlide),this.$nextArrow.off("click.slick").on("click.slick",
{message:"next"},this.changeSlide))};c.prototype.initDotEvents=function(){if(!0===this.options.dots&&this.slideCount>this.options.slidesToShow)b("li",this.$dots).on("click.slick",{message:"index"},this.changeSlide);if(!0===this.options.dots&&!0===this.options.pauseOnDotsHover)b("li",this.$dots).on("mouseenter.slick",b.proxy(this.interrupt,this,!0)).on("mouseleave.slick",b.proxy(this.interrupt,this,!1))};c.prototype.initSlideEvents=function(){this.options.pauseOnHover&&(this.$list.on("mouseenter.slick",
b.proxy(this.interrupt,this,!0)),this.$list.on("mouseleave.slick",b.proxy(this.interrupt,this,!1)))};c.prototype.initializeEvents=function(){this.initArrowEvents();this.initDotEvents();this.initSlideEvents();this.$list.on("touchstart.slick mousedown.slick",{action:"start"},this.swipeHandler);this.$list.on("touchmove.slick mousemove.slick",{action:"move"},this.swipeHandler);this.$list.on("touchend.slick mouseup.slick",{action:"end"},this.swipeHandler);this.$list.on("touchcancel.slick mouseleave.slick",
{action:"end"},this.swipeHandler);this.$list.on("click.slick",this.clickHandler);b(document).on(this.visibilityChange,b.proxy(this.visibility,this));if(!0===this.options.accessibility)this.$list.on("keydown.slick",this.keyHandler);if(!0===this.options.focusOnSelect)b(this.$slideTrack).children().on("click.slick",this.selectHandler);b(window).on("orientationchange.slick.slick-"+this.instanceUid,b.proxy(this.orientationChange,this));b(window).on("resize.slick.slick-"+this.instanceUid,b.proxy(this.resize,
this));b("[draggable!=true]",this.$slideTrack).on("dragstart",this.preventDefault);b(window).on("load.slick.slick-"+this.instanceUid,this.setPosition);b(document).on("ready.slick.slick-"+this.instanceUid,this.setPosition)};c.prototype.initUI=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.show(),this.$nextArrow.show());!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.show()};c.prototype.keyHandler=function(b){b.target.tagName.match("TEXTAREA|INPUT|SELECT")||
(37===b.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:!0===this.options.rtl?"next":"previous"}}):39===b.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:!0===this.options.rtl?"previous":"next"}}))};c.prototype.lazyLoad=function(){function c(f){b("img[data-lazy]",f).each(function(){var c=b(this),f=b(this).attr("data-lazy"),h=document.createElement("img");h.onload=function(){c.animate({opacity:0},100,function(){c.attr("src",f).animate({opacity:1},
200,function(){c.removeAttr("data-lazy").removeClass("slick-loading")});g.$slider.trigger("lazyLoaded",[g,c,f])})};h.onerror=function(){c.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");g.$slider.trigger("lazyLoadError",[g,c,f])};h.src=f})}var g=this,f,h;!0===g.options.centerMode?!0===g.options.infinite?(f=g.currentSlide+(g.options.slidesToShow/2+1),h=f+g.options.slidesToShow+2):(f=Math.max(0,g.currentSlide-(g.options.slidesToShow/2+1)),h=2+(g.options.slidesToShow/
2+1)+g.currentSlide):(f=g.options.infinite?g.options.slidesToShow+g.currentSlide:g.currentSlide,h=Math.ceil(f+g.options.slidesToShow),!0===g.options.fade&&(0<f&&f--,h<=g.slideCount&&h++));f=g.$slider.find(".slick-slide").slice(f,h);c(f);g.slideCount<=g.options.slidesToShow?(f=g.$slider.find(".slick-slide"),c(f)):g.currentSlide>=g.slideCount-g.options.slidesToShow?(f=g.$slider.find(".slick-cloned").slice(0,g.options.slidesToShow),c(f)):0===g.currentSlide&&(f=g.$slider.find(".slick-cloned").slice(-1*
g.options.slidesToShow),c(f))};c.prototype.loadSlider=function(){this.setPosition();this.$slideTrack.css({opacity:1});this.$slider.removeClass("slick-loading");this.initUI();"progressive"===this.options.lazyLoad&&this.progressiveLazyLoad()};c.prototype.next=c.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})};c.prototype.orientationChange=function(){this.checkResponsive();this.setPosition()};c.prototype.pause=c.prototype.slickPause=function(){this.autoPlayClear();this.paused=
!0};c.prototype.play=c.prototype.slickPlay=function(){this.autoPlay();this.options.autoplay=!0;this.interrupted=this.focussed=this.paused=!1};c.prototype.postSlide=function(b){this.unslicked||(this.$slider.trigger("afterChange",[this,b]),this.animating=!1,this.setPosition(),this.swipeLeft=null,this.options.autoplay&&this.autoPlay(),!0===this.options.accessibility&&this.initADA())};c.prototype.prev=c.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})};c.prototype.preventDefault=
function(b){b.preventDefault()};c.prototype.progressiveLazyLoad=function(c){c=c||1;var g=this,f=b("img[data-lazy]",g.$slider),h,k;f.length?(h=f.first(),k=h.attr("data-lazy"),f=document.createElement("img"),f.onload=function(){h.attr("src",k).removeAttr("data-lazy").removeClass("slick-loading");!0===g.options.adaptiveHeight&&g.setPosition();g.$slider.trigger("lazyLoaded",[g,h,k]);g.progressiveLazyLoad()},f.onerror=function(){3>c?setTimeout(function(){g.progressiveLazyLoad(c+1)},500):(h.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),
g.$slider.trigger("lazyLoadError",[g,h,k]),g.progressiveLazyLoad())},f.src=k):g.$slider.trigger("allImagesLoaded",[g])};c.prototype.refresh=function(c){var g;g=this.slideCount-this.options.slidesToShow;!this.options.infinite&&this.currentSlide>g&&(this.currentSlide=g);this.slideCount<=this.options.slidesToShow&&(this.currentSlide=0);g=this.currentSlide;this.destroy(!0);b.extend(this,this.initials,{currentSlide:g});this.init();c||this.changeSlide({data:{message:"index",index:g}},!1)};c.prototype.registerBreakpoints=
function(){var c=this,g,f,h,k=c.options.responsive||null;if("array"===b.type(k)&&k.length){c.respondTo=c.options.respondTo||"window";for(g in k)if(h=c.breakpoints.length-1,f=k[g].breakpoint,k.hasOwnProperty(g)){for(;0<=h;)c.breakpoints[h]&&c.breakpoints[h]===f&&c.breakpoints.splice(h,1),h--;c.breakpoints.push(f);c.breakpointSettings[f]=k[g].settings}c.breakpoints.sort(function(b,f){return c.options.mobileFirst?b-f:f-b})}};c.prototype.reinit=function(){this.$slides=this.$slideTrack.children(this.options.slide).addClass("slick-slide");
this.slideCount=this.$slides.length;this.currentSlide>=this.slideCount&&0!==this.currentSlide&&(this.currentSlide-=this.options.slidesToScroll);this.slideCount<=this.options.slidesToShow&&(this.currentSlide=0);this.registerBreakpoints();this.setProps();this.setupInfinite();this.buildArrows();this.updateArrows();this.initArrowEvents();this.buildDots();this.updateDots();this.initDotEvents();this.cleanUpSlideEvents();this.initSlideEvents();this.checkResponsive(!1,!0);if(!0===this.options.focusOnSelect)b(this.$slideTrack).children().on("click.slick",
this.selectHandler);this.setSlideClasses("number"===typeof this.currentSlide?this.currentSlide:0);this.setPosition();this.focusHandler();this.paused=!this.options.autoplay;this.autoPlay();this.$slider.trigger("reInit",[this])};c.prototype.resize=function(){var c=this;b(window).width()!==c.windowWidth&&(clearTimeout(c.windowDelay),c.windowDelay=window.setTimeout(function(){c.windowWidth=b(window).width();c.checkResponsive();c.unslicked||c.setPosition()},50))};c.prototype.removeSlide=c.prototype.slickRemove=
function(b,c,f){b="boolean"===typeof b?!0===b?0:this.slideCount-1:!0===c?--b:b;if(1>this.slideCount||0>b||b>this.slideCount-1)return!1;this.unload();!0===f?this.$slideTrack.children().remove():this.$slideTrack.children(this.options.slide).eq(b).remove();this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);this.$slidesCache=this.$slides;this.reinit()};c.prototype.setCSS=function(b){var c={},f,h;!0===
this.options.rtl&&(b=-b);f="left"==this.positionProp?Math.ceil(b)+"px":"0px";h="top"==this.positionProp?Math.ceil(b)+"px":"0px";c[this.positionProp]=b;!1!==this.transformsEnabled&&(c={},c[this.animType]=!1===this.cssTransitions?"translate("+f+", "+h+")":"translate3d("+f+", "+h+", 0px)");this.$slideTrack.css(c)};c.prototype.setDimensions=function(){!1===this.options.vertical?!0===this.options.centerMode&&this.$list.css({padding:"0px "+this.options.centerPadding}):(this.$list.height(this.$slides.first().outerHeight(!0)*
this.options.slidesToShow),!0===this.options.centerMode&&this.$list.css({padding:this.options.centerPadding+" 0px"}));this.listWidth=this.$list.width();this.listHeight=this.$list.height();!1===this.options.vertical&&!1===this.options.variableWidth?(this.slideWidth=Math.ceil(this.listWidth/this.options.slidesToShow),this.$slideTrack.width(Math.ceil(this.slideWidth*this.$slideTrack.children(".slick-slide").length))):!0===this.options.variableWidth?this.$slideTrack.width(5E3*this.slideCount):(this.slideWidth=
Math.ceil(this.listWidth),this.$slideTrack.height(Math.ceil(this.$slides.first().outerHeight(!0)*this.$slideTrack.children(".slick-slide").length)));var b=this.$slides.first().outerWidth(!0)-this.$slides.first().width();!1===this.options.variableWidth&&this.$slideTrack.children(".slick-slide").width(this.slideWidth-b)};c.prototype.setFade=function(){var c=this,g;c.$slides.each(function(f,h){g=c.slideWidth*f*-1;!0===c.options.rtl?b(h).css({position:"relative",right:g,top:0,zIndex:c.options.zIndex-
2,opacity:0}):b(h).css({position:"relative",left:g,top:0,zIndex:c.options.zIndex-2,opacity:0})});c.$slides.eq(c.currentSlide).css({zIndex:c.options.zIndex-1,opacity:1})};c.prototype.setHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var b=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.css("height",b)}};c.prototype.setOption=c.prototype.slickSetOption=function(c,g,f){var h=this,k,l,m,p=!1,t;"object"===b.type(c)?(l=c,p=
g,t="multiple"):"string"===b.type(c)&&(l=c,m=g,p=f,"responsive"===c&&"array"===b.type(g)?t="responsive":"undefined"!==typeof g&&(t="single"));if("single"===t)h.options[l]=m;else if("multiple"===t)b.each(l,function(b,c){h.options[b]=c});else if("responsive"===t)for(k in m)if("array"!==b.type(h.options.responsive))h.options.responsive=[m[k]];else{for(c=h.options.responsive.length-1;0<=c;)h.options.responsive[c].breakpoint===m[k].breakpoint&&h.options.responsive.splice(c,1),c--;h.options.responsive.push(m[k])}p&&
(h.unload(),h.reinit())};c.prototype.setPosition=function(){this.setDimensions();this.setHeight();!1===this.options.fade?this.setCSS(this.getLeft(this.currentSlide)):this.setFade();this.$slider.trigger("setPosition",[this])};c.prototype.setProps=function(){var b=document.body.style;this.positionProp=!0===this.options.vertical?"top":"left";"top"===this.positionProp?this.$slider.addClass("slick-vertical"):this.$slider.removeClass("slick-vertical");void 0===b.WebkitTransition&&void 0===b.MozTransition&&
void 0===b.msTransition||!0!==this.options.useCSS||(this.cssTransitions=!0);this.options.fade&&("number"===typeof this.options.zIndex?3>this.options.zIndex&&(this.options.zIndex=3):this.options.zIndex=this.defaults.zIndex);void 0!==b.OTransform&&(this.animType="OTransform",this.transformType="-o-transform",this.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(this.animType=!1));void 0!==b.MozTransform&&(this.animType="MozTransform",this.transformType="-moz-transform",
this.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(this.animType=!1));void 0!==b.webkitTransform&&(this.animType="webkitTransform",this.transformType="-webkit-transform",this.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(this.animType=!1));void 0!==b.msTransform&&(this.animType="msTransform",this.transformType="-ms-transform",this.transitionType="msTransition",void 0===b.msTransform&&(this.animType=!1));
void 0!==b.transform&&!1!==this.animType&&(this.transformType=this.animType="transform",this.transitionType="transition");this.transformsEnabled=this.options.useTransform&&null!==this.animType&&!1!==this.animType};c.prototype.setSlideClasses=function(b){var c,f,h;f=this.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");this.$slides.eq(b).addClass("slick-current");!0===this.options.centerMode?(c=Math.floor(this.options.slidesToShow/2),!0===
this.options.infinite&&(b>=c&&b<=this.slideCount-1-c?this.$slides.slice(b-c,b+c+1).addClass("slick-active").attr("aria-hidden","false"):(h=this.options.slidesToShow+b,f.slice(h-c+1,h+c+2).addClass("slick-active").attr("aria-hidden","false")),0===b?f.eq(f.length-1-this.options.slidesToShow).addClass("slick-center"):b===this.slideCount-1&&f.eq(this.options.slidesToShow).addClass("slick-center")),this.$slides.eq(b).addClass("slick-center")):0<=b&&b<=this.slideCount-this.options.slidesToShow?this.$slides.slice(b,
b+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):f.length<=this.options.slidesToShow?f.addClass("slick-active").attr("aria-hidden","false"):(c=this.slideCount%this.options.slidesToShow,h=!0===this.options.infinite?this.options.slidesToShow+b:b,this.options.slidesToShow==this.options.slidesToScroll&&this.slideCount-b<this.options.slidesToShow?f.slice(h-(this.options.slidesToShow-c),h+c).addClass("slick-active").attr("aria-hidden","false"):f.slice(h,h+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden",
"false"));"ondemand"===this.options.lazyLoad&&this.lazyLoad()};c.prototype.setupInfinite=function(){var c,g,f;!0===this.options.fade&&(this.options.centerMode=!1);if(!0===this.options.infinite&&!1===this.options.fade&&(g=null,this.slideCount>this.options.slidesToShow)){f=!0===this.options.centerMode?this.options.slidesToShow+1:this.options.slidesToShow;for(c=this.slideCount;c>this.slideCount-f;--c)g=c-1,b(this.$slides[g]).clone(!0).attr("id","").attr("data-slick-index",g-this.slideCount).prependTo(this.$slideTrack).addClass("slick-cloned");
for(c=0;c<f;c+=1)g=c,b(this.$slides[g]).clone(!0).attr("id","").attr("data-slick-index",g+this.slideCount).appendTo(this.$slideTrack).addClass("slick-cloned");this.$slideTrack.find(".slick-cloned").find("[id]").each(function(){b(this).attr("id","")})}};c.prototype.interrupt=function(b){b||this.autoPlay();this.interrupted=b};c.prototype.selectHandler=function(c){c=b(c.target).is(".slick-slide")?b(c.target):b(c.target).parents(".slick-slide");(c=parseInt(c.attr("data-slick-index")))||(c=0);this.slideCount<=
this.options.slidesToShow?(this.setSlideClasses(c),this.asNavFor(c)):this.slideHandler(c)};c.prototype.slideHandler=function(b,c,f){var h,k,l=null,m=this;!0===m.animating&&!0===m.options.waitForAnimate||!0===m.options.fade&&m.currentSlide===b||m.slideCount<=m.options.slidesToShow||(!1===(c||!1)&&m.asNavFor(b),h=b,l=m.getLeft(h),c=m.getLeft(m.currentSlide),m.currentLeft=null===m.swipeLeft?c:m.swipeLeft,!1===m.options.infinite&&!1===m.options.centerMode&&(0>b||b>m.getDotCount()*m.options.slidesToScroll)?
!1===m.options.fade&&(h=m.currentSlide,!0!==f?m.animateSlide(c,function(){m.postSlide(h)}):m.postSlide(h)):!1===m.options.infinite&&!0===m.options.centerMode&&(0>b||b>m.slideCount-m.options.slidesToScroll)?!1===m.options.fade&&(h=m.currentSlide,!0!==f?m.animateSlide(c,function(){m.postSlide(h)}):m.postSlide(h)):(m.options.autoplay&&clearInterval(m.autoPlayTimer),k=0>h?0!==m.slideCount%m.options.slidesToScroll?m.slideCount-m.slideCount%m.options.slidesToScroll:m.slideCount+h:h>=m.slideCount?0!==m.slideCount%
m.options.slidesToScroll?0:h-m.slideCount:h,m.animating=!0,m.$slider.trigger("beforeChange",[m,m.currentSlide,k]),b=m.currentSlide,m.currentSlide=k,m.setSlideClasses(m.currentSlide),m.options.asNavFor&&(c=m.getNavTarget(),c=c.slick("getSlick"),c.slideCount<=c.options.slidesToShow&&c.setSlideClasses(m.currentSlide)),m.updateDots(),m.updateArrows(),!0===m.options.fade?(!0!==f?(m.fadeSlideOut(b),m.fadeSlide(k,function(){m.postSlide(k)})):m.postSlide(k),m.animateHeight()):!0!==f?m.animateSlide(l,function(){m.postSlide(k)}):
m.postSlide(k)))};c.prototype.startLoad=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.hide(),this.$nextArrow.hide());!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.hide();this.$slider.addClass("slick-loading")};c.prototype.swipeDirection=function(){var b;b=Math.round(180*Math.atan2(this.touchObject.startY-this.touchObject.curY,this.touchObject.startX-this.touchObject.curX)/Math.PI);0>b&&(b=360-Math.abs(b));return 45>=
b&&0<=b||360>=b&&315<=b?!1===this.options.rtl?"left":"right":135<=b&&225>=b?!1===this.options.rtl?"right":"left":!0===this.options.verticalSwiping?35<=b&&135>=b?"down":"up":"vertical"};c.prototype.swipeEnd=function(b){var c;this.interrupted=this.dragging=!1;this.shouldClick=10<this.touchObject.swipeLength?!1:!0;if(void 0===this.touchObject.curX)return!1;!0===this.touchObject.edgeHit&&this.$slider.trigger("edge",[this,this.swipeDirection()]);if(this.touchObject.swipeLength>=this.touchObject.minSwipe){b=
this.swipeDirection();switch(b){case "left":case "down":c=this.options.swipeToSlide?this.checkNavigable(this.currentSlide+this.getSlideCount()):this.currentSlide+this.getSlideCount();this.currentDirection=0;break;case "right":case "up":c=this.options.swipeToSlide?this.checkNavigable(this.currentSlide-this.getSlideCount()):this.currentSlide-this.getSlideCount(),this.currentDirection=1}"vertical"!=b&&(this.slideHandler(c),this.touchObject={},this.$slider.trigger("swipe",[this,b]))}else this.touchObject.startX!==
this.touchObject.curX&&(this.slideHandler(this.currentSlide),this.touchObject={})};c.prototype.swipeHandler=function(b){if(!(!1===this.options.swipe||"ontouchend"in document&&!1===this.options.swipe||!1===this.options.draggable&&-1!==b.type.indexOf("mouse")))switch(this.touchObject.fingerCount=b.originalEvent&&void 0!==b.originalEvent.touches?b.originalEvent.touches.length:1,this.touchObject.minSwipe=this.listWidth/this.options.touchThreshold,!0===this.options.verticalSwiping&&(this.touchObject.minSwipe=
this.listHeight/this.options.touchThreshold),b.data.action){case "start":this.swipeStart(b);break;case "move":this.swipeMove(b);break;case "end":this.swipeEnd(b)}};c.prototype.swipeMove=function(b){var c,f,h;f=void 0!==b.originalEvent?b.originalEvent.touches:null;if(!this.dragging||f&&1!==f.length)return!1;c=this.getLeft(this.currentSlide);this.touchObject.curX=void 0!==f?f[0].pageX:b.clientX;this.touchObject.curY=void 0!==f?f[0].pageY:b.clientY;this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curX-
this.touchObject.startX,2)));!0===this.options.verticalSwiping&&(this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curY-this.touchObject.startY,2))));f=this.swipeDirection();if("vertical"!==f){void 0!==b.originalEvent&&4<this.touchObject.swipeLength&&b.preventDefault();h=(!1===this.options.rtl?1:-1)*(this.touchObject.curX>this.touchObject.startX?1:-1);!0===this.options.verticalSwiping&&(h=this.touchObject.curY>this.touchObject.startY?1:-1);b=this.touchObject.swipeLength;
this.touchObject.edgeHit=!1;!1===this.options.infinite&&(0===this.currentSlide&&"right"===f||this.currentSlide>=this.getDotCount()&&"left"===f)&&(b=this.touchObject.swipeLength*this.options.edgeFriction,this.touchObject.edgeHit=!0);this.swipeLeft=!1===this.options.vertical?c+b*h:c+b*(this.$list.height()/this.listWidth)*h;!0===this.options.verticalSwiping&&(this.swipeLeft=c+b*h);if(!0===this.options.fade||!1===this.options.touchMove)return!1;if(!0===this.animating)return this.swipeLeft=null,!1;this.setCSS(this.swipeLeft)}};
c.prototype.swipeStart=function(b){var c;this.interrupted=!0;if(1!==this.touchObject.fingerCount||this.slideCount<=this.options.slidesToShow)return this.touchObject={},!1;void 0!==b.originalEvent&&void 0!==b.originalEvent.touches&&(c=b.originalEvent.touches[0]);this.touchObject.startX=this.touchObject.curX=void 0!==c?c.pageX:b.clientX;this.touchObject.startY=this.touchObject.curY=void 0!==c?c.pageY:b.clientY;this.dragging=!0};c.prototype.unfilterSlides=c.prototype.slickUnfilter=function(){null!==
this.$slidesCache&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.appendTo(this.$slideTrack),this.reinit())};c.prototype.unload=function(){b(".slick-cloned",this.$slider).remove();this.$dots&&this.$dots.remove();this.$prevArrow&&this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.remove();this.$nextArrow&&this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove();this.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden",
"true").css("width","")};c.prototype.unslick=function(b){this.$slider.trigger("unslick",[this,b]);this.destroy()};c.prototype.updateArrows=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&!this.options.infinite&&(this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===this.currentSlide?(this.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled",
"false")):this.currentSlide>=this.slideCount-this.options.slidesToShow&&!1===this.options.centerMode?(this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):this.currentSlide>=this.slideCount-1&&!0===this.options.centerMode&&(this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))};c.prototype.updateDots=function(){null!==
this.$dots&&(this.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))};c.prototype.visibility=function(){this.options.autoplay&&(this.interrupted=document[this.hidden]?!0:!1)};b.fn.slick=function(){var b=arguments[0],g=Array.prototype.slice.call(arguments,1),f=this.length,h,k;for(h=0;h<f;h++)if("object"==typeof b||"undefined"==typeof b?this[h].slick=
new c(this[h],b):k=this[h].slick[b].apply(this[h].slick,g),"undefined"!=typeof k)return k;return this}});var _self="undefined"!==typeof window?window:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var b=/\blang(?:uage)?-(\w+)\b/i,c=0,d=_self.Prism={util:{encode:function(b){return b instanceof g?new g(b.type,d.util.encode(b.content),b.alias):"Array"===d.util.type(b)?b.map(d.util.encode):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).match(/\[object (\w+)\]/)[1]},objId:function(b){b.__id||
Object.defineProperty(b,"__id",{value:++c});return b.__id},clone:function(b){switch(d.util.type(b)){case "Object":var c={},f;for(f in b)b.hasOwnProperty(f)&&(c[f]=d.util.clone(b[f]));return c;case "Array":return b.map&&b.map(function(b){return d.util.clone(b)})}return b}},languages:{extend:function(b,c){var f=d.util.clone(d.languages[b]),g;for(g in c)f[g]=c[g];return f},insertBefore:function(b,c,f,g){g=g||d.languages;var p=g[b];if(2==arguments.length){f=arguments[1];for(var t in f)f.hasOwnProperty(t)&&
(p[t]=f[t]);return p}var u={},n;for(n in p)if(p.hasOwnProperty(n)){if(n==c)for(t in f)f.hasOwnProperty(t)&&(u[t]=f[t]);u[n]=p[n]}d.languages.DFS(d.languages,function(c,f){f===g[b]&&c!=b&&(this[c]=u)});return g[b]=u},DFS:function(b,c,f,g){g=g||{};for(var p in b)b.hasOwnProperty(p)&&((c.call(b,p,b[p],f||p),"Object"!==d.util.type(b[p])||g[d.util.objId(b[p])])?"Array"!==d.util.type(b[p])||g[d.util.objId(b[p])]||(g[d.util.objId(b[p])]=!0,d.languages.DFS(b[p],c,p,g)):(g[d.util.objId(b[p])]=!0,d.languages.DFS(b[p],
c,null,g)))}},plugins:{},highlightAll:function(b,c){var f={callback:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",f);for(var g=f.elements||document.querySelectorAll(f.selector),p=0,t;t=g[p++];)d.highlightElement(t,!0===b,f.callback)},highlightElement:function(c,f,g){for(var m,p,t=c;t&&!b.test(t.className);)t=t.parentNode;t&&(m=(t.className.match(b)||[,""])[1],p=d.languages[m]);c.className=c.className.replace(b,
"").replace(/\s+/g," ")+" language-"+m;t=c.parentNode;/pre/i.test(t.nodeName)&&(t.className=t.className.replace(b,"").replace(/\s+/g," ")+" language-"+m);var t=c.textContent,u={element:c,language:m,grammar:p,code:t};t&&p?(d.hooks.run("before-highlight",u),f&&_self.Worker?(c=new Worker(d.filename),c.onmessage=function(b){u.highlightedCode=b.data;d.hooks.run("before-insert",u);u.element.innerHTML=u.highlightedCode;g&&g.call(u.element);d.hooks.run("after-highlight",u);d.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,
code:u.code,immediateClose:!0}))):(u.highlightedCode=d.highlight(u.code,u.grammar,u.language),d.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,g&&g.call(c),d.hooks.run("after-highlight",u),d.hooks.run("complete",u))):d.hooks.run("complete",u)},highlight:function(b,c,f){b=d.tokenize(b,c);return g.stringify(d.util.encode(b),f)},tokenize:function(b,c,f){f=d.Token;var g=[b],p=c.rest;if(p){for(var t in p)c[t]=p[t];delete c.rest}a:for(t in c)if(c.hasOwnProperty(t)&&c[t])for(var p=c[t],
p="Array"===d.util.type(p)?p:[p],u=0;u<p.length;++u)for(var n=p[u],q=n.inside,r=!!n.lookbehind,w=!!n.greedy,v=0,y=n.alias,n=n.pattern||n,A=0;A<g.length;A++){var x=g[A];if(g.length>b.length)break a;if(!(x instanceof f)){n.lastIndex=0;var z=n.exec(x),C=1;if(!z&&w&&A!=g.length-1){var C=g[A+1].matchedStr||g[A+1],D=x+C;A<g.length-2&&(D+=g[A+2].matchedStr||g[A+2]);n.lastIndex=0;z=n.exec(D);if(!z)continue;var B=z.index+(r?z[1].length:0);if(B>=x.length)continue;var F=z.index+z[0].length,x=x.length+C.length,
C=3;if(F<=x){if(g[A+1].greedy)continue;C=2;D=D.slice(0,x)}x=D}z&&(r&&(v=z[1].length),B=z.index+v,z=z[0].slice(v),F=B+z.length,D=x.slice(0,B),F=x.slice(F),C=[A,C],D&&C.push(D),z=new f(t,q?d.tokenize(z,q):z,y,z,w),C.push(z),F&&C.push(F),Array.prototype.splice.apply(g,C))}}return g},hooks:{all:{},add:function(b,c){var f=d.hooks.all;f[b]=f[b]||[];f[b].push(c)},run:function(b,c){var f=d.hooks.all[b];if(f&&f.length)for(var g=0,p;p=f[g++];)p(c)}}},g=d.Token=function(b,c,f,g,d){this.type=b;this.content=c;
this.alias=f;this.matchedStr=g||null;this.greedy=!!d};g.stringify=function(b,c,f){if("string"==typeof b)return b;if("Array"===d.util.type(b))return b.map(function(f){return g.stringify(f,c,b)}).join("");f={type:b.type,content:g.stringify(b.content,c,f),tag:"span",classes:["token",b.type],attributes:{},language:c,parent:f};"comment"==f.type&&(f.attributes.spellcheck="true");if(b.alias){var m="Array"===d.util.type(b.alias)?b.alias:[b.alias];Array.prototype.push.apply(f.classes,m)}d.hooks.run("wrap",
f);var m="",p;for(p in f.attributes)m+=(m?" ":"")+p+'="'+(f.attributes[p]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+m+">"+f.content+"</"+f.tag+">"};if(!_self.document){if(!_self.addEventListener)return _self.Prism;_self.addEventListener("message",function(b){b=JSON.parse(b.data);var c=b.language,f=b.immediateClose;_self.postMessage(d.highlight(b.code,d.languages[c],c));f&&_self.close()},!1);return _self.Prism}var f=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();
f&&(d.filename=f.src,document.addEventListener&&!f.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",d.highlightAll));return _self.Prism}();"undefined"!==typeof module&&module.exports&&(module.exports=Prism);"undefined"!==typeof global&&(global.Prism=Prism);(function(){Prism.languages.graql={comment:{pattern:/#.*/,alias:"comment"},string:{pattern:/".*?"/,alias:"string"},keyword:{pattern:/(to|select|insert|delete|where|group|by|isa|has|as|value|id|of|plays-role|has-role|ako|limit|offset|order|format)(?![-\$a-zA-Z_0-9])/,alias:"keyword"},special:{pattern:/graql>|results>|\.\.\./},month:{pattern:/Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec(?!{-\$a-zA-Z_0-9})/,alias:"number"},variable:{pattern:/\$[a-zA-Z_][-a-zA-Z_0-9]*(?![-\$a-zA-Z_0-9])/,alias:"variable"},
type:{pattern:/[-a-zA-Z_][-a-zA-Z_0-9]*(?![-\$a-zA-Z_0-9])/,alias:"function"},number:{pattern:/[0-9]+(\.[0-9][0-9]*)?/,alias:"number"},operator:{pattern:/=|!=|>|<|>=|<=/,alias:"operator"}}})();!function(){function b(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function c(b,c){return b<c?-1:b>c?1:b>=c?0:NaN}function d(b){return null===b?NaN:+b}function g(b){return!isNaN(b)}function f(b){return{left:function(c,f,h,g){3>arguments.length&&(h=0);4>arguments.length&&(g=c.length);for(;h<g;){var d=h+g>>>1;0>b(c[d],f)?h=d+1:g=d}return h},right:function(c,f,h,g){3>arguments.length&&(h=0);4>arguments.length&&(g=c.length);for(;h<g;){var d=h+g>>>1;0<b(c[d],
f)?g=d:h=d+1}return h}}}function h(b){return b.length}function k(b,c){for(var f in c)Object.defineProperty(b.prototype,f,{value:c[f],enumerable:!1})}function l(){this._=Object.create(null)}function m(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function p(b){return"\x00"===(b+="")[0]?b.slice(1):b}function t(b){return m(b)in this._}function u(b){return(b=m(b))in this._&&delete this._[b]}function n(){var b=[],c;for(c in this._)b.push(p(c));return b}function q(){var b=0,c;for(c in this._)++b;
return b}function r(){for(var b in this._)return!1;return!0}function w(){this._=Object.create(null)}function v(b){return b}function y(b,c,f){return function(){var h=f.apply(c,arguments);return h===c?b:h}}function A(b,c){if(c in b)return c;c=c.charAt(0).toUpperCase()+c.slice(1);for(var f=0,h=Df.length;f<h;++f){var g=Df[f]+c;if(g in b)return g}}function x(){}function z(){}function C(b){function c(){for(var h=f,g=-1,d=h.length,k;++g<d;)(k=h[g].on)&&k.apply(this,arguments);return b}var f=[],h=new l;c.on=
function(c,g){var d=h.get(c),k;if(2>arguments.length)return d&&d.on;d&&(d.on=null,f=f.slice(0,k=f.indexOf(d)).concat(f.slice(k+1)),h.remove(c));g&&f.push(h.set(c,{on:g}));return b};return c}function D(){P.event.preventDefault()}function B(){for(var b=P.event,c;c=b.sourceEvent;)b=c;return b}function F(b){for(var c=new z,f=0,h=arguments.length;++f<h;)c[arguments[f]]=C(c);c.of=function(f,h){return function(g){try{var d=g.sourceEvent=P.event;g.target=b;P.event=g;c[g.type].apply(f,h)}finally{P.event=d}}};
return c}function H(b){Qd(b,Aa);return b}function I(b){return"function"===typeof b?b:function(){return Ie(b,this)}}function G(b){return"function"===typeof b?b:function(){return Je(b,this)}}function M(b,c){function f(){this.removeAttribute(b)}function h(){this.removeAttributeNS(b.space,b.local)}function g(){this.setAttribute(b,c)}function d(){this.setAttributeNS(b.space,b.local,c)}function k(){var f=c.apply(this,arguments);null==f?this.removeAttribute(b):this.setAttribute(b,f)}function l(){var f=c.apply(this,
arguments);null==f?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,f)}b=P.ns.qualify(b);return null==c?b.local?h:f:"function"===typeof c?b.local?l:k:b.local?d:g}function J(b){return b.trim().replace(/\s+/g," ")}function K(b){return new RegExp("(?:^|\\s+)"+P.requote(b)+"(?:\\s+|$)","g")}function L(b,c){function f(){for(var h=-1;++h<g;)b[h](this,c)}function h(){for(var f=-1,d=c.apply(this,arguments);++f<g;)b[f](this,d)}b=(b+"").trim().split(/^|\s+/).map(N);var g=b.length;
return"function"===typeof c?h:f}function N(b){var c=K(b);return function(f,h){if(g=f.classList)return h?g.add(b):g.remove(b);var g=f.getAttribute("class")||"";h?(c.lastIndex=0,c.test(g)||f.setAttribute("class",J(g+" "+b))):f.setAttribute("class",J(g.replace(c," ")))}}function Q(b,c,f){function h(){this.style.removeProperty(b)}function g(){this.style.setProperty(b,c,f)}function d(){var h=c.apply(this,arguments);null==h?this.style.removeProperty(b):this.style.setProperty(b,h,f)}return null==c?h:"function"===
typeof c?d:g}function S(b,c){function f(){delete this[b]}function h(){this[b]=c}function g(){var f=c.apply(this,arguments);null==f?delete this[b]:this[b]=f}return null==c?f:"function"===typeof c?g:h}function U(b){function c(){var f=this.ownerDocument,h=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===h&&"http://www.w3.org/1999/xhtml"===f.documentElement.namespaceURI?f.createElement(b):f.createElementNS(h,b)}function f(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=P.ns.qualify(b)).local?f:c}function V(){var b=this.parentNode;b&&b.removeChild(this)}function W(b){return function(){return Rd(this,b)}}function X(b){arguments.length||(b=c);return function(c,f){return c&&f?b(c.__data__,f.__data__):!c-!f}}function ea(b,c){for(var f=0,h=b.length;f<h;f++)for(var g=b[f],d=0,k=g.length,l;d<k;d++)(l=g[d])&&c(l,d,f);return b}function da(b){Qd(b,Xb);return b}function R(b){var c,f;return function(h,g,d){h=b[d].update;var k=h.length;d!=f&&(f=d,c=0);for(g>=c&&
(c=g+1);!(g=h[c])&&++c<k;);return g}}function Y(b,c,f){function h(){var c=this[k];c&&(this.removeEventListener(b,c,c.$),delete this[k])}function g(){var d=m(c,Mb(arguments));h.call(this);this.addEventListener(b,this[k]=d,d.$=f);d._=c}function d(){var c=new RegExp("^__on([^.]+)"+P.requote(b)+"$"),f,h;for(h in this)if(f=h.match(c)){var g=this[h];this.removeEventListener(f[1],g,g.$);delete this[h]}}var k="__on"+b,l=b.indexOf("."),m=Z;0<l&&(b=b.slice(0,l));var n=Ke.get(b);n&&(b=n,m=ca);return l?c?g:h:
c?x:d}function Z(b,c){return function(f){var h=P.event;P.event=f;c[0]=this.__data__;try{b.apply(this,c)}finally{P.event=h}}}function ca(b,c){var f=Z(b,c);return function(b){var c=b.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||f.call(this,b)}}function ba(c){var f=".dragsuppress-"+ ++ih,h="click"+f,g=P.select(b(c)).on("touchmove"+f,D).on("dragstart"+f,D).on("selectstart"+f,D);null==zc&&(zc="onselectstart"in c?!1:A(c.style,"userSelect"));if(zc){var d=(c&&(c.ownerDocument||c.document||
c).documentElement).style,k=d[zc];d[zc]="none"}return function(b){g.on(f,null);zc&&(d[zc]=k);if(b){var c=function(){g.on(h,null)};g.on(h,function(){D();c()},!0);setTimeout(c,0)}}}function aa(c,f){f.changedTouches&&(f=f.changedTouches[0]);var h=c.ownerSVGElement||c;if(h.createSVGPoint){var g=h.createSVGPoint();if(0>Le&&(h=b(c),h.scrollX||h.scrollY)){var h=P.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),d=h[0][0].getScreenCTM();Le=
!(d.f||d.e);h.remove()}Le?(g.x=f.pageX,g.y=f.pageY):(g.x=f.clientX,g.y=f.clientY);g=g.matrixTransform(c.getScreenCTM().inverse());return[g.x,g.y]}g=c.getBoundingClientRect();return[f.clientX-g.left-c.clientLeft,f.clientY-g.top-c.clientTop]}function ra(){return P.event.changedTouches[0].identifier}function pa(b,c,f){return(c[0]-b[0])*(f[1]-b[1])-(c[1]-b[1])*(f[0]-b[0])}function Ba(b){return 1<b?0:-1>b?la:Math.acos(b)}function wa(b){return 1<b?Ja:-1>b?-Ja:Math.asin(b)}function sa(b){return((b=Math.exp(b))+
1/b)/2}function qa(b){return(b=Math.sin(b/2))*b}function ga(){}function E(b,c,f){return this instanceof E?void(this.h=+b,this.s=+c,this.l=+f):2>arguments.length?b instanceof E?new E(b.h,b.s,b.l):Ea(""+b,Ma,E):new E(b,c,f)}function Ca(b,c,f){function h(b){360<b?b-=360:0>b&&(b+=360);return 60>b?g+(d-g)*b/60:180>b?d:240>b?g+(d-g)*(240-b)/60:g}var g,d;b=isNaN(b)?0:0>(b%=360)?b+360:b;c=isNaN(c)?0:0>c?0:1<c?1:c;f=0>f?0:1<f?1:f;d=.5>=f?f*(1+c):f+c-f*c;g=2*f-d;return new Na(Math.round(255*h(b+120)),Math.round(255*
h(b)),Math.round(255*h(b-120)))}function ta(b,c,f){return this instanceof ta?void(this.h=+b,this.c=+c,this.l=+f):2>arguments.length?b instanceof ta?new ta(b.h,b.c,b.l):b instanceof ya?Ia(b.l,b.a,b.b):Ia((b=Wa((b=P.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new ta(b,c,f)}function oa(b,c,f){isNaN(b)&&(b=0);isNaN(c)&&(c=0);return new ya(f,Math.cos(b*=ma)*c,Math.sin(b)*c)}function ya(b,c,f){return this instanceof ya?void(this.l=+b,this.a=+c,this.b=+f):2>arguments.length?b instanceof ya?new ya(b.l,b.a,b.b):b instanceof
ta?oa(b.h,b.c,b.l):Wa((b=Na(b)).r,b.g,b.b):new ya(b,c,f)}function Pa(b,c,f){b=(b+16)/116;f=b-f/200;c=Za(b+c/500)*Ef;b=Za(b)*Ff;f=Za(f)*Gf;return new Na($a(3.2404542*c-1.5371385*b-.4985314*f),$a(-.969266*c+1.8760108*b+.041556*f),$a(.0556434*c-.2040259*b+1.0572252*f))}function Ia(b,c,f){return 0<b?new ta(Math.atan2(f,c)*Ga,Math.sqrt(c*c+f*f),b):new ta(NaN,NaN,b)}function Za(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function La(b){return.008856<b?Math.pow(b,1/3):7.787037*b+4/29}function $a(b){return Math.round(255*
(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Na(b,c,f){return this instanceof Na?void(this.r=~~b,this.g=~~c,this.b=~~f):2>arguments.length?b instanceof Na?new Na(b.r,b.g,b.b):Ea(""+b,Na,Ca):new Na(b,c,f)}function kb(b){return new Na(b>>16,b>>8&255,b&255)+""}function eb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function Ea(b,c,f){var h=0,g=0,d=0,k,l;if(k=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase()))switch(l=k[2].split(","),k[1]){case "hsl":return f(parseFloat(l[0]),
parseFloat(l[1])/100,parseFloat(l[2])/100);case "rgb":return c(Va(l[0]),Va(l[1]),Va(l[2]))}if(f=Td.get(b))return c(f.r,f.g,f.b);null==b||"#"!==b.charAt(0)||isNaN(f=parseInt(b.slice(1),16))||(4===b.length?(h=(f&3840)>>4,h|=h>>4,g=f&240,g|=g>>4,d=f&15,d|=d<<4):7===b.length&&(h=(f&16711680)>>16,g=(f&65280)>>8,d=f&255));return c(h,g,d)}function Ma(b,c,f){var h=Math.min(b/=255,c/=255,f/=255),g=Math.max(b,c,f),d=g-h,k=(g+h)/2;d?(h=.5>k?d/(g+h):d/(2-g-h),b=60*(b==g?(c-f)/d+(c<f?6:0):c==g?(f-b)/d+2:(b-c)/
d+4)):(b=NaN,h=0<k&&1>k?0:b);return new E(b,h,k)}function Wa(b,c,f){b=wb(b);c=wb(c);f=wb(f);var h=La((.4124564*b+.3575761*c+.1804375*f)/Ef),g=La((.2126729*b+.7151522*c+.072175*f)/Ff);b=La((.0193339*b+.119192*c+.9503041*f)/Gf);return ya(116*g-16,500*(h-g),200*(g-b))}function wb(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Va(b){var c=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*c):c}function ka(b){return"function"===typeof b?b:function(){return b}}function O(b){return function(c,
f,h){2===arguments.length&&"function"===typeof f&&(h=f,f=null);return ja(c,f,b,h)}}function ja(b,c,f,h){function g(){var b=m.status,c,h;if(h=!b)h=(h=m.responseType)&&"text"!==h?m.response:m.responseText;if(h||200<=b&&300>b||304===b){try{c=f.call(d,m)}catch(l){k.error.call(d,l);return}k.load.call(d,c)}else k.error.call(d,m)}var d={},k=P.dispatch("beforesend","progress","load","error"),l={},m=new XMLHttpRequest,n=null;!this.XDomainRequest||"withCredentials"in m||!/^(http(s)?:)?\/\//.test(b)||(m=new XDomainRequest);
"onload"in m?m.onload=m.onerror=g:m.onreadystatechange=function(){3<m.readyState&&g()};m.onprogress=function(b){var c=P.event;P.event=b;try{k.progress.call(d,m)}finally{P.event=c}};d.header=function(b,c){b=(b+"").toLowerCase();if(2>arguments.length)return l[b];null==c?delete l[b]:l[b]=c+"";return d};d.mimeType=function(b){if(!arguments.length)return c;c=null==b?null:b+"";return d};d.responseType=function(b){if(!arguments.length)return n;n=b;return d};d.response=function(b){f=b;return d};["get","post"].forEach(function(b){d[b]=
function(){return d.send.apply(d,[b].concat(Mb(arguments)))}});d.send=function(f,h,g){2===arguments.length&&"function"===typeof h&&(g=h,h=null);m.open(f,b,!0);null==c||"accept"in l||(l.accept=c+",*/*");if(m.setRequestHeader)for(var r in l)m.setRequestHeader(r,l[r]);null!=c&&m.overrideMimeType&&m.overrideMimeType(c);null!=n&&(m.responseType=n);if(null!=g)d.on("error",g).on("load",function(b){g(null,b)});k.beforesend.call(d,m);m.send(null==h?null:h);return d};d.abort=function(){m.abort();return d};
P.rebind(d,k,"on");return null==h?d:d.get(jb(h))}function jb(b){return 1===b.length?function(c,f){b(null==c?f:null)}:b}function ha(b,c,f){var h=arguments.length;2>h&&(c=0);3>h&&(f=Date.now());h={c:b,t:f+c,n:null};Ud?Ud.n=h:Vd=h;Ud=h;Wd||(Xd=clearTimeout(Xd),Wd=1,Hf(Da));return h}function Da(){var b=Sa(),b=cb()-b;24<b?(isFinite(b)&&(clearTimeout(Xd),Xd=setTimeout(Da,b)),Wd=0):(Wd=1,Hf(Da))}function Sa(){for(var b=Date.now(),c=Vd;c;)b>=c.t&&c.c(b-c.t)&&(c.c=null),c=c.n;return b}function cb(){for(var b,
c=Vd,f=Infinity;c;)c.c?(c.t<f&&(f=c.t),c=(b=c).n):c=b?b.n=c.n:Vd=c.n;Ud=b;return f}function gb(b,c){return c-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function xb(b){var c=b.decimal,f=b.thousands,h=b.grouping,g=b.currency,d=h&&f?function(b,c){for(var g=b.length,d=[],k=0,l=h[0],m=0;0<g&&0<l;){m+l+1>c&&(l=Math.max(1,c-m));d.push(b.substring(g-=l,g+l));if((m+=l+1)>c)break;l=h[k=(k+1)%h.length]}return d.reverse().join(f)}:v;return function(b){b=If.exec(b);var f=b[1]||" ",h=b[2]||">",k=b[3]||"-",l=b[4]||
"",m=b[5],n=+b[6],r=b[7],q=b[8],ua=b[9],p=1,u="",v="",w=!1,t=!0;q&&(q=+q.substring(1));if(m||"0"===f&&"="===h)m=f="0",h="=";switch(ua){case "n":r=!0;ua="g";break;case "%":p=100;v="%";ua="f";break;case "p":p=100;v="%";ua="r";break;case "b":case "o":case "x":case "X":"#"===l&&(u="0"+ua.toLowerCase());case "c":t=!1;case "d":w=!0;q=0;break;case "s":p=-1,ua="r"}"$"===l&&(u=g[0],v=g[1]);"r"!=ua||q||(ua="g");if(null!=q)if("g"==ua)q=Math.max(1,Math.min(21,q));else if("e"==ua||"f"==ua)q=Math.max(0,Math.min(20,
q));var ua=jh.get(ua)||Ya,y=m&&r;return function(b){var g=v;if(w&&b%1)return"";var l=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===k?"":k;0>p?(g=P.formatPrefix(b,q),b=g.scale(b),g=g.symbol+v):b*=p;b=ua(b,q);var A=b.lastIndexOf("."),x;0>A?(A=t?b.lastIndexOf("e"):-1,0>A?(x=b,b=""):(x=b.substring(0,A),b=b.substring(A))):(x=b.substring(0,A),b=c+b.substring(A+1));!m&&r&&(x=d(x,Infinity));var A=u.length+x.length+b.length+(y?0:l.length),z=A<n?Array(A=n-A+1).join(f):"";y&&(x=d(z+x,z.length?n-b.length:Infinity));l+=
u;b=x+b;return("<"===h?l+b+z:">"===h?z+l+b:"^"===h?z.substring(0,A>>=1)+l+b+z.substring(A):l+(y?b:z+b))+g}}}function Ya(b){return b+""}function Oa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ha(b,c,f){function h(c){var f=b(c),g=d(f,1);return c-f<g-c?f:g}function g(f){c(f=b(new bb(f-1)),1);return f}function d(b,f){c(b=new bb(+b),f);return b}function k(b,h,d){b=g(b);var l=[];if(1<d)for(;b<h;)f(b)%d||l.push(new Date(+b)),c(b,1);else for(;b<h;)l.push(new Date(+b)),
c(b,1);return l}b.floor=b;b.round=h;b.ceil=g;b.offset=d;b.range=k;var l=b.utc=Ta(b);l.floor=l;l.round=Ta(h);l.ceil=Ta(g);l.offset=Ta(d);l.range=function(b,c,f){try{bb=Oa;var h=new Oa;h._=b;return k(h,c,f)}finally{bb=Date}};return b}function Ta(b){return function(c,f){try{bb=Oa;var h=new Oa;h._=c;return b(h,f)._}finally{bb=Date}}}function yb(b){function c(b){function h(c){for(var f=[],d=-1,k=0,l,m;++d<g;)if(37===b.charCodeAt(d)){f.push(b.slice(k,d));null!=(l=Jf[k=b.charAt(++d)])&&(k=b.charAt(++d));
if(m=z[k])k=m(c,null==l?"e"===k?" ":"0":l);f.push(k);k=d+1}f.push(b.slice(k,d));return f.join("")}var g=b.length;h.parse=function(c){var h={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(h,b,c,0)!=c.length)return null;"p"in h&&(h.H=h.H%12+12*h.p);c=null!=h.Z&&bb!==Oa;var g=new (c?Oa:bb);"j"in h?g.setFullYear(h.y,0,h.j):"W"in h||"U"in h?("w"in h||(h.w="W"in h?1:0),g.setFullYear(h.y,0,1),g.setFullYear(h.y,0,"W"in h?(h.w+6)%7+7*h.W-(g.getDay()+5)%7:h.w+7*h.U-(g.getDay()+6)%7)):g.setFullYear(h.y,h.m,h.d);
g.setHours(h.H+(h.Z/100|0),h.M+h.Z%100,h.S,h.L);return c?g._:g};h.toString=function(){return b};return h}function f(b,c,h,g){for(var d,k=0,l=c.length,m=h.length;k<l;){if(g>=m)return-1;d=c.charCodeAt(k++);if(37===d){if(d=c.charAt(k++),d=C[d in Jf?c.charAt(k++):d],!d||0>(g=d(b,h,g)))return-1}else if(d!=h.charCodeAt(g++))return-1}return g}var h=b.dateTime,g=b.date,d=b.time,k=b.periods,l=b.days,m=b.shortDays,n=b.months,r=b.shortMonths;c.utc=function(b){function f(b){try{bb=Oa;var c=new bb;c._=b;return h(c)}finally{bb=
Date}}var h=c(b);f.parse=function(b){try{bb=Oa;var c=h.parse(b);return c&&c._}finally{bb=Date}};f.toString=h.toString;return f};c.multi=c.utc.multi=Bd;var q=P.map(),p=zb(l),u=Ab(l),v=zb(m),w=Ab(m),t=zb(n),y=Ab(n),A=zb(r),x=Ab(r);k.forEach(function(b,c){q.set(b.toLowerCase(),c)});var z={a:function(b){return m[b.getDay()]},A:function(b){return l[b.getDay()]},b:function(b){return r[b.getMonth()]},B:function(b){return n[b.getMonth()]},c:c(h),d:function(b,c){return ab(b.getDate(),c,2)},e:function(b,c){return ab(b.getDate(),
c,2)},H:function(b,c){return ab(b.getHours(),c,2)},I:function(b,c){return ab(b.getHours()%12||12,c,2)},j:function(b,c){return ab(1+fa.dayOfYear(b),c,3)},L:function(b,c){return ab(b.getMilliseconds(),c,3)},m:function(b,c){return ab(b.getMonth()+1,c,2)},M:function(b,c){return ab(b.getMinutes(),c,2)},p:function(b){return k[+(12<=b.getHours())]},S:function(b,c){return ab(b.getSeconds(),c,2)},U:function(b,c){return ab(fa.sundayOfYear(b),c,2)},w:function(b){return b.getDay()},W:function(b,c){return ab(fa.mondayOfYear(b),
c,2)},x:c(g),X:c(d),y:function(b,c){return ab(b.getFullYear()%100,c,2)},Y:function(b,c){return ab(b.getFullYear()%1E4,c,4)},Z:Ld,"%":function(){return"%"}},C={a:function(b,c,f){v.lastIndex=0;return(c=v.exec(c.slice(f)))?(b.w=w.get(c[0].toLowerCase()),f+c[0].length):-1},A:function(b,c,f){p.lastIndex=0;return(c=p.exec(c.slice(f)))?(b.w=u.get(c[0].toLowerCase()),f+c[0].length):-1},b:function(b,c,f){A.lastIndex=0;return(c=A.exec(c.slice(f)))?(b.m=x.get(c[0].toLowerCase()),f+c[0].length):-1},B:function(b,
c,f){t.lastIndex=0;return(c=t.exec(c.slice(f)))?(b.m=y.get(c[0].toLowerCase()),f+c[0].length):-1},c:function(b,c,h){return f(b,z.c.toString(),c,h)},d:Hc,e:Hc,H:Nc,I:Nc,j:Gc,L:De,m:Ad,M:vc,p:function(b,c,f){c=q.get(c.slice(f,f+=2).toLowerCase());return null==c?-1:(b.p=c,f)},S:Ce,U:ad,w:kd,W:Ec,x:function(b,c,h){return f(b,z.x.toString(),c,h)},X:function(b,c,h){return f(b,z.X.toString(),c,h)},y:Fc,Y:cd,Z:zd,"%":Cd};return c}function ab(b,c,f){var h=0>b?"-":"";b=(h?-b:b)+"";var g=b.length;return h+(g<
f?Array(f-g+1).join(c)+b:b)}function zb(b){return new RegExp("^(?:"+b.map(P.requote).join("|")+")","i")}function Ab(b){for(var c=new l,f=-1,h=b.length;++f<h;)c.set(b[f].toLowerCase(),f);return c}function kd(b,c,f){Ka.lastIndex=0;return(c=Ka.exec(c.slice(f,f+1)))?(b.w=+c[0],f+c[0].length):-1}function ad(b,c,f){Ka.lastIndex=0;return(c=Ka.exec(c.slice(f)))?(b.U=+c[0],f+c[0].length):-1}function Ec(b,c,f){Ka.lastIndex=0;return(c=Ka.exec(c.slice(f)))?(b.W=+c[0],f+c[0].length):-1}function cd(b,c,f){Ka.lastIndex=
0;return(c=Ka.exec(c.slice(f,f+4)))?(b.y=+c[0],f+c[0].length):-1}function Fc(b,c,f){Ka.lastIndex=0;if(c=Ka.exec(c.slice(f,f+2))){var h=+c[0];b=(b.y=h+(68<h?1900:2E3),f+c[0].length)}else b=-1;return b}function zd(b,c,f){return/^[+-]\d{4}$/.test(c=c.slice(f,f+5))?(b.Z=-c,f+5):-1}function Ad(b,c,f){Ka.lastIndex=0;return(c=Ka.exec(c.slice(f,f+2)))?(b.m=c[0]-1,f+c[0].length):-1}function Hc(b,c,f){Ka.lastIndex=0;return(c=Ka.exec(c.slice(f,f+2)))?(b.d=+c[0],f+c[0].length):-1}function Gc(b,c,f){Ka.lastIndex=
0;return(c=Ka.exec(c.slice(f,f+3)))?(b.j=+c[0],f+c[0].length):-1}function Nc(b,c,f){Ka.lastIndex=0;return(c=Ka.exec(c.slice(f,f+2)))?(b.H=+c[0],f+c[0].length):-1}function vc(b,c,f){Ka.lastIndex=0;return(c=Ka.exec(c.slice(f,f+2)))?(b.M=+c[0],f+c[0].length):-1}function Ce(b,c,f){Ka.lastIndex=0;return(c=Ka.exec(c.slice(f,f+2)))?(b.S=+c[0],f+c[0].length):-1}function De(b,c,f){Ka.lastIndex=0;return(c=Ka.exec(c.slice(f,f+3)))?(b.L=+c[0],f+c[0].length):-1}function Ld(b){var c=b.getTimezoneOffset();b=0<c?
"-":"+";var f=na(c)/60|0,c=na(c)%60;return b+ab(f,"0",2)+ab(c,"0",2)}function Cd(b,c,f){Kf.lastIndex=0;return(b=Kf.exec(c.slice(f,f+1)))?f+b[0].length:-1}function Bd(b){for(var c=b.length,f=-1;++f<c;)b[f][0]=this(b[f][0]);return function(c){for(var f=0,h=b[f];!h[1](c);)h=b[++f];return h[0](c)}}function Fb(){}function Vb(b,c,f){var h=f.s=b+c,g=h-b;f.t=b-(h-g)+(c-g)}function Oc(b,c){if(b&&Lf.hasOwnProperty(b.type))Lf[b.type](b,c)}function ld(b,c,f){var h=-1;f=b.length-f;var g;for(c.lineStart();++h<
f;)g=b[h],c.point(g[0],g[1],g[2]);c.lineEnd()}function md(b,c){var f=-1,h=b.length;for(c.polygonStart();++f<h;)ld(b[f],c,1);c.polygonEnd()}function wc(){function b(c,f){c*=ma;f=f*ma/2+la/4;var k=c-h,l=0<=k?1:-1,k=l*k,m=Math.cos(f),n=Math.sin(f),r=d*n;Ac.add(Math.atan2(r*l*Math.sin(k),g*m+r*Math.cos(k)));h=c;g=m;d=n}var c,f,h,g,d;ob.point=function(k,l){ob.point=b;h=(c=k)*ma;g=Math.cos(l=(f=l)*ma/2+la/4);d=Math.sin(l)};ob.lineEnd=function(){b(c,f)}}function Wb(b){var c=b[0];b=b[1];var f=Math.cos(b);
return[f*Math.cos(c),f*Math.sin(c),Math.sin(b)]}function Pc(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]}function Kb(b,c){return[b[1]*c[2]-b[2]*c[1],b[2]*c[0]-b[0]*c[2],b[0]*c[1]-b[1]*c[0]]}function nd(b,c){b[0]+=c[0];b[1]+=c[1];b[2]+=c[2]}function xc(b,c){return[b[0]*c,b[1]*c,b[2]*c]}function Lb(b){var c=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=c;b[1]/=c;b[2]/=c}function gc(b){return[Math.atan2(b[1],b[0]),wa(b[2])]}function hc(b,c){return 1E-6>na(b[0]-c[0])&&1E-6>na(b[1]-c[1])}function od(b,c){b*=
ma;var f=Math.cos(c*=ma);ic(f*Math.cos(b),f*Math.sin(b),Math.sin(c))}function ic(b,c,f){++td;Yb+=(b-Yb)/td;Zb+=(c-Zb)/td;Nb+=(f-Nb)/td}function Md(){function b(g,d){g*=ma;var k=Math.cos(d*=ma),l=k*Math.cos(g),k=k*Math.sin(g),m=Math.sin(d),n=Math.atan2(Math.sqrt((n=f*m-h*k)*n+(n=h*l-c*m)*n+(n=c*k-f*l)*n),c*l+f*k+h*m);Uc+=n;rb+=n*(c+(c=l));sb+=n*(f+(f=k));lb+=n*(h+(h=m));ic(c,f,h)}var c,f,h;Bb.point=function(g,d){g*=ma;var k=Math.cos(d*=ma);c=k*Math.cos(g);f=k*Math.sin(g);h=Math.sin(d);Bb.point=b;ic(c,
f,h)}}function Nd(){Bb.point=od}function Ee(){function b(c,f){c*=ma;var k=Math.cos(f*=ma),l=k*Math.cos(c),k=k*Math.sin(c),m=Math.sin(f),n=g*m-d*k,r=d*l-h*m,q=h*k-g*l,p=Math.sqrt(n*n+r*r+q*q),ua=h*l+g*k+d*m,u=p&&-Ba(ua)/p,p=Math.atan2(p,ua);lc+=u*n;mc+=u*r;Ob+=u*q;Uc+=p;rb+=p*(h+(h=l));sb+=p*(g+(g=k));lb+=p*(d+(d=m));ic(h,g,d)}var c,f,h,g,d;Bb.point=function(k,l){c=k;f=l;Bb.point=b;k*=ma;var m=Math.cos(l*=ma);h=m*Math.cos(k);g=m*Math.sin(k);d=Math.sin(l);ic(h,g,d)};Bb.lineEnd=function(){b(c,f);Bb.lineEnd=
Nd;Bb.point=od}}function pd(b,c){function f(h,g){return h=b(h,g),c(h[0],h[1])}b.invert&&c.invert&&(f.invert=function(f,h){return f=c.invert(f,h),f&&b.invert(f[0],f[1])});return f}function Rb(){return!0}function qd(b,c,f,h,g){var d=[],k=[];b.forEach(function(b){if(!(0>=(c=b.length-1))){var c,f=b[0],h=b[c];if(hc(f,h)){g.lineStart();for(h=0;h<c;++h)g.point((f=b[h])[0],f[1]);g.lineEnd()}else c=new Rc(f,b,null,!0),f=new Rc(f,null,c,!1),c.o=f,d.push(c),k.push(f),c=new Rc(h,b,null,!1),f=new Rc(h,null,c,
!0),c.o=f,d.push(c),k.push(f)}});k.sort(c);Qc(d);Qc(k);if(d.length){b=0;c=f;for(f=k.length;b<f;++b)k[b].e=c=!c;c=d[0];for(var l,m;;){for(var n=c,r=!0;n.v;)if((n=n.n)===c)return;l=n.z;g.lineStart();do{n.v=n.o.v=!0;if(n.e){if(r)for(b=0,f=l.length;b<f;++b)g.point((m=l[b])[0],m[1]);else h(n.x,n.n.x,1,g);n=n.n}else{if(r)for(l=n.p.z,b=l.length-1;0<=b;--b)g.point((m=l[b])[0],m[1]);else h(n.x,n.p.x,-1,g);n=n.p}n=n.o;l=n.z;r=!r}while(!n.v);g.lineEnd()}}}function Qc(b){if(c=b.length){for(var c,f=0,h=b[0],g;++f<
c;)h.n=g=b[f],g.p=h,h=g;h.n=g=b[0];g.p=h}}function Rc(b,c,f,h){this.x=b;this.z=c;this.o=f;this.e=h;this.v=!1;this.n=this.p=null}function Dd(b,c,f,h){return function(g,d){function k(c,f){var h=g(c,f);b(c=h[0],f=h[1])&&d.point(c,f)}function l(b,c){var f=g(b,c);u.point(f[0],f[1])}function m(){w.point=l;u.lineStart()}function n(){w.point=k;u.lineEnd()}function r(b,c){C.push([b,c]);var f=g(b,c);A.point(f[0],f[1])}function q(){A.lineStart();C=[]}function p(){r(C[0][0],C[0][1]);A.lineEnd();var b=A.clean(),
c=y.buffer(),f=c.length;C.pop();z.push(C);C=null;if(f)if(b&1){var b=c[0],f=b.length-1,c=-1,h;if(0<f){x||(d.polygonStart(),x=!0);for(d.lineStart();++c<f;)d.point((h=b[c])[0],h[1]);d.lineEnd()}}else 1<f&&b&2&&c.push(c.pop().concat(c.shift())),t.push(c.filter(Od))}var u=c(d),v=g.invert(h[0],h[1]),w={point:k,lineStart:m,lineEnd:n,polygonStart:function(){w.point=r;w.lineStart=q;w.lineEnd=p;t=[];z=[]},polygonEnd:function(){w.point=k;w.lineStart=m;w.lineEnd=n;t=P.merge(t);var b,c=v;b=z;var h=c[0],g=c[1],
l=[Math.sin(h),-Math.cos(h),0],r=0,q=0;Ac.reset();for(var p=0,u=b.length;p<u;++p){var ua=b[p],y=ua.length;if(y)for(var A=ua[0],C=A[0],c=A[1]/2+la/4,D=Math.sin(c),ib=Math.cos(c),B=1;;){B===y&&(B=0);var c=ua[B],F=c[0],kc=c[1]/2+la/4,L=Math.sin(kc),kc=Math.cos(kc),Tc=F-C,Q=0<=Tc?1:-1,N=Q*Tc,H=N>la,D=D*L;Ac.add(Math.atan2(D*Q*Math.sin(N),ib*kc+D*Math.cos(N)));r+=H?Tc+Q*pb:Tc;H^C>=h^F>=h&&(A=Kb(Wb(A),Wb(c)),Lb(A),C=Kb(l,A),Lb(C),C=(H^0<=Tc?-1:1)*wa(C[2]),g>C||g===C&&(A[0]||A[1]))&&(q+=H^0<=Tc?1:-1);if(!B++)break;
C=F;D=L;ib=kc;A=c}}b=(-1E-6>r||1E-6>r&&0>Ac)^q&1;t.length?(x||(d.polygonStart(),x=!0),qd(t,Fe,b,f,d)):b&&(x||(d.polygonStart(),x=!0),d.lineStart(),f(null,null,1,d),d.lineEnd());x&&(d.polygonEnd(),x=!1);t=z=null},sphere:function(){d.polygonStart();d.lineStart();f(null,null,1,d);d.lineEnd();d.polygonEnd()}},t,y=Pd(),A=c(y),x=!1,z,C;return w}}function Od(b){return 1<b.length}function Pd(){var b=[],c;return{lineStart:function(){b.push(c=[])},point:function(b,f){c.push([b,f])},lineEnd:x,buffer:function(){var f=
b;b=[];c=null;return f},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Fe(b,c){return(0>(b=b.x)[0]?b[1]-Ja-1E-6:Ja-b[1])-(0>(c=c.x)[0]?c[1]-Ja-1E-6:Ja-c[1])}function Ge(b){function c(b,f){return Math.cos(b)*Math.cos(f)>g}function f(b,c,h){var d=Wb(b),k=Wb(c),l=[1,0,0],k=Kb(d,k),m=Pc(k,k),d=k[0],n=m-d*d;if(!n)return!h&&b;m=g*m/n;n=-g*d/n;d=Kb(l,k);l=xc(l,m);k=xc(k,n);nd(l,k);k=Pc(l,d);m=Pc(d,d);n=k*k-m*(Pc(l,l)-1);if(!(0>n)){var r=Math.sqrt(n),n=xc(d,(-k-r)/m);nd(n,l);n=
gc(n);if(!h)return n;h=b[0];var q=c[0];b=b[1];c=c[1];var p;q<h&&(p=h,h=q,q=p);var u=q-h,ua=1E-6>na(u-la);!ua&&c<b&&(p=b,b=c,c=p);if(ua||1E-6>u?ua?0<b+c^n[1]<(1E-6>na(n[0]-h)?b:c):b<=n[1]&&n[1]<=c:u>la^(h<=n[0]&&n[0]<=q))return c=xc(d,(-k+r)/m),nd(c,l),[n,gc(c)]}}function h(c,f){var g=d?b:la-b,k=0;c<-g?k|=1:c>g&&(k|=2);f<-g?k|=4:f>g&&(k|=8);return k}var g=Math.cos(b),d=0<g,k=1E-6<na(g),l=tc(b,6*ma);return Dd(c,function(b){var g,l,m,n,r;return{lineStart:function(){n=m=!1;r=1},point:function(q,p){var u=
[q,p],ua,v=c(q,p),w=d?v?0:h(q,p):v?h(q+(0>q?la:-la),p):0;!g&&(n=m=v)&&b.lineStart();v!==m&&(ua=f(g,u),hc(g,ua)||hc(u,ua))&&(u[0]+=1E-6,u[1]+=1E-6,v=c(u[0],u[1]));if(v!==m)r=0,v?(b.lineStart(),ua=f(u,g),b.point(ua[0],ua[1])):(ua=f(g,u),b.point(ua[0],ua[1]),b.lineEnd()),g=ua;else if(k&&g&&d^v){var t;w&l||!(t=f(u,g,!0))||(r=0,d?(b.lineStart(),b.point(t[0][0],t[0][1]),b.point(t[1][0],t[1][1]),b.lineEnd()):(b.point(t[1][0],t[1][1]),b.lineEnd(),b.lineStart(),b.point(t[0][0],t[0][1])))}!v||g&&hc(g,u)||b.point(u[0],
u[1]);g=u;m=v;l=w},lineEnd:function(){m&&b.lineEnd();g=null},clean:function(){return r|(n&&m)<<1}}},l,d?[0,-b]:[-la,b-la])}function jc(b,c,f,h){return function(g){var d=g.a,k=g.b,l=d.x,d=d.y,m=0,n=1,r=k.x-l,k=k.y-d,q;q=b-l;if(r||!(0<q)){q/=r;if(0>r){if(q<m)return;q<n&&(n=q)}else if(0<r){if(q>n)return;q>m&&(m=q)}q=f-l;if(r||!(0>q)){q/=r;if(0>r){if(q>n)return;q>m&&(m=q)}else if(0<r){if(q<m)return;q<n&&(n=q)}q=c-d;if(k||!(0<q)){q/=k;if(0>k){if(q<m)return;q<n&&(n=q)}else if(0<k){if(q>n)return;q>m&&(m=
q)}q=h-d;if(k||!(0>q)){q/=k;if(0>k){if(q>n)return;q>m&&(m=q)}else if(0<k){if(q<m)return;q<n&&(n=q)}0<m&&(g.a={x:l+m*r,y:d+m*k});1>n&&(g.b={x:l+n*r,y:d+n*k});return g}}}}}}function rd(b,c,f,h){function g(h,d){return 1E-6>na(h[0]-b)?0<d?0:3:1E-6>na(h[0]-f)?0<d?2:1:1E-6>na(h[1]-c)?0<d?1:0:0<d?3:2}function d(b,c){return k(b.x,c.x)}function k(b,c){var f=g(b,1),h=g(c,1);return f!==h?f-h:0===f?c[1]-b[1]:1===f?b[0]-c[0]:2===f?b[1]-c[1]:c[0]-b[0]}return function(l){function m(d,l,n,r){var q=0,p=0;if(null==
d||(q=g(d,n))!==(p=g(l,n))||0>k(d,l)^0<n){do r.point(0===q||3===q?b:f,1<q?h:c);while((q=(q+n+4)%4)!==p)}else r.point(l[0],l[1])}function n(g,d){b<=g&&g<=f&&c<=d&&d<=h&&l.point(g,d)}function r(g,d){g=Math.max(-1E9,Math.min(1E9,g));d=Math.max(-1E9,Math.min(1E9,d));var k=b<=g&&g<=f&&c<=d&&d<=h;w&&t.push([g,d]);if(F)A=g,x=d,C=k,F=!1,k&&(l.lineStart(),l.point(g,d));else if(k&&B)l.point(g,d);else{var m={a:{x:z,y:D},b:{x:g,y:d}};u(m)?(B||(l.lineStart(),l.point(m.a.x,m.a.y)),l.point(m.b.x,m.b.y),k||l.lineEnd(),
L=!1):k&&(l.lineStart(),l.point(g,d),L=!1)}z=g;D=d;B=k}var q=l,p=Pd(),u=jc(b,c,f,h),v,w,t,y={point:n,lineStart:function(){y.point=r;w&&w.push(t=[]);F=!0;B=!1;z=D=NaN},lineEnd:function(){v&&(r(A,x),C&&B&&p.rejoin(),v.push(p.buffer()));y.point=n;B&&l.lineEnd()},polygonStart:function(){l=p;v=[];w=[];L=!0},polygonEnd:function(){l=q;v=P.merge(v);var c;c=[b,h];for(var f=0,g=w.length,k=c[1],n=0;n<g;++n)for(var r=1,p=w[n],u=p.length,y=p[0],A;r<u;++r)A=p[r],y[1]<=k?A[1]>k&&0<pa(y,A,c)&&++f:A[1]<=k&&0>pa(y,
A,c)&&--f,y=A;c=0!==f;f=L&&c;g=v.length;if(f||g)l.polygonStart(),f&&(l.lineStart(),m(null,null,1,l),l.lineEnd()),g&&qd(v,d,c,m,l),l.polygonEnd();v=w=t=null}},A,x,C,z,D,B,F,L;return y}}function yc(b){var c=0,f=la/3,h=bc(b);b=h(c,f);b.parallels=function(b){return arguments.length?h(c=b[0]*la/180,f=b[1]*la/180):[c/la*180,f/la*180]};return b}function sd(b,c){function f(b,c){var h=Math.sqrt(d-2*g*Math.sin(c))/g;return[h*Math.sin(b*=g),k-h*Math.cos(b)]}var h=Math.sin(b),g=(h+Math.sin(c))/2,d=1+h*(2*g-h),
k=Math.sqrt(d)/g;f.invert=function(b,c){var f=k-c;return[Math.atan2(b,f)/g,wa((d-(b*b+f*f)*g*g)/(2*g))]};return f}function He(){function b(c,f){Yd+=g*c-h*f;h=c;g=f}var c,f,h,g;nc.point=function(d,k){nc.point=b;c=h=d;f=g=k};nc.lineEnd=function(){b(c,f)}}function nb(){function b(c,f){k.push("M",c,",",f,d)}function c(b,h){k.push("M",b,",",h);l.point=f}function f(b,c){k.push("L",b,",",c)}function h(){l.point=b}function g(){k.push("Z")}var d=pf(4.5),k=[],l={point:b,lineStart:function(){l.point=c},lineEnd:h,
polygonStart:function(){l.lineEnd=g},polygonEnd:function(){l.lineEnd=h;l.point=b},pointRadius:function(b){d=pf(b);return l},result:function(){if(k.length){var b=k.join("");k=[];return b}}};return l}function pf(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function qc(b,c){Yb+=b;Zb+=c;++Nb}function qf(){function b(h,g){var d=h-c,k=g-f,d=Math.sqrt(d*d+k*k);rb+=d*(c+h)/2;sb+=d*(f+g)/2;lb+=d;qc(c=h,f=g)}var c,f;Cb.point=function(h,g){Cb.point=b;qc(c=h,f=g)}}function rf(){Cb.point=
qc}function Rg(){function b(c,f){var d=c-h,k=f-g,d=Math.sqrt(d*d+k*k);rb+=d*(h+c)/2;sb+=d*(g+f)/2;lb+=d;d=g*c-h*f;lc+=d*(h+c);mc+=d*(g+f);Ob+=3*d;qc(h=c,g=f)}var c,f,h,g;Cb.point=function(d,k){Cb.point=b;qc(c=h=d,f=g=k)};Cb.lineEnd=function(){b(c,f)}}function rc(b){function c(f,h){b.moveTo(f+k,h);b.arc(f,h,k,0,pb)}function f(c,g){b.moveTo(c,g);l.point=h}function h(c,f){b.lineTo(c,f)}function g(){l.point=c}function d(){b.closePath()}var k=4.5,l={point:c,lineStart:function(){l.point=f},lineEnd:g,polygonStart:function(){l.lineEnd=
d},polygonEnd:function(){l.lineEnd=g;l.point=c},pointRadius:function(b){k=b;return l},result:x};return l}function ac(b){function c(b){return(l?h:f)(b)}function f(c){return Ra(c,function(f,h){f=b(f,h);c.point(f[0],f[1])})}function h(c){function f(h,g){h=b(h,g);c.point(h[0],h[1])}function d(){x=NaN;B.point=k;c.lineStart()}function k(f,h){var d=Wb([f,h]),m=b(f,h);g(x,C,A,z,D,ib,x=m[0],C=m[1],A=f,z=d[0],D=d[1],ib=d[2],l,c);c.point(x,C)}function m(){B.point=f;c.lineEnd()}function n(){d();B.point=r;B.lineEnd=
q}function r(b,c){k(p=b,c);u=x;v=C;w=z;t=D;y=ib;B.point=k}function q(){g(x,C,A,z,D,ib,u,v,p,w,t,y,l,c);B.lineEnd=m;m()}var p,u,v,w,t,y,A,x,C,z,D,ib,B={point:f,lineStart:d,lineEnd:m,polygonStart:function(){c.polygonStart();B.lineStart=n},polygonEnd:function(){c.polygonEnd();B.lineStart=d}};return B}function g(c,f,h,l,m,n,r,q,p,u,v,w,t,y){var A=r-c,x=q-f,C=A*A+x*x;if(C>4*d&&t--){var z=l+u,D=m+v,ib=n+w,B=Math.sqrt(z*z+D*D+ib*ib),Sc=Math.asin(ib/=B),F=1E-6>na(na(ib)-1)||1E-6>na(h-p)?(h+p)/2:Math.atan2(D,
z),L=b(F,Sc),Sc=L[0],L=L[1],kc=Sc-c,Q=L-f,N=x*kc-A*Q;if(N*N/C>d||.3<na((A*kc+x*Q)/C-.5)||l*u+m*v+n*w<k)g(c,f,h,l,m,n,Sc,L,F,z/=B,D/=B,ib,t,y),y.point(Sc,L),g(Sc,L,F,z,D,ib,r,q,p,u,v,w,t,y)}}var d=.5,k=Math.cos(30*ma),l=16;c.precision=function(b){if(!arguments.length)return Math.sqrt(d);l=0<(d=b*b)&&16;return c};return c}function Eb(b){var c=ac(function(c,f){return b([c*Ga,f*Ga])});return function(b){return $c(c(b))}}function Qb(b){this.stream=b}function Ra(b,c){return{point:c,sphere:function(){b.sphere()},
lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function Xa(b){return bc(function(){return b})()}function bc(b){function c(b){b=l(b[0]*ma,b[1]*ma);return[b[0]*n+A,x-b[1]*n]}function f(b){return(b=l.invert((b[0]-A)/n,(x-b[1])/n))&&[b[0]*Ga,b[1]*Ga]}function h(){l=pd(k=Jb(w,t,y),d);var b=d(p,u);A=r-b[0]*n;x=q+b[1]*n;return g()}function g(){F&&(F.valid=!1,F=null);return c}var d,k,l,m=ac(function(b,c){b=
d(b,c);return[b[0]*n+A,x-b[1]*n]}),n=150,r=480,q=250,p=0,u=0,w=0,t=0,y=0,A,x,z=Mf,C=v,D=null,B=null,F;c.stream=function(b){F&&(F.valid=!1);F=$c(z(k,m(C(b))));F.valid=!0;return F};c.clipAngle=function(b){if(!arguments.length)return D;z=null==b?(D=b,Mf):Ge((D=+b)*ma);return g()};c.clipExtent=function(b){if(!arguments.length)return B;C=(B=b)?rd(b[0][0],b[0][1],b[1][0],b[1][1]):v;return g()};c.scale=function(b){if(!arguments.length)return n;n=+b;return h()};c.translate=function(b){if(!arguments.length)return[r,
q];r=+b[0];q=+b[1];return h()};c.center=function(b){if(!arguments.length)return[p*Ga,u*Ga];p=b[0]%360*ma;u=b[1]%360*ma;return h()};c.rotate=function(b){if(!arguments.length)return[w*Ga,t*Ga,y*Ga];w=b[0]%360*ma;t=b[1]%360*ma;y=2<b.length?b[2]%360*ma:0;return h()};P.rebind(c,m,"precision");return function(){d=b.apply(this,arguments);c.invert=d.invert&&f;return h()}}function $c(b){return Ra(b,function(c,f){b.point(c*ma,f*ma)})}function cc(b,c){return[b,c]}function bd(b,c){return[b>la?b-pb:b<-la?b+pb:
b,c]}function Jb(b,c,f){return b?c||f?pd(Gd(b),ub(c,f)):Gd(b):c||f?ub(c,f):bd}function Jc(b){return function(c,f){return c+=b,[c>la?c-pb:c<-la?c+pb:c,f]}}function Gd(b){var c=Jc(b);c.invert=Jc(-b);return c}function ub(b,c){function f(b,c){var l=Math.cos(c),m=Math.cos(b)*l,l=Math.sin(b)*l,n=Math.sin(c),r=n*h+m*g;return[Math.atan2(l*d-r*k,m*h-n*g),wa(r*d+l*k)]}var h=Math.cos(b),g=Math.sin(b),d=Math.cos(c),k=Math.sin(c);f.invert=function(b,c){var f=Math.cos(c),l=Math.cos(b)*f,f=Math.sin(b)*f,m=Math.sin(c),
n=m*d-f*k;return[Math.atan2(f*d+m*k,l*h+n*g),wa(n*h-l*g)]};return f}function tc(b,c){var f=Math.cos(b),h=Math.sin(b);return function(g,d,k,l){var m=k*c;if(null!=g){if(g=hb(f,g),d=hb(f,d),0<k?g<d:g>d)g+=k*pb}else g=b+k*pb,d=b-.5*m;for(var n;0<k?g>d:g<d;g-=m)l.point((n=gc([f,-h*Math.cos(g),-h*Math.sin(g)]))[0],n[1])}}function hb(b,c){var f=Wb(c);f[0]-=b;Lb(f);var h=Ba(-f[1]);return((0>-f[2]?-h:h)+2*Math.PI-1E-6)%(2*Math.PI)}function Ib(b,c,f){var h=P.range(b,c-1E-6,f).concat(c);return function(b){return h.map(function(c){return[b,
c]})}}function uc(b,c,f){var h=P.range(b,c-1E-6,f).concat(c);return function(b){return h.map(function(c){return[c,b]})}}function hd(b){return b.source}function va(b){return b.target}function Hd(b,c,f,h){var g=Math.cos(c),d=Math.sin(c),k=Math.cos(h),l=Math.sin(h),m=g*Math.cos(b),n=g*Math.sin(b),r=k*Math.cos(f),q=k*Math.sin(f),p=2*Math.asin(Math.sqrt(qa(h-c)+g*k*qa(f-b))),u=1/Math.sin(p);f=p?function(b){var c=Math.sin(b*=p)*u;b=Math.sin(p-b)*u;var f=b*m+c*r,h=b*n+c*q;return[Math.atan2(h,f)*Ga,Math.atan2(b*
d+c*l,Math.sqrt(f*f+h*h))*Ga]}:function(){return[b*Ga,c*Ga]};f.distance=p;return f}function ia(b,c){function f(c,h){var g=Math.cos(h),d=b(Math.cos(c)*g);return[d*g*Math.sin(c),d*Math.sin(h)]}f.invert=function(b,f){var h=Math.sqrt(b*b+f*f),g=c(h),d=Math.sin(g);return[Math.atan2(b*d,h*Math.cos(g)),Math.asin(h&&f*d/h)]};return f}function za(b,c){function f(b,c){0<d?c<-Ja+1E-6&&(c=-Ja+1E-6):c>Ja-1E-6&&(c=Ja-1E-6);var h=d/Math.pow(Math.tan(la/4+c/2),g);return[h*Math.sin(g*b),d-h*Math.cos(g*b)]}var h=Math.cos(b),
g=b===c?Math.sin(b):Math.log(h/Math.cos(c))/Math.log(Math.tan(la/4+c/2)/Math.tan(la/4+b/2)),d=h*Math.pow(Math.tan(la/4+b/2),g)/g;if(!g)return Tb;f.invert=function(b,c){var f=d-c;return[Math.atan2(b,f)/g,2*Math.atan(Math.pow(d/((0<g?1:0>g?-1:0)*Math.sqrt(b*b+f*f)),1/g))-Ja]};return f}function xa(b,c){function f(b,c){var h=d-c;return[h*Math.sin(g*b),d-h*Math.cos(g*b)]}var h=Math.cos(b),g=b===c?Math.sin(b):(h-Math.cos(c))/(c-b),d=h/g+b;if(1E-6>na(g))return cc;f.invert=function(b,c){var f=d-c;return[Math.atan2(b,
f)/g,d-(0<g?1:0>g?-1:0)*Math.sqrt(b*b+f*f)]};return f}function Tb(b,c){return[b,Math.log(Math.tan(la/4+c/2))]}function db(b){var c=Xa(b),f=c.scale,h=c.translate,g=c.clipExtent,d;c.scale=function(){var b=f.apply(c,arguments);return b===c?d?c.clipExtent(null):c:b};c.translate=function(){var b=h.apply(c,arguments);return b===c?d?c.clipExtent(null):c:b};c.clipExtent=function(b){var k=g.apply(c,arguments);if(k===c){if(d=null==b){var l=la*f(),m=h();g([[m[0]-l,m[1]-l],[m[0]+l,m[1]+l]])}}else d&&(k=null);
return k};return c.clipExtent(null)}function Sb(b,c){return[Math.log(Math.tan(la/4+c/2)),-b]}function mb(b){return b[0]}function Fa(b){return b[1]}function fd(b){for(var c=b.length,f=[0,1],h=2,g=2;g<c;g++){for(;1<h&&0>=pa(b[f[h-2]],b[f[h-1]],b[g]);)--h;f[h++]=g}return f.slice(0,h)}function ec(b,c){return b[0]-c[0]||b[1]-c[1]}function Lc(b,c,f){return(f[0]-c[0])*(b[1]-c[1])<(f[1]-c[1])*(b[0]-c[0])}function sc(b,c,f,h){var g=b[0],d=f[0],k=c[0]-g,l=h[0]-d;b=b[1];f=f[1];c=c[1]-b;h=h[1]-f;d=(l*(b-f)-h*
(g-d))/(h*k-l*c);return[g+d*k,b+d*c]}function Hb(b){var c=b[0];b=b[b.length-1];return!(c[0]-b[0]||c[1]-b[1])}function Ua(){Kd(this);this.edge=this.site=this.circle=null}function gd(b){var c=Nf.pop()||new Ua;c.site=b;return c}function Ic(b){fc(b);Vc.remove(b);Nf.push(b);Kd(b)}function vb(b,c){var f=b.site,h=f.x,g=f.y,d=g-c;if(!d)return h;var k=b.P;if(!k)return-Infinity;var f=k.site,k=f.x,f=f.y,l=f-c;if(!l)return k;var m=k-h,n=1/d-1/l,r=m/l;return n?(-r+Math.sqrt(r*r-2*n*(m*m/(-2*l)-f+l/2+g-d/2)))/
n+h:(h+k)/2}function Mc(b){this.site=b;this.edges=[]}function Gb(b,c){return c.angle-b.angle}function Id(){Kd(this);this.x=this.y=this.arc=this.site=this.cy=null}function qb(b){var c=b.P,f=b.N;if(c&&f){var h=c.site,c=b.site,g=f.site;if(h!==g){var f=c.x,d=c.y,k=h.x-f,l=h.y-d,h=g.x-f,g=g.y-d,m=2*(k*g-l*h);if(!(-1E-12<=m)){var n=k*k+l*l,r=h*h+g*g,l=(g*n-l*r)/m,k=(k*r-h*n)/m,g=k+d,d=Of.pop()||new Id;d.arc=b;d.site=c;d.x=l+f;d.y=g+Math.sqrt(l*l+k*k);d.cy=g;b.circle=d;b=null;for(c=ud._;c;)if(d.y<c.y||d.y===
c.y&&d.x<=c.x)if(c.L)c=c.L;else{b=c.P;break}else if(c.R)c=c.R;else{b=c;break}ud.insert(b,d);b||(Me=d)}}}}function fc(b){var c=b.circle;c&&(c.P||(Me=c.N),ud.remove(c),Of.push(c),Kd(c),b.circle=null)}function Be(b,c){var f=b.b;if(f)return!0;var h=b.a,f=c[0][0],g=c[1][0],d=c[0][1],k=c[1][1],l=b.l,m=b.r,n=l.x,l=l.y,r=m.x,m=m.y,q=(n+r)/2,p;if(m===l){if(q<f||q>=g)return;if(n>r){if(!h)h={x:q,y:d};else if(h.y>=k)return;f={x:q,y:k}}else{if(!h)h={x:q,y:k};else if(h.y<d)return;f={x:q,y:d}}}else if(p=(n-r)/(m-
l),q=(l+m)/2-p*q,-1>p||1<p)if(n>r){if(!h)h={x:(d-q)/p,y:d};else if(h.y>=k)return;f={x:(k-q)/p,y:k}}else{if(!h)h={x:(k-q)/p,y:k};else if(h.y<d)return;f={x:(d-q)/p,y:d}}else if(l<m){if(!h)h={x:f,y:p*f+q};else if(h.x>=g)return;f={x:g,y:p*g+q}}else{if(!h)h={x:g,y:p*g+q};else if(h.x<f)return;f={x:f,y:p*f+q}}b.a=h;b.b=f;return!0}function yf(b,c){this.l=b;this.r=c;this.a=this.b=null}function ed(b,c,f,h){var g=new yf(b,c);Wc.push(g);f&&Fd(g,b,c,f);h&&Fd(g,c,b,h);Bc[b.i].edges.push(new Jd(g,b,c));Bc[c.i].edges.push(new Jd(g,
c,b));return g}function eh(b,c,f){b=new yf(b,null);b.a=c;b.b=f;Wc.push(b);return b}function Fd(b,c,f,h){b.a||b.b?b.l===f?b.b=h:b.a=h:(b.a=h,b.l=c,b.r=f)}function Jd(b,c,f){var h=b.a,g=b.b;this.edge=b;this.site=c;this.angle=f?Math.atan2(f.y-c.y,f.x-c.x):b.l===c?Math.atan2(g.x-h.x,h.y-g.y):Math.atan2(h.x-g.x,g.y-h.y)}function Ae(){this._=null}function Kd(b){b.U=b.C=b.L=b.R=b.P=b.N=null}function id(b,c){var f=c.R,h=c.U;h?h.L===c?h.L=f:h.R=f:b._=f;f.U=h;c.U=f;c.R=f.L;c.R&&(c.R.U=c);f.L=c}function jd(b,
c){var f=c.L,h=c.U;h?h.L===c?h.L=f:h.R=f:b._=f;f.U=h;c.U=f;c.L=f.R;c.L&&(c.L.U=c);f.R=c}function zf(b){for(;b.L;)b=b.L;return b}function ze(b,c){var f=b.sort(fh).pop(),h,g,d;Wc=[];Bc=Array(b.length);Vc=new Ae;for(ud=new Ae;;)if(d=Me,f&&(!d||f.y<d.y||f.y===d.y&&f.x<d.x)){if(f.x!==h||f.y!==g){Bc[f.i]=new Mc(f);h=f;for(var k=h.x,l=h.y,m=d=g=void 0,n=void 0,r=Vc._;r;)if(m=vb(r,l)-k,1E-6<m)r=r.L;else{var q=r,n=l,p=q.N;p?n=vb(p,n):(q=q.site,n=q.y===n?q.x:Infinity);n=k-n;if(1E-6<n){if(!r.R){g=r;break}r=
r.R}else{-1E-6<m?(g=r.P,d=r):-1E-6<n?(g=r,d=r.N):g=d=r;break}}k=gd(h);Vc.insert(g,k);if(g||d)if(g===d)fc(g),d=gd(g.site),Vc.insert(k,d),k.edge=d.edge=ed(g.site,k.site),qb(g),qb(d);else if(d){fc(g);fc(d);var l=g.site,r=l.x,n=l.y,q=h.x-r,p=h.y-n,m=d.site,u=m.x-r,v=m.y-n,w=2*(q*v-p*u),t=q*q+p*p,y=u*u+v*v,r={x:(v*t-p*y)/w+r,y:(q*y-u*t)/w+n};Fd(d.edge,l,m,r);k.edge=ed(l,h,null,r);d.edge=ed(h,m,null,r);qb(g);qb(d)}else k.edge=ed(g.site,k.site);h=f.x;g=f.y}f=b.pop()}else if(d){m=d.arc;d=m.circle;l=d.x;r=
d.cy;d={x:l,y:r};q=m.P;n=m.N;k=[m];Ic(m);for(m=q;m.circle&&1E-6>na(l-m.circle.x)&&1E-6>na(r-m.circle.cy);)q=m.P,k.unshift(m),Ic(m),m=q;k.unshift(m);fc(m);for(q=n;q.circle&&1E-6>na(l-q.circle.x)&&1E-6>na(r-q.circle.cy);)n=q.N,k.push(q),Ic(q),q=n;k.push(q);fc(q);l=k.length;r=void 0;for(r=1;r<l;++r)q=k[r],m=k[r-1],Fd(q.edge,m.site,q.site,d);m=k[0];q=k[l-1];q.edge=ed(m.site,q.site,null,d);qb(m);qb(q)}else break;if(c){f=Wc;h=jc(c[0][0],c[0][1],c[1][0],c[1][1]);for(g=f.length;g--;)if(d=f[g],!Be(d,c)||!h(d)||
1E-6>na(d.a.x-d.b.x)&&1E-6>na(d.a.y-d.b.y))d.a=d.b=null,f.splice(g,1);f=c[0][0];h=c[1][0];g=c[0][1];d=c[1][1];r=Bc;for(n=r.length;n--;)if((q=r[n])&&q.prepare())for(u=q.edges,v=u.length,p=0;p<v;)if(w=u[p].end(),l=w.x,m=w.y,t=u[++p%v].start(),k=t.x,t=t.y,1E-6<na(l-k)||1E-6<na(m-t))u.splice(p,0,new Jd(eh(q.site,w,1E-6>na(l-f)&&1E-6<d-m?{x:f,y:1E-6>na(k-f)?t:d}:1E-6>na(m-d)&&1E-6<h-l?{x:1E-6>na(t-d)?k:h,y:d}:1E-6>na(l-h)&&1E-6<m-g?{x:h,y:1E-6>na(k-h)?t:g}:1E-6>na(m-g)&&1E-6<l-f?{x:1E-6>na(t-g)?k:f,y:g}:
null),q.site,null)),++v}f={cells:Bc,edges:Wc};Vc=ud=Wc=Bc=null;return f}function fh(b,c){return c.y-b.y||c.x-b.x}function gh(b){return b.x}function hh(b){return b.y}function Af(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dd(b,c,f,h,g,d){if(!b(c,f,h,g,d)){var k=.5*(f+g),l=.5*(h+d);c=c.nodes;c[0]&&dd(b,c[0],f,h,k,l);c[1]&&dd(b,c[1],k,h,g,l);c[2]&&dd(b,c[2],f,l,k,d);c[3]&&dd(b,c[3],k,l,g,d)}}function Zg(b,c,f,h,g,d,k){var l=Infinity,m;(function Sd(b,n,r,q,p){if(!(n>d||r>k||q<h||p<g)){if(u=
b.point){var u,v=c-b.x,w=f-b.y,v=v*v+w*w;v<l&&(v=Math.sqrt(l=v),h=c-v,g=f-v,d=c+v,k=f+v,m=u)}u=b.nodes;for(var v=.5*(n+q),w=.5*(r+p),t=(f>=w)<<1|c>=v,ua=t+4;t<ua;++t)if(b=u[t&3])switch(t&3){case 0:Sd(b,n,r,v,w);break;case 1:Sd(b,v,r,q,w);break;case 2:Sd(b,n,w,v,p);break;case 3:Sd(b,v,w,q,p)}}})(b,h,g,d,k);return m}function ye(b,c){b=P.rgb(b);c=P.rgb(c);var f=b.r,h=b.g,g=b.b,d=c.r-f,k=c.g-h,l=c.b-g;return function(b){return"#"+eb(Math.round(f+d*b))+eb(Math.round(h+k*b))+eb(Math.round(g+l*b))}}function Bf(b,
c){var f={},h={},g;for(g in b)g in c?f[g]=dc(b[g],c[g]):h[g]=b[g];for(g in c)g in b||(h[g]=c[g]);return function(b){for(g in f)h[g]=f[g](b);return h}}function Ub(b,c){b=+b;c=+c;return function(f){return b*(1-f)+c*f}}function Cf(b,c){var f=Ne.lastIndex=Oe.lastIndex=0,h,g,d,k=-1,l=[],m=[];b+="";for(c+="";(h=Ne.exec(b))&&(g=Oe.exec(c));)(d=g.index)>f&&(d=c.slice(f,d),l[k]?l[k]+=d:l[++k]=d),(h=h[0])===(g=g[0])?l[k]?l[k]+=g:l[++k]=g:(l[++k]=null,m.push({i:k,x:Ub(h,g)})),f=Oe.lastIndex;f<c.length&&(d=c.slice(f),
l[k]?l[k]+=d:l[++k]=d);return 2>l.length?m[0]?(c=m[0].x,function(b){return c(b)+""}):function(){return c}:(c=m.length,function(b){for(var f=0,h;f<c;++f)l[(h=m[f]).i]=h.x(b);return l.join("")})}function dc(b,c){for(var f=P.interpolators.length,h;0<=--f&&!(h=P.interpolators[f](b,c)););return h}function Ed(b,c){var f=[],h=[],g=b.length,d=c.length,k=Math.min(b.length,c.length),l;for(l=0;l<k;++l)f.push(dc(b[l],c[l]));for(;l<g;++l)h[l]=b[l];for(;l<d;++l)h[l]=c[l];return function(b){for(l=0;l<k;++l)h[l]=
f[l](b);return h}}function Sg(b){return function(c){return 0>=c?0:1<=c?1:b(c)}}function sf(b){return function(c){return 1-b(1-c)}}function tf(b){return function(c){return.5*(.5>c?b(2*c):2-b(2-2*c))}}function Tg(b){return b*b}function Ug(b){return b*b*b}function Vg(b){if(0>=b)return 0;if(1<=b)return 1;var c=b*b,f=c*b;return 4*(.5>b?f:3*(b-c)+f-.75)}function Wg(b){return 1-Math.cos(b*Ja)}function Xg(b){return Math.pow(2,10*(b-1))}function Yg(b){return 1-Math.sqrt(1-b*b)}function $g(b){return b<1/2.75?
7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function uf(b,c){c-=b;return function(f){return Math.round(b+c*f)}}function vf(b){var c=[b.a,b.b],f=[b.c,b.d],h=wf(c),g=c[0]*f[0]+c[1]*f[1],d=-g;f[0]+=d*c[0];f[1]+=d*c[1];d=wf(f)||0;c[0]*f[1]<f[0]*c[1]&&(c[0]*=-1,c[1]*=-1,h*=-1,g*=-1);this.rotate=(h?Math.atan2(c[1],c[0]):Math.atan2(-f[0],f[1]))*Ga;this.translate=[b.e,b.f];this.scale=[h,d];this.skew=d?Math.atan2(g,d)*Ga:0}function wf(b){var c=
Math.sqrt(b[0]*b[0]+b[1]*b[1]);c&&(b[0]/=c,b[1]/=c);return c}function Kc(b){return b.length?b.pop()+",":""}function ah(b,c,f,h){b[0]!==c[0]||b[1]!==c[1]?(f=f.push("translate(",null,",",null,")"),h.push({i:f-4,x:Ub(b[0],c[0])},{i:f-2,x:Ub(b[1],c[1])})):(c[0]||c[1])&&f.push("translate("+c+")")}function bh(b,c,f,h){b!==c?(180<b-c?c+=360:180<c-b&&(b+=360),h.push({i:f.push(Kc(f)+"rotate(",null,")")-2,x:Ub(b,c)})):c&&f.push(Kc(f)+"rotate("+c+")")}function ch(b,c,f,h){b!==c?h.push({i:f.push(Kc(f)+"skewX(",
null,")")-2,x:Ub(b,c)}):c&&f.push(Kc(f)+"skewX("+c+")")}function dh(b,c,f,h){b[0]!==c[0]||b[1]!==c[1]?(f=f.push(Kc(f)+"scale(",null,",",null,")"),h.push({i:f-4,x:Ub(b[0],c[0])},{i:f-2,x:Ub(b[1],c[1])})):1===c[0]&&1===c[1]||f.push(Kc(f)+"scale("+c+")")}function xf(b,c){var f=[],h=[];b=P.transform(b);c=P.transform(c);ah(b.translate,c.translate,f,h);bh(b.rotate,c.rotate,f,h);ch(b.skew,c.skew,f,h);dh(b.scale,c.scale,f,h);b=c=null;return function(b){for(var c=-1,g=h.length,d;++c<g;)f[(d=h[c]).i]=d.x(b);
return f.join("")}}function kh(b,c){c=(c-=b=+b)||1/c;return function(f){return(f-b)/c}}function lh(b,c){c=(c-=b=+b)||1/c;return function(f){return Math.max(0,Math.min(1,(f-b)/c))}}function mh(b){var c=b.source;b=b.target;var f;var h=b;if(c===h)f=c;else{f=Pf(c);for(var h=Pf(h),g=f.pop(),d=h.pop(),k=null;g===d;)k=g,g=f.pop(),d=h.pop();f=k}for(h=[c];c!==f;)c=c.parent,h.push(c);for(c=h.length;b!==f;)h.splice(c,0,b),b=b.parent;return h}function Pf(b){for(var c=[],f=b.parent;null!=f;)c.push(b),b=f,f=f.parent;
c.push(b);return c}function nh(b){b.fixed|=2}function oh(b){b.fixed&=-7}function ph(b){b.fixed|=4;b.px=b.x;b.py=b.y}function qh(b){b.fixed&=-5}function Qf(b,c,f){var h=0,g=0;b.charge=0;if(!b.leaf)for(var d=b.nodes,k=d.length,l=-1,m;++l<k;)m=d[l],null!=m&&(Qf(m,c,f),b.charge+=m.charge,h+=m.charge*m.cx,g+=m.charge*m.cy);b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),c*=f[b.point.index],b.charge+=b.pointCharge=c,h+=c*b.point.x,g+=c*b.point.y);b.cx=h/b.charge;b.cy=g/b.charge}
function vd(b,c){P.rebind(b,c,"sort","children","value");b.nodes=b;b.links=rh;return b}function wd(b,c){for(var f=[b];null!=(b=f.pop());)if(c(b),(g=b.children)&&(h=g.length))for(var h,g;0<=--h;)f.push(g[h])}function Pb(b,c){for(var f=[b],h=[];null!=(b=f.pop());)if(h.push(b),(k=b.children)&&(d=k.length))for(var g=-1,d,k;++g<d;)f.push(k[g]);for(;null!=(b=h.pop());)c(b)}function sh(b){return b.children}function th(b){return b.value}function uh(b,c){return c.value-b.value}function rh(b){return P.merge(b.map(function(b){return(b.children||
[]).map(function(c){return{source:b,target:c}})}))}function vh(b){return b.x}function wh(b){return b.y}function xh(b,c,f){b.y0=c;b.y=f}function Pe(b){return P.range(b.length)}function Qe(b){var c=-1;b=b[0].length;for(var f=[];++c<b;)f[c]=0;return f}function yh(b){for(var c=1,f=0,h=b[0][1],g,d=b.length;c<d;++c)(g=b[c][1])>h&&(f=c,h=g);return f}function zh(b){return b.reduce(Ah,0)}function Ah(b,c){return b+c[1]}function Bh(b,c){return Rf(b,Math.ceil(Math.log(c.length)/Math.LN2+1))}function Rf(b,c){for(var f=
-1,h=+b[0],g=(b[1]-h)/c,d=[];++f<=c;)d[f]=g*f+h;return d}function Ch(b){return[P.min(b),P.max(b)]}function Dh(b,c){return b.value-c.value}function Re(b,c){var f=b._pack_next;b._pack_next=c;c._pack_prev=b;c._pack_next=f;f._pack_prev=c}function Sf(b,c){b._pack_next=c;c._pack_prev=b}function Tf(b,c){var f=c.x-b.x,h=c.y-b.y,g=b.r+c.r;return.999*g*g>f*f+h*h}function Uf(b){function c(b){h=Math.min(b.x-b.r,h);g=Math.max(b.x+b.r,g);d=Math.min(b.y-b.r,d);k=Math.max(b.y+b.r,k)}if((f=b.children)&&(u=f.length)){var f,
h=Infinity,g=-Infinity,d=Infinity,k=-Infinity,l,m,n,r,q,p,u;f.forEach(Eh);l=f[0];l.x=-l.r;l.y=0;c(l);if(1<u&&(m=f[1],m.x=m.r,m.y=0,c(m),2<u))for(n=f[2],Vf(l,m,n),c(n),Re(l,n),l._pack_prev=n,Re(n,m),m=l._pack_next,r=3;r<u;r++){Vf(l,m,n=f[r]);var v=0,w=1,t=1;for(q=m._pack_next;q!==m;q=q._pack_next,w++)if(Tf(q,n)){v=1;break}if(1==v)for(p=l._pack_prev;p!==q._pack_prev&&!Tf(p,n);p=p._pack_prev,t++);v?(w<t||w==t&&m.r<l.r?Sf(l,m=q):Sf(l=p,m),r--):(Re(l,n),m=n,c(n))}l=(h+g)/2;m=(d+k)/2;for(r=q=0;r<u;r++)n=
f[r],n.x-=l,n.y-=m,q=Math.max(q,n.r+Math.sqrt(n.x*n.x+n.y*n.y));b.r=q;f.forEach(Fh)}}function Eh(b){b._pack_next=b._pack_prev=b}function Fh(b){delete b._pack_next;delete b._pack_prev}function Wf(b,c,f,h){var g=b.children;b.x=c+=h*b.x;b.y=f+=h*b.y;b.r*=h;if(g){b=-1;for(var d=g.length;++b<d;)Wf(g[b],c,f,h)}}function Vf(b,c,f){var h=b.r+f.r,g=c.x-b.x,d=c.y-b.y;if(h&&(g||d)){var k=c.r+f.r,l=g*g+d*d,k=k*k,h=h*h;c=.5+(h-k)/(2*l);k=Math.sqrt(Math.max(0,2*k*(h+l)-(h-=l)*h-k*k))/(2*l);f.x=b.x+c*g+k*d;f.y=
b.y+c*d-k*g}else f.x=b.x+h,f.y=b.y}function Xf(b,c){return b.parent==c.parent?1:2}function Se(b){var c=b.children;return c.length?c[0]:b.t}function Te(b){var c=b.children,f;return(f=c.length)?c[f-1]:b.t}function Gh(b){return 1+P.max(b,function(b){return b.y})}function Hh(b){return b.reduce(function(b,c){return b+c.x},0)/b.length}function Yf(b){var c=b.children;return c&&c.length?Yf(c[0]):b}function Zf(b){var c=b.children,f;return c&&(f=c.length)?Zf(c[f-1]):b}function Ue(b){return{x:b.x,y:b.y,dx:b.dx,
dy:b.dy}}function $f(b,c){var f=b.x+c[3],h=b.y+c[0],g=b.dx-c[1]-c[3],d=b.dy-c[0]-c[2];0>g&&(f+=g/2,g=0);0>d&&(h+=d/2,d=0);return{x:f,y:h,dx:g,dy:d}}function Xc(b){var c=b[0];b=b[b.length-1];return c<b?[c,b]:[b,c]}function Zd(b){return b.rangeExtent?b.rangeExtent():Xc(b.range())}function Ih(b,c,f,h){var g=f(b[0],b[1]),d=h(c[0],c[1]);return function(b){return d(g(b))}}function $d(b,c){var f=0,h=b.length-1,g=b[f],d=b[h],k;d<g&&(k=f,f=h,h=k,k=g,g=d,d=k);b[f]=c.floor(g);b[h]=c.ceil(d);return b}function ag(b){return b?
{floor:function(c){return Math.floor(c/b)*b},ceil:function(c){return Math.ceil(c/b)*b}}:Jh}function Kh(b,c,f,h){var g=[],d=[],k=0,l=Math.min(b.length,c.length)-1;b[l]<b[0]&&(b=b.slice().reverse(),c=c.slice().reverse());for(;++k<=l;)g.push(f(b[k-1],b[k])),d.push(h(c[k-1],c[k]));return function(c){var f=P.bisect(b,c,1,l)-1;return d[f](g[f](c))}}function bg(b,c,f,h){function g(){var m=2<Math.min(b.length,c.length)?Kh:Ih,n=h?lh:kh;k=m(b,c,n,f);l=m(c,b,n,dc);return d}function d(b){return k(b)}var k,l;
d.invert=function(b){return l(b)};d.domain=function(c){if(!arguments.length)return b;b=c.map(Number);return g()};d.range=function(b){if(!arguments.length)return c;c=b;return g()};d.rangeRound=function(b){return d.range(b).interpolate(uf)};d.clamp=function(b){if(!arguments.length)return h;h=b;return g()};d.interpolate=function(b){if(!arguments.length)return f;f=b;return g()};d.ticks=function(c){return P.range.apply(P,oc(b,c))};d.tickFormat=function(c,f){return Ve(b,c,f)};d.nice=function(c){cg(b,c);
return g()};d.copy=function(){return bg(b,c,f,h)};return g()}function We(b,c){return P.rebind(b,c,"range","rangeRound","interpolate","clamp")}function cg(b,c){$d(b,ag(oc(b,c)[2]));$d(b,ag(oc(b,c)[2]));return b}function oc(b,c){null==c&&(c=10);var f=Xc(b),h=f[1]-f[0],g=Math.pow(10,Math.floor(Math.log(h/c)/Math.LN10)),h=c/h*g;.15>=h?g*=10:.35>=h?g*=5:.75>=h&&(g*=2);f[0]=Math.ceil(f[0]/g)*g;f[1]=Math.floor(f[1]/g)*g+.5*g;f[2]=g;return f}function Ve(b,c,f){b=oc(b,c);if(f){c=If.exec(f);c.shift();if("s"===
c[8]){var h=P.formatPrefix(Math.max(na(b[0]),na(b[1])));c[7]||(c[7]="."+ae(h.scale(b[2])));c[8]="f";f=P.format(c.join(""));return function(b){return f(h.scale(b))+h.symbol}}c[7]||(c[7]="."+Lh(c[8],b));f=c.join("")}else f=",."+ae(b[2])+"f";return P.format(f)}function ae(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Lh(b,c){var f=ae(c[2]);return b in Mh?Math.abs(f-ae(Math.max(na(c[0]),na(c[1]))))+ +("e"!==b):f-2*("%"===b)}function dg(b,c,f,h){function g(b){return(f?Math.log(0>b?0:b):-Math.log(0<
b?0:-b))/Math.log(c)}function d(b){return f?Math.pow(c,b):-Math.pow(c,-b)}function k(c){return b(g(c))}k.invert=function(c){return d(b.invert(c))};k.domain=function(c){if(!arguments.length)return h;f=0<=c[0];b.domain((h=c.map(Number)).map(g));return k};k.base=function(f){if(!arguments.length)return c;c=+f;b.domain(h.map(g));return k};k.nice=function(){var c=$d(h.map(g),f?Math:Nh);b.domain(c);h=c.map(d);return k};k.ticks=function(){var b=Xc(h),k=[],l=b[0],b=b[1],m=Math.floor(g(l)),n=Math.ceil(g(b)),
r=c%1?2:c;if(isFinite(n-m)){if(f){for(;m<n;m++)for(var q=1;q<r;q++)k.push(d(m)*q);k.push(d(m))}else for(k.push(d(m));m++<n;)for(q=r-1;0<q;q--)k.push(d(m)*q);for(m=0;k[m]<l;m++);for(n=k.length;k[n-1]>b;n--);k=k.slice(m,n)}return k};k.tickFormat=function(b,f){if(!arguments.length)return eg;2>arguments.length?f=eg:"function"!==typeof f&&(f=P.format(f));var h=Math.max(1,c*b/k.ticks().length);return function(b){var k=b/d(Math.round(g(b)));k*c<c-.5&&(k*=c);return k<=h?f(b):""}};k.copy=function(){return dg(b.copy(),
c,f,h)};return We(k,b)}function fg(b,c,f){function h(c){return b(g(c))}var g=be(c),d=be(1/c);h.invert=function(c){return d(b.invert(c))};h.domain=function(c){if(!arguments.length)return f;b.domain((f=c.map(Number)).map(g));return h};h.ticks=function(b){return P.range.apply(P,oc(f,b))};h.tickFormat=function(b,c){return Ve(f,b,c)};h.nice=function(b){return h.domain(cg(f,b))};h.exponent=function(k){if(!arguments.length)return c;g=be(c=k);d=be(1/c);b.domain(f.map(g));return h};h.copy=function(){return fg(b.copy(),
c,f)};return We(h,b)}function be(b){return function(c){return 0>c?-Math.pow(-c,b):Math.pow(c,b)}}function gg(b,c){function f(h){return d[((g.get(h)||("range"===c.t?g.set(h,b.push(h)):NaN))-1)%d.length]}function h(c,f){return P.range(b.length).map(function(b){return c+f*b})}var g,d,k;f.domain=function(h){if(!arguments.length)return b;b=[];g=new l;for(var d=-1,k=h.length,m;++d<k;)g.has(m=h[d])||g.set(m,b.push(m));return f[c.t].apply(f,c.a)};f.range=function(b){if(!arguments.length)return d;d=b;k=0;
c={t:"range",a:arguments};return f};f.rangePoints=function(g,l){2>arguments.length&&(l=0);var m=g[0],n=g[1],n=2>b.length?(m=(m+n)/2,0):(n-m)/(b.length-1+l);d=h(m+n*l/2,n);k=0;c={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(g,l){2>arguments.length&&(l=0);var m=g[0],n=g[1],r=2>b.length?(m=n=Math.round((m+n)/2),0):(n-m)/(b.length-1+l)|0;d=h(m+Math.round(r*l/2+(n-m-(b.length-1+l)*r)/2),r);k=0;c={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(g,l,m){2>arguments.length&&
(l=0);3>arguments.length&&(m=l);var n=g[1]<g[0],r=g[n-0],q=(g[1-n]-r)/(b.length-l+2*m);d=h(r+q*m,q);n&&d.reverse();k=q*(1-l);c={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(g,l,m){2>arguments.length&&(l=0);3>arguments.length&&(m=l);var n=g[1]<g[0],r=g[n-0],q=g[1-n],p=Math.floor((q-r)/(b.length-l+2*m));d=h(r+Math.round((q-r-(b.length-l)*p)/2),p);n&&d.reverse();k=Math.round(p*(1-l));c={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return k};f.rangeExtent=function(){return Xc(c.a[0])};
f.copy=function(){return gg(b,c)};return f.domain(b)}function hg(b,f){function h(){var c=0,g=f.length;for(l=[];++c<g;)l[c-1]=P.quantile(b,c/g);return k}function k(b){if(!isNaN(b=+b))return f[P.bisect(l,b)]}var l;k.domain=function(f){if(!arguments.length)return b;b=f.map(d).filter(g).sort(c);return h()};k.range=function(b){if(!arguments.length)return f;f=b;return h()};k.quantiles=function(){return l};k.invertExtent=function(c){c=f.indexOf(c);return 0>c?[NaN,NaN]:[0<c?l[c-1]:b[0],c<l.length?l[c]:b[b.length-
1]]};k.copy=function(){return hg(b,f)};return h()}function ig(b,c,f){function h(c){return f[Math.max(0,Math.min(k,Math.floor(d*(c-b))))]}function g(){d=f.length/(c-b);k=f.length-1;return h}var d,k;h.domain=function(f){if(!arguments.length)return[b,c];b=+f[0];c=+f[f.length-1];return g()};h.range=function(b){if(!arguments.length)return f;f=b;return g()};h.invertExtent=function(c){c=f.indexOf(c);c=0>c?NaN:c/d+b;return[c,c+1/d]};h.copy=function(){return ig(b,c,f)};return g()}function jg(b,c){function f(h){if(h<=
h)return c[P.bisect(b,h)]}f.domain=function(c){if(!arguments.length)return b;b=c;return f};f.range=function(b){if(!arguments.length)return c;c=b;return f};f.invertExtent=function(f){f=c.indexOf(f);return[b[f-1],b[f]]};f.copy=function(){return jg(b,c)};return f}function kg(b){function c(b){return+b}c.invert=c;c.domain=c.range=function(f){if(!arguments.length)return b;b=f.map(c);return c};c.ticks=function(c){return P.range.apply(P,oc(b,c))};c.tickFormat=function(c,f){return Ve(b,c,f)};c.copy=function(){return kg(b)};
return c}function Oh(){return 0}function Ph(b){return b.innerRadius}function Qh(b){return b.outerRadius}function lg(b){return b.startAngle}function mg(b){return b.endAngle}function Rh(b){return b&&b.padAngle}function ce(b,c,f,h){return 0<(b-f)*c-(c-h)*b?0:1}function de(b,c,f,h,g){var d=b[0]-c[0],k=b[1]-c[1];g=(g?h:-h)/Math.sqrt(d*d+k*k);var k=g*k,d=-g*d,l=b[0]+k,m=b[1]+d,n=c[0]+k,r=c[1]+d;b=(l+n)/2;c=(m+r)/2;g=n-l;var q=r-m,p=g*g+q*q;h=f-h;var r=l*r-n*m,u=(0>q?-1:1)*Math.sqrt(Math.max(0,h*h*p-r*r)),
l=(r*q-g*u)/p,m=(-r*g-q*u)/p,n=(r*q+g*u)/p;g=(-r*g+q*u)/p;q=l-b;p=m-c;b=n-b;c=g-c;q*q+p*p>b*b+c*c&&(l=n,m=g);return[[l-k,m-d],[l*f/h,m*f/h]]}function ng(b){function c(k){function m(){n.push("M",d(b(r),l))}for(var n=[],r=[],q=-1,p=k.length,u,v=ka(f),w=ka(h);++q<p;)g.call(this,u=k[q],q)?r.push([+v.call(this,u,q),+w.call(this,u,q)]):r.length&&(m(),r=[]);r.length&&m();return n.length?n.join(""):null}var f=mb,h=Fa,g=Rb,d=Db,k=d.key,l=.7;c.x=function(b){if(!arguments.length)return f;f=b;return c};c.y=function(b){if(!arguments.length)return h;
h=b;return c};c.defined=function(b){if(!arguments.length)return g;g=b;return c};c.interpolate=function(b){if(!arguments.length)return k;k="function"===typeof b?d=b:(d=Xe.get(b)||Db).key;return c};c.tension=function(b){if(!arguments.length)return l;l=b;return c};return c}function Db(b){return 1<b.length?b.join("L"):b+"Z"}function og(b){return b.join("L")+"Z"}function Ye(b){for(var c=0,f=b.length,h=b[0],g=[h[0],",",h[1]];++c<f;)g.push("V",(h=b[c])[1],"H",h[0]);return g.join("")}function Ze(b){for(var c=
0,f=b.length,h=b[0],g=[h[0],",",h[1]];++c<f;)g.push("H",(h=b[c])[0],"V",h[1]);return g.join("")}function ee(b,c){if(1>c.length||b.length!=c.length&&b.length!=c.length+2)return Db(b);var f=b.length!=c.length,h="",g=b[0],d=b[1],k=c[0],l=k,m=1;f&&(h+="Q"+(d[0]-2*k[0]/3)+","+(d[1]-2*k[1]/3)+","+d[0]+","+d[1],g=b[1],m=2);if(1<c.length)for(l=c[1],d=b[m],m++,h+="C"+(g[0]+k[0])+","+(g[1]+k[1])+","+(d[0]-l[0])+","+(d[1]-l[1])+","+d[0]+","+d[1],g=2;g<c.length;g++,m++)d=b[m],l=c[g],h+="S"+(d[0]-l[0])+","+(d[1]-
l[1])+","+d[0]+","+d[1];f&&(f=b[m],h+="Q"+(d[0]+2*l[0]/3)+","+(d[1]+2*l[1]/3)+","+f[0]+","+f[1]);return h}function $e(b,c){for(var f=[],h=(1-c)/2,g,d=b[0],k=b[1],l=1,m=b.length;++l<m;)g=d,d=k,k=b[l],f.push([h*(k[0]-g[0]),h*(k[1]-g[1])]);return f}function pg(b){if(3>b.length)return Db(b);var c=1,f=b.length,h=b[0],g=h[0],d=h[1],k=[g,g,g,(h=b[1])[0]],l=[d,d,d,h[1]],g=[g,",",d,"L",tb(pc,k),",",tb(pc,l)];for(b.push(b[f-1]);++c<=f;)h=b[c],k.shift(),k.push(h[0]),l.shift(),l.push(h[1]),af(g,k,l);b.pop();
g.push("L",h);return g.join("")}function tb(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]}function af(b,c,f){b.push("C",tb(qg,c),",",tb(qg,f),",",tb(rg,c),",",tb(rg,f),",",tb(pc,c),",",tb(pc,f))}function bf(b,c){return(c[1]-b[1])/(c[0]-b[0])}function sg(b){for(var c,f=-1,h=b.length,g,d;++f<h;)c=b[f],g=c[0],d=c[1]-Ja,c[0]=g*Math.cos(d),c[1]=g*Math.sin(d);return b}function tg(b){function c(m){function p(){u.push("M",l(b(w),q),r,n(b(v.reverse()),q),"Z")}for(var u=[],v=[],w=[],t=-1,y=m.length,A,
x=ka(f),z=ka(g),C=f===h?function(){return B}:ka(h),D=g===d?function(){return F}:ka(d),B,F;++t<y;)k.call(this,A=m[t],t)?(v.push([B=+x.call(this,A,t),F=+z.call(this,A,t)]),w.push([+C.call(this,A,t),+D.call(this,A,t)])):v.length&&(p(),v=[],w=[]);v.length&&p();return u.length?u.join(""):null}var f=mb,h=mb,g=0,d=Fa,k=Rb,l=Db,m=l.key,n=l,r="L",q=.7;c.x=function(b){if(!arguments.length)return h;f=h=b;return c};c.x0=function(b){if(!arguments.length)return f;f=b;return c};c.x1=function(b){if(!arguments.length)return h;
h=b;return c};c.y=function(b){if(!arguments.length)return d;g=d=b;return c};c.y0=function(b){if(!arguments.length)return g;g=b;return c};c.y1=function(b){if(!arguments.length)return d;d=b;return c};c.defined=function(b){if(!arguments.length)return k;k=b;return c};c.interpolate=function(b){if(!arguments.length)return m;m="function"===typeof b?l=b:(l=Xe.get(b)||Db).key;n=l.reverse||l;r=l.closed?"M":"L";return c};c.tension=function(b){if(!arguments.length)return q;q=b;return c};return c}function Sh(b){return b.radius}
function ug(b){return[b.x,b.y]}function Th(b){return function(){var c=b.apply(this,arguments),f=c[0],c=c[1]-Ja;return[f*Math.cos(c),f*Math.sin(c)]}}function Uh(){return 64}function Vh(){return"circle"}function vg(b){b=Math.sqrt(b/la);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function wg(b){return function(){var c,f,h;(c=this[b])&&(h=c[f=c.active])&&(h.timer.c=null,h.timer.t=NaN,--c.count?delete c[f]:delete this[b],c.active+=.5,h.event&&h.event.interrupt.call(this,this.__data__,
h.index))}}function xd(b,c,f){Qd(b,Qa);b.namespace=c;b.id=f;return b}function cf(b,c,f,h){var g=b.id,d=b.namespace;return ea(b,"function"===typeof f?function(b,k,l){b[d][g].tween.set(c,h(f.call(b,b.__data__,k,l)))}:(f=h(f),function(b){b[d][g].tween.set(c,f)}))}function Wh(b){null==b&&(b="");return function(){this.textContent=b}}function df(b){return null==b?"__transition__":"__transition_"+b+"__"}function fe(b,c,f,h,g){function d(b){var c=r.delay;p.t=c+q;if(c<=b)return k(b-c);p.c=k}function k(f){var g=
n.active,d=n[g];d&&(d.timer.c=null,d.timer.t=NaN,--n.count,delete n[g],d.event&&d.event.interrupt.call(b,b.__data__,d.index));for(var l in n)+l<h&&(g=n[l],g.timer.c=null,g.timer.t=NaN,--n.count,delete n[l]);p.c=m;ha(function(){p.c&&m(f||1)&&(p.c=null,p.t=NaN);return 1},0,q);n.active=h;r.event&&r.event.start.call(b,b.__data__,c);w=[];r.tween.forEach(function(f,h){(h=h.call(b,b.__data__,c))&&w.push(h)});v=r.ease;u=r.duration}function m(g){g/=u;for(var d=v(g),k=w.length;0<k;)w[--k].call(b,d);if(1<=g)return r.event&&
r.event.end.call(b,b.__data__,c),--n.count?delete n[h]:delete b[f],1}var n=b[f]||(b[f]={active:0,count:0}),r=n[h],q,p,u,v,w;r||(q=g.time,p=ha(d,0,q),r=n[h]={tween:new l,time:q,timer:p,delay:g.delay,duration:g.duration,ease:g.ease,index:c},g=null,++n.count)}function Xh(b,c,f){b.attr("transform",function(b){var h=c(b);return"translate("+(isFinite(h)?h:f(b))+",0)"})}function Yh(b,c,f){b.attr("transform",function(b){var h=c(b);return"translate(0,"+(isFinite(h)?h:f(b))+")"})}function ef(b){return b.toISOString()}
function ff(b,c,f){function h(c){return b(c)}function g(b,f){var h=(b[1]-b[0])/f,d=P.bisect(ge,h);return d==ge.length?[c.year,oc(b.map(function(b){return b/31536E6}),f)[2]]:d?c[h/ge[d-1]<ge[d]/h?d-1:d]:[Zh,oc(b,f)[2]]}h.invert=function(c){return Cc(b.invert(c))};h.domain=function(c){if(!arguments.length)return b.domain().map(Cc);b.domain(c);return h};h.nice=function(b,c){function f(h){return!isNaN(h)&&!b.range(h,Cc(+h+1),c).length}var d=h.domain(),k=Xc(d);if(k=null==b?g(k,10):"number"===typeof b&&
g(k,b))b=k[0],c=k[1];return h.domain($d(d,1<c?{floor:function(c){for(;f(c=b.floor(c));)c=Cc(c-1);return c},ceil:function(c){for(;f(c=b.ceil(c));)c=Cc(+c+1);return c}}:b))};h.ticks=function(b,c){var f=Xc(h.domain()),d=null==b?g(f,10):"number"===typeof b?g(f,b):!b.range&&[{range:b},c];d&&(b=d[0],c=d[1]);return b.range(f[0],Cc(+f[1]+1),1>c?1:c)};h.tickFormat=function(){return f};h.copy=function(){return ff(b.copy(),c,f)};return We(h,b)}function Cc(b){return new Date(b)}function $h(b){return JSON.parse(b.responseText)}
function ai(b){var c=fb.createRange();c.selectNode(fb.body);return c.createContextualFragment(b.responseText)}var P={version:"3.5.16"},xg=[].slice,Mb=function(b){return xg.call(b)},fb=this.document;if(fb)try{Mb(fb.documentElement.childNodes)[0].nodeType}catch(ua){Mb=function(b){for(var c=b.length,f=Array(c);c--;)f[c]=b[c];return f}}Date.now||(Date.now=function(){return+new Date});if(fb)try{fb.createElement("DIV").style.setProperty("opacity",0,"")}catch(ua){var he=this.Element.prototype,bi=he.setAttribute,
ci=he.setAttributeNS,yg=this.CSSStyleDeclaration.prototype,di=yg.setProperty;he.setAttribute=function(b,c){bi.call(this,b,c+"")};he.setAttributeNS=function(b,c,f){ci.call(this,b,c,f+"")};yg.setProperty=function(b,c,f){di.call(this,b,c+"",f)}}P.ascending=c;P.descending=function(b,c){return c<b?-1:c>b?1:c>=b?0:NaN};P.min=function(b,c){var f=-1,h=b.length,g,d;if(1===arguments.length){for(;++f<h;)if(null!=(d=b[f])&&d>=d){g=d;break}for(;++f<h;)null!=(d=b[f])&&g>d&&(g=d)}else{for(;++f<h;)if(null!=(d=c.call(b,
b[f],f))&&d>=d){g=d;break}for(;++f<h;)null!=(d=c.call(b,b[f],f))&&g>d&&(g=d)}return g};P.max=function(b,c){var f=-1,h=b.length,g,d;if(1===arguments.length){for(;++f<h;)if(null!=(d=b[f])&&d>=d){g=d;break}for(;++f<h;)null!=(d=b[f])&&d>g&&(g=d)}else{for(;++f<h;)if(null!=(d=c.call(b,b[f],f))&&d>=d){g=d;break}for(;++f<h;)null!=(d=c.call(b,b[f],f))&&d>g&&(g=d)}return g};P.extent=function(b,c){var f=-1,h=b.length,g,d,k;if(1===arguments.length){for(;++f<h;)if(null!=(d=b[f])&&d>=d){g=k=d;break}for(;++f<h;)null!=
(d=b[f])&&(g>d&&(g=d),k<d&&(k=d))}else{for(;++f<h;)if(null!=(d=c.call(b,b[f],f))&&d>=d){g=k=d;break}for(;++f<h;)null!=(d=c.call(b,b[f],f))&&(g>d&&(g=d),k<d&&(k=d))}return[g,k]};P.sum=function(b,c){var f=0,h=b.length,d,k=-1;if(1===arguments.length)for(;++k<h;)g(d=+b[k])&&(f+=d);else for(;++k<h;)g(d=+c.call(b,b[k],k))&&(f+=d);return f};P.mean=function(b,c){var f=0,h=b.length,k,l=-1,m=h;if(1===arguments.length)for(;++l<h;)g(k=d(b[l]))?f+=k:--m;else for(;++l<h;)g(k=d(c.call(b,b[l],l)))?f+=k:--m;if(m)return f/
m};P.quantile=function(b,c){var f=(b.length-1)*c+1,h=Math.floor(f),g=+b[h-1];return(f-=h)?g+f*(b[h]-g):g};P.median=function(b,f){var h=[],k=b.length,l,m=-1;if(1===arguments.length)for(;++m<k;)g(l=d(b[m]))&&h.push(l);else for(;++m<k;)g(l=d(f.call(b,b[m],m)))&&h.push(l);if(h.length)return P.quantile(h.sort(c),.5)};P.variance=function(b,c){var f=b.length,h=0,k,l,m=0,n=-1,r=0;if(1===arguments.length)for(;++n<f;)g(k=d(b[n]))&&(l=k-h,h+=l/++r,m+=l*(k-h));else for(;++n<f;)g(k=d(c.call(b,b[n],n)))&&(l=k-
h,h+=l/++r,m+=l*(k-h));if(1<r)return m/(r-1)};P.deviation=function(){var b=P.variance.apply(this,arguments);return b?Math.sqrt(b):b};var zg=f(c);P.bisectLeft=zg.left;P.bisect=P.bisectRight=zg.right;P.bisector=function(b){return f(1===b.length?function(f,h){return c(b(f),h)}:b)};P.shuffle=function(b,c,f){3>(h=arguments.length)&&(f=b.length,2>h&&(c=0));for(var h=f-c,g,d;h;)d=Math.random()*h--|0,g=b[h+c],b[h+c]=b[d+c],b[d+c]=g;return b};P.permute=function(b,c){for(var f=c.length,h=Array(f);f--;)h[f]=
b[c[f]];return h};P.pairs=function(b){for(var c=0,f=b.length-1,h=b[0],g=Array(0>f?0:f);c<f;)g[c]=[h,h=b[++c]];return g};P.transpose=function(b){if(!(k=b.length))return[];for(var c=-1,f=P.min(b,h),g=Array(f);++c<f;)for(var d=-1,k,l=g[c]=Array(k);++d<k;)l[d]=b[d][c];return g};P.zip=function(){return P.transpose(arguments)};P.keys=function(b){var c=[],f;for(f in b)c.push(f);return c};P.values=function(b){var c=[],f;for(f in b)c.push(b[f]);return c};P.entries=function(b){var c=[],f;for(f in b)c.push({key:f,
value:b[f]});return c};P.merge=function(b){var c=b.length,f;f=-1;for(var h=0,g,d;++f<c;)h+=b[f].length;for(g=Array(h);0<=--c;)for(d=b[c],f=d.length;0<=--f;)g[--h]=d[f];return g};var na=Math.abs;P.range=function(b,c,f){3>arguments.length&&(f=1,2>arguments.length&&(c=b,b=0));if(Infinity===(c-b)/f)throw Error("infinite range");var h=[],g;g=na(f);for(var d=1;g*d%1;)d*=10;g=d;var d=-1,k;b*=g;c*=g;f*=g;if(0>f)for(;(k=b+f*++d)>c;)h.push(k/g);else for(;(k=b+f*++d)<c;)h.push(k/g);return h};P.map=function(b,
c){var f=new l;if(b instanceof l)b.forEach(function(b,c){f.set(b,c)});else if(Array.isArray(b)){var h=-1,g=b.length,d;if(1===arguments.length)for(;++h<g;)f.set(h,b[h]);else for(;++h<g;)f.set(c.call(b,d=b[h],h),d)}else for(h in b)f.set(h,b[h]);return f};k(l,{has:t,get:function(b){return this._[m(b)]},set:function(b,c){return this._[m(b)]=c},remove:u,keys:n,values:function(){var b=[],c;for(c in this._)b.push(this._[c]);return b},entries:function(){var b=[],c;for(c in this._)b.push({key:p(c),value:this._[c]});
return b},size:q,empty:r,forEach:function(b){for(var c in this._)b.call(this,p(c),this._[c])}});P.nest=function(){function b(c,g,m){if(m>=h.length)return k?k.call(f,g):d?g.sort(d):g;for(var n=-1,r=g.length,q=h[m++],p,u,v=new l,w;++n<r;)(w=v.get(p=q(u=g[n])))?w.push(u):v.set(p,[u]);c?(u=c(),g=function(f,h){u.set(f,b(c,h,m))}):(u={},g=function(f,h){u[f]=b(c,h,m)});v.forEach(g);return u}function c(b,f){if(f>=h.length)return b;var d=[],k=g[f++];b.forEach(function(b,h){d.push({key:b,values:c(h,f)})});
return k?d.sort(function(b,c){return k(b.key,c.key)}):d}var f={},h=[],g=[],d,k;f.map=function(c,f){return b(f,c,0)};f.entries=function(f){return c(b(P.map,f,0),0)};f.key=function(b){h.push(b);return f};f.sortKeys=function(b){g[h.length-1]=b;return f};f.sortValues=function(b){d=b;return f};f.rollup=function(b){k=b;return f};return f};P.set=function(b){var c=new w;if(b)for(var f=0,h=b.length;f<h;++f)c.add(b[f]);return c};k(w,{has:t,add:function(b){this._[m(b+="")]=!0;return b},remove:u,values:n,size:q,
empty:r,forEach:function(b){for(var c in this._)b.call(this,p(c))}});P.behavior={};P.rebind=function(b,c){for(var f=1,h=arguments.length,g;++f<h;)b[g=arguments[f]]=y(b,c,c[g]);return b};var Df="webkit ms moz Moz o O".split(" ");P.dispatch=function(){for(var b=new z,c=-1,f=arguments.length;++c<f;)b[arguments[c]]=C(b);return b};z.prototype.on=function(b,c){var f=b.indexOf("."),h="";0<=f&&(h=b.slice(f+1),b=b.slice(0,f));if(b)return 2>arguments.length?this[b].on(h):this[b].on(h,c);if(2===arguments.length){if(null==
c)for(b in this)if(this.hasOwnProperty(b))this[b].on(h,null);return this}};P.event=null;P.requote=function(b){return b.replace(ei,"\\$&")};var ei=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Qd={}.__proto__?function(b,c){b.__proto__=c}:function(b,c){for(var f in c)b[f]=c[f]},Ie=function(b,c){return c.querySelector(b)},Je=function(b,c){return c.querySelectorAll(b)},Rd=function(b,c){var f=b.matches||b[A(b,"matchesSelector")];Rd=function(b,c){return f.call(b,c)};return Rd(b,c)};"function"===typeof Sizzle&&(Ie=
function(b,c){return Sizzle(b,c)[0]||null},Je=Sizzle,Rd=Sizzle.matchesSelector);P.selection=function(){return P.select(fb.documentElement)};var Aa=P.selection.prototype=[];Aa.select=function(b){var c=[],f,h,g,d;b=I(b);for(var k=-1,l=this.length;++k<l;){c.push(f=[]);f.parentNode=(g=this[k]).parentNode;for(var m=-1,n=g.length;++m<n;)(d=g[m])?(f.push(h=b.call(d,d.__data__,m,k)),h&&"__data__"in d&&(h.__data__=d.__data__)):f.push(null)}return H(c)};Aa.selectAll=function(b){var c=[],f,h;b=G(b);for(var g=
-1,d=this.length;++g<d;)for(var k=this[g],l=-1,m=k.length;++l<m;)if(h=k[l])c.push(f=Mb(b.call(h,h.__data__,l,g))),f.parentNode=h;return H(c)};var gf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};P.ns={prefix:gf,qualify:function(b){var c=b.indexOf(":"),f=b;0<=c&&"xmlns"!==(f=b.slice(0,c))&&(b=b.slice(c+1));return gf.hasOwnProperty(f)?{space:gf[f],local:b}:
b}};Aa.attr=function(b,c){if(2>arguments.length){if("string"===typeof b){var f=this.node();b=P.ns.qualify(b);return b.local?f.getAttributeNS(b.space,b.local):f.getAttribute(b)}for(c in b)this.each(M(c,b[c]));return this}return this.each(M(b,c))};Aa.classed=function(b,c){if(2>arguments.length){if("string"===typeof b){var f=this.node(),h=(b=(b+"").trim().split(/^|\s+/)).length,g=-1;if(c=f.classList)for(;++g<h;){if(!c.contains(b[g]))return!1}else for(c=f.getAttribute("class");++g<h;)if(!K(b[g]).test(c))return!1;
return!0}for(c in b)this.each(L(c,b[c]));return this}return this.each(L(b,c))};Aa.style=function(c,f,h){var g=arguments.length;if(3>g){if("string"!==typeof c){2>g&&(f="");for(h in c)this.each(Q(h,c[h],f));return this}if(2>g)return g=this.node(),b(g).getComputedStyle(g,null).getPropertyValue(c);h=""}return this.each(Q(c,f,h))};Aa.property=function(b,c){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(c in b)this.each(S(c,b[c]));return this}return this.each(S(b,c))};Aa.text=function(b){return arguments.length?
this.each("function"===typeof b?function(){var c=b.apply(this,arguments);this.textContent=null==c?"":c}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};Aa.html=function(b){return arguments.length?this.each("function"===typeof b?function(){var c=b.apply(this,arguments);this.innerHTML=null==c?"":c}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};Aa.append=function(b){b=U(b);return this.select(function(){return this.appendChild(b.apply(this,
arguments))})};Aa.insert=function(b,c){b=U(b);c=I(c);return this.select(function(){return this.insertBefore(b.apply(this,arguments),c.apply(this,arguments)||null)})};Aa.remove=function(){return this.each(V)};Aa.data=function(b,c){function f(b,h){var g,d=b.length,k=h.length,q=Math.min(d,k),p=Array(k),u=Array(k),v=Array(d),w,t;if(c){var q=new l,y=Array(d),A;for(g=-1;++g<d;)if(w=b[g])q.has(A=c.call(w,w.__data__,g))?v[g]=w:q.set(A,w),y[g]=A;for(g=-1;++g<k;)(w=q.get(A=c.call(h,t=h[g],g)))?!0!==w&&(p[g]=
w,w.__data__=t):u[g]={__data__:t},q.set(A,!0);for(g=-1;++g<d;)g in y&&!0!==q.get(y[g])&&(v[g]=b[g])}else{for(g=-1;++g<q;)w=b[g],t=h[g],w?(w.__data__=t,p[g]=w):u[g]={__data__:t};for(;g<k;++g)u[g]={__data__:h[g]};for(;g<d;++g)v[g]=b[g]}u.update=p;u.parentNode=p.parentNode=v.parentNode=b.parentNode;m.push(u);n.push(p);r.push(v)}var h=-1,g=this.length,d,k;if(!arguments.length){for(b=Array(g=(d=this[0]).length);++h<g;)if(k=d[h])b[h]=k.__data__;return b}var m=da([]),n=H([]),r=H([]);if("function"===typeof b)for(;++h<
g;)f(d=this[h],b.call(d,d.parentNode.__data__,h));else for(;++h<g;)f(d=this[h],b);n.enter=function(){return m};n.exit=function(){return r};return n};Aa.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};Aa.filter=function(b){var c=[],f,h,g;"function"!==typeof b&&(b=W(b));for(var d=0,k=this.length;d<k;d++){c.push(f=[]);f.parentNode=(h=this[d]).parentNode;for(var l=0,m=h.length;l<m;l++)(g=h[l])&&b.call(g,g.__data__,l,d)&&f.push(g)}return H(c)};Aa.order=
function(){for(var b=-1,c=this.length;++b<c;)for(var f=this[b],h=f.length-1,g=f[h],d;0<=--h;)if(d=f[h])g&&g!==d.nextSibling&&g.parentNode.insertBefore(d,g),g=d;return this};Aa.sort=function(b){b=X.apply(this,arguments);for(var c=-1,f=this.length;++c<f;)this[c].sort(b);return this.order()};Aa.each=function(b){return ea(this,function(c,f,h){b.call(c,c.__data__,f,h)})};Aa.call=function(b){var c=Mb(arguments);b.apply(c[0]=this,c);return this};Aa.empty=function(){return!this.node()};Aa.node=function(){for(var b=
0,c=this.length;b<c;b++)for(var f=this[b],h=0,g=f.length;h<g;h++){var d=f[h];if(d)return d}return null};Aa.size=function(){var b=0;ea(this,function(){++b});return b};var Xb=[];P.selection.enter=da;P.selection.enter.prototype=Xb;Xb.append=Aa.append;Xb.empty=Aa.empty;Xb.node=Aa.node;Xb.call=Aa.call;Xb.size=Aa.size;Xb.select=function(b){for(var c=[],f,h,g,d,k,l=-1,m=this.length;++l<m;){g=(d=this[l]).update;c.push(f=[]);f.parentNode=d.parentNode;for(var n=-1,r=d.length;++n<r;)(k=d[n])?(f.push(g[n]=h=
b.call(d.parentNode,k.__data__,n,l)),h.__data__=k.__data__):f.push(null)}return H(c)};Xb.insert=function(b,c){2>arguments.length&&(c=R(this));return Aa.insert.call(this,b,c)};P.select=function(b){var c;"string"===typeof b?(c=[Ie(b,fb)],c.parentNode=fb.documentElement):(c=[b],c.parentNode=b&&(b.ownerDocument||b.document||b).documentElement);return H([c])};P.selectAll=function(b){"string"===typeof b?(b=Mb(Je(b,fb)),b.parentNode=fb.documentElement):(b=Mb(b),b.parentNode=null);return H([b])};Aa.on=function(b,
c,f){var h=arguments.length;if(3>h){if("string"!==typeof b){2>h&&(c=!1);for(f in b)this.each(Y(f,b[f],c));return this}if(2>h)return(h=this.node()["__on"+b])&&h._;f=!1}return this.each(Y(b,c,f))};var Ke=P.map({mouseenter:"mouseover",mouseleave:"mouseout"});fb&&Ke.forEach(function(b){"on"+b in fb&&Ke.remove(b)});var zc,ih=0;P.mouse=function(b){return aa(b,B())};var Le=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;P.touch=function(b,c,f){3>arguments.length&&(f=c,c=B().changedTouches);
if(c)for(var h=0,g=c.length,d;h<g;++h)if((d=c[h]).identifier===f)return aa(b,d)};P.behavior.drag=function(){function c(){this.on("mousedown.drag",d).on("touchstart.drag",k)}function f(b,c,d,k,l){return function(){var f=P.event.target.correspondingElement||P.event.target,m=this.parentNode,n=h.of(this,arguments),r=0,q=b(),p=".drag"+(null==q?"":"-"+q),u,v=P.select(d(f)).on(k+p,function(){var b=c(m,q),f,h;b&&(f=b[0]-t[0],h=b[1]-t[1],r=r|f|h,t=b,n({type:"drag",x:b[0]+u[0],y:b[1]+u[1],dx:f,dy:h}))}).on(l+
p,function(){c(m,q)&&(v.on(k+p,null).on(l+p,null),w(r),n({type:"dragend"}))}),w=ba(f),t=c(m,q);g?(u=g.apply(this,arguments),u=[u.x-t[0],u.y-t[1]]):u=[0,0];n({type:"dragstart"})}}var h=F(c,"drag","dragstart","dragend"),g=null,d=f(x,P.mouse,b,"mousemove","mouseup"),k=f(ra,P.touch,v,"touchmove","touchend");c.origin=function(b){if(!arguments.length)return g;g=b;return c};return P.rebind(c,h,"on")};P.touches=function(b,c){2>arguments.length&&(c=B().touches);return c?Mb(c).map(function(c){var f=aa(b,c);
f.identifier=c.identifier;return f}):[]};var la=Math.PI,pb=2*la,fi=pb-1E-6,Ja=la/2,ma=la/180,Ga=180/la,yd=Math.SQRT2;P.interpolateZoom=function(b,c){var f=b[0],h=b[1],g=b[2],d=c[2],k=c[0]-f,l=c[1]-h,m=k*k+l*l,n,r;if(1E-12>m)r=Math.log(d/g)/yd,n=function(b){return[f+b*k,h+b*l,g*Math.exp(yd*b*r)]};else{var q=Math.sqrt(m);n=(d*d-g*g+4*m)/(4*g*q);var d=(d*d-g*g-4*m)/(4*d*q),p=Math.log(Math.sqrt(n*n+1)-n);r=(Math.log(Math.sqrt(d*d+1)-d)-p)/yd;n=function(b){b*=r;var c=sa(p),d=g/(2*q),m,n=yd*b+p;m=((n=Math.exp(2*
n))-1)/(n+1);var u=p,n=((u=Math.exp(u))-1/u)/2,d=d*(c*m-n);return[f+d*k,h+d*l,g*c/sa(yd*b+p)]}}n.duration=1E3*r;return n};P.behavior.zoom=function(){function c(b){b.on("mousedown.zoom",r).on(hf+".zoom",p).on("dblclick.zoom",u).on("touchstart.zoom",q)}function f(b){return[(b[0]-v.x)/v.k,(b[1]-v.y)/v.k]}function h(b){v.k=Math.max(x[0],Math.min(x[1],b))}function g(b,c){c=[c[0]*v.k+v.x,c[1]*v.k+v.y];v.x+=b[0]-c[0];v.y+=b[1]-c[1]}function d(b,f,k,l){b.__chart__={x:v.x,y:v.y,k:v.k};h(Math.pow(2,l));g(t=
f,k);b=P.select(b);0<z&&(b=b.transition().duration(z));b.call(c.event)}function k(){H&&H.domain(N.range().map(function(b){return(b-v.x)/v.k}).map(N.invert));I&&I.domain(G.range().map(function(b){return(b-v.y)/v.k}).map(G.invert))}function l(b){C++||b({type:"zoomstart"})}function m(b){k();b({type:"zoom",scale:v.k,translate:[v.x,v.y]})}function n(b){--C||(b({type:"zoomend"}),t=null)}function r(){var c=this,h=Q.of(c,arguments),d=0,k=P.select(b(c)).on("mousemove.zoom",function(){d=1;g(P.mouse(c),q);m(h)}).on("mouseup.zoom",
function(){k.on("mousemove.zoom",null).on("mouseup.zoom",null);p(d);n(h)}),q=f(P.mouse(c)),p=ba(c);ie.call(c);l(h)}function q(){function b(){var c=P.touches(u);A=v.k;c.forEach(function(b){b.identifier in t&&(t[b.identifier]=f(b))});return c}function c(){var f=P.event.target;P.select(f).on(z,k).on(C,p);B.push(f);for(var f=P.event.changedTouches,h=0,g=f.length;h<g;++h)t[f[h].identifier]=null;h=b();g=Date.now();1===h.length?(500>g-L&&(f=h[0],d(u,f,t[f.identifier],Math.floor(Math.log(v.k)/Math.LN2)+1),
D()),L=g):1<h.length&&(f=h[0],g=h[1],h=f[0]-g[0],f=f[1]-g[1],y=h*h+f*f)}function k(){var b=P.touches(u),c,f,d,l;ie.call(u);for(var n=0,r=b.length;n<r;++n,l=null)if(d=b[n],l=t[d.identifier]){if(f)break;c=d;f=l}if(l){var q=(q=d[0]-c[0])*q+(q=d[1]-c[1])*q,b=y&&Math.sqrt(q/y);c=[(c[0]+d[0])/2,(c[1]+d[1])/2];f=[(f[0]+l[0])/2,(f[1]+l[1])/2];h(b*A)}L=null;g(c,f);m(w)}function p(){if(P.event.touches.length){for(var c=P.event.changedTouches,f=0,h=c.length;f<h;++f)delete t[c[f].identifier];for(var g in t)return void b()}P.selectAll(B).on(x,
null);F.on("mousedown.zoom",r).on("touchstart.zoom",q);ua();n(w)}var u=this,w=Q.of(u,arguments),t={},y=0,A,x=".zoom-"+P.event.changedTouches[0].identifier,z="touchmove"+x,C="touchend"+x,B=[],F=P.select(u),ua=ba(u);c();l(w);F.on("mousedown.zoom",null).on("touchstart.zoom",c)}function p(){var b=Q.of(this,arguments);B?clearTimeout(B):(ie.call(this),w=f(t=y||P.mouse(this)),l(b));B=setTimeout(function(){B=null;n(b)},50);D();h(Math.pow(2,.002*je())*v.k);g(t,w);m(b)}function u(){var b=P.mouse(this),c=Math.log(v.k)/
Math.LN2;d(this,b,f(b),P.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var v={x:0,y:0,k:1},w,t,y,A=[960,500],x=Ag,z=250,C=0,B,L,Q=F(c,"zoomstart","zoom","zoomend"),N,H,G,I;hf||(hf="onwheel"in fb?(je=function(){return-P.event.deltaY*(P.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fb?(je=function(){return P.event.wheelDelta},"mousewheel"):(je=function(){return-P.event.detail},"MozMousePixelScroll"));c.event=function(b){b.each(function(){var b=Q.of(this,arguments),c=v;Dc?P.select(this).transition().each("start.zoom",
function(){v=this.__chart__||{x:0,y:0,k:1};l(b)}).tween("zoom:zoom",function(){var f=A[0],h=A[1],g=t?t[0]:f/2,d=t?t[1]:h/2,k=P.interpolateZoom([(g-v.x)/v.k,(d-v.y)/v.k,f/v.k],[(g-c.x)/c.k,(d-c.y)/c.k,f/c.k]);return function(c){c=k(c);var h=f/c[2];this.__chart__=v={x:g-c[0]*h,y:d-c[1]*h,k:h};m(b)}}).each("interrupt.zoom",function(){n(b)}).each("end.zoom",function(){n(b)}):(this.__chart__=v,l(b),m(b),n(b))})};c.translate=function(b){if(!arguments.length)return[v.x,v.y];v={x:+b[0],y:+b[1],k:v.k};k();
return c};c.scale=function(b){if(!arguments.length)return v.k;v={x:v.x,y:v.y,k:null};h(+b);k();return c};c.scaleExtent=function(b){if(!arguments.length)return x;x=null==b?Ag:[+b[0],+b[1]];return c};c.center=function(b){if(!arguments.length)return y;y=b&&[+b[0],+b[1]];return c};c.size=function(b){if(!arguments.length)return A;A=b&&[+b[0],+b[1]];return c};c.duration=function(b){if(!arguments.length)return z;z=+b;return c};c.x=function(b){if(!arguments.length)return H;H=b;N=b.copy();v={x:0,y:0,k:1};
return c};c.y=function(b){if(!arguments.length)return I;I=b;G=b.copy();v={x:0,y:0,k:1};return c};return P.rebind(c,Q,"on")};var Ag=[0,Infinity],je,hf;P.color=ga;ga.prototype.toString=function(){return this.rgb()+""};P.hsl=E;var jf=E.prototype=new ga;jf.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new E(this.h,this.s,this.l/b)};jf.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new E(this.h,this.s,b*this.l)};jf.rgb=function(){return Ca(this.h,this.s,this.l)};P.hcl=
ta;var kf=ta.prototype=new ga;kf.brighter=function(b){return new ta(this.h,this.c,Math.min(100,this.l+ke*(arguments.length?b:1)))};kf.darker=function(b){return new ta(this.h,this.c,Math.max(0,this.l-ke*(arguments.length?b:1)))};kf.rgb=function(){return oa(this.h,this.c,this.l).rgb()};P.lab=ya;var ke=18,Ef=.95047,Ff=1,Gf=1.08883,lf=ya.prototype=new ga;lf.brighter=function(b){return new ya(Math.min(100,this.l+ke*(arguments.length?b:1)),this.a,this.b)};lf.darker=function(b){return new ya(Math.max(0,
this.l-ke*(arguments.length?b:1)),this.a,this.b)};lf.rgb=function(){return Pa(this.l,this.a,this.b)};P.rgb=Na;var le=Na.prototype=new ga;le.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var c=this.r,f=this.g,h=this.b;if(!c&&!f&&!h)return new Na(30,30,30);c&&30>c&&(c=30);f&&30>f&&(f=30);h&&30>h&&(h=30);return new Na(Math.min(255,c/b),Math.min(255,f/b),Math.min(255,h/b))};le.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Na(b*this.r,b*this.g,b*this.b)};le.hsl=function(){return Ma(this.r,
this.g,this.b)};le.toString=function(){return"#"+eb(this.r)+eb(this.g)+eb(this.b)};var Td=P.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,
slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Td.forEach(function(b,c){Td.set(b,new Na(c>>16,c>>8&255,c&255))});P.functor=ka;P.xhr=O(v);P.dsv=function(b,c){function f(b,d,k){3>arguments.length&&(k=d,d=null);var l=ja(b,c,null==d?h:g(d),k);l.row=function(b){return arguments.length?l.response(null==(d=
b)?h:g(b)):d};return l}function h(b){return f.parse(b.responseText)}function g(b){return function(c){return f.parse(c.responseText,b)}}function d(c){return c.map(k).join(b)}function k(b){return l.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var l=new RegExp('["'+b+"\n]"),m=b.charCodeAt(0);f.parse=function(b,c){var h;return f.parseRows(b,function(b,f){if(h)return h(b,f-1);var g=new Function("d","return {"+b.map(function(b,c){return JSON.stringify(b)+": d["+c+"]"}).join(",")+"}");h=c?function(b,f){return c(g(b),
f)}:g})};f.parseRows=function(b,c){function f(){if(l>=k)return g;if(q)return q=!1,h;var c=l;if(34===b.charCodeAt(c)){for(var d=c;d++<k;)if(34===b.charCodeAt(d)){if(34!==b.charCodeAt(d+1))break;++d}l=d+2;var n=b.charCodeAt(d+1);13===n?(q=!0,10===b.charCodeAt(d+2)&&++l):10===n&&(q=!0);return b.slice(c+1,d).replace(/""/g,'"')}for(;l<k;){n=b.charCodeAt(l++);d=1;if(10===n)q=!0;else if(13===n)q=!0,10===b.charCodeAt(l)&&(++l,++d);else if(n!==m)continue;return b.slice(c,l-d)}return b.slice(c)}for(var h={},
g={},d=[],k=b.length,l=0,n=0,r,q;(r=f())!==g;){for(var p=[];r!==h&&r!==g;)p.push(r),r=f();c&&null==(p=c(p,n++))||d.push(p)}return d};f.format=function(c){if(Array.isArray(c[0]))return f.formatRows(c);var h=new w,g=[];c.forEach(function(b){for(var c in b)h.has(c)||g.push(h.add(c))});return[g.map(k).join(b)].concat(c.map(function(c){return g.map(function(b){return k(c[b])}).join(b)})).join("\n")};f.formatRows=function(b){return b.map(d).join("\n")};return f};P.csv=P.dsv(",","text/csv");P.tsv=P.dsv("\t",
"text/tab-separated-values");var Vd,Ud,Wd,Xd,Hf=this[A(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};P.timer=function(){ha.apply(this,arguments)};P.timer.flush=function(){Sa();cb()};P.round=function(b,c){return c?Math.round(b*(c=Math.pow(10,c)))/c:Math.round(b)};var gi="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,c){var f=Math.pow(10,3*na(8-c));return{scale:8<c?function(b){return b/f}:function(b){return b*f},symbol:b}});P.formatPrefix=function(b,c){var f=0;if(b=
+b)0>b&&(b*=-1),c&&(b=P.round(b,gb(b,c))),f=1+Math.floor(1E-12+Math.log(b)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((f-1)/3)));return gi[8+f/3]};var If=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,jh=P.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,c){return b.toPrecision(c)},e:function(b,
c){return b.toExponential(c)},f:function(b,c){return b.toFixed(c)},r:function(b,c){return(b=P.round(b,gb(b,c))).toFixed(Math.max(0,Math.min(20,gb(b*(1+1E-15),c))))}}),fa=P.time={},bb=Date;Oa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},
getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){$b.setUTCDate.apply(this._,arguments)},setDay:function(){$b.setUTCDay.apply(this._,arguments)},setFullYear:function(){$b.setUTCFullYear.apply(this._,arguments)},setHours:function(){$b.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){$b.setUTCMilliseconds.apply(this._,
arguments)},setMinutes:function(){$b.setUTCMinutes.apply(this._,arguments)},setMonth:function(){$b.setUTCMonth.apply(this._,arguments)},setSeconds:function(){$b.setUTCSeconds.apply(this._,arguments)},setTime:function(){$b.setTime.apply(this._,arguments)}};var $b=Date.prototype;fa.year=Ha(function(b){b=fa.day(b);b.setMonth(0,1);return b},function(b,c){b.setFullYear(b.getFullYear()+c)},function(b){return b.getFullYear()});fa.years=fa.year.range;fa.years.utc=fa.year.utc.range;fa.day=Ha(function(b){var c=
new bb(2E3,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return c},function(b,c){b.setDate(b.getDate()+c)},function(b){return b.getDate()-1});fa.days=fa.day.range;fa.days.utc=fa.day.utc.range;fa.dayOfYear=function(b){var c=fa.year(b);return Math.floor((b-c-6E4*(b.getTimezoneOffset()-c.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,c){c=7-c;var f=fa[b]=Ha(function(b){(b=fa.day(b)).setDate(b.getDate()-(b.getDay()+c)%
7);return b},function(b,c){b.setDate(b.getDate()+7*Math.floor(c))},function(b){var f=fa.year(b).getDay();return Math.floor((fa.dayOfYear(b)+(f+c)%7)/7)-(f!==c)});fa[b+"s"]=f.range;fa[b+"s"].utc=f.utc.range;fa[b+"OfYear"]=function(b){var f=fa.year(b).getDay();return Math.floor((fa.dayOfYear(b)+(f+c)%7)/7)}});fa.week=fa.sunday;fa.weeks=fa.sunday.range;fa.weeks.utc=fa.sunday.utc.range;fa.weekOfYear=fa.sundayOfYear;var Jf={"-":"",_:" ",0:"0"},Ka=/^\s*\d+/,Kf=/^%/;P.locale=function(b){return{numberFormat:xb(b),
timeFormat:yb(b)}};var Bg=P.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});P.format=Bg.numberFormat;
P.geo={};Fb.prototype={s:0,t:0,add:function(b){Vb(b,this.t,me);Vb(me.s,this.s,this);this.s?this.t+=me.t:this.s=me.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var me=new Fb;P.geo.stream=function(b,c){if(b&&Cg.hasOwnProperty(b.type))Cg[b.type](b,c);else Oc(b,c)};var Cg={Feature:function(b,c){Oc(b.geometry,c)},FeatureCollection:function(b,c){for(var f=b.features,h=-1,g=f.length;++h<g;)Oc(f[h].geometry,c)}},Lf={Sphere:function(b,c){c.sphere()},Point:function(b,c){b=b.coordinates;
c.point(b[0],b[1],b[2])},MultiPoint:function(b,c){for(var f=b.coordinates,h=-1,g=f.length;++h<g;)b=f[h],c.point(b[0],b[1],b[2])},LineString:function(b,c){ld(b.coordinates,c,0)},MultiLineString:function(b,c){for(var f=b.coordinates,h=-1,g=f.length;++h<g;)ld(f[h],c,0)},Polygon:function(b,c){md(b.coordinates,c)},MultiPolygon:function(b,c){for(var f=b.coordinates,h=-1,g=f.length;++h<g;)md(f[h],c)},GeometryCollection:function(b,c){for(var f=b.geometries,h=-1,g=f.length;++h<g;)Oc(f[h],c)}};P.geo.area=function(b){Yc=
0;P.geo.stream(b,ob);return Yc};var Yc,Ac=new Fb,ob={sphere:function(){Yc+=4*la},point:x,lineStart:x,lineEnd:x,polygonStart:function(){Ac.reset();ob.lineStart=wc},polygonEnd:function(){var b=2*Ac;Yc+=0>b?4*la+b:b;ob.lineStart=ob.lineEnd=ob.point=x}};P.geo.bounds=function(){function b(c,f){x.push(z=[r=c,p=c]);f<q&&(q=f);f>u&&(u=f)}function c(f,h){var g=Wb([f*ma,h*ma]);if(y){var d=Kb(y,g),d=Kb([d[1],-d[0],0],d);Lb(d);var d=gc(d),k=f-v,m=0<k?1:-1,n=d[0]*Ga*m,k=180<na(k);k^(m*v<n&&n<m*f)?(d=d[1]*Ga,d>
u&&(u=d)):(n=(n+360)%360-180,k^(m*v<n&&n<m*f))?(d=-d[1]*Ga,d<q&&(q=d)):(h<q&&(q=h),h>u&&(u=h));k?f<v?l(r,f)>l(r,p)&&(p=f):l(f,p)>l(r,p)&&(r=f):p>=r?(f<r&&(r=f),f>p&&(p=f)):f>v?l(r,f)>l(r,p)&&(p=f):l(f,p)>l(r,p)&&(r=f)}else b(f,h);y=g;v=f}function f(){C.point=c}function h(){z[0]=r;z[1]=p;C.point=b;y=null}function g(b,f){if(y){var h=b-v;A+=180<na(h)?h+(0<h?360:-360):h}else w=b,t=f;ob.point(b,f);c(b,f)}function d(){ob.lineStart()}function k(){g(w,t);ob.lineEnd();1E-6<na(A)&&(r=-(p=180));z[0]=r;z[1]=
p;y=null}function l(b,c){return 0>(c-=b)?c+360:c}function m(b,c){return b[0]-c[0]}function n(b,c){return c[0]<=c[1]?c[0]<=b&&b<=c[1]:b<c[0]||c[1]<b}var r,q,p,u,v,w,t,y,A,x,z,C={point:b,lineStart:f,lineEnd:h,polygonStart:function(){C.point=g;C.lineStart=d;C.lineEnd=k;A=0;ob.polygonStart()},polygonEnd:function(){ob.polygonEnd();C.point=b;C.lineStart=f;C.lineEnd=h;0>Ac?(r=-(p=180),q=-(u=90)):1E-6<A?u=90:-1E-6>A&&(q=-90);z[0]=r;z[1]=p}};return function(b){u=p=-(r=q=Infinity);x=[];P.geo.stream(b,C);if(b=
x.length){x.sort(m);for(var c=1,f=x[0],h,g=[f];c<b;++c)h=x[c],n(h[0],f)||n(h[1],f)?(l(f[0],h[1])>l(f[0],f[1])&&(f[1]=h[1]),l(h[0],f[1])>l(f[0],f[1])&&(f[0]=h[0])):g.push(f=h);var d=-Infinity,k;b=g.length-1;c=0;for(f=g[b];c<=b;f=h,++c)h=g[c],(k=l(f[1],h[0]))>d&&(d=k,r=h[0],p=f[1])}x=z=null;return Infinity===r||Infinity===q?[[NaN,NaN],[NaN,NaN]]:[[r,q],[p,u]]}}();P.geo.centroid=function(b){td=Uc=Yb=Zb=Nb=rb=sb=lb=lc=mc=Ob=0;P.geo.stream(b,Bb);b=lc;var c=mc,f=Ob,h=b*b+c*c+f*f;return 1E-12>h&&(b=rb,c=
sb,f=lb,1E-6>Uc&&(b=Yb,c=Zb,f=Nb),h=b*b+c*c+f*f,1E-12>h)?[NaN,NaN]:[Math.atan2(c,b)*Ga,wa(f/Math.sqrt(h))*Ga]};var td,Uc,Yb,Zb,Nb,rb,sb,lb,lc,mc,Ob,Bb={sphere:x,point:od,lineStart:Md,lineEnd:Nd,polygonStart:function(){Bb.lineStart=Ee},polygonEnd:function(){Bb.lineStart=Md}},Mf=Dd(Rb,function(b){var c=NaN,f=NaN,h=NaN,g;return{lineStart:function(){b.lineStart();g=1},point:function(d,k){var l=0<d?la:-la,m=na(d-c);if(1E-6>na(m-la))b.point(c,f=0<(f+k)/2?Ja:-Ja),b.point(h,f),b.lineEnd(),b.lineStart(),b.point(l,
f),b.point(d,f),g=0;else if(h!==l&&m>=la){1E-6>na(c-h)&&(c-=1E-6*h);1E-6>na(d-l)&&(d-=1E-6*l);var m=c,n=f,r=d,q,p,u=Math.sin(m-r);f=1E-6<na(u)?Math.atan((Math.sin(n)*(p=Math.cos(k))*Math.sin(r)-Math.sin(k)*(q=Math.cos(n))*Math.sin(m))/(q*p*u)):(n+k)/2;b.point(h,f);b.lineEnd();b.lineStart();b.point(l,f);g=0}b.point(c=d,f=k);h=l},lineEnd:function(){b.lineEnd();c=f=NaN},clean:function(){return 2-g}}},function(b,c,f,h){null==b?(f*=Ja,h.point(-la,f),h.point(0,f),h.point(la,f),h.point(la,0),h.point(la,
-f),h.point(0,-f),h.point(-la,-f),h.point(-la,0),h.point(-la,f)):1E-6<na(b[0]-c[0])?(b=b[0]<c[0]?la:-la,f=f*b/2,h.point(-b,f),h.point(0,f),h.point(b,f)):h.point(c[0],c[1])},[-la,-la/2]);P.geo.clipExtent=function(){var b,c,f,h,g,d,k={stream:function(b){g&&(g.valid=!1);g=d(b);g.valid=!0;return g},extent:function(l){if(!arguments.length)return[[b,c],[f,h]];d=rd(b=+l[0][0],c=+l[0][1],f=+l[1][0],h=+l[1][1]);g&&(g.valid=!1,g=null);return k}};return k.extent([[0,0],[960,500]])};(P.geo.conicEqualArea=function(){return yc(sd)}).raw=
sd;P.geo.albers=function(){return P.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};P.geo.albersUsa=function(){function b(c){var f=c[0];c=c[1];g=null;(k(f,c),g)||(l(f,c),g)||m(f,c);return g}var c=P.geo.albers(),f=P.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=P.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g,d={point:function(b,c){g=[b,c]}},k,l,m;b.invert=function(b){var g=c.scale(),d=c.translate(),
k=(b[0]-d[0])/g,g=(b[1]-d[1])/g;return(.12<=g&&.234>g&&-.425<=k&&-.214>k?f:.166<=g&&.234>g&&-.214<=k&&-.115>k?h:c).invert(b)};b.stream=function(b){var g=c.stream(b),d=f.stream(b),k=h.stream(b);return{point:function(b,c){g.point(b,c);d.point(b,c);k.point(b,c)},sphere:function(){g.sphere();d.sphere();k.sphere()},lineStart:function(){g.lineStart();d.lineStart();k.lineStart()},lineEnd:function(){g.lineEnd();d.lineEnd();k.lineEnd()},polygonStart:function(){g.polygonStart();d.polygonStart();k.polygonStart()},
polygonEnd:function(){g.polygonEnd();d.polygonEnd();k.polygonEnd()}}};b.precision=function(g){if(!arguments.length)return c.precision();c.precision(g);f.precision(g);h.precision(g);return b};b.scale=function(g){if(!arguments.length)return c.scale();c.scale(g);f.scale(.35*g);h.scale(g);return b.translate(c.translate())};b.translate=function(g){if(!arguments.length)return c.translate();var n=c.scale(),r=+g[0],q=+g[1];k=c.translate(g).clipExtent([[r-.455*n,q-.238*n],[r+.455*n,q+.238*n]]).stream(d).point;
l=f.translate([r-.307*n,q+.201*n]).clipExtent([[r-.425*n+1E-6,q+.12*n+1E-6],[r-.214*n-1E-6,q+.234*n-1E-6]]).stream(d).point;m=h.translate([r-.205*n,q+.212*n]).clipExtent([[r-.214*n+1E-6,q+.166*n+1E-6],[r-.115*n-1E-6,q+.234*n-1E-6]]).stream(d).point;return b};return b.scale(1070)};var ne,Yd,nc={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Yd=0;nc.lineStart=He},polygonEnd:function(){nc.lineStart=nc.lineEnd=nc.point=x;ne+=na(Yd/2)}},oe,pe,qe,re,hi={point:function(b,c){b<oe&&(oe=b);b>qe&&(qe=
b);c<pe&&(pe=c);c>re&&(re=c)},lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},Cb={point:qc,lineStart:qf,lineEnd:rf,polygonStart:function(){Cb.lineStart=Rg},polygonEnd:function(){Cb.point=qc;Cb.lineStart=qf;Cb.lineEnd=rf}};P.geo.path=function(){function b(c){c&&("function"===typeof f&&k.pointRadius(+f.apply(this,arguments)),l&&l.valid||(l=d(k)),P.geo.stream(c,l));return k.result()}function c(){l=null;return b}var f=4.5,h,g,d,k,l;b.area=function(b){ne=0;P.geo.stream(b,d(nc));return ne};b.centroid=
function(b){Yb=Zb=Nb=rb=sb=lb=lc=mc=Ob=0;P.geo.stream(b,d(Cb));return Ob?[lc/Ob,mc/Ob]:lb?[rb/lb,sb/lb]:Nb?[Yb/Nb,Zb/Nb]:[NaN,NaN]};b.bounds=function(b){qe=re=-(oe=pe=Infinity);P.geo.stream(b,d(hi));return[[oe,pe],[qe,re]]};b.projection=function(b){if(!arguments.length)return h;d=(h=b)?b.stream||Eb(b):v;return c()};b.context=function(b){if(!arguments.length)return g;k=null==(g=b)?new nb:new rc(b);"function"!==typeof f&&k.pointRadius(f);return c()};b.pointRadius=function(c){if(!arguments.length)return f;
f="function"===typeof c?c:(k.pointRadius(+c),+c);return b};return b.projection(P.geo.albersUsa()).context(null)};P.geo.transform=function(b){return{stream:function(c){c=new Qb(c);for(var f in b)c[f]=b[f];return c}}};Qb.prototype={point:function(b,c){this.stream.point(b,c)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
P.geo.projection=Xa;P.geo.projectionMutator=bc;(P.geo.equirectangular=function(){return Xa(cc)}).raw=cc.invert=cc;P.geo.rotation=function(b){function c(f){f=b(f[0]*ma,f[1]*ma);return f[0]*=Ga,f[1]*=Ga,f}b=Jb(b[0]%360*ma,b[1]*ma,2<b.length?b[2]*ma:0);c.invert=function(c){c=b.invert(c[0]*ma,c[1]*ma);return c[0]*=Ga,c[1]*=Ga,c};return c};bd.invert=cc;P.geo.circle=function(){function b(){var f="function"===typeof c?c.apply(this,arguments):c,h=Jb(-f[0]*ma,-f[1]*ma,0).invert,d=[];g(null,null,1,{point:function(b,
c){d.push(b=h(b,c));b[0]*=Ga;b[1]*=Ga}});return{type:"Polygon",coordinates:[d]}}var c=[0,0],f,h=6,g;b.origin=function(f){if(!arguments.length)return c;c=f;return b};b.angle=function(c){if(!arguments.length)return f;g=tc((f=+c)*ma,h*ma);return b};b.precision=function(c){if(!arguments.length)return h;g=tc(f*ma,(h=+c)*ma);return b};return b.angle(90)};P.geo.distance=function(b,c){var f=(c[0]-b[0])*ma,h=b[1]*ma,g=c[1]*ma,d=Math.cos(f),k=Math.sin(h),h=Math.cos(h),l=Math.sin(g),g=Math.cos(g),m;return Math.atan2(Math.sqrt((m=
g*Math.sin(f))*m+(m=h*l-k*g*d)*m),k*l+h*g*d)};P.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:c()}}function c(){return P.range(Math.ceil(d/p)*p,g,p).map(t).concat(P.range(Math.ceil(n/u)*u,m,u).map(y)).concat(P.range(Math.ceil(h/r)*r,f,r).filter(function(b){return 1E-6<na(b%p)}).map(v)).concat(P.range(Math.ceil(l/q)*q,k,q).filter(function(b){return 1E-6<na(b%u)}).map(w))}var f,h,g,d,k,l,m,n,r=10,q=r,p=90,u=360,v,w,t,y,A=2.5;b.lines=function(){return c().map(function(b){return{type:"LineString",
coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[t(d).concat(y(m).slice(1),t(g).reverse().slice(1),y(n).reverse().slice(1))]}};b.extent=function(c){return arguments.length?b.majorExtent(c).minorExtent(c):b.minorExtent()};b.majorExtent=function(c){if(!arguments.length)return[[d,n],[g,m]];d=+c[0][0];g=+c[1][0];n=+c[0][1];m=+c[1][1];d>g&&(c=d,d=g,g=c);n>m&&(c=n,n=m,m=c);return b.precision(A)};b.minorExtent=function(c){if(!arguments.length)return[[h,l],[f,k]];h=+c[0][0];f=+c[1][0];
l=+c[0][1];k=+c[1][1];h>f&&(c=h,h=f,f=c);l>k&&(c=l,l=k,k=c);return b.precision(A)};b.step=function(c){return arguments.length?b.majorStep(c).minorStep(c):b.minorStep()};b.majorStep=function(c){if(!arguments.length)return[p,u];p=+c[0];u=+c[1];return b};b.minorStep=function(c){if(!arguments.length)return[r,q];r=+c[0];q=+c[1];return b};b.precision=function(c){if(!arguments.length)return A;A=+c;v=Ib(l,k,90);w=uc(h,f,A);t=Ib(n,m,90);y=uc(d,g,A);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};P.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[f||c.apply(this,arguments),g||h.apply(this,arguments)]}}var c=hd,f,h=va,g;b.distance=function(){return P.geo.distance(f||c.apply(this,arguments),g||h.apply(this,arguments))};b.source=function(h){if(!arguments.length)return c;c=h;f="function"===typeof h?null:h;return b};b.target=function(c){if(!arguments.length)return h;h=c;g="function"===typeof c?null:c;return b};b.precision=function(){return arguments.length?
b:0};return b};P.geo.interpolate=function(b,c){return Hd(b[0]*ma,b[1]*ma,c[0]*ma,c[1]*ma)};P.geo.length=function(b){se=0;P.geo.stream(b,Zc);return se};var se,Zc={sphere:x,point:x,lineStart:function(){function b(g,d){var k=Math.sin(d*=ma),l=Math.cos(d),m=na((g*=ma)-c),n=Math.cos(m);se+=Math.atan2(Math.sqrt((m=l*Math.sin(m))*m+(m=h*k-f*l*n)*m),f*k+h*l*n);c=g;f=k;h=l}var c,f,h;Zc.point=function(g,d){c=g*ma;f=Math.sin(d*=ma);h=Math.cos(d);Zc.point=b};Zc.lineEnd=function(){Zc.point=Zc.lineEnd=x}},lineEnd:x,
polygonStart:x,polygonEnd:x},Dg=ia(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(P.geo.azimuthalEqualArea=function(){return Xa(Dg)}).raw=Dg;var Eg=ia(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},v);(P.geo.azimuthalEquidistant=function(){return Xa(Eg)}).raw=Eg;(P.geo.conicConformal=function(){return yc(za)}).raw=za;(P.geo.conicEquidistant=function(){return yc(xa)}).raw=xa;var Fg=ia(function(b){return 1/b},Math.atan);(P.geo.gnomonic=function(){return Xa(Fg)}).raw=
Fg;Tb.invert=function(b,c){return[b,2*Math.atan(Math.exp(c))-Ja]};(P.geo.mercator=function(){return db(Tb)}).raw=Tb;var Gg=ia(function(){return 1},Math.asin);(P.geo.orthographic=function(){return Xa(Gg)}).raw=Gg;var Hg=ia(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(P.geo.stereographic=function(){return Xa(Hg)}).raw=Hg;Sb.invert=function(b,c){return[-c,2*Math.atan(Math.exp(b))-Ja]};(P.geo.transverseMercator=function(){var b=db(Sb),c=b.center,f=b.rotate;b.center=function(b){return b?
c([-b[1],b[0]]):(b=c(),[b[1],-b[0]])};b.rotate=function(b){return b?f([b[0],b[1],2<b.length?b[2]+90:90]):(b=f(),[b[0],b[1],b[2]-90])};return f([0,0,90])}).raw=Sb;P.geom={};P.geom.hull=function(b){function c(b){if(3>b.length)return[];var g=ka(f),d=ka(h),k,l=b.length,m=[],n=[];for(k=0;k<l;k++)m.push([+g.call(this,b[k],k),+d.call(this,b[k],k),k]);m.sort(ec);for(k=0;k<l;k++)n.push([m[k][0],-m[k][1]]);var g=fd(m),n=fd(n),d=n[0]===g[0],l=n[n.length-1]===g[g.length-1],r=[];for(k=g.length-1;0<=k;--k)r.push(b[m[g[k]][2]]);
for(k=+d;k<n.length-l;++k)r.push(b[m[n[k]][2]]);return r}var f=mb,h=Fa;if(arguments.length)return c(b);c.x=function(b){return arguments.length?(f=b,c):f};c.y=function(b){return arguments.length?(h=b,c):h};return c};P.geom.polygon=function(b){Qd(b,te);return b};var te=P.geom.polygon.prototype=[];te.area=function(){for(var b=-1,c=this.length,f,h=this[c-1],g=0;++b<c;)f=h,h=this[b],g+=f[1]*h[0]-f[0]*h[1];return.5*g};te.centroid=function(b){var c=-1,f=this.length,h=0,g=0,d,k=this[f-1],l;for(arguments.length||
(b=-1/(6*this.area()));++c<f;)d=k,k=this[c],l=d[0]*k[1]-k[0]*d[1],h+=(d[0]+k[0])*l,g+=(d[1]+k[1])*l;return[h*b,g*b]};te.clip=function(b){for(var c,f=Hb(b),h=-1,g=this.length-Hb(this),d,k,l=this[g-1],m,n,r;++h<g;){c=b.slice();b.length=0;m=this[h];n=c[(k=c.length-f)-1];for(d=-1;++d<k;)r=c[d],Lc(r,l,m)?(Lc(n,l,m)||b.push(sc(n,r,l,m)),b.push(r)):Lc(n,l,m)&&b.push(sc(n,r,l,m)),n=r;f&&b.push(b[0]);l=m}return b};var Wc,Bc,Vc,Nf=[],Me,ud,Of=[];Mc.prototype.prepare=function(){for(var b=this.edges,c=b.length,
f;c--;)f=b[c].edge,f.b&&f.a||b.splice(c,1);b.sort(Gb);return b.length};Jd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};Ae.prototype={insert:function(b,c){var f,h,g;if(b){c.P=b;if(c.N=b.N)b.N.P=c;b.N=c;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=c}else b.R=c;f=b}else this._?(b=zf(this._),c.P=null,c.N=b,b.P=b.L=c,f=b):(c.P=c.N=null,this._=c,f=null);c.L=c.R=null;c.U=f;c.C=!0;for(b=c;f&&f.C;)h=f.U,f===
h.L?(g=h.R)&&g.C?(f.C=g.C=!1,h.C=!0,b=h):(b===f.R&&(id(this,f),b=f,f=b.U),f.C=!1,h.C=!0,jd(this,h)):(g=h.L)&&g.C?(f.C=g.C=!1,h.C=!0,b=h):(b===f.L&&(jd(this,f),b=f,f=b.U),f.C=!1,h.C=!0,id(this,h)),f=b.U;this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var c=b.U,f=b.L,h=b.R,g,d;g=f?h?zf(h):f:h;c?c.L===b?c.L=g:c.R=g:this._=g;f&&h?(d=g.C,g.C=b.C,g.L=f,f.U=g,g!==h?(c=g.U,g.U=b.U,b=g.R,c.L=b,g.R=h,h.U=g):(g.U=c,c=g,b=g.R)):(d=b.C,b=g);b&&(b.U=c);if(!d)if(b&&b.C)b.C=!1;else{do{if(b===
this._)break;if(b===c.L){if(b=c.R,b.C&&(b.C=!1,c.C=!0,id(this,c),b=c.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,jd(this,b),b=c.R);b.C=c.C;c.C=b.R.C=!1;id(this,c);b=this._;break}}else if(b=c.L,b.C&&(b.C=!1,c.C=!0,jd(this,c),b=c.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,id(this,b),b=c.L);b.C=c.C;c.C=b.L.C=!1;jd(this,c);b=this._;break}b.C=!0;b=c;c=c.U}while(!b.C);b&&(b.C=!1)}}};P.geom.voronoi=function(b){function c(b){var h=Array(b.length),g=l[0][0],d=l[0][1],k=l[1][0],m=l[1][1];
ze(f(b),l).cells.forEach(function(c,f){var l=c.edges,n=c.site;(h[f]=l.length?l.map(function(b){b=b.start();return[b.x,b.y]}):n.x>=g&&n.x<=k&&n.y>=d&&n.y<=m?[[g,m],[k,m],[k,d],[g,d]]:[]).point=b[f]});return h}function f(b){return b.map(function(b,c){return{x:1E-6*Math.round(d(b,c)/1E-6),y:1E-6*Math.round(k(b,c)/1E-6),i:c}})}var h=mb,g=Fa,d=h,k=g,l=ue;if(b)return c(b);c.links=function(b){return ze(f(b)).edges.filter(function(b){return b.l&&b.r}).map(function(c){return{source:b[c.l.i],target:b[c.r.i]}})};
c.triangles=function(b){var c=[];ze(f(b)).cells.forEach(function(f,h){for(var g=f.site,d=f.edges.sort(Gb),k=-1,l=d.length,m,n=d[l-1].edge,n=n.l===g?n.r:n.l;++k<l;)m=n,n=d[k].edge,n=n.l===g?n.r:n.l,h<m.i&&h<n.i&&0>(g.x-n.x)*(m.y-g.y)-(g.x-m.x)*(n.y-g.y)&&c.push([b[h],b[m.i],b[n.i]])});return c};c.x=function(b){return arguments.length?(d=ka(h=b),c):h};c.y=function(b){return arguments.length?(k=ka(g=b),c):g};c.clipExtent=function(b){if(!arguments.length)return l===ue?null:l;l=null==b?ue:b;return c};
c.size=function(b){return arguments.length?c.clipExtent(b&&[[0,0],b]):l===ue?null:l&&l[1]};return c};var ue=[[-1E6,-1E6],[1E6,1E6]];P.geom.delaunay=function(b){return P.geom.voronoi().triangles(b)};P.geom.quadtree=function(b,c,f,h,g){function d(b){function n(b,c,f,h,g,d,k,l){if(!isNaN(f)&&!isNaN(h))if(b.leaf){var m=b.x,q=b.y;if(null!=m){if(!(.01>na(m-f)+na(q-h))){var p=b.point;b.x=b.y=b.point=null;r(b,p,m,q,g,d,k,l)}r(b,c,f,h,g,d,k,l)}else b.x=f,b.y=h,b.point=c}else r(b,c,f,h,g,d,k,l)}function r(b,
c,f,h,g,d,k,l){var m=.5*(g+k),q=.5*(d+l),p=f>=m,u=h>=q,v=u<<1|p;b.leaf=!1;b=b.nodes[v]||(b.nodes[v]=Af());p?g=m:k=m;u?d=q:l=q;n(b,c,f,h,g,d,k,l)}var q,p=ka(k),u=ka(l),v,w,t,y,A,x,z,C;if(null!=c)A=c,x=f,z=h,C=g;else if(z=C=-(A=x=Infinity),v=[],w=[],y=b.length,m)for(t=0;t<y;++t)q=b[t],q.x<A&&(A=q.x),q.y<x&&(x=q.y),q.x>z&&(z=q.x),q.y>C&&(C=q.y),v.push(q.x),w.push(q.y);else for(t=0;t<y;++t){var D=+p(q=b[t],t);q=+u(q,t);D<A&&(A=D);q<x&&(x=q);D>z&&(z=D);q>C&&(C=q);v.push(D);w.push(q)}D=z-A;q=C-x;D>q?C=
x+D:z=A+q;var B=Af();B.add=function(b){n(B,b,+p(b,++t),+u(b,t),A,x,z,C)};B.visit=function(b){dd(b,B,A,x,z,C)};B.find=function(b){return Zg(B,b[0],b[1],A,x,z,C)};t=-1;if(null==c){for(;++t<y;)n(B,b[t],v[t],w[t],A,x,z,C);--t}else b.forEach(B.add);v=w=b=q=null;return B}var k=mb,l=Fa,m;if(m=arguments.length)return k=gh,l=hh,3===m&&(g=f,h=c,f=c=0),d(b);d.x=function(b){return arguments.length?(k=b,d):k};d.y=function(b){return arguments.length?(l=b,d):l};d.extent=function(b){if(!arguments.length)return null==
c?null:[[c,f],[h,g]];null==b?c=f=h=g=null:(c=+b[0][0],f=+b[0][1],h=+b[1][0],g=+b[1][1]);return d};d.size=function(b){if(!arguments.length)return null==c?null:[h-c,g-f];null==b?c=f=h=g=null:(c=f=0,h=+b[0],g=+b[1]);return d};return d};P.interpolateRgb=ye;P.interpolateObject=Bf;P.interpolateNumber=Ub;P.interpolateString=Cf;var Ne=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oe=new RegExp(Ne.source,"g");P.interpolate=dc;P.interpolators=[function(b,c){var f=typeof c;return("string"===f?Td.has(c.toLowerCase())||
/^(#|rgb\(|hsl\()/i.test(c)?ye:Cf:c instanceof ga?ye:Array.isArray(c)?Ed:"object"===f&&isNaN(c)?Bf:Ub)(b,c)}];P.interpolateArray=Ed;var Ig=function(){return v},ii=P.map({linear:Ig,poly:function(b){return function(c){return Math.pow(c,b)}},quad:function(){return Tg},cubic:function(){return Ug},sin:function(){return Wg},exp:function(){return Xg},circle:function(){return Yg},elastic:function(b,c){var f;2>arguments.length&&(c=.45);arguments.length?f=c/pb*Math.asin(1/b):(b=1,f=c/4);return function(h){return 1+
b*Math.pow(2,-10*h)*Math.sin((h-f)*pb/c)}},back:function(b){b||(b=1.70158);return function(c){return c*c*((b+1)*c-b)}},bounce:function(){return $g}}),ji=P.map({"in":v,out:sf,"in-out":tf,"out-in":function(b){return tf(sf(b))}});P.ease=function(b){var c=b.indexOf("-"),f=0<=c?b.slice(0,c):b,c=0<=c?b.slice(c+1):"in",f=ii.get(f)||Ig,c=ji.get(c)||v;return Sg(c(f.apply(null,xg.call(arguments,1))))};P.interpolateHcl=function(b,c){b=P.hcl(b);c=P.hcl(c);var f=b.h,h=b.c,g=b.l,d=c.h-f,k=c.c-h,l=c.l-g;isNaN(k)&&
(k=0,h=isNaN(h)?c.c:h);isNaN(d)?(d=0,f=isNaN(f)?c.h:f):180<d?d-=360:-180>d&&(d+=360);return function(b){return oa(f+d*b,h+k*b,g+l*b)+""}};P.interpolateHsl=function(b,c){b=P.hsl(b);c=P.hsl(c);var f=b.h,h=b.s,g=b.l,d=c.h-f,k=c.s-h,l=c.l-g;isNaN(k)&&(k=0,h=isNaN(h)?c.s:h);isNaN(d)?(d=0,f=isNaN(f)?c.h:f):180<d?d-=360:-180>d&&(d+=360);return function(b){return Ca(f+d*b,h+k*b,g+l*b)+""}};P.interpolateLab=function(b,c){b=P.lab(b);c=P.lab(c);var f=b.l,h=b.a,g=b.b,d=c.l-f,k=c.a-h,l=c.b-g;return function(b){return Pa(f+
d*b,h+k*b,g+l*b)+""}};P.interpolateRound=uf;P.transform=function(b){var c=fb.createElementNS(P.ns.prefix.svg,"g");return(P.transform=function(b){if(null!=b){c.setAttribute("transform",b);var f=c.transform.baseVal.consolidate()}return new vf(f?f.matrix:ki)})(b)};vf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ki={a:1,b:0,c:0,d:1,e:0,f:0};P.interpolateTransform=xf;P.layout={};P.layout.bundle=function(){return function(b){for(var c=
[],f=-1,h=b.length;++f<h;)c.push(mh(b[f]));return c}};P.layout.chord=function(){function b(){var f={},q=[],p=P.range(k),u=[],v,w,t,y,A;h=[];g=[];v=0;for(y=-1;++y<k;){w=0;for(A=-1;++A<k;)w+=d[y][A];q.push(w);u.push(P.range(k));v+=w}m&&p.sort(function(b,c){return m(q[b],q[c])});n&&u.forEach(function(b,c){b.sort(function(b,f){return n(d[c][b],d[c][f])})});v=(pb-l*k)/v;w=0;for(y=-1;++y<k;){t=w;for(A=-1;++A<k;){var x=p[y],z=u[x][A],C=d[x][z],D=w,B=w+=C*v;f[x+"-"+z]={index:x,subindex:z,startAngle:D,endAngle:B,
value:C}}g[x]={index:x,startAngle:t,endAngle:w,value:q[x]};w+=l}for(y=-1;++y<k;)for(A=y-1;++A<k;)p=f[y+"-"+A],u=f[A+"-"+y],(p.value||u.value)&&h.push(p.value<u.value?{source:u,target:p}:{source:p,target:u});r&&c()}function c(){h.sort(function(b,c){return r((b.source.value+b.target.value)/2,(c.source.value+c.target.value)/2)})}var f={},h,g,d,k,l=0,m,n,r;f.matrix=function(b){if(!arguments.length)return d;k=(d=b)&&d.length;h=g=null;return f};f.padding=function(b){if(!arguments.length)return l;l=b;h=
g=null;return f};f.sortGroups=function(b){if(!arguments.length)return m;m=b;h=g=null;return f};f.sortSubgroups=function(b){if(!arguments.length)return n;n=b;h=null;return f};f.sortChords=function(b){if(!arguments.length)return r;r=b;h&&c();return f};f.chords=function(){h||b();return h};f.groups=function(){g||b();return g};return f};P.layout.force=function(){function b(c){return function(b,f,h,g){if(b.point!==c){h=b.cx-c.x;var d=b.cy-c.y;f=g-f;g=h*h+d*d;if(f*f/w<g)return g<p&&(f=b.charge/g,c.px-=h*
f,c.py-=d*f),!0;b.point&&g&&g<p&&(f=b.pointCharge/g,c.px-=h*f,c.py-=d*f)}return!b.charge}}function c(b){b.px=P.event.x;b.py=P.event.y;f.resume()}var f={},h=P.dispatch("start","tick","end"),g,d=[1,1],k,l,m=.9,n=li,r=mi,q=-30,p=ni,u=.1,w=.64,t=[],y=[],A,x,z;f.tick=function(){if(.005>(l*=.99))return g=null,h.end({type:"end",alpha:l=0}),!0;var c=t.length,f=y.length,k,n,r,p,v,w,C;for(k=0;k<f;++k)if(n=y[k],r=n.source,p=n.target,w=p.x-r.x,C=p.y-r.y,v=w*w+C*C)v=l*x[k]*((v=Math.sqrt(v))-A[k])/v,w*=v,C*=v,
p.x-=w*(v=r.weight+p.weight?r.weight/(r.weight+p.weight):.5),p.y-=C*v,r.x+=w*(v=1-v),r.y+=C*v;if(v=l*u)if(w=d[0]/2,C=d[1]/2,k=-1,v)for(;++k<c;)n=t[k],n.x+=(w-n.x)*v,n.y+=(C-n.y)*v;if(q)for(Qf(f=P.geom.quadtree(t),l,z),k=-1;++k<c;)(n=t[k]).fixed||f.visit(b(n));for(k=-1;++k<c;)n=t[k],n.fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*m,n.y-=(n.py-(n.py=n.y))*m);h.tick({type:"tick",alpha:l})};f.nodes=function(b){if(!arguments.length)return t;t=b;return f};f.links=function(b){if(!arguments.length)return y;
y=b;return f};f.size=function(b){if(!arguments.length)return d;d=b;return f};f.linkDistance=function(b){if(!arguments.length)return n;n="function"===typeof b?b:+b;return f};f.distance=f.linkDistance;f.linkStrength=function(b){if(!arguments.length)return r;r="function"===typeof b?b:+b;return f};f.friction=function(b){if(!arguments.length)return m;m=+b;return f};f.charge=function(b){if(!arguments.length)return q;q="function"===typeof b?b:+b;return f};f.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(p);
p=b*b;return f};f.gravity=function(b){if(!arguments.length)return u;u=+b;return f};f.theta=function(b){if(!arguments.length)return Math.sqrt(w);w=b*b;return f};f.alpha=function(b){if(!arguments.length)return l;b=+b;l?0<b?l=b:(g.c=null,g.t=NaN,g=null,h.end({type:"end",alpha:l=0})):0<b&&(h.start({type:"start",alpha:l=b}),g=ha(f.tick));return f};f.start=function(){function b(f,d){if(!m){m=Array(h);for(l=0;l<h;++l)m[l]=[];for(l=0;l<g;++l){var k=y[l];m[k.source.index].push(k.target);m[k.target.index].push(k.source)}}for(var k=
m[c],l=-1,n=k.length,r;++l<n;)if(!isNaN(r=k[l][f]))return r;return Math.random()*d}var c,h=t.length,g=y.length,k=d[0],l=d[1],m,p;for(c=0;c<h;++c)(p=t[c]).index=c,p.weight=0;for(c=0;c<g;++c)p=y[c],"number"==typeof p.source&&(p.source=t[p.source]),"number"==typeof p.target&&(p.target=t[p.target]),++p.source.weight,++p.target.weight;for(c=0;c<h;++c)p=t[c],isNaN(p.x)&&(p.x=b("x",k)),isNaN(p.y)&&(p.y=b("y",l)),isNaN(p.px)&&(p.px=p.x),isNaN(p.py)&&(p.py=p.y);A=[];if("function"===typeof n)for(c=0;c<g;++c)A[c]=
+n.call(this,y[c],c);else for(c=0;c<g;++c)A[c]=n;x=[];if("function"===typeof r)for(c=0;c<g;++c)x[c]=+r.call(this,y[c],c);else for(c=0;c<g;++c)x[c]=r;z=[];if("function"===typeof q)for(c=0;c<h;++c)z[c]=+q.call(this,t[c],c);else for(c=0;c<h;++c)z[c]=q;return f.resume()};f.resume=function(){return f.alpha(.1)};f.stop=function(){return f.alpha(0)};f.drag=function(){k||(k=P.behavior.drag().origin(v).on("dragstart.force",nh).on("drag.force",c).on("dragend.force",oh));if(!arguments.length)return k;this.on("mouseover.force",
ph).on("mouseout.force",qh).call(k)};return P.rebind(f,h,"on")};var li=20,mi=1,ni=Infinity;P.layout.hierarchy=function(){function b(g){var d=[g],k=[],l;for(g.depth=0;null!=(l=d.pop());)if(k.push(l),(n=f.call(b,l,l.depth))&&(m=n.length)){for(var m,n,r;0<=--m;)d.push(r=n[m]),r.parent=l,r.depth=l.depth+1;h&&(l.value=0);l.children=n}else h&&(l.value=+h.call(b,l,l.depth)||0),delete l.children;Pb(g,function(b){var f,g;c&&(f=b.children)&&f.sort(c);h&&(g=b.parent)&&(g.value+=b.value)});return k}var c=uh,
f=sh,h=th;b.sort=function(f){if(!arguments.length)return c;c=f;return b};b.children=function(c){if(!arguments.length)return f;f=c;return b};b.value=function(c){if(!arguments.length)return h;h=c;return b};b.revalue=function(c){h&&(wd(c,function(b){b.children&&(b.value=0)}),Pb(c,function(c){var f;c.children||(c.value=+h.call(b,c,c.depth)||0);if(f=c.parent)f.value+=c.value}));return c};return b};P.layout.partition=function(){function b(c,f,h,g){var d=c.children;c.x=f;c.y=c.depth*g;c.dx=h;c.dy=g;if(d&&
(l=d.length)){var k=-1,l,m;for(h=c.value?h/c.value:0;++k<l;)b(m=d[k],f,c=m.value*h,g),f+=c}}function c(b){b=b.children;var f=0;if(b&&(g=b.length))for(var h=-1,g;++h<g;)f=Math.max(f,c(b[h]));return 1+f}function f(d,k){var l=h.call(this,d,k);b(l[0],0,g[0],g[1]/c(l[0]));return l}var h=P.layout.hierarchy(),g=[1,1];f.size=function(b){if(!arguments.length)return g;g=b;return f};return vd(f,h)};P.layout.pie=function(){function b(k){var l=k.length,m=k.map(function(f,h){return+c.call(b,f,h)}),n=+("function"===
typeof h?h.apply(this,arguments):h),r=("function"===typeof g?g.apply(this,arguments):g)-n,q=Math.min(Math.abs(r)/l,+("function"===typeof d?d.apply(this,arguments):d)),p=q*(0>r?-1:1),u=P.sum(m),v=u?(r-l*p)/u:0,l=P.range(l),w=[],t;null!=f&&l.sort(f===Jg?function(b,c){return m[c]-m[b]}:function(b,c){return f(k[b],k[c])});l.forEach(function(b){w[b]={data:k[b],value:t=m[b],startAngle:n,endAngle:n+=t*v+p,padAngle:q}});return w}var c=Number,f=Jg,h=0,g=pb,d=0;b.value=function(f){if(!arguments.length)return c;
c=f;return b};b.sort=function(c){if(!arguments.length)return f;f=c;return b};b.startAngle=function(c){if(!arguments.length)return h;h=c;return b};b.endAngle=function(c){if(!arguments.length)return g;g=c;return b};b.padAngle=function(c){if(!arguments.length)return d;d=c;return b};return b};var Jg={};P.layout.stack=function(){function b(l,m){if(!(u=l.length))return l;var n=l.map(function(f,h){return c.call(b,f,h)}),r=n.map(function(c){return c.map(function(c,f){return[d.call(b,c,f),k.call(b,c,f)]})}),
q=f.call(b,r,m),n=P.permute(n,q),r=P.permute(r,q),q=h.call(b,r,m),p=n[0].length,u,v,w,t;for(w=0;w<p;++w)for(g.call(b,n[0][w],t=q[w],r[0][w][1]),v=1;v<u;++v)g.call(b,n[v][w],t+=r[v-1][w][1],r[v][w][1]);return l}var c=v,f=Pe,h=Qe,g=xh,d=vh,k=wh;b.values=function(f){if(!arguments.length)return c;c=f;return b};b.order=function(c){if(!arguments.length)return f;f="function"===typeof c?c:oi.get(c)||Pe;return b};b.offset=function(c){if(!arguments.length)return h;h="function"===typeof c?c:pi.get(c)||Qe;return b};
b.x=function(c){if(!arguments.length)return d;d=c;return b};b.y=function(c){if(!arguments.length)return k;k=c;return b};b.out=function(c){if(!arguments.length)return g;g=c;return b};return b};var oi=P.map({"inside-out":function(b){var c=b.length,f,h=b.map(yh),g=b.map(zh),d=P.range(c).sort(function(b,c){return h[b]-h[c]}),k=0,l=0,m=[],n=[];for(b=0;b<c;++b)f=d[b],k<l?(k+=g[f],m.push(f)):(l+=g[f],n.push(f));return n.reverse().concat(m)},reverse:function(b){return P.range(b.length).reverse()},"default":Pe}),
pi=P.map({silhouette:function(b){var c=b.length,f=b[0].length,h=[],g=0,d,k,l,m=[];for(k=0;k<f;++k){for(l=d=0;d<c;d++)l+=b[d][k][1];l>g&&(g=l);h.push(l)}for(k=0;k<f;++k)m[k]=(g-h[k])/2;return m},wiggle:function(b){var c=b.length,f=b[0],h=f.length,g,d,k,l,m,n,r,q,p,u=[];u[0]=q=p=0;for(d=1;d<h;++d){for(l=g=0;g<c;++g)l+=b[g][d][1];m=g=0;for(r=f[d][0]-f[d-1][0];g<c;++g){k=0;for(n=(b[g][d][1]-b[g][d-1][1])/(2*r);k<g;++k)n+=(b[k][d][1]-b[k][d-1][1])/r;m+=n*b[g][d][1]}u[d]=q-=l?m/l*r:0;q<p&&(p=q)}for(d=0;d<
h;++d)u[d]-=p;return u},expand:function(b){var c=b.length,f=b[0].length,h=1/c,g,d,k,l=[];for(d=0;d<f;++d){for(k=g=0;g<c;g++)k+=b[g][d][1];if(k)for(g=0;g<c;g++)b[g][d][1]/=k;else for(g=0;g<c;g++)b[g][d][1]=h}for(d=0;d<f;++d)l[d]=0;return l},zero:Qe});P.layout.histogram=function(){function b(d,k){var l=[],m=d.map(f,this),n=h.call(this,m,k),r=g.call(this,n,m,k),q;k=-1;for(var p=m.length,u=r.length-1,v=c?1:1/p;++k<u;)q=l[k]=[],q.dx=r[k+1]-(q.x=r[k]),q.y=0;if(0<u)for(k=-1;++k<p;)q=m[k],q>=n[0]&&q<=n[1]&&
(q=l[P.bisect(r,q,1,u)-1],q.y+=v,q.push(d[k]));return l}var c=!0,f=Number,h=Ch,g=Bh;b.value=function(c){if(!arguments.length)return f;f=c;return b};b.range=function(c){if(!arguments.length)return h;h=ka(c);return b};b.bins=function(c){if(!arguments.length)return g;g="number"===typeof c?function(b){return Rf(b,c)}:ka(c);return b};b.frequency=function(f){if(!arguments.length)return c;c=!!f;return b};return b};P.layout.pack=function(){function b(d,k){var l=c.call(this,d,k),m=l[0],n=h[0],r=h[1],q=null==
g?Math.sqrt:"function"===typeof g?g:function(){return g};m.x=m.y=0;Pb(m,function(b){b.r=+q(b.value)});Pb(m,Uf);if(f){var p=f*(g?1:Math.max(2*m.r/n,2*m.r/r))/2;Pb(m,function(b){b.r+=p});Pb(m,Uf);Pb(m,function(b){b.r-=p})}Wf(m,n/2,r/2,g?1:1/Math.max(2*m.r/n,2*m.r/r));return l}var c=P.layout.hierarchy().sort(Dh),f=0,h=[1,1],g;b.size=function(c){if(!arguments.length)return h;h=c;return b};b.radius=function(c){if(!arguments.length)return g;g=null==c||"function"===typeof c?c:+c;return b};b.padding=function(c){if(!arguments.length)return f;
f=+c;return b};return vd(b,c)};P.layout.tree=function(){function b(n,r){var q=d.call(this,n,r),p=q[0],u=c(p);Pb(u,f);u.parent.m=-u.z;wd(u,h);if(m)wd(p,g);else{var v=p,w=p,t=p;wd(p,function(b){b.x<v.x&&(v=b);b.x>w.x&&(w=b);b.depth>t.depth&&(t=b)});var y=k(v,w)/2-v.x,A=l[0]/(w.x+k(w,v)/2+y),x=l[1]/(t.depth||1);wd(p,function(b){b.x=(b.x+y)*A;b.y=b.depth*x})}return q}function c(b){b={A:null,children:[b]};for(var f=[b],h;null!=(h=f.pop());)for(var g=h.children,d,k=0,l=g.length;k<l;++k)f.push((g[k]=d={_:g[k],
parent:h,children:(d=g[k].children)&&d.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:k}).a=d);return b.children[0]}function f(b){var c=b.children,h=b.parent.children,g=b.i?h[b.i-1]:null;if(c.length){for(var d=0,l=0,m=b.children,n=m.length,r;0<=--n;)r=m[n],r.z+=d,r.m+=d,d+=r.s+(l+=r.c);c=(c[0].z+c[c.length-1].z)/2;g?(b.z=g.z+k(b._,g._),b.m=b.z-c):b.z=c}else g&&(b.z=g.z+k(b._,g._));c=b.parent;h=b.parent.A||h[0];if(g){l=d=b;m=d.parent.children[0];n=d.m;r=l.m;for(var q=g.m,p=m.m,u;g=Te(g),d=Se(d),
g&&d;){m=Se(m);l=Te(l);l.a=b;u=g.z+q-d.z-n+k(g._,d._);if(0<u){var v=g.a.parent===b.parent?g.a:h,w=b,t=u,y=t/(w.i-v.i);w.c-=y;w.s+=t;v.c+=y;w.z+=t;w.m+=t;n+=u;r+=u}q+=g.m;n+=d.m;p+=m.m;r+=l.m}g&&!Te(l)&&(l.t=g,l.m+=q-r);d&&!Se(m)&&(m.t=d,m.m+=n-p,h=b)}c.A=h}function h(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function g(b){b.x*=l[0];b.y=b.depth*l[1]}var d=P.layout.hierarchy().sort(null).value(null),k=Xf,l=[1,1],m=null;b.separation=function(c){if(!arguments.length)return k;k=c;return b};b.size=function(c){if(!arguments.length)return m?
null:l;m=null==(l=c)?g:null;return b};b.nodeSize=function(c){if(!arguments.length)return m?l:null;m=null==(l=c)?null:g;return b};return vd(b,d)};P.layout.cluster=function(){function b(d,k){var l=c.call(this,d,k),m=l[0],n,r=0;Pb(m,function(b){var c=b.children;c&&c.length?(b.x=Hh(c),b.y=Gh(c)):(b.x=n?r+=f(b,n):0,b.y=0,n=b)});var q=Yf(m),p=Zf(m),u=q.x-f(q,p)/2,v=p.x+f(p,q)/2;Pb(m,g?function(b){b.x=(b.x-m.x)*h[0];b.y=(m.y-b.y)*h[1]}:function(b){b.x=(b.x-u)/(v-u)*h[0];b.y=(1-(m.y?b.y/m.y:1))*h[1]});return l}
var c=P.layout.hierarchy().sort(null).value(null),f=Xf,h=[1,1],g=!1;b.separation=function(c){if(!arguments.length)return f;f=c;return b};b.size=function(c){if(!arguments.length)return g?null:h;g=null==(h=c);return b};b.nodeSize=function(c){if(!arguments.length)return g?h:null;g=null!=(h=c);return b};return vd(b,c)};P.layout.treemap=function(){function b(c,f){for(var h=-1,g=c.length,d,k;++h<g;)k=(d=c[h]).value*(0>f?0:f),d.area=isNaN(k)||0>=k?0:k}function c(f){var g=f.children;if(g&&g.length){var d=
n(f),k=[],l=g.slice(),m=Infinity,r,q="slice"===p?d.dx:"dice"===p?d.dy:"slice-dice"===p?f.depth&1?d.dy:d.dx:Math.min(d.dx,d.dy);b(l,d.dx*d.dy/f.value);for(k.area=0;0<(f=l.length);){k.push(f=l[f-1]);k.area+=f.area;if(!(f="squarify"!==p)){r=q;f=k.area;for(var v=void 0,w=0,t=Infinity,y=-1,A=k.length;++y<A;)if(v=k[y].area)v<t&&(t=v),v>w&&(w=v);f*=f;r*=r;f=(r=f?Math.max(r*w*u/f,f/(r*t*u)):Infinity)<=m}f?(l.pop(),m=r):(k.area-=k.pop().area,h(k,q,d,!1),q=Math.min(d.dx,d.dy),k.length=k.area=0,m=Infinity)}k.length&&
(h(k,q,d,!0),k.length=k.area=0);g.forEach(c)}}function f(c){var g=c.children;if(g&&g.length){var d=n(c),k=g.slice(),l=[];b(k,d.dx*d.dy/c.value);for(l.area=0;c=k.pop();)l.push(c),l.area+=c.area,null!=c.z&&(h(l,c.z?d.dx:d.dy,d,!k.length),l.length=l.area=0);g.forEach(f)}}function h(b,c,f,g){var d=-1,l=b.length,m=f.x,n=f.y,r=c?k(b.area/c):0,q;if(c==f.dx){if(g||r>f.dy)r=f.dy;for(;++d<l;)q=b[d],q.x=m,q.y=n,q.dy=r,m+=q.dx=Math.min(f.x+f.dx-m,r?k(q.area/r):0);q.z=!0;q.dx+=f.x+f.dx-m;f.y+=r;f.dy-=r}else{if(g||
r>f.dx)r=f.dx;for(;++d<l;)q=b[d],q.x=m,q.y=n,q.dx=r,n+=q.dy=Math.min(f.y+f.dy-n,r?k(q.area/r):0);q.z=!1;q.dy+=f.y+f.dy-n;f.x+=r;f.dx-=r}}function g(h){h=q||d(h);var k=h[0];k.x=k.y=0;k.value?(k.dx=l[0],k.dy=l[1]):k.dx=k.dy=0;q&&d.revalue(k);b([k],k.dx*k.dy/k.value);(q?f:c)(k);r&&(q=h);return h}var d=P.layout.hierarchy(),k=Math.round,l=[1,1],m=null,n=Ue,r=!1,q,p="squarify",u=.5*(1+Math.sqrt(5));g.size=function(b){if(!arguments.length)return l;l=b;return g};g.padding=function(b){function c(f){var h=
b.call(g,f,f.depth);return null==h?Ue(f):$f(f,"number"===typeof h?[h,h,h,h]:h)}function f(c){return $f(c,b)}if(!arguments.length)return m;var h;n=null==(m=b)?Ue:"function"===(h=typeof b)?c:"number"===h?(b=[b,b,b,b],f):f;return g};g.round=function(b){if(!arguments.length)return k!=Number;k=b?Math.round:Number;return g};g.sticky=function(b){if(!arguments.length)return r;r=b;q=null;return g};g.ratio=function(b){if(!arguments.length)return u;u=b;return g};g.mode=function(b){if(!arguments.length)return p;
p=b+"";return g};return vd(g,d)};P.random={normal:function(b,c){var f=arguments.length;2>f&&(c=1);1>f&&(b=0);return function(){var f,h;do f=2*Math.random()-1,h=2*Math.random()-1,h=f*f+h*h;while(!h||1<h);return b+c*f*Math.sqrt(-2*Math.log(h)/h)}},logNormal:function(){var b=P.random.normal.apply(P,arguments);return function(){return Math.exp(b())}},bates:function(b){var c=P.random.irwinHall(b);return function(){return c()/b}},irwinHall:function(b){return function(){for(var c=0,f=0;f<b;f++)c+=Math.random();
return c}}};P.scale={};var Jh={floor:v,ceil:v};P.scale.linear=function(){return bg([0,1],[0,1],dc,!1)};var Mh={s:1,g:1,p:1,r:1,e:1};P.scale.log=function(){return dg(P.scale.linear().domain([0,1]),10,!0,[1,10])};var eg=P.format(".0e"),Nh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};P.scale.pow=function(){return fg(P.scale.linear(),1,[0,1])};P.scale.sqrt=function(){return P.scale.pow().exponent(.5)};P.scale.ordinal=function(){return gg([],{t:"range",a:[[]]})};P.scale.category10=
function(){return P.scale.ordinal().range(qi)};P.scale.category20=function(){return P.scale.ordinal().range(ri)};P.scale.category20b=function(){return P.scale.ordinal().range(si)};P.scale.category20c=function(){return P.scale.ordinal().range(ti)};var qi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(kb),ri=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(kb),si=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(kb),ti=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(kb);P.scale.quantile=function(){return hg([],[])};P.scale.quantize=function(){return ig(0,1,[0,1])};P.scale.threshold=
function(){return jg([.5],[0,1])};P.scale.identity=function(){return kg([0,1])};P.svg={};P.svg.arc=function(){function b(){var n=Math.max(0,+f.apply(this,arguments)),r=Math.max(0,+h.apply(this,arguments)),q=k.apply(this,arguments)-Ja,p=l.apply(this,arguments)-Ja,u=Math.abs(p-q),v=q>p?0:1;r<n&&(w=r,r=n,n=w);if(u>=fi)return c(r,v)+(n?c(n,1-v):"")+"Z";var w,t,y,A,x=0,C=0,z,D,B,F,L,Q=[];if(A=(+m.apply(this,arguments)||0)/2)y=d===ve?Math.sqrt(n*n+r*r):+d.apply(this,arguments),v||(C*=-1),r&&(C=wa(y/r*Math.sin(A))),
n&&(x=wa(y/n*Math.sin(A)));r?(y=r*Math.cos(q+C),A=r*Math.sin(q+C),z=r*Math.cos(p-C),D=r*Math.sin(p-C),t=Math.abs(p-q-2*C)<=la?0:1,C&&ce(y,A,z,D)===v^t&&(z=(q+p)/2,y=r*Math.cos(z),A=r*Math.sin(z),z=D=null)):y=A=0;if(n){C=n*Math.cos(p-x);B=n*Math.sin(p-x);F=n*Math.cos(q+x);L=n*Math.sin(q+x);var N=Math.abs(q-p+2*x)<=la?0:1;x&&ce(C,B,F,L)===1-v^N&&(F=(q+p)/2,C=n*Math.cos(F),B=n*Math.sin(F),F=L=null)}else C=B=0;1E-6<u&&.001<(w=Math.min(Math.abs(r-n)/2,+g.apply(this,arguments)))?(t=n<r^v?0:1,N=q=w,u<la&&
(u=null==F?[C,B]:null==z?[y,A]:sc([y,A],[F,L],[z,D],[C,B]),N=y-u[0],q=A-u[1],p=z-u[0],x=D-u[1],q=1/Math.sin(Math.acos((N*p+q*x)/(Math.sqrt(N*N+q*q)*Math.sqrt(p*p+x*x)))/2),u=Math.sqrt(u[0]*u[0]+u[1]*u[1]),N=Math.min(w,(n-u)/(q-1)),q=Math.min(w,(r-u)/(q+1))),null!=z?(u=de(null==F?[C,B]:[F,L],[y,A],r,q,v),p=de([z,D],[C,B],r,q,v),w===q?Q.push("M",u[0],"A",q,",",q," 0 0,",t," ",u[1],"A",r,",",r," 0 ",1-v^ce(u[1][0],u[1][1],p[1][0],p[1][1]),",",v," ",p[1],"A",q,",",q," 0 0,",t," ",p[0]):Q.push("M",u[0],
"A",q,",",q," 0 1,",t," ",p[0])):Q.push("M",y,",",A),null!=F?(r=de([y,A],[F,L],n,-N,v),z=de([C,B],null==z?[y,A]:[z,D],n,-N,v),w===N?Q.push("L",z[0],"A",N,",",N," 0 0,",t," ",z[1],"A",n,",",n," 0 ",v^ce(z[1][0],z[1][1],r[1][0],r[1][1]),",",1-v," ",r[1],"A",N,",",N," 0 0,",t," ",r[0]):Q.push("L",z[0],"A",N,",",N," 0 0,",t," ",r[0])):Q.push("L",C,",",B)):(Q.push("M",y,",",A),null!=z&&Q.push("A",r,",",r," 0 ",t,",",v," ",z,",",D),Q.push("L",C,",",B),null!=F&&Q.push("A",n,",",n," 0 ",N,",",1-v," ",F,",",
L));Q.push("Z");return Q.join("")}function c(b,f){return"M0,"+b+"A"+b+","+b+" 0 1,"+f+" 0,"+-b+"A"+b+","+b+" 0 1,"+f+" 0,"+b}var f=Ph,h=Qh,g=Oh,d=ve,k=lg,l=mg,m=Rh;b.innerRadius=function(c){if(!arguments.length)return f;f=ka(c);return b};b.outerRadius=function(c){if(!arguments.length)return h;h=ka(c);return b};b.cornerRadius=function(c){if(!arguments.length)return g;g=ka(c);return b};b.padRadius=function(c){if(!arguments.length)return d;d=c==ve?ve:ka(c);return b};b.startAngle=function(c){if(!arguments.length)return k;
k=ka(c);return b};b.endAngle=function(c){if(!arguments.length)return l;l=ka(c);return b};b.padAngle=function(c){if(!arguments.length)return m;m=ka(c);return b};b.centroid=function(){var b=(+f.apply(this,arguments)+ +h.apply(this,arguments))/2,c=(+k.apply(this,arguments)+ +l.apply(this,arguments))/2-Ja;return[Math.cos(c)*b,Math.sin(c)*b]};return b};var ve="auto";P.svg.line=function(){return ng(v)};var Xe=P.map({linear:Db,"linear-closed":og,step:function(b){for(var c=0,f=b.length,h=b[0],g=[h[0],",",
h[1]];++c<f;)g.push("H",(h[0]+(h=b[c])[0])/2,"V",h[1]);1<f&&g.push("H",h[0]);return g.join("")},"step-before":Ye,"step-after":Ze,basis:pg,"basis-open":function(b){if(4>b.length)return Db(b);for(var c=[],f=-1,h=b.length,g,d=[0],k=[0];3>++f;)g=b[f],d.push(g[0]),k.push(g[1]);c.push(tb(pc,d)+","+tb(pc,k));for(--f;++f<h;)g=b[f],d.shift(),d.push(g[0]),k.shift(),k.push(g[1]),af(c,d,k);return c.join("")},"basis-closed":function(b){for(var c,f=-1,h=b.length,g=h+4,d,k=[],l=[];4>++f;)d=b[f%h],k.push(d[0]),l.push(d[1]);
c=[tb(pc,k),",",tb(pc,l)];for(--f;++f<g;)d=b[f%h],k.shift(),k.push(d[0]),l.shift(),l.push(d[1]),af(c,k,l);return c.join("")},bundle:function(b,c){var f=b.length-1;if(f)for(var h=b[0][0],g=b[0][1],d=b[f][0]-h,k=b[f][1]-g,l=-1,m,n;++l<=f;)m=b[l],n=l/f,m[0]=c*m[0]+(1-c)*(h+n*d),m[1]=c*m[1]+(1-c)*(g+n*k);return pg(b)},cardinal:function(b,c){return 3>b.length?Db(b):b[0]+ee(b,$e(b,c))},"cardinal-open":function(b,c){return 4>b.length?Db(b):b[1]+ee(b.slice(1,-1),$e(b,c))},"cardinal-closed":function(b,c){return 3>
b.length?og(b):b[0]+ee((b.push(b[0]),b),$e([b[b.length-2]].concat(b,[b[1]]),c))},monotone:function(b){if(3>b.length)b=Db(b);else{var c=b[0],f=[],h,g,d,k;h=0;g=b.length-1;var l=[];d=b[1];for(k=l[0]=bf(b[0],d);++h<g;)l[h]=(k+(k=bf(d,d=b[h+1])))/2;l[h]=k;for(var m=-1,n=b.length-1;++m<n;)h=bf(b[m],b[m+1]),1E-6>na(h)?l[m]=l[m+1]=0:(g=l[m]/h,d=l[m+1]/h,k=g*g+d*d,9<k&&(k=3*h/Math.sqrt(k),l[m]=k*g,l[m+1]=k*d));for(m=-1;++m<=n;)k=(b[Math.min(n,m+1)][0]-b[Math.max(0,m-1)][0])/(6*(1+l[m]*l[m])),f.push([k||0,
l[m]*k||0]);b=c+ee(b,f)}return b}});Xe.forEach(function(b,c){c.key=b;c.closed=/-closed$/.test(b)});var qg=[0,2/3,1/3,0],rg=[0,1/3,2/3,0],pc=[0,1/6,2/3,1/6];P.svg.line.radial=function(){var b=ng(sg);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Ye.reverse=Ze;Ze.reverse=Ye;P.svg.area=function(){return tg(v)};P.svg.area.radial=function(){var b=tg(sg);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;b.startAngle=b.y0;delete b.y0;b.endAngle=
b.y1;delete b.y1;return b};P.svg.chord=function(){function b(d,k){var l=c(this,h,d,k),m=c(this,g,d,k);return"M"+l.p0+f(l.r,l.p1,l.a1-l.a0)+(l.a0==m.a0&&l.a1==m.a1?"Q 0,0 "+l.p0:"Q 0,0 "+m.p0+f(m.r,m.p1,m.a1-m.a0)+("Q 0,0 "+l.p0))+"Z"}function c(b,f,h,g){var m=f.call(b,h,g);f=d.call(b,m,g);h=k.call(b,m,g)-Ja;b=l.call(b,m,g)-Ja;return{r:f,a0:h,a1:b,p0:[f*Math.cos(h),f*Math.sin(h)],p1:[f*Math.cos(b),f*Math.sin(b)]}}function f(b,c,h){return"A"+b+","+b+" 0 "+ +(h>la)+",1 "+c}var h=hd,g=va,d=Sh,k=lg,l=
mg;b.radius=function(c){if(!arguments.length)return d;d=ka(c);return b};b.source=function(c){if(!arguments.length)return h;h=ka(c);return b};b.target=function(c){if(!arguments.length)return g;g=ka(c);return b};b.startAngle=function(c){if(!arguments.length)return k;k=ka(c);return b};b.endAngle=function(c){if(!arguments.length)return l;l=ka(c);return b};return b};P.svg.diagonal=function(){function b(g,d){var k=c.call(this,g,d),l=f.call(this,g,d),m=(k.y+l.y)/2,k=[k,{x:k.x,y:m},{x:l.x,y:m},l],k=k.map(h);
return"M"+k[0]+"C"+k[1]+" "+k[2]+" "+k[3]}var c=hd,f=va,h=ug;b.source=function(f){if(!arguments.length)return c;c=ka(f);return b};b.target=function(c){if(!arguments.length)return f;f=ka(c);return b};b.projection=function(c){if(!arguments.length)return h;h=c;return b};return b};P.svg.diagonal.radial=function(){var b=P.svg.diagonal(),c=ug,f=b.projection;b.projection=function(b){return arguments.length?f(Th(c=b)):c};return b};P.svg.symbol=function(){function b(h,g){return(Kg.get(c.call(this,h,g))||vg)(f.call(this,
h,g))}var c=Vh,f=Uh;b.type=function(f){if(!arguments.length)return c;c=ka(f);return b};b.size=function(c){if(!arguments.length)return f;f=ka(c);return b};return b};var Kg=P.map({circle:vg,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*Lg));var c=b*Lg;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+
b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/we);var c=b*we/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(b){b=Math.sqrt(b/we);var c=b*we/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});P.svg.symbolTypes=Kg.keys();var we=Math.sqrt(3),Lg=Math.tan(30*ma);Aa.transition=function(b){var c=Dc||++Mg;b=df(b);for(var f=[],h,g,d=xe||{time:Date.now(),ease:Vg,delay:0,duration:250},k=-1,l=this.length;++k<l;){f.push(h=[]);for(var m=this[k],n=-1,r=m.length;++n<r;)(g=
m[n])&&fe(g,n,b,c,d),h.push(g)}return xd(f,b,c)};Aa.interrupt=function(b){return this.each(null==b?ie:wg(df(b)))};var ie=wg(df()),Qa=[],Mg=0,Dc,xe;Qa.call=Aa.call;Qa.empty=Aa.empty;Qa.node=Aa.node;Qa.size=Aa.size;P.transition=function(b,c){return b&&b.transition?Dc?b.transition(c):b:P.selection().transition(b)};P.transition.prototype=Qa;Qa.select=function(b){var c=this.id,f=this.namespace,h=[],g,d,k;b=I(b);for(var l=-1,m=this.length;++l<m;){h.push(g=[]);for(var n=this[l],r=-1,q=n.length;++r<q;)(k=
n[r])&&(d=b.call(k,k.__data__,r,l))?("__data__"in k&&(d.__data__=k.__data__),fe(d,r,f,c,k[f][c]),g.push(d)):g.push(null)}return xd(h,f,c)};Qa.selectAll=function(b){var c=this.id,f=this.namespace,h=[],g,d,k,l;b=G(b);for(var m=-1,n=this.length;++m<n;)for(var r=this[m],q=-1,p=r.length;++q<p;)if(g=r[q]){l=g[f][c];d=b.call(g,g.__data__,q,m);h.push(g=[]);for(var u=-1,v=d.length;++u<v;)(k=d[u])&&fe(k,u,f,c,l),g.push(k)}return xd(h,f,c)};Qa.filter=function(b){var c=[],f,h,g;"function"!==typeof b&&(b=W(b));
for(var d=0,k=this.length;d<k;d++){c.push(f=[]);h=this[d];for(var l=0,m=h.length;l<m;l++)(g=h[l])&&b.call(g,g.__data__,l,d)&&f.push(g)}return xd(c,this.namespace,this.id)};Qa.tween=function(b,c){var f=this.id,h=this.namespace;return 2>arguments.length?this.node()[h][f].tween.get(b):ea(this,null==c?function(c){c[h][f].tween.remove(b)}:function(g){g[h][f].tween.set(b,c)})};Qa.attr=function(b,c){function f(){this.removeAttribute(l)}function h(){this.removeAttributeNS(l.space,l.local)}function g(b){return null==
b?f:(b+="",function(){var c=this.getAttribute(l),f;return c!==b&&(f=k(c,b),function(b){this.setAttribute(l,f(b))})})}function d(b){return null==b?h:(b+="",function(){var c=this.getAttributeNS(l.space,l.local),f;return c!==b&&(f=k(c,b),function(b){this.setAttributeNS(l.space,l.local,f(b))})})}if(2>arguments.length){for(c in b)this.attr(c,b[c]);return this}var k="transform"==b?xf:dc,l=P.ns.qualify(b);return cf(this,"attr."+b,c,l.local?d:g)};Qa.attrTween=function(b,c){function f(b,h){var d=c.call(this,
b,h,this.getAttribute(g));return d&&function(b){this.setAttribute(g,d(b))}}function h(b,f){var d=c.call(this,b,f,this.getAttributeNS(g.space,g.local));return d&&function(b){this.setAttributeNS(g.space,g.local,d(b))}}var g=P.ns.qualify(b);return this.tween("attr."+b,g.local?h:f)};Qa.style=function(c,f,h){function g(){this.style.removeProperty(c)}var d=arguments.length;if(3>d){if("string"!==typeof c){2>d&&(f="");for(h in c)this.style(h,c[h],f);return this}h=""}return cf(this,"style."+c,f,function(f){return null==
f?g:(f+="",function(){var g=b(this).getComputedStyle(this,null).getPropertyValue(c),d;return g!==f&&(d=dc(g,f),function(b){this.style.setProperty(c,d(b),h)})})})};Qa.styleTween=function(c,f,h){3>arguments.length&&(h="");return this.tween("style."+c,function(g,d){var k=f.call(this,g,d,b(this).getComputedStyle(this,null).getPropertyValue(c));return k&&function(b){this.style.setProperty(c,k(b),h)}})};Qa.text=function(b){return cf(this,"text",b,Wh)};Qa.remove=function(){var b=this.namespace;return this.each("end.transition",
function(){var c;2>this[b].count&&(c=this.parentNode)&&c.removeChild(this)})};Qa.ease=function(b){var c=this.id,f=this.namespace;if(1>arguments.length)return this.node()[f][c].ease;"function"!==typeof b&&(b=P.ease.apply(P,arguments));return ea(this,function(h){h[f][c].ease=b})};Qa.delay=function(b){var c=this.id,f=this.namespace;return 1>arguments.length?this.node()[f][c].delay:ea(this,"function"===typeof b?function(h,g,d){h[f][c].delay=+b.call(h,h.__data__,g,d)}:(b=+b,function(h){h[f][c].delay=b}))};
Qa.duration=function(b){var c=this.id,f=this.namespace;return 1>arguments.length?this.node()[f][c].duration:ea(this,"function"===typeof b?function(h,g,d){h[f][c].duration=Math.max(1,b.call(h,h.__data__,g,d))}:(b=Math.max(1,b),function(h){h[f][c].duration=b}))};Qa.each=function(b,c){var f=this.id,h=this.namespace;if(2>arguments.length){var g=xe,d=Dc;try{Dc=f,ea(this,function(c,g,d){xe=c[h][f];b.call(c,c.__data__,g,d)})}finally{xe=g,Dc=d}}else ea(this,function(g){g=g[h][f];(g.event||(g.event=P.dispatch("start",
"end","interrupt"))).on(b,c)});return this};Qa.transition=function(){for(var b=this.id,c=++Mg,f=this.namespace,h=[],g,d,k,l,m=0,n=this.length;m<n;m++){h.push(g=[]);d=this[m];for(var r=0,q=d.length;r<q;r++){if(k=d[r])l=k[f][b],fe(k,r,f,c,{time:l.time,ease:l.ease,delay:l.delay+l.duration,duration:l.duration});g.push(k)}}return xd(h,f,c)};P.svg.axis=function(){function b(n){n.each(function(){var b=P.select(this),n=this.__chart__||c,r=this.__chart__=c.copy(),q=null==l?r.ticks?r.ticks.apply(r,k):r.domain():
l,p=null==m?r.tickFormat?r.tickFormat.apply(r,k):v:m,u=b.selectAll(".tick").data(q,r),q=u.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),w=P.transition(u.exit()).style("opacity",1E-6).remove(),t=P.transition(u.order()).style("opacity",1),y=Math.max(h,0)+d,A=Zd(r),b=b.selectAll(".domain").data([0]),b=(b.enter().append("path").attr("class","domain"),P.transition(b));q.append("line");q.append("text");var x=q.select("line"),C=t.select("line"),u=u.select("text").text(p),z=q.select("text"),
D=t.select("text"),B="top"===f||"left"===f?-1:1,F,L,Q,N;"bottom"===f||"top"===f?(p=Xh,F="x",Q="y",L="x2",N="y2",u.attr("dy",0>B?"0em":".71em").style("text-anchor","middle"),b.attr("d","M"+A[0]+","+B*g+"V0H"+A[1]+"V"+B*g)):(p=Yh,F="y",Q="x",L="y2",N="x2",u.attr("dy",".32em").style("text-anchor",0>B?"end":"start"),b.attr("d","M"+B*g+","+A[0]+"H0V"+A[1]+"H"+B*g));x.attr(N,B*h);z.attr(Q,B*y);C.attr(L,0).attr(N,B*h);D.attr(F,0).attr(Q,B*y);if(r.rangeBand)var H=r,G=H.rangeBand()/2,n=r=function(b){return H(b)+
G};else n.rangeBand?n=r:w.call(p,r,n);q.call(p,n,r);t.call(p,r,r)})}var c=P.scale.linear(),f=Ng,h=6,g=6,d=3,k=[10],l=null,m;b.scale=function(f){if(!arguments.length)return c;c=f;return b};b.orient=function(c){if(!arguments.length)return f;f=c in ui?c+"":Ng;return b};b.ticks=function(){if(!arguments.length)return k;k=Mb(arguments);return b};b.tickValues=function(c){if(!arguments.length)return l;l=c;return b};b.tickFormat=function(c){if(!arguments.length)return m;m=c;return b};b.tickSize=function(c){var f=
arguments.length;if(!f)return h;h=+c;g=+arguments[f-1];return b};b.innerTickSize=function(c){if(!arguments.length)return h;h=+c;return b};b.outerTickSize=function(c){if(!arguments.length)return g;g=+c;return b};b.tickPadding=function(c){if(!arguments.length)return d;d=+c;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var Ng="bottom",ui={top:1,right:1,bottom:1,left:1};P.svg.brush=function(){function c(b){b.each(function(){var b=P.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",d).on("touchstart.brush",d),k=b.selectAll(".background").data([0]);k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");b.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=b.selectAll(".resize").data(t,v);n.exit().remove();n.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return vi[b]}).append("rect").attr("x",
function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");n.style("display",c.empty()?"none":null);b=P.transition(b);k=P.transition(k);l&&(n=Zd(l),k.attr("x",n[0]).attr("width",n[1]-n[0]),h(b));m&&(n=Zd(m),k.attr("y",n[0]).attr("height",n[1]-n[0]),g(b));f(b)})}function f(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+n[+/e$/.test(b)]+","+r[+/^s/.test(b)]+")"})}function h(b){b.select(".extent").attr("x",
n[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",n[1]-n[0])}function g(b){b.select(".extent").attr("y",r[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function d(){function v(){var b=P.mouse(A),c=!1;I&&(b[0]+=I[0],b[1]+=I[1]);Q||(P.event.altKey?(H||(H=[(n[0]+n[1])/2,(r[0]+r[1])/2]),G[0]=n[+(b[0]<H[0])],G[1]=r[+(b[1]<H[1])]):H=null);F&&t(b,l,0)&&(h(z),c=!0);L&&t(b,m,1)&&(g(z),c=!0);c&&(f(z),C({type:"brush",mode:Q?"move":"resize"}))}function t(b,c,f){var h=Zd(c);c=h[0];
var g=h[1],h=G[f],d=f?r:n,k=d[1]-d[0];Q&&(c-=h,g-=k+h);b=(f?w:u)?Math.max(c,Math.min(g,b[f])):b[f];Q?c=(b+=h)+k:(H&&(h=Math.max(c,Math.min(g,2*H[f]-b))),h<b?(c=b,b=h):c=h);if(d[0]!=b||d[1]!=c)return f?p=null:q=null,d[0]=b,d[1]=c,!0}function y(){v();z.style("pointer-events","all").selectAll(".resize").style("display",c.empty()?"none":null);P.select("body").style("cursor",null);E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);N();C({type:"brushend"})}var A=this,x=P.select(P.event.target),C=k.of(A,arguments),z=P.select(A),B=x.datum(),F=!/^(n|s)$/.test(B)&&l,L=!/^(e|w)$/.test(B)&&m,Q=x.classed("extent"),N=ba(A),H,G=P.mouse(A),I,E=P.select(b(A)).on("keydown.brush",function(){32==P.event.keyCode&&(Q||(H=null,G[0]-=n[1],G[1]-=r[1],Q=2),D())}).on("keyup.brush",function(){32==P.event.keyCode&&2==Q&&(G[0]+=n[1],G[1]+=r[1],Q=0,D())});if(P.event.changedTouches)E.on("touchmove.brush",v).on("touchend.brush",
y);else E.on("mousemove.brush",v).on("mouseup.brush",y);z.interrupt().selectAll("*").interrupt();if(Q)G[0]=n[0]-G[0],G[1]=r[0]-G[1];else if(B){var J=+/w$/.test(B),B=+/^n/.test(B);I=[n[1-J]-G[0],r[1-B]-G[1]];G[0]=n[J];G[1]=r[B]}else P.event.altKey&&(H=G.slice());z.style("pointer-events","none").selectAll(".resize").style("display",null);P.select("body").style("cursor",x.style("cursor"));C({type:"brushstart"});v()}var k=F(c,"brushstart","brush","brushend"),l=null,m=null,n=[0,0],r=[0,0],q,p,u=!0,w=!0,
t=mf[0];c.event=function(b){b.each(function(){var b=k.of(this,arguments),c={x:n,y:r,i:q,j:p},f=this.__chart__||c;this.__chart__=c;Dc?P.select(this).transition().each("start.brush",function(){q=f.i;p=f.j;n=f.x;r=f.y;b({type:"brushstart"})}).tween("brush:brush",function(){var f=Ed(n,c.x),h=Ed(r,c.y);q=p=null;return function(g){n=c.x=f(g);r=c.y=h(g);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){q=c.i;p=c.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),
b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};c.x=function(b){if(!arguments.length)return l;l=b;t=mf[!l<<1|!m];return c};c.y=function(b){if(!arguments.length)return m;m=b;t=mf[!l<<1|!m];return c};c.clamp=function(b){if(!arguments.length)return l&&m?[u,w]:l?u:m?w:null;l&&m?(u=!!b[0],w=!!b[1]):l?u=!!b:m&&(w=!!b);return c};c.extent=function(b){var f,h,g,d,k;if(!arguments.length)return l&&(q?(f=q[0],h=q[1]):(f=n[0],h=n[1],l.invert&&(f=l.invert(f),h=l.invert(h)),h<f&&(k=f,f=h,h=k))),m&&(p?(g=
p[0],d=p[1]):(g=r[0],d=r[1],m.invert&&(g=m.invert(g),d=m.invert(d)),d<g&&(k=g,g=d,d=k))),l&&m?[[f,g],[h,d]]:l?[f,h]:m&&[g,d];l&&(f=b[0],h=b[1],m&&(f=f[0],h=h[0]),q=[f,h],l.invert&&(f=l(f),h=l(h)),h<f&&(k=f,f=h,h=k),f!=n[0]||h!=n[1])&&(n=[f,h]);m&&(g=b[0],d=b[1],l&&(g=g[1],d=d[1]),p=[g,d],m.invert&&(g=m(g),d=m(d)),d<g&&(k=g,g=d,d=k),g!=r[0]||d!=r[1])&&(r=[g,d]);return c};c.clear=function(){c.empty()||(n=[0,0],r=[0,0],q=p=null);return c};c.empty=function(){return!!l&&n[0]==n[1]||!!m&&r[0]==r[1]};return P.rebind(c,
k,"on")};var vi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},mf=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],nf=fa.format=Bg.timeFormat,Og=nf.utc,Pg=Og("%Y-%m-%dT%H:%M:%S.%LZ");nf.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ef:Pg;ef.parse=function(b){b=new Date(b);return isNaN(b)?null:b};ef.toString=Pg.toString;fa.second=Ha(function(b){return new bb(1E3*Math.floor(b/1E3))},function(b,
c){b.setTime(b.getTime()+1E3*Math.floor(c))},function(b){return b.getSeconds()});fa.seconds=fa.second.range;fa.seconds.utc=fa.second.utc.range;fa.minute=Ha(function(b){return new bb(6E4*Math.floor(b/6E4))},function(b,c){b.setTime(b.getTime()+6E4*Math.floor(c))},function(b){return b.getMinutes()});fa.minutes=fa.minute.range;fa.minutes.utc=fa.minute.utc.range;fa.hour=Ha(function(b){var c=b.getTimezoneOffset()/60;return new bb(36E5*(Math.floor(b/36E5-c)+c))},function(b,c){b.setTime(b.getTime()+36E5*
Math.floor(c))},function(b){return b.getHours()});fa.hours=fa.hour.range;fa.hours.utc=fa.hour.utc.range;fa.month=Ha(function(b){b=fa.day(b);b.setDate(1);return b},function(b,c){b.setMonth(b.getMonth()+c)},function(b){return b.getMonth()});fa.months=fa.month.range;fa.months.utc=fa.month.utc.range;var ge=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],of=[[fa.second,1],[fa.second,5],[fa.second,15],[fa.second,30],[fa.minute,1],[fa.minute,5],[fa.minute,
15],[fa.minute,30],[fa.hour,1],[fa.hour,3],[fa.hour,6],[fa.hour,12],[fa.day,1],[fa.day,2],[fa.week,1],[fa.month,1],[fa.month,3],[fa.year,1]],wi=nf.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",Rb]]),Zh={range:function(b,
c,f){return P.range(Math.ceil(b/f)*f,+c,f).map(Cc)},floor:v,ceil:v};of.year=fa.year;fa.scale=function(){return ff(P.scale.linear(),of,wi)};var Qg=of.map(function(b){return[b[0].utc,b[1]]}),xi=Og.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],
["%B",function(b){return b.getUTCMonth()}],["%Y",Rb]]);Qg.year=fa.year.utc;fa.scale.utc=function(){return ff(P.scale.linear(),Qg,xi)};P.text=O(function(b){return b.responseText});P.json=function(b,c){return ja(b,"application/json",$h,c)};P.html=function(b,c){return ja(b,"text/html",ai,c)};P.xml=O(function(b){return b.responseXML});"function"===typeof define&&define.amd?(this.d3=P,define(P)):"object"===typeof module&&module.exports?module.exports=P:this.d3=P}();(function e$$0(c,d,g){function f(k,m){if(!d[k]){if(!c[k]){var p="function"==typeof require&&require;if(!m&&p)return p(k,!0);if(h)return h(k,!0);p=Error("Cannot find module '"+k+"'");throw p.code="MODULE_NOT_FOUND",p;}p=d[k]={exports:{}};c[k][0].call(p.exports,function(h){var g=c[k][1][h];return f(g?g:h)},p,p.exports,e$$0,c,d,g)}return d[k].exports}for(var h="function"==typeof require&&require,k=0;k<g.length;k++)f(g[k]);return f})({1:[function(b,c,d){(function(c){function f(){try{var b=new Uint8Array(1);
b.foo=function(){return 42};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function h(b){if(!(this instanceof h))return 1<arguments.length?new h(b,arguments[1]):new h(b);h.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0);if("number"===typeof b){var c;c=m(this,0>b?0:p(b)|0);if(!h.TYPED_ARRAY_SUPPORT)for(var f=0;f<b;f++)c[f]=0;return c}if("string"===typeof b){c=this;f=1<arguments.length?arguments[1]:"utf8";if("string"!==typeof f||""===f)f=
"utf8";var g=u(b,f)|0;c=m(c,g);c.write(b,f);return c}return k(this,b)}function k(b,c){if(h.isBuffer(c)){var f=b,g=p(c.length)|0,f=m(f,g);c.copy(f,0,0,g);return f}if(G(c)){for(var f=b,g=p(c.length)|0,f=m(f,g),d=0;d<g;d+=1)f[d]=c[d]&255;return f}if(null==c)throw new TypeError("must start with number, buffer, array or string");if("undefined"!==typeof ArrayBuffer){if(c.buffer instanceof ArrayBuffer)return l(b,c);if(c instanceof ArrayBuffer)return f=b,c.byteLength,h.TYPED_ARRAY_SUPPORT?(f=new Uint8Array(c),
f.__proto__=h.prototype):f=l(f,new Uint8Array(c)),f}if(c.length){f=b;g=p(c.length)|0;f=m(f,g);for(d=0;d<g;d+=1)f[d]=c[d]&255;return f}f=b;d=0;"Buffer"===c.type&&G(c.data)&&(g=c.data,d=p(g.length)|0);for(var f=m(f,d),k=0;k<d;k+=1)f[k]=g[k]&255;return f}function l(b,c){var f=p(c.length)|0;b=m(b,f);for(var h=0;h<f;h+=1)b[h]=c[h]&255;return b}function m(b,c){h.TYPED_ARRAY_SUPPORT?(b=new Uint8Array(c),b.__proto__=h.prototype):b.length=c;0!==c&&c<=h.poolSize>>>1&&(b.parent=M);return b}function p(b){if(b>=
(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return b|0}function t(b,c){if(!(this instanceof t))return new t(b,c);var f=new h(b,c);delete f.parent;return f}function u(b,c){"string"!==typeof b&&(b=""+b);var f=b.length;if(0===f)return 0;for(var h=!1;;)switch(c){case "ascii":case "binary":case "raw":case "raws":return f;case "utf8":case "utf-8":return D(b).length;
case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*f;case "hex":return f>>>1;case "base64":return H.toByteArray(C(b)).length;default:if(h)return D(b).length;c=(""+c).toLowerCase();h=!0}}function n(b,c,f){var h=!1;c|=0;f=void 0===f||Infinity===f?this.length:f|0;b||(b="utf8");0>c&&(c=0);f>this.length&&(f=this.length);if(f<=c)return"";for(;;)switch(b){case "hex":b=c;c=f;f=this.length;if(!b||0>b)b=0;if(!c||0>c||c>f)c=f;h="";for(f=b;f<c;f++)b=h,h=this[f],h=16>h?"0"+h.toString(16):h.toString(16),
h=b+h;return h;case "utf8":case "utf-8":return q(this,c,f);case "ascii":b="";for(f=Math.min(this.length,f);c<f;c++)b+=String.fromCharCode(this[c]&127);return b;case "binary":b="";for(f=Math.min(this.length,f);c<f;c++)b+=String.fromCharCode(this[c]);return b;case "base64":return c=0===c&&f===this.length?H.fromByteArray(this):H.fromByteArray(this.slice(c,f)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,f);f="";for(b=0;b<c.length;b+=2)f+=String.fromCharCode(c[b]+256*c[b+1]);
return f;default:if(h)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();h=!0}}function q(b,c,f){f=Math.min(b.length,f);for(var h=[];c<f;){var g=b[c],d=null,k=239<g?4:223<g?3:191<g?2:1;if(c+k<=f){var l,m,n;switch(k){case 1:128>g&&(d=g);break;case 2:l=b[c+1];128===(l&192)&&(g=(g&31)<<6|l&63,127<g&&(d=g));break;case 3:l=b[c+1];m=b[c+2];128===(l&192)&&128===(m&192)&&(g=(g&15)<<12|(l&63)<<6|m&63,2047<g&&(55296>g||57343<g)&&(d=g));break;case 4:l=b[c+1],m=b[c+2],n=b[c+3],128===(l&192)&&
128===(m&192)&&128===(n&192)&&(g=(g&15)<<18|(l&63)<<12|(m&63)<<6|n&63,65535<g&&1114112>g&&(d=g))}}null===d?(d=65533,k=1):65535<d&&(d-=65536,h.push(d>>>10&1023|55296),d=56320|d&1023);h.push(d);c+=k}b=h.length;if(b<=J)h=String.fromCharCode.apply(String,h);else{f="";for(c=0;c<b;)f+=String.fromCharCode.apply(String,h.slice(c,c+=J));h=f}return h}function r(b,c,f){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+c>f)throw new RangeError("Trying to access beyond buffer length");}function w(b,
c,f,g,d,k){if(!h.isBuffer(b))throw new TypeError("buffer must be a Buffer instance");if(c>d||c<k)throw new RangeError("value is out of bounds");if(f+g>b.length)throw new RangeError("index out of range");}function v(b,c,f,h){0>c&&(c=65535+c+1);for(var g=0,d=Math.min(b.length-f,2);g<d;g++)b[f+g]=(c&255<<8*(h?g:1-g))>>>8*(h?g:1-g)}function y(b,c,f,h){0>c&&(c=4294967295+c+1);for(var g=0,d=Math.min(b.length-f,4);g<d;g++)b[f+g]=c>>>8*(h?g:3-g)&255}function A(b,c,f,h,g,d){if(f+h>b.length)throw new RangeError("index out of range");
if(0>f)throw new RangeError("index out of range");}function x(b,c,f,h,g){g||A(b,c,f,4,3.4028234663852886E38,-3.4028234663852886E38);I.write(b,c,f,h,23,4);return f+4}function z(b,c,f,h,g){g||A(b,c,f,8,1.7976931348623157E308,-1.7976931348623157E308);I.write(b,c,f,h,52,8);return f+8}function C(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(K,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function D(b,c){c=c||Infinity;for(var f,h=b.length,g=null,d=[],k=0;k<h;k++){f=b.charCodeAt(k);
if(55295<f&&57344>f){if(!g){if(56319<f){-1<(c-=3)&&d.push(239,191,189);continue}else if(k+1===h){-1<(c-=3)&&d.push(239,191,189);continue}g=f;continue}if(56320>f){-1<(c-=3)&&d.push(239,191,189);g=f;continue}f=(g-55296<<10|f-56320)+65536}else g&&-1<(c-=3)&&d.push(239,191,189);g=null;if(128>f){if(0>--c)break;d.push(f)}else if(2048>f){if(0>(c-=2))break;d.push(f>>6|192,f&63|128)}else if(65536>f){if(0>(c-=3))break;d.push(f>>12|224,f>>6&63|128,f&63|128)}else if(1114112>f){if(0>(c-=4))break;d.push(f>>18|
240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw Error("Invalid code point");}return d}function B(b){for(var c=[],f=0;f<b.length;f++)c.push(b.charCodeAt(f)&255);return c}function F(b,c,f,h){for(var g=0;g<h&&!(g+f>=c.length||g>=b.length);g++)c[g+f]=b[g];return g}var H=b("base64-js"),I=b("ieee754"),G=b("isarray");d.Buffer=h;d.SlowBuffer=t;d.INSPECT_MAX_BYTES=50;h.poolSize=8192;var M={};h.TYPED_ARRAY_SUPPORT=void 0!==c.TYPED_ARRAY_SUPPORT?c.TYPED_ARRAY_SUPPORT:f();h._augment=function(b){b.__proto__=
h.prototype;return b};h.TYPED_ARRAY_SUPPORT?(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array):(h.prototype.length=void 0,h.prototype.parent=void 0);h.isBuffer=function(b){return!(null==b||!b._isBuffer)};h.compare=function(b,c){if(!h.isBuffer(b)||!h.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var f=b.length,g=c.length,d=0,k=Math.min(f,g);d<k&&b[d]===c[d];)++d;d!==k&&(f=b[d],g=c[d]);return f<g?-1:g<f?1:0};h.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};h.concat=function(b,c){if(!G(b))throw new TypeError("list argument must be an Array of Buffers.");if(0===b.length)return new h(0);var f;if(void 0===c)for(f=c=0;f<b.length;f++)c+=b[f].length;var g=new h(c),d=0;for(f=0;f<b.length;f++){var k=b[f];k.copy(g,d);d+=k.length}return g};h.byteLength=u;h.prototype._isBuffer=!0;h.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?q(this,0,b):n.apply(this,arguments)};h.prototype.equals=function(b){if(!h.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b?!0:0===h.compare(this,b)};h.prototype.inspect=function(){var b="",c=d.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};h.prototype.compare=function(b){if(!h.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?0:h.compare(this,b)};h.prototype.indexOf=function(b,c){function f(b,c,h){for(var g=-1,d=0;h+d<b.length;d++)if(b[h+d]===c[-1===g?0:d-g]){if(-1===g&&(g=d),d-g+1===
c.length)return h+g}else g=-1;return-1}2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c>>=0;if(0===this.length||c>=this.length)return-1;0>c&&(c=Math.max(this.length+c,0));if("string"===typeof b)return 0===b.length?-1:String.prototype.indexOf.call(this,b,c);if(h.isBuffer(b))return f(this,b,c);if("number"===typeof b)return h.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,b,c):f(this,[b],c);throw new TypeError("val must be string, number or Buffer");
};h.prototype.write=function(b,c,f,h){if(void 0===c)h="utf8",f=this.length,c=0;else if(void 0===f&&"string"===typeof c)h=c,f=this.length,c=0;else if(isFinite(c))c|=0,isFinite(f)?(f|=0,void 0===h&&(h="utf8")):(h=f,f=void 0);else{var g=h;h=c;c=f|0;f=g}g=this.length-c;if(void 0===f||f>g)f=g;if(0<b.length&&(0>f||0>c)||c>this.length)throw new RangeError("attempt to write outside buffer bounds");h||(h="utf8");for(g=!1;;)switch(h){case "hex":c=Number(c)||0;h=this.length-c;f?(f=Number(f),f>h&&(f=h)):f=h;
h=b.length;if(0!==h%2)throw Error("Invalid hex string");f>h/2&&(f=h/2);for(h=0;h<f;h++){g=parseInt(b.substr(2*h,2),16);if(isNaN(g))throw Error("Invalid hex string");this[c+h]=g}return h;case "utf8":case "utf-8":return F(D(b,this.length-c),this,c,f);case "ascii":return F(B(b),this,c,f);case "binary":return F(B(b),this,c,f);case "base64":return F(H.toByteArray(C(b)),this,c,f);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":h=this.length-c;for(var d=void 0,d=g=void 0,k=[],l=0;l<b.length&&!(0>
(h-=2));l++)d=b.charCodeAt(l),g=d>>8,d%=256,k.push(d),k.push(g);return F(k,this,c,f);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase();g=!0}};h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;h.prototype.slice=function(b,c){var f=this.length;b=~~b;c=void 0===c?f:~~c;0>b?(b+=f,0>b&&(b=0)):b>f&&(b=f);0>c?(c+=f,0>c&&(c=0)):c>f&&(c=f);c<b&&(c=b);if(h.TYPED_ARRAY_SUPPORT)f=this.subarray(b,c),f.__proto__=h.prototype;
else for(var g=c-b,f=new h(g,void 0),d=0;d<g;d++)f[d]=this[d+b];f.length&&(f.parent=this.parent||this);return f};h.prototype.readUIntLE=function(b,c,f){b|=0;c|=0;f||r(b,c,this.length);f=this[b];for(var h=1,g=0;++g<c&&(h*=256);)f+=this[b+g]*h;return f};h.prototype.readUIntBE=function(b,c,f){b|=0;c|=0;f||r(b,c,this.length);f=this[b+--c];for(var h=1;0<c&&(h*=256);)f+=this[b+--c]*h;return f};h.prototype.readUInt8=function(b,c){c||r(b,1,this.length);return this[b]};h.prototype.readUInt16LE=function(b,
c){c||r(b,2,this.length);return this[b]|this[b+1]<<8};h.prototype.readUInt16BE=function(b,c){c||r(b,2,this.length);return this[b]<<8|this[b+1]};h.prototype.readUInt32LE=function(b,c){c||r(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};h.prototype.readUInt32BE=function(b,c){c||r(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};h.prototype.readIntLE=function(b,c,f){b|=0;c|=0;f||r(b,c,this.length);f=this[b];for(var h=1,g=0;++g<c&&(h*=256);)f+=
this[b+g]*h;f>=128*h&&(f-=Math.pow(2,8*c));return f};h.prototype.readIntBE=function(b,c,f){b|=0;c|=0;f||r(b,c,this.length);f=c;for(var h=1,g=this[b+--f];0<f&&(h*=256);)g+=this[b+--f]*h;g>=128*h&&(g-=Math.pow(2,8*c));return g};h.prototype.readInt8=function(b,c){c||r(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};h.prototype.readInt16LE=function(b,c){c||r(b,2,this.length);var f=this[b]|this[b+1]<<8;return f&32768?f|4294901760:f};h.prototype.readInt16BE=function(b,c){c||r(b,2,this.length);
var f=this[b+1]|this[b]<<8;return f&32768?f|4294901760:f};h.prototype.readInt32LE=function(b,c){c||r(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};h.prototype.readInt32BE=function(b,c){c||r(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};h.prototype.readFloatLE=function(b,c){c||r(b,4,this.length);return I.read(this,b,!0,23,4)};h.prototype.readFloatBE=function(b,c){c||r(b,4,this.length);return I.read(this,b,!1,23,4)};h.prototype.readDoubleLE=function(b,
c){c||r(b,8,this.length);return I.read(this,b,!0,52,8)};h.prototype.readDoubleBE=function(b,c){c||r(b,8,this.length);return I.read(this,b,!1,52,8)};h.prototype.writeUIntLE=function(b,c,f,h){b=+b;c|=0;f|=0;h||w(this,b,c,f,Math.pow(2,8*f),0);h=1;var g=0;for(this[c]=b&255;++g<f&&(h*=256);)this[c+g]=b/h&255;return c+f};h.prototype.writeUIntBE=function(b,c,f,h){b=+b;c|=0;f|=0;h||w(this,b,c,f,Math.pow(2,8*f),0);h=f-1;var g=1;for(this[c+h]=b&255;0<=--h&&(g*=256);)this[c+h]=b/g&255;return c+f};h.prototype.writeUInt8=
function(b,c,f){b=+b;c|=0;f||w(this,b,c,1,255,0);h.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[c]=b&255;return c+1};h.prototype.writeUInt16LE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):v(this,b,c,!0);return c+2};h.prototype.writeUInt16BE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):v(this,b,c,!1);return c+2};h.prototype.writeUInt32LE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,4,4294967295,
0);h.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=b&255):y(this,b,c,!0);return c+4};h.prototype.writeUInt32BE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b&255):y(this,b,c,!1);return c+4};h.prototype.writeIntLE=function(b,c,f,h){b=+b;c|=0;h||(h=Math.pow(2,8*f-1),w(this,b,c,f,h-1,-h));h=0;var g=1,d=0>b?1:0;for(this[c]=b&255;++h<f&&(g*=256);)this[c+h]=(b/g>>0)-d&255;return c+
f};h.prototype.writeIntBE=function(b,c,f,h){b=+b;c|=0;h||(h=Math.pow(2,8*f-1),w(this,b,c,f,h-1,-h));h=f-1;var g=1,d=0>b?1:0;for(this[c+h]=b&255;0<=--h&&(g*=256);)this[c+h]=(b/g>>0)-d&255;return c+f};h.prototype.writeInt8=function(b,c,f){b=+b;c|=0;f||w(this,b,c,1,127,-128);h.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[c]=b&255;return c+1};h.prototype.writeInt16LE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8):v(this,b,
c,!0);return c+2};h.prototype.writeInt16BE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b&255):v(this,b,c,!1);return c+2};h.prototype.writeInt32LE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,4,2147483647,-2147483648);h.TYPED_ARRAY_SUPPORT?(this[c]=b&255,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):y(this,b,c,!0);return c+4};h.prototype.writeInt32BE=function(b,c,f){b=+b;c|=0;f||w(this,b,c,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);
h.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b&255):y(this,b,c,!1);return c+4};h.prototype.writeFloatLE=function(b,c,f){return x(this,b,c,!0,f)};h.prototype.writeFloatBE=function(b,c,f){return x(this,b,c,!1,f)};h.prototype.writeDoubleLE=function(b,c,f){return z(this,b,c,!0,f)};h.prototype.writeDoubleBE=function(b,c,f){return z(this,b,c,!1,f)};h.prototype.copy=function(b,c,f,g){f||(f=0);g||0===g||(g=this.length);c>=b.length&&(c=b.length);c||(c=0);0<g&&g<f&&(g=f);
if(g===f||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>f||f>=this.length)throw new RangeError("sourceStart out of bounds");if(0>g)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length);b.length-c<g-f&&(g=b.length-c+f);var d=g-f;if(this===b&&f<c&&c<g)for(g=d-1;0<=g;g--)b[g+c]=this[g+f];else if(1E3>d||!h.TYPED_ARRAY_SUPPORT)for(g=0;g<d;g++)b[g+c]=this[g+f];else Uint8Array.prototype.set.call(b,this.subarray(f,f+d),c);return d};
h.prototype.fill=function(b,c,f){b||(b=0);c||(c=0);f||(f=this.length);if(f<c)throw new RangeError("end < start");if(f!==c&&0!==this.length){if(0>c||c>=this.length)throw new RangeError("start out of bounds");if(0>f||f>this.length)throw new RangeError("end out of bounds");if("number"===typeof b)for(;c<f;c++)this[c]=b;else{b=D(b.toString());for(var h=b.length;c<f;c++)this[c]=b[c%h]}return this}};var K=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:
"undefined"!==typeof window?window:{})},{"base64-js":2,ieee754:3,isarray:4}],2:[function(b,c,d){(function(b){function c(b){b=b.charCodeAt(0);if(43===b||45===b)return 62;if(47===b||95===b)return 63;if(48>b)return-1;if(58>b)return b-48+52;if(91>b)return b-65;if(123>b)return b-97+26}var h="undefined"!==typeof Uint8Array?Uint8Array:Array;b.toByteArray=function(b){function g(b){n[q++]=b}var d,p,t,u,n;if(0<b.length%4)throw Error("Invalid string. Length must be a multiple of 4");d=b.length;u="="===b.charAt(d-
2)?2:"="===b.charAt(d-1)?1:0;n=new h(3*b.length/4-u);p=0<u?b.length-4:b.length;var q=0;for(d=0;d<p;d+=4)t=c(b.charAt(d))<<18|c(b.charAt(d+1))<<12|c(b.charAt(d+2))<<6|c(b.charAt(d+3)),g((t&16711680)>>16),g((t&65280)>>8),g(t&255);2===u?(t=c(b.charAt(d))<<2|c(b.charAt(d+1))>>4,g(t&255)):1===u&&(t=c(b.charAt(d))<<10|c(b.charAt(d+1))<<4|c(b.charAt(d+2))>>2,g(t>>8&255),g(t&255));return n};b.fromByteArray=function(b){var c,f=b.length%3,h="",g,d;c=0;for(d=b.length-f;c<d;c+=3)g=(b[c]<<16)+(b[c+1]<<8)+b[c+
2],g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g&63),h+=g;switch(f){case 1:g=b[b.length-1];h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>2);h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g<<
4&63);h+="==";break;case 2:g=(b[b.length-2]<<8)+b[b.length-1],h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>10),h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>4&63),h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g<<2&63),h+="="}return h}})("undefined"===typeof d?this.base64js={}:d)},{}],3:[function(b,c,d){d.read=function(b,c,h,d,l){var m;m=8*l-d-1;var p=(1<<m)-1,t=p>>1,u=-7;l=h?l-1:0;var n=h?-1:1,q=b[c+
l];l+=n;h=q&(1<<-u)-1;q>>=-u;for(u+=m;0<u;h=256*h+b[c+l],l+=n,u-=8);m=h&(1<<-u)-1;h>>=-u;for(u+=d;0<u;m=256*m+b[c+l],l+=n,u-=8);if(0===h)h=1-t;else{if(h===p)return m?NaN:Infinity*(q?-1:1);m+=Math.pow(2,d);h-=t}return(q?-1:1)*m*Math.pow(2,h-d)};d.write=function(b,c,h,d,l,m){var p,t=8*m-l-1,u=(1<<t)-1,n=u>>1,q=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;m=d?0:m-1;var r=d?1:-1,w=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,d=u):(d=Math.floor(Math.log(c)/Math.LN2),1>c*(p=Math.pow(2,
-d))&&(d--,p*=2),c=1<=d+n?c+q/p:c+q*Math.pow(2,1-n),2<=c*p&&(d++,p/=2),d+n>=u?(c=0,d=u):1<=d+n?(c=(c*p-1)*Math.pow(2,l),d+=n):(c=c*Math.pow(2,n-1)*Math.pow(2,l),d=0));for(;8<=l;b[h+m]=c&255,m+=r,c/=256,l-=8);d=d<<l|c;for(t+=l;0<t;b[h+m]=d&255,m+=r,d/=256,t-=8);b[h+m-r]|=128*w}},{}],4:[function(b,c,d){var g={}.toString;c.exports=Array.isArray||function(b){return"[object Array]"==g.call(b)}},{}],5:[function(b,c,d){c.exports=b("./lib/heap")},{"./lib/heap":6}],6:[function(b,c,d){(function(){var b,f,h,
k,l,m,p,t,u,n,q,r,w,v,y;h=Math.floor;n=Math.min;f=function(b,c){return b<c?-1:b>c?1:0};u=function(b,c,g,d,k){var l;null==g&&(g=0);null==k&&(k=f);if(0>g)throw Error("lo must be non-negative");null==d&&(d=b.length);for(;g<d;)l=h((g+d)/2),0>k(c,b[l])?d=l:g=l+1;return[].splice.apply(b,[g,g-g].concat(c)),c};m=function(b,c,h){null==h&&(h=f);b.push(c);return v(b,0,b.length-1,h)};l=function(b,c){var h,g;null==c&&(c=f);h=b.pop();b.length?(g=b[0],b[0]=h,y(b,0,c)):g=h;return g};t=function(b,c,h){var g;null==
h&&(h=f);g=b[0];b[0]=c;y(b,0,h);return g};p=function(b,c,h){var g;null==h&&(h=f);b.length&&0>h(b[0],c)&&(g=[b[0],c],c=g[0],b[0]=g[1],y(b,0,h));return c};k=function(b,c){var g,d,k,l,m,n;null==c&&(c=f);l=function(){n=[];for(var c=0,f=h(b.length/2);0<=f?c<f:c>f;0<=f?c++:c--)n.push(c);return n}.apply(this).reverse();m=[];d=0;for(k=l.length;d<k;d++)g=l[d],m.push(y(b,g,c));return m};w=function(b,c,h){null==h&&(h=f);c=b.indexOf(c);if(-1!==c)return v(b,0,c,h),y(b,c,h)};q=function(b,c,h){var g,d,l;null==h&&
(h=f);g=b.slice(0,c);if(!g.length)return g;k(g,h);l=b.slice(c);c=0;for(d=l.length;c<d;c++)b=l[c],p(g,b,h);return g.sort(h).reverse()};r=function(b,c,h){var g,d,m,r;null==h&&(h=f);if(10*c<=b.length){d=b.slice(0,c).sort(h);if(!d.length)return d;g=d[d.length-1];r=b.slice(c);c=0;for(m=r.length;c<m;c++)b=r[c],0>h(b,g)&&(u(d,b,0,null,h),d.pop(),g=d[d.length-1]);return d}k(b,h);d=[];g=0;for(c=n(c,b.length);0<=c?g<c:g>c;0<=c?++g:--g)d.push(l(b,h));return d};v=function(b,c,h,g){var d,k,l;null==g&&(g=f);for(d=
b[h];h>c;)if(l=h-1>>1,k=b[l],0>g(d,k))b[h]=k,h=l;else break;return b[h]=d};y=function(b,c,h){var g,d,k,l,m;null==h&&(h=f);d=b.length;m=c;k=b[c];for(g=2*c+1;g<d;)l=g+1,l<d&&!(0>h(b[g],b[l]))&&(g=l),b[c]=b[g],c=g,g=2*c+1;b[c]=k;return v(b,m,c,h)};b=function(){function b(c){this.cmp=null!=c?c:f;this.nodes=[]}b.push=m;b.pop=l;b.replace=t;b.pushpop=p;b.heapify=k;b.updateItem=w;b.nlargest=q;b.nsmallest=r;b.prototype.push=function(b){return m(this.nodes,b,this.cmp)};b.prototype.pop=function(){return l(this.nodes,
this.cmp)};b.prototype.peek=function(){return this.nodes[0]};b.prototype.contains=function(b){return-1!==this.nodes.indexOf(b)};b.prototype.replace=function(b){return t(this.nodes,b,this.cmp)};b.prototype.pushpop=function(b){return p(this.nodes,b,this.cmp)};b.prototype.heapify=function(){return k(this.nodes,this.cmp)};b.prototype.updateItem=function(b){return w(this.nodes,b,this.cmp)};b.prototype.clear=function(){return this.nodes=[]};b.prototype.empty=function(){return 0===this.nodes.length};b.prototype.size=
function(){return this.nodes.length};b.prototype.clone=function(){var c;c=new b;c.nodes=this.nodes.slice(0);return c};b.prototype.toArray=function(){return this.nodes.slice(0)};b.prototype.insert=b.prototype.push;b.prototype.top=b.prototype.peek;b.prototype.front=b.prototype.peek;b.prototype.has=b.prototype.contains;b.prototype.copy=b.prototype.clone;return b}();(function(b,f){return"function"===typeof define&&define.amd?define([],f):"object"===typeof d?c.exports=f():b.Heap=f()})(this,function(){return b})}).call(this)},
{}],7:[function(b,c,d){(function(b){var c="undefined"===typeof d?function(){}:d;"undefined"!==typeof b&&(b.numeric=c);c.version="1.2.6";c.bench=function(b,c){var f,g,d;"undefined"===typeof c&&(c=15);d=.5;for(f=new Date;;){for(g=d*=2;3<g;g-=4)b(),b(),b(),b();for(;0<g;)b(),g--;g=new Date;if(g-f>c)break}for(g=d;3<g;g-=4)b(),b(),b(),b();for(;0<g;)b(),g--;g=new Date;return 1E3*(3*d-1)/(g-f)};c._myIndexOf=function(b){var c=this.length,f;for(f=0;f<c;++f)if(this[f]===b)return f;return-1};c.myIndexOf=Array.prototype.indexOf?
Array.prototype.indexOf:c._myIndexOf;c.Function=Function;c.precision=4;c.largeArray=50;c.prettyPrint=function(b){function g(b){if(0===b)return"0";if(isNaN(b))return"NaN";if(0>b)return"-"+g(-b);if(isFinite(b)){var h=Math.floor(Math.log(b)/Math.log(10));b/=Math.pow(10,h);b=b.toPrecision(c.precision);10===parseFloat(b)&&(h++,b=(1).toPrecision(c.precision));return parseFloat(b).toString()+"e"+h.toString()}return"Infinity"}function d(b){var h;if("undefined"===typeof b)return m.push(Array(c.precision+8).join(" ")),
!1;if("string"===typeof b)return m.push('"'+b+'"'),!1;if("boolean"===typeof b)return m.push(b.toString()),!1;if("number"===typeof b){var u=g(b);h=b.toPrecision(c.precision);b=parseFloat(b.toString()).toString();b=[u,h,b,parseFloat(h).toString(),parseFloat(b).toString()];for(h=1;h<b.length;h++)b[h].length<u.length&&(u=b[h]);m.push(Array(c.precision+8-u.length).join(" ")+u);return!1}if(null===b)return m.push("null"),!1;if("function"===typeof b){m.push(b.toString());u=!1;for(h in b)b.hasOwnProperty(h)&&
(u?m.push(",\n"):m.push("\n{"),u=!0,m.push(h),m.push(": \n"),d(b[h]));u&&m.push("}\n");return!0}if(b instanceof Array){if(b.length>c.largeArray)return m.push("...Large Array..."),!0;u=!1;m.push("[");for(h=0;h<b.length;h++)0<h&&(m.push(","),u&&m.push("\n ")),u=d(b[h]);m.push("]");return!0}m.push("{");u=!1;for(h in b)b.hasOwnProperty(h)&&(u&&m.push(",\n"),u=!0,m.push(h),m.push(": \n"),d(b[h]));m.push("}");return!0}var m=[];d(b);return m.join("")};c.parseDate=function(b){function c(b){if("string"===
typeof b)return Date.parse(b.replace(/-/g,"/"));if(!(b instanceof Array))throw Error("parseDate: parameter must be arrays of strings");var f=[],h;for(h=0;h<b.length;h++)f[h]=c(b[h]);return f}return c(b)};c.parseFloat=function(b){function c(b){if("string"===typeof b)return parseFloat(b);if(!(b instanceof Array))throw Error("parseFloat: parameter must be arrays of strings");var f=[],h;for(h=0;h<b.length;h++)f[h]=c(b[h]);return f}return c(b)};c.parseCSV=function(b){b=b.split("\n");var c,f,g=[],d=/(([^'",]*)|('[^']*')|("[^"]*")),/g,
t=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,u=0;for(f=0;f<b.length;f++){var n=(b[f]+",").match(d),q;if(0<n.length){g[u]=[];for(c=0;c<n.length;c++)q=n[c],q=q.substr(0,q.length-1),t.test(q)?g[u][c]=parseFloat(q):g[u][c]=q;u++}}return g};c.toCSV=function(b){var g,d,m,p,t;m=c.dim(b)[0];t=[];for(g=0;g<m;g++){p=[];for(d=0;d<m;d++)p[d]=b[g][d].toString();t[g]=p.join(", ")}return t.join("\n")+"\n"};c.getURL=function(b){var c=new XMLHttpRequest;c.open("GET",
b,!1);c.send();return c};c.imageURL=function(b){function c(b,f,h){"undefined"===typeof f&&(f=0);"undefined"===typeof h&&(h=b.length);for(var g=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,
3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,
476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,
3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,
1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,
1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],d=-1,k=0;f<h;f++)k=(d^b[f])&255,d=d>>>8^g[k];return d^-1}var f=b[0].length,g=b[0][0].length,d,t,u,n,q,r,w=[137,80,78,71,13,10,26,10,0,0,
0,13,73,72,68,82,g>>24&255,g>>16&255,g>>8&255,g&255,f>>24&255,f>>16&255,f>>8&255,f&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];d=c(w,12,29);w[29]=d>>24&255;w[30]=d>>16&255;w[31]=d>>8&255;w[32]=d&255;d=1;for(q=t=0;q<f;q++){q<f-1?w.push(0):w.push(1);n=3*g+1+(0===q)&255;u=3*g+1+(0===q)>>8&255;w.push(n);w.push(u);w.push(~n&255);w.push(~u&255);0===q&&w.push(0);for(r=0;r<g;r++)for(u=0;3>u;u++)n=b[u][q][r],n=255<n?255:0>n?0:Math.round(n),d=(d+n)%65521,t=(t+d)%65521,w.push(n);w.push(0)}b=(t<<
16)+d;w.push(b>>24&255);w.push(b>>16&255);w.push(b>>8&255);w.push(b&255);b=w.length-41;w[33]=b>>24&255;w[34]=b>>16&255;w[35]=b>>8&255;w[36]=b&255;d=c(w,37);w.push(d>>24&255);w.push(d>>16&255);w.push(d>>8&255);w.push(d&255);w.push(0);w.push(0);w.push(0);w.push(0);w.push(73);w.push(69);w.push(78);w.push(68);w.push(174);w.push(66);w.push(96);w.push(130);return"data:image/png;base64,"+function(b){var c=b.length,f,h,g,d,k,l="";for(f=0;f<c;f+=3)h=b[f],g=b[f+1],d=b[f+2],k=h>>2,h=((h&3)<<4)+(g>>4),g=((g&
15)<<2)+(d>>6),d&=63,f+1>=c?g=d=64:f+2>=c&&(d=64),l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d);return l}(w)};c._dim=function(b){for(var c=[];"object"===typeof b;)c.push(b.length),b=b[0];return c};c.dim=function(b){var g,d;return"object"===
typeof b?(g=b[0],"object"===typeof g?(d=g[0],"object"===typeof d?c._dim(b):[b.length,g.length]):[b.length]):[]};c.mapreduce=function(b,c){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+c+';\nif(typeof x === "number") { var xi = x; '+b+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+
b+";\n    xi = x[i-1];\n    "+b+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+b+"\n}\nreturn accum;")};c.mapreduce2=function(b,c){return Function("x","var n = x.length;\nvar i,xi;\n"+c+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+b+";\n}\nreturn accum;")};c.same=function k(b,c){var f,g;if(!(b instanceof Array&&c instanceof Array))return!1;g=b.length;if(g!==c.length)return!1;for(f=0;f<g;f++)if(b[f]!==c[f])if("object"===typeof b[f]){if(!k(b[f],c[f]))return!1}else return!1;return!0};c.rep=function(b,
g,d){"undefined"===typeof d&&(d=0);var p=b[d],t=Array(p);if(d===b.length-1){for(p-=2;0<=p;p-=2)t[p+1]=g,t[p]=g;-1===p&&(t[0]=g);return t}for(--p;0<=p;p--)t[p]=c.rep(b,g,d+1);return t};c.dotMMsmall=function(b,c){var f,g,d,u,n,q,r,w,v,y;f=b.length;u=c.length;n=c[0].length;q=Array(f);for(--f;0<=f;f--){r=Array(n);w=b[f];for(d=n-1;0<=d;d--){v=w[u-1]*c[u-1][d];for(g=u-2;1<=g;g-=2)y=g-1,v+=w[g]*c[g][d]+w[y]*c[y][d];0===g&&(v+=w[0]*c[0][d]);r[d]=v}q[f]=r}return q};c._getCol=function(b,c,f){var g;for(g=b.length-
1;0<g;--g)f[g]=b[g][c],--g,f[g]=b[g][c];0===g&&(f[0]=b[0][c])};c.dotMMbig=function(b,g){var d=c._getCol,p=Array(g.length),t=b.length,u=g[0].length,n=Array(t),q=c.dotVV,r,w;--t;for(r=t;-1!==r;--r)n[r]=Array(u);--u;for(r=u;-1!==r;--r)for(d(g,r,p),w=t;-1!==w;--w)u=b[w],n[w][r]=q(u,p);return n};c.dotMV=function(b,g){for(var d=b.length,p=Array(d),t=c.dotVV,d=d-1;0<=d;d--)p[d]=t(b[d],g);return p};c.dotVM=function(b,c){var f,g,d,u,n,q;d=b.length;f=c[0].length;u=Array(f);for(g=f-1;0<=g;g--){n=b[d-1]*c[d-
1][g];for(f=d-2;1<=f;f-=2)q=f-1,n+=b[f]*c[f][g]+b[q]*c[q][g];0===f&&(n+=b[0]*c[0][g]);u[g]=n}return u};c.dotVV=function(b,c){var f;f=b.length;var g,d=b[f-1]*c[f-1];for(f-=2;1<=f;f-=2)g=f-1,d+=b[f]*c[f]+b[g]*c[g];0===f&&(d+=b[0]*c[0]);return d};c.dot=function(b,g){var d=c.dim;switch(1E3*d(b).length+d(g).length){case 2002:return 10>g.length?c.dotMMsmall(b,g):c.dotMMbig(b,g);case 2001:return c.dotMV(b,g);case 1002:return c.dotVM(b,g);case 1001:return c.dotVV(b,g);case 1E3:return c.mulVS(b,g);case 1:return c.mulSV(b,
g);case 0:return b*g;default:throw Error("numeric.dot only works on vectors and matrices");}};c.diag=function(b){var c,f,g,d=b.length,u=Array(d),n;for(c=d-1;0<=c;c--){n=Array(d);f=c+2;for(g=d-1;g>=f;g-=2)n[g]=0,n[g-1]=0;g>c&&(n[g]=0);n[c]=b[c];for(g=c-1;1<=g;g-=2)n[g]=0,n[g-1]=0;0===g&&(n[0]=0);u[c]=n}return u};c.getDiag=function(b){for(var c=Math.min(b.length,b[0].length),f=Array(c),c=c-1;1<=c;--c)f[c]=b[c][c],--c,f[c]=b[c][c];0===c&&(f[0]=b[0][0]);return f};c.identity=function(b){return c.diag(c.rep([b],
1))};c.pointwise=function(b,c,f){"undefined"===typeof f&&(f="");var g=[],d,u=/\[i\]$/,n,q="",r=!1;for(d=0;d<b.length;d++)u.test(b[d])?q=n=b[d].substring(0,b[d].length-3):n=b[d],"ret"===n&&(r=!0),g.push(n);g[b.length]="_s";g[b.length+1]="_k";g[b.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+q+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(r?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+b.join(",")+",_s,_k+1);\n    return ret;\n}\n"+
f+"\nfor(i=_n-1;i!==-1;--i) {\n    "+c+"\n}\nreturn ret;";return Function.apply(null,g)};c.pointwise2=function(b,c,f){"undefined"===typeof f&&(f="");var g=[],d,u=/\[i\]$/,n,q="",r=!1;for(d=0;d<b.length;d++)u.test(b[d])?q=n=b[d].substring(0,b[d].length-3):n=b[d],"ret"===n&&(r=!0),g.push(n);g[b.length]="var _n = "+q+".length;\nvar i"+(r?"":", ret = Array(_n)")+";\n"+f+"\nfor(i=_n-1;i!==-1;--i) {\n"+c+"\n}\nreturn ret;";return Function.apply(null,g)};c._biforeach=function l(b,c,f,g,d){if(g===f.length-
1)d(b,c);else{var q;for(q=f[g]-1;0<=q;q--)l("object"===typeof b?b[q]:b,"object"===typeof c?c[q]:c,f,g+1,d)}};c._biforeach2=function m(b,c,f,g,d){if(g===f.length-1)return d(b,c);var r;r=f[g];var w=Array(r);for(--r;0<=r;--r)w[r]=m("object"===typeof b?b[r]:b,"object"===typeof c?c[r]:c,f,g+1,d);return w};c._foreach=function p(b,c,f,g){if(f===c.length-1)g(b);else{var d;for(d=c[f]-1;0<=d;d--)p(b[d],c,f+1,g)}};c._foreach2=function t(b,c,f,g){if(f===c.length-1)return g(b);var d;d=c[f];var v=Array(d);for(--d;0<=
d;d--)v[d]=t(b[d],c,f+1,g);return v};c.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};c.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="};c.mathfuns="abs acos asin atan ceil cos exp floor log round sin sqrt tan isNaN isFinite".split(" ");c.mathfuns2=["atan2","pow","max","min"];
c.ops1={neg:"-",not:"!",bnot:"~",clone:""};c.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],
inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]};(function(){var b,g;for(b=0;b<c.mathfuns2.length;++b)g=c.mathfuns2[b],c.ops2[g]=g;for(b in c.ops2)if(c.ops2.hasOwnProperty(b)){g=c.ops2[b];var d,q,r="";-1!==c.myIndexOf.call(c.mathfuns2,b)?(r="var "+g+" = Math."+g+";\n",d=function(b,c,f){return b+" = "+g+"("+c+","+f+")"},q=function(b,c){return b+" = "+g+"("+b+","+c+")"}):(d=function(b,c,f){return b+" = "+c+" "+g+" "+f},q=c.opseq.hasOwnProperty(b+"eq")?function(b,c){return b+" "+
g+"= "+c}:function(b,c){return b+" = "+b+" "+g+" "+c});c[b+"VV"]=c.pointwise2(["x[i]","y[i]"],d("ret[i]","x[i]","y[i]"),r);c[b+"SV"]=c.pointwise2(["x","y[i]"],d("ret[i]","x","y[i]"),r);c[b+"VS"]=c.pointwise2(["x[i]","y"],d("ret[i]","x[i]","y"),r);c[b]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+b+"VV, VS = numeric."+b+"VS, SV = numeric."+b+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+
q("x","y")+"\n}\nreturn x;\n");c[g]=c[b];c[b+"eqV"]=c.pointwise2(["ret[i]","x[i]"],q("ret[i]","x[i]"),r);c[b+"eqS"]=c.pointwise2(["ret[i]","x"],q("ret[i]","x"),r);c[b+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+b+"eqV, S = numeric."+b+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(b=0;b<c.mathfuns2.length;++b)g=
c.mathfuns2[b],delete c.ops2[g];for(b=0;b<c.mathfuns.length;++b)g=c.mathfuns[b],c.ops1[g]=g;for(b in c.ops1)c.ops1.hasOwnProperty(b)&&(r="",g=c.ops1[b],-1!==c.myIndexOf.call(c.mathfuns,b)&&Math.hasOwnProperty(g)&&(r="var "+g+" = Math."+g+";\n"),c[b+"eqV"]=c.pointwise2(["ret[i]"],"ret[i] = "+g+"(ret[i]);",r),c[b+"eq"]=Function("x",'if(typeof x !== "object") return '+g+"x\nvar i;\nvar V = numeric."+b+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),c[b+"V"]=c.pointwise2(["x[i]"],
"ret[i] = "+g+"(x[i]);",r),c[b]=Function("x",'if(typeof x !== "object") return '+g+"(x)\nvar i;\nvar V = numeric."+b+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(b=0;b<c.mathfuns.length;++b)g=c.mathfuns[b],delete c.ops1[g];for(b in c.mapreducers)c.mapreducers.hasOwnProperty(b)&&(g=c.mapreducers[b],c[b+"V"]=c.mapreduce2(g[0],g[1]),c[b]=Function("x","s","k",g[1]+'if(typeof x !== "object") {    xi = x;\n'+g[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+
b+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+g[0]+";\n}\nreturn accum;\n"))})();c.truncVV=c.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;");c.truncVS=c.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;");c.truncSV=c.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;");c.trunc=function(b,g){return"object"===typeof b?"object"===typeof g?c.truncVV(b,g):
c.truncVS(b,g):"object"===typeof g?c.truncSV(b,g):Math.round(b/g)*g};c.inv=function(b){var g=c.dim(b),d=Math.abs,q=g[0],g=g[1],r=c.clone(b),w,v,y=c.identity(q),A,x,z,C,D;for(C=0;C<g;++C){v=b=-1;for(z=C;z!==q;++z)D=d(r[z][C]),D>v&&(b=z,v=D);v=r[b];r[b]=r[C];r[C]=v;x=y[b];y[b]=y[C];y[C]=x;b=v[C];for(D=C;D!==g;++D)v[D]/=b;for(D=g-1;-1!==D;--D)x[D]/=b;for(z=q-1;-1!==z;--z)if(z!==C){w=r[z];A=y[z];b=w[C];for(D=C+1;D!==g;++D)w[D]-=v[D]*b;for(D=g-1;0<D;--D)A[D]-=x[D]*b,--D,A[D]-=x[D]*b;0===D&&(A[0]-=x[0]*
b)}}return y};c.det=function(b){var g=c.dim(b);if(2!==g.length||g[0]!==g[1])throw Error("numeric: det() only works on square matrices");var g=g[0],d=1,q,r,w=c.clone(b),v,y,A,x;for(b=0;b<g-1;b++){r=b;for(q=b+1;q<g;q++)Math.abs(w[q][b])>Math.abs(w[r][b])&&(r=q);r!==b&&(q=w[r],w[r]=w[b],w[b]=q,d*=-1);v=w[b];for(q=b+1;q<g;q++){y=w[q];A=y[b]/v[b];for(r=b+1;r<g-1;r+=2)x=r+1,y[r]-=v[r]*A,y[x]-=v[x]*A;r!==g&&(y[r]-=v[r]*A)}if(0===v[b])return 0;d*=v[b]}return d*w[b][b]};c.transpose=function(b){var c,f;c=b.length;
var g=b[0].length,d=Array(g),w,v,y;for(f=0;f<g;f++)d[f]=Array(c);for(--c;1<=c;c-=2){v=b[c];w=b[c-1];for(f=g-1;1<=f;--f)y=d[f],y[c]=v[f],y[c-1]=w[f],--f,y=d[f],y[c]=v[f],y[c-1]=w[f];0===f&&(y=d[0],y[c]=v[0],y[c-1]=w[0])}if(0===c){w=b[0];for(f=g-1;1<=f;--f)d[f][0]=w[f],--f,d[f][0]=w[f];0===f&&(d[0][0]=w[0])}return d};c.negtranspose=function(b){var c,f;c=b.length;var g=b[0].length,d=Array(g),w,v,y;for(f=0;f<g;f++)d[f]=Array(c);for(--c;1<=c;c-=2){v=b[c];w=b[c-1];for(f=g-1;1<=f;--f)y=d[f],y[c]=-v[f],y[c-
1]=-w[f],--f,y=d[f],y[c]=-v[f],y[c-1]=-w[f];0===f&&(y=d[0],y[c]=-v[0],y[c-1]=-w[0])}if(0===c){w=b[0];for(f=g-1;1<=f;--f)d[f][0]=-w[f],--f,d[f][0]=-w[f];0===f&&(d[0][0]=-w[0])}return d};c._random=function u(b,c){var f;f=b[c];var g=Array(f),d;if(c===b.length-1){d=Math.random;for(--f;1<=f;f-=2)g[f]=d(),g[f-1]=d();0===f&&(g[0]=d());return g}for(--f;0<=f;f--)g[f]=u(b,c+1);return g};c.random=function(b){return c._random(b,0)};c.norm2=function(b){return Math.sqrt(c.norm2Squared(b))};c.linspace=function(b,
c,f){"undefined"===typeof f&&(f=Math.max(Math.round(c-b)+1,1));if(2>f)return 1===f?[b]:[];var g,d=Array(f);f--;for(g=f;0<=g;g--)d[g]=(g*c+(f-g)*b)/f;return d};c.getBlock=function(b,g,d){function r(b,c){var f,u=g[c];f=d[c]-u;var z=Array(f);if(c===w.length-1){for(;0<=f;f--)z[f]=b[f+u];return z}for(;0<=f;f--)z[f]=r(b[f+u],c+1);return z}var w=c.dim(b);return r(b,0)};c.setBlock=function(b,g,d,r){function w(b,c,f){var r,u=g[f],D=d[f]-u;if(f===v.length-1)for(r=D;0<=r;r--)b[r+u]=c[r];for(r=D;0<=r;r--)w(b[r+
u],c[r],f+1)}var v=c.dim(b);w(b,r,0);return b};c.getRange=function(b,c,f){for(var g=c.length,d=f.length,v,y=Array(g),A,x,g=g-1;-1!==g;--g)for(y[g]=Array(d),A=y[g],x=b[c[g]],v=d-1;-1!==v;--v)A[v]=x[f[v]];return y};c.blockMatrix=function(b){var g=c.dim(b);if(4>g.length)return c.blockMatrix([b]);var d=g[0],g=g[1],r,w,v,y;for(v=w=r=0;v<d;++v)r+=b[v][0].length;for(y=0;y<g;++y)w+=b[0][y][0].length;var A=Array(r);for(v=0;v<r;++v)A[v]=Array(w);var x=0,z,C,D,B,F;for(v=0;v<d;++v){z=w;for(y=g-1;-1!==y;--y)for(r=
b[v][y],z-=r[0].length,D=r.length-1;-1!==D;--D)for(F=r[D],C=A[x+D],B=F.length-1;-1!==B;--B)C[z+B]=F[B];x+=b[v][0].length}return A};c.tensor=function(b,g){if("number"===typeof b||"number"===typeof g)return c.mul(b,g);var d=c.dim(b),r=c.dim(g);if(1!==d.length||1!==r.length)throw Error("numeric: tensor product is only defined for vectors");var w=d[0],r=r[0],d=Array(w),v,y,A;for(v=w-1;0<=v;v--){w=Array(r);A=b[v];for(y=r-1;3<=y;--y)w[y]=A*g[y],--y,w[y]=A*g[y],--y,w[y]=A*g[y],--y,w[y]=A*g[y];for(;0<=y;)w[y]=
A*g[y],--y;d[v]=w}return d};c.T=function(b,c){this.x=b;this.y=c};c.t=function(b,g){return new c.T(b,g)};c.Tbinop=function(b,g,d,r,w){if("string"!==typeof w){var v;w="";for(v in c)c.hasOwnProperty(v)&&(0<=b.indexOf(v)||0<=g.indexOf(v)||0<=d.indexOf(v)||0<=r.indexOf(v))&&1<v.length&&(w+="var "+v+" = numeric."+v+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+w+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+
d+");\n}\nif(y.y) {\n  return new numeric.T("+g+");\n}\nreturn new numeric.T("+b+");\n")};c.T.prototype.add=c.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");c.T.prototype.sub=c.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");c.T.prototype.mul=c.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");c.T.prototype.reciprocal=
function(){var b=c.mul,g=c.div;return this.y?(b=c.add(b(this.x,this.x),b(this.y,this.y)),new c.T(g(this.x,b),g(c.neg(this.y),b))):new T(g(1,this.x))};c.T.prototype.div=function(b){b instanceof c.T||(b=new c.T(b));if(b.y)return this.mul(b.reciprocal());var g=c.div;return this.y?new c.T(g(this.x,b.x),g(this.y,b.x)):new c.T(g(this.x,b.x))};c.T.prototype.dot=c.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");
c.T.prototype.transpose=function(){var b=c.transpose,g=this.x,d=this.y;return d?new c.T(b(g),b(d)):new c.T(b(g))};c.T.prototype.transjugate=function(){var b=c.transpose,g=this.x,d=this.y;return d?new c.T(b(g),c.negtranspose(d)):new c.T(b(g))};c.Tunop=function(b,c,f){"string"!==typeof f&&(f="");return Function("var x = this;\n"+f+"\nif(x.y) {  "+c+";\n}\n"+b+";\n")};c.T.prototype.exp=c.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;");
c.T.prototype.conj=c.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");c.T.prototype.neg=c.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;");c.T.prototype.sin=c.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");c.T.prototype.cos=c.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");c.T.prototype.abs=c.Tunop("return new numeric.T(numeric.abs(x.x));",
"return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;");c.T.prototype.log=c.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);");c.T.prototype.norm2=c.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));");c.T.prototype.inv=function(){if("undefined"===typeof this.y)return new c.T(c.inv(this.x));
var b=this.x.length,g,d,r,w=c.identity(b),v=c.rep([b,b],0),y=c.clone(this.x),A=c.clone(this.y),x,z,C,D,B,F,H,I,G,M,J,K;for(g=0;g<b;g++){G=y[g][g];M=A[g][g];C=G*G+M*M;r=g;for(d=g+1;d<b;d++)G=y[d][g],M=A[d][g],x=G*G+M*M,x>C&&(r=d,C=x);r!==g&&(d=y[g],y[g]=y[r],y[r]=d,d=A[g],A[g]=A[r],A[r]=d,d=w[g],w[g]=w[r],w[r]=d,d=v[g],v[g]=v[r],v[r]=d);x=y[g];z=A[g];B=w[g];F=v[g];G=x[g];M=z[g];for(d=g+1;d<b;d++)J=x[d],K=z[d],x[d]=(J*G+K*M)/C,z[d]=(K*G-J*M)/C;for(d=0;d<b;d++)J=B[d],K=F[d],B[d]=(J*G+K*M)/C,F[d]=(K*
G-J*M)/C;for(d=g+1;d<b;d++){C=y[d];D=A[d];H=w[d];I=v[d];G=C[g];M=D[g];for(r=g+1;r<b;r++)J=x[r],K=z[r],C[r]-=J*G-K*M,D[r]-=K*G+J*M;for(r=0;r<b;r++)J=B[r],K=F[r],H[r]-=J*G-K*M,I[r]-=K*G+J*M}}for(g=b-1;0<g;g--)for(B=w[g],F=v[g],d=g-1;0<=d;d--)for(H=w[d],I=v[d],G=y[d][g],M=A[d][g],r=b-1;0<=r;r--)J=B[r],K=F[r],H[r]-=G*J-M*K,I[r]-=G*K+M*J;return new c.T(w,v)};c.T.prototype.get=function(b){var g=this.x,d=this.y,r=0,w,v=b.length;if(d){for(;r<v;)w=b[r],g=g[w],d=d[w],r++;return new c.T(g,d)}for(;r<v;)w=b[r],
g=g[w],r++;return new c.T(g)};c.T.prototype.set=function(b,g){var d=this.x,r=this.y,w=0,v,y=b.length,A=g.x,x=g.y;if(0===y)return x?this.y=x:r&&(this.y=void 0),this.x=d,this;if(x){r||(this.y=r=c.rep(c.dim(d),0));for(;w<y-1;)v=b[w],d=d[v],r=r[v],w++;v=b[w];d[v]=A;r[v]=x;return this}if(r){for(;w<y-1;)v=b[w],d=d[v],r=r[v],w++;v=b[w];d[v]=A;r[v]=A instanceof Array?c.rep(c.dim(A),0):0;return this}for(;w<y-1;)v=b[w],d=d[v],w++;v=b[w];d[v]=A;return this};c.T.prototype.getRows=function(b,g){var d=g-b+1,r,
w=Array(d),v=this.x,y=this.y;for(r=b;r<=g;r++)w[r-b]=v[r];if(y){d=Array(d);for(r=b;r<=g;r++)d[r-b]=y[r];return new c.T(w,d)}return new c.T(w)};c.T.prototype.setRows=function(b,g,d){var r=this.x,w=this.y,v=d.x,y=d.y;for(d=b;d<=g;d++)r[d]=v[d-b];if(y)for(w||(this.y=w=c.rep(c.dim(r),0)),d=b;d<=g;d++)w[d]=y[d-b];else if(w)for(d=b;d<=g;d++)w[d]=c.rep([v[d-b].length],0);return this};c.T.prototype.getRow=function(b){var g=this.x,d=this.y;return d?new c.T(g[b],d[b]):new c.T(g[b])};c.T.prototype.setRow=function(b,
g){var d=this.x,r=this.y,w=g.x,v=g.y;d[b]=w;v?(r||(this.y=r=c.rep(c.dim(d),0)),r[b]=v):r&&c.rep([w.length],0);return this};c.T.prototype.getBlock=function(b,g){var d=this.x,r=this.y,w=c.getBlock;return r?new c.T(w(d,b,g),w(r,b,g)):new c.T(w(d,b,g))};c.T.prototype.setBlock=function(b,g,d){d instanceof c.T||(d=new c.T(d));var r=this.x,w=this.y,v=c.setBlock,y=d.x;if(d=d.y)return w||(w=this.y=c.rep(c.dim(this),0)),v(r,b,g,y),v(w,b,g,d),this;v(r,b,g,y);w&&v(w,b,g,c.rep(c.dim(y),0))};c.T.rep=function(b,
g){var d=c.T;g instanceof d||(g=new d(g));var r=g.x,w=g.y,v=c.rep;return w?new d(v(b,r),v(b,w)):new d(v(b,r))};c.T.diag=function(b){b instanceof c.T||(b=new c.T(b));var g=b.x;b=b.y;var d=c.diag;return b?new c.T(d(g),d(b)):new c.T(d(g))};c.T.eig=function(){if(this.y)throw Error("eig: not implemented for complex matrices.");return c.eig(this.x)};c.T.identity=function(b){return new c.T(c.identity(b))};c.T.prototype.getDiag=function(){var b=this.x,g=this.y;return g?new c.T(c.getDiag(b),c.getDiag(g)):
new c.T(c.getDiag(b))};c.house=function(b){var g=c.clone(b);b=(0<=b[0]?1:-1)*c.norm2(b);g[0]+=b;b=c.norm2(g);if(0===b)throw Error("eig: internal error");return c.div(g,b)};c.toUpperHessenberg=function(b){var g=c.dim(b);if(2!==g.length||g[0]!==g[1])throw Error("numeric: toUpperHessenberg() only works on square matrices");var g=g[0],d,r,w,v=c.clone(b),y,A,x,z=c.identity(g);for(d=0;d<g-2;d++){r=Array(g-d-1);for(b=d+1;b<g;b++)r[b-d-1]=v[b][d];if(0<c.norm2(r)){w=c.house(r);r=c.getBlock(v,[d+1,d],[g-1,
g-1]);y=c.tensor(w,c.dot(w,r));for(b=d+1;b<g;b++)for(A=v[b],x=y[b-d-1],r=d;r<g;r++)A[r]-=2*x[r-d];r=c.getBlock(v,[0,d+1],[g-1,g-1]);y=c.tensor(c.dot(r,w),w);for(b=0;b<g;b++)for(A=v[b],x=y[b],r=d+1;r<g;r++)A[r]-=2*x[r-d-1];r=Array(g-d-1);for(b=d+1;b<g;b++)r[b-d-1]=z[b];y=c.tensor(w,c.dot(w,r));for(b=d+1;b<g;b++)for(w=z[b],x=y[b-d-1],r=0;r<g;r++)w[r]-=2*x[r]}}return{H:v,Q:z}};c.epsilon=2.220446049250313E-16;c.QRFrancis=function(b,g){"undefined"===typeof g&&(g=1E4);b=c.clone(b);c.clone(b);var d=c.dim(b)[0],
r,w,v,y,A,x,z=c.identity(d),C,D,B;if(3>d)return{Q:z,B:[[0,d-1]]};var F=c.epsilon;for(B=0;B<g;B++){for(v=0;v<d-1;v++)if(Math.abs(b[v+1][v])<F*(Math.abs(b[v][v])+Math.abs(b[v+1][v+1]))){B=c.QRFrancis(c.getBlock(b,[0,0],[v,v]),g);F=c.QRFrancis(c.getBlock(b,[v+1,v+1],[d-1,d-1]),g);y=Array(v+1);for(x=0;x<=v;x++)y[x]=z[x];y=c.dot(B.Q,y);for(x=0;x<=v;x++)z[x]=y[x];y=Array(d-v-1);for(x=v+1;x<d;x++)y[x-v-1]=z[x];y=c.dot(F.Q,y);for(x=v+1;x<d;x++)z[x]=y[x-v-1];return{Q:z,B:B.B.concat(c.add(F.B,v+1))}}v=b[d-
2][d-2];r=b[d-2][d-1];y=b[d-1][d-2];A=b[d-1][d-1];x=v+A;y=v*A-r*y;v=c.getBlock(b,[0,0],[2,2]);x*x>=4*y?(r=.5*(x+Math.sqrt(x*x-4*y)),x=.5*(x-Math.sqrt(x*x-4*y)),v=c.add(c.sub(c.dot(v,v),c.mul(v,r+x)),c.diag(c.rep([3],r*x)))):v=c.add(c.sub(c.dot(v,v),c.mul(v,x)),c.diag(c.rep([3],y)));r=[v[0][0],v[1][0],v[2][0]];w=c.house(r);y=[b[0],b[1],b[2]];y=c.tensor(w,c.dot(w,y));for(x=0;3>x;x++)for(C=b[x],D=y[x],r=0;r<d;r++)C[r]-=2*D[r];y=c.getBlock(b,[0,0],[d-1,2]);y=c.tensor(c.dot(y,w),w);for(x=0;x<d;x++)for(C=
b[x],D=y[x],r=0;3>r;r++)C[r]-=2*D[r];y=[z[0],z[1],z[2]];y=c.tensor(w,c.dot(w,y));for(x=0;3>x;x++)for(w=z[x],D=y[x],r=0;r<d;r++)w[r]-=2*D[r];for(v=0;v<d-2;v++){for(r=v;r<=v+1;r++)if(Math.abs(b[r+1][r])<F*(Math.abs(b[r][r])+Math.abs(b[r+1][r+1]))){B=c.QRFrancis(c.getBlock(b,[0,0],[r,r]),g);F=c.QRFrancis(c.getBlock(b,[r+1,r+1],[d-1,d-1]),g);y=Array(r+1);for(x=0;x<=r;x++)y[x]=z[x];y=c.dot(B.Q,y);for(x=0;x<=r;x++)z[x]=y[x];y=Array(d-r-1);for(x=r+1;x<d;x++)y[x-r-1]=z[x];y=c.dot(F.Q,y);for(x=r+1;x<d;x++)z[x]=
y[x-r-1];return{Q:z,B:B.B.concat(c.add(F.B,r+1))}}A=Math.min(d-1,v+3);r=Array(A-v);for(x=v+1;x<=A;x++)r[x-v-1]=b[x][v];w=c.house(r);y=c.getBlock(b,[v+1,v],[A,d-1]);y=c.tensor(w,c.dot(w,y));for(x=v+1;x<=A;x++)for(C=b[x],D=y[x-v-1],r=v;r<d;r++)C[r]-=2*D[r-v];y=c.getBlock(b,[0,v+1],[d-1,A]);y=c.tensor(c.dot(y,w),w);for(x=0;x<d;x++)for(C=b[x],D=y[x],r=v+1;r<=A;r++)C[r]-=2*D[r-v-1];y=Array(A-v);for(x=v+1;x<=A;x++)y[x-v-1]=z[x];y=c.tensor(w,c.dot(w,y));for(x=v+1;x<=A;x++)for(w=z[x],D=y[x-v-1],r=0;r<d;r++)w[r]-=
2*D[r]}}throw Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");};c.eig=function(b,g){for(var d=c.toUpperHessenberg(b),r=c.QRFrancis(d.H,g),w=c.T,v=b.length,y,v=r.B,A=c.dot(r.Q,c.dot(d.H,c.transpose(r.Q))),r=new w(c.dot(r.Q,d.Q)),x,z=v.length,C,D,B,F,H,I,G,M,J=Math.sqrt,d=0;d<z;d++)if(y=v[d][0],y!==v[d][1]&&(C=y+1,D=A[y][y],B=A[y][C],F=A[C][y],H=A[C][C],0!==B||0!==F))x=-D-H,I=D*H-B*F,I=x*x-4*I,0<=I?(x=0>x?-.5*(x-J(I)):-.5*(x+J(I)),G=(D-x)*(D-x)+B*B,M=F*F+(H-x)*(H-x),G>
M?(G=J(G),D=(D-x)/G,B/=G):(M=J(M),D=F/M,B=(H-x)/M),x=new w([[B,-D],[D,B]])):(x*=-.5,I=.5*J(-I),G=(D-x)*(D-x)+B*B,M=F*F+(H-x)*(H-x),G>M?(G=J(G+I*I),D=(D-x)/G,B/=G,x=0,I/=G):(M=J(M+I*I),D=F/M,B=(H-x)/M,x=I/M,I=0),x=new w([[B,-D],[D,B]],[[x,I],[I,-x]])),r.setRows(y,C,x.dot(r.getRows(y,C)));w=r.dot(b).dot(r.transjugate());v=b.length;A=c.T.identity(v);for(C=0;C<v;C++)if(0<C)for(d=C-1;0<=d;d--)y=w.get([d,d]),z=w.get([C,C]),c.neq(y.x,z.x)||c.neq(y.y,z.y)?(x=w.getRow(d).getBlock([d],[C-1]),I=A.getRow(C).getBlock([d],
[C-1]),A.set([C,d],w.get([d,C]).neg().sub(x.dot(I)).div(y.sub(z)))):A.setRow(C,A.getRow(d));for(C=0;C<v;C++)x=A.getRow(C),A.setRow(C,x.div(x.norm2()));A=A.transpose();A=r.transjugate().dot(A);return{lambda:w.getDiag(),E:A}};c.ccsSparse=function(b){var c=b.length,f,g,d,v=[];for(g=c-1;-1!==g;--g)for(d in f=b[g],f){for(d=parseInt(d);d>=v.length;)v[v.length]=0;0!==f[d]&&v[d]++}f=v.length;var y=Array(f+1);for(g=y[0]=0;g<f;++g)y[g+1]=y[g]+v[g];var A=Array(y[f]),x=Array(y[f]);for(g=c-1;-1!==g;--g)for(d in f=
b[g],f)0!==f[d]&&(v[d]--,A[y[d]+v[d]]=g,x[y[d]+v[d]]=f[d]);return[y,A,x]};c.ccsFull=function(b){var g=b[0],d=b[1],r=b[2],w=c.ccsDim(b);b=w[1];for(var v,y,A=c.rep([w[0],b],0),w=0;w<b;w++)for(v=g[w],y=g[w+1];v<y;++v)A[d[v]][w]=r[v];return A};c.ccsTSolve=function(b,g,d,r,w){function v(b){var c;if(0===d[b]){d[b]=1;for(c=y[b];c<y[b+1];++c)v(A[c]);w[C]=b;++C}}var y=b[0],A=b[1];b=b[2];var x=y.length-1,z=Math.max,C=0;"undefined"===typeof r&&(d=c.rep([x],0));"undefined"===typeof r&&(r=c.linspace(0,d.length-
1));"undefined"===typeof w&&(w=[]);for(var D,B,F,x=r.length-1;-1!==x;--x)v(r[x]);w.length=C;for(x=w.length-1;-1!==x;--x)d[w[x]]=0;for(x=r.length-1;-1!==x;--x)D=r[x],d[D]=g[D];for(x=w.length-1;-1!==x;--x){D=w[x];B=y[D];g=z(y[D+1],B);for(r=B;r!==g;++r)if(A[r]===D){d[D]/=b[r];break}F=d[D];for(r=B;r!==g;++r)B=A[r],B!==D&&(d[B]-=F*b[r])}return d};c.ccsDFS=function(b){this.k=Array(b);this.k1=Array(b);this.j=Array(b)};c.ccsDFS.prototype.dfs=function(b,c,f,g,d,v){var y=0,A=d.length,x=this.k,z=this.k1,C=this.j,
D,B;if(0===g[b])for(g[b]=1,C[0]=b,x[0]=D=c[b],z[0]=B=c[b+1];;)if(D>=B){d[A]=C[y];if(0===y)break;++A;--y;D=x[y];B=z[y]}else b=v[f[D]],0===g[b]?(g[b]=1,x[y]=D,++y,C[y]=b,D=c[b],z[y]=B=c[b+1]):++D};c.ccsLPSolve=function(b,c,f,g,d,v,y){var A=b[0],x=b[1];b=b[2];var z=c[0],C=c[1];c=c[2];var D;D=z[d];z=z[d+1];g.length=0;for(d=D;d<z;++d)y.dfs(v[C[d]],A,x,f,g,v);for(d=g.length-1;-1!==d;--d)f[g[d]]=0;for(d=D;d!==z;++d)y=v[C[d]],f[y]=c[d];for(d=g.length-1;-1!==d;--d){y=g[d];z=A[y];C=A[y+1];for(c=z;c<C;++c)if(v[x[c]]===
y){f[y]/=b[c];break}D=f[y];for(c=z;c<C;++c)z=v[x[c]],z!==y&&(f[z]-=D*b[c])}return f};c.ccsLUP1=function(b,g){var d=b[0].length-1,r=[c.rep([d+1],0),[],[]],w=[c.rep([d+1],0),[],[]],v=r[0],y=r[1],A=r[2],x=w[0],z=w[1],C=w[2],D=c.rep([d],0),B=c.rep([d],0),F,H,I,G,M,J,K,L=c.ccsLPSolve,N=Math.abs,Q=c.linspace(0,d-1),S=c.linspace(0,d-1),U=new c.ccsDFS(d);"undefined"===typeof g&&(g=1);for(F=0;F<d;++F){L(r,b,D,B,F,S,U);M=G=-1;for(H=B.length-1;-1!==H;--H)I=B[H],I<=F||(J=N(D[I]),J>G&&(M=I,G=J));N(D[F])<g*G&&
(H=Q[F],G=Q[M],Q[F]=G,S[G]=F,Q[M]=H,S[H]=M,G=D[F],D[F]=D[M],D[M]=G);G=v[F];M=x[F];K=D[F];y[G]=Q[F];A[G]=1;++G;for(H=B.length-1;-1!==H;--H)I=B[H],J=D[I],B[H]=0,D[I]=0,I<=F?(z[M]=I,C[M]=J,++M):(y[G]=Q[I],A[G]=J/K,++G);v[F+1]=G;x[F+1]=M}for(H=y.length-1;-1!==H;--H)y[H]=S[y[H]];return{L:r,U:w,P:Q,Pinv:S}};c.ccsDFS0=function(b){this.k=Array(b);this.k1=Array(b);this.j=Array(b)};c.ccsDFS0.prototype.dfs=function(b,c,f,g,d,v,y){y=0;var A=d.length,x=this.k,z=this.k1,C=this.j,D,B;if(0===g[b])for(g[b]=1,C[0]=
b,x[0]=D=c[v[b]],z[0]=B=c[v[b]+1];;){if(isNaN(D))throw Error("Ow!");if(D>=B){d[A]=v[C[y]];if(0===y)break;++A;--y;D=x[y];B=z[y]}else b=f[D],0===g[b]?(g[b]=1,x[y]=D,++y,C[y]=b,b=v[b],D=c[b],z[y]=B=c[b+1]):++D}};c.ccsLPSolve0=function(b,c,f,g,d,v,y,A){var x=b[0],z=b[1];b=b[2];var C=c[0],D=c[1];c=c[2];var B;B=C[d];C=C[d+1];g.length=0;for(d=B;d<C;++d)A.dfs(D[d],x,z,f,g,v,y);for(d=g.length-1;-1!==d;--d)v=g[d],f[y[v]]=0;for(d=B;d!==C;++d)v=D[d],f[v]=c[d];for(d=g.length-1;-1!==d;--d){v=g[d];D=y[v];A=x[v];
v=x[v+1];for(c=A;c<v;++c)if(z[c]===D){f[D]/=b[c];break}B=f[D];for(c=A;c<v;++c)f[z[c]]-=B*b[c];f[D]=B}};c.ccsLUP0=function(b,g){var d=b[0].length-1,r=[c.rep([d+1],0),[],[]],w=[c.rep([d+1],0),[],[]],v=r[0],y=r[1],A=r[2],x=w[0],z=w[1],C=w[2],D=c.rep([d],0),B=c.rep([d],0),F,H,I,G,M,J,K,L=c.ccsLPSolve0,N=Math.abs,Q=c.linspace(0,d-1),S=c.linspace(0,d-1),U=new c.ccsDFS0(d);"undefined"===typeof g&&(g=1);for(F=0;F<d;++F){L(r,b,D,B,F,S,Q,U);M=G=-1;for(H=B.length-1;-1!==H;--H)I=B[H],I<=F||(J=N(D[Q[I]]),J>G&&
(M=I,G=J));N(D[Q[F]])<g*G&&(H=Q[F],G=Q[M],Q[F]=G,S[G]=F,Q[M]=H,S[H]=M);G=v[F];M=x[F];K=D[Q[F]];y[G]=Q[F];A[G]=1;++G;for(H=B.length-1;-1!==H;--H)I=B[H],J=D[Q[I]],B[H]=0,D[Q[I]]=0,I<=F?(z[M]=I,C[M]=J,++M):(y[G]=Q[I],A[G]=J/K,++G);v[F+1]=G;x[F+1]=M}for(H=y.length-1;-1!==H;--H)y[H]=S[y[H]];return{L:r,U:w,P:Q,Pinv:S}};c.ccsLUP=c.ccsLUP0;c.ccsDim=function(b){return[c.sup(b[1])+1,b[0].length-1]};c.ccsGetBlock=function(b,g,d){var r=c.ccsDim(b),w=r[0],v=r[1];"undefined"===typeof g?g=c.linspace(0,w-1):"number"===
typeof g&&(g=[g]);"undefined"===typeof d?d=c.linspace(0,v-1):"number"===typeof d&&(d=[d]);var y,r=g.length,A=d.length,x,v=c.rep([v],0),z=[],C=[],D=[v,z,C],B=b[0],F=b[1];b=b[2];for(var H=c.rep([w],0),I=0,G=c.rep([w],0),w=0;w<A;++w){y=d[w];var M=B[y],J=B[y+1];for(y=M;y<J;++y)x=F[y],G[x]=1,H[x]=b[y];for(y=0;y<r;++y)x=g[y],G[x]&&(z[I]=y,C[I]=H[g[y]],++I);for(y=M;y<J;++y)x=F[y],G[x]=0;v[w+1]=I}return D};c.ccsDot=function(b,g){var d=b[0],r=b[1],w=b[2],v=g[0],y=g[1],A=g[2],x=c.ccsDim(b),z=c.ccsDim(g),C=
x[0],z=z[1],x=c.rep([C],0),D=c.rep([C],0),C=Array(C),B=c.rep([z],0),F=[],H=[],I=[B,F,H],G,M,J,K,L,N,Q,S;for(J=0;J!==z;++J){K=v[J];L=v[J+1];Q=0;for(M=K;M<L;++M)for(K=y[M],S=A[M],G=d[K],K=d[K+1];G<K;++G)N=r[G],0===D[N]&&(C[Q]=N,D[N]=1,Q+=1),x[N]+=w[G]*S;K=B[J];L=K+Q;B[J+1]=L;for(M=Q-1;-1!==M;--M)S=K+M,G=C[M],F[S]=G,H[S]=x[G],D[G]=0,x[G]=0;B[J+1]=B[J]+Q}return I};c.ccsLUPSolve=function(b,g){var d=b.L,r=b.U,w=g[0],v=!1;"object"!==typeof w&&(g=[[0,g.length],c.linspace(0,g.length-1),g],w=g[0],v=!0);var y=
g[1],A=g[2],x=d[0].length-1,z=w.length-1,C=c.rep([x],0),D=Array(x),B=c.rep([x],0),x=Array(x),F=c.rep([z+1],0),H=[],I=[],G=c.ccsTSolve,M,J,K,L,N,Q=0;for(M=0;M<z;++M){L=0;J=w[M];for(K=w[M+1];J<K;++J)N=b.Pinv[y[J]],x[L]=N,B[N]=A[J],++L;x.length=L;G(d,B,C,x,D);for(J=x.length-1;-1!==J;--J)B[x[J]]=0;G(r,C,B,D,x);if(v)return B;for(J=D.length-1;-1!==J;--J)C[D[J]]=0;for(J=x.length-1;-1!==J;--J)N=x[J],H[Q]=N,I[Q]=B[N],B[N]=0,++Q;F[M+1]=Q}return[F,H,I]};c.ccsbinop=function(b,c){"undefined"===typeof c&&(c="");
return Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+c+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+
b+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")};(function(){var b,g,d,r;for(b in c.ops2)g=isFinite(eval("1"+c.ops2[b]+"0"))?"[Y[0],Y[1],numeric."+b+"(X,Y[2])]":"NaN",d=isFinite(eval("0"+c.ops2[b]+"1"))?"[X[0],X[1],numeric."+b+"(X[2],Y)]":"NaN",r=isFinite(eval("1"+c.ops2[b]+"0"))&&isFinite(eval("0"+c.ops2[b]+"1"))?"numeric.ccs"+b+"MM(X,Y)":"NaN",c["ccs"+b+"MM"]=
c.ccsbinop("zk = xk "+c.ops2[b]+"yk;"),c["ccs"+b]=Function("X","Y",'if(typeof X === "number") return '+g+';\nif(typeof Y === "number") return '+d+";\nreturn "+r+";\n")})();c.ccsScatter=function(b){var g=b[0],d=b[1];b=b[2];var r=c.sup(d)+1,w=g.length,v=c.rep([r],0),y=Array(w),A=Array(w),x=c.rep([r],0),z;for(z=0;z<w;++z)x[d[z]]++;for(z=0;z<r;++z)v[z+1]=v[z]+x[z];var r=v.slice(0),C;for(z=0;z<w;++z)C=d[z],x=r[C],y[x]=g[z],A[x]=b[z],r[C]+=1;return[v,y,A]};c.ccsGather=function(b){var c=b[0],f=b[1];b=b[2];
var g=c.length-1,d=f.length,v=Array(d),y=Array(d),d=Array(d),A,x,z,C;for(A=C=0;A<g;++A)for(x=c[A],z=c[A+1];x!==z;++x)y[C]=A,v[C]=f[x],d[C]=b[x],++C;return[v,y,d]};c.sdim=function n(b,c,f){"undefined"===typeof c&&(c=[]);if("object"!==typeof b)return c;"undefined"===typeof f&&(f=0);f in c||(c[f]=0);b.length>c[f]&&(c[f]=b.length);for(var g in b)b.hasOwnProperty(g)&&n(b[g],c,f+1);return c};c.sclone=function q(b,g,d){"undefined"===typeof g&&(g=0);"undefined"===typeof d&&(d=c.sdim(b).length);var y,A=Array(b.length);
if(g===d-1){for(y in b)b.hasOwnProperty(y)&&(A[y]=b[y]);return A}for(y in b)b.hasOwnProperty(y)&&(A[y]=q(b[y],g+1,d));return A};c.sdiag=function(b){for(var c=b.length,f=Array(c),g,c=c-1;1<=c;c-=2)g=c-1,f[c]=[],f[c][c]=b[c],f[g]=[],f[g][g]=b[g];0===c&&(f[0]=[],f[0][0]=b[c]);return f};c.sidentity=function(b){return c.sdiag(c.rep([b],1))};c.stranspose=function(b){var c=[],f,g,d;for(f in b)if(b.hasOwnProperty(f))for(g in d=b[f],d)d.hasOwnProperty(g)&&("object"!==typeof c[g]&&(c[g]=[]),c[g][f]=d[g]);return c};
c.sLUP=function(b,c){throw Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");};c.sdotMM=function(b,g){var d=b.length,v=c.stranspose(g),y=v.length,A,x,z,C,D,B=Array(d),F;for(x=d-1;0<=x;x--){F=[];d=b[x];for(C=y-1;0<=C;C--){D=0;A=v[C];for(z in d)d.hasOwnProperty(z)&&z in A&&(D+=d[z]*A[z]);D&&(F[C]=D)}B[x]=F}return B};c.sdotMV=function(b,c){var f=b.length,g,d,A=Array(f),x;for(g=f-1;0<=g;g--){f=b[g];x=0;for(d in f)f.hasOwnProperty(d)&&
c[d]&&(x+=f[d]*c[d]);x&&(A[g]=x)}return A};c.sdotVM=function(b,c){var f,g,d,A,x=[];for(f in b)if(b.hasOwnProperty(f))for(g in d=c[f],A=b[f],d)d.hasOwnProperty(g)&&(x[g]||(x[g]=0),x[g]+=A*d[g]);return x};c.sdotVV=function(b,c){var f,g=0;for(f in b)b[f]&&c[f]&&(g+=b[f]*c[f]);return g};c.sdot=function(b,g){var d=c.sdim(b).length,v=c.sdim(g).length;switch(1E3*d+v){case 0:return b*g;case 1001:return c.sdotVV(b,g);case 2001:return c.sdotMV(b,g);case 1002:return c.sdotVM(b,g);case 2002:return c.sdotMM(b,
g);default:throw Error("numeric.sdot not implemented for tensors of order "+d+" and "+v);}};c.sscatter=function(b){var c,f,g,d=b.length,A=[],x;for(f=b[0].length-1;0<=f;--f)if(b[d-1][f]){x=A;for(g=0;g<d-2;g++)c=b[g][f],x[c]||(x[c]=[]),x=x[c];x[b[g][f]]=b[g+1][f]}return A};c.sgather=function r(b,c,f){"undefined"===typeof c&&(c=[]);"undefined"===typeof f&&(f=[]);var g,d,z;g=f.length;for(d in b)if(b.hasOwnProperty(d))if(f[g]=parseInt(d),z=b[d],"number"===typeof z){if(z){if(0===c.length)for(d=g+1;0<=d;--d)c[d]=
[];for(d=g;0<=d;--d)c[d].push(f[d]);c[g+1].push(z)}}else r(z,c,f);f.length>g&&f.pop();return c};c.cLU=function(b){var g=b[0],d=b[1],y=b[2],A=g.length;b=0;var x,z,C;for(x=0;x<A;x++)g[x]>b&&(b=g[x]);b++;var D=Array(b),B=Array(b),F=c.rep([b],Infinity),H=c.rep([b],-Infinity),I,G;for(C=0;C<A;C++)x=g[C],z=d[C],z<F[x]&&(F[x]=z),z>H[x]&&(H[x]=z);for(x=0;x<b-1;x++)H[x]>H[x+1]&&(H[x+1]=H[x]);for(x=b-1;1<=x;x--)F[x]<F[x-1]&&(F[x-1]=F[x]);for(x=0;x<b;x++)B[x]=c.rep([H[x]-F[x]+1],0),D[x]=c.rep([x-F[x]],0);for(C=
0;C<A;C++)x=g[C],B[x][d[C]-F[x]]=y[C];for(x=0;x<b-1;x++)for(g=x-F[x],y=B[x],z=x+1;F[z]<=x&&z<b;z++)if(d=x-F[z],A=H[x]-x,I=B[z],G=I[d]/y[g]){for(C=1;C<=A;C++)I[C+d]-=G*y[C+g];D[z][x-F[z]]=G}y=[];I=[];C=[];G=[];var M=[],J=[],K,L;for(x=K=A=0;x<b;x++){g=F[x];d=H[x];L=B[x];for(z=x;z<=d;z++)L[z-g]&&(y[A]=x,I[A]=z,C[A]=L[z-g],A++);L=D[x];for(z=g;z<x;z++)L[z-g]&&(G[K]=x,M[K]=z,J[K]=L[z-g],K++);G[K]=x;M[K]=x;J[K]=1;K++}return{U:[y,I,C],L:[G,M,J]}};c.cLUsolve=function(b,g){var d=b.L,y=b.U,A=c.clone(g),x=d[1],
d=d[2],z=y[1],C=y[2],y=y[0].length,D=A.length,B,F;for(B=F=0;B<D;B++){for(;x[F]<B;)A[B]-=d[F]*A[x[F]],F++;F++}F=y-1;for(B=D-1;0<=B;B--){for(;z[F]>B;)A[B]-=C[F]*A[z[F]],F--;A[B]/=C[F];F--}return A};c.cgrid=function(b,g){"number"===typeof b&&(b=[b,b]);var d=c.rep(b,-1),y,A,x;if("function"!==typeof g)switch(g){case "L":g=function(c,f){return c>=b[0]/2||f<b[1]/2};break;default:g=function(b,c){return!0}}x=0;for(y=1;y<b[0]-1;y++)for(A=1;A<b[1]-1;A++)g(y,A)&&(d[y][A]=x,x++);return d};c.cdelsq=function(b){var g=
[[-1,0],[0,-1],[0,1],[1,0]],d=c.dim(b),y=d[0],d=d[1],A,x,z,C,D,B=[],F=[],H=[];for(A=1;A<y-1;A++)for(x=1;x<d-1;x++)if(!(0>b[A][x])){for(z=0;4>z;z++)C=A+g[z][0],D=x+g[z][1],0>b[C][D]||(B.push(b[A][x]),F.push(b[C][D]),H.push(-1));B.push(b[A][x]);F.push(b[A][x]);H.push(4)}return[B,F,H]};c.cdotMV=function(b,g){var d,y=b[0],A=b[1],x=b[2],z,C=y.length;for(z=d=0;z<C;z++)y[z]>d&&(d=y[z]);d++;d=c.rep([d],0);for(z=0;z<C;z++)d[y[z]]+=x[z]*g[A[z]];return d};c.Spline=function(b,c,f,g,d){this.x=b;this.yl=c;this.yr=
f;this.kl=g;this.kr=d};c.Spline.prototype._at=function(b,g){var d=this.x,y=this.yl,A=this.yr,x=this.kr,z,C=c.add,D=c.sub,B=c.mul;z=D(B(this.kl[g],d[g+1]-d[g]),D(A[g+1],y[g]));x=C(B(x[g+1],d[g]-d[g+1]),D(A[g+1],y[g]));d=(b-d[g])/(d[g+1]-d[g]);D=d*(1-d);return C(C(C(B(1-d,y[g]),B(d,A[g+1])),B(z,D*(1-d))),B(x,D*d))};c.Spline.prototype.at=function(b){if("number"===typeof b){var c=this.x,f=c.length,g,d,x=Math.floor;g=0;for(--f;1<f-g;)d=x((g+f)/2),c[d]<=b?g=d:f=d;return this._at(b,g)}f=b.length;c=Array(f);
for(g=f-1;-1!==g;--g)c[g]=this.at(b[g]);return c};c.Spline.prototype.diff=function(){for(var b=this.x,g=this.yl,d=this.yr,y=this.kl,A=this.kr,x=g.length,z,C,D=Array(x),B=Array(x),F=c.add,H=c.mul,I=c.div,G=c.sub,x=x-1;-1!==x;--x)z=b[x+1]-b[x],C=G(d[x+1],g[x]),D[x]=I(F(H(C,6),H(y[x],-4*z),H(A[x+1],-2*z)),z*z),B[x+1]=I(F(H(C,-6),H(y[x],2*z),H(A[x+1],4*z)),z*z);return new c.Spline(b,y,A,D,B)};c.Spline.prototype.roots=function(){var b=[],c=this.x,f=this.yl,g=this.yr,d=this.kl,x=this.kr;"number"===typeof f[0]&&
(f=[f],g=[g],d=[d],x=[x]);var z=f.length,C=c.length-1,D,B,F,H,I,G,M,b=Array(z),J,K,L,N,Q,S,U,V,W=Math.sqrt;for(D=0;D!==z;++D){H=f[D];I=g[D];G=d[D];M=x[D];J=[];for(B=0;B!==C;B++){0<B&&0>I[B]*H[B]&&J.push(c[B]);Q=c[B+1]-c[B];F=H[B];N=I[B+1];K=G[B]/Q;L=M[B+1]/Q;Q=K-L+3*(F-N);S=Q*Q+12*L*F;Q=L+3*F+2*K-3*N;F=3*(L+K+2*(F-N));0>=S?(K=Q/F,N=K>c[B]&&K<c[B+1]?[c[B],K,c[B+1]]:[c[B],c[B+1]]):(K=(Q-W(S))/F,U=(Q+W(S))/F,N=[c[B]],K>c[B]&&K<c[B+1]&&N.push(K),U>c[B]&&U<c[B+1]&&N.push(U),N.push(c[B+1]));S=N[0];K=this._at(S,
B);for(F=0;F<N.length-1;F++)if(V=N[F+1],U=this._at(V,B),0===K)J.push(S),S=V,K=U;else if(0===U||0<K*U)S=V,K=U;else{for(var X=0;;){L=(K*V-U*S)/(K-U);if(L<=S||L>=V)break;Q=this._at(L,B);if(0<Q*U)V=L,U=Q,-1===X&&(K*=.5),X=-1;else if(0<Q*K)S=L,K=Q,1===X&&(U*=.5),X=1;else break}J.push(L);S=N[F+1];K=this._at(S,B)}0===U&&J.push(V)}b[D]=J}return"number"===typeof this.yl[0]?b[0]:b};c.spline=function(b,g,d,y){var A=b.length,x=[],z=[],C=[],D,B=c.sub,F=c.mul,H=c.add;for(D=A-2;0<=D;D--)z[D]=b[D+1]-b[D],C[D]=B(g[D+
1],g[D]);if("string"===typeof d||"string"===typeof y)d=y="periodic";B=[[],[],[]];switch(typeof d){case "undefined":x[0]=F(3/(z[0]*z[0]),C[0]);B[0].push(0,0);B[1].push(0,1);B[2].push(2/z[0],1/z[0]);break;case "string":x[0]=H(F(3/(z[A-2]*z[A-2]),C[A-2]),F(3/(z[0]*z[0]),C[0]));B[0].push(0,0,0);B[1].push(A-2,0,1);B[2].push(1/z[A-2],2/z[A-2]+2/z[0],1/z[0]);break;default:x[0]=d,B[0].push(0),B[1].push(0),B[2].push(1)}for(D=1;D<A-1;D++)x[D]=H(F(3/(z[D-1]*z[D-1]),C[D-1]),F(3/(z[D]*z[D]),C[D])),B[0].push(D,
D,D),B[1].push(D-1,D,D+1),B[2].push(1/z[D-1],2/z[D-1]+2/z[D],1/z[D]);switch(typeof y){case "undefined":x[A-1]=F(3/(z[A-2]*z[A-2]),C[A-2]);B[0].push(A-1,A-1);B[1].push(A-2,A-1);B[2].push(1/z[A-2],2/z[A-2]);break;case "string":B[1][B[1].length-1]=0;break;default:x[A-1]=y,B[0].push(A-1),B[1].push(A-1),B[2].push(1)}x="number"!==typeof x[0]?c.transpose(x):[x];y=Array(x.length);if("string"===typeof d)for(D=y.length-1;-1!==D;--D)y[D]=c.ccsLUPSolve(c.ccsLUP(c.ccsScatter(B)),x[D]),y[D][A-1]=y[D][0];else for(D=
y.length-1;-1!==D;--D)y[D]=c.cLUsolve(c.cLU(B),x[D]);y="number"===typeof g[0]?y[0]:c.transpose(y);return new c.Spline(b,g,g,y,y)};c.fftpow2=function w(b,c){var f=b.length;if(1!==f){var g=Math.cos,d=Math.sin,C,D,B=Array(f/2),F=Array(f/2),H=Array(f/2),I=Array(f/2);D=f/2;for(C=f-1;-1!==C;--C)--D,H[D]=b[C],I[D]=c[C],--C,B[D]=b[C],F[D]=c[C];w(B,F);w(H,I);D=f/2;var G,M=-6.283185307179586/f,J;for(C=f-1;-1!==C;--C)--D,-1===D&&(D=f/2-1),G=M*C,J=g(G),G=d(G),b[C]=B[D]+J*H[D]-G*I[D],c[C]=F[D]+J*I[D]+G*H[D]}};
c._ifftpow2=function v(b,c){var f=b.length;if(1!==f){var g=Math.cos,d=Math.sin,D,B,F=Array(f/2),H=Array(f/2),I=Array(f/2),G=Array(f/2);B=f/2;for(D=f-1;-1!==D;--D)--B,I[B]=b[D],G[B]=c[D],--D,F[B]=b[D],H[B]=c[D];v(F,H);v(I,G);B=f/2;var M,J=6.283185307179586/f,K;for(D=f-1;-1!==D;--D)--B,-1===B&&(B=f/2-1),M=J*D,K=g(M),M=d(M),b[D]=F[B]+K*I[B]-M*G[B],c[D]=H[B]+K*G[B]+M*I[B]}};c.ifftpow2=function(b,g){c._ifftpow2(b,g);c.diveq(b,b.length);c.diveq(g,g.length)};c.convpow2=function(b,g,d,x){c.fftpow2(b,g);c.fftpow2(d,
x);var z,C,D,B,F;for(z=b.length-1;-1!==z;--z)C=b[z],B=g[z],D=d[z],F=x[z],b[z]=C*D-B*F,g[z]=C*F+B*D;c.ifftpow2(b,g)};c.T.prototype.fft=function(){var b=this.x,g=this.y,d=b.length,x=Math.log,z=x(2),x=Math.ceil(x(2*d-1)/z),C=Math.pow(2,x),x=c.rep([C],0),z=c.rep([C],0),D=Math.cos,B=Math.sin,F,H=-3.141592653589793/d,I=c.rep([C],0),G=c.rep([C],0);for(F=0;F<d;F++)I[F]=b[F];if("undefined"!==typeof g)for(F=0;F<d;F++)G[F]=g[F];for(F=x[0]=1;F<=C/2;F++)b=H*F*F,x[F]=D(b),z[F]=B(b),x[C-F]=D(b),z[C-F]=B(b);b=new c.T(I,
G);g=new c.T(x,z);b=b.mul(g);c.convpow2(b.x,b.y,c.clone(g.x),c.neg(g.y));b=b.mul(g);b.x.length=d;b.y.length=d;return b};c.T.prototype.ifft=function(){var b=this.x,g=this.y,d=b.length,x=Math.log,z=x(2),x=Math.ceil(x(2*d-1)/z),C=Math.pow(2,x),x=c.rep([C],0),z=c.rep([C],0),D=Math.cos,B=Math.sin,F,H=3.141592653589793/d,I=c.rep([C],0),G=c.rep([C],0);for(F=0;F<d;F++)I[F]=b[F];if("undefined"!==typeof g)for(F=0;F<d;F++)G[F]=g[F];for(F=x[0]=1;F<=C/2;F++)b=H*F*F,x[F]=D(b),z[F]=B(b),x[C-F]=D(b),z[C-F]=B(b);
b=new c.T(I,G);g=new c.T(x,z);b=b.mul(g);c.convpow2(b.x,b.y,c.clone(g.x),c.neg(g.y));b=b.mul(g);b.x.length=d;b.y.length=d;return b.div(d)};c.gradient=function(b,g){var d=g.length,x=b(g);if(isNaN(x))throw Error("gradient: f(x) is a NaN!");var z=Math.max,C,D=c.clone(g),B,F,H=Array(d),I,z=Math.max,G=Math.abs,M=Math.min,J,K,L,N=0,Q;for(C=0;C<d;C++)for(var S=z(1E-6*x,1E-8);;){++N;if(20<N)throw Error("Numerical gradient fails");D[C]=g[C]+S;B=b(D);D[C]=g[C]-S;F=b(D);D[C]=g[C];if(isNaN(B)||isNaN(F))S/=16;
else if(H[C]=(B-F)/(2*S),J=g[C]-S,K=g[C],L=g[C]+S,I=(B-x)/S,Q=(x-F)/S,B=z(G(H[C]),G(x),G(B),G(F),G(J),G(K),G(L),1E-8),I=M(z(G(I-H[C]),G(Q-H[C]),G(I-Q))/B,S/B),.001<I)S/=16;else break}return H};c.uncmin=function(b,g,d,x,z,C,D){var B=c.gradient;"undefined"===typeof D&&(D={});"undefined"===typeof d&&(d=1E-8);"undefined"===typeof x&&(x=function(c){return B(b,c)});"undefined"===typeof z&&(z=1E3);g=c.clone(g);var F=g.length,H=b(g),I,G;if(isNaN(H))throw Error("uncmin: f(x0) is a NaN!");var M=Math.max,J=
c.norm2;d=M(d,c.epsilon);var K,L;D=D.Hinv||c.identity(F);var F=c.dot,M=c.sub,N=c.add,Q=c.tensor,S=c.div,U=c.mul,V=c.all,W=c.isFinite,X=c.neg,ea=0,da,R,Y,Z,ca="";for(L=x(g);ea<z;){if("function"===typeof C&&C(ea,g,H,L,D)){ca="Callback returned true";break}if(!V(W(L))){ca="Gradient has Infinity or NaN";break}K=X(F(D,L));if(!V(W(K))){ca="Search direction has Infinity or NaN";break}Z=J(K);if(Z<d){ca="Newton step smaller than tol";break}Y=1;G=F(L,K);for(R=g;ea<z&&!(Y*Z<d);)if(da=U(K,Y),R=N(g,da),I=b(R),
I-H>=.1*Y*G||isNaN(I))Y*=.5,++ea;else break;if(Y*Z<d){ca="Line search step size smaller than tol";break}if(ea===z){ca="maxit reached during line search";break}G=x(R);g=M(G,L);L=F(g,da);H=F(D,g);D=M(N(D,U((L+F(g,H))/(L*L),Q(da,da))),S(N(Q(H,da),Q(da,H)),L));g=R;H=I;L=G;++ea}return{solution:g,f:H,gradient:L,invHessian:D,iterations:ea,message:ca}};c.Dopri=function(b,c,f,g,d,C,D){this.x=b;this.y=c;this.f=f;this.ymid=g;this.iterations=d;this.events=D;this.message=C};c.Dopri.prototype._at=function(b,g){function d(b){return b*
b}var x=this.x,z=this.y,C=this.f,D=this.ymid,B,F,H,I=c.add,G=c.mul,M=c.sub,J;B=x[g];F=x[g+1];x=z[g];z=z[g+1];H=B+.5*(F-B);D=D[g];J=M(C[g],G(x,1/(B-H)+2/(B-F)));C=M(C[g+1],G(z,1/(F-H)+2/(F-B)));B=[d(b-F)*(b-H)/d(B-F)/(B-H),d(b-B)*d(b-F)/d(B-H)/d(F-H),d(b-B)*(b-H)/d(F-B)/(F-H),(b-B)*d(b-F)*(b-H)/d(B-F)/(B-H),(b-F)*d(b-B)*(b-H)/d(B-F)/(F-H)];return I(I(I(I(G(x,B[0]),G(D,B[1])),G(z,B[2])),G(J,B[3])),G(C,B[4]))};c.Dopri.prototype.at=function(b){var c,f,g,d=Math.floor;if("number"!==typeof b){c=b.length;
f=Array(c);for(--c;-1!==c;--c)f[c]=this.at(b[c]);return f}var C=this.x;c=0;for(f=C.length-1;1<f-c;)g=d(.5*(c+f)),C[g]<=b?c=g:f=g;return this._at(b,c)};c.dopri=function(b,g,d,x,z,C,D){"undefined"===typeof z&&(z=1E-6);"undefined"===typeof C&&(C=1E3);var B=[b],F=[d],H=[x(b,d)],I,G,M,J,K,L,N=[],Q=[.075,.225],S=[44/45,-56/15,32/9],U=[19372/6561,-25360/2187,64448/6561,-212/729],V=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],W=[35/384,0,500/1113,125/192,-2187/6784,11/84],X=[.10013431883002395,0,.3918321794184259,
-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],ea=[.2,.3,.8,8/9,1,1],da=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],R=0,Y,Z=(g-b)/10,ca=0,ba=c.add,aa=c.mul,ra=Math.min,pa=Math.abs,Ba=c.norminf,wa=Math.pow,sa=c.any,qa=c.lt,ga=c.and,E,Ca,ta=new c.Dopri(B,F,H,N,-1,"");for("function"===typeof D&&(E=D(b,d));b<g&&ca<C;)if(++ca,b+Z>g&&(Z=g-b),I=x(b+ea[0]*Z,ba(d,aa(.2*Z,H[R]))),G=x(b+ea[1]*Z,ba(ba(d,aa(Q[0]*Z,H[R])),aa(Q[1]*Z,I))),M=x(b+ea[2]*Z,ba(ba(ba(d,aa(S[0]*
Z,H[R])),aa(S[1]*Z,I)),aa(S[2]*Z,G))),J=x(b+ea[3]*Z,ba(ba(ba(ba(d,aa(U[0]*Z,H[R])),aa(U[1]*Z,I)),aa(U[2]*Z,G)),aa(U[3]*Z,M))),K=x(b+ea[4]*Z,ba(ba(ba(ba(ba(d,aa(V[0]*Z,H[R])),aa(V[1]*Z,I)),aa(V[2]*Z,G)),aa(V[3]*Z,M)),aa(V[4]*Z,J))),I=ba(ba(ba(ba(ba(d,aa(H[R],Z*W[0])),aa(G,Z*W[2])),aa(M,Z*W[3])),aa(J,Z*W[4])),aa(K,Z*W[5])),L=x(b+Z,I),Y=ba(ba(ba(ba(ba(aa(H[R],Z*da[0]),aa(G,Z*da[2])),aa(M,Z*da[3])),aa(J,Z*da[4])),aa(K,Z*da[5])),aa(L,Z*da[6])),Y="number"===typeof Y?pa(Y):Ba(Y),Y>z){if(Z=.2*Z*wa(z/Y,.25),
b+Z===b){ta.msg="Step size became too small";break}}else{N[R]=ba(ba(ba(ba(ba(ba(d,aa(H[R],Z*X[0])),aa(G,Z*X[2])),aa(M,Z*X[3])),aa(J,Z*X[4])),aa(K,Z*X[5])),aa(L,Z*X[6]));++R;B[R]=b+Z;F[R]=I;H[R]=L;if("function"===typeof D){var oa;G=b;M=b+.5*Z;Ca=D(M,N[R-1]);d=ga(qa(E,0),qa(0,Ca));sa(d)||(G=M,M=b+Z,E=Ca,Ca=D(M,I),d=ga(qa(E,0),qa(0,Ca)));if(sa(d)){z=0;for(B=C=1;;){if("number"===typeof E)g=(B*Ca*G-C*E*M)/(B*Ca-C*E);else for(g=M,F=E.length-1;-1!==F;--F)0>E[F]&&0<Ca[F]&&(g=ra(g,(B*Ca[F]*G-C*E[F]*M)/(B*
Ca[F]-C*E[F])));if(g<=G||g>=M)break;oa=ta._at(g,R-1);H=D(g,oa);F=ga(qa(E,0),qa(0,H));sa(F)?(M=g,Ca=H,d=F,B=1,C=-1===z?.5*C:1,z=-1):(G=g,E=H,C=1,B=1===z?.5*B:1,z=1)}I=ta._at(.5*(b+g),R-1);ta.f[R]=x(g,oa);ta.x[R]=g;ta.y[R]=oa;ta.ymid[R-1]=I;ta.events=d;ta.iterations=ca;return ta}}b+=Z;d=I;E=Ca;Z=ra(.8*Z*wa(z/Y,.25),4*Z)}ta.iterations=ca;return ta};c.LU=function(b,g){var d=Math.abs,x,z,C,D,B,F,H=b.length,I=H-1,G=Array(H);g||(b=c.clone(b));for(C=0;C<H;++C){B=C;D=b[C];F=d(D[C]);for(z=C+1;z<H;++z)x=d(b[z][C]),
F<x&&(F=x,B=z);G[C]=B;B!=C&&(b[C]=b[B],b[B]=D,D=b[C]);z=D[C];for(x=C+1;x<H;++x)b[x][C]/=z;for(x=C+1;x<H;++x){B=b[x];for(z=C+1;z<I;++z)B[z]-=B[C]*D[z],++z,B[z]-=B[C]*D[z];z===I&&(B[z]-=B[C]*D[z])}}return{LU:b,P:G}};c.LUsolve=function(b,g){var d,x,z=b.LU,C=z.length,D=c.clone(g),B=b.P,F;for(d=C-1;-1!==d;--d)D[d]=g[d];for(d=0;d<C;++d)for(x=B[d],B[d]!==d&&(F=D[d],D[d]=D[x],D[x]=F),F=z[d],x=0;x<d;++x)D[d]-=D[x]*F[x];for(d=C-1;0<=d;--d){F=z[d];for(x=d+1;x<C;++x)D[d]-=D[x]*F[x];D[d]/=F[d]}return D};c.solve=
function(b,g,d){return c.LUsolve(c.LU(b,d),g)};c.echelonize=function(b){var g=c.dim(b),d=g[0],g=g[1],x=c.identity(d),z=Array(d),C,D,B,F,H,I,G,M,J=Math.abs,K=c.diveq;b=c.clone(b);for(C=0;C<d;++C){B=0;H=b[C];I=x[C];for(D=1;D<g;++D)J(H[B])<J(H[D])&&(B=D);z[C]=B;K(I,H[B]);K(H,H[B]);for(D=0;D<d;++D)if(D!==C){G=b[D];M=G[B];for(F=g-1;-1!==F;--F)G[F]-=H[F]*M;G=x[D];for(F=d-1;-1!==F;--F)G[F]-=I[F]*M}}return{I:x,A:b,P:z}};c.__solveLP=function(b,g,d,x,z,C,D){var B=c.sum,F=c.mul,H=c.sub,I=c.dot,G=c.div,M=c.add,
J=b.length,K=d.length,L,N=!1,Q=1;c.transpose(g);var S=c.transpose,U=Math.sqrt,V=Math.abs,W=Math.min,X=c.all,ea=c.gt,da=Array(J),R=Array(K);c.rep([K],1);var Y=c.solve,Z=H(d,I(g,C)),ca,ba=I(b,b);for(ca=0;ca<z;++ca){var aa;for(aa=K-1;-1!==aa;--aa)R[aa]=G(g[aa],Z[aa]);L=S(R);for(aa=J-1;-1!==aa;--aa)da[aa]=B(L[aa]);Q=.25*V(ba/I(b,da));aa=100*U(ba/I(da,da));if(!isFinite(Q)||Q>aa)Q=aa;N=M(b,F(Q,da));L=I(L,R);for(aa=J-1;-1!==aa;--aa)L[aa][aa]+=1;L=Y(L,G(N,Q),!0);var Z=G(Z,I(g,L)),ra=1;for(aa=K-1;-1!==aa;--aa)0>
Z[aa]&&(ra=W(ra,-.999*Z[aa]));L=H(C,F(L,ra));Z=H(d,I(g,L));if(!X(ea(Z,0)))return{solution:C,message:"",iterations:ca};C=L;if(Q<x)return{solution:L,message:"",iterations:ca};if(D)for(Q=I(b,N),ra=I(g,N),N=!0,aa=K-1;-1!==aa;--aa){if(0>Q*ra[aa]){N=!1;break}}else N=0<=C[J-1]?!1:!0;if(N)return{solution:L,message:"Unbounded",iterations:ca}}return{solution:C,message:"maximum iteration count exceeded",iterations:ca}};c._solveLP=function(b,g,d,x,z){var C=b.length,D=d.length,B=c.sub,F=c.dot,H=c.rep([C],0).concat([1]),
D=c.rep([D,1],-1),I=c.blockMatrix([[g,D]]),D=c.rep([C],0).concat(Math.max(0,c.sup(c.neg(d)))+1),H=c.__solveLP(H,I,d,x,z,D,!1),D=c.clone(H.solution);D.length=C;if(0>c.inf(B(d,F(g,D))))return{solution:NaN,message:"Infeasible",iterations:H.iterations};b=c.__solveLP(b,g,d,x,z-H.iterations,D,!0);b.iterations+=H.iterations;return b};c.solveLP=function(b,g,d,x,z,C,D){"undefined"===typeof D&&(D=1E3);"undefined"===typeof C&&(C=c.epsilon);if("undefined"===typeof x)return c._solveLP(b,g,d,C,D);var B=x.length,
F=x[0].length,H=g.length,I=c.echelonize(x),G=c.rep([F],0),M=I.P,J=[],K;for(K=M.length-1;-1!==K;--K)G[M[K]]=1;for(K=F-1;-1!==K;--K)0===G[K]&&J.push(K);K=c.getRange;B=c.linspace(0,B-1);H=c.linspace(0,H-1);x=K(x,B,J);B=K(g,H,M);K=K(g,H,J);g=c.dot;H=c.sub;F=g(B,I.I);B=H(K,g(F,x));d=H(d,g(F,z));F=Array(M.length);G=Array(J.length);for(K=M.length-1;-1!==K;--K)F[K]=b[M[K]];for(K=J.length-1;-1!==K;--K)G[K]=b[J[K]];K=H(G,g(F,g(I.I,x)));C=c._solveLP(K,B,d,C,D);D=C.solution;if(D!==D)return C;z=g(I.I,H(z,g(x,
D)));b=Array(b.length);for(K=M.length-1;-1!==K;--K)b[M[K]]=z[K];for(K=J.length-1;-1!==K;--K)b[J[K]]=D[K];return{solution:b,message:C.message,iterations:C.iterations}};c.MPStoLP=function(b){function g(c){throw Error("MPStoLP: "+c+"\nLine "+C+": "+b[C]+"\nCurrent state: "+x[d]+"\n");}b instanceof String&&b.split("\n");var d=0,x="Initial state;NAME;ROWS;COLUMNS;RHS;BOUNDS;ENDATA".split(";"),z=b.length,C,D,B,F=0,H={},I=[],G=0,M={},J=0,K,L=[],N=[],Q=[];for(C=0;C<z;++C){B=b[C];var S=B.match(/\S*/g),U=[];
for(D=0;D<S.length;++D)""!==S[D]&&U.push(S[D]);if(0!==U.length){for(D=0;D<x.length&&B.substr(0,x[D].length)!==x[D];++D);if(D<x.length){if(d=D,1===D&&(K=U[1]),6===D)return{name:K,c:L,A:c.transpose(N),b:Q,rows:H,vars:M}}else switch(d){case 0:case 1:g("Unexpected line");case 2:switch(U[0]){case "N":0===F?F=U[1]:g("Two or more N rows");break;case "L":H[U[1]]=G;I[G]=1;Q[G]=0;++G;break;case "G":H[U[1]]=G;I[G]=-1;Q[G]=0;++G;break;case "E":H[U[1]]=G;I[G]=0;Q[G]=0;++G;break;default:g("Parse error "+c.prettyPrint(U))}break;
case 3:M.hasOwnProperty(U[0])||(M[U[0]]=J,L[J]=0,N[J]=c.rep([G],0),++J);B=M[U[0]];for(D=1;D<U.length;D+=2)U[D]===F?L[B]=parseFloat(U[D+1]):(S=H[U[D]],N[B][S]=(0>I[S]?-1:1)*parseFloat(U[D+1]));break;case 4:for(D=1;D<U.length;D+=2)Q[H[U[D]]]=(0>I[H[U[D]]]?-1:1)*parseFloat(U[D+1]);break;case 6:g("Internal error")}}}g("Reached end of file without ENDATA")};c.seedrandom={pow:Math.pow,random:Math.random};(function(b,c,f,g,d,C,D){function B(b){var c,g,d=this,v=b.length,y=0,x=d.i=d.j=d.m=0;d.S=[];d.c=[];
for(v||(b=[v++]);y<f;)d.S[y]=y++;for(y=0;y<f;y++)c=d.S[y],x=x+c+b[y%v]&f-1,g=d.S[x],d.S[y]=g,d.S[x]=c;d.g=function(b){var c=d.S,g=d.i+1&f-1,v=c[g],y=d.j+v&f-1,x=c[y];c[g]=x;c[y]=v;for(var C=c[v+x&f-1];--b;)g=g+1&f-1,v=c[g],y=y+v&f-1,x=c[y],c[g]=x,c[y]=v,C=C*f+c[v+x&f-1];d.i=g;d.j=y;return C};d.g(f)}function F(b,c,f,g,d){f=[];d=typeof b;if(c&&"object"==d)for(g in b)if(5>g.indexOf("S"))try{f.push(F(b[g],c-1))}catch(v){}return f.length?f:b+("string"!=d?"\x00":"")}function H(b,c,g,d){b+="";for(d=g=0;d<
b.length;d++){var v=d&f-1,y=(g^=19*c[d&f-1])+b.charCodeAt(d);c[v]=y&f-1}b="";for(d in c)b+=String.fromCharCode(c[d]);return b}c.seedrandom=function(I,G){var M=[],J;I=H(F(G?[I,b]:arguments.length?I:[(new Date).getTime(),b,window],3),M);J=new B(M);H(J.S,b);c.random=function(){for(var b=J.g(g),c=D,v=0;b<d;)b=(b+v)*f,c*=f,v=J.g(1);for(;b>=C;)b/=2,c/=2,v>>>=1;return(b+v)/c};return I};D=c.pow(f,g);d=c.pow(2,d);C=2*d;H(c.random(),b)})([],c.seedrandom,256,6,52);(function(b){function c(b){if("object"!==typeof b)return b;
var f=[],g,d=b.length;for(g=0;g<d;g++)f[g+1]=c(b[g]);return f}function f(b){if("object"!==typeof b)return b;var c=[],g,d=b.length;for(g=1;g<d;g++)c[g-1]=f(b[g]);return c}function g(b,c,f){var d,v,y;for(c=1;c<=f;c+=1){b[c][c]=1/b[c][c];y=-b[c][c];for(d=1;d<c;d+=1)b[d][c]*=y;d=c+1;if(f<d)break;for(v=d;v<=f;v+=1)for(y=b[c][v],b[c][v]=0,d=1;d<=c;d+=1)b[d][v]+=y*b[d][c]}}function d(b,c,f,g){var v,y,x;for(v=1;v<=f;v+=1){x=0;for(c=1;c<v;c+=1)x+=b[c][v]*g[c];g[v]=(g[v]-x)/b[v][v]}for(y=1;y<=f;y+=1)for(v=
f+1-y,g[v]/=b[v][v],x=-g[v],c=1;c<v;c+=1)g[c]+=x*b[c][v]}function C(b,c,f,g){var d,v,y,x,A;for(d=1;d<=f;d+=1){g[1]=d;A=0;v=d-1;if(!(1>v))for(y=1;y<=v;y+=1){x=b[y][d];for(c=1;c<y;c+=1)x-=b[c][d]*b[c][y];x/=b[y][y];b[y][d]=x;A+=x*x}A=b[d][d]-A;if(0>=A)break;b[d][d]=Math.sqrt(A);g[1]=0}}function D(b,c,f,v,y,A,D,K,L,N,Q,S,U,V,W,X){function ea(){for(R=1;R<=v;R+=1){E=0;for(Y=1;Y<=v;Y+=1)E+=b[Y][R]*D[Y][qa];W[R]=E}ca=ra;for(R=1;R<=v;R+=1)W[ca+R]=0;for(Y=U+1;Y<=v;Y+=1)for(R=1;R<=v;R+=1)W[ca+R]+=b[R][Y]*W[Y];
Ia=!0;for(R=U;1<=R;--R){E=W[R];Z=Ba+R*(R+3)/2;ca=Z-R;for(Y=R+1;Y<=U;Y+=1)E-=W[Z]*W[pa+Y],Z+=Y;E/=W[ca];W[pa+R]=E;if(S[R]<Q)break;if(0>E)break;Ia=!1;aa=R}if(!Ia)for(Ca=W[sa+aa]/W[pa+aa],R=1;R<=U&&!(S[R]<Q)&&!(0>W[pa+R]);R+=1)ga=W[sa+R]/W[pa+R],ga<Ca&&(Ca=ga,aa=R);E=0;for(R=ra+1;R<=ra+v;R+=1)E+=W[R]*W[R];if(Math.abs(E)<=La){if(Ia)return X[1]=1,999;for(R=1;R<=U;R+=1)W[sa+R]-=Ca*W[pa+R];W[sa+U+1]+=Ca;return 700}E=0;for(R=1;R<=v;R+=1)E+=W[ra+R]*D[R][qa];ta=-W[wa+qa]/E;Za=!0;!Ia&&Ca<ta&&(ta=Ca,Za=!1);for(R=
1;R<=v;R+=1)y[R]+=ta*W[ra+R],Math.abs(y[R])<La&&(y[R]=0);A[1]+=ta*E*(ta/2+W[sa+U+1]);for(R=1;R<=U;R+=1)W[sa+R]-=ta*W[pa+R];W[sa+U+1]+=ta;if(Za){U+=1;S[U]=qa;Z=Ba+(U-1)*U/2+1;for(R=1;R<=U-1;R+=1)W[Z]=W[R],Z+=1;if(U===v)W[Z]=W[v];else{for(R=v;R>=U+1&&0!==W[R];--R){oa=Math.max(Math.abs(W[R-1]),Math.abs(W[R]));ya=Math.min(Math.abs(W[R-1]),Math.abs(W[R]));ga=0<=W[R-1]?Math.abs(oa*Math.sqrt(1+ya*ya/(oa*oa))):-Math.abs(oa*Math.sqrt(1+ya*ya/(oa*oa)));oa=W[R-1]/ga;ya=W[R]/ga;if(1===oa)break;if(0===oa)for(W[R-
1]=ya*ga,Y=1;Y<=v;Y+=1)ga=b[Y][R-1],b[Y][R-1]=b[Y][R],b[Y][R]=ga;else for(W[R-1]=ga,Pa=ya/(1+oa),Y=1;Y<=v;Y+=1)ga=oa*b[Y][R-1]+ya*b[Y][R],b[Y][R]=Pa*(b[Y][R-1]+ga)-b[Y][R],b[Y][R-1]=ga}W[Z]=W[U]}}else{E=-K[qa];for(Y=1;Y<=v;Y+=1)E+=y[Y]*D[Y][qa];if(qa>Q)W[wa+qa]=E;else if(W[wa+qa]=-Math.abs(E),0<E){for(Y=1;Y<=v;Y+=1)D[Y][qa]=-D[Y][qa];K[qa]=-K[qa]}return 700}return 0}function da(){Z=Ba+aa*(aa+1)/2+1;ca=Z+aa;if(0===W[ca])return 798;oa=Math.max(Math.abs(W[ca-1]),Math.abs(W[ca]));ya=Math.min(Math.abs(W[ca-
1]),Math.abs(W[ca]));ga=0<=W[ca-1]?Math.abs(oa*Math.sqrt(1+ya*ya/(oa*oa))):-Math.abs(oa*Math.sqrt(1+ya*ya/(oa*oa)));oa=W[ca-1]/ga;ya=W[ca]/ga;if(1===oa)return 798;if(0===oa){for(R=aa+1;R<=U;R+=1)ga=W[ca-1],W[ca-1]=W[ca],W[ca]=ga,ca+=R;for(R=1;R<=v;R+=1)ga=b[R][aa],b[R][aa]=b[R][aa+1],b[R][aa+1]=ga}else{Pa=ya/(1+oa);for(R=aa+1;R<=U;R+=1)ga=oa*W[ca-1]+ya*W[ca],W[ca]=Pa*(W[ca-1]+ga)-W[ca],W[ca-1]=ga,ca+=R;for(R=1;R<=v;R+=1)ga=oa*b[R][aa]+ya*b[R][aa+1],b[R][aa+1]=Pa*(b[R][aa]+ga)-b[R][aa+1],b[R][aa]=
ga}return 0}var R,Y,Z,ca,ba,aa,ra,pa,Ba,wa,sa,qa,ga,E,Ca,ta,oa,ya,Pa,Ia,Za,La,$a;L=Math.min(v,N);Z=2*v+L*(L+5)/2+2*N+1;La=1E-60;do La+=La,ba=1+.1*La,$a=1+.2*La;while(1>=ba||1>=$a);for(R=1;R<=v;R+=1)W[R]=c[R];for(R=v+1;R<=Z;R+=1)W[R]=0;for(R=1;R<=N;R+=1)S[R]=0;ba=[];if(0===X[1]){C(b,f,v,ba);if(0!==ba[1]){X[1]=2;return}d(b,f,v,c);g(b,f,v)}else{for(Y=1;Y<=v;Y+=1)for(y[Y]=0,R=1;R<=Y;R+=1)y[Y]+=b[R][Y]*c[R];for(Y=1;Y<=v;Y+=1)for(c[Y]=0,R=Y;R<=v;R+=1)c[Y]+=b[Y][R]*y[R]}A[1]=0;for(Y=1;Y<=v;Y+=1)for(y[Y]=
c[Y],A[1]+=W[Y]*y[Y],W[Y]=0,R=Y+1;R<=v;R+=1)b[R][Y]=0;A[1]=-A[1]/2;X[1]=0;ra=v;pa=ra+v;sa=pa+L;Ba=sa+L+1;wa=Ba+L*(L+1)/2;c=wa+N;for(R=1;R<=N;R+=1){E=0;for(Y=1;Y<=v;Y+=1)E+=D[Y][R]*D[Y][R];W[c+R]=Math.sqrt(E)}U=0;V[1]=0;for(f=V[2]=0;;){V[1]+=1;Z=wa;for(R=1;R<=N;R+=1){Z+=1;E=-K[R];for(Y=1;Y<=v;Y+=1)E+=D[Y][R]*y[Y];Math.abs(E)<La&&(E=0);if(R>Q)W[Z]=E;else if(W[Z]=-Math.abs(E),0<E){for(Y=1;Y<=v;Y+=1)D[Y][R]=-D[Y][R];K[R]=-K[R]}}for(R=1;R<=U;R+=1)W[wa+S[R]]=0;ga=qa=0;for(R=1;R<=N;R+=1)W[wa+R]<ga*W[c+R]&&
(qa=R,ga=W[wa+R]/W[c+R]);f=0===qa?999:0;if(999===f)break;for(;;){f=ea();if(0===f)break;if(999===f)return;if(700===f){if(aa!==U)for(;;){da();ca=Z-aa;for(R=1;R<=aa;R+=1)W[ca]=W[Z],Z+=1,ca+=1;W[sa+aa]=W[sa+aa+1];S[aa]=S[aa+1];aa+=1;f=aa<U?797:0;if(797!==f)break}W[sa+U]=W[sa+U+1];W[sa+U+1]=0;S[U]=0;--U;V[2]+=1}}}}b.solveQP=function(b,g,d,v,x,C){b=c(b);g=c(g);d=c(d);var z,K,L,N,Q=[],S=[],U=[],V=[],W=[];x=x||0;C=C?c(C):[void 0,0];v=v?c(v):[];K=b.length-1;L=d[1].length-1;if(!v)for(z=1;z<=L;z+=1)v[z]=0;for(z=
1;z<=L;z+=1)S[z]=0;N=Math.min(K,L);for(z=1;z<=K;z+=1)U[z]=0;Q[1]=0;for(z=1;z<=2*K+N*(N+5)/2+2*L+1;z+=1)V[z]=0;for(z=1;2>=z;z+=1)W[z]=0;D(b,g,K,K,U,Q,d,v,K,L,x,S,0,W,V,C);b="";1===C[1]&&(b="constraints are inconsistent, no solution!");2===C[1]&&(b="matrix D in quadratic function is not positive definite!");return{solution:f(U),value:f(Q),unconstrained_solution:f(g),iterations:f(W),iact:f(S),message:b}}})(c);c.svd=function(b){function g(b,c){b=Math.abs(b);c=Math.abs(c);return b>c?b*Math.sqrt(1+c*c/
b/b):0==c?b:c*Math.sqrt(1+b*b/c/c)}var d;d=c.epsilon;var x=1E-64/d,z=0,C=0,D=0,B=0,F=0;b=c.clone(b);var H=b.length,I=b[0].length;if(H<I)throw"Need more rows than columns";for(var G=Array(I),M=Array(I),C=0;C<I;C++)G[C]=M[C]=0;for(var J=c.rep([I,I],0),K=0,L=0,N=0,Q=0,S=0,U=0,V=0,C=0;C<I;C++){G[C]=L;V=0;F=C+1;for(D=C;D<H;D++)V+=b[D][C]*b[D][C];if(V<=x)L=0;else for(K=b[C][C],L=Math.sqrt(V),0<=K&&(L=-L),N=K*L-V,b[C][C]=K-L,D=F;D<I;D++){V=0;for(B=C;B<H;B++)V+=b[B][C]*b[B][D];K=V/N;for(B=C;B<H;B++)b[B][D]+=
K*b[B][C]}M[C]=L;V=0;for(D=F;D<I;D++)V+=b[C][D]*b[C][D];if(V<=x)L=0;else{K=b[C][C+1];L=Math.sqrt(V);0<=K&&(L=-L);N=K*L-V;b[C][C+1]=K-L;for(D=F;D<I;D++)G[D]=b[C][D]/N;for(D=F;D<H;D++){V=0;for(B=F;B<I;B++)V+=b[D][B]*b[C][B];for(B=F;B<I;B++)b[D][B]+=V*G[B]}}S=Math.abs(M[C])+Math.abs(G[C]);S>Q&&(Q=S)}for(C=I-1;-1!=C;C+=-1){if(0!=L){N=L*b[C][C+1];for(D=F;D<I;D++)J[D][C]=b[C][D]/N;for(D=F;D<I;D++){V=0;for(B=F;B<I;B++)V+=b[C][B]*J[B][D];for(B=F;B<I;B++)J[B][D]+=V*J[B][C]}}for(D=F;D<I;D++)J[C][D]=0,J[D][C]=
0;J[C][C]=1;L=G[C];F=C}for(C=I-1;-1!=C;C+=-1){F=C+1;L=M[C];for(D=F;D<I;D++)b[C][D]=0;if(0!=L){N=b[C][C]*L;for(D=F;D<I;D++){V=0;for(B=F;B<H;B++)V+=b[B][C]*b[B][D];K=V/N;for(B=C;B<H;B++)b[B][D]+=K*b[B][C]}for(D=C;D<H;D++)b[D][C]/=L}else for(D=C;D<H;D++)b[D][C]=0;b[C][C]+=1}d*=Q;for(B=I-1;-1!=B;B+=-1)for(x=0;50>x;x++){C=!1;for(F=B;-1!=F;F+=-1){if(Math.abs(G[F])<=d){C=!0;break}if(Math.abs(M[F-1])<=d)break}if(!C)for(z=0,V=1,Q=F-1,C=F;C<B+1;C++){K=V*G[C];G[C]*=z;if(Math.abs(K)<=d)break;L=M[C];N=g(K,L);
M[C]=N;z=L/N;V=-K/N;for(D=0;D<H;D++)S=b[D][Q],U=b[D][C],b[D][Q]=S*z+U*V,b[D][C]=-S*V+U*z}U=M[B];if(F==B){if(0>U)for(M[B]=-U,D=0;D<I;D++)J[D][B]=-J[D][B];break}if(49<=x)throw"Error: no convergence.";Q=M[F];S=M[B-1];L=G[B-1];N=G[B];K=((S-U)*(S+U)+(L-N)*(L+N))/(2*N*S);L=g(K,1);K=0>K?((Q-U)*(Q+U)+N*(S/(K-L)-N))/Q:((Q-U)*(Q+U)+N*(S/(K+L)-N))/Q;V=z=1;for(C=F+1;C<B+1;C++){L=G[C];S=M[C];N=V*L;L*=z;U=g(K,N);G[C-1]=U;z=K/U;V=N/U;K=Q*z+L*V;L=-Q*V+L*z;N=S*V;S*=z;for(D=0;D<I;D++)Q=J[D][C-1],U=J[D][C],J[D][C-1]=
Q*z+U*V,J[D][C]=-Q*V+U*z;U=g(K,N);M[C-1]=U;z=K/U;V=N/U;K=z*L+V*S;Q=-V*L+z*S;for(D=0;D<H;D++)S=b[D][C-1],U=b[D][C],b[D][C-1]=S*z+U*V,b[D][C]=-S*V+U*z}G[F]=0;G[B]=K;M[B]=Q}for(C=0;C<M.length;C++)M[C]<d&&(M[C]=0);for(C=0;C<I;C++)for(D=C-1;0<=D;D--)if(M[D]<M[C]){z=M[D];M[D]=M[C];M[C]=z;for(B=0;B<b.length;B++)d=b[B][C],b[B][C]=b[B][D],b[B][D]=d;for(B=0;B<J.length;B++)d=J[B][C],J[B][C]=J[B][D],J[B][D]=d;C=D}return{U:b,S:M,V:J}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:
"undefined"!==typeof window?window:{})},{}],8:[function(b,c,d){(function(){function b(c,g,d){g=void 0!==g?g*g:1;var l;if(d)l=c;else{d=c[0];for(var m=[d],p=1,t=c.length;p<t;p++){l=c[p];var u=l.x-d.x,n=l.y-d.y;u*u+n*n>g&&(m.push(l),d=l)}d!==l&&m.push(l);l=m}c=l.length;d=new ("undefined"!==typeof Uint8Array?Uint8Array:Array)(c);var m=0,p=c-1,t=[],u=[],q,r,w;for(d[m]=d[p]=1;p;){q=0;for(n=m+1;n<p;n++){r=l[n];var v=l[m],y=l[p],A=v.x,v=v.y,x=y.x-A,z=y.y-v;if(0!==x||0!==z){var C=((r.x-A)*x+(r.y-v)*z)/(x*
x+z*z);1<C?(A=y.x,v=y.y):0<C&&(A+=x*C,v+=z*C)}x=r.x-A;z=r.y-v;r=x*x+z*z;r>q&&(w=n,q=r)}q>g&&(d[w]=1,t.push(m,w,w,p));p=t.pop();m=t.pop()}for(n=0;n<c;n++)d[n]&&u.push(l[n]);return u}"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof c?c.exports=b:"undefined"!==typeof self?self.simplify=b:window.simplify=b})()},{}],9:[function(b,c,d){function g(b,c,f,g){this.points=b;this.ids=c;this.dimension=g;this.length=f}c.exports=function(b){var c,d,n;if(Array.isArray(b)){c=
b.length;if(0===c)return new g(null,null,0,0);d=b[0].length;n=f(p.mallocDouble(c*(d+1)),[c,d+1]);k(b,n.hi(c,d))}else c=b.shape[0],d=b.shape[1],n=f(p.malloc(c*(d+1)),[c,d+1]),l.assign(n.hi(c,d),b);for(var y=0;y<c;++y)n.set(y,d,y);b=m.malloc([c,d],b.dtype);var A=p.mallocInt32(c),x=0,z=b.data,C=n.data;u.log2(u.nextPow2(c));for(var D=h.compile(n.order,!0,n.dtype),B=[n];x<c;){var F=B.shift(),H=F.shape[0]|0;if(1<H){for(var I=u.log2(x+1)%d,G=t.root(H),y=D(F,G,function(b,c){return b.get(I)-c.get(I)}),M=b.index(x,
0),J=y.offset,y=0;y<d;++y)z[M++]=C[J++];A[x]=C[J];x+=1;B.push(F.hi(G));2<H&&B.push(F.lo(G+1))}else{J=F.offset;M=b.index(x,0);for(y=0;y<d;++y)z[M+y]=C[J++];A[x]=C[J];x+=1}}p.free(n.data);return new g(b,A,c,d)};c.exports.deserialize=function(b){var c=b.p,h=b.i;if(c){var d=c.length;b=p.mallocFloat64(d);for(var k=0;k<d;++k)b[k]=c[k];for(var c=h.length,l=p.mallocInt32(c),k=0;k<c;++k)l[k]=h[k];h=d/c|0;return new g(f(b,[c,h]),l,c,h)}return new g(null,null,0,b.d)};var f=b("ndarray"),h=b("ndarray-select"),
k=b("ndarray-pack"),l=b("ndarray-ops"),m=b("ndarray-scratch"),p=b("typedarray-pool"),t=b("inorder-tree-layout"),u=b("bit-twiddle"),n=b("./lib/heap.js");b=g.prototype;b.serialize=function(){return 0<this.length?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}};b.range=function(b,c,f){var g=this.length;if(!(1>g)){for(var h=this.dimension,d=0;d<h;++d)if(c[d]<b[d])return;var l=this.points,n=this.ids,t=
m.malloc([g,2,h]),D=p.mallocInt32(g),B=t.data,F=l.data,H=1,I=0,G;D[0]=0;k(b,t.pick(0,0));for(k(c,t.pick(0,1));I<H;){var M=D[I];b=u.log2(M+1)%h;c=t.index(I,0,0);for(var J=t.index(I,1,0),K=l.index(M,0),L=!0,d=0;d<h;++d){var N=F[K+d];if(N<B[c+d]||B[J+d]<N){L=!1;break}}if(L&&(G=f(n[M]),void 0!==G))break;K=F[K+b];N=B[J+b];L=B[c+b];if(L<=K&&(d=2*M+1,d<g)){D[H]=d;for(var Q=t.index(H,0,0),d=0;d<h;++d)B[Q+d]=B[c+d];for(var S=t.index(H,1,0),d=0;d<h;++d)B[S+d]=B[J+d];B[S+b]=Math.min(N,K);H+=1}if(K<=N&&(d=2*
(M+1),d<g)){D[H]=d;Q=t.index(H,0,0);for(d=0;d<h;++d)B[Q+d]=B[c+d];S=t.index(H,1,0);for(d=0;d<h;++d)B[S+d]=B[J+d];B[Q+b]=Math.max(L,K);H+=1}I+=1}m.free(t);p.free(D);return G}};b.rnn=function(b,c,f){if(!(0>c)){var g=this.length;if(!(1>g)){var h=this.dimension,d=this.points,k=this.ids,l=m.malloc([g,h]),n=p.mallocInt32(g),t=l.data,B=d.data,F=1,H=0;c*=c;for(var I,G=n[0]=0;G<h;++G)l.set(0,G,0);for(;H<F;){for(var M=n[H],J=d.index(M,0),K=0,G=0;G<h;++G)K+=Math.pow(b[G]-B[J+G],2);if(K<=c&&(I=f(k[M]),void 0!==
I))break;for(var K=u.log2(M+1)%h,L=0,N=l.index(H,0),G=0;G<h;++G)G!==K&&(L+=t[N+G]);var G=b[K],Q=B[J+K],S=t[N+K],U=S,J=S;G<Q?J=Math.max(S,Math.pow(Q-G,2)):U=Math.max(S,Math.pow(Q-G,2));Q=J+L;if(U+L<=c&&(L=2*M+1,L<g)){n[F]=L;L=l.index(F,0);for(G=0;G<h;++G)t[L+G]=t[N+G];t[L+K]=U;F+=1}if(Q<=c&&(M=2*(M+1),M<g)){n[F]=M;L=l.index(F,0);for(G=0;G<h;++G)t[L+G]=t[N+G];t[L+K]=J;F+=1}H+=1}m.free(l);p.free(n);return I}}};b.nn=function(b,c){var f=this.length;if(1>f)return-1;if("number"===typeof c){if(0>c)return-1}else c=
Infinity;for(var g=this.dimension,h=this.points,d=h.data,k=p.mallocFloat64(g),l=new n(f,g+1),m=l.index,t=l.data,B=m[0]=0;B<=g;++B)t[B]=0;l.count+=1;for(var F=-1,H=c;0<l.count&&!(t[0]>=H);){for(var I=m[0],G=h.index(I,0),M=0,B=0;B<g;++B)M+=Math.pow(b[B]-d[G+B],2);M<H&&(H=M,F=I);for(var M=u.log2(I+1)%g,J=0,B=0;B<g;++B){var K=t[B+1];B!==M&&(J+=K);k[B]=K}var B=b[M],L=d[G+M],N=k[M],G=K=N;B<L?G=Math.max(N,Math.pow(L-B,2)):K=Math.max(N,Math.pow(L-B,2));B=K+J;J=G+J;l.pop();if(B<H&&(N=2*I+1,N<f)){L=l.count;
m[L]=N;L*=g+1;t[L]=B;for(B=1;B<=g;++B)t[L+B]=k[B-1];t[L+M+1]=K;l.push()}if(J<H&&(I=2*(I+1),I<f)){L=l.count;m[L]=I;L*=g+1;t[L]=J;for(B=1;B<=g;++B)t[L+B]=k[B-1];t[L+M+1]=G;l.push()}}p.freeFloat64(k);l.dispose();return 0>F?-1:this.ids[F]};b.knn=function(b,c,f){if("number"===typeof f){if(0>f)return[]}else f=Infinity;var g=this.length;if(1>g)return[];if("number"===typeof c){if(0>=c)return[];c=Math.min(c,g)|0}else c=g;for(var h=this.ids,h=this.dimension,d=this.points,k=d.data,l=p.mallocFloat64(h),m=new n(c,
1),t=m.index,B=m.data,F=new n(g,h+1),H=F.index,I=F.data,G=H[0]=0;G<=h;++G)I[G]=0;for(F.count+=1;0<F.count&&!(I[0]>=f);){for(var M=H[0],J=d.index(M,0),K=0,G=0;G<h;++G)K+=Math.pow(b[G]-k[J+G],2);K<f&&(m.count>=c&&m.pop(),G=m.count,t[G]=M,B[G]=-K,m.push(),m.count>=c&&(f=-B[0]));for(var K=u.log2(M+1)%h,L=0,G=0;G<h;++G){var N=I[G+1];G!==K&&(L+=N);l[G]=N}var G=b[K],Q=k[J+K],S=l[K],J=N=S;G<Q?J=Math.max(S,Math.pow(Q-G,2)):N=Math.max(S,Math.pow(Q-G,2));G=N+L;L=J+L;F.pop();if(G<f&&(S=2*M+1,S<g)){Q=F.count;
H[Q]=S;Q*=h+1;I[Q]=G;for(G=1;G<=h;++G)I[Q+G]=l[G-1];I[Q+K+1]=N;F.push()}if(L<f&&(M=2*(M+1),M<g)){Q=F.count;H[Q]=M;Q*=h+1;I[Q]=L;for(G=1;G<=h;++G)I[Q+G]=l[G-1];I[Q+K+1]=J;F.push()}}p.freeFloat64(l);F.dispose();b=Array(m.count);h=this.ids;for(G=m.count-1;0<=G;--G)b[G]=h[t[0]],m.pop();m.dispose();return b};b.dispose=function(){p.free(this.points.data);p.freeInt32(this.ids);this.ids=this.points=null;this.length=0}},{"./lib/heap.js":10,"bit-twiddle":11,"inorder-tree-layout":12,ndarray:27,"ndarray-ops":14,
"ndarray-pack":19,"ndarray-scratch":25,"ndarray-select":26,"typedarray-pool":31}],10:[function(b,c,d){function g(b,c){this.count=0;this.dataSize=c;this.index=f.mallocInt32(b);this.data=f.mallocFloat64(b*c)}c.exports=g;var f=b("typedarray-pool");b=g.prototype;b.heapSwap=function(b,c){var f=this.data,g=this.index,d=this.dataSize,t=g[b];g[b]=g[c];g[c]=t;for(var g=d*b,t=d*c,u=0;u<d;++u){var n=f[g];f[g]=f[t];f[t]=n;g+=1;t+=1}};b.heapUp=function(b){for(var c=this.dataSize,f=this.data,g=f[c*b];0<b;){var d;
d=b&1?b-1>>1:(b>>1)-1;if(0<=d&&g<f[c*d])this.heapSwap(b,d),b=d;else break}};b.heapDown=function(b){for(var c=this.dataSize,f=this.data,g=this.count,d=f[c*b];;){var t=d,u=2*b+1,n=2*(b+1),q=b;if(u<g){var r=f[c*u];r<t&&(q=u,t=r)}n<g&&f[c*n]<t&&(q=n);if(q===b)break;this.heapSwap(b,q);b=q}};b.pop=function(){--this.count;this.heapSwap(0,this.count);this.heapDown(0)};b.push=function(){this.heapUp(this.count);this.count+=1};b.dispose=function(){f.freeInt32(this.index);f.freeFloat64(this.data)}},{"typedarray-pool":31}],
11:[function(b,c,d){function g(b){var c=32;(b&=-b)&&c--;b&65535&&(c-=16);b&16711935&&(c-=8);b&252645135&&(c-=4);b&858993459&&(c-=2);b&1431655765&&--c;return c}"use restrict";d.INT_BITS=32;d.INT_MAX=2147483647;d.INT_MIN=-2147483648;d.sign=function(b){return(0<b)-(0>b)};d.abs=function(b){var c=b>>31;return(b^c)-c};d.min=function(b,c){return c^(b^c)&-(b<c)};d.max=function(b,c){return b^(b^c)&-(b<c)};d.isPow2=function(b){return!(b&b-1)&&!!b};d.log2=function(b){var c,f;c=(65535<b)<<4;b>>>=c;f=(255<b)<<
3;b>>>=f;c|=f;f=(15<b)<<2;b>>>=f;c|=f;f=(3<b)<<1;return c|f|b>>>f>>1};d.log10=function(b){return 1E9<=b?9:1E8<=b?8:1E7<=b?7:1E6<=b?6:1E5<=b?5:1E4<=b?4:1E3<=b?3:100<=b?2:10<=b?1:0};d.popCount=function(b){b-=b>>>1&1431655765;b=(b&858993459)+(b>>>2&858993459);return 16843009*(b+(b>>>4)&252645135)>>>24};d.countTrailingZeros=g;d.nextPow2=function(b){b+=0===b;--b;b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=b>>>8;return(b|b>>>16)+1};d.prevPow2=function(b){b|=b>>>1;b|=b>>>2;b|=b>>>4;b|=b>>>8;b|=b>>>16;return b-(b>>>1)};
d.parity=function(b){b^=b>>>16;b^=b>>>8;b=(b^b>>>4)&15;return 27030>>>b&1};var f=Array(256);(function(b){for(var c=0;256>c;++c){for(var f=c,g=c,d=7,f=f>>>1;f;f>>>=1)g<<=1,g|=f&1,--d;b[c]=g<<d&255}})(f);d.reverse=function(b){return f[b&255]<<24|f[b>>>8&255]<<16|f[b>>>16&255]<<8|f[b>>>24&255]};d.interleave2=function(b,c){b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;c&=65535;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(b|b<<1)&1431655765|((c|c<<1)&1431655765)<<
1};d.deinterleave2=function(b,c){b=b>>>c&1431655765;b=(b|b>>>1)&858993459;b=(b|b>>>2)&252645135;b=(b|b>>>4)&16711935;return((b|b>>>16)&65535)<<16>>16};d.interleave3=function(b,c,f){b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;c&=1023;c=(c|c<<16)&4278190335;c=(c|c<<8)&251719695;c=(c|c<<4)&3272356035;b=(b|b<<2)&1227133513|((c|c<<2)&1227133513)<<1;f&=1023;f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;return b|((f|f<<2)&1227133513)<<2};d.deinterleave3=
function(b,c){b=b>>>c&1227133513;b=(b|b>>>2)&3272356035;b=(b|b>>>4)&251719695;b=(b|b>>>8)&4278190335;return((b|b>>>16)&1023)<<22>>22};d.nextCombination=function(b){var c=b|b-1;return c+1|(~c&-~c)-1>>>g(b)+1}},{}],12:[function(b,c,d){function g(b){var c=(m.nextPow2(b+1)>>>1)-1;b-=c;return m.nextPow2(b)-1>=c?c:(c>>>1)+b}function f(b,c){if(0>=b)return 0;var d=g(b);return c>d?f(b-d-1,c-d-1):c===d?m.log2(b):f(d,c)}function h(b,c){if(0>=b)return-1;var f=g(b);if(c>f){var d=h(b-f-1,c-f-1);return 0>d?f:d+
f+1}if(c===f)return-1;d=h(f,c);return 0>d?f:d}function k(b,c){if(0>=b)return 0;var f=g(b);return c>f?k(b-f-1,c-f-1)+f+1:c===f?g(c):k(f,c)}function l(b,c){if(0>=b)return 0;var f=g(b);return c>f?l(b-f-1,c-f-1)+f+1:c===f?g(b-f-1)+f+1:l(f,c)}var m=b("bit-twiddle");d.root=g;d.begin=function(b){return 0};d.end=function(b){return b-1};d.height=f;d.prev=function(b,c){return Math.max(c-1,0)};d.next=function(b,c){return Math.min(c+1,b-1)};d.parent=h;d.left=k;d.right=l;d.leaf=function(b,c){return 0===f(b,c)};
d.lo=function(b,c){b|=0;c|=0;for(var f=0;1<b;){var d=g(b);if(c>d)f+=d+1,b-=d+1,c-=d+1;else if(c===d)break;else b=d}return f};d.hi=function(b,c){b|=0;c|=0;for(var f=0;1<b;){var d=g(b);if(c>d)f+=d+1,b-=d+1,c-=d+1;else if(c===d){f+=b-1;break}else b=d}return f}},{"bit-twiddle":13}],13:[function(b,c,d){arguments[4][11][0].apply(d,arguments)},{dup:11}],14:[function(b,c,d){function g(b){if(!b)return k;for(var c=0;c<b.args.length;++c){var f=b.args[c];b.args[c]=0===c?{name:f,lvalue:!0,rvalue:!!b.rvalue,count:b.count||
1}:{name:f,lvalue:!1,rvalue:!0,count:1}}b.thisVars||(b.thisVars=[]);b.localVars||(b.localVars=[]);return b}function f(b){for(var c=[],f=0;f<b.args.length;++f)c.push("a"+f);c=new Function("P",["return function ",b.funcName,"_ndarrayops(",c.join(","),") {P(",c.join(","),");return a0}"].join(""));b=h({args:b.args,pre:g(b.pre),body:g(b.body),post:g(b.proc),funcName:b.funcName});return c(b)}var h=b("cwise-compiler"),k={body:"",args:[],thisVars:[],localVars:[]},l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",
band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var b in l){var c=l[b];d[b]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+c+"c"},funcName:b});d[b+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a"+c+"=b"},rvalue:!0,funcName:b+"eq"});d[b+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+c+"s"},funcName:b+"s"});d[b+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a"+c+"=s"},rvalue:!0,funcName:b+
"seq"})}})();var m={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var b in m){var c=m[b];d[b]=f({args:["array","array"],body:{args:["a","b"],body:"a="+c+"b"},funcName:b});d[b+"eq"]=f({args:["array"],body:{args:["a"],body:"a="+c+"a"},rvalue:!0,count:2,funcName:b+"eq"})}})();var p={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var b in p){var c=p[b];d[b]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+c+"c"},funcName:b});d[b+"s"]=
f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+c+"s"},funcName:b+"s"});d[b+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a=a"+c+"b"},rvalue:!0,count:2,funcName:b+"eq"});d[b+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+c+"s"},rvalue:!0,count:2,funcName:b+"seq"})}})();var t="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var b=0;b<t.length;++b){var c=t[b];d[c]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+
c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:c});d[c+"eq"]=f({args:["array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"eq"})}})();var u=["max","min","atan2","pow"];(function(){for(var b=0;b<u.length;++b){var c=u[b];d[c]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",
thisVars:["this_f"]},funcName:c});d[c+"s"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:c+"s"});d[c+"eq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"eq"});d[c+"seq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},
body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"seq"})}})();var n=["atan2","pow"];(function(){for(var b=0;b<n.length;++b){var c=n[b];d[c+"op"]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:c+"op"});d[c+"ops"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",
thisVars:["this_f"]},funcName:c+"ops"});d[c+"opeq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"opeq"});d[c+"opseq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+c,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:c+"opseq"})}})();d.any=h({args:["array"],pre:k,body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});d.all=h({args:["array"],pre:k,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});d.sum=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",
localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});d.prod=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});d.norm2squared=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",
lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});d.norm2=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});d.norminf=h({args:["array"],pre:{args:[],
localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});d.norm1=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});d.sup=h({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});d.inf=h({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});d.argmin=h({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});d.argmax=h({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,
count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});d.random=f({args:["array"],
pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});d.assign=f({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});d.assigns=f({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});d.equals=h({args:["array","array"],pre:k,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},
post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":15}],15:[function(b,c,d){function g(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var f=b("./lib/thunk.js");c.exports=function(b){var c=new g;c.pre=b.pre;c.body=b.body;c.post=b.post;var d=b.args.slice(0);c.argTypes=
d;for(var m=0;m<d.length;++m){var p=d[m];if("array"===p||"object"===typeof p&&p.blockIndices){c.argTypes[m]="array";c.arrayArgs.push(m);c.arrayBlockIndices.push(p.blockIndices?p.blockIndices:0);c.shimArgs.push("array"+m);if(m<c.pre.args.length&&0<c.pre.args[m].count)throw Error("cwise: pre() block may not reference array args");if(m<c.post.args.length&&0<c.post.args[m].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===p)c.scalarArgs.push(m),c.shimArgs.push("scalar"+
m);else if("index"===p){c.indexArgs.push(m);if(m<c.pre.args.length&&0<c.pre.args[m].count)throw Error("cwise: pre() block may not reference array index");if(m<c.body.args.length&&c.body.args[m].lvalue)throw Error("cwise: body() block may not write to array index");if(m<c.post.args.length&&0<c.post.args[m].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===p){c.shapeArgs.push(m);if(m<c.pre.args.length&&c.pre.args[m].lvalue)throw Error("cwise: pre() block may not write to array shape");
if(m<c.body.args.length&&c.body.args[m].lvalue)throw Error("cwise: body() block may not write to array shape");if(m<c.post.args.length&&c.post.args[m].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof p&&p.offset)c.argTypes[m]="offset",c.offsetArgs.push({array:p.array,offset:p.offset}),c.offsetArgIndex.push(m);else throw Error("cwise: Unknown argument type "+d[m]);}if(0>=c.arrayArgs.length)throw Error("cwise: No array arguments specified");if(c.pre.args.length>
d.length)throw Error("cwise: Too many arguments in pre() block");if(c.body.args.length>d.length)throw Error("cwise: Too many arguments in body() block");if(c.post.args.length>d.length)throw Error("cwise: Too many arguments in post() block");c.debug=!!b.printCode||!!b.debug;c.funcName=b.funcName||"cwise";c.blockSize=b.blockSize||64;return f(c)}},{"./lib/thunk.js":17}],16:[function(b,c,d){function g(b,c,f){var g=b.length,d=c.arrayArgs.length;c=0<c.indexArgs.length;var h=[],k=[],l=0,v=0,y,A;for(y=0;y<
g;++y)k.push(["i",y,"=0"].join(""));for(A=0;A<d;++A)for(y=0;y<g;++y)v=l,l=b[y],0===y?k.push(["d",A,"s",y,"=t",A,"p",l].join("")):k.push(["d",A,"s",y,"=(t",A,"p",l,"-s",v,"*t",A,"p",v,")"].join(""));h.push("var "+k.join(","));for(y=g-1;0<=y;--y)l=b[y],h.push(["for(i",y,"=0;i",y,"<s",l,";++i",y,"){"].join(""));h.push(f);for(y=0;y<g;++y){v=l;l=b[y];for(A=0;A<d;++A)h.push(["p",A,"+=d",A,"s",y].join(""));c&&(0<y&&h.push(["index[",v,"]-=s",v].join("")),h.push(["++index[",l,"]"].join("")));h.push("}")}return h.join("\n")}
function f(b,c,f,d){for(var h=c.length,k=f.arrayArgs.length,l=f.blockSize,w=0<f.indexArgs.length,v=[],y=0;y<k;++y)v.push(["var offset",y,"=p",y].join(""));for(y=b;y<h;++y)v.push(["for(var j"+y+"=SS[",c[y],"]|0;j",y,">0;){"].join("")),v.push(["if(j",y,"<",l,"){"].join("")),v.push(["s",c[y],"=j",y].join("")),v.push(["j",y,"=0"].join("")),v.push(["}else{s",c[y],"=",l].join("")),v.push(["j",y,"-=",l,"}"].join("")),w&&v.push(["index[",c[y],"]=j",y].join(""));for(y=0;y<k;++y){l=["offset"+y];for(w=b;w<h;++w)l.push(["j",
w,"*t",y,"p",c[w]].join(""));v.push(["p",y,"=(",l.join("+"),")"].join(""))}v.push(g(c,f,d));for(y=b;y<h;++y)v.push("}");return v.join("\n")}function h(b,c,f){for(var g=b.body,d=[],h=[],k=0;k<b.args.length;++k){var l=b.args[k];if(!(0>=l.count)){var v=new RegExp(l.name,"g"),y="",A=c.arrayArgs.indexOf(k);switch(c.argTypes[k]){case "offset":var x=c.offsetArgIndex.indexOf(k),A=c.offsetArgs[x].array,y="+q"+x;case "array":var y="p"+A+y,z="l"+k,x="a"+A;if(0===c.arrayBlockIndices[A])1===l.count?"generic"===
f[A]?l.lvalue?(d.push(["var ",z,"=",x,".get(",y,")"].join("")),g=g.replace(v,z),h.push([x,".set(",y,",",z,")"].join(""))):g=g.replace(v,[x,".get(",y,")"].join("")):g=g.replace(v,[x,"[",y,"]"].join("")):"generic"===f[A]?(d.push(["var ",z,"=",x,".get(",y,")"].join("")),g=g.replace(v,z),l.lvalue&&h.push([x,".set(",y,",",z,")"].join(""))):(d.push(["var ",z,"=",x,"[",y,"]"].join("")),g=g.replace(v,z),l.lvalue&&h.push([x,"[",y,"]=",z].join("")));else{v=[l.name];l=[y];for(y=0;y<Math.abs(c.arrayBlockIndices[A]);y++)v.push("\\s*\\[([^\\]]+)\\]"),
l.push("$"+(y+1)+"*t"+A+"b"+y);v=new RegExp(v.join(""),"g");y=l.join("+");if("generic"===f[A])throw Error("cwise: Generic arrays not supported in combination with blocks!");g=g.replace(v,[x,"[",y,"]"].join(""))}break;case "scalar":g=g.replace(v,"Y"+c.scalarArgs.indexOf(k));break;case "index":g=g.replace(v,"index");break;case "shape":g=g.replace(v,"shape")}}}return[d.join("\n"),g,h.join("\n")].join("\n").trim()}function k(b){for(var c=Array(b.length),f=!0,g=0;g<b.length;++g){var d=b[g],h=d.match(/\d+/),
h=h?h[0]:"";0===d.charAt(0)?c[g]="u"+d.charAt(1)+h:c[g]=d.charAt(0)+h;0<g&&(f=f&&c[g]===c[g-1])}return f?c[0]:c.join("")}var l=b("uniq");c.exports=function(b,c){for(var d=c[1].length-Math.abs(b.arrayBlockIndices[0])|0,u=Array(b.arrayArgs.length),n=Array(b.arrayArgs.length),q=0;q<b.arrayArgs.length;++q)n[q]=c[2*q],u[q]=c[2*q+1];for(var r=[],w=[],v=[],y=[],A=[],q=0;q<b.arrayArgs.length;++q){0>b.arrayBlockIndices[q]?(v.push(0),y.push(d),r.push(d),w.push(d+b.arrayBlockIndices[q])):(v.push(b.arrayBlockIndices[q]),
y.push(b.arrayBlockIndices[q]+d),r.push(0),w.push(b.arrayBlockIndices[q]));for(var x=[],z=0;z<u[q].length;z++)v[q]<=u[q][z]&&u[q][z]<y[q]&&x.push(u[q][z]-v[q]);A.push(x)}w=["SS"];y=["'use strict'"];x=[];for(z=0;z<d;++z)x.push(["s",z,"=SS[",z,"]"].join(""));for(q=0;q<b.arrayArgs.length;++q){w.push("a"+q);w.push("t"+q);w.push("p"+q);for(z=0;z<d;++z)x.push(["t",q,"p",z,"=t",q,"[",v[q]+z,"]"].join(""));for(z=0;z<Math.abs(b.arrayBlockIndices[q]);++z)x.push(["t",q,"b",z,"=t",q,"[",r[q]+z,"]"].join(""))}for(q=
0;q<b.scalarArgs.length;++q)w.push("Y"+q);0<b.shapeArgs.length&&x.push("shape=SS.slice(0)");if(0<b.indexArgs.length){z=Array(d);for(q=0;q<d;++q)z[q]="0";x.push(["index=[",z.join(","),"]"].join(""))}for(q=0;q<b.offsetArgs.length;++q){r=b.offsetArgs[q];v=[];for(z=0;z<r.offset.length;++z)0!==r.offset[z]&&(1===r.offset[z]?v.push(["t",r.array,"p",z].join("")):v.push([r.offset[z],"*t",r.array,"p",z].join("")));0===v.length?x.push("q"+q+"=0"):x.push(["q",q,"=",v.join("+")].join(""))}q=l([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));
x=x.concat(q);y.push("var "+x.join(","));for(q=0;q<b.arrayArgs.length;++q)y.push("p"+q+"|=0");3<b.pre.body.length&&y.push(h(b.pre,b,n));q=h(b.body,b,n);a:for(z=0,x=A[0].length;z<x;){for(r=1;r<A.length;++r)if(A[r][z]!==A[0][z])break a;++z}z<d?y.push(f(z,A[0],b,q)):y.push(g(A[0],b,q));3<b.post.body.length&&y.push(h(b.post,b,n));b.debug&&console.log("-----Generated cwise routine for ",c,":\n"+y.join("\n")+"\n----------");d=[b.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",z,k(n)].join("");return(new Function(["function ",
d,"(",w.join(","),"){",y.join("\n"),"} return ",d].join("")))()}},{uniq:18}],17:[function(b,c,d){var g=b("./compile.js");c.exports=function(b){var c=["'use strict'","var CACHED={}"],d=[];c.push(["return function ",b.funcName+"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var l=[],m=[],p=[["array",b.arrayArgs[0],".shape.slice(",Math.max(0,b.arrayBlockIndices[0]),0>b.arrayBlockIndices[0]?","+b.arrayBlockIndices[0]+")":")"].join("")],t=[],u=[],n=0;n<b.arrayArgs.length;++n){var q=b.arrayArgs[n];
d.push(["t",q,"=array",q,".dtype,r",q,"=array",q,".order"].join(""));l.push("t"+q);l.push("r"+q);m.push("t"+q);m.push("r"+q+".join()");p.push("array"+q+".data");p.push("array"+q+".stride");p.push("array"+q+".offset|0");0<n&&(t.push("array"+b.arrayArgs[0]+".shape.length===array"+q+".shape.length+"+(Math.abs(b.arrayBlockIndices[0])-Math.abs(b.arrayBlockIndices[n]))),u.push("array"+b.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[0])+"]===array"+q+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[n])+
"]"))}1<b.arrayArgs.length&&(c.push("if (!("+t.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),c.push("for(var shapeIndex=array"+b.arrayArgs[0]+".shape.length-"+Math.abs(b.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),c.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),c.push("}"));for(n=0;n<b.scalarArgs.length;++n)p.push("scalar"+b.scalarArgs[n]);d.push(["type=[",m.join(","),"].join()"].join(""));d.push("proc=CACHED[type]");
c.push("var "+d.join(","));c.push(["if(!proc){CACHED[type]=proc=compile([",l.join(","),"])}return proc(",p.join(","),")}"].join(""));b.debug&&console.log("-----Generated thunk:\n"+c.join("\n")+"\n----------");return(new Function("compile",c.join("\n")))(g.bind(void 0,b))}},{"./compile.js":16}],18:[function(b,c,d){c.exports=function(b,c,d){if(0===b.length)return b;if(c){d||b.sort(c);d=1;for(var k=b.length,l=b[0],m=b[0],p=1;p<k;++p)m=l,l=b[p],c(l,m)&&(p===d?d++:b[d++]=l);b.length=d;return b}d||b.sort();
c=1;d=b.length;k=b[0];l=b[0];for(m=1;m<d;++m)l=k,k=b[m],k!==l&&(m===c?c++:b[c++]=k);b.length=c;return b}},{}],19:[function(b,c,d){var g=b("ndarray"),f=b("./doConvert.js");c.exports=function(b,c){for(var d=[],m=b,p=1;m instanceof Array;)d.push(m.length),p*=m.length,m=m[0];if(0===d.length)return g();c||(c=g(new Float64Array(p),d));f(c,b);return c}},{"./doConvert.js":20,ndarray:27}],20:[function(b,c,d){c.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],
localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":21}],21:[function(b,c,d){arguments[4][15][0].apply(d,arguments)},{"./lib/thunk.js":23,dup:15}],22:[function(b,c,d){arguments[4][16][0].apply(d,arguments)},{dup:16,uniq:24}],23:[function(b,c,d){arguments[4][17][0].apply(d,arguments)},{"./compile.js":22,dup:17}],24:[function(b,c,d){arguments[4][18][0].apply(d,arguments)},{dup:18}],25:[function(b,c,d){var g=b("ndarray"),f=b("ndarray-ops"),h=b("typedarray-pool");d.clone=
function(b){var c=b.dtype;if("generic"===c||"array"===c)c="double";c=h.malloc(b.size,c);c=g(c,b.shape);f.assign(c,b);return c};d.malloc=function(b,c){c||(c="double");for(var f=1,d=Array(b.length),t=b.length-1;0<=t;--t)d[t]=f,f*=b[t];return g(h.malloc(f,c),b,d,0)};d.free=function(b){"generic"!==b.dtype&&"array"!==b.dtype&&h.free(b.data)};d.zeros=function(b,c){c||(c="double");for(var f=1,d=Array(b.length),t=b.length-1;0<=t;--t)d[t]=f,f*=b[t];for(var u=h.malloc(f,c),t=0;t<f;++t)u[t]=0;return g(u,b,d,
0)};d.ones=function(b,c){c||(c="double");for(var f=1,d=Array(b.length),t=b.length-1;0<=t;--t)d[t]=f,f*=b[t];for(var u=h.malloc(f,c),t=0;t<f;++t)u[t]=1;return g(u,b,d,0)};d.eye=function(b,c){var f,d;c||(c="double");d=1;var t=Array(b.length);for(f=b.length-1;0<=f;--f)t[f]=d,d*=b[f];var u=h.malloc(d,c);for(f=0;f<d;++f)u[f]=0;var n=Infinity,q=0;for(f=b.length-1;0<=f;f--)q+=t[f],n=Math.min(n,b[f]);for(d=f=0;f<n;f++,d+=q)u[d]=1;return g(u,b,t,0)}},{ndarray:27,"ndarray-ops":14,"typedarray-pool":31}],26:[function(b,
c,d){function g(b){var c=b.slice();c.splice(b.indexOf(0),1);c.unshift(0);return c}function f(b,c,f){function d(c,f){B.push("x0","=",t,"+","t"+b[0],"*(",c,");","x1","=",t,"+","t"+b[0],"*(",f,");");for(var g=h-1;0<g;--g)B.push("for(","i"+b[g],"=0;","i"+b[g],"<","s"+b[g],";","i"+b[g],"++){");v?B.push(n,"=",p,".get(","x0",");",p,".set(","x0",",",p,".get(","x1","));",p,".set(","x1",",",n,");"):B.push(n,"=",p,"[","x0","];",p,"[","x0","]=",p,"[","x1","];",p,"[","x1","]=",n,";");for(g=1;g<h;++g)B.push("x0",
"+=","u"+b[g],";","x1","+=","u"+b[g],"}")}b=g(b);var h=b.length,v="generic"===f;f="ndSelect"+f+b.join("_")+"_"+(c?"cmp":"lex");var B=[],F=[k,l];c&&F.push(m);for(var H=[p+"="+k+".data",t+"="+k+".offset|0",u+"=Math.random",n],I=0;2>I;++I)H.push("x"+I+"=0");for(I=0;I<h;++I)H.push("s"+I+"="+k+".shape["+I+"]|0","t"+I+"="+k+".stride["+I+"]|0","i"+I+"=0");for(I=1;I<h;++I)1<I?H.push("v"+I+"=("+("t"+I)+"-"+("s"+(I-1))+"*"+("t"+(I-1))+")|0","u"+b[I]+"=("+("t"+b[I])+"-"+("s"+b[I-1])+"*"+("t"+b[I-1])+")|0"):
H.push("v"+I+"="+("t"+I),"u"+b[I]+"="+("t"+b[I]));if(c)for(I=0;2>I;++I)H.push("p"+I+"="+k+".pick(0)");H.push(w+"=0",q+"=0",r+"="+("s"+b[0])+"-1");B.push("while(",q,"<",r,"){",w,"=(",u,"()*(",r,"-",q,"+1)+",q,")|0;");d(w,r);B.push(w,"=",q,";","for(","i0","=",q,";","i0","<",r,";","i0","++){");(function(f,g,d){if(c)B.push("p0",".offset=",t,"+","t"+b[0],"*(",g,");","p1",".offset=",t,"+","t"+b[0],"*(",d,");",f,"=",m,"(","p0",",","p1",");");else{B.push("x0","=",t,"+","t0","*(",g,");","x1","=",t,"+","t0",
"*(",d,");");1<h&&B.push("_cmp:");for(g=h-1;0<g;--g)B.push("for(","i"+g,"=0;","i"+g,"<","s"+g,";","i"+g,"++){");v?B.push(f,"=",p,".get(","x0",")-",p,".get(","x1",");"):B.push(f,"=",p,"[","x0","]-",p,"[","x1","];");1<h&&B.push("if(",f,")break _cmp;");for(g=1;g<h;++g)B.push("x0","+=","v"+g,";","x1","+=","v"+g,"}")}})(n,"i0",r);B.push("if(",n,"<0){");d(w,"i0");B.push(w,"++;");B.push("}}");d(w,r);B.push("if(",w,"===",l,"){",q,"=",w,";","break;","}else if(",l,"<",w,"){",r,"=",w,"-1;","}else{",q,"=",w,
"+1;","}","}");c?B.push("p0",".offset=",t,"+",q,"*","t0",";","return ","p0",";"):B.push("return ",k,".pick(",q,");");f=["'use strict';function ",f,"(",F,"){var ",H.join(),";",B.join(""),"};return ",f].join("");return(new Function(f))()}function h(b,c,g){var d=b.join()+c+g,h=v[d];return h?h:v[d]=f(b,c,g)}c.exports=function(b,c,f){c|=0;if(0===b.dimension||b.shape[0]<=c||0>c)return null;var g=!!f,d=h(b.order,g,b.dtype);return g?d(b,c,f):d(b,c)};c.exports.compile=h;var k="a",l="K",m="C",p="d",t="o",u=
"R",n="T",q="L",r="H",w="X",v={}},{}],27:[function(b,c,d){function g(b,c){return b[0]-c[0]}function f(){var b=this.stride,c=Array(b.length),f;for(f=0;f<c.length;++f)c[f]=[Math.abs(b[f]),f];c.sort(g);b=Array(c.length);for(f=0;f<b.length;++f)b[f]=c[f][1];return b}function h(b,c){var g=["View",c,"d",b].join("");0>c&&(g="View_Nil"+b);var d="generic"===b;if(-1===c){var h,g=new Function("function "+g+"(a){this.data=a;};var proto="+g+".prototype;proto.dtype='"+b+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+
g+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+g+"(a){return new "+g+"(a);}");return g()}if(0===c)return g=new Function("TrivialArray","function "+g+"(a,d) {this.data = a;this.offset = d};var proto="+g+".prototype;proto.dtype='"+b+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+g+"_copy() {return new "+g+"(this.data,this.offset)};proto.pick=function "+
g+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+g+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+g+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+g+"(a,b,c,d){return new "+g+"(a,d)}"),g(t[b][0]);h=["'use strict'"];var k=l(c),m=k.map(function(b){return"i"+b}),p="this.offset+"+k.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),x=k.map(function(b){return"b"+
b}).join(","),z=k.map(function(b){return"c"+b}).join(",");h.push("function "+g+"(a,"+x+","+z+",d){this.data=a","this.shape=["+x+"]","this.stride=["+z+"]","this.offset=d|0}","var proto="+g+".prototype","proto.dtype='"+b+"'","proto.dimension="+c);h.push("Object.defineProperty(proto,'size',{get:function "+g+"_size(){return "+k.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===c?h.push("proto.order=[0]"):(h.push("Object.defineProperty(proto,'order',{get:"),4>c?(h.push("function "+g+"_order(){"),
2===c?h.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&h.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):h.push("ORDER})"));h.push("proto.set=function "+g+"_set("+m.join(",")+",v){");d?h.push("return this.data.set("+p+",v)}"):h.push("return this.data["+
p+"]=v}");h.push("proto.get=function "+g+"_get("+m.join(",")+"){");d?h.push("return this.data.get("+p+")}"):h.push("return this.data["+p+"]}");h.push("proto.index=function "+g+"_index(",m.join(),"){return "+p+"}");h.push("proto.hi=function "+g+"_hi("+m.join(",")+"){return new "+g+"(this.data,"+k.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+k.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");d=k.map(function(b){return"a"+
b+"=this.shape["+b+"]"});p=k.map(function(b){return"c"+b+"=this.stride["+b+"]"});h.push("proto.lo=function "+g+"_lo("+m.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+p.join(","));for(d=0;d<c;++d)h.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");h.push("return new "+g+"(this.data,"+k.map(function(b){return"a"+b}).join(",")+","+k.map(function(b){return"c"+b}).join(",")+",b)}");h.push("proto.step=function "+g+"_step("+m.join(",")+"){var "+k.map(function(b){return"a"+
b+"=this.shape["+b+"]"}).join(",")+","+k.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(d=0;d<c;++d)h.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");h.push("return new "+g+"(this.data,"+k.map(function(b){return"a"+b}).join(",")+","+k.map(function(b){return"b"+b}).join(",")+",c)}");p=Array(c);x=Array(c);for(d=0;d<c;++d)p[d]="a[i"+d+"]",x[d]="b[i"+d+"]";
h.push("proto.transpose=function "+g+"_transpose("+m+"){"+m.map(function(b,c){return b+"=("+b+"===undefined?"+c+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+g+"(this.data,"+p.join(",")+","+x.join(",")+",this.offset)}");h.push("proto.pick=function "+g+"_pick("+m+"){var a=[],b=[],c=this.offset");for(d=0;d<c;++d)h.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");h.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");
h.push("return function construct_"+g+"(data,shape,stride,offset){return new "+g+"(data,"+k.map(function(b){return"shape["+b+"]"}).join(",")+","+k.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");g=new Function("CTOR_LIST","ORDER",h.join("\n"));return g(t[b],f)}function k(b){if(m(b))return"buffer";if(p)switch(Object.prototype.toString.call(b)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";
case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(b)?"array":"generic"}var l=b("iota-array"),m=b("is-buffer"),p="undefined"!==typeof Float64Array,t={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var b in t)t[b].push(h(b,
-1))});c.exports=function(b,c,f,g){if(void 0===b){var d=t.array[0];return d([])}"number"===typeof b&&(b=[b]);void 0===c&&(c=[b.length]);d=c.length;if(void 0===f){f=Array(d);for(var l=d-1,m=1;0<=l;--l)f[l]=m,m*=c[l]}if(void 0===g)for(l=g=0;l<d;++l)0>f[l]&&(g-=(c[l]-1)*f[l]);l=k(b);for(m=t[l];m.length<=d+1;)m.push(h(l,m.length-1));d=m[d+1];return d(b,c,f,g)}},{"iota-array":28,"is-buffer":29}],28:[function(b,c,d){c.exports=function(b){for(var c=Array(b),d=0;d<b;++d)c[d]=d;return c}},{}],29:[function(b,
c,d){c.exports=function(b){return!(null==b||!(b._isBuffer||b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)))}},{}],30:[function(b,c,d){function g(b,c,d){var l=b[d]|0;if(0>=l)return[];var m=Array(l),p;if(d===b.length-1)for(p=0;p<l;++p)m[p]=c;else for(p=0;p<l;++p)m[p]=g(b,c,d+1);return m}c.exports=function(b,c){"undefined"===typeof c&&(c=0);switch(typeof b){case "number":if(0<b){var d=b|0,l=c,m,p;m=Array(d);for(p=0;p<d;++p)m[p]=l;return m}break;case "object":if("number"===
typeof b.length)return g(b,c,0)}return[]}},{}],31:[function(b,c,d){(function(c,f){function h(b){if(b){var c=A.log2(b.length||b.byteLength);D[c].push(b)}}function k(b){b=A.nextPow2(b);var c=A.log2(b),c=D[c];return 0<c.length?c.pop():new ArrayBuffer(b)}function l(b){return new Uint8Array(k(b),0,b)}function m(b){return new Uint16Array(k(2*b),0,b)}function p(b){return new Uint32Array(k(4*b),0,b)}function t(b){return new Int8Array(k(b),0,b)}function u(b){return new Int16Array(k(2*b),0,b)}function n(b){return new Int32Array(k(4*
b),0,b)}function q(b){return new Float32Array(k(4*b),0,b)}function r(b){return new Float64Array(k(8*b),0,b)}function w(b){return z?new Uint8ClampedArray(k(b),0,b):l(b)}function v(b){return new DataView(k(b),0,b)}function y(b){b=A.nextPow2(b);var c=A.log2(b),c=B[c];return 0<c.length?c.pop():new f(b)}var A=b("bit-twiddle"),x=b("dup");c.__TYPEDARRAY_POOL||(c.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,
0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var z="undefined"!==typeof Uint8ClampedArray,C=c.__TYPEDARRAY_POOL;C.UINT8C||(C.UINT8C=x([32,0]));C.BUFFER||(C.BUFFER=x([32,0]));var D=C.DATA,B=C.BUFFER;d.free=function(b){if(f.isBuffer(b))B[A.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&(b=b.buffer),b){var c=A.log2(b.length||b.byteLength)|0;D[c].push(b)}};d.freeUint8=d.freeUint16=d.freeUint32=d.freeInt8=d.freeInt16=d.freeInt32=d.freeFloat32=d.freeFloat=
d.freeFloat64=d.freeDouble=d.freeUint8Clamped=d.freeDataView=function(b){h(b.buffer)};d.freeArrayBuffer=h;d.freeBuffer=function(b){B[A.log2(b.length)].push(b)};d.malloc=function(b,c){if(void 0===c||"arraybuffer"===c)return k(b);switch(c){case "uint8":return l(b);case "uint16":return m(b);case "uint32":return p(b);case "int8":return t(b);case "int16":return u(b);case "int32":return n(b);case "float":case "float32":return q(b);case "double":case "float64":return r(b);case "uint8_clamped":return w(b);
case "buffer":return y(b);case "data":case "dataview":return v(b);default:return null}};d.mallocArrayBuffer=k;d.mallocUint8=l;d.mallocUint16=m;d.mallocUint32=p;d.mallocInt8=t;d.mallocInt16=u;d.mallocInt32=n;d.mallocFloat32=d.mallocFloat=q;d.mallocFloat64=d.mallocDouble=r;d.mallocUint8Clamped=w;d.mallocDataView=v;d.mallocBuffer=y;d.clearCache=function(){for(var b=0;32>b;++b)C.UINT8[b].length=0,C.UINT16[b].length=0,C.UINT32[b].length=0,C.INT8[b].length=0,C.INT16[b].length=0,C.INT32[b].length=0,C.FLOAT[b].length=
0,C.DOUBLE[b].length=0,C.UINT8C[b].length=0,D[b].length=0,B[b].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("buffer").Buffer)},{"bit-twiddle":11,buffer:1,dup:30}],32:[function(b,c,d){var g;g=b("../color/sort.coffee");c.exports=function(b,c,d,l,m,p,t){var u;l||(l="asc");m instanceof Array||(m=[m]);d instanceof Array||(d=[d]);p&&void 0!==t&&"number"!==typeof t&&p.id.nesting.indexOf(t);for(t=u=0;t<d.length;){u=d[t];b=
p&&b.d3plus&&b.d3plus.sortKeys?b.d3plus.sortKeys[u]:b[u];c=p&&c.d3plus&&c.d3plus.sortKeys?c.d3plus.sortKeys[u]:c[u];u=p&&0<=m.indexOf(u)?g(b,c):b<c?-1:1;if(0!==u||t===d.length-1)break;t++}return"asc"===l?u:-u}},{"../color/sort.coffee":49}],33:[function(b,c,d){c.exports=function(b,c){var d;return b instanceof Array?(d=void 0===c||null===c?c:c.constructor,0<=b.indexOf(c)||0<=b.indexOf(d)):!1}},{}],34:[function(b,c,d){var g,f;g=b("./comparator.coffee");f=b("../core/fetch/sort.coffee");c.exports=function(b,
c,d,m,p,t){var u,n,q,r;if(!b||1>=b.length)return b||[];if(p)for(c||(c=p.order.value||p.size.value||p.id.value),d||(d=p.order.sort.value),m||(m=p.color.value||[]),q=0,r=b.length;q<r;q++)u=b[q],u.d3plus||(u.d3plus={}),n="d3plus"in u&&"d3plus"in u.d3plus?u.d3plus:u,u.d3plus.sortKeys=f(p,n,c,m,t);return b.sort(function(b,f){return g(b,f,c,d,m,p,t)})}},{"../core/fetch/sort.coffee":65,"./comparator.coffee":32}],35:[function(b,c,d){c.exports=function(b,c){if(void 0===c)return b;if(!1===c)return[];if(c instanceof
Array)return c;b instanceof Array||(b=[]);0<=b.indexOf(c)?b.splice(b.indexOf(c),1):b.push(c);return b}},{}],36:[function(b,c,d){var g;g=function(b){var c,d,l;c=g.tested;if(b in c)return c[b];d=0;for(l=!1;d<document.styleSheets.length;){c=document.styleSheets[d];if(c.href&&0<=c.href.indexOf(b)){l=!0;break}d++}return l};g.tested={};c.exports=g},{}],37:[function(b,c,d){c.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],38:[function(b,c,d){d=b("./ie.js");b("./touch.coffee")?c.exports=
{click:"click",down:"touchstart",up:"touchend",over:d?"mouseenter":"mouseover",out:d?"mouseleave":"mouseout",move:"mousemove"}:c.exports={click:"click",down:"mousedown",up:"mouseup",over:d?"mouseenter":"mouseover",out:d?"mouseleave":"mouseout",move:"mousemove"}},{"./ie.js":37,"./touch.coffee":43}],39:[function(b,c,d){var g;g=function(){var b;b="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in
document.body.style?"-o-":"";g=function(){return b};return b};c.exports=g},{}],40:[function(b,c,d){c.exports="rtl"===d3.select("html").attr("dir")},{}],41:[function(b,c,d){c.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],42:[function(b,c,d){var g;
g=function(){var b,c,d,l;b=document.createElement("p");b.style.width="100%";b.style.height="200px";c=document.createElement("div");c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);l=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;l===b&&(b=c.clientWidth);document.body.removeChild(c);d=l-b;g=function(){return d};return d};c.exports=
g},{}],43:[function(b,c,d){c.exports="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1},{}],44:[function(b,c,d){c.exports=function(b){b=d3.hsl(b);.45<b.l&&(.8<b.s&&(b.s=.8),b.l=.45);return b.toString()}},{}],45:[function(b,c,d){c.exports=function(b,c){var d;void 0===c&&(c=.5);d=d3.hsl(b);c*=1-d.l;d.l+=c;d.s-=c;return d.toString()}},{}],46:[function(b,c,d){c.exports=function(b,c,d,k){d||(d=1);k||(k=1);b=d3.rgb(b);c=d3.rgb(c);return d3.rgb((d*b.r+k*c.r-d*k*c.r)/
(d+k-d*k),(d*b.g+k*c.g-d*k*c.g)/(d+k-d*k),(d*b.b+k*c.b-d*k*c.b)/(d+k-d*k)).toString()}},{}],47:[function(b,c,d){var g;g=b("./scale.coffee");c.exports=function(b,c){var d;d=b||Math.floor(20*Math.random());c=c||g;return c(d)}},{"./scale.coffee":48}],48:[function(b,c,d){c.exports=d3.scale.ordinal().range("#b22200 #282F6B #EACE3F #B35C1E #224F20 #5F487C #759143 #419391 #993F88 #e89c89 #ffee8d #afd5e8 #f7ba77 #a5c697 #c5b5e5 #d1d392 #bbefd0 #e099cf".split(" "))},{}],49:[function(b,c,d){c.exports=function(b,
c){var d,k;d=d3.hsl(b);k=d3.hsl(c);b=0===d.s?361:d.h;c=0===k.s?361:k.h;return b===c?d.l-k.l:b-c}},{}],50:[function(b,c,d){c.exports=function(b){b=d3.rgb(b);return 128<=(299*b.r+587*b.g+114*b.b)/1E3?"#444444":"#f7f7f7"}},{}],51:[function(b,c,d){c.exports=function(b){var c;b=(b+"").replace(RegExp(" ","g"),"");0===b.indexOf("rgb")&&(b=b.split("(")[1].split(")")[0].split(",").slice(0,3).join(","));0===b.indexOf("hsl")&&(b=b.split(",")[2].split(")")[0]);c=d3.rgb(b).toString();b=0<=["black","#000","#000000",
"0%","0,0,0"].indexOf(b);return"#000000"!==c||b}},{}],52:[function(b,c,d){var g,f;g=b("../../client/ie.js");f=b("./wiki.coffee");b=function(b,c,f){f=f||"";if(g||"undefined"!==typeof InstallTrigger)console.log("[ D3plus ] "+c);else if(0===b.indexOf("group"))console[b]("%c[ D3plus ]%c "+c,"font-weight: 800;color: #b35c1e;margin-left: 0px;","font-weight:200;"+f);else console[b]("%c"+c,f+"font-weight:200;")};b.comment=function(b){this("log",b,"color:#aaa;")};b.error=function(b,c){this("groupCollapsed",
"ERROR: "+b,"font-weight:800;color:#D74B03;");this.stack();this.wiki(c);this.groupEnd()};b.group=function(b){this("group",b,"color:#888;")};b.groupCollapsed=function(b){this("groupCollapsed",b,"color:#888;")};b.groupEnd=function(){g||console.groupEnd()};b.log=function(b){this("log",b,"color:#444444;")};b.stack=function(){var b,c,f;g||(b=Error(),b.stack&&(f=b.stack.split("\n"),f=f.filter(function(b){return 0!==b.indexOf("Error")&&0>b.indexOf("d3plus.js:")&&0>b.indexOf("d3plus.min.js:")}),f.length&&
f[0].length&&(c=window.chrome?"at ":"@",b=f[0],0<=b.indexOf(c)&&(b=b.split(c)[1]),f=b.split(":"),3===f.length&&f.pop(),c=f.pop(),f=f.join(":").split("/"),f=f[f.length-1],this("log","line "+c+" of "+f+": "+b,"color:#D74B03;"))))};b.time=function(b){g||console.time(b)};b.timeEnd=function(b){g||console.timeEnd(b)};b.warning=function(b,c){this("groupCollapsed",b,"color:#888;");this.stack();this.wiki(c);this.groupEnd()};b.wiki=function(b){b&&(b in f&&(b=d3plus.repo+"wiki/"+f[b]),this("log","documentation: "+
b,"color:#aaa;"))};c.exports=b},{"../../client/ie.js":37,"./wiki.coffee":53}],53:[function(b,c,d){c.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",
descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",
margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",
tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",zoom:"Visualizations#zoom"}},{}],54:[function(b,c,d){var g=b("../../util/buckets.coffee"),f=b("../fetch/value.coffee"),h=b("../console/print.coffee");c.exports=function(b){b.dev.value&&h.time("getting color data range");var c=[];b.data.pool.forEach(function(g){g=parseFloat(f(b,g,b.color.value));"number"==typeof g&&!isNaN(g)&&
0>c.indexOf(g)&&c.push(g)});b.dev.value&&h.timeEnd("getting color data range");if(1<c.length){b.dev.value&&h.time("calculating color scale");c=d3.extent(c);if(0>c[0]&&0<c[1]){var d=b.color.range;3==d.length&&(c.push(c[1]),c[1]=0)}else 0<c[1]&&0<=c[0]?(d=b.color.heatmap,c=g(c,d.length)):(d=b.color.range.slice(0),0>c[0]?d.pop():d.shift());b.color.valueScale=d3.scale.sqrt().domain(c).range(d).interpolate(d3.interpolateRgb);b.dev.value&&h.timeEnd("calculating color scale")}else b.color.valueScale=null}},
{"../../util/buckets.coffee":203,"../console/print.coffee":52,"../fetch/value.coffee":67}],55:[function(b,c,d){var g=b("../fetch/value.coffee"),f=b("../console/print.coffee"),h=b("../../object/validate.coffee");c.exports=function(b,c){b.dev.value&&f.time("filtering data");var d=d3.keys(b.data.keys||{});"attrs"in b&&(d=d.concat(d3.keys(b.attrs.keys||{})));c=c.filter(function(c){return null!==g(b,c,b.id.value)});var p=b.types[b.type.value].requirements||[];b.data.filters.forEach(function(f){0<=d.indexOf(b[f].value)&&
0<=p.indexOf(f)&&(c=c.filter(function(c){var d=g(b,c,b[f].value);"y"===f&&b.y2.value&&null===d?d=g(b,c,b.y2.value):"x"===f&&b.x2.value&&null===d&&(d=g(b,c,b.x2.value));return"size"===f?"number"===typeof d:null!==d}))});var t=b.data.solo.length?"solo":"mute";b.data[t].length?b.data[t].forEach(function(d){function m(c){var f=!1;b[d][t].value.forEach(function(b){"function"===typeof b?f=b(c):b===c&&(f=!0)});return"solo"===t?f:!f}function p(c,f){if(!f&&b[d].nesting){var l=b[d].nesting;h(l)&&(l=d3.values(l));
for(var q=0;q<l.length;q++){var t=c.filter(function(c){return m(g(b,c,l[q]))});t.length&&(c=t)}}else c=c.filter(function(c){return m(g(b,c,b[d].value))});return c}c=p(c);"id"===d&&("nodes"in b&&b.nodes.value&&(b.dev.value&&f.time("filtering nodes"),b.nodes.restricted=p(b.nodes.value),b.dev.value&&f.timeEnd("filtering nodes")),"edges"in b&&b.edges.value&&(b.dev.value&&f.time("filtering edges"),b.edges.restricted=b.edges.value.filter(function(c){return 2===p([c[b.edges.source],c[b.edges.target]]).length}),
b.dev.value&&f.timeEnd("filtering edges")))}):"nodes"in b&&(b.nodes.restricted=void 0,b.edges.restricted=void 0);b.dev.value&&f.timeEnd("filtering data");return c}},{"../../object/validate.coffee":171,"../console/print.coffee":52,"../fetch/value.coffee":67}],56:[function(b,c,d){var g=b("./nest.js"),f=b("../fetch/value.coffee"),h=b("../console/print.coffee"),k=b("../../util/uniques.coffee");c.exports=function(b){var c;b.data.time={values:[]};if(b.time&&b.time.value){b.dev.value&&(c="analyzing time periods",
h.time(c));b.data.time.values=k(b.data.value,b.time.value,f,b);b.data.time.values.sort(function(b,c){return b-c});var d=[];b.data.time.values.forEach(function(c,f){0!==f&&(d.push(c-b.data.time.values[f-1]),f===b.data.time.values.length-1&&(b.data.time.total=c-b.data.time.values[0]))});d=d3.min(d);b.data.time.step=d;var t="Milliseconds Seconds Minutes Hours Date Month FullYear".split(" "),u=[1E3,60,60,24,30,12,1];b.data.time.periods=t;var n=function(c,f,g){b.data.time.stepDivider||(arr=u.slice(0,g),
b.data.time.stepDivider=arr.length?arr.reduce(function(b,c){return b*c}):1);return Math.round(Math.floor(f-c)/b.data.time.stepDivider)},q=b.data.time.total;t.forEach(function(c,f){var g="Date"===c?28:u[f];!b.data.time.stepType&&(f===t.length-1||Math.round(d)<g)&&(b.data.time.stepType=c,b.data.time.stepIntervals=n(b.data.time.values[0],b.data.time.values[b.data.time.values.length-1],f));!b.data.time.totalType&&(f===t.length-1||Math.round(q)<g)&&(b.data.time.totalType=c);d/=g;q/=g});b.data.time.values.forEach(function(c,
f){0!==f?b.data.time.dataSteps.push(n(b.data.time.values[0],c,t.indexOf(b.data.time.stepType))):b.data.time.dataSteps=[0]});var r=b.time.format.value,w=b.format.locale.value,v=[function(b){return b.getMilliseconds()},function(b){return b.getSeconds()},function(b){return b.getMinutes()},function(b){return b.getHours()},function(b){return 1!=b.getDate()},function(b){return b.getMonth()},function(b){return!0}];b.data.time.functions=v;var y=function(b,c,f){if(b===c)return f&&w.timeFormat[b+"Small"]?w.timeFormat[b+
"Small"]:w.timeFormat[b];if(4<=t.indexOf(b)||3>=t.indexOf(c))return w.timeFormat[c+"-"+b];c="Date"===c?w.timeFormat[c]:w.timeFormat[c+"-Date"];return"Hours"===b?c+" "+w.timeFormat[b]:c+" "+w.timeFormat["Hours-"+b]};b.data.time.getFormat=y;if(r)"string"===typeof r?b.data.time.format=d3.locale(w.format).timeFormat(r):"function"===typeof r?b.data.time.format=r:r instanceof Array&&(b.data.time.format=d3.locale(w.format).timeFormat.multi(r)),b.data.time.multiFormat=b.data.time.format;else{for(var r=b.data.time.stepType,
A=b.data.time.totalType,x=[],z=t.indexOf(r);z<=t.indexOf(A);z++){var C=z-1<t.indexOf(r)?t[z]:t[z-1],C=y(C,t[z],t[z]===C&&r!==A);x.push([C,v[z]])}b.data.time.format=d3.locale(w.format).timeFormat(y(r,A));1<x.length?(x[x.length-1][1]=function(b){return!0},b.data.time.multiFormat=d3.locale(w.format).timeFormat.multi(x)):b.data.time.multiFormat=b.data.time.format}b.data.time.ticks=[];v=d3.min(b.data.time.values);y=d3.max(b.data.time.values);for(r=0;r<=b.data.time.stepIntervals;r++)A=new Date(v),A["set"+
b.data.time.stepType](A["get"+b.data.time.stepType]()+r),A<=y&&b.data.time.ticks.push(A);b.dev.value&&h.timeEnd(c)}b.dev.value&&(c="nesting data by time and depths",h.time(c));b.data.nested={};if(0===b.data.time.values.length)b.data.nested.all={},b.id.nesting.forEach(function(c,f){var d=b.id.nesting.slice(0,f+1);b.data.nested.all[c]=g(b,b.data.value,d)});else{var D=b.data.value.reduce(function(c,g){var d=f(b,g,b.time.value).getTime();d in c||(c[d]=[]);c[d].push(g);return c},{});b.data.time.values.forEach(function(c){var f=
c.getTime();b.data.nested[f]={};b.id.nesting.forEach(function(c,d){var h=b.id.nesting.slice(0,d+1);b.data.nested[f][c]=g(b,D[f],h)})})}b.dev.value&&h.timeEnd(c)}},{"../../util/uniques.coffee":209,"../console/print.coffee":52,"../fetch/value.coffee":67,"./nest.js":60}],57:[function(b,c,d){var g;g=b("../fetch/value.coffee");c.exports=function(b,c,d){var l,m,p,t,u;l=d3.nest();if(b.id.grouping.value)for(void 0===d&&(d=b.id.nesting),m=p=0,t=d.length;p<t;m=++p)u=d[m],m<b.depth.value&&function(c){return l.key(function(d){return g(b,
d.d3plus,c)})}(u);t=[];m=0;for(p=c.length;m<p;m++)d=c[m],(u=b.size.value?g(b,d,b.size.value):1)&&"number"===typeof u&&0<u&&(delete d.d3plus.r,delete d.d3plus.x,delete d.d3plus.y,t.push({d3plus:d,id:d[b.id.value],value:u}));return l.entries(t)}},{"../fetch/value.coffee":67}],58:[function(b,c,d){var g,f,h=[].indexOf||function(b){for(var c=0,f=this.length;c<f;c++)if(c in this&&this[c]===b)return c;return-1};g=b("../console/print.coffee");f=b("../../object/validate.coffee");c.exports=function(b,c){var d,
p,t,u,n,q,r,w;q=c+" key analysis";b.dev.value&&g.time(q);b[c].keys={};d=function(g){var n,r,p,q;if(g instanceof Array){q=[];r=0;for(p=g.length;r<p;r++)n=g[r],q.push(d(n));return q}if(f(g)){r=[];for(n in g)p=g[n],0===n.indexOf("d3plus")||0<=h.call(b[c].keys,n)||null===p?r.push(void 0):r.push(b[c].keys[n]=typeof p);return r}};if(f(b[c].value))for(p in u=d3.keys(b[c].value).length===b.id.nesting.length,n=b[c].value,n)if(r=n[p],u&&0<=b.id.nesting.indexOf(p)&&f(r))for(t in r)w=r[t],d(w);else d(r);else for(p in t=
b[c].value,t)r=t[p],d(r);if(b.dev.value)return g.time(q)}},{"../../object/validate.coffee":171,"../console/print.coffee":52}],59:[function(b,c,d){var g,f;g=b("../console/print.coffee");f=b("../../object/validate.coffee");c.exports=function(b,c,d){var m,p,t;(m=b.dev.value)&&g.time("loading "+c);t=b[c].url;b[c].filetype.value?p=b[c].filetype.value:(p=t.slice(t.length-5).split("."),(p=1<p.length?p[1]:!1)?("txt"===p&&(p="text"),0>b[c].filetype.accepted.indexOf(p)&&(p="json")):p="json");return("dsv"===
p?d3.dsv(b[c].delimiter.value,"text/plain"):d3[p])(t,function(u,n){var q,r;if(!u&&n){if("function"===typeof b[c].callback){if(r=b[c].callback(n))if(f(r)&&c in r)for(q in r)q in b&&(b[q].value=r[q]);else b[c].value=r}else b[c].value=n;0>["json"].indexOf(p)&&b[c].value.forEach(function(b){var c;c=[];for(q in b)isNaN(b[q])?"false"===b[q].toLowerCase()?c.push(b[q]=!1):"true"===b[q].toLowerCase()?c.push(b[q]=!0):"null"===b[q].toLowerCase()?c.push(b[q]=null):"undefined"===b[q].toLowerCase()?c.push(b[q]=
void 0):c.push(void 0):c.push(b[q]=parseFloat(b[q]));return c});b[c].changed=!0;b[c].loaded=!0}else b.error.internal='Could not load data from: "'+t+'"';m&&g.timeEnd("loading "+c);return d()})}},{"../../object/validate.coffee":171,"../console/print.coffee":52}],60:[function(b,c,d){var g=b("../fetch/value.coffee"),f=b("../../object/validate.coffee"),h=b("../../util/uniques.coffee"),k=function(b,c){function g(b){b instanceof Array?b.forEach(g):f(b)&&c in b&&(b[c]instanceof Array?b[c].forEach(g):d.push(b))}
var d=[];g(b);return d},l=function(b){function c(b){for(var g=0;g<b.length;g++){var d=b[g];d&&(d.constructor===Array?c(d):f.push(d))}}var f=[];c(b);return h(f)},m=function(b){return b.values&&b.values.length?(b.children=b.values.map(function(b){return m(b)}),delete b.values,b):b.values?b.values:b};c.exports=function(b,c,f,d){void 0===d&&(d=!0);var q=d3.nest(),r=[],w="temp"in b?["active","temp","total"]:[];f.length?f.forEach(function(c,f){q.key(function(f){return g(b,f,c)})}):q.key(function(b){return!0});
d&&b.axes&&b.axes.discrete&&(!b.time||b[b.axes.discrete].value!==b.time.value)&&q.key(function(c){return g(b,c,b[b.axes.discrete].value)});d=f.length&&0<=b.id.nesting.indexOf(f[f.length-1]);var v=f.length&&d?f.length-1:0;q.rollup(function(c){if(1===c.length&&"d3plus"in c[0])return r.push(c[0]),c[0];c=c.reduce(function(b,c){if(c.values instanceof Array)return b.concat(c.values);b.push(c);return b},[]);var d={d3plus:{data:{},depth:v}};if(d3.sum(c,function(b){return"d3plus"in b&&b.d3plus.merged?1:0})===
c.length)for(var m=0;m<c.length;m++){var n=c[m];d.d3plus.merged||(d.d3plus.merged=[]);d.d3plus.merged=d.d3plus.merged.concat(n.d3plus.merged);n.d3plus.text&&(d.d3plus.text=n.d3plus.text)}for(m=0;m<w.length;m++){var q=w[m],n=b.aggs&&b.aggs.value[t]?b.aggs.value[t]:"sum";d.d3plus[q]="d3plus"in c[0]&&q in c[0].d3plus?d3.sum(c,function(b){return b.d3plus[q]}):"function"===typeof n?n(c):d3[n](c,function(c){var f="total"===q?1:0;b[q].value&&(f=g(b,c,b[q].value),"number"!==typeof f&&(f=f?1:0));return f})}for(var t in b.data.keys){if(t in
d.d3plus.data)d[t]=d.d3plus[t];else{var n=b.aggs&&b.aggs.value[t]?b.aggs.value[t]:"sum",y=typeof n,H=b.data.keys[t],m=0<=b.id.nesting.indexOf(t),I="time"in b&&t===b.time.value;t in d.d3plus.data?d[t]=d.d3plus[t]:"function"===y?d[t]=b.aggs.value[t](c):I?d[t]=l(h(c,t)):b.axes&&b.axes.discrete&&b[b.axes.discrete].value===t?d[t]=h(c,t):"number"!==H||"string"!==y||m?(n=k(c,t),y=1===n.length?n[0][t]:h(n,t),1===n.length?d[t]=y:y&&y.length?(y instanceof Array||(y=[y]),m&&b.id.nesting.indexOf(t)>v?d[t]=n:
d[t]=y):m&&b.id.nesting.indexOf(t)-1>=v&&(!("endPoint"in d.d3plus)||d.d3plus.endPoint>v)&&(d.d3plus.endPoint=v)):(m=c.map(function(b){return b[t]}),m=m.filter(function(b){return typeof b===H}),m.length&&(d[t]=d3[n](m)))}t in d&&d[t]instanceof Array&&1===d[t].length&&(d[t]=d[t][0])}for(m=0;m<f.length;m++)n=f[m],n in d||(d[n]=g(b,c[0],n));r.push(d);return d});var y=function(c,g,d){if(c.children){"number"==b.data.keys[f[g]]&&(c.key=parseFloat(c.key));d[f[g]]=c.key;delete c.key;for(var h in d)c[h]=d[h];
g++;c.children.forEach(function(b){y(b,g,d)})}},q=q.entries(c).map(m).map(function(b){y(b,0,{});return b});return r}},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"../fetch/value.coffee":67}],61:[function(b,c,d){var g=b("../../array/sort.coffee"),f=b("./nest.js"),h=b("../fetch/value.coffee");b("../fetch/color.coffee");var k=b("../fetch/text.js");c.exports=function(b,c,d){var t;t=!1===b.size.threshold.value?0:"number"===typeof b.size.threshold.value?b.size.threshold.value:"function"===
typeof b.size.threshold.value?b.size.threshold.value(b):"number"===typeof b.types[b.type.value].threshold?b.types[b.type.value].threshold:"function"===typeof b.types[b.type.value].threshold?b.types[b.type.value].threshold(b):.02;if("number"==typeof t&&0<t){var u=[],n=0===b.depth.value?0:{},q=[],r=[],w=[],v={},y=d3.nest();d&&y.key(function(c){return h(b,c,d)});y.rollup(function(c){var f=c.length;b.aggs.value[b.size.value]?"function"==typeof b.aggs.value[b.size.value]?f=b.aggs.value[b.size.value](c):
"string"==typeof b.aggs.value[b.size.value]&&(f=d3[b.aggs.value[b.size.value]](c,function(c){return h(b,c,b.size.value)})):f=d3.sum(c,function(c){return h(b,c,b.size.value)});c=d?h(b,c[0],d):"all";return v[c]=f}).entries(c);c.forEach(function(c){var f=h(b,c,b.id.value),g=h(b,c,b.size.value),k=d?h(b,c,d):"all";g/v[k]>=t&&0>u.indexOf(f)&&(u.push(f),b.depth.value&&(c=h(b,c,b.id.nesting[b.depth.value-1]),0>r.indexOf(c)&&r.push(c)))});c=c.filter(function(c){var f=h(b,c,b.id.value),f=0<=u.indexOf(f),g=
b.depth.value?h(b,c,b.id.nesting[b.depth.value-1]):null;null!==g&&0>r.indexOf(g)&&0>w.indexOf(g)&&w.push(g);if(!f){var d=h(b,c,b.size.value);0<d&&(0===b.depth.value?d>n&&(n=d):(g in n||(n[g]=0),d>n[g]&&(n[g]=d)),q.push(c))}return f});1<q.length?(q=g(q,b.size.value,"desc",[],b),y=b.id.nesting.slice(0,b.depth.value),0<=b.types[b.type.value].requirements.indexOf(b.axes.discrete)&&y.push(b[b.axes.discrete].value),y=f(b,q,y),y.forEach(function(c){var f=b.id.nesting[b.depth.value-1],g=h(b,c,f);children=
f?q.filter(function(c){return h(b,c,f)===g}):q;if(1<children.length){b.id.nesting.forEach(function(f,g){if(b.depth.value==g){var d=c[f];c[f]="string"===typeof d?"d3plus_other_"+d:"d3plus_other"}else g>b.depth.value&&delete c[f]});b.color.value&&"string"===b.color.type&&(c[b.color.value]=0===b.depth.value?b.color.missing:h(b,g,b.color.value,f));b.icon.value&&(c[b.icon.value]=h(b,g,b.icon.value,f));g&&(c.d3plus.depth=b.depth.value);var d;if(0===b.depth.value)d=b.format.value(b.format.locale.value.ui.values,
{key:"threshold",vars:b}),d+=" < "+b.format.value(n,{key:b.size.value,vars:b});else if(d=k(b,c,b.depth.value-1),d=d.length?d[0].split(" < ")[0]:b.format.value(b.format.locale.value.ui.values,{key:"threshold",vars:b}),g,0>w.indexOf(g))d+=" < "+b.format.value(n[g],{key:b.size.value,vars:b});if(g,0>w.indexOf(g))d+=" ("+b.format.value(100*t,{key:"share",vars:b})+")";c.d3plus.threshold=n;c.d3plus.merged=children;b.text.value&&(c[b.text.value]=d);c.d3plus.text=d}})):y=q;return c.concat(y)}return c}},{"../../array/sort.coffee":34,
"../fetch/color.coffee":63,"../fetch/text.js":66,"../fetch/value.coffee":67,"./nest.js":60}],62:[function(b,c,d){var g;g=b("../../font/sizes.coffee");c.exports=function(b,c){var d,l,m,p,t,u,n,q,r,w,v,y,A,x,z,C;C=c.values||b.data.time.ticks;y=c.style||{};t=c.limit||b.width.value;A={};q=b.data.time.periods;v=b.data.time.stepType;x=b.data.time.totalType;m=b.data.time.functions;p=b.data.time.getFormat;u=b.format.locale.value.format;if(b.time.format.value)A.format=b.data.time.format,A.values=C,A.sizes=
g(C.map(function(b){return A.format(b)}),y);else for(n=q.indexOf(v);n<=q.indexOf(x);){z=C.filter(function(b){var c,f;if(n===q.indexOf(v))return!0;c=!0;f=n-1;if(0>n)return!0;for(;f>=q.indexOf(v)&&c;)c=!m[f](b),f--;return c});if(q[n]===x)l=d3.locale(u).timeFormat(p(q[n],x));else{r=n;for(l=[];r<=q.indexOf(x);)d=r-1<q.indexOf(v)?r:r-1,d=q[d],w=q[r]===d&&v!==x,d=p(d,q[r],w),l.push([d,m[r]]),r++;l[l.length-1][1]=function(){return!0};l=d3.locale(u).timeFormat.multi(l)}r=g(z.map(function(b){return l(b)}),
y);if(d3.sum(r,function(b){return b.width})<t||n===q.indexOf(x)){A.format=l;A.values=z;A.sizes=r;break}n++}return A}},{"../../font/sizes.coffee":101}],63:[function(b,c,d){var g,f,h,k,l,m,p;g=b("./value.coffee");k=b("../../color/random.coffee");m=b("../../color/validate.coffee");p=b("../../object/validate.coffee");l=b("../../util/uniques.coffee");c.exports=function(b,c,d){var k,m,w;if(p(c)&&"d3plus"in c&&"color"in c.d3plus)return c.d3plus.color;void 0===d&&(d=b.id.value);"number"===typeof d&&(d=b.id.nesting[d]);
if(b.color.value){m=[];for(w=b.id.nesting.indexOf(d);0<=w;){k=b.id.nesting[w];k=l(c,b.color.value,g,b,k);1===k.length&&(k=k[0]);if(!(k instanceof Array)&&void 0!==k&&null!==k){c=f(b,c,k,d);0>m.indexOf(c)&&m.push(c);break}w--}return 1===m.length?m[0]:b.color.missing}return h(b,c,d)};f=function(b,c,f,g){return f?b.color.valueScale?b.color.valueScale(f):m(f)?f:h(b,f,g):b.color.value&&"function"===typeof b.color.valueScale?b.color.valueScale(0):h(b,c,g)};h=function(b,c,f){p(c)&&(c=g(b,c,f));c instanceof
Array&&(c=c[0]);return k(c,b.color.scale.value)}},{"../../color/random.coffee":47,"../../color/validate.coffee":51,"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"./value.coffee":67}],64:[function(b,c,d){var g=b("../data/filter.js"),f=b("../data/nest.js"),h=b("../console/print.coffee"),k=b("../../string/format.js"),l=b("../../string/list.coffee");c.exports=function(b,c,d){if(!b.data.value)return[];void 0===d&&(d=b.depth.value);var u=b.id.nesting[d];!c||c instanceof Array||(c=[c]);
if(!c&&"time"in b){c=[];var n=b.time.solo.value.length?"solo":"mute",q=b.time[n].value;if(q.length){c=[];for(var r=0;r<q.length;r++){var w=q[r];if("function"===typeof w)for(var v=0;v<b.data.time.values.length;v++){var y=b.data.time.values[v].getTime();w(y)&&c.push(y)}else w.constructor===Date?c.push((new Date(w)).getTime()):(w+="",4===w.length&&parseInt(w)+""===w&&(w+="/01/01"),w=new Date(w),"Invalid Date"!==w&&c.push(w.getTime()))}"mute"===n&&(c=b.data.time.values.filter(function(b){return 0>c.indexOf(b.getTime())}))}else c.push("all")}else c=
["all"];if(0<=c.indexOf("all")&&b.data.time.values.length)for(c=b.data.time.values.slice(0),n=0;n<c.length;n++)c[n]=c[n].getTime();n=[b.type.value,u,d].concat(b.data.filters).concat(c);w=b.data.solo.length?"solo":"mute";q=d3.keys(b.data.cache);r=b.types[b.type.value].filter||void 0;if(b.data[w].length)for(v=0;v<b.data[w].length;v++){var y=b.data[w][v],A=b[y][w].value.slice(0);A.unshift(y);A.unshift(w);n=n.concat(A)}b.axes&&b.axes.discrete&&n.push(b.axes.discrete);n=n.join("_");b.data.cacheID=n;for(w=
0;w<q.length;w++)if(q[w].split("_").slice(1).join("_")===n){n=(new Date).getTime()+"_"+n;b.data.cache[n]=b.data.cache[q[w]];delete b.data.cache[q[w]];break}if(b.data.cache[n])b.dev.value&&h.comment("data already cached"),w=b.data.cache[n].data,"nodes"in b&&(b.nodes.restricted=b.data.cache[n].nodes,b.edges.restricted=b.data.cache[n].edges),"function"===typeof r&&(w=r(b,w));else{v=[];w=[];if(b.data.value&&b.data.value.length)for(y=0;y<c.length;y++)A=c[y],b.data.nested[A]?w=w.concat(b.data.nested[A][u]):
v.push(A);if(0===w.length&&v.length&&!b.error.internal)1<v.length&&(v=d3.extent(v)),v=v.map(function(c){return b.data.time.format(new Date(c))}),v=v.join(" - "),d=b.format.locale.value.error.dataYear,v=l(v,b.format.locale.value.ui.and),b.error.internal=k(d,v),b.time.missing=!0;else{b.time&&(b.time.missing=!1);if(1<c.length){var x=!1;["x","y","x2","y2"].forEach(function(c){b[c].value===b.time.value&&"discrete"===b[c].scale.value&&(x=!0)});x||(d=b.id.nesting.slice(0,d+1),w=f(b,w,d))}w=w?g(b,w):[];20===
q.length&&(q.sort(),delete b.data.cache[q[0]]);n=(new Date).getTime()+"_"+n;b.data.cache[n]={data:w};"nodes"in b&&(b.data.cache[n].nodes=b.nodes.restricted,b.data.cache[n].edges=b.edges.restricted);"function"===typeof r&&(w=r(b,w));b.dev.value&&h.comment("storing data in cache")}}return w}},{"../../string/format.js":172,"../../string/list.coffee":173,"../console/print.coffee":52,"../data/filter.js":55,"../data/nest.js":60}],65:[function(b,c,d){var g,f,h;h=b("./value.coffee");g=b("./color.coffee");
f=b("./text.js");c.exports=function(b,c,d,p,t){var u,n,q,r,w,v;d instanceof Array||(d=[d]);p instanceof Array||(p=[p]);b&&(void 0===t?t=b.id.value:"number"!==typeof t&&(t=b.id.nesting.indexOf(t)));w={};n=0;for(r=d.length;n<r;n++)q=d[n],v=b?0<=p.indexOf(q)?g(b,c,t):q===b.text.value?f(b,c,t):3===d3.keys(c).length&&c.d3plus&&c.key&&c.values?h(b,c.values.map(function(b){return b.d3plus}),q,t):h(b,c,q,t):c[q],0<=[b.data.keys[q],b.attrs.keys[q]].indexOf("number")?(u=b.order.agg.value||b.aggs.value[q]||
"sum",v instanceof Array||(v=[v]),v=d3[u](v)):(v instanceof Array&&(v=v[0]),v="string"===typeof v?v.toLowerCase():v),w[q]=v;return w}},{"./color.coffee":63,"./text.js":66,"./value.coffee":67}],66:[function(b,c,d){var g=b("./value.coffee"),f=b("../../object/validate.coffee"),h=b("../../util/uniques.coffee");c.exports=function(b,c,d){"number"!==typeof d&&(d=b.depth.value);var p=b.id.nesting[d],t;b.text.nesting&&f(b.text.nesting)?t=b.text.nesting[p]?b.text.nesting[p]:b.text.value:(t=[],b.text.value&&
d===b.depth.value&&t.push(b.text.value),t.push(p));t instanceof Array||(t=[t]);var u=[];if(f(c)&&"d3plus"in c&&c.d3plus.text)u.push(c.d3plus.text.toString()),u.push(b.format.value(c.d3plus.text.toString(),{vars:b,data:c}));else{var n=f(c)?c:void 0;n&&c[b.id.value]instanceof Array?c=c[b.id.value]:c instanceof Array||(c=[c]);t.forEach(function(f){var d=h(c,f,g,b,p);d.length&&(1<d.length&&(d=d.filter(function(b){return b instanceof Array||"string"===typeof b&&0>b.indexOf(" < ")})),d=d.map(function(c){if(c instanceof
Array)return c=c.filter(function(b){return b}),c.map(function(c){return b.format.value(c.toString(),{vars:b,data:n,key:f})});if(c)return b.format.value(c.toString(),{vars:b,data:n,key:f})}),1===d.length&&(d=d[0]),u.push(d))})}return u}},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"./value.coffee":67}],67:[function(b,c,d){var g,f,h,k,l,m,p,t,u;t=b("../../object/validate.coffee");p=b("../../util/uniques.coffee");m=function(b,c,d,k){var l,m;l=t(c);if("function"===typeof d&&l)return d(c,
b);if(l){if(d in c)return c[d];l=b.data.cacheID+"_"+k;g(c,l,b);if(d in c.d3plus.data[l])return c.d3plus.data[l][d];if(k in c)c=c[k];else if(b.id.value in c){c=c[b.id.value];k!==d&&(m=h(b,c,k,b.id.value));if(null===m||void 0===m)m=f(b,c,k,b.id.value);if(null===m||void 0===m)return null;if(k===d)return m;c=m}else return null}c instanceof Array&&!t(c[0])&&(c=p(c));return c instanceof Array&&t(c[0])&&(m=p(c,d),m.length)||(m=h(b,c,d,k))?m:m=f(b,c,d,k)};h=function(b,c,f,g){var d;b.data.viz instanceof Array&&
f in b.data.keys&&(d=p(l(b.data.viz,c,g),f));return d&&d.length?d:null};f=function(b,c,f,g){var d;if("attrs"in b&&b.attrs.value&&f in b.attrs.keys)if(b=t(b.attrs.value)&&g in b.attrs.value?b.attrs.value[g]:b.attrs.value,b instanceof Array){if(f=p(l(b,c,g),f),f.length)return f}else if(c instanceof Array){var h,k;if(d in b){k=[];g=0;for(h=c.length;g<h;g++)d=c[g],k.push(b[d]);c=k}else c=void 0;b=[c];if(b.length&&(f=p(b,f),f.length))return f}else if(c in b)return b[c][f];return null};l=function(b,c,f){return c instanceof
Array?b.filter(function(b){return 0<=c.indexOf(b[f])}):b.filter(function(b){return b[f]===c})};g=function(b,c,f){"d3plus"in b||(b.d3plus={});"data"in b.d3plus||(b.d3plus.data={});if(f.data.changed||f.attrs&&f.attrs.changed||!(c in b.d3plus.data))b.d3plus.data[c]={};return b};u=function(b,c,f,g,d){var h,k,l,m,p;if(null===d)return d;p="time"in b&&b.time.value===g;d instanceof Array||(d=[d]);k=l=0;for(m=d.length;l<m;k=++l)h=d[k],p&&null!==h&&h.constructor!==Date&&(h+="",4===h.length&&parseInt(h)+""===
h&&(h+="/01/01"),h=new Date(h),"Invalid Date"!==h&&(d[k]=h));1===d.length&&(d=d[0]);null===d||!t(c)||"string"!==typeof g||g in c||(b=b.data.cacheID+"_"+f,c.d3plus.data[b][g]=d);return d};k=function(b,c,f,g){var d,h,k,l,z;z=[];h=0;for(k=c.length;h<k;h++)d=c[h],t(d)?(l=m(b,d,f,g),z.push(u(b,d,g,f,l))):z.push(d);"number"!==typeof z[0]&&(z=p(z));return 1===z.length?z[0]:z};c.exports=function(b,c,f,g){var d;if(!f)return null;if("number"===typeof f)return f;d=t(c);g||(g=b.id.value);d&&c.values instanceof
Array?d=k(b,c.values,f,g):d&&c[f]instanceof Array?d=k(b,c[f],f,g):c instanceof Array?d=k(b,c,f,g):(d=m(b,c,f,g),d=u(b,c,g,f,d));return d}},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209}],68:[function(b,c,d){c.exports=function(b){var c,d;0>["div","svg"].indexOf(b)&&(b="div");c="div"===b?{}:{position:"absolute"};d=d3.select("body").selectAll(b+".d3plus_tester").data([0]);d.enter().append(b).attr("class","d3plus_tester").style({position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",
display:"block"}).attr(c);return d}},{}],69:[function(b,c,d){c.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",
set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",
methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},
lowercase:"a an and as at but by for from if in into near nor of on onto or per that the to with via vs vs.".split(" "),message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",
order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d",
"Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",loading:"loading...",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",primary:"primary connections",share:"share",total:"total",values:"values"},
uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs GDP HVAC ID IT R&D TV UI".split(" "),visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",tree_map:"Tree Map"}}},{}],70:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," \u20ac"],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",
time:"%H:%M:%S",periods:["AM","PM"],days:"domingo lunes martes mi\u00e9rcoles jueves viernes s\u00e1bado".split(" "),shortDays:"dom lun mar mi\u00e9 jue vie s\u00e1b".split(" "),months:"enero febrero marzo abril mayo junio julio agosto septiembre octubre noviembre diciembre".split(" "),shortMonths:"ene feb mar abr may jun jul ago sep oct nov dic".split(" ")},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",deprecated:"el m\u00e9todo {0} ha sido eliminado, por favor, actualiza tu c\u00f3digo para utilizar {1}.",
noChange:"{0} no se actualiza porque no cambi\u00f3.",noContainer:"no se puede encontrar un contenedor en la p\u00e1gina correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los v\u00ednculos no se pueden enlazar con si mismos. eliminando autom\u00e1ticamente el v\u00ednculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},
error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes librer\u00edas: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes librer\u00edas: {1}.",method:"{0} visualizaciones requieren establecer el \u200b\u200bm\u00e9todo {1}.",methods:"{0} visualizaciones requieren establecer los siguientes m\u00e9todos: {1}."},
lowercase:"una y en pero en de o el la los las para a con".split(" "),method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"\u00edcono",id:"id",height:"alto",labels:"r\u00f3tulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",mute:"ocultar",order:"orden",search:"b\u00fasqueda",shape:"forma",size:"tama\u00f1o",solo:"aislar",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"l\u00ednea de tiempo",total:"segmentos totales",
type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"#ERROR!",mode:"modo"},time:["fecha","d\u00eda","mes","hora","a\u00f1o"],visualization:{bubbles:"Burbujas",chart:"Tabla",geo_map:"Mapa Geo",line:"L\u00ednea Solar",network:"Red",rings:"Anillos",scatter:"Gr\u00e1fico De Dispersi\u00f3n",stacked:"\u00c1rea Apilada",tree_map:"Mapa de \u00c1rbol",bar:"Gr\u00e1fico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Gr\u00e1fico de Pastel",table:"Tabla"},ui:{and:"y",back:"atr\u00e1s",collapse:"click para cerrar",
error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} m\u00e1s",moreInfo:"clic para m\u00e1s informaci\u00f3n",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"porcentaje",total:"total",values:"valores",including:"Incluyendo",or:"o"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},
uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs PIB HVAC ID TI I&D TV UI".split(" ")}},{}],71:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," \u20ac"],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),shortDays:"dim. lun. mar. mer. jeu. ven. sam.".split(" "),months:"janvier f\u00e9vrier mars avril mai juin juillet ao\u00fbt septembre octobre novembre d\u00e9cembre".split(" "),
shortMonths:"janv. f\u00e9vr. mars avr. mai juin juil. ao\u00fbt sept. oct. nov. d\u00e9c.".split(" ")},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",deprecated:"{0} a \u00e9t\u00e9 \u00e9limin\u00e9 de la version courante, mettez \u00e0 jour votre code source avec {1}.",noChange:"{0} n'a pas \u00e9t\u00e9 mis \u00e0 jour car inchang\u00e9.",noContainer:"impossible de trouver un contenant correspondant \u00e0 {0}.",of:"de",oldStyle:"les propri\u00e9t\u00e9s de {0} ont \u00e9t\u00e9 imbriqu\u00e9es dans .{1}().",
sameEdge:"un arc ne peut pas boucler sur lui m\u00eame. L'auto-r\u00e9f\u00e9rence est automatiquement \u00e9limin\u00e9e {0}.",set:"{0} a \u00e9t\u00e9 mis \u00e0 jour.",setLong:"{0} a \u00e9t\u00e9 mis \u00e0 jour \u00e0 {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de donn\u00e9es disponibles",
dataYear:"Pas de donn\u00e9es disponibles pour {0}.",lib:"La visualisation de {0} n\u00e9cessite le chargement de la librairie {1}.",libs:"La visualisation de {0} n\u00e9cessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la d\u00e9finition de {1}.",methods:"La visualisation du {0} exige les d\u00e9finitions de {1}."},lowercase:"un une de des et mais les ou pour avec comme par vers si dans pr\u00e8s ni dessus que le la via sinon alors".split(" "),method:{active:"segments actifs",
color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"\u00edcone",id:"id",height:"hauteur",labels:"labels",legend:"l\u00e9gende",margin:"marge",messages:"messages",mute:"cacher",order:"ordre",search:"recherche",shape:"format",size:"taille",solo:"isoler",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode"},time:["ann\u00e9e","date","jour","heure",
"mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geo_map:"Carte",line:"Courbes",network:"R\u00e9seau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empil\u00e9es",tree_map:"Arbre",bar:"Diagramme en barres",box:"Bo\u00eetes \u00e0 Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour r\u00e9duire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de r\u00e9sultat correspondant \u00e0 {0}.",
primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou"},message:{data:"analyse des donn\u00e9es",draw:"trac\u00e9 en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"r\u00e9initialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs PIB HVAC ID IT TV UI".split(" ")}},{}],72:[function(b,c,d){c.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["\u20a9",
""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["\uc624\uc804","\uc624\ud6c4"],days:"\uc77c\uc694\uc77c \uc6d4\uc694\uc77c \ud654\uc694\uc77c \uc218\uc694\uc77c \ubaa9\uc694\uc77c \uae08\uc694\uc77c \ud1a0\uc694\uc77c".split(" "),shortDays:"\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0".split(""),months:"1\uc6d4 2\uc6d4 3\uc6d4 4\uc6d4 5\uc6d4 6\uc6d4 7\uc6d4 8\uc6d4 9\uc6d4 10\uc6d4 11\uc6d4 12\uc6d4".split(" "),shortMonths:"1\uc6d4 2\uc6d4 3\uc6d4 4\uc6d4 5\uc6d4 6\uc6d4 7\uc6d4 8\uc6d4 9\uc6d4 10\uc6d4 11\uc6d4 12\uc6d4".split(" ")},
dev:{accepted:"{0} {1}, \ub2e4\uc74c \uc911 \ud558\ub098\ub97c \uc0ac\uc6a9\ud558\uc2ed\uc2dc\uc624\uc5d0 \ub300\ud55c \ud5c8\uc6a9 \uac12\uc774 \uc544\ub2d9\ub2c8\ub2e4 : {2}.",deprecated:"{0} \uba54\uc18c\ub4dc\uac00 \uc81c\uac70 \ub41c, \uc0ac\uc6a9\ud558\ub294 \ucf54\ub4dc\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uc2ed\uc2dc\uc624 {1}.",noChange:"{0}\uc774 \ubcc0\uacbd\ub418\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 \uc5c5\ub370\uc774\ud2b8\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.",noContainer:"\ud398\uc774\uc9c0 \ub9e4\uce6d {0}\uc5d0 \ucee8\ud14c\uc774\ub108\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4.",
of:"\uc758",oldStyle:"{0} \uc9c0\uae08\uc5d0 \uc9c1\uc811 \ub0b4\uc7a5 \ub41c\uc704\ud55c \uc2a4\ud0c0\uc77c\uc758 \ud638\ud154 .{1}().",sameEdge:"\uac00\uc7a5\uc790\ub9ac\ub294 \uc790\uc2e0\uc5d0 \ub9c1\ud06c \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc790\ub3d9\uc73c\ub85c \uc790\uccb4 \ucc38\uc870 \uac00\uc7a5\uc790\ub9ac {0}\uc744 \uc81c\uac70\ud558\ub294 \ub2e8\uacc4\ub97c \ud3ec\ud568\ud55c\ub2e4.",set:"{0} \uc124\uc815\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.",setLong:"{0} {1}\ub85c \uc124\uc815\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.",
setContainer:".container() \uc0ac\uc6a9\ud558\uc5ec \ucee8\ud14c\uc774\ub108 \uc0ac\uc5c5\ubd80\ub97c \uc815\uc758\ud558\uc2ed\uc2dc\uc624"},error:{accepted:"{0} \uc544\ub2c8\ub2e4 \ud5c8\uc6a9 {1} {2} \uc2dc\uac01\ud654\ub294 \ub2e4\uc74c \uc911 \ud558\ub098\ub97c \uc0ac\uc6a9\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4 : {3}.",connections:"{0}\uc5d0 \ub300\ud55c \uc5f0\uacb0\uc774 \uc5c6\uc74c.",data:"\uc790\ub8cc \uc5c6\uc74c",dataYear:"{0}\uc5d0 \ub300\ud55c \uc790\ub8cc\uac00 \uc5c6\uc74c.",lib:"{0} \uc2dc\uac01\ud654\ub294 {1} \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c\ub85c\ub4dc \ud560 \ud544\uc694\ud569\ub2c8\ub2e4.",
libs:"{0} \uc2dc\uac01\ud654\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c\ub85c\ub4dc \ud560 \ud544\uc694 : {1}.",method:"{0} \uc2dc\uac01\ud654\ub97c \uc704\ud574 {1} \uba54\uc11c\ub4dc\ub97c \uc124\uc815\ud574\uc57c \ud55c\ub2e4.",methods:"{0} \uc2dc\uac01\ud654\ub97c \uc704\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \uba54\uc11c\ub4dc\ub97c \uc124\uc815\ud574\uc57c\ud55c\ub2e4: {1}."},lowercase:[],method:{active:"\ud65c\uc131 \uc138\uadf8\uba3c\ud2b8",color:"\uc0c9",depth:"\uae4a\uc774",
dev:"\ud480\uc5b4\uc11c",focus:"\ucd08\uc810",icon:"\uc0c1",id:"\uc2e0\ubd84\uc99d",height:"\ub192\uc774",labels:"\ub77c\ubca8",legend:"\ubc94\ub840",margin:"\uc5ec\uc720",messages:"\uc0c1\ud0dc \uba54\uc2dc\uc9c0",order:"\uc8fc\ubb38",search:"\uc218\uc0c9",shape:"\ubaa8\uc591",size:"\ud06c\uae30",style:"\uc2a4\ud0c0\uc77c",temp:"\uc784\uc2dc \uc138\uadf8\uba3c\ud2b8",text:"\ubcf8\ubb38",time:"\uc2dc\uac01",timeline:"\ud0c0\uc784 \ub77c\uc778",total:"\ucd1d \uc138\uadf8\uba3c\ud2b8",type:"\uc720\ud615",
width:"\ud3ed",x:"X \ucd95",y:"Y \ucd95",zoom:"\uc90c",mode:"\ubaa8\ub4dc",mute:"\uc228\uae40",solo:"\ub3c5\uc8fc"},time:["\ub0a0\uc9dc","\uc694\uc77c","\uc6d4","\uc2dc\uac04","\ub144"],visualization:{bubbles:"\ubc84\ube14 \ucc28\ud2b8",chart:"\ucc28\ud2b8",geo_map:"\uc9c0\ub3c4\ud615",line:"\uc120\ud615 \uadf8\ub798\ud504",network:"\ub124\ud2b8\uc6cc\ud06c \uadf8\ub798\ud504",rings:"\ubc18\uc9c0",scatter:"\uc0b0\ud3ec\ub3c4",stacked:"\uc2a4\ud0dd \uc601\uc5ed",tree_map:"\ud2b8\ub9ac \ub9f5",bar:"\ub9c9\ub300 \ucc28\ud2b8",
box:"\ubc15\uc2a4 \ud50c\ub86f",paths:"\uacbd\ub85c",pie:"\ud30c\uc774 \ucc28\ud2b8",table:"\ud45c"},ui:{and:"\uacfc",back:"\ub4a4\ub85c",collapse:"\ucd95\uc18c\ud558\ub824\uba74 \ud074\ub9ad",error:"\uc624\ub958",expand:"\ud655\uc7a5\ud558\ub824\uba74 \ud074\ub9ad",loading:"\ub85c\ub4dc \uc911 ...",more:"{0} \uc774\uc0c1",moreInfo:"\ucd94\uac00 \uc815\ubcf4\ub97c \uc704\ud574 \ud074\ub9ad\ud558\uc2ed\uc2dc\uc624",noResults:"\uc77c\uce58\ud558\ub294 \uacb0\uacfc\uac12\uc774 \uc5c6\uc74c {0}.",primary:"\uae30\ubcf8 \uc5f0\uacb0",
share:"\ube44\uc911",total:"\ud569\uacc4",values:"\uac12",including:"...\uc744 \ud3ec\ud568\ud558\uc5ec",or:"\ub610\ub294"},message:{data:"\ub370\uc774\ud130 \ubd84\uc11d \uc911",draw:"\ub370\uc774\ud130 \uc2dc\uac01\ud654 \uc911",initializing:"\ucd08\uae30\ud654 {0}",loading:"\ub370\uc774\ud130 \ub85c\ub529 \uc911",tooltipReset:"\ud234\ud301\uc744 \uc7ac\uc124\uc815",ui:"UI \uc5c5\ub370\uc774\ud2b8 \uc911"},uppercase:"CEO;\ucd5c\uace0 \uacbd\uc601\uc790;\ucd5c\uace0 \uc7ac\ubb34 \ucc45\uc784\uc790 (CFO);CFO\ub294;CNC;COO;\uad6c\uad6c;CPU;CPU\ub97c;\uad6d\ub0b4 \ucd1d\uc0dd\uc0b0 (GDP);HVAC;ID;IT;R & D;TV;UI".split(";")}},
{}],73:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," \u0434\u0435\u043d."],dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"\u043d\u0435\u0434\u0435\u043b\u0430 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0440\u0442\u043e\u043a \u043f\u0435\u0442\u043e\u043a \u0441\u0430\u0431\u043e\u0442\u0430".split(" "),
shortDays:"\u043d\u0435\u0434 \u043f\u043e\u043d \u0432\u0442\u043e \u0441\u0440\u0435 \u0447\u0435\u0442 \u043f\u0435\u0442 \u0441\u0430\u0431".split(" "),months:"\u0458\u0430\u043d\u0443\u0430\u0440\u0438 \u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438 \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0438\u043b \u043c\u0430\u0458 \u0458\u0443\u043d\u0438 \u0458\u0443\u043b\u0438 \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438 \u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438 \u043d\u043e\u0435\u043c\u0432\u0440\u0438 \u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split(" "),
shortMonths:"\u0458\u0430\u043d \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0458 \u0458\u0443\u043d \u0458\u0443\u043b \u0430\u0432\u0433 \u0441\u0435\u043f \u043e\u043a\u0442 \u043d\u043e\u0435 \u0434\u0435\u043a".split(" ")},dev:{accepted:"{0} \u043d\u0435 \u0435 \u043f\u0440\u0438\u0444\u0430\u0442\u0435\u043da \u0432\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u0430 \u0437\u0430 {1}, \u0432\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u0442\u0435 \u0435\u0434\u043da \u043e\u0434 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u0432\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u0438: {2}.",
deprecated:"{0} \u043c\u0435\u0442\u043e\u0434 \u0435 \u043e\u0442\u0441\u0442\u0440\u0430\u043d\u0435\u0442\u0430, \u0432\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u043e\u0431\u043d\u043e\u0432\u0435\u0442\u0435 \u0433\u043e \u0432\u0430\u0448\u0438\u043e\u0442 \u043a\u043e\u0434 \u0437\u0430 \u0434\u0430 \u0441\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0438 {1}.",noChange:"{0} \u043d\u0435 \u0435 \u0430\u0436\u0443\u0440\u0438\u0440\u0430\u043d\u0430, \u0431\u0438\u0434\u0435\u0458\u045c\u0438 \u043d\u0435\u043c\u0430\u0448\u0435 \u043f\u0440\u043e\u043c\u0435\u043d\u0438.",
noContainer:"\u043d\u0435 \u043c\u043e\u0436e \u0434\u0430 \u0441\u0435 \u043d\u0430\u0458\u0434\u0435 \u043a\u043e\u043d\u0442\u0435\u0458\u043d\u0435\u0440 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0442\u0430 \u043a\u043e\u0458 \u0441\u0435 \u0441\u043e\u0432\u043f\u0430\u0453\u0430 \u0441\u043e {0}.",of:"\u043d\u0430",oldStyle:"\u0441\u0432\u043e\u0458\u0441\u0442\u0432\u0430\u0442\u0430 \u0437\u0430 \u0441\u0442\u0438\u043b\u043e\u0442 \u0437\u0430 {0} \u0441\u0435\u0433\u0430 \u0441\u0435 \u0432\u0433\u0440\u0430\u0434\u0435\u043d\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043d\u043e \u0432\u043e. {1} ().",
sameEdge:"\u0440\u0430\u0431\u043e\u0432\u0438\u0442\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435 \u0434\u0430 \u0438\u043c\u0430\u0430\u0442 \u0430\u043b\u043a\u0430 \u0441\u0430\u043c\u0438\u0442\u0435 \u043a\u043e\u043d \u0441\u0435\u0431\u0435. \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0441\u043a\u0438 \u0433\u0438 \u043e\u0442\u0441\u0442\u0440\u0430\u043d\u0443\u0432\u0430\u043c \u0440\u0430\u0431\u043e\u0432\u0438\u0442\u0435 \u043a\u043e\u0438 \u0441\u0435 \u0441\u0430\u043c\u043e-\u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0440\u0430\u0430\u0442 {0}.",
set:"{0} \u0435 \u043d\u0430\u043c\u0435\u0441\u0442\u0435\u043d.",setLong:"{0} \u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0435\u043d \u043d\u0430 {1}.",setContainer:"\u0412\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u0434\u0435\u0444\u0438\u043d\u0438\u0440\u0430\u0458\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u0458\u043d\u0435\u0440 div \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u0458\u045c\u0438 .container()"},error:{accepted:"{0} \u043d\u0435 \u0435 \u043f\u0440\u0438\u0444\u0430\u0442\u043b\u0438\u0432\u0430 \u0437\u0430 {1} {2} \u0432\u0438\u0437\u0443\u0435\u043b\u0438\u0437\u0430\u0446\u0438\u0458\u0430, \u0432\u0435 \u043c\u043e\u043b\u0438\u043c\u0435 \u043a\u043e\u0440\u0438\u0441\u0442\u0435\u0442\u0435 \u0435\u0434\u043d\u0430 \u043e\u0434 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435: {3}.",
connections:"\u043d\u0435 \u0435 \u0434\u043e\u0441\u0442\u0430\u043f\u043d\u0430 \u0437\u0430 \u0432\u0440\u0441\u043a\u0438 {0}.",data:"\u043d\u0435\u043c\u0430 \u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438",dataYear:"\u041d\u0435\u043c\u0430 \u0434\u043e\u0441\u0442\u0430\u043f\u043d\u0438 \u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438 \u0437\u0430 {0}.",lib:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430\u0430\u0442 \u0432\u0447\u0438\u0442\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0442\u0430 {1} .",
libs:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430\u0430\u0442 \u0432\u0447\u0438\u0442\u0443\u0432\u0430\u045a\u0435 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438: {1}.",method:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 {1} \u043c\u0435\u0442\u043e\u0434\u043e\u0442.",
methods:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0430\u0440\u0430\u0430\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 \u0441\u043b\u0435\u0434\u043d\u0438\u0432\u0435 \u043c\u0435\u0442\u043e\u0434\u0438: {1}."},lowercase:"a \u0438 \u0432\u043e \u043d\u043e \u043d\u0430 \u0438\u043b\u0438 \u0434\u0430 \u0441\u0435 \u0441\u043e".split(" "),method:{active:"\u0430\u043a\u0442\u0438\u0432\u043d\u0438 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0438",
color:"\u0431\u043e\u0458\u0430",depth:"\u0434\u043b\u0430\u0431\u043e\u0447\u0438\u043d\u0430",dev:"\u043e\u043f\u0448\u0438\u0440\u043d\u043e",focus:"\u0444\u043e\u043a\u0443\u0441",icon:"\u0438\u043a\u043e\u043d\u0430",id:"id",height:"\u0432\u0438\u0441\u0438\u043d\u0430",labels:"\u0435\u0442\u0438\u043a\u0435\u0442\u0438",legend:"\u043b\u0435\u0433\u0435\u043d\u0434\u0430",margin:"\u043c\u0430\u0440\u0433\u0438\u043d\u0430",messages:"\u043f\u043e\u0440\u0430\u043a\u0438 \u0437\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0442",
mute:"\u0441\u043a\u0440\u0438\u0435",order:"\u0446\u0435\u043b",search:"\u0431\u0430\u0440\u0430\u0458",shape:"\u0444\u043e\u0440\u043c\u0430",size:"\u0433\u043e\u043b\u0435\u043c\u0438\u043d\u0430",solo:"\u0438\u0437\u043e\u043b\u0438\u0440\u0430\u045a\u0435",style:"\u0441\u0442\u0438\u043b",temp:"\u043f\u0440\u0438\u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0438",text:"\u0442\u0435\u043a\u0441\u0442",time:"\u0432\u0440\u0435\u043c\u0435",timeline:"\u0432\u0440\u0435\u043c\u0435\u043f\u043b\u043e\u0432",
total:"\u0412\u043a\u0443\u043f\u043d\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0438",type:"\u0442\u0438\u043f",width:"\u0448\u0438\u0440\u0438\u043d\u0430",x:"x \u043e\u0441\u043a\u0430\u0442\u0430",y:"\u043e\u0441\u043a\u0430\u0442\u0430 y",zoom:"\u0437\u0443\u043c",mode:"\u0440\u0435\u0436\u0438\u043c"},time:["\u0434\u0430\u0442\u0443\u043c","\u0434\u0435\u043d","\u043c\u0435\u0441\u0435\u0446","\u0432\u0440\u0435\u043c\u0435","\u0433\u043e\u0434\u0438\u043d\u0430"],visualization:{bubbles:"\u041c\u0435\u0443\u0440\u0447\u0438\u045a\u0430",
chart:"\u0428\u0435\u043c\u0430",geo_map:"\u0413\u0435\u043e \u043c\u0430\u043f\u0430",line:"\u041b\u0438\u043d\u0438\u0441\u043a\u0438 \u0433\u0440\u0430\u0444\u0438\u043a",network:"\u041c\u0440\u0435\u0436\u0430",rings:"\u041f\u0440\u0441\u0442\u0435\u043d\u0438",scatter:"\u0420\u0430\u0441\u043f\u0440\u0441\u043a\u0430\u043d \u0433\u0440\u0430\u0444\u0438\u043a",stacked:"\u041d\u0430\u0440\u0435\u0434\u0435\u043d\u0430 \u043f\u043e\u0432\u0440\u0448\u0438\u043d\u0430",tree_map:"\u041c\u0430\u043f\u0430 \u0432\u043e \u0432\u0438\u0434 \u043d\u0430 \u0434\u0440\u0432\u043e",
bar:"\u0411\u0430\u0440 \u0442\u0430\u0431\u0435\u043b\u0430",box:"\u041a\u0443\u0442\u0438\u0458\u0430 \u041f\u0430\u0440\u0446\u0435\u043b",paths:"\u041f\u0430\u0442\u0435\u043a\u0438",pie:"\u041f\u0438\u0442\u0430 \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u043d",table:"\u0422\u0430\u0431\u0435\u043b\u0430"},ui:{and:"\u0438",back:"\u043d\u0430\u0437\u0430\u0434",collapse:"\u043a\u043b\u0438\u043a\u043d\u0438 \u0437\u0430 \u0434\u0430 \u0441\u0435 \u0441\u043e\u0431\u0435\u0440\u0435",error:"\u0433\u0440\u0435\u0448\u043a\u0430",
expand:"\u043a\u043b\u0438\u043a\u043d\u0438 \u0437\u0430 \u0434\u0430 \u0441\u0435 \u043f\u0440\u043e\u0448\u0438\u0440\u0438",loading:"\u0421\u0435 \u0432\u0447\u0438\u0442\u0443\u0432\u0430 ...",more:"{0} \u043f\u043e\u0432\u0435\u045c\u0435",moreInfo:"\u043a\u043b\u0438\u043a\u043d\u0435\u0442\u0435 \u0437\u0430 \u043f\u043e\u0432\u0435\u045c\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",noResults:"\u041d\u0435 \u0441\u0435 \u043f\u0440\u043e\u043d\u0430\u0458\u0434\u0435\u043d\u0438 \u043f\u043e\u0458\u0430\u0432\u0443\u0432\u0430\u045a\u0435 \u043d\u0430 {0}.",
primary:"\u043e\u0441\u043d\u043e\u0432\u043d\u043e \u0432\u0440\u0441\u043a\u0438",share:"\u0443\u0434\u0435\u043b",total:"\u0412\u043a\u0443\u043f\u043d\u0438\u043e\u0442",values:"\u0432\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u0438",including:"\u0412\u043a\u043b\u0443\u0447\u0443\u0432\u0430\u0458\u045c\u0438",or:"\u0438\u043b\u0438"},message:{data:"\u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043d\u0430 \u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438",draw:"\u0446\u0440\u0442\u0430\u045a\u0435 \u043d\u0430 \u0432\u0438\u0437\u0443\u0435\u043b\u0438\u0437\u0430\u0446\u0438\u0458\u0430",
initializing:"\u0438\u043d\u0438\u0446\u0438\u0458\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0458\u0430 {0}",loading:"\u043f\u043e\u0434\u0430\u0442\u043e\u0446\u0438 \u0437\u0430 \u0432\u0447\u0438\u0442\u0443\u0432\u0430\u045a\u0435",tooltipReset:"\u0440\u0435\u0441\u0435\u0442\u0438\u0440\u0430\u045a\u0435 \u043d\u0430 \u043e\u0431\u0458\u0430\u0441\u043d\u0443\u0432\u0430\u045a\u0430\u0442\u0430",ui:"\u0430\u0436\u0443\u0440\u0438\u0440\u0430\u045a\u0435 \u043d\u0430 \u043a\u043e\u0440\u0438\u043d\u0438\u0447\u043a\u0438\u043e\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0458\u0441"},
uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs GDP HVAC ID IT R&D TV UI".split(" ")}},{}],74:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Domingo Segunda Ter\u00e7a Quarta Quinta Sexta S\u00e1bado".split(" "),shortDays:"Dom Seg Ter Qua Qui Sex S\u00e1b".split(" "),months:"Janeiro Fevereiro Mar\u00e7o Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" "),
shortMonths:"Jan Fev Mar Abr Mai Jun Jul Ago Set Out Nov Dez".split(" ")},dev:{accepted:"{0} n\u00e3o \u00e9 um valor v\u00e1lido para {1}, por favor use um dos seguintes procedimentos: {2}.",deprecated:"{0} m\u00e9todo foi removido, por favor atualize seu c\u00f3digo para utilizar {1}.",noChange:"{0} n\u00e3o foi atualizado porque ele n\u00e3o mudou.",noContainer:"N\u00e3o foi poss\u00edvel encontrar um local na p\u00e1gina correspondente a {0}.",of:"de",oldStyle:"propriedades de estilo para {0} j\u00e1 foi incorporado diretamente no. {1} ().",
sameEdge:"bordas n\u00e3o podem vincular a si mesmos. removendo automaticamente borda de auto-refer\u00eancia {0}.",set:"{0} foi definido.",setLong:"{0} foi definida para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} n\u00e3o \u00e9 um {1} reconhecido para visualiza\u00e7\u00f5es {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"N\u00e3o h\u00e1 conex\u00f5es dispon\u00edveis para {0}.",data:"N\u00e3o h\u00e1 dados dispon\u00edveis",dataYear:"N\u00e3o h\u00e1 dados dispon\u00edveis para {0}.",
lib:"A visualiza\u00e7\u00e3o {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualiza\u00e7\u00e3o {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualiza\u00e7\u00e3o {0} exige a defini\u00e7\u00e3o do m\u00e9todo {1}.",methods:"A visualiza\u00e7\u00e3o {0} exige a defini\u00e7\u00e3o dos m\u00e9todos {1}."},lowercase:"um uma e como em no na mas por para pelo pela de do da se perto nem ou que o a com v".split(" "),method:{active:"segmentos activos",color:"cor",depth:"profundidade",
dev:"verboso",focus:"foco",icon:"\u00edcone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",mute:"ocultar",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",solo:"isolar",style:"estilo",temp:"segmentos tempor\u00e1rios",text:"texto",time:"tempo",timeline:"linha do tempo",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo"},time:["data","dia","m\u00eas","hora","ano"],
visualization:{bubbles:"Bolhas",chart:"Gr\u00e1fico",geo_map:"Mapa",line:"Gr\u00e1fico de Linha",network:"Rede",rings:"An\u00e9is",scatter:"Dispers\u00e3o",stacked:"Evolu\u00e7\u00e3o",tree_map:"Tree Map",bar:"Gr\u00e1fico de Barras",box:"Box Plot",paths:"Caminhos",pie:"Pie Chart",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para fechar",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informa\u00e7\u00f5es",noResults:"nenhum resultado para {0}.",
primary:"conex\u00f5es prim\u00e1rias",share:"participa\u00e7\u00e3o",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"analisando dados",draw:"desenhando visualiza\u00e7\u00e3o",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs PIB HVAC ID TI P&D TV IU".split(" ")}},{}],75:[function(b,c,d){c.exports={format:{decimal:",",thousands:".",grouping:[3],
currency:["\u20ac",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Domingo Segunda Ter\u00e7a Quarta Quinta Sexta S\u00e1bado".split(" "),shortDays:"Dom Seg Ter Qua Qui Sex S\u00e1b".split(" "),months:"Janeiro Fevereiro Mar\u00e7o Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" "),shortMonths:"Jan Fev Mar Abr Mai Jun Jul Ago Set Out Nov Dez".split(" ")},dev:{accepted:"{0} n\u00e3o \u00e9 um valor v\u00e1lido para {1}, por favor escolha uma das seguintes op\u00e7\u00f5es: {2}.",
deprecated:"o m\u00e9todo {0} foi removido, por favor atualize o seu c\u00f3digo para usar {1}.",noChange:"{0} n\u00e3o foi atualizado porque n\u00e3o houve modifica\u00e7\u00f5es.",noContainer:"N\u00e3o foi poss\u00edvel encontrar um elemento na p\u00e1gina correspondente a {0}.",of:"de",oldStyle:"as propriedades de {0} j\u00e1 foram inclu\u00eddas em .{1}().",sameEdge:"bordas n\u00e3o podem vincular a si mesmos. removendo automaticamente borda de auto-refer\u00eancia {0}.",set:"{0} foi definido.",
setLong:"{0} foi alterado para {1}.",setContainer:"por favor indique um elemento div atrav\u00e9s do m\u00e9todo .container()"},error:{accepted:"{0} n\u00e3o \u00e9 uma {1} v\u00e1lida para a visualiza\u00e7\u00e3o {2}, por favor escolha uma das seguintes: {3}.",connections:"n\u00e3o existem liga\u00e7\u00f5es dispon\u00edveis para {0}.",data:"n\u00e3o existem dados dispon\u00edveis",dataYear:"n\u00e3o existem dados dispon\u00edveis para {0}.",lib:"a visualiza\u00e7\u00e3o {0} necessita que a biblioteca {1} seja carregada.",
libs:"a visualiza\u00e7\u00e3o {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualiza\u00e7\u00e3o {0} exige a defini\u00e7\u00e3o do m\u00e9todo {1}.",methods:"A visualiza\u00e7\u00e3o {0} exige a defini\u00e7\u00e3o dos seguintes m\u00e9todos {1}."},lowercase:"um uma e como em no na mas por para pelo pela de do da se perto nem ou que o a com v".split(" "),method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"\u00edcone",
id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos tempor\u00e1rios",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"#ERROR!",mute:"ocultar",solo:"isolar"},time:["data","dia","m\u00eas","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",
geo_map:"Mapa",line:"Gr\u00e1fico de Linha",network:"Grafo",rings:"An\u00e9is",scatter:"Gr\u00e1fico de Dispers\u00e3o",stacked:"Gr\u00e1fico de \u00c1rea",tree_map:"Tree Map",bar:"Gr\u00e1fico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"Caminhos",pie:"Gr\u00e1fico de Setores",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informa\u00e7\u00f5es",noResults:"nenhum resultado para {0}.",
primary:"liga\u00e7\u00f5es principais",share:"propor\u00e7\u00e3o",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"a analisar os dados",draw:"a desenhar a visualiza\u00e7\u00e3o",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informa\u00e7\u00e3o",ui:"a actualizar o interface"},uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs PIB HVAC ID TI I&D TV IU".split(" ")}},{}],76:[function(b,c,d){c.exports={format:{decimal:",",
thousands:"\u00a0",grouping:[3],currency:[""," \u0440\u0443\u0431."],dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),
shortDays:"\u0432\u0441 \u043f\u043d \u0432\u0442 \u0441\u0440 \u0447\u0442 \u043f\u0442 \u0441\u0431".split(" "),months:"\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" "),
shortMonths:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" ")},dev:{accepted:"{0} \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 {1}, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445: {2}.",
deprecated:"\u041c\u0435\u0442\u043e\u0434 {0} \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0432\u0430\u0448 \u043a\u043e\u0434, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c {1}.",noChange:"{0} \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u043d \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f.",
noContainer:"\u043d\u0435 \u043c\u043e\u0433\u0443 \u043d\u0430\u0439\u0442\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f {0}.",of:"\u0438\u0437",oldStyle:"\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0441\u0442\u0438\u043b\u044f \u0434\u043b\u044f {0} \u0443\u0436\u0435 \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0431\u044b\u043b\u0438 \u0432\u0441\u0442\u0440\u043e\u0435\u043d \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0432. {1} ().",
sameEdge:"\u041a\u0440\u0430\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0435\u0431\u044f. \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0443\u0434\u0430\u043b\u044f\u044f \u0430\u0432\u0442\u043e\u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0442\u043d\u044b\u0445 \u0440\u0435\u0431\u0440\u043e {0}.",set:"{0} \u0431\u044b\u043b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d.",setLong:"{0} \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 {1}.",
setContainer:"\u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 DIV \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e .container ()"},error:{accepted:"{0} \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f {1} \u0434\u043b\u044f {2} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445: {3}.",
connections:"\u043d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f {0}.",data:"\u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b",dataYear:"\u043d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 {0}.",lib:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 {1} \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443.",
libs:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a: {1}.",method:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 {1} \u043c\u0435\u0442\u043e\u0434\u0430.",
methods:"{0} \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432: {1}."},lowercase:"\u0438;\u043a\u0430\u043a;\u0432;\u043d\u043e;\u0434\u043b\u044f;\u0438\u0437;\u0435\u0441\u043b\u0438 \u0432;\u0432;\u043d\u0435\u0434\u0430\u043b\u0435\u043a\u043e;\u043d\u0438;\u043d\u0430;\u043d\u0430;\u0438\u043b\u0438;\u0432;\u0447\u0442\u043e;\u043a;\u0441;\u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e;\u043f\u0440\u043e\u0442\u0438\u0432;\u043f\u0440\u043e\u0442\u0438\u0432".split(";"),
method:{active:"\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u044b",color:"\u0446\u0432\u0435\u0442",depth:"\u0433\u043b\u0443\u0431\u0438\u043d\u0430",dev:"\u043c\u043d\u043e\u0433\u043e\u0441\u043b\u043e\u0432\u043d\u044b\u0439",focus:"\u0444\u043e\u043a\u0443\u0441",icon:"\u0437\u043d\u0430\u0447\u043e\u043a",id:"ID",height:"\u0432\u044b\u0441\u043e\u0442\u0430",labels:"\u043d\u0430\u0434\u043f\u0438\u0441\u0438",legend:"\u043b\u0435\u0433\u0435\u043d\u0434\u0430",
margin:"\u043f\u043e\u043b\u0435",messages:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438",mute:"\u0441\u043a\u0440\u044b\u0432\u0430\u0442\u044c",order:"\u043f\u043e\u0440\u044f\u0434\u043e\u043a",search:"\u043f\u043e\u0438\u0441\u043a",shape:"\u0444\u043e\u0440\u043c\u0430",size:"\u0440\u0430\u0437\u043c\u0435\u0440",solo:"\u0438\u0437\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c",style:"\u0441\u0442\u0438\u043b\u044c",
temp:"\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u044b",text:"\u0442\u0435\u043a\u0441\u0442",time:"\u0432\u0440\u0435\u043c\u044f",timeline:"\u0433\u0440\u0430\u0444\u0438\u043a",total:"\u0432\u0441\u0435\u0433\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432",type:"\u0442\u0438\u043f",width:"\u0448\u0438\u0440\u0438\u043d\u0430",x:"\u043e\u0441\u044c \u0445",y:"\u041e\u0441\u044c Y",zoom:"\u043c\u0430\u0441\u0448\u0442\u0430\u0431",
mode:"\u0440\u0435\u0436\u0438\u043c"},time:["\u0434\u0430\u0442\u0430","\u0434\u0435\u043d\u044c","\u043c\u0435\u0441\u044f\u0446","\u0432\u0440\u0435\u043c\u044f","\u0433\u043e\u0434"],visualization:{bubbles:"\u041f\u0443\u0437\u044b\u0440\u0438",chart:"\u0413\u0440\u0430\u0444\u0438\u043a",geo_map:"\u0413\u0435\u043e \u041a\u0430\u0440\u0442\u0430",line:"\u041b\u0438\u043d\u0438\u044f \u0437\u0435\u043c\u043b\u044f",network:"\u0421\u0435\u0442\u044c",rings:"\u041a\u043e\u043b\u044c\u0446\u0430",
scatter:"\u0420\u0430\u0437\u0431\u0440\u043e\u0441 \u0437\u0435\u043c\u043b\u044f",stacked:"\u0421 \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u0435\u043c \u041f\u043b\u043e\u0449\u0430\u0434\u044c",tree_map:"\u0414\u0435\u0440\u0435\u0432\u043e \u041a\u0430\u0440\u0442\u0430",bar:"\u0413\u0438\u0441\u0442\u043e\u0433\u0440\u0430\u043c\u043c\u0430",box:"\u041a\u043e\u0440\u043e\u0431\u043a\u0430 \u0437\u0435\u043c\u043b\u044f",paths:"\u041f\u0443\u0442\u0438",pie:"\u041a\u0440\u0443\u0433\u043e\u0432\u0430\u044f \u0434\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0430",
table:"\u0421\u0442\u043e\u043b"},ui:{and:"\u0438",back:"\u043d\u0430\u0437\u0430\u0434",collapse:"\u0429\u0435\u043b\u043a\u043d\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c",error:"\u043e\u0448\u0438\u0431\u043a\u0430",expand:"\u0449\u0435\u043b\u043a\u043d\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c",loading:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ...",more:"{0} \u0431\u043e\u043b\u0435\u0435",
moreInfo:"\u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",noResults:"\u043d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 {0}.",primary:"\u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f",
share:"\u0434\u043e\u043b\u044f",total:"\u043e\u0431\u0449\u0435\u0435",values:"\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f",including:"\u0432\u043a\u043b\u044e\u0447\u0430\u044f",or:"\u0438\u043b\u0438"},message:{data:"\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u044f \u0434\u0430\u043d\u043d\u044b\u0435",draw:"\u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f",initializing:"\u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 {0}",
loading:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445",tooltipReset:"\u0441\u0431\u0440\u043e\u0441 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438",ui:"\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430"},uppercase:["ID"]}},{}],77:[function(b,c,d){c.exports={format:{decimal:".",
thousands:",",grouping:[3],currency:["\u00a5",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["\u4e0a\u5348","\u4e0b\u5348"],days:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),shortDays:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),months:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),
shortMonths:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" ")},dev:{accepted:"{0}\u4e0d\u662f{1}\u7684\u53ef\u63a5\u53d7\u503c, \u8bf7\u7528\u4e0b\u5217\u4e4b\u4e00\u7684\u503c:{2}",deprecated:"{0}\u7684\u65b9\u6cd5\u5df2\u88ab\u79fb\u9664, \u8bf7\u66f4\u65b0\u60a8\u7684\u4ee3\u7801\u53bb\u4f7f\u7528{1}",noChange:"{0}\u6ca1\u6709\u66f4\u65b0, \u56e0\u4e3a\u5b83\u5e76\u6ca1\u6709\u6539\u53d8\u3002",
noContainer:"\u65e0\u6cd5\u5728\u8be5\u9875\u627e\u5230\u5bb9\u5668\u53bb\u5339\u914d{0}",of:"\u7684",oldStyle:"\u6837\u5f0f\u5c5e\u6027{0}\u73b0\u5728\u5df2\u7ecf\u76f4\u63a5\u5d4c\u5165\u5230\u3002{1}\uff08\uff09\u3002",sameEdge:"\u8fb9\u7f18\u4e0d\u80fd\u94fe\u63a5\u5230\u81ea\u5df1\u3002\u81ea\u52a8\u53bb\u9664\u81ea\u6211\u53c2\u7167\u8fb9\u7f18{0}\u3002",set:"{0}\u5df2\u7ecf\u88ab\u8bbe\u7f6e\u3002",setLong:"{0}\u88ab\u8bbe\u7f6e\u4e3a{1}\u3002",setContainer:"\u8bf7\u4f7f\u7528()\u5bb9\u5668\u6765\u5b9a\u4e49div\u5bb9\u5668"},
error:{accepted:"{0}\u5bf9\u4e8e{2}\u7684\u53ef\u89c6\u5316\u6548\u679c\u5e76\u4e0d\u662f\u4e00\u4e2a\u53ef\u63a5\u53d7\u7684{1}, \u8bf7\u4f7f\u7528\u5982\u4e0b\u7684\u4e00\u4e2a\uff1a{3}.",connections:"\u6ca1\u6709\u5bf9{0}\u53ef\u7528\u7684\u8fde\u63a5\u3002",data:"\u65e0\u53ef\u7528\u6570\u636e",dataYear:"\u6ca1\u6709\u6570\u636e\u5bf9{0}\u53ef\u7528\u3002",lib:"{0}\u7684\u53ef\u89c6\u5316\u8981\u6c42\u88c5\u8f7d{1}\u5e93\u3002",libs:"{0}\u7684\u53ef\u89c6\u5316\u9700\u8981\u52a0\u8f7d\u4ee5\u4e0b\u5e93\uff1a{1}\u3002",
method:"{0}\u7684\u53ef\u89c6\u5316\u8981\u6c42\u8bbe\u7f6e{1}\u65b9\u6cd5\u3002",methods:"{0}\u7684\u53ef\u89c6\u5316\u8981\u6c42\u8bbe\u7f6e\u4ee5\u4e0b\u65b9\u6cd5\uff1a{1}\u3002"},lowercase:"\u4e00\u4e2a \u548c \u5728 \u4f46\u662f \u5728...\u91cc \u7684 \u6216\u8005 \u8fd9 \u5411 \u4e0e...\u4e00\u8d77".split(" "),method:{active:"\u6d3b\u8dc3\u6bb5",color:"\u989c\u8272",depth:"\u6df1\u5ea6",dev:"\u8be6\u7ec6",focus:"\u7126\u70b9",icon:"\u56fe\u6807",id:"\u8eab\u4efd\u8ba4\u8bc1",height:"\u9ad8\u5ea6",
labels:"\u6807\u7b7e",legend:"\u56fe\u4f8b\u6ce8\u91ca",margin:"\u5916\u8fb9\u8ddd",messages:"\u72b6\u6001\u6d88\u606f",mute:"\u9690\u85cf",order:"\u89c4\u5219",search:"\u641c\u7d22",shape:"\u5f62\u72b6",size:"\u5927\u5c0f",solo:"\u9694\u79bb",style:"\u6837\u5f0f",temp:"\u6682\u65f6\u6027\u533a\u6bb5",text:"\u6587\u672c",time:"\u65f6\u95f4",timeline:"\u65f6\u95f4\u8f74",total:"\u603b\u6bb5",type:"\u7c7b\u578b",width:"\u5bbd\u5ea6",x:"X\u8f74",y:"Y\u8f74",zoom:"\u7f29\u653e",mode:"\u6a21\u5f0f"},time:["\u65e5",
"\u661f\u671f","\u6708","\u65f6\u95f4","\u5e74"],visualization:{bubbles:"\u6c14\u6ce1",chart:"\u56fe\u8868",geo_map:"\u5730\u7406\u5730\u56fe",line:"\u7ebf\u56fe",network:"\u7f51\u7edc",rings:"\u7279\u6027",scatter:"\u6563\u70b9\u56fe",stacked:"\u5806\u79ef\u9762\u79ef\u56fe",tree_map:"\u6811\u56fe",bar:"\u6761\u56fe",box:"\u7bb1\u7ebf\u56fe",paths:"\u8def\u5f84",pie:"\u997c\u56fe",table:"\u8868"},ui:{and:"\u548c",back:"\u540e\u9762",collapse:"\u70b9\u51fb\u5408\u5e76",error:"\u9519\u8bef",expand:"\u5355\u51fb\u4ee5\u5c55\u5f00",
loading:"\u8f7d\u5165\u4e2d...",more:"{0}\u66f4\u591a",moreInfo:"\u70b9\u51fb\u4e86\u89e3\u66f4\u591a\u4fe1\u606f",noResults:"\u6ca1\u6709\u7ed3\u679c\u5339\u914d{0}\u3002",primary:"\u4e3b\u8981\u8fde\u63a5",share:"\u5171\u4eab",total:"\u603b",values:"\u503c",including:"\u5305\u62ec",or:"\u6216"},message:{data:"\u5206\u6790\u6570\u636e",draw:"\u7ed8\u5236\u53ef\u89c6\u5316",initializing:"\u521d\u59cb\u5316{0}",loading:"\u52a0\u8f7d\u6570\u636e",tooltipReset:"\u91cd\u7f6e\u5de5\u5177\u63d0\u793a",
ui:"\u66f4\u65b0UI"},uppercase:"CEO CEOs CFO CFOs CNC COO COOs CPU CPUs GDP HVAC ID \u7535\u89c6 \u7528\u6237\u754c\u9762 \u7814\u53d1".split(" ")}},{}],78:[function(b,c,d){c.exports={en_US:b("./languages/en_US.coffee"),es_ES:b("./languages/es_ES.js"),fr_FR:b("./languages/fr_FR.js"),ko_KR:b("./languages/ko_KR.js"),mk_MK:b("./languages/mk_MK.js"),pt_BR:b("./languages/pt_BR.js"),pt_PT:b("./languages/pt_PT.js"),ru_RU:b("./languages/ru_RU.js"),zh_CN:b("./languages/zh_CN.js")}},{"./languages/en_US.coffee":69,
"./languages/es_ES.js":70,"./languages/fr_FR.js":71,"./languages/ko_KR.js":72,"./languages/mk_MK.js":73,"./languages/pt_BR.js":74,"./languages/pt_PT.js":75,"./languages/ru_RU.js":76,"./languages/zh_CN.js":77}],79:[function(b,c,d){var g,f,h,k,l,m,p,t,u;f=b("../../util/copy.coffee");l=b("../console/print.coffee");m=b("./process/detect.coffee");p=b("./set.coffee");t=b("../../string/format.js");u=b("../../object/validate.coffee");c.exports=function(b,c){var g,d,l;l=[];for(g in c)d=c[g],b[g]=f(d),b[g].initialized=
k(b,b[g],g),l.push(b.self[g]=h(b,g));return l};k=function(b,c,f,g){var d,h,p,x,z;c.previous=!1;c.changed=!1;c.initialized=!1;c.callback=!1;"init"in c&&!("value"in c)&&(c.value=c.init(b),delete c.init);"process"in c&&(c.value=m(b,c,c.value));for(z in c)if("deprecates"===z)for(h=c[z]instanceof Array?c[z]:[c[z]],p=0,x=h.length;p<x;p++)d=h[p],b.self[d]=function(c,f){return function(d){var h,k;k=b.format.locale.value.dev.deprecated;c="."+c+"()";h=g?'"'+f+'" in .'+g+"()":"."+f+"()";d=g||f;l.error(t(k,c,
h),d);return b.self}}(d,f);else"global"===z?f in b||(b[f]=[]):"value"!==z&&u(c[z])&&k(b,c[z],z,f);return!0};h=function(b,c){return function(f,d){var h,k,m,p,z,C;h="accepted"in b[c]?b[c].accepted:null;"function"===typeof h&&(h=h(b));h instanceof Array||(h=[h]);if(f===Object)return b[c];if(!arguments.length&&0>h.indexOf(void 0))return"value"in b[c]?b[c].value:b[c];if("style"===c&&"object"===typeof f)for(z in h=b.format.locale.value.dev.oldStyle,f)l.warning(t(h,'"'+z+'"',z),z),b.self[z](f[z]);if("font"===
c)for(p in"string"===typeof f&&(f={family:f}),C=!0,m=function(b,c,f,g){u(b[f])&&c in b[f]&&(u(b[f][c])?b[f][c].value=b[f][c].process?b[f][c].process(g):g:b[f][c]=g)},k=function(b,c,f){var g;if(u(b)){if(C)for(g in b)m(b,c,g,f);else"font"in b&&m(b,c,"font",f);C=!1;for(g in b)k(b[g],c,f)}},f)z=f[p],"secondary"!==p&&(u(z)&&(z=z.value),z&&k(b,p,z));g(b,c,b,c,f);"function"===typeof d&&(b[c].callback=d);return!1===b[c].chainable?b[c].value:b.self}};g=function(b,c,f,d,h){var k,l,m;if(0>["accepted","changed",
"initialized","previous","process"].indexOf(d))if(m=u(h),k=u(f[d])&&"objectAccess"in f[d]&&!1===f[d].objectAccess,k=m&&(k||!("value"in h)&&(!u(f[d])||!(d3.keys(h)[0]in f[d]))),null===h||!m||k)p(b,c,f,d,h);else if(m)for(l in h)g(b,c,f[d],l,h[l])}},{"../../object/validate.coffee":171,"../../string/format.js":172,"../../util/copy.coffee":206,"../console/print.coffee":52,"./process/detect.coffee":87,"./set.coffee":93}],80:[function(b,c,d){c.exports=function(b){b||(b=!1);return{accepted:[!1,Array,Function,
Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:b,process:Array,value:[]}}},{}],81:[function(b,c,d){var g;g=b("../../../client/rtl.coffee");c.exports=function(b){var c;c=["left","center","right"];!1===b&&c.unshift(!1);0>c.indexOf(b)&&(b="left");return{accepted:c,process:function(b){return g?"left"===b?"right":"right"===b?"left":b:b},value:b}}},{"../../../client/rtl.coffee":40}],82:[function(b,c,d){c.exports=function(b){var c;c=["line-through","none","overline","underline"];
!1===b&&c.unshift(!1);0>c.indexOf(b)&&(b="none");return{accepted:c,value:b}}},{}],83:[function(b,c,d){var g,f;f=b("../../../font/validate.coffee");g=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"];c.exports=function(b){void 0===b&&(b=g);return{process:f,value:b}}},{"../../../font/validate.coffee":102}],84:[function(b,c,d){c.exports=function(b){var c;c=["top","middle","bottom"];!1===b&&c.unshift(!1);0>c.indexOf(b)&&(b="bottom");return{accepted:c,mapping:{top:"0ex",middle:"0.5ex",
bottom:"1ex"},process:function(b){this.text=b;return this.mapping[b]},value:b}}},{}],85:[function(b,c,d){c.exports=function(b){var c;c=["capitalize","lowercase","none","uppercase"];!1===b&&c.unshift(!1);0>c.indexOf(b)&&(b="none");return{accepted:c,value:b}}},{}],86:[function(b,c,d){c.exports=function(b,c,d){c.history&&c.history.reset();if(b.constructor===String){if(0<=b.indexOf("/"))return d.url=b,[];c=d3.selectAll(b);if(c.size())return c;0<=b.indexOf(".")&&(d.url=b);return[]}return b}},{}],87:[function(b,
c,d){var g,f;g=b("../../../util/copy.coffee");f=b("../../../array/update.coffee");c.exports=function(b,c,d){return c.process===Array?f(g(c.value),d):"object"===typeof c.process&&"string"===typeof d?c.process[d]:"function"===typeof c.process?c.process(d,b,c):d}},{"../../../array/update.coffee":35,"../../../util/copy.coffee":206}],88:[function(b,c,d){var g;g=b("../../../client/css.coffee");c.exports=function(b,c,d){return!1===b||0>b.indexOf("fa-")||0===b.indexOf("fa-")&&g("font-awesome")?b:d.fallback}},
{"../../../client/css.coffee":36}],89:[function(b,c,d){c.exports=function(b,c){var d,k,l,m,p,t;if("string"===typeof b){b=b.split(" ");d=k=0;for(l=b.length;k<l;d=++k)m=b[d],b[d]=parseFloat(m,10);b=1===b.length?b[0]:2===b.length?{top:b[0],right:b[1],bottom:b[0],left:b[1]}:3===b.length?{top:b[0],right:b[1],bottom:b[2],left:b[1]}:4===b.length?{top:b[0],right:b[1],bottom:b[2],left:b[3]}:0}l=["top","right","bottom","left"];if("number"===typeof b)for(d=0,m=l.length;d<m;d++)k=l[d],c[k]=b;else for(d=0,m=l.length;d<
m;d++)k=l[d],c[k]=b[k];c.css="";t=[];d=p=0;for(m=l.length;p<m;d=++p)k=l[d],d&&(c.css+=" "),t.push(c.css+=c[k]+"px");return t}},{}],90:[function(b,c,d){var g,f,h,k;g=b("../../array/contains.coffee");f=b("../../string/format.js");h=b("../../string/list.coffee");k=b("../console/print.coffee");c.exports=function(b,c,d,t,u){var n,q,r,w,v;"function"===typeof c&&(c=c(b));c instanceof Array||(c=[c]);n=g(c,d);if(!1===n&&void 0!==d){w=[];v=JSON.stringify(d);"string"!==typeof d&&(v='"'+v+'"');q=0;for(r=c.length;q<
r;q++)d=c[q],"string"===typeof d?w.push('"'+d+'"'):"function"===typeof d?w.push(d.toString().split("()")[0].substring(9)):void 0===d?w.push("undefined"):w.push(JSON.stringify(d));w=h(w,b.format.locale.value.ui.or);b.type&&0<=["mode","shape"].indexOf(t)?(c=b.format.locale.value.error.accepted,b=b.format.locale.value.visualization[b.type.value]||b.type.value,k.warning(f(c,v,t,b,w),t)):(c=b.format.locale.value.dev.accepted,k.warning(f(c,v,u,w),t))}return!n}},{"../../array/contains.coffee":33,"../../string/format.js":172,
"../../string/list.coffee":173,"../console/print.coffee":52}],91:[function(b,c,d){c.exports=function(b){var c;c=["auto","optimizeSpeed","crispEdges","geometricPrecision"];0<=c.indexOf(b)||(b="crispEdges");return{accepted:c,value:b}}},{}],92:[function(b,c,d){var g,f;f=b("../../object/validate.coffee");g=function(b,c){var d;b.changed&&(b.changed=!1);"draw"===c&&(b.frozen=!1,b.update=!0,b.first=!1);for(d in b)0>d.indexOf("d3plus")&&f(b[d])&&g(b[d],d)};c.exports=g},{"../../object/validate.coffee":171}],
93:[function(b,c,d){var g,f,h,k,l,m,p,t,u;g=b("../../util/copy.coffee");f=b("../../util/d3selection.coffee");u=b("../../object/validate.coffee");h=b("../../object/merge.coffee");k=b("../console/print.coffee");l=b("./process/detect.coffee");m=b("./rejected.coffee");p=b("../../string/format.js");t=b("../../array/update.coffee");c.exports=function(b,c,d,w,v){var y,A,x,z;z="value"!==w&&w&&w!==c?'"'+w+'" '+b.format.locale.value.dev.of+" ."+c+"()":"."+c+"()";y="value"===w&&"accepted"in d?d.accepted:u(d[w])&&
"accepted"in d[w]?d[w].accepted:[v];if(!m(b,y,v,c,z)){u(d[w])&&"value"in d[w]&&(x=w,d=d[w],w="value");"value"===w&&"process"in d&&(v=l(b,d,v));if(d[w]instanceof Array||d[w]!==v||void 0===v){d.changed=!0;d.loaded&&(d.loaded=!1);"history"in b&&"draw"!==c&&(y=g(d),y.method=c,b.history.chain.push(y));d.previous=d[w];if("id"in b&&"value"===w&&"nesting"in d)if("id"!==c){"object"!==typeof d.nesting&&(d.nesting={});if(u(v)){for(A in v)"string"===typeof v[A]&&(v[A]=[v[A]]);d.nesting=h(d.nesting,v);b.id.value in
d.nesting||(d.nesting[b.id.value]=v[d3.keys(v)[0]])}else d.nesting[b.id.value]=v instanceof Array?v:[v];d[w]=d.nesting[b.id.value][0]}else v instanceof Array?(d.nesting=v,"depth"in b&&b.depth.value<v.length?d[w]=v[b.depth.value]:(d[w]=v[0],"depth"in b&&(b.depth.value=0))):(d[w]=v,d.nesting=[v],"depth"in b&&(b.depth.value=0));else if("depth"===c){if(b.depth.value=v>=b.id.nesting.length?b.id.nesting.length-1:0>v?0:v,b.id.value=b.id.nesting[b.depth.value],"object"===typeof b.text.nesting&&(A=b.text.nesting[b.id.value]))b.text.nesting[b.id.value]=
"string"===typeof A?[A]:A,b.text.value=A instanceof Array?A[0]:A}else u(d[w])&&u(v)?d[w]=h(d[w],v):d[w]=v;"value"===w&&d.global&&(A=0<d[w].length,x=x||w,x in b&&(A&&0>b.data[x].indexOf(c)||!A&&0<=b.data[x].indexOf(c))&&(b.data[x]=t(b.data[x],c)));"value"===w&&d.dataFilter&&b.data&&0>b.data.filters.indexOf(c)&&b.data.filters.push(c);b.dev.value&&d.changed&&void 0!==d[w]&&(x=d[w]instanceof Array&&10<d[w].length,c=f(d[w]),A="function"===typeof d[w],x=x||c||A?null:"string"===typeof d[w]?d[w]:JSON.stringify(d[w]),
null!==x&&260>x.length?(c=b.format.locale.value.dev.setLong,k.log(p(c,z,'"'+x+'"'))):(c=b.format.locale.value.dev.set,k.log(p(c,z))))}else c=b.format.locale.value.dev.noChange,b.dev.value&&k.comment(p(c,z));"value"===w&&d.callback&&!d.url&&(d="function"===typeof d.callback?d.callback:d.callback.value)&&d(v,b.self)}}},{"../../array/update.coffee":35,"../../object/merge.coffee":170,"../../object/validate.coffee":171,"../../string/format.js":172,"../../util/copy.coffee":206,"../../util/d3selection.coffee":207,
"../console/print.coffee":52,"./process/detect.coffee":87,"./rejected.coffee":90}],94:[function(b,c,d){var g=b("../console/print.coffee"),f=b("../../string/format.js");c.exports=function(b){if(b.dev.value){var c="analyzing edges list";g.time(c)}var d=b.types[b.type.value].requirements;d instanceof Array||(d=[d]);var m=0<=d.indexOf("nodes")&&!b.nodes.value;if(m){b.nodes.value=[];var p=[];b.nodes.changed=!0}b.edges.value.forEach(function(c){["source","target"].forEach(function(f){var g=typeof c[b.edges[f]];
"object"!==g&&("number"!==g||m||"number"===b.data.keys[b.id.value]?m&&0<=p.indexOf(c[b.edges[f]])?c[b.edges[f]]=b.nodes.value.filter(function(g){return g[b.id.value]===c[b.edges[f]]})[0]:(g={},g[b.id.value]=c[b.edges[f]],c[b.edges[f]]=g):c[b.edges[f]]=b.nodes.value[c[b.edges[f]]]);g=c[b.edges[f]];m&&0>p.indexOf(g[b.id.value])&&(p.push(g[b.id.value]),b.nodes.value.push(g))});"keys"in b.data||(b.data.keys={});b.id.value in b.data.keys||(b.data.keys[b.id.value]=typeof c[b.edges.source][b.id.value])});
b.edges.value=b.edges.value.filter(function(c){var d=c[b.edges.source][b.id.value];return d===c[b.edges.target][b.id.value]?(g.warning(f(b.format.locale.value.dev.sameEdge,'"'+d+'"'),"edges"),!1):!0});b.edges.linked=!0;b.dev.value&&g.timeEnd(c)}},{"../../string/format.js":172,"../console/print.coffee":52}],95:[function(b,c,d){var g=b("./hideElement.js");c.exports=function(b){function c(b,f){[].forEach.call(f.attributes,function(c){if(/^data-/.test(c.name)){var f=c.name.substr(5).replace(/-(.)/g,function(b,
c){return c.toUpperCase()});b[f]=c.value}});d.forEach(function(c){null!==f.getAttribute(c)&&(b[c]=f.getAttribute(c))})}var d=[b.color.value,b.icon.value,b.keywords.value,b.alt.value,"style"];b.text.value||b.self.text("text");d=d.concat(b.id.nesting);b.self.data({element:b.data.value});var l=b.data.element.value.node().tagName.toLowerCase(),m=b.data.element.value.attr("type"),p=[];"select"===l?((l=b.data.element.value.node().id)&&b.self.container({id:l}),b.data.element.value.selectAll("option").each(function(g,
d){var k={};k.text=d3.select(this).text();c(k,this);p.push(k);if(this.selected)for(d=b.id.nesting.length-1;0<=d;d--){var l=b.id.nesting[d];if(l in k){b.self.focus(k[l]);break}}})):"input"===l&&"radio"===m&&((l=b.data.element.value.node().getAttribute("name"))&&b.self.container({id:l}),b.data.element.value.each(function(d,k){var l={};c(l,this);var m=l[b.id.value]||this.id||!1;m&&isNaN(parseFloat(m))&&(m=d3.select("label[for="+m+"]"),m.empty()||(l.text=m.html(),m.call(g)));p.push(l);this.checked&&b.self.focus(l[b.id.value])}));
!b.focus.value.length&&p.length&&(b.data.element.value.node().selectedIndex=0,b.self.focus(p[0][b.id.value]));l=d3.select("legend[for="+b.container.id+"]");l.empty()||(b.self.title(l.html()),l.call(g));l=b.container.value?b.container.value.node().tagName.toLowerCase():!1;if(!1===b.container.value||"body"===l)b.container.value=d3.select(b.data.element.value.node().parentNode);b.data.element.value.call(g);return p}},{"./hideElement.js":96}],96:[function(b,c,d){c.exports=function(b){b.style("position",
"absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],97:[function(b,c,d){var g=b("../console/print.coffee");c.exports=function(b){if("network"===b.type.value){if(b.dev.value){var c="analyzing node positions";g.time(c)}if(b.nodes.value.filter(function(b){return"number"===
typeof b.x&&"number"===typeof b.y}).length!==b.nodes.value.length){var d=d3.layout.force().size([b.width.viz,b.height.viz]).nodes(b.nodes.value).links(b.edges.value),l=b.edges.strength.value;l&&("string"===typeof l?d.linkStrength(function(b){return b[l]}):d.linkStrength(l));d.start();for(var m=50;0<m&&!(d.tick(),.01>d.alpha());--m);d.stop()}b.nodes.positions=!0;b.dev.value&&g.timeEnd(c)}}},{"../console/print.coffee":52}],98:[function(b,c,d){var g;g=b("numeric");c.exports=function(b,c){var d,l,m,p,
t,u,n,q,r,w,v,y,A,x,z;null==c&&(c={});null==c.maxDegree&&(c.maxDegree=5);d=b.length;y=Number.MAX_VALUE;t=null;m=function(){var g,d,k;k=[];n=g=1;for(d=c.maxDegree+1;1<=d?g<d:g>d;n=1<=d?++g:--g)k.push(function(){var c,g,d;d=[];g=0;for(c=b.length;g<c;g++)v=b[g],d.push(Math.pow(v[0],n));return d}());return k}();z=function(){var c,g,d;d=[];c=0;for(g=b.length;c<g;c++)v=b[c],d.push(v[1]);return d}();u=r=0;for(A=1<<c.maxDegree;0<=A?r<A:r>A;u=0<=A?++r:--r){p=[function(){var b,c;c=[];for(b=0;0<=d?b<d:b>d;0<=
d?++b:--b)c.push(1);return c}()];q=[0];l=w=0;for(x=c.maxDegree;0<=x?w<x:w>x;l=0<=x?++w:--w)0<(u&1<<l)&&(p.push(m[l]),q.push(l+1));l=g.transpose(p);u=q.length;p=g.dot(g.dot(g.inv(g.dot(p,l)),p),z);l=g.dot(l,p);w=g.sub(z,l);x=g.dot(w,w);w=x/(d-u);w=-.5*d*Math.log(2*Math.PI)-.5*d*Math.log(w)-x/(2*w);u=-2*w+u*(Math.log(d)-Math.log(2*Math.PI));u<y&&(y=u,t=[q,p,l])}return t}},{numeric:7}],99:[function(b,c,d){var g;g=b("static-kdtree");c.exports=function(b,c){var d,l,m,p,t,u,n,q,r,w,v;null==c&&(c=10);v=
g(b);n=function(){var g,d,k;k=[];g=0;for(d=b.length;g<d;g++)q=b[g],k.push(v.knn(q,c+1).slice(1));return k}();w=function(c,g){var d,h,k,l,m,n;d=b[c];h=b[g];c=m=l=0;for(n=d.length;0<=n?m<n:m>n;c=0<=n?++m:--m)k=d[c]-h[c],l+=k*k;return l};p=function(){var g,d,k;k=[];l=g=0;for(d=b.length;0<=d?g<d:g>d;l=0<=d?++g:--g)k.push(w(l,n[l][c-1]));return k}();r=function(b,c){return Math.max(w(b,c),p[c])};t=function(b){var f,g,d,k,l;k=0;l=n[b];g=0;for(d=l.length;g<d;g++)f=l[g],k+=r(b,f);return c/k};u=function(){var c,
g,d;d=[];l=c=0;for(g=b.length;0<=g?c<g:c>g;l=0<=g?++c:--c)d.push(t(l));return d}();return function(){var g,r,p,q,v,t;t=[];l=g=0;for(q=b.length;0<=q?g<q:g>q;l=0<=q?++g:--g){d=0;v=n[l];r=0;for(p=v.length;r<p;r++)m=v[r],d+=u[m];d/=c;t.push([l,d/u[l]])}return t}().sort(function(b,c){return c[1]-b[1]})}},{"static-kdtree":9}],100:[function(b,c,d){c.exports=function(b){var c,d;d=d3.median(b);c=d3.median(b.map(function(b){return Math.abs(b-d)}));return b.map(function(b,g){return[g,Math.abs(b-d)/c]}).sort(function(b,
c){return c[1]-b[1]})}},{}],101:[function(b,c,d){var g;g=b("../core/font/tester.coffee");c.exports=function(b,c,d){var l,m,p,t,u;d||(d={});c=c||{};u=d.parent||g("svg").append("text");p=[];b instanceof Array||(b=[b]);b=u.selectAll("tspan").data(b);t=0;"letter-spacing"in c&&(t=parseFloat(c["letter-spacing"]),delete c["letter-spacing"]);m=function(b){var c;c=0;t&&(c=(d3.select(b).text().length-1)*t);return b.getComputedTextLength()+c};l=function(b){return b.parentNode.getBBox().height||b.getBoundingClientRect().height};
b.enter().append("tspan").text(String).style(c).attr({left:"0px",position:"absolute",top:"0px",x:0,y:0}).each(function(b){if("function"===typeof d.mod)return d.mod(this)}).each(function(b){var c,f;c=d3.select(this).selectAll("tspan");c.size()?(f=[],c.each(function(){return f.push(m(this))}),f=d3.max(f)):f=m(this);c=l(this);return p.push({height:c,text:b,width:f})});b.remove();d.parent||u.remove();return p}},{"../core/font/tester.coffee":68}],102:[function(b,c,d){var g,f;g=b("../core/font/tester.coffee");
f=function(b){var c,d,m,p,t,u,n,q,r,w,v;b instanceof Array||(b=b.split(","));d=0;for(m=b.length;d<m;d++)c=b[d],c.trim();m=b.join(", ");c=f.complete;if(m in c)return c[m];q=function(b){return w.append("span").style("font-family",b).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")};r=function(b,c){var f,g,d;f=q(b);g=f.node().offsetWidth;d=c.node().offsetWidth;f.remove();return g!==d};w=g("div");u=q("monospace");n=q("sans-serif");
p=0;for(t=b.length;p<t;p++)if(d=b[p],(v=r(d+",monospace",u))||(v=r(d+",sans-serif",n)),v){v=d;break}v||(v="sans-serif");u.remove();n.remove();return c[m]=v};f.complete={};c.exports=f},{"../core/font/tester.coffee":68}],103:[function(b,c,d){var g=b("../array/sort.coffee"),f=b("../core/methods/attach.coffee"),h=b("../core/data/format.js"),k=b("../core/data/keys.coffee"),l=b("../core/data/load.coffee"),m=b("../core/fetch/data.js"),p=b("../client/ie.js"),t=b("../core/methods/reset.coffee"),u=b("../core/console/print.coffee");
c.exports=function(){var c={types:{auto:b("./types/auto.js"),button:b("./types/button/button.coffee"),drop:b("./types/drop/drop.coffee"),toggle:b("./types/toggle.js")},self:function(b){b=c.data.value instanceof Array&&c.data.value.length>c.data.large;c.draw.timing=c.draw.first||b||p?0:c.timing.ui;if(c.data.value instanceof Array){c.dev.value&&u.group('drawing "'+c.type.value+'"');c.data.changed&&(c.data.cache={},k(c,"data"),h(c));c.data.viz=m(c);c.data.sort.value&&(c.data.changed||c.order.changed||
c.order.sort.changed)&&g(c.data.viz,c.order.value||c.text.value,c.order.sort.value,c.color.value,c);if(!1===c.focus.value&&0>["auto","button"].indexOf(c.type.value)){if((b=c.data.element.value)&&"select"===b.node().tagName.toLowerCase()){var f=b.property("selectedIndex"),f=0>f?0:f;b=b.selectAll("option")[0][f];if(b=b.getAttribute("data-"+c.id.value)||b.getAttribute(c.id.value))c.focus.value=b}!1===c.focus.value&&c.data.viz.length&&(c.focus.value=c.data.viz[0][c.id.value]);c.dev.value&&!1!==c.focus.value&&
u.log('"value" set to "'+c.focus.value+'"')}var d=function(b,f){f="number"!==typeof f?1===c.id.nesting.length?0:c.id.nesting.length-1:f;var g=c.id.nesting[f];return 0<f&&(!(g in b)||b[g]instanceof Array)?d(b,f-1):g};if(c.data.changed){if("auto"===c.search.value?10<c.data.viz.length?(c.search.enabled=!0,c.dev.value&&u.log("Search enabled.")):(c.search.enabled=!1,c.dev.value&&u.log("Search disabled.")):c.search.enabled=c.search.value,b=c.data.element.value?c.data.element.value.node().tagName.toLowerCase():
"",c.data.element.value&&"select"===b){b=[];for(var v in c.data.nested.all)b=b.concat(c.data.nested.all[v]);options=c.data.element.value.selectAll("option").data(b,function(b){var c=b?d(b):!1;return b&&c in b?b[c]:!1});options.exit().remove();options.enter().append("option");options.each(function(b){var f=d(b),g=f===c.id.value?c.text.value||c.id.value:!0!==c.text.nesting&&f in c.text.nesting?c.text.nesting[f]:f,h;for(h in b)"object"!==typeof b[h]&&(h===g&&d3.select(this).html(b[h]),0<=["alt","value"].indexOf(h)?
d3.select(this).attr(h,b[h]):d3.select(this).attr("data-"+h,b[h]));this.selected=b[f]===c.focus.value?!0:!1})}}else c.focus.changed&&c.data.element.value&&(v=c.data.element.value.node().tagName.toLowerCase(),"select"===v?c.data.element.value.selectAll("option").each(function(b){b[d(b)]===c.focus.value?this.selected=!0:this.selected=!1}):(v=c.data.element.value.attr("type").toLowerCase(),"radio"===v&&c.data.element.value.each(function(b){this.checked=this.value===c.focus.value?!0:!1})));if("auto"!==
c.type.value){if(!c.container.ui){c.container.ui=c.container.value.selectAll("div#d3plus_"+c.type.value+"_"+c.container.id).data(["container"]);if(v=c.data.element.value?c.data.element.value[0][0]:null)v.id?v="#"+v.id:(b=v.getAttribute(c.id.value)?c.id.value:"data-"+c.id.value,v=v.getAttribute(b)?"["+b+"="+v.getAttribute(b)+"]":null);c.container.ui.enter().insert("div",v).attr("id","d3plus_"+c.type.value+"_"+c.container.id).style("position","relative").style("overflow","visible").style("vertical-align",
"top")}c.container.ui.style("display",c.ui.display.value);c.container.ui.transition().duration(c.draw.timing).style("margin",c.ui.margin.css);v=c.container.ui.selectAll("div.d3plus_title").data(c.title.value?[c.title.value]:[]);v.enter().insert("div","#d3plus_"+c.type.value+"_"+c.container.id).attr("class","d3plus_title").style("display","inline-block");v.style("color",c.font.color).style("font-family",c.font.family.value).style("font-size",c.font.size+"px").style("font-weight",c.font.weight).style("padding",
c.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",c.ui.border+"px").text(String).each(function(b){c.margin.left=this.offsetWidth})}c.data.value.length?(v=c.format.locale.value.visualization[c.type.value],c.dev.value&&u.time("drawing "+v),c.types[c.type.value](c),c.dev.value&&u.timeEnd("drawing "+v)):!c.data.url||c.data.loaded&&!c.data.stream||l(c,"data",c.self.draw);c.dev.value&&u.timeEnd("total draw time");t(c)}}};f(c,{active:b("./methods/active.coffee"),
alt:b("./methods/alt.coffee"),color:b("./methods/color.coffee"),config:b("./methods/config.coffee"),container:b("./methods/container.coffee"),data:b("./methods/data.js"),depth:b("./methods/depth.coffee"),dev:b("./methods/dev.coffee"),draw:b("./methods/draw.js"),focus:b("./methods/focus.coffee"),font:b("./methods/font.coffee"),format:b("./methods/format.coffee"),height:b("./methods/height.coffee"),history:b("./methods/history.coffee"),hover:b("./methods/hover.coffee"),icon:b("./methods/icon.coffee"),
id:b("./methods/id.coffee"),keywords:b("./methods/keywords.coffee"),margin:b("./methods/margin.coffee"),open:b("./methods/open.coffee"),order:b("./methods/order.coffee"),remove:b("./methods/remove.coffee"),search:b("./methods/search.coffee"),select:b("./methods/select.coffee"),selectAll:b("./methods/selectAll.coffee"),text:b("./methods/text.coffee"),timing:b("./methods/timing.coffee"),title:b("./methods/title.coffee"),type:b("./methods/type.coffee"),ui:b("./methods/ui.coffee"),width:b("./methods/width.coffee")});
return c.self}},{"../array/sort.coffee":34,"../client/ie.js":37,"../core/console/print.coffee":52,"../core/data/format.js":56,"../core/data/keys.coffee":58,"../core/data/load.coffee":59,"../core/fetch/data.js":64,"../core/methods/attach.coffee":79,"../core/methods/reset.coffee":92,"./methods/active.coffee":104,"./methods/alt.coffee":105,"./methods/color.coffee":106,"./methods/config.coffee":107,"./methods/container.coffee":108,"./methods/data.js":109,"./methods/depth.coffee":110,"./methods/dev.coffee":111,
"./methods/draw.js":112,"./methods/focus.coffee":113,"./methods/font.coffee":114,"./methods/format.coffee":115,"./methods/height.coffee":116,"./methods/history.coffee":117,"./methods/hover.coffee":118,"./methods/icon.coffee":119,"./methods/id.coffee":120,"./methods/keywords.coffee":121,"./methods/margin.coffee":122,"./methods/open.coffee":123,"./methods/order.coffee":124,"./methods/remove.coffee":125,"./methods/search.coffee":126,"./methods/select.coffee":127,"./methods/selectAll.coffee":128,"./methods/text.coffee":129,
"./methods/timing.coffee":130,"./methods/title.coffee":131,"./methods/type.coffee":132,"./methods/ui.coffee":133,"./methods/width.coffee":134,"./types/auto.js":135,"./types/button/button.coffee":136,"./types/drop/drop.coffee":141,"./types/toggle.js":158}],104:[function(b,c,d){b("../../core/methods/filter.coffee");c.exports={accepted:[!1,Array,Function,Number,String],value:!1}},{"../../core/methods/filter.coffee":80}],105:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,
Array,Function,Object,String],mute:b(!0),solo:b(!0),value:"alt"}},{"../../core/methods/filter.coffee":80}],106:[function(b,c,d){c.exports={accepted:[String],value:"color"}},{}],107:[function(b,c,d){c.exports={accepted:[Object],objectAccess:!1,process:function(b,c){var d,k;for(d in b)if(k=b[d],d in c.self)c.self[d](k);return b},value:{}}},{}],108:[function(b,c,d){var g;g=b("../../util/d3selection.coffee");c.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(b){return!1===
b?d3.select("body"):g(b)?b:b instanceof Array?d3.select(b[0][0]):d3.select(b)},value:d3.select("body")}},{"../../util/d3selection.coffee":207}],109:[function(b,c,d){var g=b("../../util/d3selection.coffee"),f=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(b,c){var f=!1;g(b)?f=b:"string"!==typeof b||d3.select(b).empty()||(f=d3.select(b));f&&c.self.container(d3.select(f.node().parentNode));return f},
value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(b,c){"default"===c.container.id&&b.length&&c.self.container({id:"default"+b.length});return f(b,c,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.coffee":86,"../../util/d3selection.coffee":207}],110:[function(b,c,d){c.exports={accepted:[Number],value:0}},{}],111:[function(b,c,d){c.exports={accepted:[Boolean],value:!1}},
{}],112:[function(b,c,d){var g=b("../../util/d3selection.coffee"),f=b("../../core/parse/hideElement.js"),h=b("../../core/parse/element.js"),k=b("../../core/console/print.coffee"),l=b("../../string/format.js");c.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(b,c){if(!1===this.initialized)return this.initialized=!0,b;!c.data.value||c.data.value instanceof Array&&!g(c.data.value)?c.data.element.value&&c.data.element.value.call(f):c.data.value=h(c);void 0===b&&"function"===typeof this.value&&
(b=this.value);if(!1===c.container.value){var d=c.format.locale.value.dev.setContainer;k.warning(d,"container")}else c.container.value.empty()?(d=c.format.locale.value.dev.noContainer,k.warning(l(d,'"'+c.container.value+'"'),"container")):(c.dev.value&&k.time("total draw time"),c.container.value.call(c.self));if("function"===typeof b&&c.history.chain.length){var u={};changes.forEach(function(b){var c=b.method;delete b.method;u[c]=b});b(u);c.history.chain=[]}return b},update:!0,value:void 0}},{"../../core/console/print.coffee":52,
"../../core/parse/element.js":95,"../../core/parse/hideElement.js":96,"../../string/format.js":172,"../../util/d3selection.coffee":207}],113:[function(b,c,d){c.exports={accepted:[!1,Number,String],deprecates:"highlight",process:function(b,c){var d,k,l,m,p,t;if((k=c.data.element.value)&&0<=["string","number"].indexOf(typeof b))if(d=k.node().tagName.toLowerCase(),l=k.attr("type"),"select"===d)for(t=k.selectAll("option"),l=m=0,p=t.length;m<p;l=++m)(d=t[l])&&d[c.id.value]===b&&(k.node().selectedIndex=
l);else if("input"===d&&"radio"===l)for(l=0,m=k.length;l<m;l++)this.checked=(d=k[l])&&d[c.id.value]===b;return b},value:!1}},{}],114:[function(b,c,d){var g,f;f=b("../../core/methods/font/family.coffee");d=b("../../core/methods/font/align.coffee");g=b("../../core/methods/font/decoration.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={align:d(),color:"#444444",decoration:g(),family:f(),secondary:{align:d(),color:"#444444",decoration:g(),family:f(),size:12,spacing:0,transform:b(),
weight:200},size:12,spacing:0,transform:b(),weight:200}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],115:[function(b,c,d){var g,f,h,k;g=b("../../number/format.coffee");f=b("../../core/locale/locale.coffee");h=b("../../object/merge.coffee");k=b("../../string/title.coffee");c.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},
deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(f)},process:function(b){var c;c=f.en_US;"en_US"!==b&&(c=h(c,f[b]));this.language=b;return c},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(b,c){if("string"===typeof b)c.self.format({locale:b});else if("function"===typeof b)return b;return this.value},text:{accepted:[!1,Function],value:!1},value:function(b,c){var f,d;c||(c={});d=c.vars||{};return d.time&&d.time.value&&c.key===d.time.value?
(f=b.constructor===Date?b:new Date(b),d.data.time.format(f)):"number"===typeof b?(f=this.number.value||g,f(b,c)):"string"===typeof b?(f=this.text.value||k,f(b,c)):JSON.stringify(b)}}},{"../../core/locale/locale.coffee":78,"../../number/format.coffee":169,"../../object/merge.coffee":170,"../../string/title.coffee":175}],116:[function(b,c,d){c.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}},{}],117:[function(b,c,d){c.exports={back:function(){if(this.states.length)return this.states.pop()()},
chain:[],reset:function(){var b;for(b=[];this.states.length;)b.push(this.states.pop()());return b},states:[]}},{}],118:[function(b,c,d){c.exports={accepted:[Boolean,Number,String],value:!1}},{}],119:[function(b,c,d){b=b("../../core/methods/process/icon.coffee");c.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:b,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:b,rotate:0,value:!1},drop:{accepted:[!1,
String],fallback:"&#x276f;",opacity:1,process:b,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:b,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:b,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}},{"../../core/methods/process/icon.coffee":88}],120:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[Array,String],dataFilter:!0,mute:b(!0),
nesting:["value"],solo:b(!0),value:"value"}},{"../../core/methods/filter.coffee":80}],121:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,Array,Function,Object,String],mute:b(!0),solo:b(!0),value:"keywords"}},{"../../core/methods/filter.coffee":80}],122:[function(b,c,d){var g;g=b("../../core/methods/process/margin.coffee");c.exports={accepted:[Number,Object,String],process:function(b){var c;void 0===b&&(b=this.value);c=b;g(b,this);return c},value:0}},{"../../core/methods/process/margin.coffee":89}],
123:[function(b,c,d){c.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],124:[function(b,c,d){c.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],deprecates:["sort"],value:"asc"},value:!1}},{}],125:[function(b,c,d){c.exports={accepted:void 0,process:function(b,c){this.initialized&&c.container.value.remove()},value:void 0}},{}],126:[function(b,c,d){c.exports={accepted:["auto",Boolean],process:function(b){"Boolean"===typeof b&&(this.enabled=b);return b},
term:"",value:"auto"}},{}],127:[function(b,c,d){c.exports={accepted:[String],chainable:!1,process:function(b,c){var d;return(d=c.container.value)&&b?d.select(b):b},value:void 0}},{}],128:[function(b,c,d){c.exports={accepted:[String],chainable:!1,process:function(b,c){var d;return(d=c.container.value)&&b?d.selectAll(b):b},value:void 0}},{}],129:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,String],nesting:!0,mute:b(!0),solo:b(!0),secondary:{accepted:[!1,String],nesting:!0,
value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],130:[function(b,c,d){c.exports={mouseevents:60,ui:200}},{}],131:[function(b,c,d){var g,f,h;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");h=b("../../core/methods/font/transform.coffee");f=b("../../string/strip.js");c.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:d(),family:g(),size:16,transform:h(),weight:400},link:!1,process:function(b,c){var g;0===
c.container.id.indexOf("default")&&b&&(g=f(b).toLowerCase(),c.self.container({id:g}));return b},value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../string/strip.js":174}],132:[function(b,c,d){c.exports={accepted:function(b){return d3.keys(b.types)},value:"auto"}},{}],133:[function(b,c,d){var g,f,h;f=b("../../core/methods/font/family.coffee");d=b("../../core/methods/font/align.coffee");g=b("../../core/methods/font/decoration.coffee");
h=b("../../core/methods/process/margin.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={align:d("center"),border:1,color:{primary:{process:function(b,c){var f;f=this.value;c.ui.color.secondary.value||(c.ui.color.secondary.value=d3.rgb(f).darker(.75).toString());return b},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:d("center"),color:"#444",decoration:g(),family:f(),size:11,transform:b(),weight:200},margin:{process:function(b){var c;
void 0===b&&(b=this.value);c=b;h(b,this);return c},value:5},padding:{process:function(b){var c;void 0===b&&(b=this.value);c=b;h(b,this);return c},value:5}}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../core/methods/process/margin.coffee":89}],134:[function(b,c,d){c.exports={accepted:[!1,Number],secondary:!1,value:!1}},{}],135:[function(b,c,d){c.exports=function(b){var c=
b.data.value.length;1===c?b.self.type("button").draw():5>c?b.self.type("toggle").draw():b.self.type("drop").draw()}},{}],136:[function(b,c,d){c.exports=function(c){var f,d,k,l,m,p,t,u;p=b("../../../core/console/print.coffee");k=b("./functions/color.coffee");l=b("./functions/icons.js");m=b("./functions/mouseevents.coffee");t=b("./functions/style.js");f=c.container.ui.selectAll("div.d3plus_node").data(c.data.viz,function(b){return b[c.id.value]});c.dev.value&&p.time("enter");f.enter().append("div").attr("class",
"d3plus_node").call(k,c).call(t,c).call(l,c).call(m,c);c.dev.value&&p.timeEnd("enter");c.draw.update||c.draw.timing?(c.dev.value&&p.time("ordering"),f.order(),c.dev.value&&p.timeEnd("ordering"),u=f):(d=[c.focus.previous,c.focus.value,c.hover.previous,c.hover.value].filter(function(b){return b}),u=f.filter(function(b){return 0<=d.indexOf(b[c.id.value])}));c.dev.value&&p.time("update");u.classed("d3plus_button_active",function(b){return c.focus.value===b[c.id.value]});c.draw.timing?u.transition().duration(c.draw.timing).call(k,
c).call(t,c):u.call(k,c).call(t,c);u.call(l,c).call(m,c);c.dev.value&&p.timeEnd("update");return f.exit().remove()}},{"../../../core/console/print.coffee":52,"./functions/color.coffee":137,"./functions/icons.js":138,"./functions/mouseevents.coffee":139,"./functions/style.js":140}],137:[function(b,c,d){c.exports=function(c,f){var d,k;d=b("../../../../color/legible.coffee");b("../../../../color/lighter.coffee");k=b("../../../../color/text.coffee");return c.style("background-color",function(b){var c;
c=f.focus.value===b[f.id.value]?f.ui.color.secondary.value:f.ui.color.primary.value;f.hover.value===b[f.id.value]&&(c=d3.rgb(c).darker(.15).toString());return c}).style("color",function(b){var c,g;g=f.focus.value===b[f.id.value]?.75:1;b[f.icon.value]&&f.data.viz.length<f.data.large||!b[f.color.value]?(c=f.focus.value===b[f.id.value]?f.ui.color.secondary.value:f.ui.color.primary.value,f.hover.value===b[f.id.value]&&(c=d3.rgb(c).darker(.15).toString()),b=k(c)):b=d(b[f.color.value]);b=d3.rgb(b);return"rgba("+
b.r+","+b.g+","+b.b+","+g+")"}).style("border-color",f.ui.color.secondary.value)}},{"../../../../color/legible.coffee":44,"../../../../color/lighter.coffee":45,"../../../../color/text.coffee":50}],138:[function(b,c,d){var g=b("../../../../client/prefix.coffee"),f=b("../../../../client/rtl.coffee");c.exports=function(b,c){var d="right"===c.font.align.value&&!f||f&&"right"===c.font.align.value;b.each(function(b,h){var t=["label"];b[c.icon.value]&&c.data.viz.length<=c.data.large&&t.push("icon");var u=
c.icon.button.value;b[c.id.value]===c.focus.value&&c.icon.select.value?(u=c.icon.select.value,t.push("selected")):u&&!1!==b.d3plus.icon&&t.push("selected");var n=0,q=d3.select(this).selectAll("div.d3plus_button_element").data(t,function(b){return b});q.enter().append("div").style("display",function(b){return"label"===b?"block":"absolute"});q.order().attr("class",function(b){var c="";"selected"===b&&0===u.indexOf("fa-")&&(c=" fa "+u);return"d3plus_button_element d3plus_button_"+b+c}).html(function(f){return"label"===
f?c.format.value(b[c.text.value&&c.text.value in b&&!(b[c.text.value]instanceof Array)?c.text.value:c.id.value]):"selected"===f&&0>u.indexOf("fa-")?u:""}).style("background-image",function(f){return"icon"===f?"url('"+b[c.icon.value]+"')":"none"}).style("background-color",function(f){return"icon"===f&&"knockout"===b.style?b[c.color.value]||c.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(b){return"label"===b?c.font.align.value:"center"}).style("position",
function(b){return"label"==b?"static":"absolute"}).style("width",function(b){if("label"===b)return"auto";n=c.height.value?c.height.value-(c.ui.padding.top+c.ui.padding.bottom)-2*c.ui.border:c.font.size+c.ui.border;return n+"px"}).style("height",function(b){return"icon"===b?n+"px":"auto"}).style("margin-top",function(b){return"label"===b?"0px":-(this.offsetHeight||this.getBoundingClientRect().height?this.offsetHeight||this.getBoundingClientRect().height:"selected"===b?c.font.size:n)/2+"px"}).style("top",
function(b){return"label"===b?"auto":"50%"}).style("left",function(b){return"icon"===b&&!d||"selected"===b&&d?c.ui.padding.left+"px":"auto"}).style("right",function(b){return"icon"===b&&d||"selected"===b&&!d?c.ui.padding.right+"px":"auto"}).style(g()+"transition",function(b){return"selected"===b?c.draw.timing/1E3+"s":"none"}).style(g()+"transform",function(b){b="selected"===b?c.icon.select.rotate:"none";return"string"===typeof b?b:"rotate("+b+"deg)"}).style("opacity",function(b){return"selected"===
b?c.icon.select.opacity:1});q.exit().remove();q=d3.select(this).selectAll(".d3plus_button_label");if(0<n){var r=c.ui.padding,r=3===t.length?r.top+"px "+(2*r.right+n)+"px "+r.bottom+"px "+(2*r.left+n)+"px":0<=t.indexOf("icon")&&!f||0<=t.indexOf("selected")&&f?r.top+"px "+r.right+"px "+r.bottom+"px "+(2*r.left+n)+"px":r.top+"px "+(2*r.right+n)+"px "+r.bottom+"px "+r.left+"px";q.style("padding",r)}else q.style("padding",c.ui.padding.css);"number"===typeof c.width.value?(t=c.width.value,t-=parseFloat(q.style("padding-left"),
10),t-=parseFloat(q.style("padding-right"),10),t-=2*c.ui.border,t+="px"):t="auto";q.style("width",t)})}},{"../../../../client/prefix.coffee":39,"../../../../client/rtl.coffee":40}],139:[function(b,c,d){c.exports=function(c,f,d){var k,l;d=b("./color.coffee");k=b("../../../../client/pointer.coffee");l=b("../../../../client/ie.js");return c.on(k.over,function(b,c){f.self.hover(b[f.id.value]);return l||!f.draw.timing?d3.select(this).style("cursor","pointer").call(d,f):d3.select(this).style("cursor","pointer").transition().duration(f.timing.mouseevents).call(d,
f)}).on(k.out,function(b){f.self.hover(!1);return l||!f.draw.timing?d3.select(this).style("cursor","auto").call(d,f):d3.select(this).style("cursor","auto").transition().duration(f.timing.mouseevents).call(d,f)}).on(k.click,function(b){if(!1!==f.focus.value)return f.self.focus(b[f.id.value]).draw();if(f.focus.callback)return f.focus.callback(b,f.self)})}},{"../../../../client/ie.js":37,"../../../../client/pointer.coffee":38,"./color.coffee":137}],140:[function(b,c,d){c.exports=function(b,c){b.style("position",
"relative").style("margin",c.ui.margin.css).style("display",c.ui.display.value).style("border-style","solid").style("border-width",c.ui.border+"px").style("font-family",c.font.family.value).style("font-size",c.font.size+"px").style("font-weight",c.font.weight).style("letter-spacing",c.font.spacing+"px")}},{}],141:[function(b,c,d){c.exports=function(c){var f,d,k,l,m,p,t,u,n,q,r;k=b("./functions/element.coffee");l=b("./functions/keyboard.coffee");r=b("./functions/window.js");q=b("./functions/width.js");
f=b("./functions/button.js");t=b("./functions/selector.js");u=b("./functions/title.js");p=b("./functions/search.js");m=b("./functions/list.js");d=b("./functions/data.js");n=b("./functions/update.js");c.margin.top=0;c.margin.title=0;k(c);l(c);r(c);q(c);f(c);t(c);u(c);p(c);m(c);d(c);return n(c)}},{"./functions/button.js":144,"./functions/data.js":145,"./functions/element.coffee":146,"./functions/keyboard.coffee":149,"./functions/list.js":150,"./functions/search.js":152,"./functions/selector.js":153,
"./functions/title.js":154,"./functions/update.js":155,"./functions/width.js":156,"./functions/window.js":157}],142:[function(b,c,d){c.exports=function(b,c,d){var k=[];d=d||b.active.value;if(d instanceof Array)for(var l=0;l<d.length;l++)k.push(this(b,c,d[l]));else l=typeof d,"number"===l?k.push(b.depth.value===d):"function"===l?k.push(d(c)):k.push(c===d);return 0<=k.indexOf(!0)}},{}],143:[function(b,c,d){var g=b("../../../../core/console/print.coffee");c.exports=function(b){b.dev.value&&g.time("rotating arrow");
var c="&#x276f;"===b.icon.drop.value?90:0;b.container.button.icon({select:{opacity:b.open.value?.5:1,rotate:b.open.value!=b.open.flipped.value?180+c:c}}).draw();b.dev.value&&g.timeEnd("rotating arrow")}},{"../../../../core/console/print.coffee":52}],144:[function(b,c,d){var g=b("../../../../util/copy.coffee"),f=b("../../../../client/pointer.coffee"),h=b("../../../form.js"),k=b("../../../../core/console/print.coffee");c.exports=function(b){"button"in b.container||(b.dev.value&&k.time("creating main button"),
b.container.button=h().container(b.container.ui).type("button").ui({margin:0}),b.dev.value&&k.timeEnd("creating main button"));if(b.focus.changed||b.data.changed||b.depth.changed){var c=b.depth.value,d=g(b.data.value.filter(function(f){for(var d=!1,g=0;g<b.id.nesting.length;g++)if(d=b.id.nesting[g],d=d in f&&f[d]===b.focus.value){c=g;break}return d})[0]);d||(d=b.container.button.data()[0]||b.data.viz[0]);b.container.button.data([d]).id(b.id.nesting).depth(c)}d=!0===b.hover.value?b.focus.value:!1;
b.container.button.draw({update:b.draw.update}).focus("").font(b.font).format(b.format).hover(d).icon({button:b.icon.drop.value,select:b.icon.drop.value,value:b.icon.value}).text(b.text.value).timing({ui:b.draw.timing}).ui({border:b.ui.border,color:b.ui.color,padding:b.ui.padding.css}).width(b.width.value).draw();d=b.container.button.container(Object).ui;b.margin.top+=d.node().offsetHeight||d.node().getBoundingClientRect().height;d.on(f.click,function(){b.self.open(!b.open.value).draw()})}},{"../../../../client/pointer.coffee":38,
"../../../../core/console/print.coffee":52,"../../../../util/copy.coffee":206,"../../../form.js":103}],145:[function(b,c,d){var g=b("../../../../string/format.js"),f=b("../../../../string/strip.js");c.exports=function(b){if(b.data.url&&!b.data.loaded){var c={};c[b.text.value||b.id.value]=b.format.value(b.format.locale.value.ui.loading);b.data.filtered=[c];b.data.changed="loading"!==b.data.lastFilter;b.data.lastFilter="loading"}else if(b.open.value)if(b.search.term){var d=f(b.search.term).split("_"),
m=[b.id.value,b.text.value,b.alt.value,b.keywords.value],m=m.filter(function(b){return b}),d=d.filter(function(b){return""!==b}),p=[],t=[],u=[],n=[];b.id.nesting.forEach(function(c){n=n.concat(b.data.nested.all[c])});n.forEach(function(c){var g=!1;m.forEach(function(k){if(!g&&k in c&&"string"===typeof c[k]){var m=c[k].toLowerCase();if(0<=[b.text.value,b.id.value].indexOf(k)&&0===m.indexOf(b.search.term))p.push(c),g=!0;else if(0<=m.indexOf(b.search.term))t.push(c),g=!0;else{k=f(m).split("_");for(var n in k)if(g)break;
else for(var q in d)if(0===k[n].indexOf(d[q])){u.push(c);g=!0;break}}}})});b.data.filtered=d3.merge([p,t,u]);b.data.filtered.forEach(function(b,c){b.d3plus_order=c});b.data.changed=!0;b.data.lastFilter="search";if(0===b.data.filtered.length){var c={},q=b.format.value(b.format.locale.value.ui.noResults);c[b.text.value||b.id.value]=g(q,'"'+b.search.term+'"');b.data.filtered=[c]}}else b.data.filtered=b.data.viz,b.data.changed="viz"!==b.data.lastFilter,b.data.lastFilter="viz",1<b.id.nesting.length&&b.depth.value<
b.id.nesting.length-1&&(b.data.filtered=b.data.filtered.filter(function(c){"endPoint"in c.d3plus&&c.d3plus.endPoint===b.depth.value&&(c.d3plus.icon=!1);return!0}),b.data.changed="depth"!==b.data.lastFilter,b.data.lastFilter="depth");else b.data.filtered=[]}},{"../../../../string/format.js":172,"../../../../string/strip.js":174}],146:[function(b,c,d){c.exports=function(b){if(b.data.element.value)return b.data.element.value.on("focus."+b.container.id,function(){return b.self.hover(!0).draw()}),b.data.element.value.on("blur."+
b.container.id,function(){if(b.search.enabled?d3.event.relatedTarget!==b.container.value.select("input").node():1)return b.self.open(!1).hover(!1).draw()}),b.data.element.value.on("change."+b.container.id,function(){return b.self.focus(this.value).draw()}),b.data.element.value.on("keydown.cancel_"+b.container.id,function(){if(9!==d3.event.keyCode)return d3.event.preventDefault()})}},{}],147:[function(b,c,d){c.exports=function(b){var c=b.height.secondary,d=b.container.button.container().node().getBoundingClientRect(),
k=window.innerHeight-d.bottom-2*b.ui.border-b.ui.margin.top-b.ui.margin.bottom-b.ui.padding.top-b.ui.padding.bottom;k<3*d.height&&(k=d.top-10,b.self.open({flipped:!0}));"number"!==typeof c&&(c=k);c>b.height.max&&(c=b.height.max);b.self.height({secondary:c})}},{}],148:[function(b,c,d){var g,f,h,k;g=b("./active.js");f=b("../../../../util/copy.coffee");h=b("../../../form.js");k=b("../../../../core/console/print.coffee");c.exports=function(b){var c,d,t;b.open.value&&(b.dev.value&&k.time("updating list items"),
"items"in b.container||(b.container.items=h().container(b.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),d=b.draw.timing?b.data.large:1,t=f(b.order),t.value=b.search.term.length?"d3plus_order":b.order.value,c=b.depth.value===b.id.nesting.length-1,(b.focus.changed||!1===b.container.items.focus())&&b.container.items.focus(b.focus.value,function(c){var f,d,h;f=b.data.filtered.filter(function(f){return f[b.id.value]===c})[0];b.depth.value<b.id.nesting.length-1&&b.id.nesting[b.depth.value+
1]in f?(d=b.depth.value,h=b.id.solo.value,b.history.states.push(function(){return b.self.depth(d).id({solo:h}).draw()}),b.self.depth(b.depth.value+1).id({solo:[c]}).draw()):(b.depth.changed||b.self.open(!1),(f=c!==b.focus.value)&&b.active.value&&(f=g(b,c)),f&&b.self.focus(c).draw())}),b.container.items.active(b.active.value).data({large:d,sort:b.data.sort.value,value:b.data.filtered}).draw({update:b.draw.update}).font(b.font.secondary).format(b.format).hover(b.hover.value).id(b.id.value).icon({button:c?
!1:b.icon.next,select:c?b.icon.select:!1,value:b.icon.value}).order(t).text(b.text.secondary.value||b.text.value).timing({ui:b.draw.timing}).ui({color:{primary:1===b.id.nesting.length?b.ui.color.primary.value:b.ui.color.secondary.value,secondary:b.ui.color.secondary.value},padding:b.ui.padding.css}).draw(),b.dev.value&&k.timeEnd("updating list items"))}},{"../../../../core/console/print.coffee":52,"../../../../util/copy.coffee":206,"../../../form.js":103,"./active.js":142}],149:[function(b,c,d){c.exports=
function(b){return d3.select(window).on("keydown."+b.container.id,function(){var c,d,k,l,m,p,t,u,n,q;p=d3.event.keyCode;if(b.open.value||!0===b.hover.value){u=!0===b.hover.value?"focus":"hover";l=!1;n=b.data.filtered;k=m=0;for(t=n.length;m<t;k=++m)if(c=n[k],c[b.id.value]===b[u].value){l=k;break}if(9===p&&b.open.value&&(!b.search.enabled||b.search.enabled&&!d3.event.shiftKey))return b.self.open(!1).hover(!1).draw();if(0<=[38,40].indexOf(p))return!1===l?l=0:38===p?b.open.value&&(0>=l?l=b.data.filtered.length-
1:--l):40===p&&b.open.value&&(l=l>=b.data.filtered.length-1?0:l+1),c="boolean"!==typeof b.hover.value?b.data.filtered[l][b.id.value]:b.focus.value,b.self.hover(c).open(!0).draw();if(13===p)return"boolean"!==typeof b.hover.value?(c=b.data.filtered.filter(function(c){return c[b.id.value]===b.hover.value})[0],d=b.depth.value,d<b.id.nesting.length-1&&b.id.nesting[d+1]in c?(q=b.id.solo.value,b.history.states.push(function(){return b.self.depth(d).id({solo:q}).draw()}),b.self.depth(b.depth.value+1).id({solo:[b.hover.value]}).draw()):
b.self.focus(b.hover.value).hover(!0).draw()):b.self.hover(b.focus.value).open(!0).draw();if(27===p){if(b.open.value)return b.self.open(!1).hover(!0).draw();if(!0===b.hover.value)return b.self.hover(!1).draw()}}})}},{}],150:[function(b,c,d){var g=b("../../../../core/console/print.coffee");c.exports=function(b){b.dev.value&&g.time("populating list");b.container.list=b.container.selector.selectAll("div.d3plus_drop_list").data(["list"]);b.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id",
"d3plus_drop_list_"+b.container.id).style("overflow-y","auto").style("overflow-x","hidden");b.dev.value&&g.timeEnd("populating list")}},{"../../../../core/console/print.coffee":52}],151:[function(b,c,d){var g=b("../../../../core/console/print.coffee");c.exports=function(b){if(b.open.value){b.dev.value&&g.time("calculating height");var c=!1;"none"==b.container.selector.style("display")&&(c=!0);c&&b.container.selector.style("display","block");var d=b.container.selector.style("height"),l=b.container.selector.property("scrollTop"),
m=b.container.list.style("max-height"),p=b.container.list.property("scrollTop");b.container.selector.style("height","auto");b.container.list.style("max-height","200000px");b.container.listHeight=parseFloat(b.container.selector.style("height"),10);b.container.list.style("max-height",m).property("scrollTop",p);b.container.selector.style("height",d).property("scrollTop",l);d=!1;b.container.listHeight>b.height.secondary&&(b.container.listHeight=b.height.secondary,d=!0);c&&b.container.selector.style("display",
"none");b.dev.value&&g.timeEnd("calculating height");if(d){b.dev.value&&g.time("calculating scroll position");var c=b.container.list.select("div").selectAll("div.d3plus_node"),t=c[0][0],u="boolean"!==typeof b.hover.value?b.hover.value:b.focus.value;c.each(function(c,d){c[b.id.value]===u&&(t=this)});c=!1;"none"===b.container.selector.style("display")&&(c=!0,b.container.selector.style("display","block"));d=t.offsetTop;l=t.offsetHeight||t.getBoundingClientRect().height;m=b.container.list.property("scrollTop");
c&&b.container.selector.style("display","none");c||b.data.changed||b.depth.changed?b.container.listScroll=d:(b.container.listScroll=m,d<m?b.container.listScroll=d:d+l>m+b.height.secondary-b.search.height&&(b.container.listScroll=d-(b.height.secondary-l-b.search.height)));b.dev.value&&g.timeEnd("calculating scroll position")}else b.container.listScroll=0}else b.container.listScroll=b.container.list.property("scrollTop"),b.container.listHeight=0}},{"../../../../core/console/print.coffee":52}],152:[function(b,
c,d){var g=b("../../../../client/prefix.coffee"),f=b("../../../../core/console/print.coffee");c.exports=function(c){function d(b){b.style("padding",c.ui.padding.css).style("display","block").style("background-color",d3.rgb(c.ui.color.primary.value).darker(.15).toString())}function l(b){var f=c.width.secondary-2*c.ui.padding.left-2*c.ui.padding.right+2*c.ui.border;b.style("padding",c.ui.padding.left/2+c.ui.padding.right/2+"px").style("width",f+"px").style("border-width","0px").style("font-family",
c.font.secondary.family.value).style("font-size",c.font.secondary.size+"px").style("font-weight",c.font.secondary.weight).style("text-align",c.font.secondary.align).style("outline","none").style(g()+"border-radius","0").attr("placeholder",c.format.value(c.format.locale.value.method.search))}c.dev.value&&f.time("creating search");var m=b("./data.js"),p=b("./items.coffee"),t=b("./update.js");c.container.search=c.container.selector.selectAll("div.d3plus_drop_search").data(c.search.enabled?["search"]:
[]);c.draw.timing?(c.container.search.transition().duration(c.draw.timing).call(d),c.container.search.select("input").transition().duration(c.draw.timing).call(l)):(c.container.search.call(d),c.container.search.select("input").call(l));c.container.search.enter().insert("div","#d3plus_drop_list_"+c.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+c.container.id).call(d).append("input").attr("id","d3plus_drop_input_"+c.container.id).style("-webkit-appearance","none").call(l);
c.container.search.select("input").on("keyup."+c.container.id,function(b){b=this.value;c.search.term!==b&&(c.search.term=b,m(c),p(c),t(c))});c.container.search.exit().remove();var u=c.container.selector.style("display");c.container.selector.style("display","block");c.search.height=c.search.enabled?c.container.search.node().offsetHeight||c.container.search.node().getBoundingClientRect().height:0;c.container.selector.style("display",u);c.search.enabled&&(c.margin.title+=c.search.height);c.dev.value&&
f.timeEnd("creating search")}},{"../../../../client/prefix.coffee":39,"../../../../core/console/print.coffee":52,"./data.js":145,"./items.coffee":148,"./update.js":155}],153:[function(b,c,d){c.exports=function(b){b.container.selector=b.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]);b.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden");b.container.selector.style("padding",
b.ui.border+"px")}},{}],154:[function(b,c,d){var g=b("../../../../client/pointer.coffee"),f=b("../../../../color/lighter.coffee"),h=b("../../../../core/console/print.coffee"),k=b("../../../../color/text.coffee");c.exports=function(b){if(b.open.value){var c=function(c){c.text(b.format.value(n?b.focus.value:b.format.locale.value.ui.back)).style("padding","0px "+(b.ui.padding.left+b.ui.padding.right)+"px")},d=function(c){if(!c.empty()){var f=0===b.icon.back.value.indexOf("fa-")?" fa "+b.icon.back.value:
"",f="d3plus_drop_back"+f,d=0===b.icon.back.value.indexOf("fa-")?"":b.icon.back.value;c.style("position","absolute").attr("class",f).style("top",b.ui.padding.top+b.font.secondary.size/2/2.5+"px").html(d)}},t=function(c){c.style("padding",b.ui.padding.css).style("display","block").style("background-color",b.ui.color.secondary.value).style("font-family",b.font.secondary.family.value).style("font-size",b.font.secondary.size+"px").style("font-weight",b.font.secondary.weight).style("text-align",b.font.secondary.align).style("color",
k(b.ui.color.secondary.value))};b.dev.value&&h.time("creating title and back button");for(var u=1===b.id.solo.value.length&&0<b.depth.value,n=u,q=b.container.button.data(Object).viz[0],n=!0,r=0;r<b.id.nesting.length;r++){var w=b.id.nesting[r];if(w in q&&q[w]===b.focus.value){n=!1;break}}b.container.title=b.container.selector.selectAll("div.d3plus_drop_title").data(u?["title"]:[]);b.draw.timing?(b.container.title.transition().duration(b.draw.timing).call(t),b.container.title.select("div.d3plus_drop_title_text").transition().duration(b.draw.timing).call(c)):
(b.container.title.call(t),b.container.title.select("div.d3plus_drop_title_text").call(c));b.container.title.select("span.d3plus_drop_back").call(d);t=b.container.title.enter().insert("div","#d3plus_drop_list_"+b.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+b.container.id).call(t);t.append("span").attr("id","d3plus_drop_back_"+b.container.id).attr("class","d3plus_drop_back").call(d);t.append("div").attr("id","d3plus_drop_title_text_"+b.container.id).attr("class",
"d3plus_drop_title_text").call(c);b.container.title.on(g.over,function(c,d){var g=f(b.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(b.timing.mouseevents).style("background-color",g).style("color",k(g))}).on(g.out,function(c){c=b.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(b.timing.mouseevents).style("background-color",c).style("color",k(c))}).on(g.click,function(c){b.history.back()});b.container.title.exit().remove();
u&&(b.margin.title+=b.container.title.node().offsetHeight||b.container.title.node().getBoundingClientRect().height);b.dev.value&&h.timeEnd("creating title and back button")}}},{"../../../../client/pointer.coffee":38,"../../../../color/lighter.coffee":45,"../../../../color/text.coffee":50,"../../../../core/console/print.coffee":52}],155:[function(b,c,d){var g=b("./items.coffee"),f=b("./height.js"),h=b("../../../../core/console/print.coffee"),k=b("./scroll.js"),l=b("./arrow.js");c.exports=function(b){function c(f){var d=
b.open.flipped.value;f.style("top",function(){return d?"auto":b.margin.top-b.ui.border+"px"}).style("bottom",function(){return d?b.margin.top+b.ui.border+"px":"auto"})}function d(f){f.style("left",function(){return"left"===b.font.align.value?b.margin.left+"px":"center"===b.font.align.value?b.margin.left-(b.width.secondary-b.width.value)/2+"px":"auto"}).style("right",function(){return"right"===b.font.align.value?"0px":"auto"}).style("height",b.container.listHeight+"px").style("padding",b.ui.border+
"px").style("background-color",b.ui.color.secondary.value).style("z-index",function(){return b.open.value?"9999":"-1"}).style("width",b.width.secondary-2*b.ui.border+"px").style("opacity",b.open.value?1:0).call(c)}function u(f){f.style("display",b.open.value?null:"none").call(c);b.search.enabled&&b.open.value&&b.container.selector.select("div.d3plus_drop_search input").node().focus()}b.draw.timing?b.container.ui.transition().duration(b.draw.timing).each("start",function(){b.open.value&&d3.select(this).style("z-index",
9999)}).style("margin",b.ui.margin.css).each("end",function(){b.open.value||d3.select(this).style("z-index","auto")}):b.container.ui.style("margin",b.ui.margin.css).style("z-index",function(){return b.open.value?9999:"auto"});g(b);f(b);k(b);l(b);b.dev.value&&h.time("drawing list");var n=b.open.value?b.height.secondary-b.margin.title:0;b.draw.timing?(b.container.selector.transition().duration(b.draw.timing).each("start",function(){d3.select(this).style("display",b.open.value?"block":null)}).call(d).each("end",
function(){d3.select(this).transition().duration(b.draw.timing).call(u)}),b.container.list.transition().duration(b.draw.timing).style("width",b.width.secondary-2*b.ui.border+"px").style("max-height",n+"px").tween("scroll",function(b){return function(){var c=d3.interpolateNumber(this.scrollTop,b);return function(b){this.scrollTop=c(b)}}}(b.container.listScroll))):(b.container.selector.call(d).call(u),b.container.list.style("width",b.width.secondary-2*b.ui.border+"px").style("max-height",n+"px").property("scrollTop",
b.container.listScroll));b.dev.value&&h.timeEnd("drawing list")}},{"../../../../core/console/print.coffee":52,"./arrow.js":143,"./height.js":147,"./items.coffee":148,"./scroll.js":151}],156:[function(b,c,d){var g=b("../../../../util/copy.coffee"),f=b("../../../../core/font/tester.coffee"),h=b("../../../form.js"),k=b("../../../../core/console/print.coffee"),l=b("../../../../object/validate.coffee");c.exports=function(b){function c(g){var l="primary"===g?"value":g,n="value"===l?b.icon.drop.value:b.icon.select.value||
b.icon.drop.value,p="value"===l?b.text.value:b.text.secondary.value||b.text.value,q="value"===l?b.font:b.font.secondary;b.dev.value&&k.time("calculating "+g+" width");var u=[];h().container(f()).data({large:9999,value:d}).draw({update:!1}).font(q).format(b.format).icon({button:n,value:b.icon.value}).id(b.id.value).timing({ui:0}).text(p||b.id.value).type("button").ui({border:"primary"===g?b.ui.border:0,display:"inline-block",margin:0,padding:b.ui.padding.css}).width(!1).draw().selectAll("div.d3plus_node").each(function(b){u.push(this.offsetWidth+
1)}).remove();n={};n[l]=d3.max(u);b.self.width(n);b.dev.value&&k.timeEnd("calculating "+g+" width")}var d=[],u;for(u in b.data.nested.all){var n=b.data.nested.all[u],q=l(b.text.nesting)&&u in b.text.nesting?b.text.nesting[u][0]:u;0>[b.id.value,b.text.value].indexOf(q)&&(n=g(n),n.forEach(function(c){c[b.text.value||b.id.value]=c[q]}));d=d.concat(n)}"number"!==typeof b.width.value&&c("primary");"number"!==typeof b.width.secondary&&(b.text.secondary.value&&b.text.value!==b.text.secondary.value?c("secondary"):
b.self.width({secondary:b.width.value}))}},{"../../../../core/console/print.coffee":52,"../../../../core/font/tester.coffee":68,"../../../../object/validate.coffee":171,"../../../../util/copy.coffee":206,"../../../form.js":103}],157:[function(b,c,d){var g=b("../../../../util/child.coffee"),f=function(b,c){void 0===c&&(c=window);d3.select(c).on("click."+b.container.id,function(){var c=d3.event.target||d3.event.toElement,f=c.parentNode;f&&0<=["d3plus_node","d3plus_drop_title"].indexOf(f.className)&&
(c=f.parentNode);c&&f&&!g(b.container.ui,c)&&(b.open.value||b.hover.value)&&b.self.open(!1).hover(!1).draw()});try{var d=window.parent.location.host===window.location.host}catch(m){d=!1}d&&c.self!==window.top&&f(b,c.parent)};c.exports=f},{"../../../../util/child.coffee":204}],158:[function(b,c,d){var g=b("../form.js");c.exports=function(b){"buttons"in b.container||(b.container.buttons=g().container(b.container.ui).type("button"));var c=b.data.viz.length,d=b.width.value?b.width.value/c:!1,c=b.container.ui.selectAll("div.d3plus_toggle").data(b.data.viz,
function(c){return c[b.id.value]});c.exit().remove();c.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top");c.order().each(function(c){"form"in c.d3plus||(c.d3plus.form=g().container(d3.select(this)));var h=b.id.nesting.length>b.depth.value?b.id.nesting[b.depth.value+1]:b.id.value;c[h]instanceof Array?c.d3plus.form.container({id:b.container.id+"_"+c[b.id.value]}).data(c[h]).id(b.id.nesting.slice(1)).type("drop"):c.d3plus.form.data([c]).id(b.id.value).type("button");
c.d3plus.form.color(b.color).focus(b.focus.value,function(c){c!==b.focus.value&&b.self.focus(c).draw()}).hover(b.hover.value).icon({select:!1,value:b.icon.value}).font(b.font).format(b.format).order(b.order).text(b.text.value).ui({border:b.ui.border,color:b.ui.color,display:"inline-block",margin:0,padding:b.ui.padding.css}).width(d).draw()});if(b.data.element.value)b.data.element.value.on("focus."+b.container.id,function(){b.self.focus(this.value).hover(this.value).draw()}).on("blur."+b.container.id,
function(){b.self.hover(!1).draw()})}},{"../form.js":103}],159:[function(b,c,d){var g,f,h,k,l,m,p,t,u,n,q;n=b("simplify-js");c.exports=function(b,c){var f,d,k,m,p,u,D,B,F,H,I,G,M,J,K,L,N,Q,S,U,V,W,X,ea,da,R,Y,Z,ca,ba,aa,ra,pa;if(3>b.length)return null;I=[];null==c&&(c={});null==c.maxAspectRatio&&(c.maxAspectRatio=15);null==c.minWidth&&(c.minWidth=0);null==c.minHeight&&(c.minHeight=0);null==c.tolerance&&(c.tolerance=.02);null==c.nTries&&(c.nTries=20);null!=c.angle&&(c.angle instanceof Array?p=c.angle:
"number"===typeof c.angle?p=[c.angle]:"string"!==typeof c.angle||isNaN(c.angle)||(p=[Number(c.angle)]));null==p&&(p=d3.range(-90,95,5));null!=c.aspectRatio&&(c.aspectRatio instanceof Array?D=c.aspectRatio:"number"===typeof c.aspectRatio?D=[c.aspectRatio]:"string"!==typeof c.aspectRatio||isNaN(c.aspectRatio)||(D=[Number(c.aspectRatio)]));null!=c.origin&&c.origin instanceof Array&&(Y=c.origin[0]instanceof Array?c.origin:[c.origin]);u=Math.abs(d3.geom.polygon(b).area());if(0===u)return null;ea=d3.extent(b,
function(b){return b[0]});k=ea[0];ea=ea[1];F=d3.extent(b,function(b){return b[1]});m=F[0];F=F[1];ea=Math.min(ea-k,F-m)*c.tolerance;ba=function(){var c,f,d;d=[];c=0;for(f=b.length;c<f;c++)Z=b[c],d.push({x:Z[0],y:Z[1]});return d}();0<ea&&(ba=n(ba,ea),b=function(){var b,c,f;f=[];b=0;for(c=ba.length;b<c;b++)Z=ba[b],f.push([Z.x,Z.y]);return f}());c.vdebug&&I.push({type:"simplify",poly:b});ea=d3.extent(b,function(b){return b[0]});k=ea[0];ea=ea[1];F=d3.extent(b,function(b){return b[1]});m=F[0];F=F[1];ea=
[ea-k,F-m];F=ea[0];B=ea[1];ea=Math.min(F,B)/50;if(null==Y)for(Y=[],H=d3.geom.polygon(b).centroid(),h(H,b)&&Y.push(H);Y.length<c.nTries;)H=Math.random()*F+k,L=Math.random()*B+m,H=[H,L],h(H,b)&&Y.push(H);c.vdebug&&I.push({type:"origins",points:Y});U=0;W=null;F=0;for(H=p.length;F<H;F++)for(k=p[F],m=-k*Math.PI/180,c.vdebug&&I.push({type:"angle",angle:k}),M=B=0,L=Y.length;B<L;M=++B)for(da=Y[M],N=g(b,da,m),X=N[0],f=N[1],da=g(b,da,m+Math.PI/2),V=da[0],d=da[1],da=[],null!=X&&null!=f&&da.push([(X[0]+f[0])/
2,(X[1]+f[1])/2]),null!=V&&null!=d&&da.push([(V[0]+d[0])/2,(V[1]+d[1])/2]),c.vdebug&&I.push({type:"modifOrigin",idx:M,p1W:X,p2W:f,p1H:V,p2H:d,modifOrigins:da}),M=0,N=da.length;M<N;M++)if(R=da[M],c.vdebug&&I.push({type:"origin",cx:R[0],cy:R[1]}),V=g(b,R,m),X=V[0],f=V[1],null!==X&&null!==f&&(X=Math.min(q(R,X),q(R,f)),X=2*Math.sqrt(X),f=g(b,R,m+Math.PI/2),V=f[0],d=f[1],null!==V&&null!==d&&(V=Math.min(q(R,V),q(R,d)),V=2*Math.sqrt(V),!(X*V<U))))for(null!=D?d=D:(d=Math.max(1,c.minWidth/V,U/(V*V)),f=Math.min(c.maxAspectRatio,
X/c.minHeight,X*X/U),d=d3.range(d,f+.5,.5)),S=0,Q=d.length;S<Q;S++)if(f=d[S],K=Math.max(c.minWidth,Math.sqrt(U*f)),ca=Math.min(X,V*f),!(ca*V<U))for(ca-K>=ea&&c.vdebug&&I.push({type:"aRatio",aRatio:f});ca-K>=ea;)aa=(K+ca)/2,G=aa/f,ra=R[0],pa=R[1],J=[[ra-aa/2,pa-G/2],[ra+aa/2,pa-G/2],[ra+aa/2,pa+G/2],[ra-aa/2,pa+G/2]],J=t(J,m,R),l(J,b)?(J=!0,U=aa*G,W={cx:ra,cy:pa,width:aa,height:G,angle:k},K=aa):(J=!1,ca=aa),c.vdebug&&I.push({type:"rectangle",cx:ra,cy:pa,width:aa,height:G,areaFraction:aa*G/u,angle:k,
insidePoly:J});return[W,U,I]};q=function(b,c){var f,d;f=c[0]-b[0];d=c[1]-b[1];return f*f+d*d};m=function(b,c,f){f=c[1]<f[1]?[c,f]:[f,c];c=f[0];f=f[1];if(b[1]===f[1]||b[1]===c[1])b[1]+=Number.MIN_VALUE;return b[1]>f[1]||b[1]<c[1]||b[0]>c[0]&&b[0]>f[0]?!1:b[0]<c[0]&&b[0]<f[0]?!0:(b[1]-c[1])/(b[0]-c[0])>(f[1]-c[1])/(f[0]-c[0])};h=function(b,c){var f,d,g,h,k;h=-1;k=c.length;d=c[k-1];for(g=0;++h<k;)f=d,d=c[h],m(b,f,d)&&g++;return 0!==g%2};k=function(b,c,f){var d;d=b[0];b=b[1];return d<Math.min(c[0],f[0])-
1E-9||d>Math.max(c[0],f[0])+1E-9||b<Math.min(c[1],f[1])-1E-9||b>Math.max(c[1],f[1])+1E-9?!1:!0};f=function(b,c,f,d){var g,h,k,l,m;h=b[0]-c[0];l=b[1]-c[1];k=f[0]-d[0];m=f[1]-d[1];g=h*m-l*k;if(1E-9>Math.abs(g))return null;b=b[0]*c[1]-b[1]*c[0];f=f[0]*d[1]-f[1]*d[0];return[(b*k-f*h)/g,(b*m-f*l)/g]};u=function(b,c,d,g){var h;h=f(b,c,d,g);return null==h?!1:k(h,b,c)&&k(h,d,g)};l=function(b,c){var f,d,g,k,l,m,n,p;l=-1;n=b.length;p=c.length;for(g=b[n-1];++l<n;)for(f=g,g=b[l],m=-1,k=c[p-1];++m<p;)if(d=k,k=
c[m],u(f,g,d,k))return!1;return h(b[0],c)};p=function(b,c,f){var d,g;null==f&&(f=[0,0]);d=b[0]-f[0];g=b[1]-f[1];b=Math.cos(c);c=Math.sin(c);return[b*d-c*g+f[0],c*d+b*g+f[1]]};t=function(b,c,f){var d,g,h,k;k=[];d=0;for(g=b.length;d<g;d++)h=b[d],k.push(p(h,c,f));return k};g=function(b,c,d){var g,h,l,m,n,p,t,u,H,I;c=[c[0]+1E-9*Math.cos(d),c[1]+1E-9*Math.sin(d)];h=c[0];I=[h+Math.cos(d),c[1]+Math.sin(d)];d=0;1E-9>Math.abs(I[0]-h)&&(d=1);n=-1;u=b.length;h=b[u-1];t=p=Number.MAX_VALUE;for(m=l=null;++n<u;)g=
h,h=b[n],H=f(c,I,g,h),null!=H&&k(H,g,h)&&(g=q(c,H),H[d]<c[d]?g<p&&(p=g,l=H):H[d]>c[d]&&g<t&&(t=g,m=H));return[l,m]}},{"simplify-js":8}],160:[function(b,c,d){c.exports=function(b,c,d){var k;k={x:0,y:0};0>b&&(b=2*Math.PI+b);"square"===d?(d=Math.PI/180*45,b<=Math.PI?b<Math.PI/2?b<d?(k.x+=c,b=Math.tan(b)*c,k.y+=b):(k.y+=c,b=c/Math.tan(b),k.x+=b):b<Math.PI-d?(k.y+=c,b=c/Math.tan(Math.PI-b),k.x-=b):(k.x-=c,b=Math.tan(Math.PI-b)*c,k.y+=b):b<3*Math.PI/2?b<d+Math.PI?(k.x-=c,b=Math.tan(b-Math.PI)*c,k.y-=b):
(k.y-=c,b=c/Math.tan(b-Math.PI),k.x-=b):b<2*Math.PI-d?(k.y-=c,b=c/Math.tan(2*Math.PI-b),k.x+=b):(k.x+=c,b=Math.tan(2*Math.PI-b)*c,k.y-=b)):(k.x+=c*Math.cos(b),k.y+=c*Math.sin(b));return k}},{}],161:[function(b,c,d){var g;g=b("../geom/offset.coffee");c.exports=function(b){var c,d,l,m,p,t,u,n,q,r;if(!b)return[];b=b.slice(1).slice(0,-1).split(/L|A/);u=[];l=0;for(p=b.length;l<p;l++)if(d=b[l],d=d.split(" "),1===d.length)u.push(d[0].split(",").map(function(b){return parseFloat(b)}));else{n=u[u.length-1];
m=d.pop().split(",").map(function(b){return parseFloat(b)});q=parseFloat(d.shift().split(",")[0]);c=Math.sqrt(Math.pow(m[0]-n[0],2)+Math.pow(m[1]-n[1],2));c=Math.acos((q*q+q*q-c*c)/(2*q*q));(d="1"===d[1].split(",")[0])&&(c=2*Math.PI-c);d=c/(2*Math.PI)*q*Math.PI*2;d/=5;n=Math.atan2(-n[1],-n[0])-Math.PI;for(d=r=c/d;d<c;)t=g(n+d,q),u.push([t.x,t.y]),d+=r;u.push(m)}return u}},{"../geom/offset.coffee":160}],162:[function(b,c,d){var g;d={version:"1.9.2 - Cornflower",repo:"https://github.com/alexandersimoes/d3plus/"};
d.array={comparator:b("./array/comparator.coffee"),contains:b("./array/contains.coffee"),sort:b("./array/sort.coffee"),update:b("./array/update.coffee")};d.client={css:b("./client/css.coffee"),ie:b("./client/ie.js"),pointer:b("./client/pointer.coffee"),prefix:b("./client/prefix.coffee"),rtl:b("./client/rtl.coffee"),scroll:b("./client/scroll.js"),scrollbar:b("./client/scrollbar.coffee"),touch:b("./client/touch.coffee")};d.color={legible:b("./color/legible.coffee"),lighter:b("./color/lighter.coffee"),
mix:b("./color/mix.coffee"),random:b("./color/random.coffee"),scale:b("./color/scale.coffee"),sort:b("./color/sort.coffee"),text:b("./color/text.coffee"),validate:b("./color/validate.coffee")};d.data={bestRegress:b("./data/bestRegress.coffee"),lof:b("./data/lof.coffee"),mad:b("./data/mad.coffee")};d.font={sizes:b("./font/sizes.coffee"),validate:b("./font/validate.coffee")};d.form=b("./form/form.js");d.geom={largestRect:b("./geom/largestRect.coffee"),offset:b("./geom/offset.coffee"),path2poly:b("./geom/path2poly.coffee")};
d.network={cluster:b("./network/cluster.coffee"),distance:b("./network/distance.coffee"),normalize:b("./network/normalize.coffee"),shortestPath:b("./network/shortestPath.coffee"),smallestGap:b("./network/smallestGap.coffee"),subgraph:b("./network/subgraph.coffee")};d.number={format:b("./number/format.coffee")};d.object={merge:b("./object/merge.coffee"),validate:b("./object/validate.coffee")};d.string={format:b("./string/format.js"),list:b("./string/list.coffee"),strip:b("./string/strip.js"),title:b("./string/title.coffee")};
d.textwrap=b("./textwrap/textwrap.coffee");d.tooltip={create:b("./tooltip/create.js"),move:b("./tooltip/move.coffee"),remove:b("./tooltip/remove.coffee")};d.util={buckets:b("./util/buckets.coffee"),child:b("./util/child.coffee"),closest:b("./util/closest.coffee"),copy:b("./util/copy.coffee"),d3selection:b("./util/d3selection.coffee"),dataurl:b("./util/dataURL.coffee"),uniques:b("./util/uniques.coffee")};d.viz=b("./viz/viz.coffee");g=b("./client/css.coffee");b=b("./core/console/print.coffee");g("d3plus.css")&&
b.warning("d3plus.css has been deprecated, you do not need to load this file.",d.repo+"releases/tag/v1.4.0");"undefined"!==typeof window&&(window.d3plus=d);c.exports=d},{"./array/comparator.coffee":32,"./array/contains.coffee":33,"./array/sort.coffee":34,"./array/update.coffee":35,"./client/css.coffee":36,"./client/ie.js":37,"./client/pointer.coffee":38,"./client/prefix.coffee":39,"./client/rtl.coffee":40,"./client/scroll.js":41,"./client/scrollbar.coffee":42,"./client/touch.coffee":43,"./color/legible.coffee":44,
"./color/lighter.coffee":45,"./color/mix.coffee":46,"./color/random.coffee":47,"./color/scale.coffee":48,"./color/sort.coffee":49,"./color/text.coffee":50,"./color/validate.coffee":51,"./core/console/print.coffee":52,"./data/bestRegress.coffee":98,"./data/lof.coffee":99,"./data/mad.coffee":100,"./font/sizes.coffee":101,"./font/validate.coffee":102,"./form/form.js":103,"./geom/largestRect.coffee":159,"./geom/offset.coffee":160,"./geom/path2poly.coffee":161,"./network/cluster.coffee":163,"./network/distance.coffee":164,
"./network/normalize.coffee":165,"./network/shortestPath.coffee":166,"./network/smallestGap.coffee":167,"./network/subgraph.coffee":168,"./number/format.coffee":169,"./object/merge.coffee":170,"./object/validate.coffee":171,"./string/format.js":172,"./string/list.coffee":173,"./string/strip.js":174,"./string/title.coffee":175,"./textwrap/textwrap.coffee":199,"./tooltip/create.js":200,"./tooltip/move.coffee":201,"./tooltip/remove.coffee":202,"./util/buckets.coffee":203,"./util/child.coffee":204,"./util/closest.coffee":205,
"./util/copy.coffee":206,"./util/d3selection.coffee":207,"./util/dataURL.coffee":208,"./util/uniques.coffee":209,"./viz/viz.coffee":332}],163:[function(b,c,d){var g;g=b("./normalize.coffee");c.exports=function(b,c){var d,l,m,p,t,u,n,q,r,w,v,y,A,x,z,C,D,B;r=[];null==c&&(c={});if(null==c.nodes||"object"!==typeof c.nodes)if(C=g(b,c),b=C[0],c=C[1],null===c)return null;y=c.nodeid;z=c.startpoint;q=c.endpoint;C=c.nodes;B={};for(v in C)B[v]={node:C[v].node,degree:0};D=0;C={};w=0;for(x=b.length;w<x;w++)l=
b[w],d=y(z(l)),l=y(q(l)),d in C||(C[d]={}),l in C||(C[l]={}),l in C[d]||(C[d][l]=0,C[l][d]=0,D++,B[d].degree+=1,B[l].degree+=1);u={};for(v in B)q=B[v],u[v]={score:q.degree/(2*D),nodes:[v]};for(d in C)for(l in C[d])C[d][l]=1/(2*D)-B[d].degree*B[l].degree/(4*D*D);for(v=0;1E3>v;){q=-1;D=B=void 0;for(d in C)for(l in C[d])C[d][l]>q&&(q=C[d][l],B=d,D=l);if(0>q)break;for(A in C[B])A!==D&&(C[D][A]=A in C[D]?C[D][A]+C[B][A]:C[B][A]-2*u[D].score*u[A].score,C[A][D]=C[D][A]),delete C[A][B];for(A in C[D])A in
C[B]||A===D||(C[D][A]-=2*u[B].score*u[A].score,C[A][D]=C[D][A]);w=u[B].nodes;y=0;for(z=w.length;y<z;y++)q=w[y],u[D].nodes.push(q);u[D].score+=u[B].score;c.vdebug&&r.push({type:"merge",father:D,child:B,nodes:u[D].nodes});delete u[B];delete C[B];v++}t=function(){var b;b=[];for(m in u)n=u[m],b.push([m,n.nodes.length]);return b}();t.sort(function(b,c){return c[1]-b[1]});return[function(){var b,c,f;f=[];b=0;for(c=t.length;b<c;b++)p=t[b],f.push(u[p[0]].nodes);return f}(),r]}},{"./normalize.coffee":165}],
164:[function(b,c,d){c.exports=function(b,c){var d,k;b instanceof Array||(b=[b.x,b.y]);c instanceof Array||(c=[c.x,c.y]);d=Math.abs(b[0]-c[0]);k=Math.abs(b[1]-c[1]);return Math.sqrt(d*d+k*k)}},{}],165:[function(b,c,d){var g;g=b("../core/console/print.coffee");c.exports=function(b,c){var d,l,m,p,t,u,n,q,r,w,v,y,A,x,z,C,D,B,F,H,I,G,M,J;I=c.source;M=c.target;p=c.directed;t=c.distance;B=c.nodeid;G=c.startpoint;q=c.endpoint;d=c.K;J=c.vdebug;p||(p=!1);null==d&&(d=1);null==B?B=function(b){return b}:"string"===
typeof B&&(B=function(b){return function(c){return c[b]}}(B));null!=I&&"object"===typeof I&&(I=B(I));null!=M&&"object"===typeof M&&(M=B(M));null==G?G=function(b){return b.source}:"string"===typeof G&&(G=function(b){return function(c){return c[b]}}(G));null==q?q=function(b){return b.target}:"string"===typeof q&&(q=function(b){return function(c){return c[b]}}(q));if(null==t)t=function(b){return 1};else if("number"===typeof t)t=function(b){return function(c){return b}}(t);else if("string"===typeof t)t=
function(b){return function(c){return c[b]}}(t);else if(t instanceof Array){n={};r=v=0;for(y=b.length;v<y;r=++v)u=b[r],l=B(G(u)),m=B(q(u)),n[l+"_"+m]=t[r];t=function(b){l=B(G(b));m=B(q(b));return n[l+"_"+m]}}r={};A=0;for(z=b.length;A<z;A++){u=b[A];w=G(u);x=q(u);v=B(w);y=B(x);F=[w,x];x=0;for(C=F.length;x<C;x++)D=F[x],w=B(D),w in r||(r[w]={node:D,outedges:[]});r[v].outedges.push(u);p||r[y].outedges.push(u)}u=null;0===b.length?u="The length of edges is 0":0>d?u="K can not have negative value":null==
t(b[0])?u="Check the distance function/attribute":null==G(b[0])?u="Check the startpoint function/attribute":null==q(b[0])?u="Check the endpoint function/attribute":(v=B(G(b[0])),null==v||"string"!==(H=typeof v)&&"number"!==H?u="Check the nodeid function/attribute":null==I||I in r?null==M||M in r||(u="The target is not in the graph"):u="The source is not in the graph");return null!=u?(g.error(u),null):[b,{source:I,target:M,directed:p,distance:t,nodeid:B,startpoint:G,endpoint:q,K:d,nodes:r,vdebug:J}]}},
{"../core/console/print.coffee":52}],166:[function(b,c,d){var g,f;g=b("heap");f=b("./normalize.coffee");c.exports=function(b,c,d){var m,p,t,u,n,q,r,w,v,y,A,x,z,C,D,B,F,H;null==d&&(d={});d.source=c;if(null==d.nodes||"object"!==typeof d.nodes)if(D=f(b,d),b=D[0],d=D[1],null===d)return null;c=d.source;D=d.target;u=d.directed;n=d.distance;z=d.nodeid;F=d.startpoint;r=d.endpoint;m=d.K;d=d.nodes;for(w in d)x=d[w],x.count=0;w=new g(function(b,c){return b.distance-c.distance});x={};null==D&&(x[c]=!0);w.push({edge:null,
target:c,distance:0});A=0;for(c=[];!w.empty();){A=Math.max(A,w.size());C=w.pop();H=C.target;d[H].count++;null==D?c.push(C):H===D&&c.push(C);if(c.length===m)break;if(d[H].count<=m)for(B=d[H].outedges,v=0,y=B.length;v<y;v++){q=B[v];p=z(F(q));t=z(r(q));u||t!==H||(t=[t,p],p=t[0],t=t[1]);if(null==D){if(x[t])continue;x[t]=!0}p=C.distance+n(q);w.push({edge:q,previous:C,target:t,distance:p})}}m=function(c){for(b=[];null!=c.edge;)b.push(c.edge),c=c.previous;return b.reverse()};u=0;for(n=c.length;u<n;u++)r=
c[u],null!=D&&(delete r.target,r.edges=m(r)),delete r.edge,delete r.previous;return c}},{"./normalize.coffee":165,heap:5}],167:[function(b,c,d){var g;g=b("./distance.coffee");c.exports=function(b,c){var d;c||(c={});d=[];d3.geom.quadtree().x(function(b){return c.accessor?c.accessor(b)[0]:b[0]}).y(function(b){return c.accessor?c.accessor(b)[1]:b[1]})(b).visit(function(b){var f,p,t,u,n,q,r,w;if(!b.leaf)for(r=b.nodes,f=0,t=r.length;f<t;f++)if((n=r[f])&&n.point)if(c.origin)d.push(g(n,c));else for(w=b.nodes,
p=0,u=w.length;p<u;p++)(q=w[p])&&q.point&&q.point!==n.point&&d.push(g(n,q));return!1});return c.all?d.sort(function(b,c){return b-c}):d3.min(d)}},{"./distance.coffee":164}],168:[function(b,c,d){var g;g=b("./normalize.coffee");c.exports=function(b,c,d){var l,m,p,t,u,n,q,r,w,v,y;null==d&&(d={});d.source=c;if(null==d.nodes||"object"!==typeof d.nodes)if(c=g(b,d),b=c[0],d=c[1],null===d)return null;c=d.source;p=d.directed;t=d.distance;r=d.nodeid;v=d.startpoint;n=d.endpoint;l=d.K;w=d.nodes;y={};y[c]=!0;
m=function(b,c){var f,d,g,h,k,q,u;q=w[b].outedges;u=[];h=0;for(k=q.length;h<k;h++)g=q[h],f=r(v(g)),d=r(n(g)),p||d!==b||(d=[d,f],d=d[1]),d in y?u.push(void 0):(g=c+t(g),g<=l?(y[d]=!0,u.push(m(d,g))):u.push(void 0));return u};m(c,0);return{nodes:function(){var b;b=[];for(q in y)b.push(w[q].node);return b}(),edges:function(){var c,d,g;g=[];c=0;for(d=b.length;c<d;c++)u=b[c],r(v(u))in y&&r(n(u))in y&&g.push(u);return g}()}}},{"./normalize.coffee":165}],169:[function(b,c,d){var g;g=b("../core/locale/languages/en_US.coffee");
c.exports=function(b,c){var d,l,m,p,t,u,n;c||(c={});t="locale"in c?c.locale:g;u=t.time.slice();l=d3.locale(t.format);c||(c={});n=c.vars||{};d=c.key;m="labels"in c?c.labels:!0;p=b.toString().split(".")[0].length;n.time&&n.time.value&&u.push(n.time.value);"string"===typeof d&&0<=u.indexOf(d.toLowerCase())?l=b:"share"===d?(l=0===b?0:100<=b?l.numberFormat(",f")(b):99<b?l.numberFormat(".3g")(b):l.numberFormat(".2g")(b),l+="%"):10>b&&-10<b?(p=b.toString().split("."),t=1,1<p.length&&(t=d3.min([parseFloat(p[1]).toString().length,
2]),-1<b&&1>b||(p=p[1].length-parseFloat(p[1]).toString().length,t+=1+p)),l=l.numberFormat("."+t+"g")(b)):3<p?(p=d3.formatPrefix(b).symbol,p=p.replace("G","B"),b=d3.formatPrefix(b).scale(b),b=l.numberFormat(".3g")(b),b=b.replace(t.format.decimal,"."),b=parseFloat(b)+"",b=b.replace(".",t.format.decimal),l=b+p):l=3===p?l.numberFormat(",f")(b):0===b?0:b===parseInt(b,10)?l.numberFormat(".2")(b):l.numberFormat(".3g")(b);2<l.length&&""+l.indexOf(".0")===l.length-2&&(l=l.slice(0,l.length-2));return m&&d&&
"format"in n&&d in n.format.affixes.value?(d=n.format.affixes.value[d],d[0]+l+d[1]):l}},{"../core/locale/languages/en_US.coffee":69}],170:[function(b,c,d){var g,f;g=b("../util/d3selection.coffee");f=b("./validate.coffee");c.exports=function(b,c){var d,m;d=function(b,c,h){var k,m,r;m=[];for(k in b)r=b[k],"undefined"!==typeof r?!h&&f(r)?("object"!==typeof c[k]&&(c[k]={}),m.push(d(r,c[k],0===k.indexOf("d3plus")))):!g(r)&&r instanceof Array?m.push(c[k]=r.slice(0)):m.push(c[k]=r):m.push(void 0);return m};
m={};b&&d(b,m);c&&d(c,m);return m}},{"../util/d3selection.coffee":207,"./validate.coffee":171}],171:[function(b,c,d){c.exports=function(b){return b&&b.constructor===Object}},{}],172:[function(b,c,d){c.exports=function(){var b=Array.prototype.slice.call(arguments),c=b.shift();c.unkeyed_index=0;return c.replace(/\{(\w*)\}/g,function(d,k){""===k&&(k=c.unkeyed_index,c.unkeyed_index++);if(k==+k)return"undefined"!==b[k]?b[k]:d;for(var l=0;l<b.length;l++)if("object"===typeof b[l]&&"undefined"!==typeof b[l][k])return b[l][k];
return d}.bind(c))}},{}],173:[function(b,c,d){var g,f;g=b("./format.js");f=b("../core/locale/languages/en_US.coffee").ui;c.exports=function(b,c,d,m){var p;if(b instanceof Array)b=b.slice(0);else return b;c||(c=f.and);m||(m=f.moreText);if(2===b.length)return b.join(" "+c+" ");d&&b.length>d&&(p=b.length-d+1,b=b.slice(0,d-1),b[d-1]=g(m,p));1<b.length&&(b[b.length-1]=c+" "+b[b.length-1]);return b.join(", ")}},{"../core/locale/languages/en_US.coffee":69,"./format.js":172}],174:[function(b,c,d){c.exports=
function(b){var c="!@#$%^&*()[]{}.,/\\|'\";:<>?=+".split(""),d=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]];return""+(b+"").replace(/[^A-Za-z0-9\-_]/g,function(b){if(" "===b)return"_";if(0<=c.indexOf(b))return"";for(var g=b,m=0;m<d.length;m++)if((new RegExp(d[m][0])).test(b)){g=
d[m][1];break}return g})}},{}],175:[function(b,c,d){var g;g=b("../core/locale/languages/en_US.coffee");c.exports=function(b,c){var d,l,m,p;if(!b)return"";c||(c={});if("."===b.charAt(b.length-1))return b.charAt(0).toUpperCase()+b.substr(1);m="locale"in this?this.locale.value:g;p=m.lowercase.map(function(b){return b.toLowerCase()});l=m.uppercase;l=l.concat(l.map(function(b){return b+"s"}));d=l.map(function(b){return b.toLowerCase()});return b.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,
function(c,g){var h;return c?(h=d.indexOf(c.toLowerCase()),0<=h?l[h]:0<=p.indexOf(c.toLowerCase())&&0!==g&&g!==b.length-1?c.toLowerCase():c.charAt(0).toUpperCase()+c.substr(1).toLowerCase()):""})}},{"../core/locale/languages/en_US.coffee":69}],176:[function(b,c,d){var g,f;g=b("./foreign.coffee");f=b("./tspan.coffee");c.exports=function(b){b.text.html.value?g(b):f(b)}},{"./foreign.coffee":177,"./tspan.coffee":180}],177:[function(b,c,d){c.exports=function(b){var c,d,k,l,m;m=b.container.value;k=m.attr("font-family")||
m.style("font-family");c=b.align.value||m.attr("text-anchor")||m.style("text-anchor");d=m.attr("fill")||m.style("fill");l=m.attr("opacity")||m.style("opacity");c="end"===c?"right":"middle"===c?"center":"left";d3.select(m.node().parentNode).append("foreignObject").attr("width",b.width.value+"px").attr("height",b.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",k).style("font-size",b.size.value[1]+"px").style("color",d).style("text-align",c).style("opacity",
l).text(b.text.current)}},{}],178:[function(b,c,d){c.exports=function(b){var c,d,k,l,m,p;d=b.container.value;c=(k=d.node().previousElementSibling)?k.tagName.toLowerCase():"";k&&(k=d3.select(k));b.container.x=b.x.value||parseFloat(d.attr("x"),10);b.container.y=b.y.value||parseFloat(d.attr("y"),10);k&&(0<=b.shape.accepted.indexOf(c)&&b.self.shape(c),"rect"===c?(m=parseFloat(k.attr("x"),10)||0,p=parseFloat(k.attr("y"),10)||0,!1===b.padding.value&&(c=Math.abs(m-b.container.x))&&b.self.padding(c),b.container.x||
(b.container.x=m+b.padding.value),b.container.y||(b.container.y=p+b.padding.value),b.width.value||(c=parseFloat(k.attr("width")),b.self.width(c)),b.height.value||(k=parseFloat(k.attr("height")),b.self.height(k))):"circle"===c?(l=parseFloat(k.attr("r"),10),m=parseFloat(k.attr("cx"),10)||0,m-=l,p=parseFloat(k.attr("cy"),10)||0,p-=l,!1===b.padding.value&&(c=Math.abs(m-b.container.x))&&b.self.padding(c),b.container.x||(b.container.x=m+b.padding.value),b.container.y||(b.container.y=p+b.padding.value),
b.width.value||b.self.width(2*l,10),b.height.value||b.self.height(2*l,10)):(b.width.value||b.self.width(500),b.height.value||b.self.height(500)));b.container.x||(b.container.x=0);b.container.y||(b.container.y=0);b.width.inner=b.width.value-2*b.padding.value;b.height.inner=b.height.value-2*b.padding.value;k=d.attr("font-size")||d.style("font-size");k=parseFloat(k,10);b.container.fontSize=k;b.container.dy=parseFloat(d.attr("dy"),10);if(!b.size.value)return b.resize.value?b.self.size([4,80]):b.self.size([k/
2,k])}},{}],179:[function(b,c,d){c.exports=function(b){var c;!b.text.value&&(c=b.container.value.text())&&(0<=c.indexOf("tspan")&&(c.replace(/\<\/tspan\>\<tspan\>/g," "),c.replace(/\<\/tspan\>/g,""),c.replace(/\<tspan\>/g,"")),c=c.replace(/(\r\n|\n|\r)/gm,""),c=c.replace(/^\s+|\s+$/g,""),b.self.text(c));b.text.phrases=b.text.value instanceof Array?b.text.value.filter(function(b){return 0<=["string","number"].indexOf(typeof b)}):[b.text.value+""];if(!b.align.value)return b.container.align=b.container.value.style("text-anchor")||
b.container.value.attr("text-anchor")}},{}],180:[function(b,c,d){var g;g=b("../../client/rtl.coffee");c.exports=function(b){var c,d,l,m,p,t,u,n,q,r,w,v,y,A,x,z,C,D,B,F;r=function(c){return(!y||c?b.container.value.append("tspan"):b.container.value.insert("tspan","tspan")).attr("x",B+"px").attr("dy",d+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")};C=(q=-90===b.rotate.value||90===b.rotate.value)?b.height.inner:b.width.inner;p=q?b.width.inner:b.height.inner;c="circle"===b.shape.value?
"middle":b.align.value||b.container.align||"start";m="end"===c||"start"===c&&g?C:"middle"===c?C/2:0;q=b.valign.value||"top";B=b.container.x+m;m=b.resize.value?b.size.value[1]:b.container.fontSize||b.size.value[0];d=b.container.dy||1.1*m;D=v=x=null;y=!1;F=0;"circle"===b.shape.value&&("middle"===q?F=p/d%1*d/2:"end"===q&&(F=p/d%1*d));b.container.value.attr("text-anchor",c).attr("font-size",m+"px").style("font-size",m+"px").attr("x",b.container.x).attr("y",b.container.y);z=function(){x.remove();y?(t++,
x=b.container.value.select("tspan")):(t--,x=d3.select(b.container.value.node().lastChild));if(!x.empty())return D=x.text().match(/[^\s-]+-?/g),l()};u=function(){var c;return"circle"===b.shape.value?(c=(t-1)*d+F,c>p/2&&(c+=d),2*Math.sqrt(c*(C/2*2-c))):C};l=function(){var c,d;if(D&&D.length){d=D.pop();c=d.charAt(d.length-1);if(1===d.length&&0<=b.text.split.value.indexOf(d))return l();0<=b.text.split.value.indexOf(c)&&(d=d.substr(0,d.length-1));x.text(D.join(" ")+" "+d+"...");if(x.node().getComputedTextLength()>
u())return l()}else return z()};w=function(c){var d,g,h,k;d=x.text();if(y){k=b.text.current.charAt(b.text.current.length-v.length-1);if(" "===k)for(h="",g=2;" "===k;)h+=" ",k=b.text.current.charAt(b.text.current.length-v.length-g),g++;else h="";v=c+h+v;x.text(c+h+d)}else{k=b.text.current.charAt(v.length);if(" "===k)for(h="",g=1;" "===k;)h+=" ",k=b.text.current.charAt(v.length+g),g++;else h="";v+=h+c;x.text(d+h+c)}if(Math.floor(x.node().getComputedTextLength())>u()||"\n"===k)return x.text(d),d.length&&
(x=r()),x.text(c),y?t--:t++};A=1;n=t=null;m=function(){var c,g,h,l;b.container.value.text("").html("");D=b.text.words.slice();y&&D.reverse();v="";x=r(!0);t=A;g=0;for(h=D.length;g<h;g++){l=D[g];if(t*d>p){z();break}w(l);for(c=!0;c;){l=b.text.current.charAt(v.length);for(c=1;" "===l;)l=b.text.current.charAt(v.length+c),c++;(c=0<=b.text.split.value.indexOf(l))&&w(l)}}t*d>p&&z();return n=Math.abs(t-A)+1};m();n=0;b.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return n++});
"circle"===b.shape.value&&(c=p-n*d,c>d&&("middle"===q?(A=(c/d/2>>0)+1,m()):"bottom"===q&&(y=!0,A=p/d>>0,m())));n=0;b.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return n++});"top"===q?q=0:(c=n*d,q="middle"===q?p/2-c/2:p-c);c="translate(0,"+(q-.2*d)+")";180===b.rotate.value||-180===b.rotate.value?(q=b.container.x+C/2,m=b.container.y+p/2):(m=0>b.rotate.value?C:p,q=b.container.x+m/2,m=b.container.y+m/2);return b.container.value.attr("transform","rotate("+b.rotate.value+
", "+q+", "+m+")"+c)}},{"../../client/rtl.coffee":40}],181:[function(b,c,d){var g,f,h,k;g=b("./flow.coffee");f=b("../../font/sizes.coffee");k=function(b){var c;b.text.phrases.length&&(b.text.current=b.text.phrases.shift()+"",b.text.words=b.text.current.match(b.text["break"]),c=b.text.current.charAt(0),c!==b.text.words[0].charAt(0)&&(b.text.words[0]=c+b.text.words[0]),b.container.value.html(""),b.resize.value?h(b):g(b))};c.exports=k;h=function(b){var c,d,h,u,n,q,r;n=[];for(u=0;u<b.text.words.length;)c=
u===b.text.words.length-1?"":" ",n.push(b.text.words[u]+c),u++;h=(c=-90===b.rotate.value||90===b.rotate.value)?b.height.inner:b.width.inner;u=c?b.width.inner:b.height.inner;q=Math.floor(b.size.value[1]);c="circle"===b.shape.value?.75*h:h;r=f(n,{"font-size":q+"px"},{parent:b.container.value});n=d3.max(r,function(b){return b.width});d=1.165+h/u*.11;d*=d3.sum(r,function(c){return c.width*(b.container.dy||1.2*q)});h="circle"===b.shape.value?Math.PI*Math.pow(h/2,2):c*u;if(n>c||d>h)h=Math.sqrt(h/d),h=d3.min([h,
c/n]),q=d3.max([b.size.value[0],Math.floor(q*h)]);u=Math.floor(.8*u);q>u&&(q=u);q/b.size.value[1]*n<=c?(q!==b.size.value[1]&&b.self.size([b.size.value[0],q]),g(b)):k(b)}},{"../../font/sizes.coffee":101,"./flow.coffee":176}],182:[function(b,c,d){c.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(b){var c;c=["left","center","right"].indexOf(b);0<=c&&(b=this.accepted[c+1]);return b},value:!1}},{}],183:[function(b,c,d){arguments[4][107][0].apply(d,arguments)},{dup:107}],
184:[function(b,c,d){var g;g=b("../../util/d3selection.coffee");c.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(b){return!1===b?!1:g(b)?b:b instanceof Array?d3.select(b[0][0]):d3.select(b)},value:!1}},{"../../util/d3selection.coffee":207}],185:[function(b,c,d){arguments[4][111][0].apply(d,arguments)},{dup:111}],186:[function(b,c,d){var g,f;g=b("../../core/console/print.coffee");f=b("../../string/format.js");c.exports={accepted:[void 0],process:function(b,c){var d;
if(!1===this.initialized)return b;!1===c.container.value?(d=c.format.locale.value.dev.setContainer,g.warning(d,"container")):c.container.value.empty()?(d=c.format.locale.value.dev.noContainer,g.warning(f(d,'"'+c.container.value+'"'),"container")):(c.dev.value&&g.time("total draw time"),c.container.value.call(c.self));return b},value:void 0}},{"../../core/console/print.coffee":52,"../../string/format.js":172}],187:[function(b,c,d){var g,f;g=b("../../core/locale/locale.coffee");f=b("../../object/merge.coffee");
c.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(g)},process:function(b){var c;c=g.en_US;"en_US"!==b&&(c=f(c,g[b]));this.language=b;return c},value:"en_US"},process:function(b,c){if(this.initialized&&"string"===typeof b)c.self.format({locale:b});else if("function"===typeof b)return b;return this.value},value:"en_US"}},{"../../core/locale/locale.coffee":78,"../../object/merge.coffee":170}],188:[function(b,c,d){c.exports={accepted:[!1,Number],value:!1}},{}],189:[function(b,
c,d){arguments[4][188][0].apply(d,arguments)},{dup:188}],190:[function(b,c,d){arguments[4][111][0].apply(d,arguments)},{dup:111}],191:[function(b,c,d){c.exports={accepted:[-180,-90,0,90,180],value:0}},{}],192:[function(b,c,d){c.exports={accepted:["circle","square"],value:!1}},{}],193:[function(b,c,d){c.exports={accepted:[Array,!1],value:!1}},{}],194:[function(b,c,d){c.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(b){b=this.split.value;this["break"]=new RegExp("[^\\s\\"+
b.join("\\")+"]+\\"+b.join("?\\")+"?","g");return!1},split:{accepted:[Array],process:function(b){this["break"]=new RegExp("[^\\s\\"+b.join("\\")+"]+\\"+b.join("?\\")+"?","g");return b},value:["-","/",";",":","&"]}}},{}],195:[function(b,c,d){c.exports={accepted:[!1,"top","middle","bottom"],value:!1}},{}],196:[function(b,c,d){arguments[4][188][0].apply(d,arguments)},{dup:188}],197:[function(b,c,d){arguments[4][188][0].apply(d,arguments)},{dup:188}],198:[function(b,c,d){arguments[4][188][0].apply(d,
arguments)},{dup:188}],199:[function(b,c,d){var g,f,h,k,l;g=b("../core/methods/attach.coffee");h=b("./helpers/parseSize.coffee");f=b("../core/console/print.coffee");k=b("./helpers/parseText.coffee");l=b("./helpers/wrap.coffee");c.exports=function(){var c;c={self:function(b){b.each(function(){h(c);c.size.value[0]<=c.height.inner?(k(c),l(c)):c.container.value.html("");c.dev.value&&f.timeEnd("total draw time")});return c.self}};g(c,{align:b("./methods/align.coffee"),config:b("./methods/config.coffee"),
container:b("./methods/container.coffee"),dev:b("./methods/dev.coffee"),draw:b("./methods/draw.coffee"),format:b("./methods/format.coffee"),height:b("./methods/height.coffee"),padding:b("./methods/padding.coffee"),resize:b("./methods/resize.coffee"),rotate:b("./methods/rotate.coffee"),text:b("./methods/text.coffee"),shape:b("./methods/shape.coffee"),size:b("./methods/size.coffee"),valign:b("./methods/valign.coffee"),width:b("./methods/width.coffee"),x:b("./methods/x.coffee"),y:b("./methods/y.coffee")});
return c.self}},{"../core/console/print.coffee":52,"../core/methods/attach.coffee":79,"./helpers/parseSize.coffee":178,"./helpers/parseText.coffee":179,"./helpers/wrap.coffee":181,"./methods/align.coffee":182,"./methods/config.coffee":183,"./methods/container.coffee":184,"./methods/dev.coffee":185,"./methods/draw.coffee":186,"./methods/format.coffee":187,"./methods/height.coffee":188,"./methods/padding.coffee":189,"./methods/resize.coffee":190,"./methods/rotate.coffee":191,"./methods/shape.coffee":192,
"./methods/size.coffee":193,"./methods/text.coffee":194,"./methods/valign.coffee":195,"./methods/width.coffee":196,"./methods/x.coffee":197,"./methods/y.coffee":198}],200:[function(b,c,d){function g(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px");d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")}var f=b("../core/locale/languages/en_US.coffee"),h=b("../client/pointer.coffee"),k=b("../color/legible.coffee"),l=b("./move.coffee"),m=b("../client/prefix.coffee"),
p=b("../client/rtl.coffee"),t=b("./remove.coffee"),u=b("../client/scroll.js"),n=b("../string/list.coffee"),q=b("../color/text.coffee");c.exports=function(b){var c=b.fullscreen?250:200,d=m();b.width=b.width||c;b.max_width=b.max_width||386;b.id=b.id||"default";b.size=b.fullscreen||b.html?"large":"small";b.offset=b.offset||0;b.arrow_offset=b.arrow?8:0;b.x=b.x||0;b.y=b.y||0;b.parent=b.parent||d3.select("body");b.curtain=b.curtain||"#fff";b.curtainopacity=b.curtainopacity||.8;b.background=b.background||
"#fff";b.fontcolor=b.fontcolor||"#444";b.fontfamily=b.fontfamily||"sans-serif";b.fontweight=b.fontweight||"normal";b.fontsize=b.fontsize||"12px";b.style=b.style||"default";b.zindex="small"==b.size?2E3:500;b.locale=b.locale||f;b.stacked=b.stacked||!1;c=b.parent?b.parent.node().offsetHeight||b.parent.node().getBoundingClientRect().height:0;b.iconsize||(b.iconsize="small"==b.size?22:50);b.parent.node()===document.body?b.limit=[window.innerWidth+u.x(),window.innerHeight+u.y()]:b.limit=[parseFloat(b.parent.style("width"),
10),parseFloat(b.parent.style("height"),10)];b.title instanceof Array&&(b.title=n(b.title,b.locale.ui.and,3,b.locale.ui.more));t(b.id);b.anchor={};if(b.fullscreen)b.anchor.x="center",b.anchor.y="center",b.x=b.parent?b.parent.node().offsetWidth/2:window.innerWidth/2,b.y=b.parent?c/2:window.innerHeight/2;else if(b.align){var y=b.align.split(" ");b.anchor.y=y[0];b.anchor.x=y[1]?y[1]:"center"}else b.anchor.x="center",b.anchor.y="top";var A=b.width-30;if(b.fullscreen)b.parent.append("div").attr("id","d3plus_tooltip_curtain_"+
b.id).attr("class","d3plus_tooltip_curtain").style("background-color",b.curtain).style("opacity",b.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(h.click,function(){t(b.id)});var x=b.parent.append("div").datum(b).attr("id","d3plus_tooltip_id_"+b.id).attr("class","d3plus_tooltip d3plus_tooltip_"+b.size).style("color",b.fontcolor).style("font-family",b.fontfamily).style("font-weight",b.fontweight).style("font-size",
b.fontsize+"px").style(d+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(h.out,g);b.max_height&&x.style("max-height",b.max_height+"px");b.fixed?(x.style("z-index",500),b.mouseevents=!0):x.style("z-index",2E3);y=x.append("div").datum(b).attr("class","d3plus_tooltip_container").style("background-color",b.background).style("padding","6px");if(b.fullscreen&&b.html&&!b.stacked)z=b.parent?.75*b.parent.node().offsetWidth:.75*window.innerWidth,B=b.parent?.75*c:.75*window.innerHeight,
y.style("width",z+"px").style("height",B+"px"),z=y.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",b.width+"px");else{if("auto"==b.width){var z="auto";y.style("max-width",b.max_width+"px")}else z=b.width-14+"px";z=y.style("width",z)}if(b.title||b.icon)var C=z.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);b.fullscreen&&(x.append("div").attr("class","d3plus_tooltip_close").style("background-color",
b.color).style("color",q(b.color)).style("position","absolute").style(d+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(h.over,function(){d3.select(this).style("cursor","pointer").style(d+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(h.out,function(){d3.select(this).style("cursor","auto").style(d+
"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(h.click,function(){t(b.id)}),d3.select("body").on("keydown.esc_"+b.id,function(){27===d3.event.keyCode&&(t(b.id),d3.select("body").on("keydown.esc_"+b.id,null))}));if(!b.mouseevents)x.style("pointer-events","none");else if(!0!==b.mouseevents){var D=d3.select(b.mouseevents).on(h.out),B=function(){var c=d3.event.toElement||d3.event.relatedTarget,f=c?0==("string"==typeof c.className?c.className:c.className.baseVal).indexOf("d3plus_tooltip"):!1;c&&(F(x.node(),
c)||F(b.mouseevents,c)||f)||(D(d3.select(b.mouseevents).datum()),g(),d3.select(b.mouseevents).on(h.out,D))},F=function(b,c){for(var f=c.parentNode;null!==f;){if(f==b)return!0;f=f.parentNode}return!1};d3.select(b.mouseevents).on(h.out,B);x.on(h.out,B);if(B=d3.select(b.mouseevents).on(h.move))x.on(h.move,B)}b.arrow&&x.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",b.background).style(d+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom",
"-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(d+"transform","rotate(45deg)").style("z-index",-1);b.icon&&(B=C.append("div").attr("class","d3plus_tooltip_icon").style("width",b.iconsize+"px").style("height",b.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+b.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px"),"knockout"==b.style&&
B.style("background-color",b.color),A-=B.node().offsetWidth);b.title&&(B=b.max_width-6,b.icon&&(B-=b.iconsize+6),B+="px",C.append("div").attr("class","d3plus_tooltip_title").style("max-width",B).style("color",b.icon?b.fontcolor:k(b.color)).style("vertical-align","top").style("width",A+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===b.size?"18px":"16px").style("line-height",
"large"===b.size?"20px":"17px").style("padding","large"===b.size?"3px 6px":"3px").text(b.title));b.description&&z.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(b.description);if(b.data||b.html&&!b.fullscreen)var H=z.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(b.data){var I=0,G={},M=null;b.data.forEach(function(c,f){c.group&&M!=c.group&&(M=c.group,H.append("div").attr("class",
"d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(c.group));var l=H.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(c);!0===c.highlight?l.style("color",k(b.color)):(c.allColors||c.highlight!==b.color)&&l.style("color",k(c.highlight));var n=l.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(c.name).on(h.out,
function(){d3.event.stopPropagation()});if(c.link)n.style("cursor","pointer").on(h.click,c.link);c.value instanceof Array&&(c.value=list(c.value,b.locale.ui.and,3,b.locale.ui.more));var q=l.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(c.value).on(h.out,function(){d3.event.stopPropagation()});p?q.style("left","6px"):q.style("right","6px");if(b.mouseevents&&c.desc){var t=l.append("div").attr("class",
"d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(d+"transition","height 0.5s").style("width","85%").text(c.desc).on(h.out,function(){d3.event.stopPropagation()}),u=t.node().offsetHeight||t.node().getBoundingClientRect().height;t.style("height","0px");var w=n.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(d+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size",
"8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(m+"transition","background-color 0.5s").text("?").on(h.over,function(){var b=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",b);t.style("height",u+"px")}).on(h.out,function(){d3.event.stopPropagation()});n.style("cursor","pointer").on(h.over,function(){g();
var b=d3.select(this.parentNode).style("color");w.style("background-color",b);t.style("height",u+"px")});l.on(h.out,function(){d3.event.stopPropagation();g()})}l=parseFloat(q.style("width"),10);l>b.width/2&&(l=b.width/2);l>I&&(I=l);f!=b.data.length-1&&(c.group&&c.group==b.data[f+1].group||!c.group&&!b.data[f+1].group)&&H.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")});H.selectAll(".d3plus_tooltip_data_name").style("width",
function(){return parseFloat(d3.select(this.parentNode).style("width"),10)-I-30+"px"});H.selectAll(".d3plus_tooltip_data_value").style("width",I+"px").each(function(b){var c=parseFloat(d3.select(this).style("height"),10);G[b.name]=c});H.selectAll(".d3plus_tooltip_data_name").style("min-height",function(b){return G[b.name]+"px"})}!b.html||b.fullscreen&&!b.stacked||(H.append("div").html(b.html),b.js&&b.js(y));A=z.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position",
"relative").style("text-align","center");b.footer&&A.html(b.footer);b.height=x.node().offsetHeight||x.node().getBoundingClientRect().height;if(b.html&&b.fullscreen&&!b.stacked){var B=b.height-12,z=x.node().offsetWidth-b.width-44;y.append("div").attr("class","d3plus_tooltip_html").style("width",z+"px").style("height",B+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(b.html);b.js&&b.js(y)}b.width=
x.node().offsetWidth;"center"!=b.anchor.y?b.height+=b.arrow_offset:b.width+=b.arrow_offset;if(b.data||(!b.fullscreen||b.stacked)&&b.html)!b.fullscreen||b.stacked?(c=b.fixed?c-b.y-10:c-10,B=b.height<c?b.height:c):B=b.height,B-=parseFloat(y.style("padding-top"),10),B-=parseFloat(y.style("padding-bottom"),10),C&&(B-=C.node().offsetHeight||C.node().getBoundingClientRect().height,B-=parseFloat(C.style("padding-top"),10),B-=parseFloat(C.style("padding-bottom"),10)),A&&(B-=A.node().offsetHeight||A.node().getBoundingClientRect().height,
B-=parseFloat(A.style("padding-top"),10),B-=parseFloat(A.style("padding-bottom"),10)),H.style("max-height",B+"px");b.height=x.node().offsetHeight||x.node().getBoundingClientRect().height;l(b.x,b.y,b.id)}},{"../client/pointer.coffee":38,"../client/prefix.coffee":39,"../client/rtl.coffee":40,"../client/scroll.js":41,"../color/legible.coffee":44,"../color/text.coffee":50,"../core/locale/languages/en_US.coffee":69,"../string/list.coffee":173,"./move.coffee":201,"./remove.coffee":202}],201:[function(b,
c,d){var g,f;f=b("../client/scroll.js");c.exports=function(b,c,d){var m;d||(d="default");m=d3.select("div#d3plus_tooltip_id_"+d);m.node()&&(d=m.datum(),d.cx=b,d.cy=c,d.fixed||(b="body"===d.parent.node().tagName.toLowerCase()?[f.x(),f.y()]:[0,0],"center"!==d.anchor.y?("right"===d.anchor.x?d.x=d.cx-d.arrow_offset-4:"center"===d.anchor.x?d.x=d.cx-d.width/2:"left"===d.anchor.x&&(d.x=d.cx-d.width+d.arrow_offset+2),"bottom"===d.anchor.y?d.flip=d.cy+d.height+d.offset<=d.limit[1]:"top"===d.anchor.y&&(d.flip=
d.cy-d.height-d.offset<b[1]),d.y=d.flip?d.cy+d.offset+d.arrow_offset:d.cy-d.height-d.offset-d.arrow_offset):(d.y=d.cy-d.height/2,"right"===d.anchor.x?d.flip=d.cx+d.width+d.offset<=d.limit[0]:"left"===d.anchor.x&&(d.flip=d.cx-d.width-d.offset<b[0]),"center"===d.anchor.x?(d.flip=!1,d.x=d.cx-d.width/2):d.x=d.flip?d.cx+d.offset+d.arrow_offset:d.cx-d.width-d.offset),d.x<b[0]?d.x=b[0]:d.x+d.width>d.limit[0]&&(d.x=d.limit[0]-d.width),d.y<b[1]?d.y=b[1]:d.y+d.height>d.limit[1]&&(d.y=d.limit[1]-d.height)),
m.style("top",d.y+"px").style("left",d.x+"px"),d.arrow&&m.selectAll(".d3plus_tooltip_arrow").call(g));return m};g=function(b){return b.style("bottom",function(b){return"center"===b.anchor.y||b.flip?"auto":"-5px"}).style("right",function(b){return"center"!==b.anchor.y||b.flip?"auto":"-5px"}).style("top",function(b){return"center"!==b.anchor.y&&b.flip?"-5px":"center"===b.anchor.y?"50%":"auto"}).style("left",function(b){return"center"===b.anchor.y&&b.flip?"-5px":"center"!==b.anchor.y?"50%":"auto"}).style("margin-left",
function(b){var c;if("center"===b.anchor.y)return"auto";c="right"===b.anchor.x?-b.width/2+b.arrow_offset/2:"left"===b.anchor.x?b.width/2-2*b.arrow_offset-5:-5;b.cx-b.width/2-5<c?(c=b.cx-b.width/2-5,c<2-b.width/2&&(c=2-b.width/2)):-(b.limit[0]-b.cx-b.width/2+5)>c&&(c=-(b.limit[0]-b.cx-b.width/2+5),c>b.width/2-11&&(c=b.width/2-11));return c+"px"}).style("margin-top",function(b){var c;if("center"!==b.anchor.y)return"auto";c="bottom"===b.anchor.y?-b.height/2+b.arrow_offset/2-1:"top"===b.anchor.y?b.height/
2-2*b.arrow_offset-2:-9;b.cy-b.height/2-b.arrow_offset<c?(c=b.cy-b.height/2-b.arrow_offset,c<4-b.height/2&&(c=4-b.height/2)):-(b.limit[1]-b.cy-b.height/2+b.arrow_offset)>c&&(c=-(b.limit[1]-b.cy-b.height/2+b.arrow_offset),c>b.height/2-22&&(c=b.height/2-22));return c+"px"})}},{"../client/scroll.js":41}],202:[function(b,c,d){c.exports=function(b){if(b)return d3.selectAll("div#d3plus_tooltip_curtain_"+b).remove(),d3.selectAll("div#d3plus_tooltip_id_"+b).remove();d3.selectAll("div.d3plus_tooltip_curtain").remove();
return d3.selectAll("div.d3plus_tooltip").remove()}},{}],203:[function(b,c,d){c.exports=function(b,c){var d;d=1/(c-1)*(b[1]-b[0]);return d3.range(b[0],b[1]+d,d)}},{}],204:[function(b,c,d){var g;g=b("./d3selection.coffee");c.exports=function(b,c){var d;if(!b||!c)return!1;g(b)&&(b=b.node());g(b)&&(c=c.node());for(d=c.parentNode;null!==d;){if(d===b)return!0;d=d.parentNode}return!1}},{"./d3selection.coffee":207}],205:[function(b,c,d){c.exports=function(b,c){var d,k;if(c.constructor===String)return k=
b.indexOf(c),-1<k?b[k]:b[0];d=b[0];b.forEach(function(b){if(Math.abs(c-b)<Math.abs(c-d))return d=b});return d}},{}],206:[function(b,c,d){var g,f,h;f=b("../object/merge.coffee");h=b("../object/validate.coffee");g=function(b){var c;return h(b)?f(b):b instanceof Array?(c=[],b.forEach(function(b){return c.push(g(b))}),c):b};c.exports=g},{"../object/merge.coffee":170,"../object/validate.coffee":171}],207:[function(b,c,d){var g;g=b("../client/ie.js");c.exports=function(b){return g?"object"===typeof b&&
b instanceof Array&&"size"in b&&"select"in b:b instanceof d3.selection}},{"../client/ie.js":37}],208:[function(b,c,d){c.exports=function(b,c){var d;d=new Image;d.src=b;d.crossOrigin="Anonymous";d.onload=function(){var b;b=document.createElement("canvas");b.width=this.width;b.height=this.height;b.getContext("2d").drawImage(this,0,0);c.call(this,b.toDataURL("image/png"))}}},{}],209:[function(b,c,d){var g,f;g=b("../object/validate.coffee");f=function(b,c,d,m,p,t){var u,n,q,r,w,v,y,A,x;if(void 0===b)return[];
m&&void 0===p&&(p=m.id.value);t=!0===t&&void 0===t;b instanceof Array||(b=[b]);y=[];if(void 0===c)return b.reduce(function(b,c){var d;d=JSON.stringify(c);0>y.indexOf(d)&&(0>b.indexOf(c)&&b.push(c),y.push(d));return b},[]);x=[];u=function(b){var c;if(void 0!==b&&null!==b&&(c=JSON.stringify(b),0>y.indexOf(c)))return x.push(b),y.push(c)};if("function"===typeof d&&m)for(q=0,w=b.length;q<w;q++)for(n=b[q],n=f(d(m,n,c,p)),r=0,v=n.length;r<v;r++)A=n[r],u(A);else if("function"===typeof c)for(d=0,m=b.length;d<
m;d++)n=b[d],n=c(n),u(n);else for(m=0,d=b.length;m<d;m++)n=b[m],g(n)&&(n=n[c],u(n));return t?x.sort(function(b,c){return b-c}):x};c.exports=f},{"../object/validate.coffee":171}],210:[function(b,c,d){c.exports=function(b){var c,d,k,l,m;b.container.value.style("position",function(){var b;b=d3.select(this).style("position");return 0<=["absolute","fixed"].indexOf(b)?b:"relative"});b.container.changed&&b.container.value.html("");l=["width","height"];d=0;for(k=l.length;d<k;d++)m=l[d],b[m].value||(c=function(d){var h;
if(void 0===d.tagName||0<=["BODY","HTML"].indexOf(d.tagName)){h=window["inner"+m.charAt(0).toUpperCase()+m.slice(1)];if(d=document!==d?d3.select(d):!1)"width"===m?(h-=parseFloat(d.style("margin-left"),10),h-=parseFloat(d.style("margin-right"),10),h-=parseFloat(d.style("padding-left"),10),h-=parseFloat(d.style("padding-right"),10)):(h-=parseFloat(d.style("margin-top"),10),h-=parseFloat(d.style("margin-bottom"),10),h-=parseFloat(d.style("padding-top"),10),h-=parseFloat(d.style("padding-bottom"),10));
return b[m].value=20>=h?b[m].small:h}h=parseFloat(d3.select(d).style(m),10);if("number"===typeof h&&0<h)return b[m].value=h;if("BODY"!==d.tagName)return c(d.parentNode)},c(b.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));b.container.value.style("width",b.width.value+"px").style("height",b.height.value+"px")}},{}],211:[function(b,c,d){var g=b("../../core/data/format.js"),f=b("../../core/data/color.js"),h=b("../../core/data/keys.coffee"),
k=b("../../core/data/load.coffee"),l=b("./ui/drawer.js"),m=b("./ui/legend.js"),p=b("./ui/timeline.coffee"),t=b("./errorCheck.js"),u=b("../../core/fetch/data.js"),n=b("./finish.js"),q=b("./focus/tooltip.coffee"),r=b("./ui/history.coffee"),w=b("../../core/parse/edges.js"),v=b("../../core/parse/nodes.js"),y=b("../../core/console/print.coffee"),A=b("../../tooltip/remove.coffee"),x=b("./types/run.coffee"),z=b("./shapes/draw.js"),C=b("../../string/format.js"),D=b("./svg/enter.js"),B=b("./svg/update.js"),
F=b("./ui/titles.js"),H=b("../../object/validate.coffee");c.exports=function(b){var c=[],d=b.type.value,J=b.format.locale.value,K=J.message.ui,L=J.message.draw;["data","attrs","coords","nodes","edges"].forEach(function(d){b.error.value||b[d].loaded||!b[d].url||c.push({"function":function(b,c){k(b,d,c)},message:J.message.loading,wait:!0})});if(b.draw.update){var N=J.visualization[d]||d,Q=b.types[d].setup||!1,S=b.types[d].requirements||[],U=C(J.message.initializing,N),V=J.message.data;S instanceof Array||
(S=[S]);N=N.toLowerCase();b.error.value||"function"!==typeof Q||c.push({"function":function(b){if(b.dev.value){var c="running "+N+" setup";y.time(c)}Q(b);b.dev.value&&y.timeEnd(c)},message:U});b.container.changed&&c.push({"function":D,message:U});d in b.g.apps||c.push({"function":function(b){if(b.dev.value){var c="creating "+N+" group";y.time(c)}b.g.apps[d]=b.g.app.append("g").attr("id",d).attr("opacity",0);b.dev.value&&y.timeEnd(c)},message:U});b.data.changed&&c.push({"function":function(b){b.data.cache=
{};delete b.nodes.restricted;delete b.edges.restricted;h(b,"data")},message:V});b.attrs.changed&&c.push({"function":function(b){h(b,"attrs")},message:V});c.push({"function":function(b){if(!b.color.type||b.color.changed||b.data.changed||b.attrs.changed||b.id.changed||b.depth.changed||b.time.fixed.value&&(b.time.solo.changed||b.time.mute.changed)){b.color.valueScale=!1;if(b.dev.value){var c="checking color type";y.time(c)}b.color.type=!1;if(b.color.value){var d=b.color.value;H(d)&&(d=d[b.id.value]?
d[b.id.value]:d[d3.keys(d)[0]]);b.data.keys&&d in b.data.keys?b.color.type=b.data.keys[d]:b.attrs.keys&&d in b.attrs.keys&&(b.color.type=b.attrs.keys[d])}else b.data.keys&&(b.color.type=b.data.keys[b.id.value]);b.dev.value&&y.timeEnd(c)}},message:V});0<=S.indexOf("edges")&&b.edges.value&&(!b.edges.linked||b.edges.changed)&&c.push({"function":w,message:V});0<=S.indexOf("nodes")&&b.edges.value&&(!b.nodes.positions||b.nodes.changed||b.type.changed)&&c.push({"function":v,message:V});(b.data.changed||
b.time.changed||b.time.format.changed||b.id.changed||b.x.scale.changed&&0<=[b.x.scale.value,b.x.scale.previous].indexOf("discrete")||b.y.scale.changed&&0<=[b.y.scale.value,b.y.scale.previous].indexOf("discrete"))&&c.push({"function":g,message:V});b.error.value||c.push({"function":function(b){var c=b.time.fixed.value?null:["all"];if(b.dev.value){var d=c?"fetching pool data":"fetching data";y.time(d)}b.data.pool=u(b,c);b.dev.value&&y.timeEnd(d);c?(b.dev.value&&y.time("fetching data for current year"),
b.data.viz=u(b),b.dev.value&&y.timeEnd("fetching data for current year")):b.data.viz=b.data.pool;b.draw.timing=b.data.viz.length<b.data.large?b.timing.transitions:0},message:V});b.error.value||c.push({check:function(b){return b.color.value&&"number"===b.color.type&&!1===b.color.valueScale},"function":f,message:V})}c.push({"function":function(b){if(b.dev.value){var c=b.format.locale.value.message.tooltipReset;y.time(c)}b.type.previous&&d!==b.type.previous&&A(b.type.previous);A(d);b.dev.value&&y.timeEnd(c)},
message:K});b.error.value||c.push({"function":t,message:K});c.push({"function":function(b){b.margin.process();F(b);if(!b.error.value)if(b.draw.update)l(b),p(b),m(b);else{b.dev.value&&y.time("calculating margins");var c=b.container.value.select("div#d3plus_drawer").node().offsetHeight||b.container.value.select("div#d3plus_drawer").node().getBoundingClientRect().height,d=b.g.timeline.node().getBBox(),d=b.timeline.value?d.height+b.ui.padding:0,f=b.g.legend.node().getBBox(),f=b.legend.value?f.height+
b.ui.padding:0;b.margin.bottom+=c+d+f;b.dev.value&&y.timeEnd("calculating margins")}r(b);b.height.viz-=b.margin.top+b.margin.bottom;b.width.viz-=b.margin.left+b.margin.right},message:K});b.error.value||c.push({"function":q,message:K});c.push({"function":B,message:L});!b.error.value&&b.draw.update&&c.push({"function":[x,z],message:L});c.push({"function":n,message:L});return c}},{"../../core/console/print.coffee":52,"../../core/data/color.js":54,"../../core/data/format.js":56,"../../core/data/keys.coffee":58,
"../../core/data/load.coffee":59,"../../core/fetch/data.js":64,"../../core/parse/edges.js":94,"../../core/parse/nodes.js":97,"../../object/validate.coffee":171,"../../string/format.js":172,"../../tooltip/remove.coffee":202,"./errorCheck.js":212,"./finish.js":213,"./focus/tooltip.coffee":214,"./shapes/draw.js":224,"./svg/enter.js":237,"./svg/update.js":238,"./types/run.coffee":241,"./ui/drawer.js":242,"./ui/history.coffee":243,"./ui/legend.js":244,"./ui/timeline.coffee":246,"./ui/titles.js":247}],
212:[function(b,c,d){var g=b("../../core/fetch/text.js"),f=b("../../core/console/print.coffee"),h=b("../../core/methods/rejected.coffee"),k=b("../../string/format.js"),l=b("../../string/list.coffee");c.exports=function(b){b.dev.value&&f.time("checking for errors");var c=["id"],d=b.types[b.type.value].requirements;d&&(d instanceof Array?c=c.concat(b.types[b.type.value].requirements):c.push(d));var u=[];c.forEach(function(c){"string"===typeof c?b[c].value||u.push('"'+c+'"'):"function"===typeof c&&(c=
c(b),!c.status&&c.text&&u.push('"'+c.text+'"'))});if(1<u.length){var d=b.format.locale.value.error.methods,n=b.format.locale.value.visualization[b.type.value]||b.type.value,q=b.format.locale.value.ui.and,u=l(u,q);b.error.internal=k(d,n,u)}else 1===u.length&&(d=b.format.locale.value.error.method,n=b.format.locale.value.visualization[b.type.value]||b.type.value,b.error.internal=k(d,n,u[0]));!b.error.internal&&0<=c.indexOf("edges")&&0<=c.indexOf("focus")&&0==b.edges.connections(b.focus.value[0],b.id.value).length&&
(c=g(b,b.focus.value[0],b.depth.value),d=b.format.locale.value.error.connections,b.error.internal=k(d,'"'+c+'"'));c=["d3"];b.types[b.type.value].libs&&(c=c.concat(b.types[b.type.value].libs));u=[];c.forEach(function(b){window[b]||u.push('"'+b+'"')});1<u.length?(d=b.format.locale.value.error.libs,n=b.format.locale.value.visualization[b.type.value],q=b.format.locale.value.ui.and,u=l(u,q),b.error.internal=k(d,n,u)):1===u.length&&(d=b.format.locale.value.error.lib,n=b.format.locale.value.visualization[b.type.value],
b.error.internal=k(d,n,u[0]));c=b.shape.accepted(b);c instanceof Array||(c=[c]);(d=b.shape.value)&&!h(b,c,d,"shape")||b.self.shape(c[0]);"modes"in b.types[b.type.value]&&(c=b.types[b.type.value].modes,c instanceof Array||(c=[c]),(d=b.type.mode.value)&&!h(b,c,d,"mode")||b.self.type({mode:c[0]}));b.dev.value&&f.timeEnd("checking for errors")}},{"../../core/console/print.coffee":52,"../../core/fetch/text.js":66,"../../core/methods/rejected.coffee":90,"../../string/format.js":172,"../../string/list.coffee":173}],
213:[function(b,c,d){var g=b("./shapes/edges.js"),f=b("./shapes/paths.js"),h=b("./ui/message.js"),k=b("./focus/viz.js"),l=b("../../core/methods/reset.coffee"),m=b("../../core/console/print.coffee"),p=b("./shapes/labels.js"),t=b("../../string/title.coffee"),u=b("./zoom/bounds.coffee"),n=b("./zoom/labels.coffee"),q=b("./zoom/mouse.coffee");c.exports=function(b){b.draw.first?setTimeout(function(){k(b)},b.draw.timing):k(b);if(!b.error.value){var c=b.zoom.viewport||b.zoom.bounds;b.types[b.type.value].zoom&&
b.zoom.value&&c?(b.dev.value&&m.time("calculating zoom"),b.draw.first||b.zoom.reset?u(b,c,0):(b.type.changed||b.focus.changed||b.height.changed||b.width.changed||b.nodes.changed||b.legend.changed||b.timeline.changed||b.ui.changed)&&u(b,c),b.dev.value&&m.timeEnd("calculating zoom")):(b.zoom.bounds=[[0,0],[b.width.viz,b.height.viz]],b.zoom.scale=1,u(b))}var c=b.zoom.size?b.zoom.size.height:b.height.viz,d=b.zoom.bounds?b.zoom.bounds[0][0]:0,y=b.zoom.bounds?b.zoom.bounds[0][1]:0;b.g.overlay.attr("width",
b.zoom.size?b.zoom.size.width:b.width.viz).attr("height",c).attr("x",d).attr("y",y);b.error.value||(b.draw.update?(b.edges.path?f(b):g(b),p(b,"data"),b.edges.label&&!b.edges.path&&setTimeout(function(){p(b,"edges")},b.draw.timing+200)):(b.labels.value||b.labels.changed)&&b.types[b.type.value].zoom&&b.zoom.value&&b.draw.timing&&setTimeout(function(){n(b)},b.draw.timing));if(!b.error.value){var A=b.types[b.type.value].requirements||[];A instanceof Array||(A=[A]);A=0<=A.indexOf("data");b.error.internal||
b.data.viz&&b.returned.nodes.length||!A||(b.error.internal=b.format.locale.value.error.data)}(c=b.type.previous)&&b.type.value!=c&&b.g.apps[c]&&(b.dev.value&&m.time('hiding "'+c+'"'),b.draw.timing?b.g.apps[c].transition().duration(b.draw.timing).attr("opacity",0):b.g.apps[c].attr("opacity",0),b.dev.value&&m.timeEnd());b.error.value||(A=A&&0===b.data.viz.length||b.error.internal||b.error.value?0:b.focus.value.length&&b.types[b.type.value].zoom&&b.zoom.value?1-b.tooltip.curtain.opacity:1,c=b.draw.timing,
b.group.transition().duration(c).attr("opacity",A),b.g.data.transition().duration(c).attr("opacity",A),b.g.edges.transition().duration(c).attr("opacity",A));b.error.value?h(b,b.error.value):b.error.internal?(b.error.internal=t(b.error.internal),m.warning(b.error.internal),h(b,b.error.internal),b.error.internal=null):h(b);setTimeout(function(){l(b);if(b.types[b.type.value].zoom&&b.zoom.value){b.g.zoom.datum(b).call(b.zoom.behavior.on("zoom",q));if(!b.zoom.scroll.value)b.g.zoom.on("mousewheel.zoom",
null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null);if(!b.zoom.click.value)b.g.zoom.on("dblclick.zoom",null);if(!b.zoom.pan.value)b.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)}else b.g.zoom.call(b.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},b.draw.timing)}},{"../../core/console/print.coffee":52,"../../core/methods/reset.coffee":92,
"../../string/title.coffee":175,"./focus/viz.js":215,"./shapes/edges.js":225,"./shapes/labels.js":227,"./shapes/paths.js":229,"./ui/message.js":245,"./zoom/bounds.coffee":248,"./zoom/labels.coffee":250,"./zoom/mouse.coffee":251}],214:[function(b,c,d){var g,f,h,k;g=b("../tooltip/create.js");f=b("../../../core/fetch/value.coffee");h=b("../../../core/console/print.coffee");k=b("../../../tooltip/remove.coffee");c.exports=function(b){var c,d,t;d=b.focus;!b.error.internal&&1===d.value.length&&d.value.length&&
!b.small&&d.tooltip.value?(b.dev.value&&h.time("drawing focus tooltip"),c=b.data.pool.filter(function(c){return f(b,c,b.id.value)===d.value[0]}),1<=c.length?c=c[0]:(c={},c[b.id.value]=d.value[0]),t=b.labels.padding,g({anchor:"top left",arrow:!1,data:c,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:b.height.viz-2*t,mouseevents:!0,offset:0,vars:b,width:b.tooltip.large,x:b.width.value-b.margin.right-t,y:b.margin.top+t}),b.width.viz-=b.tooltip.large+2*t,b.dev.value&&h.timeEnd("drawing focus tooltip")):
k("visualization_focus")}},{"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../tooltip/remove.coffee":202,"../tooltip/create.js":239}],215:[function(b,c,d){var g=b("../../../client/pointer.coffee"),f=b("../../../client/ie.js"),h=b("../../../core/fetch/value.coffee"),k=b("../../../core/console/print.coffee"),l=b("../../../util/uniques.coffee");c.exports=function(b){b.g.edge_focus.selectAll("g").remove();b.g.data_focus.selectAll("g").remove();if(b.focus.value.length&&
b.types[b.type.value].zoom&&b.zoom.value){b.dev.value&&k.time("drawing focus elements");var c=b.g.edges.selectAll("g");if(0<c.size()){c.each(function(c){var d=c[b.edges.target][b.id.value];if(c[b.edges.source][b.id.value]==b.focus.value[0]||d==b.focus.value[0])d=b.g.edge_focus.node().appendChild(this.cloneNode(!0)),d3.select(d).datum(c).attr("opacity",1).selectAll("line, path").datum(c)});var d=b.edges.arrows.value;b.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",
b.color.focus).style("stroke-width",function(){return f&&b.types[b.type.value].zoom?0:b.edges.size.value?d3.select(this).style("stroke-width"):2*b.data.stroke.width}).attr("marker-start",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"source"==b.edges.arrows.direction.value&&d?"url(#d3plus_edge_marker_focus"+c+")":"none"}).attr("marker-end",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"target"==b.edges.arrows.direction.value&&d?"url(#d3plus_edge_marker_focus"+c+")":
"none"});b.g.edge_focus.selectAll("text").style("fill",b.color.focus)}var u=l(b.edges.connections(b.focus.value[0],b.id.value,!0),b.id.value,h,b);u.push(b.focus.value[0]);var n=[],q=[],r=[0],w=[0];b.g.data.selectAll("g").each(function(c){if(0<=u.indexOf(c[b.id.value])){var d=b.g.data_focus.node().appendChild(this.cloneNode(!0)),d=d3.select(d).datum(c).attr("opacity",1);"coordinates"==b.shape.value?b.zoom.viewport=b.path.bounds(b.zoom.coords[c.d3plus.id]):"d3plus"in c&&("x"in c.d3plus&&n.push(c.d3plus.x),
"y"in c.d3plus&&q.push(c.d3plus.y),"r"in c.d3plus?(r.push(c.d3plus.r),w.push(c.d3plus.r)):("width"in c.d3plus&&r.push(c.d3plus.width/2),"height"in c.d3plus&&w.push(c.d3plus.height/2)));for(e in g)if(c=d3.select(this).on(g[e]))d.on(g[e],c)}});if(n.length&&q.length){var c=d3.extent(n),v=d3.extent(q),y=d3.max(r),A=d3.max(w);b.zoom.viewport=[[c[0]-y,v[0]-A],[c[1]+y,v[1]+A]]}b.g.data_focus.selectAll("path").style("stroke-width",f&&b.types[b.type.value].zoom?0:2*b.data.stroke.width);b.dev.value&&k.timeEnd("drawing focus elements")}else b.zoom.viewport=
!1}},{"../../../client/ie.js":37,"../../../client/pointer.coffee":38,"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../util/uniques.coffee":209}],216:[function(b,c,d){var g,f,h,k,l;l=b("./style.coffee");h=b("../../../geom/largestRect.coffee");k=b("../../../geom/path2poly.coffee");g={};f={};c.exports=function(b,c,d,u){var n,q,r,w;n=d3.svg.arc().innerRadius(0).outerRadius(function(b){return b.d3plus.r}).startAngle(function(b){return b.d3plus.startAngle}).endAngle(function(b){return b.d3plus.endAngle});
r=function(c){var d;b.labels.value&&(c.d3plus.label?c.d3plus_label=c.d3plus.label:(d=k(n(c)),d=h(d,{angle:0}),d[0]?c.d3plus_label={w:d[0].width,h:d[0].height,x:d[0].cx,y:d[0].cy}:delete c.d3plus_label));return[c]};b.draw.timing?(w=d3.svg.arc().innerRadius(0).outerRadius(function(b){return b.d3plus.r}).startAngle(function(b){void 0===g[b.d3plus.id]&&(g[b.d3plus.id]=0);isNaN(g[b.d3plus.id])&&(g[b.d3plus.id]=b.d3plus.startAngle);return g[b.d3plus.id]}).endAngle(function(b){void 0===f[b.d3plus.id]&&(f[b.d3plus.id]=
0);isNaN(f[b.d3plus.id])&&(f[b.d3plus.id]=b.d3plus.endAngle);return f[b.d3plus.id]}),q=function(b,c){return b.attrTween("d",function(b){var d,h,k,l;void 0===c?(l=b.d3plus.startAngle,d=b.d3plus.endAngle):0===c&&(d=l=0);k=d3.interpolate(g[b.d3plus.id],l);h=d3.interpolate(f[b.d3plus.id],d);return function(c){g[b.d3plus.id]=k(c);f[b.d3plus.id]=h(c);return w(b)}})},d.append("path").attr("class","d3plus_data").call(l,b).attr("d",w),c.selectAll("path.d3plus_data").data(r).transition().duration(b.draw.timing).call(l,
b).call(q),u.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(q,0)):(d.append("path").attr("class","d3plus_data"),c.selectAll("path.d3plus_data").data(r).call(l,b).attr("d",n))}},{"../../../geom/largestRect.coffee":159,"../../../geom/path2poly.coffee":161,"./style.coffee":233}],217:[function(b,c,d){var g=b("../../../core/fetch/text.js"),f=b("../../../font/sizes.coffee"),h=b("../../../geom/largestRect.coffee"),k=b("./style.coffee");c.exports=function(b,c,d,t){var u=d3.svg.area().x(function(b){return b.d3plus.x}).y0(function(b){return b.d3plus.y0}).y1(function(b){return b.d3plus.y}).interpolate(b.shape.interpolate.value),
n=d3.svg.area().x(function(b){return b.d3plus.x}).y0(function(b){return b.d3plus.y0}).y1(function(b){return b.d3plus.y0}).interpolate(b.shape.interpolate.value);d.append("path").attr("class","d3plus_data").attr("d",function(b){return n(b.values)}).call(k,b);var q={"font-weight":b.labels.font.weight,"font-family":b.labels.font.family.value};c.selectAll("path.d3plus_data").data(function(c){if(b.labels.value&&1<c.values.length){var d=!1;if(d3.max(c.values,function(b){return b.d3plus.y0-b.d3plus.y})>
b.labels.font.size){var k=[],m=[],n=g(b,c);c.values.forEach(function(b){k.push([b.d3plus.x,b.d3plus.y]);m.push([b.d3plus.x,b.d3plus.y0])});k=k.concat(m.reverse());d=null;n.length&&(d=f(n[0],q),d=d[0].width/d[0].height);d=h(k,{angle:d3.range(-70,71,1),aspectRatio:d,tolerance:0})}d&&d[0]&&(n={w:~~d[0].width,h:~~d[0].height,x:~~d[0].cx,y:~~d[0].cy,angle:-1*d[0].angle,padding:2,names:n},n.translate=0!==d[0].angle?{x:n.x,y:n.y}:!1,10<=n.w&&10<=n.h&&(c.d3plus_label=n))}return[c]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).attr("d",
function(b){return u(b.values)}).call(k,b):c.selectAll("path.d3plus_data").attr("d",function(b){return u(b.values)}).call(k,b)}},{"../../../core/fetch/text.js":66,"../../../font/sizes.coffee":101,"../../../geom/largestRect.coffee":159,"./style.coffee":233}],218:[function(b,c,d){b("../../../core/fetch/text.js");b("../../../geom/largestRect.coffee");var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("transform",function(b){return"scale("+Math.floor(Math.min(b.d3plus.width,b.d3plus.height)/
16)+")"})}d.append("path").attr("class","d3plus_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(function(b){b.attr("transform","scale(1)")}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"../../../core/fetch/text.js":66,"../../../geom/largestRect.coffee":159,
"./style.coffee":233}],219:[function(b,c,d){var g,f,h;b("../../../core/fetch/value.coffee");g=b("../../../core/fetch/color.coffee");f=b("../../../color/lighter.coffee");h=b("./segments.coffee");c.exports=function(b,c,d){var p,t;p=b.d3plus.shape||c.shape.value;if("line"===c.shape.value&&"circle"!==p)return"none";if("area"===c.shape.value||"active"===p||"line"===c.shape.value)return g(c,b);if("temp"===p)return d?g(c,b):"url(#d3plus_hatch_"+b.d3plus.id+")";if(b.d3plus["static"])return f(g(c,b),.75);
d=h(c,b,"active");p=h(c,b,"temp");t=h(c,b,"total");return!c.active.value&&!c.temp.value||!0===d||d&&t&&d>=t&&!p||d&&!t?g(c,b):c.active.spotlight.value?c.color.missing:f(g(c,b),.75)}},{"../../../color/lighter.coffee":45,"../../../core/fetch/color.coffee":63,"../../../core/fetch/value.coffee":67,"./segments.coffee":232}],220:[function(b,c,d){var g,f,h,k,l,m,p,t;g=b("../../../util/copy.coffee");f=b("../../../network/distance.coffee");h=b("../../../core/fetch/text.js");k=b("../../../font/sizes.coffee");
m=b("../../../geom/largestRect.coffee");p=b("../../../geom/path2poly.coffee");t=b("./style.coffee");l={};c.exports=function(b,c,d,r){r=d3.geo[b.coords.projection.value]();r.center&&r.center(b.coords.center);b.zoom.scale||(b.zoom.scale=1);b.zoom.area=1/b.zoom.scale/b.zoom.scale;b.path=d3.geo.path().projection(r);b.draw.timing?c.selectAll("path.d3plus_data").attr("d",b.path).transition().duration(b.draw.timing).call(t,b):c.selectAll("path.d3plus_data").attr("d",b.path).call(t,b);d.append("path").attr("id",
function(b){return b.id}).attr("class","d3plus_data").attr("d",b.path).call(t,b);d=b.old_height!==b.height.viz||b.height.changed||b.old_width!==b.width.viz||b.width.changed;b.old_height=b.height.viz;b.old_width=b.width.viz;if(b.coords.changed||d||b.coords.mute.changed||b.coords.solo.changed||b.type.changed||b.text.changed||b.coords.projection.changed||b.labels.changed)return b.zoom.bounds=null,b.zoom.reset=!0,b.zoom.coords={},c.each(function(c){var d,n,q,r,t,C,D,B,F,H,I;if(b.coords.simplify.value&&
1<c.geometry.coordinates.length){D=[];n=[];d=0;B=g(c);H=g(c);c.geometry.coordinates=c.geometry.coordinates.filter(function(c,f){var g;H.geometry.coordinates=[c];g=b.path.area(H);return 0<g?(n.push(g),g>d&&(B.geometry.coordinates=[c],d=g),!0):!1});r=b.path.centroid(B);I=c.geometry.coordinates;q=t=0;for(F=I.length;t<F;q=++t)q=I[q],H.geometry.coordinates=[q],D.push(f(b.path.centroid(H),r));r=D.reduce(function(b,c,d){c&&b.push(n[d]/c);return b},[]);C=d3.quantile(r,b.coords.threshold.value);H.geometry.coordinates=
c.geometry.coordinates.filter(function(b,c){var d,f;f=D[c];d=n[c];return 0===f||d/f>=C});(t=B.geometry.coordinates[0])&&"MultiPolygon"===B.geometry.type&&(t=t[0],B.geometry.coordinates[0]=t,B.geometry.type="Polygon")}else B=H=c,t=c.geometry.coordinates[0];b.zoom.coords[c.d3plus.id]=H;delete c.d3plus_label;b.labels.value&&(r=h(b,c),t&&r.length&&(t=p(b.path(B)),I={"font-weight":b.labels.font.weight,"font-family":b.labels.font.family.value},F=null,1===r[0].split(" ").length&&(F=k(r[0],I)[0],F=F.width/
F.height),t=m(t,{angle:0,aspectRatio:F})))&&(t=t[0],c.d3plus_label={anchor:"middle",valign:"center",h:t.height,w:t.width,x:t.cx,y:t.cy,names:r});l[c.id]=c.d3plus_label;c=b.path.bounds(H);if(b.zoom.bounds){if(b.zoom.bounds[0][0]>c[0][0]&&(b.zoom.bounds[0][0]=c[0][0]),b.zoom.bounds[0][1]>c[0][1]&&(b.zoom.bounds[0][1]=c[0][1]),b.zoom.bounds[1][0]<c[1][0]&&(b.zoom.bounds[1][0]=c[1][0]),b.zoom.bounds[1][1]<c[1][1])return b.zoom.bounds[1][1]=c[1][1]}else return b.zoom.bounds=c});if(!b.focus.value.length)return b.zoom.viewport=
!1,c.each(function(b){return b.d3plus_label=l[b.id]})}},{"../../../core/fetch/text.js":66,"../../../font/sizes.coffee":101,"../../../geom/largestRect.coffee":159,"../../../geom/path2poly.coffee":161,"../../../network/distance.coffee":164,"../../../util/copy.coffee":206,"./style.coffee":233}],221:[function(b,c,d){var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("d",d3.svg.symbol().type("cross").size(function(b){b=Math.min(b.d3plus.width,b.d3plus.height);return d3.scale.pow().exponent(2)(b/
2)}))}d.append("path").attr("class","d3plus_data").call(function(b){b.attr("d",d3.svg.symbol().type("cross").size(10))}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"./style.coffee":233}],222:[function(b,c,d){var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("d",d3.svg.symbol().type("diamond").size(function(b){b=
Math.min(b.d3plus.width,b.d3plus.height);return d3.scale.pow().exponent(2)(b/2)}))}d.append("path").attr("class","d3plus_data").call(function(b){b.attr("d",d3.svg.symbol().type("diamond").size(10))}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"./style.coffee":233}],223:[function(b,c,d){var g=b("./style.coffee");c.exports=
function(b,c,d,l){function m(c,d,g,h){d||(d=0);"number"!=typeof g&&(g=void 0);"number"!=typeof h&&(h=void 0);c.attrTween("d",function(c){var k=void 0==g?c.d3plus.r?c.d3plus.r:d3.max([c.d3plus.width,c.d3plus.height]):g,l=void 0==h?c.d3plus.segments[c.d3plus.shape]:h;b.arcs[c.d3plus.shape][c.d3plus.id]||(b.arcs[c.d3plus.shape][c.d3plus.id]={r:0},b.arcs[c.d3plus.shape][c.d3plus.id].a=2*Math.PI);var m=d3.interpolate(b.arcs[c.d3plus.shape][c.d3plus.id].r,k+d),p=d3.interpolate(b.arcs[c.d3plus.shape][c.d3plus.id].a,
l);return function(d){b.arcs[c.d3plus.shape][c.d3plus.id].r=m(d);b.arcs[c.d3plus.shape][c.d3plus.id].a=p(d);return t(c)}})}function p(b){b.d3plus.label?b.d3plus_label=b.d3plus.label:delete b.d3plus_label;return[b]}b.arcs||(b.arcs={donut:{},active:{},temp:{}});var t=d3.svg.arc().startAngle(0).endAngle(function(c){c=b.arcs[c.d3plus.shape][c.d3plus.id].a;return c>2*Math.PI?2*Math.PI:c}).innerRadius(function(c){return c.d3plus["static"]?0:b.arcs[c.d3plus.shape][c.d3plus.id].r*b.data.donut.size}).outerRadius(function(c){return b.arcs[c.d3plus.shape][c.d3plus.id].r});
b.draw.timing?(l.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m,0,0).each("end",function(c){delete b.arcs[c.d3plus.shape][c.d3plus.id]}),c.selectAll("path.d3plus_data").data(p).transition().duration(b.draw.timing).call(m).call(g,b),d.append("path").attr("class","d3plus_data").transition().duration(0).call(m,0,0).call(g,b).transition().duration(b.draw.timing).call(m).call(g,b)):(l.selectAll("path.d3plus_data").each(function(c){delete b.arcs[c.d3plus.shape][c.d3plus.id]}),
d.append("path").attr("class","d3plus_data"),c.selectAll("path.d3plus_data").data(p).call(m).call(g,b))}},{"./style.coffee":233}],224:[function(b,c,d){var g=b("../../../util/child.coffee"),f=b("../../../util/closest.coffee"),h=b("../tooltip/create.js"),k=b("../../../client/pointer.coffee"),l=b("../../../core/fetch/value.coffee"),m=b("../../../core/fetch/color.coffee"),p=b("../../../core/fetch/text.js"),t=b("../../../color/legible.coffee"),u=b("../../../core/console/print.coffee"),n=b("../../../tooltip/remove.coffee"),
q=b("./segments.coffee"),r=b("./fill.js"),w=b("../../../string/strip.js"),v=b("../../../client/touch.coffee"),y=b("../zoom/propagation.coffee"),A=b("../../../util/uniques.coffee"),x=b("../../../object/validate.coffee"),z=b("../zoom/direction.coffee"),C={arc:b("./arc.coffee"),area:b("./area.js"),check:b("./check.js"),coordinates:b("./coordinates.coffee"),cross:b("./cross.js"),diamond:b("./diamond.js"),donut:b("./donut.js"),line:b("./line.js"),radial:b("./radial.coffee"),rect:b("./rect.coffee"),triangle_down:b("./triangle_down.js"),
triangle_up:b("./triangle_up.js"),whisker:b("./whisker.coffee")};c.exports=function(b){function c(d){if(!d.d3plus.id){d.d3plus.id="";for(var f=0;f<=b.depth.value;f++)d.d3plus.id+=l(b,d,b.id.nesting[f])+"_";d.d3plus.id+=N;["x","y","x2","y2"].forEach(function(c){"discrete"==b[c].scale.value&&(c=l(b,d,b[c].value),c.constructor===Date&&(c=c.getTime()),d.d3plus.id+="_"+c)});d.d3plus.suffix&&(d.d3plus.id+="_"+d.d3plus.suffix);d.d3plus.id=w(d.d3plus.id)}return d}function d(c,f){var g=b.types[b.type.value].scale,
h=1;g&&(x[g]&&b.shape.value in g?h=g[b.shape.value]:"function"==typeof g?h=g(b,b.shape.value):"number"==typeof g&&(h=g));h=f?h:1;c.attr("transform",function(b){return 0>["line","area","coordinates"].indexOf(N)?"translate("+(b.d3plus.x||0)+","+(b.d3plus.y||0)+")scale("+h+")":"scale("+h+")"})}function H(c){c.attr("class",function(c){c=b["class"].value?" "+l(b,c,b["class"].value):"";return"d3plus_"+N+c})}function I(c){if(c&&0<b.g.edges.selectAll("g").size()){b.g.edge_hover.selectAll("*").remove();b.g.edges.selectAll("g").each(function(d){var f=
c[b.id.value],g=d[b.edges.source][b.id.value],h=d[b.edges.target][b.id.value];if(g==f||g=="left_"+f||g=="right_"+f||h==f||h=="left_"+f||h=="right_"+f)f=b.g.edge_hover.node().appendChild(this.cloneNode(!0)),d3.select(f).datum(d).attr("opacity",1).selectAll("line, path").datum(d)});var d=b.edges.arrows.value;b.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",b.color.primary).style("stroke-width",function(c){return b.edges.path&&c.dy?Math.max(1,c.dy):b.edges.size.value?d3.select(this).style("stroke-width"):
2*b.data.stroke.width}).attr("marker-start",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"source"==b.edges.arrows.direction.value&&d?"url(#d3plus_edge_marker_highlight"+c+")":"none"}).attr("marker-end",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"target"==b.edges.arrows.direction.value&&d?"url(#d3plus_edge_marker_highlight"+c+")":"none"});b.g.edge_hover.selectAll("text").style("fill",b.color.primary);b.draw.timing?(b.g.edge_hover.transition().duration(b.timing.mouseevents).attr("opacity",
1),b.g.edges.transition().duration(b.timing.mouseevents).attr("opacity",.5)):b.g.edge_hover.attr("opacity",1)}else b.draw.timing?(b.g.edge_hover.transition().duration(b.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),b.g.edges.transition().duration(b.timing.mouseevents).attr("opacity",1)):b.g.edge_hover.selectAll("*").remove()}var G=b.returned.nodes||[],M=b.returned.edges||[];b.draw.timing=G.length<b.data.large&&M.length<b.edges.large?b.timing.transitions:0;var J={arc:"arc",
area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",radial:"radial",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},K={};G.forEach(function(c){var d=c.d3plus&&c.d3plus.shape?c.d3plus.shape:b.shape.value;d in J&&(c.d3plus&&(c.d3plus.shape=d),d=J[d],K[d]||(K[d]=[]),K[d].push(c))});for(var L in J)J[L]in K&&0!==d3.keys(K).length||(G=b.g.data.selectAll("g.d3plus_"+
J[L]),b.draw.timing?G.transition().duration(b.draw.timing).attr("opacity",0).remove():G.remove());for(var N in K)L=b.g.data.selectAll("g.d3plus_"+N).data(K[N],function(d){d.d3plus||(d.d3plus={});if("coordinates"===N)return d.d3plus.id=d.id;if(!d.d3plus.id)if(d.values)d.values.forEach(function(b){b=c(b);b.d3plus.shape="circle"}),d.d3plus.id=d.key;else if(d=c(d),!d.d3plus.segments){d.d3plus.segments={donut:2*Math.PI};var f=q(b,d,"active"),g=q(b,d,"temp"),h=q(b,d,"total");h&&(d.d3plus.segments.active=
f?f/h*2*Math.PI:0,d.d3plus.segments.temp=g?g/h*2*Math.PI+d.d3plus.segments.active:0)}return d.d3plus?d.d3plus.id:!1}),G=b.draw.timing?L.exit().transition().duration(b.draw.timing).attr("opacity",0).remove():L.exit().remove(),b.draw.timing?L.transition().duration(b.draw.timing).call(d).call(H):L.call(d).call(H),M=b.draw.timing?0:1,M=L.enter().append("g").attr("opacity",M).call(d).call(H),b.draw.timing&&M.transition().duration(b.draw.timing).attr("opacity",1),L.order(),b.dev.value&&u.time('drawing "'+
N+'" shapes'),C[N](b,L,M,G,d),b.dev.value&&u.timeEnd('drawing "'+N+'" shapes'),0<=["rect","donut"].indexOf(N)&&b.types[b.type.value].fill&&(b.dev.value&&u.time('filling "'+N+'" shapes'),r(b,L,M,G,d),b.dev.value&&u.timeEnd('filling "'+N+'" shapes'));I();if(b.tooltip.value)b.g.data.selectAll("g").on(k.over,function(c){v&&y(b,d3.event);if(d3.event.buttons||!b.mouse.value||!b.mouse.over.value||b.draw.frozen||c.d3plus&&c.d3plus["static"])n(b.type.value);else if("function"===typeof b.mouse.over.value)b.mouse.over.value(c,
b.self);else{var g=z(c.d3plus_data||c,b),g="function"===typeof b.mouse.viz||"function"===typeof b.mouse.viz[k.click]||b.zoom.value&&(b.types[b.type.value].zoom||c.d3plus.threshold&&c.d3plus.merged||1===g||-1===g&&b.history.states.length&&!b.tooltip.value["long"]);d3.select(this).style("cursor",g?"pointer":"auto").transition().duration(b.timing.mouseevents).call(d,!0);d3.select(this).selectAll(".d3plus_data").transition().duration(b.timing.mouseevents).attr("opacity",1);b.covered=!1;if(c.values&&b.axes.discrete){var g=
"x"===b.axes.discrete?0:1,l=d3.mouse(b.container.value.node())[g],g=A(c.values,function(c){return c.d3plus[b.axes.discrete]}),l=f(g,l);c.d3plus_data=c.values[g.indexOf(l)];c.d3plus=c.values[g.indexOf(l)].d3plus}h({vars:b,data:c.d3plus_data?c.d3plus_data:c});if("function"==typeof b.mouse.viz)b.mouse.viz(c.d3plus_data||c,b);else if(b.mouse.viz[k.over])b.mouse.viz[k.over](c.d3plus_data||c,b);I(c)}}).on(k.move,function(c){v&&y(b,d3.event);if(d3.event.buttons||!b.mouse.value||!b.mouse.move.value||b.draw.frozen||
c.d3plus&&c.d3plus["static"])n(b.type.value);else if("function"===typeof b.mouse.move.value)b.mouse.move.value(c,b.self);else{var d=z(c.d3plus_data||c,b),d="function"===typeof b.mouse.viz||"function"===typeof b.mouse.viz[k.click]||b.zoom.value&&(b.types[b.type.value].zoom||c.d3plus.threshold&&c.d3plus.merged||1===d||-1===d&&b.history.states.length&&!b.tooltip.value["long"]);d3.select(this).style("cursor",d?"pointer":"auto");if(c.values&&b.axes.discrete){var d="x"===b.axes.discrete?0:1,g=d3.mouse(b.container.value.node())[d],
d=A(c.values,function(c){return c.d3plus[b.axes.discrete]}),g=f(d,g);c.d3plus_data=c.values[d.indexOf(g)];c.d3plus=c.values[d.indexOf(g)].d3plus}h({vars:b,data:c.d3plus_data?c.d3plus_data:c});if("function"==typeof b.mouse.viz)b.mouse.viz(c.d3plus_data||c,b);else if(b.mouse.viz[k.move])b.mouse.viz[k.move](c.d3plus_data||c,b)}}).on(k.out,function(c){v&&y(b,d3.event);if(!d3.event.buttons&&b.mouse.value&&b.mouse.out.value)if("function"===typeof b.mouse.out.value)b.mouse.out.value(c,b.self);else{if(!(g(this,
d3.event.toElement)||b.draw.frozen||c.d3plus&&c.d3plus["static"])){d3.select(this).transition().duration(b.timing.mouseevents).call(d);d3.select(this).selectAll(".d3plus_data").transition().duration(b.timing.mouseevents).attr("opacity",b.data.opacity);b.covered||n(b.type.value);if("function"==typeof b.mouse.viz)b.mouse.viz(c.d3plus_data||c,b);else if(b.mouse.viz[k.out])b.mouse.viz[k.out](c.d3plus_data||c,b);I()}}else n(b.type.value)});else L=function(){y(b,d3.event)},b.g.data.selectAll("g").on(k.over,
L).on(k.move,L).on(k.out,L);d3.select(window).on("scroll.d3plus",function(){n(b.type.value)});b.g.data.selectAll("g").on(k.click,function(c){if(!(b.mouse.viz&&!1===b.mouse.viz.click||!b.mouse.value||!b.mouse.click.value||d3.event.defaultPrevented||b.draw.frozen||c.d3plus&&c.d3plus["static"]))if("function"===typeof b.mouse.click.value)b.mouse.click.value(c,b.self);else{if(c.values&&b.axes.discrete){var g="x"===b.axes.discrete?0:1,q=d3.mouse(b.container.value.node())[g],g=A(c.values,function(c){return c.d3plus[b.axes.discrete]}),
q=f(g,q);c.d3plus_data=c.values[g.indexOf(q)];c.d3plus=c.values[g.indexOf(q)].d3plus}if("function"==typeof b.mouse.viz)b.mouse.viz(c.d3plus_data||c,b);else if(b.mouse.viz[k.out])b.mouse.viz[k.out](c.d3plus_data||c,b);else if(b.mouse.viz[k.click])b.mouse.viz[k.click](c.d3plus_data||c,b);var r=z(c.d3plus_data||c,b),v=b.id.solo.value,g=p(b,c)[0],q=t(m(b,c)),u=b.title.sub.value||!1,w=b.title.sub.font.color,y=b.title.total.font.color;c.d3plus.threshold&&c.d3plus.merged&&b.zoom.value?(b.history.states.push(function(){b.self.id({solo:v}).title({sub:{font:{color:w},
value:u},total:{font:{color:y}}}).draw()}),b.self.id({solo:v.concat(A(c.d3plus.merged,b.id.value,l,b))}).title({sub:{font:{color:q},value:g},total:{font:{color:q}}}).draw()):1===r&&b.zoom.value?(c=l(b,c.d3plus_data||c,b.id.value),b.history.states.push(function(){b.self.depth(b.depth.value-1).id({solo:v}).title({sub:{font:{color:w},value:u},total:{font:{color:y}}}).draw()}),b.self.depth(b.depth.value+1).id({solo:v.concat(c)}).title({sub:{font:{color:q},value:g},total:{font:{color:q}}}).draw()):-1===
r&&b.zoom.value&&b.history.states.length&&!b.tooltip.value["long"]?b.history.back():b.types[b.type.value].zoom&&b.zoom.value?(I(),d3.select(this).transition().duration(b.timing.mouseevents).call(d),d3.select(this).selectAll(".d3plus_data").transition().duration(b.timing.mouseevents).attr("opacity",b.data.opacity),n(b.type.value),b.draw.update=!1,c&&c[b.id.value]!=b.focus.value[0]?b.self.focus(c[b.id.value]).draw():b.self.focus(!1).draw()):0>b.types[b.type.value].requirements.indexOf("focus")&&(I(),
h({vars:b,data:c.d3plus_data?c.d3plus_data:c}))}})}},{"../../../client/pointer.coffee":38,"../../../client/touch.coffee":43,"../../../color/legible.coffee":44,"../../../core/console/print.coffee":52,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/validate.coffee":171,"../../../string/strip.js":174,"../../../tooltip/remove.coffee":202,"../../../util/child.coffee":204,"../../../util/closest.coffee":205,"../../../util/uniques.coffee":209,
"../tooltip/create.js":239,"../zoom/direction.coffee":249,"../zoom/propagation.coffee":252,"./arc.coffee":216,"./area.js":217,"./check.js":218,"./coordinates.coffee":220,"./cross.js":221,"./diamond.js":222,"./donut.js":223,"./fill.js":226,"./line.js":228,"./radial.coffee":230,"./rect.coffee":231,"./segments.coffee":232,"./triangle_down.js":234,"./triangle_up.js":235,"./whisker.coffee":236}],225:[function(b,c,d){var g=b("../../../util/buckets.coffee"),f=b("../../../geom/offset.coffee");c.exports=function(b){function c(d){d.attr("opacity",
0).style("stroke-width",0).style("stroke",b.background.value).style("fill","none")}function d(c){var f=b.edges.arrows.value;c.attr("opacity",function(c){return"number"===y?v:"function"===y?v(c,b):b.edges.opacity.scale.value(c[v])}).style("stroke-width",function(c){return b.edges.scale(c[b.edges.size.value])}).style("stroke",b.edges.color).attr("marker-start",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"source"==b.edges.arrows.direction.value&&f?"url(#d3plus_edge_marker_default"+
c+")":"none"}).attr("marker-end",function(c){c="bucket"in c.d3plus?"_"+c.d3plus.bucket:"";return"target"==b.edges.arrows.direction.value&&f?"url(#d3plus_edge_marker_default"+c+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function m(c){c.attr("x1",function(c){return c[b.edges.source].d3plus.edges[c[b.edges.target][b.id.value]].x}).attr("y1",function(c){return c[b.edges.source].d3plus.edges[c[b.edges.target][b.id.value]].y}).attr("x2",function(c){return c[b.edges.target].d3plus.edges[c[b.edges.source][b.id.value]].x}).attr("y2",
function(c){return c[b.edges.target].d3plus.edges[c[b.edges.source][b.id.value]].y})}function p(b){b.attr("d",function(b){return A(b.d3plus.spline)})}function t(c){delete c.d3plus_label;if(b.g.edges.selectAll("line, path").size()<b.edges.large&&b.edges.label&&c[b.edges.label]){if("spline"in c.d3plus){var d=this.getTotalLength(),f=this.getPointAtLength(d/2),g=this.getPointAtLength(d/2-.1*d),k=this.getPointAtLength(d/2+.1*d),g=Math.atan2(k.y-g.y,k.x-g.x),g=180/Math.PI*g;this.parentNode.getBBox();d*=
.8}else{this.getBBox();var k=c[b.edges.source],l=c[b.edges.target],f=l.d3plus.edges[k[b.id.value]].x,g=l.d3plus.edges[k[b.id.value]].y,d=f-k.d3plus.edges[l[b.id.value]].x,k=g-k.d3plus.edges[l[b.id.value]].y,f={x:f-d/2,y:g-k/2},g=Math.atan2(k,d),g=180/Math.PI*g,d=Math.sqrt(d*d+k*k)}k=f.x;f=f.y;d+=2*b.labels.padding;l=0;b.edges.arrows.value&&(l="number"===typeof b.edges.arrows.value?b.edges.arrows.value:8,l/=b.zoom.behavior.scaleExtent()[1],d-=2*l);if(-90>g||90<g)g-=180;20<d*b.zoom.behavior.scaleExtent()[0]&&
(c.d3plus_label={x:k,y:f,translate:{x:k,y:f},w:d,h:15+2*b.labels.padding,angle:g,anchor:"middle",valign:"center",color:b.edges.color,resize:!1,names:[b.format.value(c[b.edges.label])],background:1})}}var u=b.returned.edges||[],n=b.zoom.behavior.scaleExtent()[0];if("string"===typeof b.edges.size.value){var q=d3.extent(u,function(c){return c[b.edges.size.value]}),r=2*d3.min(b.returned.nodes||[],function(b){return b.d3plus.r})*b.edges.size.scale;b.edges.scale=d3.scale.sqrt().domain(q).range([b.edges.size.min,
r*n])}else{var w="number"==typeof b.edges.size.value?b.edges.size.value:b.edges.size.min;b.edges.scale=function(){return w}}var v=b.edges.opacity.value,y=typeof v;b.edges.opacity.changed&&"string"===y&&b.edges.opacity.scale.value.domain(d3.extent(u,function(b){return b[v]})).range([b.edges.opacity.min.value,1]);var A=d3.svg.line().interpolate(b.edges.interpolate.value),q=b.edges.arrows.value?"string"==typeof b.edges.size.value?"default_0 default_1 default_2 highlight_0 highlight_1 highlight_2 focus_0 focus_1 focus_2".split(" "):
["default","highlight","focus"]:[];if("string"==typeof b.edges.size.value)for(var r=g(b.edges.scale.range(),4),x=[],z=0;3>z;z++)x.push(r[z+1]+(r[1]-r[0])*(z+2)*2);else r="number"===typeof b.edges.arrows.value?b.edges.arrows.value:8,x="number"===typeof b.edges.size.value?b.edges.size.value/r:r;q=b.defs.selectAll(".d3plus_edge_marker").data(q,String);r=function(c){c.attr("d",function(c){c=c.split("_");2==c.length&&b.edges.scale?(c=parseInt(c[1]),c=x[c]):c=x;return"target"==b.edges.arrows.direction.value?
"M 0,-"+c/2+" L "+.85*c+",0 L 0,"+c/2+" L 0,-"+c/2:"M 0,-"+c/2+" L -"+.85*c+",0 L 0,"+c/2+" L 0,-"+c/2}).attr("fill",function(c){c=c.split("_")[0];return"default"==c?b.edges.color:"focus"==c?b.color.focus:b.color.primary}).attr("transform","scale("+1/n+")")};b.draw.timing?(q.exit().transition().duration(b.draw.timing).attr("opacity",0).remove(),q.select("path").transition().duration(b.draw.timing).attr("opacity",1).call(r)):(q.exit().remove(),q.select("path").attr("opacity",1).call(r));z=b.draw.timing?
0:1;q=q.enter().append("marker").attr("id",function(b){return"d3plus_edge_marker_"+b}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",z).attr("vector-effect","non-scaling-stroke").call(r);b.draw.timing&&q.transition().duration(b.draw.timing).attr("opacity",1);var C="string"==typeof b.edges.size.value?g(b.edges.scale.domain(),4):null,D=b.edges.arrows.direction.value,q=u.filter(function(c){c.d3plus||
(c.d3plus={});c.d3plus.id="edge_"+c[b.edges.source][b.id.value]+"_"+c[b.edges.target][b.id.value];if(!0!==c.d3plus.spline){if(C){var d=c[b.edges.size.value];c.d3plus.bucket=d<C[1]?0:d<C[2]?1:2;var g=.85*x[c.d3plus.bucket]/n}else delete c.d3plus.bucket,g=.85*x/n;d=c[b.edges.source];c=c[b.edges.target];if(!d.d3plus||!c.d3plus)return!1;var k=Math.atan2(c.d3plus.y-d.d3plus.y,c.d3plus.x-d.d3plus.x),l="target"==D&&b.edges.arrows.value?c.d3plus.r+g:c.d3plus.r,g=f(Math.atan2(d.d3plus.y-c.d3plus.y,d.d3plus.x-
c.d3plus.x),"source"==D&&b.edges.arrows.value?d.d3plus.r+g:d.d3plus.r,b.shape.value),k=f(k,l,b.shape.value);"edges"in d.d3plus||(d.d3plus.edges={});d.d3plus.edges[c[b.id.value]]={x:d.d3plus.x-g.x,y:d.d3plus.y-g.y};"edges"in c.d3plus||(c.d3plus.edges={});c.d3plus.edges[d[b.id.value]]={x:c.d3plus.x-k.x,y:c.d3plus.y-k.y};return!0}return!1}),q=b.g.edges.selectAll("g.d3plus_edge_line").data(q,function(b){return b.d3plus.id}),u=u.filter(function(c){if(c.d3plus.spline){if(C){var d=c[b.edges.size.value];
c.d3plus.bucket=d<C[1]?0:d<C[2]?1:2;var g=.85*x[c.d3plus.bucket]/n}else delete c.d3plus.bucket,g=.85*x/n;var d=c[b.edges.source],k=c[b.edges.target],l=d.d3plus.edges?d.d3plus.edges[k[b.id.value]]||{}:{},m=k.d3plus.edges?k.d3plus.edges[d[b.id.value]]||{}:{},p=b.edges.arrows.value&&"source"==D?g:0,q=b.edges.arrows.value&&"target"==D?g:0,g=d.d3plus.x>k.d3plus.x?.9:1.1,r=d.d3plus.x>k.d3plus.x?1.1:.9,g="number"===typeof l.angle?l.angle:Math.atan2(d.d3plus.y-k.d3plus.y,d.d3plus.x-k.d3plus.x)*g,t=f(g,d.d3plus.r+
p,b.shape.value),r="number"===typeof m.angle?m.angle:Math.atan2(k.d3plus.y-d.d3plus.y,k.d3plus.x-d.d3plus.x)*r,v=f(r,k.d3plus.r+q,b.shape.value),u=[d.d3plus.x-t.x,d.d3plus.y-t.y],w=(t=l.offset?f(g,l.offset):!1)?[u[0]-t.x,u[1]-t.y]:u,y=[k.d3plus.x-v.x,k.d3plus.y-v.y],z=(v=m.offset?f(r,m.offset):!1)?[y[0]-v.x,y[1]-v.y]:y,A=z[0]-w[0],ea=z[1]-w[1],m="number"===typeof m.radius?m.radius:Math.sqrt(A*A+ea*ea)/4,l=f(g,("number"===typeof l.radius?l.radius:Math.sqrt(A*A+ea*ea)/4)-d.d3plus.r-2*p),p=f(r,m-k.d3plus.r-
2*q);c.d3plus.spline=[u,y];d=Math.abs(Math.atan2(d.d3plus.y-k.d3plus.y,d.d3plus.x-k.d3plus.x)).toFixed(5);k=Math.abs(g).toFixed(5);g=Math.abs(r-Math.PI).toFixed(5);if(k!==g||0>[k,g].indexOf(d))c.d3plus.spline.splice(1,0,[w[0]-l.x,w[1]-l.y],[z[0]-p.x,z[1]-p.y]),t&&c.d3plus.spline.splice(1,0,w),v&&c.d3plus.spline.splice(c.d3plus.spline.length-1,0,z);return!0}return!1}),u=b.g.edges.selectAll("g.d3plus_edge_path").data(u,function(b){return b.d3plus.id});b.draw.timing?(q.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove(),u.exit().transition().duration(b.draw.timing).attr("opacity",0).remove(),q.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(b.draw.timing/2).attr("opacity",0).remove(),u.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(b.draw.timing/2).attr("opacity",0).remove(),q.selectAll("line").data(function(b){return[b]}).transition().duration(b.draw.timing).call(m).call(d).each("end",t),u.selectAll("path").data(function(b){return[b]}).transition().duration(b.draw.timing).call(p).call(d).each("end",
t),q.enter().append("g").attr("class","d3plus_edge_line").append("line").call(m).call(c).transition().duration(b.draw.timing).call(d).each("end",t),u.enter().append("g").attr("class","d3plus_edge_path").append("path").call(p).call(c).transition().duration(b.draw.timing).call(d).each("end",t)):(q.exit().remove(),u.exit().remove(),q.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),u.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),q.selectAll("line").data(function(b){return[b]}).call(m).call(d).call(t),
u.selectAll("path").data(function(b){return[b]}).call(p).call(d).call(t),q.enter().append("g").attr("class","d3plus_edge_line").append("line").call(m).call(c).call(d).call(t),u.enter().append("g").attr("class","d3plus_edge_path").append("path").call(p).call(c).call(d).call(t))}},{"../../../geom/offset.coffee":160,"../../../util/buckets.coffee":203}],226:[function(b,c,d){var g=b("../../../util/copy.coffee"),f=b("../../../core/fetch/color.coffee");b("../../../core/fetch/value.coffee");var h=b("./segments.coffee"),
k=b("./style.coffee");c.exports=function(b,c,d,t){function u(b){b.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function n(c,d){d||(d=0);c.attr("x",function(b){return-(b.d3plus.r?2*b.d3plus.r:b.d3plus.width)/2-d/2}).attr("y",function(b){return-(b.d3plus.r?2*b.d3plus.r:b.d3plus.height)/2-d/2}).attr("width",function(b){return(b.d3plus.r?2*b.d3plus.r:b.d3plus.width)+d}).attr("height",function(b){return(b.d3plus.r?2*b.d3plus.r:b.d3plus.height)+d}).attr("rx",function(c){c=c.d3plus.r?2*c.d3plus.r:
c.d3plus.width;return 0<=["circle","donut"].indexOf(b.shape.value)?(c+d)/2:0}).attr("ry",function(c){c=c.d3plus.r?2*c.d3plus.r:c.d3plus.height;return 0<=["circle","donut"].indexOf(b.shape.value)?(c+d)/2:0}).attr("shape-rendering",function(c){return 0<=["square"].indexOf(b.shape.value)?b.shape.rendering.value:"auto"})}function q(c,d,f,g){d||(d=0);"number"!=typeof f&&(f=void 0);"number"!=typeof g&&(g=void 0);c.attrTween("d",function(c){var h=void 0===f?c.d3plus.r?c.d3plus.r:d3.max([c.d3plus.width,c.d3plus.height]):
f,k=void 0===g?c.d3plus.segments[c.d3plus.shape]:g;b.arcs[c.d3plus.shape][c.d3plus.id]||(b.arcs[c.d3plus.shape][c.d3plus.id]={r:0},b.arcs[c.d3plus.shape][c.d3plus.id].a="donut"===c.d3plus.shape?2*Math.PI:0);var m=d3.interpolate(b.arcs[c.d3plus.shape][c.d3plus.id].r,h+d),n=d3.interpolate(b.arcs[c.d3plus.shape][c.d3plus.id].a,k);return function(d){b.arcs[c.d3plus.shape][c.d3plus.id].r=m(d);b.arcs[c.d3plus.shape][c.d3plus.id].a=n(d);return r(c)}})}b.arcs||(b.arcs={donut:{},active:{},temp:{}});var r=
d3.svg.arc().startAngle(0).endAngle(function(c){c=b.arcs[c.d3plus.shape][c.d3plus.id].a;return c>2*Math.PI?2*Math.PI:c}).innerRadius(function(c){return c.d3plus["static"]||"donut"!==b.shape.value?0:b.arcs[c.d3plus.shape][c.d3plus.id].r*b.data.donut.size}).outerRadius(function(c){c=b.arcs[c.d3plus.shape][c.d3plus.id].r;return"donut"===b.shape.value?c:2*c});c.each(function(c){function d(c){c.attr("stroke",C).attr("stroke-width",1).attr("shape-rendering",b.shape.rendering.value)}var m=h(b,c,"active"),
p=h(b,c,"temp"),r=h(b,c,"total"),t=d3.select(this),C=f(b,c),D=[],B=[];if(r&&b.types[b.type.value].fill){if(p){var F=g(c);F.d3plus.shape="temp";D.push(F);B=["temp"]}m&&(m<r||p)&&(F=g(c),F.d3plus.shape="active",D.push(F))}m=b.defs.selectAll("pattern#d3plus_hatch_"+c.d3plus.id).data(B);b.draw.timing?(m.selectAll("rect").transition().duration(b.draw.timing).style("fill",C),m.selectAll("line").transition().duration(b.draw.timing).style("stroke",C)):(m.selectAll("rect").style("fill",C),m.selectAll("line").style("stroke",
C));m=m.enter().append("pattern").attr("id","d3plus_hatch_"+c.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");m.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",C).attr("fill-opacity",.25);m.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(d);m.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(d);m.append("line").attr("x1",
"9").attr("x2","11").attr("y1","-1").attr("y2","1").call(d);m=D.length?[c]:[];m=t.selectAll("#d3plus_clip_"+c.d3plus.id).data(m);m.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+c.d3plus.id).append("rect").attr("class","d3plus_clipping").call(u);b.draw.timing?(m.selectAll("rect").transition().duration(b.draw.timing).call(n),m.exit().transition().delay(b.draw.timing).remove()):(m.selectAll("rect").call(n),m.exit().remove());t=t.selectAll("path.d3plus_fill").data(D);t.transition().duration(b.draw.timing).call(k,
b).call(q);t.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+c.d3plus.id+")").transition().duration(0).call(k,b).call(q,0,void 0,0).transition().duration(b.draw.timing).call(q).call(k,b);t.exit().transition().duration(b.draw.timing).call(q,0,void 0,0).remove()})}},{"../../../core/fetch/color.coffee":63,"../../../core/fetch/value.coffee":67,"../../../util/copy.coffee":206,"./segments.coffee":232,"./style.coffee":233}],227:[function(b,c,d){b("../../../util/copy.coffee");
var g=b("../../../core/fetch/text.js"),f=b("../../../core/fetch/value.coffee"),h=b("../../../color/mix.coffee"),k=b("../../../core/console/print.coffee");b("../../../client/rtl.coffee");var l=b("./segments.coffee"),m=b("./color.coffee"),p=b("../../../string/list.coffee"),t=b("../../../color/text.coffee"),u=b("../../../textwrap/textwrap.coffee");c.exports=function(b,c){var d=b.types[b.type.value].zoom?b.zoom.behavior.scaleExtent():[1,1],w=b.g[c].selectAll("g"),v=function(c){c.attr("opacity",function(c){var f=
parseFloat(d3.select(this).attr("font-size"),10);c.visible=2<=b.zoom.scale/d[1]*f;return c.visible?1:0})},y=function(c){b.draw.timing?c.transition().duration(b.draw.timing).attr("opacity",0).remove():c.remove()},A=function(c){var f="bottom"===b.labels.valign.value?"top":"bottom";c.attr("font-weight",b.labels.font.weight).attr("font-family",b.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(b){return b.mouse?"auto":"none"}).attr("fill",function(c){if(c.color)return c.color;
var d=m(c.parent,b),f=t(d);return h(d,f,.2,c.text?.15:1)}).each(function(c){var g=c.resize,h=!0;if(c.text){g instanceof Array||(g=[9,50],h=c.resize);var k=c.y-c.h*d[1]/2+c.padding/2;"bottom"===f&&(k+=c.h*d[1]/2);u().align("center").container(d3.select(this)).height(c.h*d[1]/2).padding(c.padding/2).resize(h).size(g).text(b.format.value(100*c.text,{key:"share",vars:b})).width(c.w*d[1]).valign(f).x(c.x-c.w*d[1]/2+c.padding/2).y(k).draw()}else c.resize instanceof Array||(g=[7,d[1]/d[0]*40],h=c.resize),
k="bottom"===b.labels.valign.value?c.share:0,u().align(c.anchor||b.labels.align.value).container(d3.select(this)).height(c.h*d[1]-c.share).padding(c.padding/2).resize(h).size(g).shape(c.shape||"square").text(c.names).valign(b.labels.valign.value).width(c.w*d[1]).x(c.x-c.w*d[1]/2+c.padding/2).y(c.y-c.h*d[1]/2+c.padding/2+k).draw()}).attr("transform",function(b){var c=d3.select(this).attr("transform")||"",f=b.angle||0,g=b.translate&&b.translate.x?b.translate.x:0,h=b.translate&&b.translate.y?b.translate.y:
0;c.length&&(c=c.split(")").slice(-3).join(")"));return"rotate("+f+","+g+","+h+")scale("+1/d[1]+")translate("+(b.x*d[1]-b.x)+","+(b.y*d[1]-b.y)+")"+c})};if("edges"===c||b.labels.value){if(b.dev.value){var x="drawing "+c+" labels";k.time(x)}w.each(function(c){var h=c.d3plus&&"label"in c.d3plus&&!c.d3plus.label,k=c.d3plus_label||null,m=c.d3plus_share,q=c.d3plus.text?c.d3plus.text:k&&k.names?k.names:b.labels.text.value?f(b,c,b.labels.text.value):g(b,c),t=k&&"group"in k?k.group:d3.select(this),u=0,w=
b.types[b.type.value].fill;q instanceof Array||(q=[q]);if(k)if(0<=["line","area"].indexOf(b.shape.value))var x=!0;else if(c&&"d3plus"in c)var x=l(b,c,"active"),J=l(b,c,"temp"),K=l(b,c,"total"),x=!J&&!x||x>=K||!x&&J>=K;if(h||!(k&&k.force||x)&&w)delete c.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y),b.g.labels.selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y);else{if(m&&c.d3plus.share&&10<=
m.w-2*b.labels.padding&&10<=m.h-2*b.labels.padding&&"middle"!=b.labels.valign.value){m.resize=!1===b.labels.resize.value?!1:m&&"resize"in m?m.resize:!0;m.padding=b.labels.padding;m.text=c.d3plus.share;m.parent=c;var L=t.selectAll("text#d3plus_share_"+c.d3plus.id).data([m],function(b){return b.w+""+b.h+""+b.text});b.draw.timing&&1===b.zoom.scale?(L.transition().duration(b.draw.timing/2).call(A),L.enter().append("text").attr("id","d3plus_share_"+c.d3plus.id).attr("class","d3plus_share").attr("opacity",
0).call(A).transition().duration(b.draw.timing/2).delay(b.draw.timing/2).attr("opacity",1)):(L.attr("opacity",1).call(A),L.enter().append("text").attr("id","d3plus_share_"+c.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(A));u=L.node().getBBox().height+b.labels.padding;L.exit().call(y)}else t.selectAll("text.d3plus_share").call(y);k&&(k.resize=!1===b.labels.resize.value?!1:k&&"resize"in k?k.resize:!0,k.padding="number"===typeof k.padding?k.padding:b.labels.padding);if(k&&20<=k.w*d[1]-
k.padding&&10<=k.h*d[1]-k.padding&&q.length){h=b.format.locale.value.ui.and;m=b.format.locale.value.ui.more;for(w=0;w<q.length;w++)q[w]instanceof Array&&(q[w]=p(q[w],h,3,m));k.names=q;k.share=u;k.parent=c;L=t.selectAll("text#d3plus_label_"+c.d3plus.id).data([k],function(b){return b?b.w+"_"+b.h+"_"+b.x+"_"+b.y+"_"+b.names.join("_"):!1});q=k.resize?void 0:b.labels.font.size*d[0]+"px";b.draw.timing&&1===b.zoom.scale?(L.transition().duration(b.draw.timing/2).call(A).call(v),L.enter().append("text").attr("font-size",
q).attr("id","d3plus_label_"+c.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(A).transition().duration(b.draw.timing/2).delay(b.draw.timing/2).call(v)):(L.attr("opacity",1).call(A).call(v),L.enter().append("text").attr("font-size",q).attr("id","d3plus_label_"+c.d3plus.id).attr("class","d3plus_label").call(A).call(v));L.exit().call(y);if(0===L.size()||0===L.selectAll("tspan").size())delete c.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+
c.d3plus.id).call(y),b.g.labels.selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y);else{q=function(c){var d="string"===typeof k.background?k.background:"none"===b.background.value?"#ffffff":b.background.value,d="string"===typeof k.background?k.background:d,f=L.attr("transform").split(")");f.pop();f.pop();f.push("");f=f.join(")");c.attr("fill",d).attr(N).attr("transform",f)};if(k.background){var u=["background"],h=L.node().getBBox(),N={height:h.height,width:h.width,
x:h.x,y:h.y};N.width+=b.labels.padding*d[0];N.height+=b.labels.padding*d[0];N.x-=b.labels.padding*d[0]/2;N.y-=b.labels.padding*d[0]/2;h=L.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];h=h.replace(/([^a-z])\s([^a-z])/gi,"$1,$2");h=h.split(",");1<h.length&&(h=h[h.length-1],h=h.substring(0,h.length-1),N.y+=h)}else u=[],N={};t=t.selectAll("rect#d3plus_label_bg_"+c.d3plus.id).data(u);u="number"===typeof k.background?k.background:"string"===typeof k.background?1:.6;b.draw.timing?(t.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove(),t.transition().duration(b.draw.timing).attr("opacity",u).call(q),t.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+c.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(q).transition().duration(b.draw.timing).attr("opacity",u)):(t.exit().remove(),t.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+c.d3plus.id).attr("class","d3plus_label_bg"),t.attr("opacity",u).call(q))}}else delete c.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+
c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y),b.g.labels.selectAll("text#d3plus_label_"+c.d3plus.id+", rect#d3plus_label_bg_"+c.d3plus.id).call(y)}})}else b.dev.value&&(x="removing "+c+" labels",k.time(x)),w.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(y),b.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(y);b.dev.value&&k.timeEnd(x)}},{"../../../client/rtl.coffee":40,"../../../color/mix.coffee":46,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,
"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../string/list.coffee":173,"../../../textwrap/textwrap.coffee":199,"../../../util/copy.coffee":206,"./color.coffee":219,"./segments.coffee":232}],228:[function(b,c,d){function g(b){b.attr("x",function(b){return b.d3plus.x}).attr("y",function(b){return b.d3plus.y}).attr("width",0).attr("height",0)}function f(b,c){void 0===c&&(c=0);b.attr("x",function(b){return b.d3plus.x-((b.d3plus.r?2*b.d3plus.r:b.d3plus.width)/2+c/2)}).attr("y",
function(b){return b.d3plus.y-((b.d3plus.r?2*b.d3plus.r:b.d3plus.height)/2+c/2)}).attr("width",function(b){return(b.d3plus.r?2*b.d3plus.r:b.d3plus.width)+c}).attr("height",function(b){return(b.d3plus.r?2*b.d3plus.r:b.d3plus.height)+c}).attr("rx",function(b){return((b.d3plus.r?2*b.d3plus.r:b.d3plus.width)+c)/2}).attr("ry",function(b){return((b.d3plus.r?2*b.d3plus.r:b.d3plus.height)+c)/2})}function h(b,c,d,g){var h=b.draw.timing?b.timing.mouseevents:0;void 0===g&&(g=0);h?(d3.select(c.parentNode).selectAll("path.d3plus_line").transition().duration(h).style("stroke-width",
function(c){var f=d;f.constructor!==Number&&(f=(c=t(b,c,d))&&c.length?d3.max(c):b.data.stroke.width);return f+g}),d3.select(c.parentNode).selectAll("rect").transition().duration(h).style("stroke-width",function(c){var f=d;f.constructor!==Number&&(f=(c=t(b,c,d))&&c.length?d3.max(c):b.data.stroke.width);return f}).call(f,g)):(d3.select(c.parentNode).selectAll("path.d3plus_line").style("stroke-width",function(c){var f=d;f.constructor!==Number&&(f=(c=t(b,c,d))&&c.length?d3.max(c):b.data.stroke.width);
return f+g}),d3.select(c.parentNode).selectAll("rect").style("stroke-width",function(c){var f=d;f.constructor!==Number&&(f=(c=t(b,c,d))&&c.length?d3.max(c):b.data.stroke.width);return f}).call(f,g))}var k=b("../../../util/copy.coffee"),l=b("../../../util/closest.coffee"),m=b("../../../client/pointer.coffee"),p=b("./style.coffee"),t=b("../../../core/fetch/value.coffee");c.exports=function(b,c,d,r){var w=d3.svg.line().x(function(b){return b.d3plus.x}).y(function(b){return b.d3plus.y}).interpolate(b.shape.interpolate.value),
v=b.size.value||2*b.data.stroke.width,y=b[b.axes.discrete],A=function(c){var d=v;d.constructor!==Number&&(d=(c=t(b,c,v))&&c.length?d3.max(c):b.data.stroke.width);return 15>d?15:d},x=y.ticks.values.map(function(b){return b.constructor===Date?b.getTime():b});c.each(function(c){var d=!1,n=[],q=[],r=k(c),H=d3.select(this);r.values=[];r.segment_key=r.key;c.values.forEach(function(f,g,h){var m=t(b,f,y.value);m.constructor===Date&&(m=m.getTime());m=x.indexOf(l(x,m));!1===d||d===m-1?(r.values.push(f),r.segment_key+=
"_"+m):(1<r.values.length?n.push(r):q.push(r.values[0]),r=k(c),r.values=[f]);g===h.length-1&&(1<r.values.length?n.push(r):q.push(r.values[0]));d=m});var I=H.selectAll("path.d3plus_line").data(n,function(b){b.d3plus||(b.d3plus={});b.d3plus.shape="line";return b.segment_key}),G=H.selectAll("rect.d3plus_anchor").data(q,function(c){c.d3plus||(c.d3plus={});c.d3plus.r=2*b.data.stroke.width;return c.d3plus.id});b.draw.timing?(I.exit().transition().duration(b.draw.timing).attr("opacity",0).remove(),I.transition().duration(b.draw.timing).attr("d",
function(b){return w(b.values)}).call(p,b),I.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round").attr("d",function(b){return w(b.values)}).call(p,b).attr("opacity",0).transition().duration(b.draw.timing).attr("opacity",1),G.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(b){return b.d3plus.id}).call(g).call(p,b),G.transition().duration(b.draw.timing).call(f).call(p,b),G.exit().transition().duration(b.draw.timing).call(g).remove()):(I.exit().remove(),
I.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round"),I.attr("d",function(b){return w(b.values)}).call(p,b),G.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(b){return b.d3plus.id}),G.exit().remove(),G.call(f).call(p,b));H=H.selectAll("path.d3plus_mouse").data(n,function(b){return b.segment_key});H.enter().append("path").attr("class","d3plus_mouse").attr("d",function(b){return w(b.values)}).style("stroke","black").style("stroke-width",A).style("fill",
"none").style("stroke-linecap","round").attr("opacity",0);H.on(m.over,function(c){b.draw.frozen||h(b,this,v,2)}).on(m.out,function(c){b.draw.frozen||h(b,this,v,0)});b.draw.timing?H.transition().duration(b.draw.timing).attr("d",function(b){return w(b.values)}).style("stroke-width",A):H.attr("d",function(b){return w(b.values)}).style("stroke-width",A);H.exit().remove()})}},{"../../../client/pointer.coffee":38,"../../../core/fetch/value.coffee":67,"../../../util/closest.coffee":205,"../../../util/copy.coffee":206,
"./style.coffee":233}],229:[function(b,c,d){c.exports=function(b){function c(d){d.attr("d",b.edges.path).style("stroke-width",function(b){return Math.max(1,b.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(b){return"translate("+b.d3plus.x+","+b.d3plus.y+")"})}var d=b.returned.edges||[],d=b.g.edges.selectAll("g.d3plus_edge_path").data(d,function(c){c.d3plus.id="path_"+c[b.edges.source][b.id.value]+"_"+c[b.edges.target][b.id.value];return c.d3plus.id});b.draw.timing?(d.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove(),d.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(b.draw.timing/2).attr("opacity",0).remove(),d.selectAll("path").data(function(b){return[b]}).transition().duration(b.draw.timing).call(c),d.enter().append("g").attr("class","d3plus_edge_path").append("path").style("stroke-width",0).transition().duration(b.draw.timing).call(c)):(d.exit().remove(),d.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),d.selectAll("path").data(function(b){return[b]}).call(c),
d.enter().append("g").attr("class","d3plus_edge_path").append("path").call(c))}},{}],230:[function(b,c,d){var g,f,h,k,l;l=b("./style.coffee");k={};h={};g={};f={};c.exports=function(b,c,d,u){var n,q,r,w,v;r=b.id.nesting[b.depth.value+1];w=d3.svg.line.radial().interpolate("linear-closed").radius(function(b){return b.d3plus.r}).angle(function(b){return b.d3plus.a});n=function(c){b.labels.value&&(c.d3plus.label?c.d3plus_label=c.d3plus.label:delete c.d3plus_label);return[c]};b.draw.timing?(c.each(function(c){var d,
f,g,h;g=c[r];h=[];d=0;for(f=g.length;d<f;d++)c=g[d],h.push(c.d3plus.id=c[b.id.value]+"_"+c[r]);return h}),q=d3.svg.line.radial().interpolate("linear-closed").radius(function(b,c){void 0===k[b.d3plus.id]&&(k[b.d3plus.id]=0);isNaN(k[b.d3plus.id])&&(k[b.d3plus.id]=b.d3plus.r);return k[b.d3plus.id]}).angle(function(b,c){void 0===h[b.d3plus.id]&&(h[b.d3plus.id]=b.d3plus.a);isNaN(h[b.d3plus.id])&&(h[b.d3plus.id]=b.d3plus.a);return h[b.d3plus.id]}),v=function(b,c){return b.attrTween("d",function(b){var d,
l,m,n,p,t,v;v=b[r];m=n=0;for(p=v.length;n<p;m=++n)l=v[m],d=l.d3plus.a,void 0===c?t=l.d3plus.r:0===c&&(t=0),f[l.d3plus.id]=d3.interpolate(h[l.d3plus.id],d),g[l.d3plus.id]=d3.interpolate(k[l.d3plus.id],t);return function(c){var d,n,p;p=b[r];m=d=0;for(n=p.length;d<n;m=++d)l=p[m],h[l.d3plus.id]=f[l.d3plus.id](c),k[l.d3plus.id]=g[l.d3plus.id](c);return q(b[r])}})},d.append("path").attr("class","d3plus_data").call(l,b).attr("d",function(b){return q(b[r])}),c.selectAll("path.d3plus_data").data(n).transition().duration(b.draw.timing).call(l,
b).call(v),u.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(v,0)):(d.append("path").attr("class","d3plus_data"),c.selectAll("path.d3plus_data").data(n).call(l,b).attr("d",function(b){return w(b[r])}))}},{"./style.coffee":233}],231:[function(b,c,d){var g;g=b("./style.coffee");c.exports=function(b,c,d,l){var m,p,t;m=function(c){var d,g;b.labels.value&&!c.d3plus.label?(g=c.d3plus.r?2*c.d3plus.r:c.d3plus.width,d=c.d3plus.r?2*c.d3plus.r:c.d3plus.height,c.d3plus_label={w:g,h:d,
x:0,y:0},c.d3plus_share={w:g,h:d,x:0,y:0},c.d3plus_label.shape="circle"===c.d3plus.shape?"circle":"square"):c.d3plus.label?c.d3plus_label=c.d3plus.label:delete c.d3plus_label;return[c]};p=function(b){return b.attr("x",function(b){return b.d3plus.init&&"x"in b.d3plus.init?b.d3plus.init.x:b.d3plus.init&&"width"in b.d3plus.init?-b.d3plus.width/2:0}).attr("y",function(b){return b.d3plus.init&&"y"in b.d3plus.init?b.d3plus.init.y:b.d3plus.init&&"height"in b.d3plus.init?-b.d3plus.height/2:0}).attr("width",
function(b){return b.d3plus.init&&"width"in b.d3plus.init?b.d3plus.init.width:0}).attr("height",function(b){return b.d3plus.init&&"height"in b.d3plus.init?b.d3plus.init.height:0})};t=function(c){return c.attr("x",function(b){return-(b.d3plus.r?2*b.d3plus.r:b.d3plus.width)/2}).attr("y",function(b){return-(b.d3plus.r?2*b.d3plus.r:b.d3plus.height)/2}).attr("width",function(b){return b.d3plus.r?2*b.d3plus.r:b.d3plus.width}).attr("height",function(b){return b.d3plus.r?2*b.d3plus.r:b.d3plus.height}).attr("rx",
function(b){var c;c="circle"===b.d3plus.shape;b=b.d3plus.r?2*b.d3plus.r:b.d3plus.width;return c?(b+2)/2:0}).attr("ry",function(b){var c;c="circle"===b.d3plus.shape;b=b.d3plus.r?2*b.d3plus.r:b.d3plus.height;return c?(b+2)/2:0}).attr("transform",function(b){return"rotate"in b.d3plus?"rotate("+b.d3plus.rotate+")":""}).attr("shape-rendering",function(c){return"square"!==c.d3plus.shape||"rotate"in c.d3plus?"auto":b.shape.rendering.value})};if(b.draw.timing)return d.append("rect").attr("class","d3plus_data").call(p).call(g,
b),c.selectAll("rect.d3plus_data").data(m).transition().duration(b.draw.timing).call(t).call(g,b),l.selectAll("rect.d3plus_data").transition().duration(b.draw.timing).call(p);d.append("rect").attr("class","d3plus_data");return c.selectAll("rect.d3plus_data").data(m).call(t).call(g,b)}},{"./style.coffee":233}],232:[function(b,c,d){var g;g=b("../../../core/fetch/value.coffee");c.exports=function(b,c,d){var l;return(l=b[d].value)?d in c.d3plus?c.d3plus[d]:g(b,c,l):c.d3plus[d]}},{"../../../core/fetch/value.coffee":67}],
233:[function(b,c,d){var g,f,h;g=b("./color.coffee");f=b("../../../client/ie.js");h=b("../../../core/fetch/value.coffee");c.exports=function(b,c){return b.attr("fill",function(b){return b.d3plus&&b.d3plus.spline?"none":g(b,c)}).style("stroke",function(b){if(b.d3plus&&b.d3plus.stroke)return b.d3plus.stroke;b=b.values?g(b.values[0],c):g(b,c,!0);return d3.rgb(b).darker(.6)}).style("stroke-width",function(b){if(f&&c.types[c.type.value].zoom)return 0;if("line"===b.d3plus.shape&&c.size.value){if(c.size.value.constructor===
Number)return c.size.value;if((b=h(c,b,c.size.value))&&b.length)return d3.max(b)}return c.data.stroke.width}).attr("opacity",c.data.opacity).attr("vector-effect","non-scaling-stroke")}},{"../../../client/ie.js":37,"../../../core/fetch/value.coffee":67,"./color.coffee":219}],234:[function(b,c,d){var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("d",d3.svg.symbol().type("triangle-down").size(function(b){b=Math.min(b.d3plus.width,b.d3plus.height);return d3.scale.pow().exponent(2)(b/
2)}))}d.append("path").attr("class","d3plus_data").call(function(b){b.attr("d",d3.svg.symbol().type("triangle-down").size(10))}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"./style.coffee":233}],235:[function(b,c,d){var g=b("./style.coffee");c.exports=function(b,c,d,l){function m(b){b.attr("d",d3.svg.symbol().type("triangle-up").size(function(b){b=
Math.min(b.d3plus.width,b.d3plus.height);return d3.scale.pow().exponent(2)(b/2)}))}d.append("path").attr("class","d3plus_data").call(function(b){b.attr("d",d3.svg.symbol().type("triangle-up").size(10))}).call(g,b);c.selectAll("path.d3plus_data").data(function(b){return[b]});b.draw.timing?c.selectAll("path.d3plus_data").transition().duration(b.draw.timing).call(m).call(g,b):c.selectAll("path.d3plus_data").call(m).call(g,b)}},{"./style.coffee":233}],236:[function(b,c,d){c.exports=function(b,c,d,k){var l,
m,p,t,u,n,q,r;m=function(b){b.d3plus.text?b.d3plus_label={w:q,h:q,x:0,y:0,background:"#fff",resize:!1,angle:0<=["left","right"].indexOf(b.d3plus.position)?90:0}:b.d3plus.label?b.d3plus_label=b.d3plus.label:delete b.d3plus_label;return[b]};r=function(c){return c.style("stroke-width",b.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",b.shape.rendering.value)};p=function(b){return b.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)};n=function(b){return b.attr("x1",
function(b){var c;if(0<=["top","bottom"].indexOf(b.d3plus.position))return 0;c=b.d3plus.offset||0;b=b.d3plus.width||0;return(0>c?-b:b)+c}).attr("x2",function(b){return 0<=["top","bottom"].indexOf(b.d3plus.position)?0:b.d3plus.offset||0}).attr("y1",function(b){var c;if(0<=["left","right"].indexOf(b.d3plus.position))return 0;c=b.d3plus.offset||0;b=b.d3plus.height||0;return(0>c?-b:b)+c}).attr("y2",function(b){return 0<=["left","right"].indexOf(b.d3plus.position)?0:b.d3plus.offset||0}).attr("marker-start",
"url(#d3plus_whisker_marker)")};t=b.defs.selectAll("#d3plus_whisker_marker").data([0]);t.enter().append("marker").attr("id","d3plus_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line");(l=c.datum())?(u=l.d3plus.position,u=0<=["top","bottom"].indexOf(u)?"horizontal":"vertical",q="horizontal"===u?l.d3plus.width:l.d3plus.height):(u="horizontal",q=0);t.select("line").attr("x1","horizontal"===u?-q/2:0).attr("x2","horizontal"===u?q/2:0).attr("y1","vertical"===
u?-q/2:0).attr("y2","vertical"===u?q/2:0).call(r).style("stroke-width",2*b.data.stroke.width);b.draw.timing?(d.append("line").attr("class","d3plus_data").call(r).call(p),c.selectAll("line.d3plus_data").data(m).transition().duration(b.draw.timing).call(r).call(n),k.selectAll("line.d3plus_data").transition().duration(b.draw.timing).call(p)):(d.append("line").attr("class","d3plus_data"),c.selectAll("line.d3plus_data").data(m).call(r).call(n))}},{}],237:[function(b,c,d){var g=b("../../../client/pointer.coffee"),
f=b("../../../client/prefix.coffee"),h=b("../../../core/console/print.coffee"),k=b("../../../client/touch.coffee"),l=b("../zoom/propagation.coffee");c.exports=function(b){b.dev.value&&h.time("creating SVG elements");b.svg=b.container.value.selectAll("svg#d3plus").data([0]);b.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",b.width.value).attr("height",b.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink");b.g.bg=b.svg.selectAll("rect#bg").data(["bg"]);
b.g.bg.enter().append("rect").attr("id","bg").attr("fill",b.background.value).attr("stroke","none").attr("width",b.width.value).attr("height",b.height.value);b.g.timeline=b.svg.selectAll("g#timeline").data(["timeline"]);b.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+b.height.value+")");b.g.legend=b.svg.selectAll("g#key").data(["key"]);b.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+b.height.value+")");b.g.footer=b.svg.selectAll("g#footer").data(["footer"]);
b.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+b.height.value+")");var c="clipping_"+b.container.id;b.g.clipping=b.svg.selectAll("#clipping").data(["clipping"]);b.g.clipping.enter().append("clipPath").attr("id",c).append("rect").attr("width",b.width.viz).attr("height",b.height.viz);b.g.container=b.svg.selectAll("g#container").data(["container"]);b.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+c+")").attr("transform","translate("+
b.margin.left+","+b.margin.top+")");b.g.zoom=b.g.container.selectAll("g#zoom").data(["zoom"]);b.g.zoom.enter().append("g").attr("id","zoom");b.g.viz=b.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]);b.g.viz.enter().append("g").attr("id","d3plus_viz");b.g.overlay=b.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]);b.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",b.width.value).attr("height",b.height.value).attr("opacity",0);b.g.overlay.on(g.move,
function(c){k&&l(b,d3.event);b.types[b.type.value].zoom&&b.zoom.pan.value&&b.zoom.behavior.scaleExtent()[0]<b.zoom.scale?d3.select(this).style("cursor",f()+"grab"):d3.select(this).style("cursor","auto")}).on(g.up,function(c){k&&l(b,d3.event);b.types[b.type.value].zoom&&b.zoom.pan.value&&b.zoom.behavior.scaleExtent()[0]<b.zoom.scale?d3.select(this).style("cursor",f()+"grab"):d3.select(this).style("cursor","auto")}).on(g.down,function(c){k&&l(b,d3.event);b.types[b.type.value].zoom&&b.zoom.pan.value&&
b.zoom.behavior.scaleExtent()[0]<b.zoom.scale?d3.select(this).style("cursor",f()+"grabbing"):d3.select(this).style("cursor","auto")});b.g.app=b.g.viz.selectAll("g#app").data(["app"]);b.g.app.enter().append("g").attr("id","app");b.g.edges=b.g.viz.selectAll("g#edges").data(["edges"]);b.g.edges.enter().append("g").attr("id","edges").attr("opacity",0);b.g.edge_focus=b.g.viz.selectAll("g#focus").data(["focus"]);b.g.edge_focus.enter().append("g").attr("id","focus");b.g.edge_hover=b.g.viz.selectAll("g#edge_hover").data(["edge_hover"]);
b.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0);b.g.data=b.g.viz.selectAll("g#data").data(["data"]);b.g.data.enter().append("g").attr("id","data").attr("opacity",0);b.g.data_focus=b.g.viz.selectAll("g#data_focus").data(["data_focus"]);b.g.data_focus.enter().append("g").attr("id","data_focus");b.g.labels=b.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]);b.g.labels.enter().append("g").attr("id","d3plus_labels");b.defs=b.svg.selectAll("defs").data(["defs"]);b.defs.enter().append("defs");
b.dev.value&&h.timeEnd("creating SVG elements")}},{"../../../client/pointer.coffee":38,"../../../client/prefix.coffee":39,"../../../client/touch.coffee":43,"../../../core/console/print.coffee":52,"../zoom/propagation.coffee":252}],238:[function(b,c,d){var g=b("../../../core/console/print.coffee");c.exports=function(b){b.dev.value&&g.time("updating SVG elements");b.draw.timing?(b.container.value.transition().duration(b.draw.timing).style("width",b.width.value+"px").style("height",b.height.value+"px"),
b.svg.transition().duration(b.draw.timing).attr("width",b.width.value).attr("height",b.height.value),b.g.bg.transition().duration(b.draw.timing).attr("width",b.width.value).attr("height",b.height.value).attr("fill",b.background.value),b.g.clipping.select("rect").transition().duration(b.draw.timing).attr("width",b.width.viz).attr("height",b.height.viz),b.g.container.transition().duration(b.draw.timing).attr("transform","translate("+b.margin.left+","+b.margin.top+")")):(b.container.value.style("width",
b.width.value+"px").style("height",b.height.value+"px"),b.svg.attr("width",b.width.value).attr("height",b.height.value),b.g.bg.attr("width",b.width.value).attr("height",b.height.value).attr("fill",b.background.value),b.g.clipping.select("rect").attr("width",b.width.viz).attr("height",b.height.viz),b.g.container.attr("transform","translate("+b.margin.left+","+b.margin.top+")"));b.dev.value&&g.timeEnd("updating SVG elements")}},{"../../../core/console/print.coffee":52}],239:[function(b,c,d){var g=b("../../../array/sort.coffee"),
f=b("../../../tooltip/create.js"),h=b("../../../core/data/nest.js"),k=b("./data.js"),l=b("../../../core/fetch/color.coffee"),m=b("../../../core/fetch/text.js"),p=b("../../../core/fetch/value.coffee"),t=b("../../../object/merge.coffee"),u=b("../../../tooltip/remove.coffee"),n=b("../shapes/segments.coffee"),q=b("../../../client/scroll.js"),r=b("../../../util/uniques.coffee"),w=b("../../../object/validate.coffee"),v=b("../zoom/direction.coffee");c.exports=function(b){function c(q){function v(b){return"string"===
typeof d[b].value?d[b].value:d.format.locale.value.method[b]}var A="depth"in b?b.depth:C,F={},K,J=d.id.nesting[A+1]in z?A+1:A,R=d.id.nesting[J],Y="merged"in z.d3plus?z.d3plus.merged:z[R];Y instanceof Array||(Y=[Y]);var Z=p(d,z,d.size.value);if(d.tooltip.children.value){Y=Y.slice(0);1<Y.length&&w(Y[0])&&(Y=h(d,Y,[R]));if(d.size.value&&w(Y[0])){var ca=[];K=Y.filter(function(b){if(null===p(d,b,d.size.value)||"d3plus"in b&&b.d3plus.merged)ca.push(b);else return!0});g(K,d.size.value,"desc",[],d);Y=K.concat(ca)}var ba=
Y.length,aa=d3.min([ba,"short"===M?3:d.data.large]);K={values:[]};for(var ra=0;ra<aa&&Y.length;ra++){var pa=Y.shift(),Ba=m(d,pa,J)[0],wa=w(pa)?p(d,pa,R,J):pa;if(wa!==z[d.id.nesting[A]]&&Ba&&!K[Ba]){var sa=w(pa)?p(d,pa,d.size.value,R):null,qa=l(d,pa,R);K[Ba]=!sa||sa instanceof Array?"":d.format.value(sa,{key:d.size.value,vars:d,data:pa});pa={};pa[Ba]=K[Ba];K.values.push(pa);qa&&(K.d3plus_colors||(K.d3plus_colors={}),K.d3plus_colors[Ba]=qa)}else ra--}ba>aa&&(K.d3plusMore=ba-aa)}z.d3plus.tooltip&&(F=
t(F,z.d3plus.tooltip));d.tooltip.size.value&&(Z&&"number"!==typeof d.size.value&&(F[v("size")]=Z),d.axes.opposite&&d[d.axes.opposite].value!==d.size.value&&(F[v(d.axes.opposite)]=p(d,z,d[d.axes.opposite].value)),d.axes.opposite&&d[d.axes.opposite+"2"].value!==d.size.value&&(F[v(d.axes.opposite+"2")]=p(d,z,d[d.axes.opposite+"2"].value)),d.color.valueScale&&(F[v("color")]=p(d,z,d.color.value)));J=n(d,z,"active");A=n(d,z,"temp");R=n(d,z,"total");"number"==typeof J&&0<J&&R&&(F[v("active")]=J+"/"+R+" ("+
d.format.value(J/R*100,{key:"share",vars:d,data:z})+")");"number"==typeof A&&0<A&&R&&(F[v("temp")]=A+"/"+R+" ("+d.format.value(A/R*100,{key:"share",vars:d,data:z})+")");d.tooltip.share.value&&z.d3plus.share&&(F.share=d.format.value(100*z.d3plus.share,{key:"share",vars:d,data:z}));J="depth"in b?b.depth:C;A=b.title||m(d,z,J)[0];R=r(z,d.icon.value,p,d,d.id.nesting[J]);F=k(d,z,M,F,K,J);R=1===R.length&&"string"===typeof R[0]?R[0]:!1;0<F.length||L||!z.d3plus_label&&"short"==M&&A||z.d3plus_label&&(!("visible"in
z.d3plus_label)||"visible"in z.d3plus_label&&!1===z.d3plus_label.visible)?(A||(A=d.format.value(wa,{key:d.id.value,vars:d})),J="d3plus"in z&&"merged"in z.d3plus?C-1:"depth"in b?b.depth:C,0>J&&(J=0),J=d.id.nesting[J],wa="string"==typeof d.icon.style.value?d.icon.style.value:"object"==typeof d.icon.style.value&&d.icon.style.value[J]?d.icon.style.value[J]:"default",K=d.tooltip.small,b.width?K=b.width:I&&(K=d.tooltip.large),J=!I&&"long"!==b.length||I&&d.tooltip.fullscreen.value?d3.select("body"):d.container.value,
!b.description&&z&&d.tooltip.sub.value&&(b.description=p(d,z,d.tooltip.sub.value)),f({align:G,arrow:B,locale:d.format.locale.value,background:d.tooltip.background,curtain:d.tooltip.curtain.color,curtainopacity:d.tooltip.curtain.opacity,fontcolor:d.tooltip.font.color,fontfamily:d.tooltip.font.family.value,fontsize:d.tooltip.font.size,fontweight:d.tooltip.font.weight,data:F,color:l(d,z),allColors:!0,footer:!1===b.footer?b.footer:L,fullscreen:I,html:q,js:b.js,icon:R,id:H,max_height:b.maxheight,max_width:K,
mouseevents:D,offset:S,parent:J,stacked:d.tooltip.stacked.value,style:wa,title:A,description:b.description,width:b.width||I||0!=F.length?K:"auto",x:N,y:Q})):u(H)}"d3plus"in b.data||(b.data.d3plus={});var d=b.vars,z=b.data,C="d3plus"in z&&"depth"in z.d3plus?z.d3plus.depth:d.depth.value,D=b.mouseevents?b.mouseevents:!1,B="arrow"in b?b.arrow:!0,F=p(d,z,d.id.value),H=b.id||d.type.value;if(!d3.event||"click"!=d3.event.type||!d.tooltip.html.value&&!d.tooltip.value["long"]||"fullscreen"in b){var I=!1,G=
b.anchor||d.tooltip.anchor,M=b.length||"short",J=v(z,d);-1===J&&p(d,F,d.id.nesting[C-1]);var K="";!d.mouse.click.value||d.mouse.viz&&!1===d.mouse.viz.click||(1===J&&d.zoom.value?K=d.format.value(d.format.locale.value.ui.expand):-1===J&&d.zoom.value&&d.history.states.length&&!d.tooltip.value["long"]?K=d.format.value(d.format.locale.value.ui.collapse):d.small||"short"!=M||!d.tooltip.html.value&&!d.tooltip.value["long"]||1===d.focus.value.length&&d.focus.value[0]==F?"long"==M&&(K=d.footer.value||""):
K=d.format.locale.value.ui.moreInfo);L=K.length?d.format.value(K,{key:"footer",vars:d}):!1}else{var I=!0,B=!1,D=!0,M="long",L=d.footer.value;d.covered=!0}if("x"in b)var N=b.x;else"static"===d.types[d.type.value].tooltip?(N=z.d3plus.x,d.zoom.translate&&d.zoom.scale&&(N=d.zoom.translate[0]+N*d.zoom.scale),N+=d.margin.left,"long"!==b.length&&(Q+=q.x(),N+=d.container.value.node().getBoundingClientRect().left,N+=parseFloat(d.container.value.style("padding-left"),10))):N=d3.mouse(d3.select("html").node())[0];
if("y"in b)var Q=b.y;else"static"==d.types[d.type.value].tooltip?(Q=z.d3plus.y,d.zoom.translate&&d.zoom.scale&&(Q=d.zoom.translate[1]+Q*d.zoom.scale),Q+=d.margin.top,"long"!==b.length&&(Q+=q.y(),Q+=d.container.value.node().getBoundingClientRect().top,Q+=parseFloat(d.container.value.style("padding-top"),10))):Q=d3.mouse(d3.select("html").node())[1];if("offset"in b)var S=b.offset;else"static"==d.types[d.type.value].tooltip?(S=z.d3plus.r?z.d3plus.r:z.d3plus.height/2,d.zoom.scale&&(S*=d.zoom.scale)):
S=3;I||"long"===b.length?"string"==typeof d.tooltip.html.value?c(d.tooltip.html.value):"function"==typeof d.tooltip.html.value?c(d.tooltip.html.value(F)):d.tooltip.html.value&&"object"==typeof d.tooltip.html.value&&d.tooltip.html.value.url?(J=d.tooltip.html.value.url,"function"===typeof J&&(J=J(F)),d3.json(J,function(b){b=d.tooltip.html.value.callback?d.tooltip.html.value.callback(b):b;c(b)})):c(b.html):c(b.html)}},{"../../../array/sort.coffee":34,"../../../client/scroll.js":41,"../../../core/data/nest.js":60,
"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/merge.coffee":170,"../../../object/validate.coffee":171,"../../../tooltip/create.js":200,"../../../tooltip/remove.coffee":202,"../../../util/uniques.coffee":209,"../shapes/segments.coffee":232,"../zoom/direction.coffee":249,"./data.js":240}],240:[function(b,c,d){var g=b("../../../util/copy.coffee"),f=b("../../../core/fetch/value.coffee"),h=b("../../../core/fetch/color.coffee"),
k=b("../../../core/fetch/text.js"),l=b("../../../color/legible.coffee"),m=b("../../../object/merge.coffee"),p=b("../../../client/prefix.coffee"),t=b("../../../string/format.js"),u=b("../../../object/validate.coffee");c.exports=function(b,c,d,w,v,y){function A(d,g){var h=b.attrs.value[g]?g:null;g&&(g=b.format.value(g));h=z[d]||f(b,c,d,h);if(u(h))F.push({name:b.format.value(d),value:b.format.value(h.value,{key:h.key,vars:b}),group:g});else if(null!=h&&"undefined"!=h&&!(h instanceof Array)&&("string"===
typeof h&&0>h.indexOf("d3plus_other")||"string"!==typeof h)){var k=b.format.locale.value.ui[d]?b.format.value(b.format.locale.value.ui[d]):b.format.value(d),l=0<=D.indexOf(d);h instanceof Array?h.forEach(function(f){b.format.value(f,{key:d,vars:b,data:c})}):h=b.format.value(h,{key:d,vars:b,data:c});h={name:k,value:h,highlight:l,group:g};b.descs.value&&("function"===typeof b.descs.value?(k=b.descs.value(d),"string"===typeof k&&(h.desc=k)):d in b.descs.value&&(h.desc=b.descs.value[d]));F.push(h)}}if(b.small)return[];
d||(d="long");var x="long"==d?"short":"long",z={};if(w&&"string"==typeof w)w=[w];else if(w&&"object"==typeof w){z=m(z,w);w=[];for(var C in z)w.push(C)}else w||(w=[]);var D=[];if(b.tooltip.value instanceof Array)var B=b.tooltip.value;else"string"==typeof b.tooltip.value?B=[b.tooltip.value]:(B=b.tooltip.value[b.id.nesting[y]]?b.tooltip.value[b.id.nesting[y]]:b.tooltip.value,B instanceof Array||(B=B[d]?B[d]:B[x]?[]:m({"":[]},B)),"string"==typeof B?B=[B]:B instanceof Array||(B=m({"":[]},B)));var F=[];
B.constructor===Array&&(B={"":B});b.id.nesting.length&&y<b.id.nesting.length-1&&(B=g(B),b.id.nesting.forEach(function(b,c){c>y&&B[b]&&delete B[b]}));for(var H in B)for(B[H].constructor!==Array&&(B[H]=[B[H]]),x=w.length;0<x;x--)0<=B[H].indexOf(w[x-1])&&w.splice(x-1,1);if(b.tooltip.value["long"]&&"object"==typeof b.tooltip.value["long"])for(H in b.tooltip.value["long"])for(x=w.length;0<x;x--)C=w[x-1],0<=b.tooltip.value["long"][H].indexOf(C)&&(B[H]||(B[H]=[]),B[H].push(C),w.splice(x-1,1));w.length&&
(B[""]||(B[""]=[]),B[""]=B[""].concat(w));for(H in B)B[H].forEach(function(b){A(b,H)});if(v){var I=b.format.locale.value.ui.including,G=v.d3plus_colors;v.values.forEach(function(c){var d=d3.keys(c)[0];F.push({group:b.format.value(I),highlight:G&&G[d]?G[d]:!1,name:d,value:c[d]})});v.d3plusMore&&F.push({group:b.format.value(I),highlight:!0,name:t(b.format.locale.value.ui.more,v.d3plusMore),value:""})}b.tooltip.connections.value&&"long"===d&&(d=b.edges.connections(c[b.id.value],b.id.value,!0),d.length&&
d.forEach(function(c){var d=b.data.viz.filter(function(d){return d[b.id.value]===c[b.id.value]}),d=d.length?d[0]:c,f=k(b,d)[0],g=h(b,d),m=b.tooltip.font.size,q="square"==b.shape.value?0:m;styles=["background-color: "+g,"border-color: "+l(g),"border-style: solid","border-width: "+b.data.stroke.width+"px","display: inline-block","height: "+m+"px","left: 0px","position: absolute","width: "+m+"px","top: 0px",p()+"border-radius: "+q+"px"];node="<div style='"+styles.join("; ")+";'></div>";F.push({group:b.format.value(b.format.locale.value.ui.primary),
highlight:!1,link:function(){b.self.focus([d[b.id.value]]).draw()},name:"<div id='d3plustooltipfocuslink_"+d[b.id.value]+"' class='d3plus_tooltip_focus_link' style='position:relative;padding-left:"+1.5*m+"px;'>"+node+f+"</div>"})}));return F}},{"../../../client/prefix.coffee":39,"../../../color/legible.coffee":44,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/merge.coffee":170,"../../../object/validate.coffee":171,"../../../string/format.js":172,
"../../../util/copy.coffee":206}],241:[function(b,c,d){var g;g=b("../../../core/console/print.coffee");c.exports=function(b){var c,d,l,m,p,t;b.group=b.g.apps[b.type.value];b.mouse.viz=!1;b.edges.path=!1;t=b.types[b.type.value];c=0<=(t.requirements||[]).indexOf("data");c=!c||c&&b.data.viz.length;if(!b.error.internal&&c){c=b.format.locale.value.visualization[b.type.value];b.dev.value&&g.time("running "+c);p=b.data.viz;l=0;for(m=p.length;l<m;l++)d=p[l],d.d3plus&&(delete d.d3plus.shape,delete d.d3plus.label,
delete d.d3plus.rotate,delete d.d3plus.share);t=t(b);b.dev.value&&g.timeEnd("running "+c)}else t=null;b.returned={nodes:[],edges:null};t instanceof Array?b.returned.nodes=t:t&&(t.nodes&&(b.returned.nodes=t.nodes),t.edges&&(b.returned.edges=t.edges))}},{"../../../core/console/print.coffee":52}],242:[function(b,c,d){var g=b("../../../util/copy.coffee"),f=b("../../../form/form.js"),h=b("../../../core/console/print.coffee"),k=b("../../../object/validate.coffee");c.exports=function(b){var c=b.ui.value&&
b.ui.value.length,d=b.ui.position.value;b.dev.value&&c&&h.time("drawing custom UI elements");var t=b.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);t.enter().append("div").attr("id","d3plus_drawer");var u={};b.ui.position.accepted.forEach(function(c){u[c]=c==d?b.margin.bottom+"px":"auto"});t.style("text-align",b.ui.align.value).style("position","absolute").style("width",b.width.value-2*b.ui.padding+"px").style("height","auto").style(u);var n=t.selectAll("div.d3plus_drawer_ui").data(c?
b.ui.value:[],function(b){return b.method||!1});n.exit().remove();n.enter().append("div").attr("class","d3plus_drawer_ui").style("display","inline-block");n.style("padding",b.ui.padding+"px").each(function(c){c.form||(c.form=f().container(d3.select(this)).data({sort:!1}).id("id").text("text"));var d,h;"string"===typeof c.method&&c.method in b?(d=b[c.method].value,h=function(d){d!==b[c.method].value&&b.self[c.method](d).draw()}):(d=c.value[0],k(d)&&(d=d[d3.keys(d)[0]]),"function"===typeof c.method&&
(h=function(d){c.method(d,b.self)}));var m=[],n;c.label?n=c.label:"string"===typeof c.method&&c.method in b&&(n=b.format.locale.value.method[c.method]||c.method);c.value.forEach(function(c){var d={};k(c)?(d.id=c[d3.keys(c)[0]],d.text=b.format.value(d3.keys(c)[0])):(d.id=c,d.text=b.format.value(c));m.push(d)});var p=g(b.ui.font);p.align=g(b.font.align);p.secondary=g(p);c.form.data(m).font(p).focus(1<c.value.length?d:!1).focus({callback:h}).format(b.format.locale.language).format({number:b.format.number.value,
text:b.format.text.value}).title(b.format.value(n)).type(c.type||"auto").ui({align:b.ui.align.value,border:b.ui.border,color:{primary:b.ui.color.primary.value,secondary:b.ui.color.secondary.value},padding:b.ui.padding,margin:0}).width(c.width||!1).draw()});(t=t.node().offsetHeight||t.node().getBoundingClientRect().height)&&(b.margin[d]+=t);b.dev.value&&c&&h.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.coffee":52,"../../../form/form.js":103,"../../../object/validate.coffee":171,
"../../../util/copy.coffee":206}],243:[function(b,c,d){var g,f,h,k;g=b("../../../client/pointer.coffee");f=b("../../../color/lighter.coffee");h=b("../../../core/console/print.coffee");k=b("../../../client/css.coffee");c.exports=function(b){var c,d,t,u,n,q,r,w,v;if(!b.small&&0<b.history.states.length){if(b.dev.value&&h.time("drawing back button"),c=b.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]).style("position","relative").style("z-index",1900),q=b.title.sub.font.size,
d=b.title.sub.font.color,u=b.title.sub.font.family.value,v=b.title.sub.font.weight,t=b.title.sub.padding,r=!1,b.title.sub.value&&0>["start","left"].indexOf(b.title.sub.font.align)?r="sub":b.title.total.value&&0>["start","left"].indexOf(b.title.total.font.align)?r="total":b.title.value&&0>["start","left"].indexOf(b.title.font.align)&&(r="title"),r?(t=function(b){b=b.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];b=b.replace(/([^a-z])\s([^a-z])/gi,"$1,$2");b=b.split(",");b=b[b.length-1];return parseFloat(b.substring(0,
b.length-1))},r=b.svg.select(".d3plus_title."+r),w=t(r)+t(r.select("text"))):(w=b.margin.top-b.title.padding,b.margin.top+=q+2*t),t=parseFloat(b.container.value.style("padding-top"),10),w+=t,t=parseFloat(b.container.value.style("padding-left"),10),n=b.margin.left+q/2+t,t=function(b){return b.style("position","absolute").style("left",n+"px").style("top",w+"px").style("color",d).style("font-family",u).style("font-weight",v).style("font-size",q+"px")},c.enter().append("div").attr("id","d3plus_back_button").style("opacity",
0).call(t).html(function(){var c;k("font-awesome")&&0===b.icon.back.value.indexOf("fa-")?(c="<i class='fa "+b.icon.back.value,c+="' style='margin-top:2px;margin-right:4px;'></i>"):c=b.icon.back.value+" ";return c+b.format.value(b.format.locale.value.ui.back)}),c.on(g.over,function(){if(!b.small&&0<b.history.states.length)return d3.select(this).style("cursor","pointer").transition().duration(b.timing.mouseevents).style("color",f(d,.25))}).on(g.out,function(){if(!b.small&&0<b.history.states.length)return d3.select(this).style("cursor",
"auto").transition().duration(b.timing.mouseevents).style("color",d)}).on(g.click,function(){return b.history.back()}).transition().duration(b.draw.timing).style("opacity",1).call(t),b.dev.value)return h.timeEnd("drawing back button")}else return b.container.value.selectAll("div#d3plus_back_button").transition().duration(b.draw.timing).style("opacity",0).remove()}},{"../../../client/css.coffee":36,"../../../client/pointer.coffee":38,"../../../color/lighter.coffee":45,"../../../core/console/print.coffee":52}],
244:[function(b,c,d){var g=b("../../../array/sort.coffee"),f=b("../../../util/buckets.coffee"),h=b("../../../util/copy.coffee"),k=b("../tooltip/create.js"),l=b("../../../core/data/nest.js"),m=b("../../../util/dataURL.coffee"),p=b("../../../client/pointer.coffee"),t=b("../../../core/fetch/value.coffee"),u=b("../../../core/fetch/color.coffee"),n=b("../../../core/fetch/text.js"),q=b("../../../core/console/print.coffee"),r=b("../../../tooltip/remove.coffee"),w=b("../../../color/text.coffee"),v=b("../../../util/uniques.coffee"),
y=b("../../../client/scroll.js"),A=b("../../../string/strip.js"),x=b("../../../textwrap/textwrap.coffee");b("../../../client/touch.coffee");var z=b("../../../object/validate.coffee");c.exports=function(b){var c=!0,d=0;if(!b.error.internal&&b.color.value&&!b.small&&b.legend.value)if(b.color.valueScale)if(b.color.valueScale){b.dev.value&&q.time("drawing color scale");b.g.legend.selectAll("g.d3plus_color").transition().duration(b.draw.timing).attr("opacity",0).remove();var F=b.color.valueScale.domain(),
H=b.color.valueScale.range();2>=F.length&&(F=f(F,6));var I=b.g.legend.selectAll("g.d3plus_scale").data(["scale"]);I.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var G=I.selectAll("#d3plus_legend_heatmap").data(["heatmap"]);G.enter().append("linearGradient").attr("id","d3plus_legend_heatmap").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");G=G.selectAll("stop").data(d3.range(0,H.length));G.enter().append("stop").attr("stop-opacity",
1);G.attr("offset",function(b){return Math.round(b/(H.length-1)*100)+"%"}).attr("stop-color",function(b){return H[b]});G.exit().remove();G=I.selectAll("rect#gradient").data(["gradient"]);G.enter().append("rect").attr("id","gradient").attr("x",function(c){return"middle"==b.legend.align?b.width.value/2:"end"==b.legend.align?b.width.value:0}).attr("y",b.ui.padding).attr("width",0).attr("height",b.legend.gradient.height).attr("stroke",b.legend.font.color).attr("stroke-width",1).style("fill","url(#d3plus_legend_heatmap)");
var M=I.selectAll("text.d3plus_tick").data(d3.range(0,F.length));M.enter().append("text").attr("class","d3plus_tick").attr("stroke","none").attr("x",function(c){return"middle"==b.legend.align?b.width.value/2:"end"==b.legend.align?b.width.value:0}).attr("y",function(c){return this.getBBox().height+b.legend.gradient.height+2*b.ui.padding});var J=0;M.order().attr("font-weight",b.legend.font.weight).attr("font-family",b.legend.font.family.value).attr("font-size",b.legend.font.size+"px").style("text-anchor",
b.legend.font.align).attr("fill",b.legend.font.color).text(function(c){return b.format.value(F[c],{key:b.color.value,vars:b})}).attr("y",function(c){return this.getBBox().height+b.legend.gradient.height+2*b.ui.padding}).each(function(b){b=this.offsetWidth;b>J&&(J=b)});J+=2*b.labels.padding;U=J*(F.length-1);U+J<b.width.value?(U+J<b.width.value/2&&(U=b.width.value/2,J=U/F.length,U-=J),W="start"==b.legend.align?b.ui.padding:"end"==b.legend.align?b.width.value-b.ui.padding-U:b.width.value/2-U/2,M.transition().duration(b.draw.timing).attr("x",
function(b){return W+J*b}),M.exit().transition().duration(b.draw.timing).attr("opacity",0).remove(),M=I.selectAll("rect.d3plus_tick").data(d3.range(0,F.length)),M.enter().append("rect").attr("class","d3plus_tick").attr("x",function(c){return"middle"==b.legend.align?b.width.value/2:"end"==b.legend.align?b.width.value:0}).attr("y",b.ui.padding).attr("width",0).attr("height",b.ui.padding+b.legend.gradient.height).attr("fill",b.legend.font.color),M.transition().duration(b.draw.timing).attr("x",function(b){return W+
J*b-(0===b?1:0)}).attr("y",b.ui.padding).attr("width",1).attr("height",b.ui.padding+b.legend.gradient.height).attr("fill",b.legend.font.color),M.exit().transition().duration(b.draw.timing).attr("width",0).remove(),G.transition().duration(b.draw.timing).attr("x",function(c){return"middle"==b.legend.align?b.width.value/2-U/2:"end"==b.legend.align?b.width.value-U-b.ui.padding:b.ui.padding}).attr("y",b.ui.padding).attr("width",U).attr("height",b.legend.gradient.height),I.transition().duration(b.draw.timing).attr("opacity",
1),b.dev.value&&q.timeEnd("drawing color scale")):c=!1}else c=!1;else{b.dev.value&&q.time("grouping data by colors");var K;if(b.nodes.value&&0<=b.types[b.type.value].requirements.indexOf("nodes")){if(K=h(b.nodes.restriced||b.nodes.value),b.data.viz.length)for(var L=0;L<K.length;L++)I=b.data.viz.filter(function(c){return c[b.id.value]===K[L][b.id.value]}),I.length&&(K[L]=I[0])}else K=b.data.viz;K.length&&"key"in K[0]&&"values"in K[0]&&(K=d3.merge(K.map(function(b){return b.values})));var I=function(c){return u(b,
c,N)},N=0,Q=b.id.value,G=b.id.nesting.indexOf(b.color.value);if(0<=G)N=G,Q=b.id.nesting[G];else for(G=0;G<=b.depth.value;G++){var N=G,Q=b.id.nesting[G],M=v(K,function(c){return t(b,c,Q)}),S=v(K,I);if(M.length>=S.length&&1<S.length)break}var H=l(b,K,[b.color.value],!1);b.dev.value&&q.timeEnd("grouping data by color");var M=b.width.value,d=b.legend.size,U=d*H.length+b.ui.padding*(H.length+1);if(d instanceof Array){b.dev.value&&q.time("calculating legend size");for(L=d[1];L>=d[0];L--)if(U=L*H.length+
b.ui.padding*(H.length+1),M>=U){d=L;break}b.dev.value&&q.timeEnd("calculating legend size")}else"number"!=typeof d&&!1!==d&&(d=30);if(M<U||1==H.length)c=!1;else{I=function(c){c.attr("width",d).attr("height",d).attr("fill",function(c){d3.select(this.parentNode).select("text").remove();var f=v(c,b.icon.value,t,b,Q),g=u(b,c,Q);if(b.legend.icons.value&&1===f.length&&"string"===typeof f[0]){f=f[0];c=A(f+"_"+g);var h=b.icon.style.value,k=b.defs.selectAll("pattern#"+c).data([c]),g="knockout"==("string"===
typeof h?b.icon.style.value:z(h)&&h[Q]?h[Q]:"default")?g:"none";k.select("rect").transition().duration(b.draw.timing).attr("fill",g).attr("width",d).attr("height",d);k.select("image").transition().duration(b.draw.timing).attr("width",d).attr("height",d);h=k.enter().append("pattern").attr("id",c).attr("width",d).attr("height",d);h.append("rect").attr("fill",g).attr("width",d).attr("height",d);h.append("image").attr("xlink:href",f).attr("width",d).attr("height",d).each(function(b){0===f.indexOf("/")||
0<=f.indexOf(window.location.hostname)?m(f,function(b){k.select("image").attr("xlink:href",b)}):k.select("image").attr("xlink:href",f)});return"url(#"+c+")"}if(b.legend.labels.value){var l;l=b.legend.text.value?[t(b,c,b.legend.text.value,N)]:n(b,c,N);if(1===l.length&&!(l[0]instanceof Array)&&l[0].length){c=d3.select(this.parentNode).append("text");var p=b.legend.font.size;p instanceof Array||(p=[p]);c.attr("font-size",p[p.length-1]+"px").attr("font-weight",b.legend.font.weight).attr("font-family",
b.legend.font.family.value).attr("stroke","none").attr("fill",w(g)).attr("x",0).attr("y",0).each(function(c){x().align("middle").container(d3.select(this)).height(d).padding(b.ui.padding).resize(1<p.length).size(p).text(l[0]).width(d).valign("middle").draw()});c.select("tspan").empty()&&c.remove()}}return g})};G=function(c){c.attr("transform",function(c,f){return"translate("+(W+f*(b.ui.padding+d))+","+b.ui.padding+")"})};U-=2*b.ui.padding;b.dev.value&&q.time("sorting legend");var S=b[b.legend.order.value].value,
V=b.color.value;S?"color"!==b.legend.order.value&&(V=[]):S=b[b.color.value].value;g(H,S,b.legend.order.sort.value,V,b,N);b.dev.value&&q.timeEnd("sorting legend");b.dev.value&&q.time("drawing legend");var W;W="start"==b.legend.align?b.ui.padding:"end"==b.legend.align?M-b.ui.padding-U:M/2-U/2;b.g.legend.selectAll("g.d3plus_scale").transition().duration(b.draw.timing).attr("opacity",0).remove();var X={},M=b.g.legend.selectAll("g.d3plus_color").data(H,function(c){c=u(b,c,Q);c in X||(X[c]=-1);X[c]++;return X[c]+
"_"+c});M.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(G).append("rect").attr("class","d3plus_color").call(I);M.order().transition().duration(b.draw.timing).call(G).attr("opacity",1).selectAll("rect.d3plus_color").call(I);M.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();if(b.legend.tooltip.value)M.on(p.over,function(c,f){d3.select(this).style("cursor","pointer");var g=this.getBoundingClientRect(),h=g.left+d/2+y.x(),g=g.top+d/2+y.y()+5,l=t(b,c,Q),
m=b.id.nesting.indexOf(Q),m=0<=m?n(b,c,m)[0]:b.format.value(t(b,c,b.color.value,Q),{key:b.color.value,vars:b,data:c}),q,r;!b.legend.filters.value||l instanceof Array||(r=b.format.locale.value,q="<div style='text-align:center;'>"+("<div class='mute'>"+b.format.value(r.method.mute)+"</div>"),q+="<div class='solo'>"+b.format.value(r.method.solo)+"</div>",q+="</div>",r=function(c){var d={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};c.select(".mute").style(d).on(p.over,
function(){d3.select(this).style("cursor","pointer")}).on(p.click,function(){var c=b.id.mute.value;b.history.states.push(function(){b.self.id({mute:c}).draw()});b.self.id({mute:l}).draw()});c.select(".solo").style(d).on(p.over,function(){d3.select(this).style("cursor","pointer")}).on(p.click,function(){var c=b.id.solo.value;b.history.states.push(function(){b.self.id({solo:c}).draw()});b.self.id({solo:l}).draw()})});k({data:c,html:q,js:r,depth:N,footer:!1,vars:b,x:h,y:g,mouseevents:this,title:m,offset:.4*
d})}).on(p.out,function(c){r(b.type.value)});b.dev.value&&q.timeEnd("drawing legend")}}else c=!1;b.legend.value&&key&&c?(b.dev.value&&q.time("positioning legend"),d?c=d+b.ui.padding:(c=b.g.legend.node().getBBox(),c=c.height+c.y),0===b.margin.bottom&&(b.margin.bottom+=b.ui.padding),b.margin.bottom+=c,b.g.legend.transition().duration(b.draw.timing).attr("transform","translate(0,"+(b.height.value-b.margin.bottom)+")"),b.dev.value&&q.timeEnd("positioning legend")):(b.dev.value&&q.time("hiding legend"),
b.g.legend.transition().duration(b.draw.timing).attr("transform","translate(0,"+b.height.value+")"),b.dev.value&&q.timeEnd("hiding legend"))}},{"../../../array/sort.coffee":34,"../../../client/pointer.coffee":38,"../../../client/scroll.js":41,"../../../client/touch.coffee":43,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/data/nest.js":60,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/validate.coffee":171,
"../../../string/strip.js":174,"../../../textwrap/textwrap.coffee":199,"../../../tooltip/remove.coffee":202,"../../../util/buckets.coffee":203,"../../../util/copy.coffee":206,"../../../util/dataURL.coffee":208,"../../../util/uniques.coffee":209,"../tooltip/create.js":239}],245:[function(b,c,d){var g=b("../../../client/pointer.coffee"),f=b("../../../color/text.coffee");c.exports=function(b,c){c=b.messages.value?c:null;var d=b.messages.style.value||(c===b.error.internal?"large":b.messages.style.backup);
if("large"===d)var m=b.messages,p="center";else m=b.footer.value?b.footer:b.title.value?b.title:b.title.sub.value?b.title.sub:b.title.total.value?b.title.total:b.title.sub,p=m.position;var m={color:m.font.color,"font-family":m.font.family.value,"font-weight":m.font.weight,"font-size":m.font.size+"px",padding:m.padding+"px"},t=b.messages.background.value;t||(t=b.background.value,"none"!==t&&"transparent"!==t)||(t=f(m.color));b.g.message=b.container.value.selectAll("div#d3plus_message").data(["message"]);
b.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0).append("div").attr("class","d3plus_message_text").style("display","block");b.g.message.select(".d3plus_message_text").text(c?c:b.g.message.text());var u=navigator.onLine,n=b.g.message.selectAll(".d3plus_message_branding").data(b.messages.branding.value&&"center"===p?[0]:[]);n.enter().append("div").attr("class","d3plus_message_branding").style("margin-top","15px").style("padding-top","0px").style("display","block").style("font-size",
"11px").style("background-size","75px").style("background-position","center 10px").style("background-repeat","no-repeat").style("cursor","pointer").on(g.click,function(){window.open("http://www.d3plus.org/","_blank")});var q=.5>d3.hsl(t).l?b.messages.branding.image.dark:b.messages.branding.image.light;n.text(u?"Powered by:":"Powered by D3plus").style("background-color",u?t:"transparent").style("background-image",u?"url('"+q+"')":"none").style("min-width",u?"75px":"auto").style("height",u?"75px":"auto");
n.exit().remove();b.g.message.style("display",c?"inline-block":"none").call(function(c){c.style(m).style("position","absolute").style("background-color",t).style("text-align","center").style("left",function(){return"center"==p?"50%":"0px"}).style("width",function(){return"center"==p?"auto":b.width.value+"px"}).style("margin-left",function(){return"center"==p?-(this.offsetWidth/2)+"px":"0px"}).style("top",function(){return"center"==p?"50%":"top"==p?"0px":"auto"}).style("bottom",function(){return"bottom"==
p?"0px":"auto"}).style("margin-top",function(){return"large"==d?-(this.offsetHeight||this.getBoundingClientRect().height)/2+"px":"0px"})}).style("opacity",c?1:0)}},{"../../../client/pointer.coffee":38,"../../../color/text.coffee":50}],246:[function(b,c,d){var g,f,h,k,l,m,p,t,u;g=b("../../../util/closest.coffee");f=b("../../../client/css.coffee");b("../../../font/sizes.coffee");h=b("../../../client/pointer.coffee");k=b("../../../color/mix.coffee");m=b("../../../client/prefix.coffee");p=b("../../../core/console/print.coffee");
t=b("../../../color/text.coffee");u=b("../../../core/data/time.coffee");l=!1;c.exports=function(b){var c,d,w,v,y,A,x,z,C,D,B,F,H,I,G,M,J,K,L,N,Q,S,U,V,W,X,ea,da,R,Y,Z,ca,ba;if(!(!b.timeline.value||b.error.internal&&b.data.missing||b.small)&&b.data.time&&1<b.data.time.values.length){b.dev.value&&p.time("drawing timeline");Q={"font-weight":b.ui.font.weight,"font-family":b.ui.font.family.value,"font-size":b.ui.font.size+"px","text-anchor":"middle"};ba=b.data.time.ticks.map(function(b){return new Date(b)});
C=u(b,{values:ba,style:Q});da=C.values.map(Number);W=C.format;if(b.time.solo.value.length)for(y=d3.extent(b.time.solo.value),x=d=0,c=y.length;d<c;x=++d)A=y[x],A.constructor!==Date&&(A+="",4===A.length&&parseInt(A)+""===A&&(A+="/01/01"),A=new Date(A),y[x]=A);else y=d3.extent(ba);ca=ba.slice();Y=d3.max(C.sizes.map(function(b){return b.height}));z=~~d3.max(C.sizes.map(function(b){return b.width}))+1;z+=2*b.ui.padding;X=b.timeline.height.value||Y+2*b.ui.padding;A=z*ba.length;d=X-2*b.ui.padding>=Y;c=b.width.value-
2*b.ui.padding;d&&b.timeline.play.value&&(c-=X+b.ui.padding);if(!d||da.length<ba.length||c<z*da.length){C=z;z=(c-z)/ba.length;A=z*ba.length;ea=1;for(U=~~(C/(A/da.length))+1;U<da.length-1&&0!==(da.length-1)%U;)U++;da=da.filter(function(b,c){return 0===c%U})}else ea=0,c=new Date(ba[0]),C=b.data.time.stepType,c["set"+C](c["get"+C]()+ba.length),ca.push(c);c=new Date(y[0]);c=g(ca,c);y=new Date(y[1]);if(!ea)y["set"+b.data.time.stepType](y["get"+b.data.time.stepType]()+1);y=g(ca,y);Z=ca.map(Number);B=Z.indexOf(+c);
D=Z.indexOf(+y);v=[c,y];J="start"===b.timeline.align?b.ui.padding:"end"===b.timeline.align?b.width.value-b.ui.padding-A:b.width.value/2-A/2;d&&b.timeline.play.value&&(J+=(X+b.ui.padding)/2);K=function(){clearInterval(l);l=!1;return H.call(I,"icon")};y=function(){var b,c;if(null!==d3.event.sourceEvent){l&&K();v=w.extent();c=g(ca,v[0]);b=g(ca,v[1]);c===b&&(B=Z.indexOf(+c),c<v[0]||0===B?b=ca[B+1]:c=ca[B-1]);B=Z.indexOf(+c);D=Z.indexOf(+b);if(1<=D-B)b=[c,b];else if(B+1<=ba.length)b=[c,ca[B+1]];else{b=
[c];for(x=1;1>=x;)B+x<=ba.length?b.push(ca[B+x]):b.unshift(ca[B-(B+x-ba.length)]),x++;b=[b[0],b[b.length-1]]}v=b;L.attr("fill",N);return d3.select(this).call(w.extent(b))}};M=function(){var c;D-B===ba.length-ea?c=[]:(c=Z.filter(function(b,c){return c>=B&&c<D+ea}),c=c.map(function(b){return new Date(b)}));G();return b.self.time({solo:c}).draw()};c=function(){var c,d;if(null!==d3.event.sourceEvent&&(b.time.solo.value.length?(d=d3.extent(b.time.solo.value),c=Z.indexOf(+g(ca,d[0])),d=Z.indexOf(+g(ca,
d[1])),c=c!==B||d!==D):c=D-B!==ba.length-ea,c))return M()};F=b.g.timeline.selectAll("rect.d3plus_timeline_play").data(d&&b.timeline.play.value?[0]:[]);C=function(c){return c.attr("width",X+1).attr("height",X+1).attr("fill",b.ui.color.primary.value).attr("stroke",b.ui.color.primary.value).attr("stroke-width",1).attr("x",J-X-1-b.ui.padding).attr("y",b.ui.padding)};F.enter().append("rect").attr("class","d3plus_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(C);F.transition().duration(b.draw.timing).call(C);
F.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();H=b.g.timeline.selectAll("text.d3plus_timeline_playIcon").data(d&&b.timeline.play.value?[0]:[]);I=function(c,d){var g;d=b.timeline.play[d];f("font-awesome")?(d=d.awesome,g="FontAwesome"):(d=d.fallback,g="inherit");return c.style("font-family",g).text(d)};d=function(c){var d;d=X/2+b.ui.padding+1;return c.attr("fill",t(b.ui.color.primary.value)).attr("stroke","none").attr(Q).attr("x",J-(X-1)/2-b.ui.padding).attr("y",d).attr("dy",
"0.5ex").call(I,l?"pause":"icon")};H.enter().append("text").attr("class","d3plus_timeline_playIcon").call(d).style("pointer-events","none").attr("opacity",0);H.call(d).transition().duration(b.draw.timing).attr("opacity",1);H.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();G=function(){if(D-B===ba.length-ea)return F.on(h.hover,null).on(h.click,null).transition().duration(b.draw.timing).attr("opacity",.3),H.transition().duration(b.draw.timing).attr("opacity",.3);F.on(h.over,function(){return d3.select(this).style("cursor",
"pointer")}).on(h.out,function(){return d3.select(this).style("cursor","auto")}).on(h.click,function(){if(l)return K();H.call(I,"pause");D===ba.length?(D-=B,B=0):(B++,D++);M();return l=setInterval(function(){if(D===ba.length-ea)return K();B++;D++;return M()},b.timeline.play.timing.value)}).transition().duration(b.draw.timing).attr("opacity",1);return H.transition().duration(b.draw.timing).attr("opacity",1)};G();N=function(c){var d;d=ea?c<=v[1]:c<v[1];c>=v[0]&&d?(d=1,c=t(b.ui.color.secondary.value)):
(d=.5,c=t(b.ui.color.primary.value));ea&&b.background.value&&"none"!==b.background.value&&(c=d3.rgb(t(b.background.value)));c=d3.rgb(c);return"rgba("+c.r+","+c.g+","+c.b+","+d+")"};d=b.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]);d.enter().append("rect").attr("class","d3plus_timeline_background").attr("shape-rendering","crispEdges").attr("width",A+2).attr("height",X+2).attr("fill",b.ui.color.primary.value).attr("x",J-1).attr("y",b.ui.padding);d.transition().duration(b.draw.timing).attr("width",
A+2).attr("height",X+2).attr("fill",b.ui.color.primary.value).attr("x",J-1).attr("y",b.ui.padding);V=b.g.timeline.selectAll("g#ticks").data(["ticks"]);V.enter().append("g").attr("id","ticks").attr("transform","translate("+b.width.value/2+","+b.ui.padding+")");d=b.g.timeline.selectAll("g#brush").data(["brush"]);d.enter().append("g").attr("id","brush");C=b.g.timeline.selectAll("g#labels").data(["labels"]);C.enter().append("g").attr("id","labels");L=C.selectAll("text").data(ba,function(b,c){return c});
L.enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0);R=d3.time.scale().domain(d3.extent(ca)).rangeRound([0,A]);L.order().attr(Q).text(function(b,c){return 0<=da.indexOf(+b)?W(b):""}).attr("opacity",function(c,d){return 0<=b.data.time.dataSteps.indexOf(d)?1:.4}).attr("fill",N).attr("transform",function(c,d){var f,g;f=J+R(c);ea||(f+=z/2);g=X/2+b.ui.padding+1;ea&&(g+=X/2+Y);return"translate("+Math.round(f)+","+Math.round(g)+")"});L.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove();w=d3.svg.brush().x(R).extent(v).on("brush",y).on("brushend",c);S=b.axes.discrete&&b[b.axes.discrete].value===b.time.value?b[b.axes.discrete].ticks.color:b.x.ticks.color;V.attr("transform","translate("+J+","+(b.ui.padding+1)+")").transition().duration(b.draw.timing).call(d3.svg.axis().scale(R).orient("top").ticks(function(){return ca}).tickFormat("").tickSize(-X).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(c){return 0<=
da.indexOf(+c)?S:k(S,b.background.value,.4,1)});V.selectAll("path").attr("fill","none");d.attr("transform","translate("+J+","+(b.ui.padding+1)+")").attr("opacity",1).call(w);L.attr("pointer-events","none");d.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",X).attr("shape-rendering","crispEdges").on(h.move,function(){var c;c=b.timeline.hover.value;0<=["grab","grabbing"].indexOf(c)&&(c=m()+c);return d3.select(this).style("cursor",c)});d.selectAll("rect.extent").attr("opacity",
.75).attr("height",X).attr("fill",b.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(h.move,function(){var c;c=b.timeline.hover.value;0<=["grab","grabbing"].indexOf(c)&&(c=m()+c);return d3.select(this).style("cursor",c)});b.timeline.handles.value?(A=d.selectAll("g.resize").selectAll("rect.d3plus_handle").data(["d3plus_handle"]),A.enter().insert("rect","rect").attr("class","d3plus_handle"),A.attr("fill",b.timeline.handles.color).attr("transform",function(c){return"translate("+("resize e"===
this.parentNode.className.baseVal?-b.timeline.handles.size:0)+",0)"}).attr("width",b.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",b.timeline.handles.opacity),d.selectAll("g.resize").selectAll("rect").attr("height",X)):d.selectAll("g.resize").remove();A=b.g.timeline.node().getBBox();0===b.margin.bottom&&(b.margin.bottom+=b.ui.padding);b.margin.bottom+=A.height+A.y;b.g.timeline.transition().duration(b.draw.timing).attr("transform","translate(0,"+
Math.round(b.height.value-b.margin.bottom-b.ui.padding/2)+")");b.margin.bottom+=b.ui.padding;if(b.dev.value)return p.time("drawing timeline")}else return b.g.timeline.transition().duration(b.draw.timing).attr("transform","translate(0,"+b.height.value+")")}},{"../../../client/css.coffee":36,"../../../client/pointer.coffee":38,"../../../client/prefix.coffee":39,"../../../color/mix.coffee":46,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/data/time.coffee":62,
"../../../font/sizes.coffee":101,"../../../util/closest.coffee":205}],247:[function(b,c,d){var g=b("../../../client/pointer.coffee"),f=b("../../../core/fetch/value.coffee"),h=b("../../../core/console/print.coffee"),k=b("../../../client/rtl.coffee"),l=b("../../../textwrap/textwrap.coffee");c.exports=function(b){function c(d){d.attr("font-size",function(b){return b.style.font.size}).attr("fill",function(c){return c.link?b.links.font.color:c.style.font.color}).attr("font-family",function(c){return c.link?
b.links.font.family.value:c.style.font.family.value}).attr("font-weight",function(c){return c.link?b.links.font.weight:c.style.font.weight}).style("text-decoration",function(c){return c.link?b.links.font.decoration.value:c.style.font.decoration.value}).style("text-transform",function(c){return c.link?b.links.font.transform.value:c.style.font.transform.value})}function d(b){b=b.style.font.align;return"center"==b?"middle":"left"==b&&!k||"right"==b&&k?"start":"left"==b&&k||"right"==b&&!k?"end":b}var u=
b.size.value?b.size.value:"number"===b.color.type?b.color.value:!1;if(b.data.viz&&b.title.total.value&&!b.small)if(u){b.dev.value&&h.time("calculating total value");var n=b.data.pool;b.focus.value.length&&(n=b.data.viz.filter(function(c){return c[b.id.value]==b.focus.value[0]}));var q=b.aggs.value[u]||"sum";q.constructor===Function?n=q(n):(n=n.reduce(function(c,d){var g=f(b,d,u);g instanceof Array?c=c.concat(g):c.push(g);return c},[]),n=d3[q](n));if(0===n||null===n||void 0===n)n=!1;if("number"===
typeof n){q="";if(b.data.mute.length||b.data.solo.length||b.focus.value.length){var r=d3.sum(b.data.value,function(c){if(0<b.time.solo.value.length?0<=b.time.solo.value.indexOf(f(b,c,b.time.value)):0<b.time.mute.value.length?0>b.time.solo.value.indexOf(f(b,c,b.time.value)):1)return f(b,c,u)});r>n&&(q=n/r*100,r=b.format.value(r,{key:b.size.value,vars:b}),q=" ("+b.format.value(q,{key:"share",vars:b})+" of "+r+")")}n=b.format.value(n,{key:b.size.value,vars:b});r=b.title.total.value;n=(r.prefix||b.format.value(b.format.locale.value.ui.total)+
": ")+n;r.suffix?n+=r.suffix:null;n+=q}b.dev.value&&h.timeEnd("calculating total value")}else n=!1;else n=!1;q=[];b.footer.value&&q.push({link:b.footer.link,style:b.footer,type:"footer",value:b.footer.value});b.small||(b.title.value&&(r=b.title.value,"function"===typeof r&&(r=r(b.self)),q.push({link:b.title.link,style:b.title,type:"title",value:r})),b.title.sub.value&&(r=b.title.sub.value,"function"===typeof r&&(r=r(b.self)),q.push({link:b.title.sub.link,style:b.title.sub,type:"sub",value:r})),b.title.total.value&&
n&&q.push({link:b.title.total.link,style:b.title.total,type:"total",value:n}));b.dev.value&&h.time("drawing titles");var n=b.svg.selectAll("g.d3plus_title").data(q,function(b){return b.type}),w=b.title.width||b.width.value-b.margin.left-b.margin.right;n.enter().append("g").attr("class",function(b){return"d3plus_title "+b.type}).attr("opacity",0).append("text").attr("stroke","none").call(c);n.each(function(f){var g=d3.select(this).select("text").call(c),h=d(f);l().align(h).container(g).height(b.height.value/
8).size(!1).text(f.value).width(w).draw();f.y=b.margin[f.style.position];b.margin[f.style.position]+=this.getBBox().height+2*f.style.padding}).on(g.over,function(c){c.link&&d3.select(this).transition().duration(b.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",b.links.hover.color).attr("font-family",b.links.hover.family.value).attr("font-weight",b.links.hover.weight).style("text-decoration",b.links.hover.decoration.value).style("text-transform",b.links.hover.transform.value)}).on(g.out,
function(d){d.link&&d3.select(this).transition().duration(b.timing.mouseevents).style("cursor","auto").select("text").call(c)}).on(g.click,function(b){if(b.link){var c="/"!=b.link.charAt(0)?"_blank":"_self";window.open(b.link,c)}}).attr("opacity",1).attr("transform",function(c){var f=c.style.position,g="top"==f?0+c.y:b.height.value-c.y,g="bottom"==f?g-(this.getBBox().height+c.style.padding):g+c.style.padding;c=d(c);"start"===c?c=b.margin.left+b.title.padding:(d3.select(this).select("text").node().getBBox(),
c="middle"===c?b.width.value/2-w/2:b.width.value-w-b.margin.right-b.title.padding);return"translate("+c+","+g+")"});n.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();0<b.margin.top&&(b.margin.top+=b.title.padding);0<b.margin.bottom&&(b.margin.bottom+=b.title.padding);(n=b.title.height)&&b.margin[b.title.position]<n&&(b.margin[b.title.position]=n);b.dev.value&&h.timeEnd("drawing titles")}},{"../../../client/pointer.coffee":38,"../../../client/rtl.coffee":40,"../../../core/console/print.coffee":52,
"../../../core/fetch/value.coffee":67,"../../../textwrap/textwrap.coffee":199}],248:[function(b,c,d){var g,f;g=b("./labels.coffee");f=b("./transform.coffee");c.exports=function(b,c,d){var m,p,t;c||(c=b.zoom.bounds);"number"!==typeof d&&(d=b.timing.transitions);b.zoom.size={height:c[1][1]-c[0][1],width:c[1][0]-c[0][0]};t=b.types[b.type.value];m=b.coords.fit.value;m="auto"===m||0>t.requirements.indexOf("coords")?d3.max([b.zoom.size.width/b.width.viz,b.zoom.size.height/b.height.viz]):b.zoom.size[m]/
b["app_"+m];p=d3.min([b.width.viz,b.height.viz]);t=(p-(t.zoom?2*b.coords.padding:0))/p/m;m=b.zoom.behavior.scaleExtent();m[0]!==m[1]&&c!==b.zoom.bounds||b.zoom.behavior.scaleExtent([t,16*t]);m=b.zoom.behavior.scaleExtent()[1];t>m&&(t=m);b.zoom.scale=t;c=[b.width.viz/2-b.zoom.size.width*t/2-c[0][0]*t,b.height.viz/2-b.zoom.size.height*t/2-c[0][1]*t];b.zoom.translate=c;b.zoom.behavior.translate(c).scale(t);b.zoom.size={height:b.zoom.bounds[1][1]-b.zoom.bounds[0][1],width:b.zoom.bounds[1][0]-b.zoom.bounds[0][0]};
b.zoom.reset=!1;(b.labels.value||b.labels.changed)&&g(b);return f(b,d)}},{"./labels.coffee":250,"./transform.coffee":253}],249:[function(b,c,d){c.exports=function(b,c){var d,k,l;k=c.id.nesting.length-1;d=c.depth.value;l=c.id.nesting[d+1];return!1===c.types[c.type.value].nesting?0:(b.d3plus.merged||l in b&&d<k)&&(!b||l in b)?1:!(d===k&&0<d||b&&l&&!(l in b))||!c.small&&c.tooltip.html.value?0:-1}},{}],250:[function(b,c,d){var g;g=b("../../../core/console/print.coffee");c.exports=function(b){var c,d;
b.dev.value&&g.time("determining label visibility");d=b.zoom.behavior.scaleExtent();c=function(c){return c.attr("opacity",function(c){var g;c||(c={});g=parseFloat(d3.select(this).attr("font-size"),10);c.visible=2<=b.zoom.scale/d[1]*g;return c.visible?1:0})};b.draw.timing?b.g.viz.selectAll("text.d3plus_label").transition().duration(b.draw.timing).call(c):b.g.viz.selectAll("text.d3plus_label").call(c);if(b.dev.value)return g.timeEnd("determining label visibility")}},{"../../../core/console/print.coffee":52}],
251:[function(b,c,d){var g,f,h;g=b("./labels.coffee");f=b("../../../tooltip/remove.coffee");h=b("./transform.coffee");c.exports=function(b){var c,d,p,t,u,n,q,r;d=d3.event.sourceEvent?d3.event.sourceEvent.type:null;t=d3.event.translate;p=d3.event.scale;c=b.zoom.bounds;u=(b.width.viz-b.zoom.size.width*p)/2;n=0<u?u:0;u=0<u?b.width.viz-u:b.width.viz;q=(b.height.viz-b.zoom.size.height*p)/2;r=0<q?q:0;q=0<q?b.height.viz-q:b.height.viz;t[0]+c[0][0]*p>n?t[0]=-c[0][0]*p+n:t[0]+c[1][0]*p<u&&(t[0]=u-c[1][0]*
p);t[1]+c[0][1]*p>r?t[1]=-c[0][1]*p+r:t[1]+c[1][1]*p<q&&(t[1]=q-c[1][1]*p);b.zoom.behavior.translate(t).scale(p);b.zoom.translate=t;b.zoom.scale=p;"wheel"===d&&f(b.type.value);if(b.labels.value||b.labels.changed)"wheel"===d?(c=b.draw.timing?100:250,clearTimeout(b.zoom.wheel),b.zoom.wheel=setTimeout(function(){return g(b)},c)):g(b);return"dblclick"===d?h(b,b.timing.transitions):h(b,0)}},{"../../../tooltip/remove.coffee":202,"./labels.coffee":250,"./transform.coffee":253}],252:[function(b,c,d){c.exports=
function(b,c){var d,k;d=b.zoom;c||(c=d3.event);k=d.scale>d.behavior.scaleExtent()[0];d=b.types[b.type.value].zoom&&d.value&&d.scroll.value;c.touches&&1<c.touches.length&&d||k||c.stopPropagation()}},{}],253:[function(b,c,d){c.exports=function(b,c){var d;"number"!==typeof c&&(c=b.timing.transitions);d="translate("+b.zoom.translate+")";d+="scale("+b.zoom.scale+")";return c?b.g.viz.transition().duration(c).attr("transform",d):b.g.viz.attr("transform",d)}},{}],254:[function(b,c,d){b=b("../../core/methods/filter.coffee");
c.exports={accepted:[!1,Function,Object,String],deprecates:"active_var",mute:b(!0),solo:b(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],255:[function(b,c,d){c.exports={accepted:[Object],deprecated:"nesting_aggs",objectAccess:!1,value:{}}},{}],256:[function(b,c,d){b=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml",
"html","csv","dsv","tsv","txt"],value:!1},keys:{},process:b,value:!1}},{"../../core/methods/process/data.coffee":86}],257:[function(b,c,d){b=b("../../core/methods/rendering.coffee");c.exports={background:{color:"#fafafa",rendering:b(),stroke:{color:"#ccc",width:1}},mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1},ticks:{accepted:[Boolean],value:!0}}},{"../../core/methods/rendering.coffee":91}],258:[function(b,c,d){c.exports={accepted:[String],value:"#ffffff"}},{}],259:[function(b,
c,d){c.exports={accepted:[Function,String],value:!1}},{}],260:[function(b,c,d){var g;d=b("../../core/methods/filter.coffee");g=b("../../color/scale.coffee");c.exports={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",focus:"#444444",heatmap:"#282F6B #419391 #AFD5E8 #EACE3F #B35C1E #B22200".split(" "),missing:"#eeeeee",mute:d(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3plus","category10","category20","category20b","category20c"],process:function(b){return b instanceof
Array?d3.scale.ordinal().range(b):"d3plus"===b?g:"string"===typeof b?d3.scale[b]():b},value:"d3plus"},solo:d(!0),secondary:"#e5b3bb",value:!1}},{"../../color/scale.coffee":48,"../../core/methods/filter.coffee":80}],261:[function(b,c,d){c.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(b,c){"string"===typeof b&&(b=[b]);return b},value:!1}},{}],262:[function(b,c,d){arguments[4][107][0].apply(d,arguments)},{dup:107}],263:[function(b,c,d){var g;g=b("../../util/d3selection.coffee");
c.exports={accepted:[!1,Array,Object,String],id:"default",process:function(b,c){if(!1===b)return!1;"default"===c.container.id&&c.self.container({id:"d3plus_"+ +new Date});return g(b)?b.append("div"):b instanceof Array?d3.select(b[0][0]).append("div"):d3.select(b).append("div")},value:!1}},{"../../util/d3selection.coffee":207}],264:[function(b,c,d){d=b("../../core/methods/filter.coffee");b=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],
filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:d(!1),padding:20,process:b,projection:{accepted:["albers","albersUsa","azimuthalEqualArea","azimuthalEquidistant","conicConformal","conicEqualArea","conicEquidistant","equirectangular","gnomonic","mercator","orthographic","stereographic","transverseMercator",Function],value:"mercator"},simplify:{accepted:[Boolean],value:!0},solo:d(!1),threshold:{accepted:[Number],value:.9},value:!1}},{"../../core/methods/filter.coffee":80,
"../../core/methods/process/data.coffee":86}],265:[function(b,c,d){var g,f,h;g=b("../../core/fetch/value.coffee");f=b("../../client/ie.js");h=b("../../string/strip.js");c.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(b,c){var d,p,t,u,n,q,r,w,v,y,A,x,z,C;if(void 0===c.returned)return[];b=b||c.cols.value;b instanceof Array?t=b:"string"===typeof b&&(t=[b]);u=[];n=[];c.title.value?(C=c.title.value,"function"===typeof C&&(C=C(c.self)),C=h(C),C=C.substr(0,250)):C="D3plus Visualization Data";
if(!0===b)for(t=d3.keys(c.data.keys),u.push(t),A=c.data.value,r=0,v=A.length;r<v;r++){n=A[r];d=[];w=0;for(y=t.length;w<y;w++)p=t[w],q=n[p],"string"===c.data.keys[p]&&(q='"'+q+'"'),d.push(q);u.push(d)}else{t||(t=[c.id.value],c.time.value&&t.push(c.time.value),c.size.value&&t.push(c.size.value),c.text.value&&t.push(c.text.value));d=0;for(q=t.length;d<q;d++)p=t[d],n.push(c.format.value(p));u.push(n);w=c.returned.nodes;r=0;for(n=w.length;r<n;r++)if(v=w[r],null!=v.values&&v.values instanceof Array)for(z=
v.values,A=0,v=z.length;A<v;A++){q=z[A];d=[];x=0;for(y=t.length;x<y;x++)p=t[x],q=g(c,q,p),"string"===typeof q&&(q='"'+q+'"'),d.push(q);u.push(d)}else{d=[];y=0;for(q=t.length;y<q;y++)p=t[y],d.push(g(c,v,p));u.push(d)}}d="data:text/csv;charset=utf-8,";q=r=0;for(n=u.length;r<n;q=++r)p=u[q],p=p.join(","),d+=q<u.length?p+"\n":p;f?(d=new Blob([d],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(d,C+".csv")):(d=encodeURI(d),q=document.createElement("a"),q.setAttribute("href",d),q.setAttribute("download",
C+".csv"),q.click());this.data=u;return t},value:void 0}},{"../../client/ie.js":37,"../../core/fetch/value.coffee":67,"../../string/strip.js":174}],266:[function(b,c,d){var g;g=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(b,
c){return g(b,c,this)},solo:[],stroke:{width:1},value:!1}},{"../../core/methods/process/data.coffee":86}],267:[function(b,c,d){c.exports={accepted:[Function,Number],value:0}},{}],268:[function(b,c,d){c.exports={accepted:[!1,Function,Object],value:!1}},{}],269:[function(b,c,d){arguments[4][111][0].apply(d,arguments)},{dup:111}],270:[function(b,c,d){var g=b("../../core/console/print.coffee"),f=b("../../string/format.js");c.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(b,c){if(!1===
this.initialized)return this.initialized=!0,b;void 0===b&&"function"===typeof this.value&&(b=this.value);if(!1===c.container.value){var d=c.format.locale.value.dev.setContainer;g.warning(d,"container")}else c.container.value.empty()?(d=c.format.locale.value.dev.noContainer,g.warning(f(d,'"'+c.container.value+'"'),"container")):(c.dev.value&&g.time("total draw time"),c.container.value.call(c.self));if("function"===typeof b&&c.history.chain.length){var m={};changes.forEach(function(b){var c=b.method;
delete b.method;m[c]=b});b(m);c.history.chain=[]}return b},update:!0,value:void 0}},{"../../core/console/print.coffee":52,"../../string/format.js":172}],271:[function(b,c,d){b=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(b,c,d){var k=this;if(!k.value)return[];c||(c="id");var l=k.restricted||k.value,m=[];if(!b)return l;
l=l.filter(function(l){var t=!1;l[k.source][c]==b?(t=!0,d&&m.push(l[k.target])):l[k.target][c]==b&&(t=!0,d&&m.push(l[k.source]));return t});return d?m:l},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],
value:d3.scale.linear()},value:1},process:b,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.coffee":86}],272:[function(b,c,d){c.exports={accepted:[Boolean,String],value:!1}},{}],273:[function(b,c,d){c.exports={accepted:[!1,Array,Function,Number,String],deprecates:"highlight",process:function(b){return!1===b?[]:b instanceof Array?b:[b]},tooltip:{accepted:[Boolean],
value:!0},value:[]}},{}],274:[function(b,c,d){var g,f;d=b("../../core/methods/font/align.coffee");g=b("../../core/methods/font/decoration.coffee");f=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={align:d(),color:"#444444",decoration:g(),family:f(),secondary:{align:d(),color:"#444444",decoration:g(),family:f(),size:12,spacing:0,transform:b(),weight:200},size:12,spacing:0,transform:b(),weight:200}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,
"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],275:[function(b,c,d){var g;g=b("../../core/methods/font/family.coffee");d=b("../../core/methods/font/decoration.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:d(),family:g(),size:11,transform:b(),weight:200},link:!1,padding:0,position:"bottom",value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,
"../../core/methods/font/transform.coffee":85}],276:[function(b,c,d){var g,f,h,k;g=b("../../number/format.coffee");f=b("../../core/locale/locale.coffee");h=b("../../object/merge.coffee");k=b("../../string/title.coffee");c.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(f)},process:function(b){var c;c=f.en_US;"en_US"!==b&&(c=h(c,f[b]));this.language=b;return c},value:"en_US"},
number:{accepted:[!1,Function],value:!1},process:function(b,c){if("string"===typeof b)c.self.format({locale:b});else if("function"===typeof b)return b;return this.value},text:{accepted:[!1,Function],value:!1},value:function(b,c){var d,f;c||(c={});c.locale||(c.locale=this.locale.value);f=c.vars||{};return f.time&&f.time.value&&c.key===f.time.value?(d=b.constructor===Date?b:new Date(b),f.data.time.format(d)):"number"===typeof b?(d=this.number.value||g,d(b,c)):"string"===typeof b?(d=this.text.value||
k,d(b,c)):JSON.stringify(b)}}},{"../../core/locale/locale.coffee":78,"../../number/format.coffee":169,"../../object/merge.coffee":170,"../../string/title.coffee":175}],277:[function(b,c,d){c.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}},{}],278:[function(b,c,d){var g,f,h,k,l,m,p,t;g=b("../../../core/methods/font/align.coffee");f=b("../../../core/methods/font/decoration.coffee");h=b("../../../core/methods/font/family.coffee");k=b("../../../core/methods/filter.coffee");m=b("../../../core/methods/font/position.coffee");
p=b("../../../core/methods/rendering.coffee");t=b("../../../core/methods/font/transform.coffee");l={x:"bottom",x2:"top",y:"left",y2:"right"};c.exports=function(b){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:f(!1),family:h(""),size:!1,spacing:0,transform:t(!1),weight:!1},rendering:p(),value:!0},dataFilter:!0,deprecates:[b+"axis",b+"axis_val",
b+"axis_var"],domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:p(),value:!0},label:{accepted:[Boolean,String],fetch:function(c){return!0===this.value?c.format.value(c[b].value,{key:b,vars:c}):this.value},font:{color:"#444",decoration:f(),family:h(),size:12,spacing:0,transform:t(),weight:200},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(b){b instanceof Array&&(b=b.filter(function(b){return!isNaN(b)}),
b=b.length?b.join(", "):"none");return b},value:"10, 10"},color:"#888",font:{align:g("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:f(),family:h(),padding:{accepted:[Number],value:10},position:m("middle"),size:12,transform:t(),weight:200},process:Array,rendering:p(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(b){b instanceof Array&&(b=b.filter(function(b){return!isNaN(b)}),b=b.length?b.join(", "):"none");return b},value:"none"},
rendering:p(),width:2,value:!0},mute:k(!0),orient:{accepted:["top","right","bottom","left"],value:l[b]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],deprecates:["layout","unique_axis",b+"axis_scale"],process:function(c,d){var f,g,h,k;h=["log","discrete","share"];f=0;for(g=h.length;f<g;f++)k=h[f],k===c?d.axes[k]=b:d.axes[k]===b&&(d.axes[k]=
!1);"discrete"===c&&(d.axes.opposite=0===b.indexOf("x")?"y":"x");return c},value:"linear"},solo:k(!0),stacked:{accepted:[Boolean],process:function(c,d){c||d.axes.stacked!==b?c&&(d.axes.stacked=b):d.axes.stacked=!1;return c},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:f(),family:h(),size:10,spacing:0,transform:t(),weight:200},labels:{accepted:[Boolean,Array],value:!0},rendering:p(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{"../../../core/methods/filter.coffee":80,
"../../../core/methods/font/align.coffee":81,"../../../core/methods/font/decoration.coffee":82,"../../../core/methods/font/family.coffee":83,"../../../core/methods/font/position.coffee":84,"../../../core/methods/font/transform.coffee":85,"../../../core/methods/rendering.coffee":91}],279:[function(b,c,d){c.exports={accepted:[Boolean],back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var b;for(b=[];this.states.length;)b.push(this.states.pop()());return b},states:[],
value:!0}},{}],280:[function(b,c,d){b=b("../../core/methods/process/icon.coffee");c.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:b,rotate:0,value:"fa-angle-left"},deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:!1}},{"../../core/methods/process/icon.coffee":88}],281:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[Array,String],dataFilter:!0,deprecates:["id_var",
"nesting"],grouping:{accepted:[Boolean],value:!0},mute:b(!0),nesting:["id"],solo:b(!0),value:"id"}},{"../../core/methods/filter.coffee":80}],282:[function(b,c,d){var g;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={accepted:[Boolean],align:{accepted:"start middle end left center right".split(" "),process:function(b){var c;c=["left","center","right"].indexOf(b);0<=c&&(b=this.accepted[c]);return b},
value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:d(),family:g(),size:11,transform:b(),weight:200},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],283:[function(b,c,d){b=b("../../core/methods/font/family.coffee");
c.exports={accepted:[Boolean],align:"middle",filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:b(),size:[8,14],weight:200},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text"],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":83}],
284:[function(b,c,d){var g;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={font:{color:"#444444",decoration:d(),family:g(),transform:b(),weight:200},hover:{color:"#444444",decoration:d(),family:g(),transform:b(),weight:200}}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],285:[function(b,c,d){arguments[4][122][0].apply(d,
arguments)},{"../../core/methods/process/margin.coffee":89,dup:122}],286:[function(b,c,d){var g;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},branding:{accepted:[Boolean],image:{dark:"http://d3plus.org/assets/img/icon-transparent-invert.png",light:"http://d3plus.org/assets/img/icon-transparent.png"},value:!1},font:{color:"#444",
decoration:d(),family:g(),size:16,transform:b(),weight:200},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],287:[function(b,c,d){c.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}},
{}],288:[function(b,c,d){b=b("../../core/methods/process/data.coffee");c.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:b,value:!1}},{"../../core/methods/process/data.coffee":86}],289:[function(b,c,d){c.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},deprecates:["sort"],sort:{accepted:["asc","desc"],
value:"desc"},value:!1}},{}],290:[function(b,c,d){c.exports={accepted:[Boolean],value:!1,timeout:400,process:function(b,c){var d,k;if(!b)return!1;d=null;k=function(){var b,d;b=c.container.value.node().parentNode.getBoundingClientRect();d=b.width;b=b.height;c.width.value=d;c.height.value=b;return c.self(c.container.value)};d3.select(window).on("resize."+c.container.id,function(b){return function(c){clearTimeout(d);return d=setTimeout(k,b.timeout)}}(this));return b}}},{}],291:[function(b,c,d){b=b("../../core/methods/rendering.coffee");
c.exports={accepted:function(b){b=b.types[b.type.value].shapes;!b||b instanceof Array||(b=[b]);return b.length?b:["square"]},interpolate:{accepted:"basis basis-open cardinal cardinal-open linear monotone step step-before step-after".split(" "),deprecates:"stack_type",value:"linear"},rendering:b(),value:!1}},{"../../core/methods/rendering.coffee":91}],292:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,deprecates:["value",
"value_var"],mute:b(!0),scale:{accepted:[Function],deprecates:"size_scale",max:{accepted:[Function,Number],value:function(b){return Math.floor(d3.max([d3.min([b.width.viz,b.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3},value:d3.scale.sqrt()},solo:b(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],293:[function(b,c,d){c.exports={value:!1}},{}],294:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,
Function,Object,String],deprecates:["else_var","else"],mute:b(!0),solo:b(!0),value:!1}},{"../../core/methods/filter.coffee":80}],295:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],nesting:!0,mute:b(!0),solo:b(!0),value:!1}},{"../../core/methods/filter.coffee":80}],296:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,
deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},format:{accepted:[!1,Array,Function,String],value:!1},mute:b(!1),solo:b(!1),value:!1}},{"../../core/methods/filter.coffee":80}],297:[function(b,c,d){c.exports={accepted:[Boolean],align:"middle",hover:{accepted:"all-scroll col-resize crosshair default grab grabbing move pointer".split(" "),value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,
Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"\uf04b",fallback:"\u25ba"},pause:{accepted:[!1,String],awesome:"\uf04c",fallback:"\u275a\u275a"},timing:{accepted:[Number],value:1500},value:!0},value:!0}},{}],298:[function(b,c,d){c.exports={mouseevents:60,transitions:600,ui:200}},{}],299:[function(b,c,d){var g,f,h;d=b("../../core/methods/font/decoration.coffee");g=b("../../core/methods/font/family.coffee");h=b("../../core/methods/font/transform.coffee");f=b("../../string/strip.js");
c.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:d(),family:g(),size:16,transform:h(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(b,c){var d;0===c.container.id.indexOf("default")&&b&&(d=f(b).toLowerCase(),c.self.container({id:d}));return b},sub:{accepted:[!1,Function,String],deprecates:"sub_title",font:{align:"center",color:"#444444",decoration:d(),family:g(),size:12,transform:h(),weight:200},link:!1,padding:1,position:"top",value:!1},
total:{accepted:[Boolean,Object],deprecates:"total_bar",font:{align:"center",color:"#444444",decoration:d(),family:g(),size:12,transform:h(),weight:200,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../string/strip.js":174}],300:[function(b,c,d){d=b("../../core/methods/font/family.coffee");b=b("../../core/methods/font/transform.coffee");
c.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},deprecates:"tooltip_info",extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:d(),size:12,transform:b(),weight:200},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],deprecates:"click_function",value:!1},iqr:{accepted:[Boolean],value:!0},
large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],301:[function(b,c,d){b=b("../../core/methods/filter.coffee");c.exports={accepted:[!1,Function,Object,String],deprecates:["total_var"],mute:b(!0),solo:b(!0),value:!1}},{"../../core/methods/filter.coffee":80}],302:[function(b,
c,d){c.exports={accepted:function(b){return d3.keys(b.types)},mode:{accepted:function(b){return b.types[b.type.value].modes||[!1]},value:!1},value:"tree_map"}},{}],303:[function(b,c,d){var g,f;f=b("../../core/methods/font/family.coffee");d=b("../../core/methods/font/align.coffee");g=b("../../core/methods/font/decoration.coffee");b=b("../../core/methods/font/transform.coffee");c.exports={accepted:[Array,Boolean],align:d("center"),border:1,color:{primary:{process:function(b,c){var d;d=this.value;c.ui.color.secondary.value||
(c.ui.color.secondary.value=d3.rgb(d).darker(.75).toString());return b},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:g(),family:f(),size:11,transform:b(),weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],
304:[function(b,c,d){c.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}},{}],305:[function(b,c,d){c.exports={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},value:!0}},{}],306:[function(b,c,d){var g,f,h,k,l,m;b("../../util/closest.coffee");g=b("../../core/fetch/value.coffee");f=b("./helpers/graph/draw.coffee");h=b("./helpers/graph/nest.coffee");
k=b("../../array/sort.coffee");l=b("./helpers/graph/stack.coffee");m=b("../../core/data/threshold.js");b=function(b){var c,d,h,m,r,w,v,y,A,x;f(b,{buffer:b.axes.opposite,zero:!0});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];d=k(b.data.viz,null,null,null,b);h=b[b.axes.discrete];y=b[b.axes.opposite];m=0;for(w=d.length;m<w;m++)for(A=d[m],A.d3plus||(A.d3plus={}),x=A.values,r=0,v=x.length;r<v;r++)c=x[r],c.d3plus||(c.d3plus={}),c.d3plus.x=h.scale.viz(g(b,c,h.value)),c.d3plus.x+=
b.axes.margin.left,c.d3plus.y=y.scale.viz(g(b,c,y.value)),c.d3plus.y+=b.axes.margin.top,c.d3plus.merged instanceof Array&&(A.d3plus.merged||(A.d3plus.merged=[]),A.d3plus.merged=A.d3plus.merged.concat(c.d3plus.merged)),c.d3plus.text&&!A.d3plus.text&&(A.d3plus.text=c.d3plus.text);return l(b,d)};b.filter=function(b,c){return h(b,m(b,c,b[b.axes.discrete].value))};b.requirements=["data","x","y"];b.setup=function(b){var c,d;b.axes.discrete||(c=b.time.value===b.y.value?"y":"x",b.self[c]({scale:"discrete"}));
if(!b[b.axes.discrete].zerofill.value)b.self[b.axes.discrete]({zerofill:!0});if(!b[b.axes.opposite].stacked.value&&"stacked"===b.type.value)b.self[b.axes.opposite]({stacked:!0});d=b[b.axes.opposite];c=b.size;if(!d.value&&c.value||c.changed&&c.previous===d.value)return b.self[b.axes.opposite](c.value);if(!c.value&&d.value||d.changed&&d.previous===c.value)return b.self.size(d.value)};b.shapes=["area"];b.threshold=function(b){return 20/b.height.viz};b.tooltip="static";c.exports=b},{"../../array/sort.coffee":34,
"../../core/data/threshold.js":61,"../../core/fetch/value.coffee":67,"../../util/closest.coffee":205,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],307:[function(b,c,d){var g,f,h,k,l,m,p=[].indexOf||function(b){for(var c=0,d=this.length;c<d;c++)if(c in this&&this[c]===b)return c;return-1};g=b("../../util/buckets.coffee");f=b("../../core/fetch/value.coffee");h=b("./helpers/graph/draw.coffee");k=b("./helpers/graph/nest.coffee");l=b("./helpers/graph/stack.coffee");
m=b("../../util/uniques.coffee");b=function(b){var c,d,k,r,w,v,y,A,x,z,C,D,B,F,H,I,G,M,J,K,L,N,Q,S,U,V,W,X;v=b.axes.discrete;x="x"===v?"height":"width";V="x"===v?"width":"height";N=b.axes.opposite;k="x"===v?"left":"top";L="x"===v?"top":"left";h(b,{buffer:!0,zero:N});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];J=b.data.viz;if(b.axes.stacked)for(C=0,F=J.length;C<F;C++)Q=J[C],l(b,Q.values);Q=b.axes[V]/b[b.axes.discrete].ticks.values.length;F=b[b.axes.discrete].padding.value;
1>F&&(F*=Q);2*F>Q&&(F=.1*Q);C=Q-2*F;b.axes.stacked||(b[v].persist.position.value?(A=(w=b[v].value,0<=p.call(b.id.nesting,w))?d3.max(J,function(b){return b.values.length}):m(J,b.id.value,f,b).length,C/=A,r=Q/2-C/2-F,W=d3.scale.ordinal(),1===A?W.domain([0]).range([0]):W.domain([0,A-1]).range([-r,r])):W=d3.scale.linear());w=[];X=0;b[v].persist.position.value&&!b.axes.stacked&&(c=m(d3.merge(J.map(function(b){return b.values})),b.id.value,f,b,b.id.value,!1),W.domain(c),1===c.length?W.range([0]):W.range(g(W.range(),
c.length)));M=d3.max(J,function(b){return b.values.length});D=0;for(H=J.length;D<H;D++)for(B=J[D],b.axes.stacked?(c=1,K=C):b[v].persist.position.value?(c=A,K=C):(c=B.values.length,b[v].persist.size.value?(K=C/M,r=Q/2-K/2*(M-c)-K/2-F):(K=C/c,r=Q/2-K/2-F),W.domain([0,c-1]),W.range([-r,r])),S=B.values,z=B=0,I=S.length;B<I;z=++B){r=S[z];G=b.axes.stacked?0:b[v].persist.position.value?W(f(b,r,b.id.value)):W(z%c);z=b[N];if(b.axes.stacked)U=r.d3plus[N],d=r.d3plus[N+"0"];else{d=f(b,r,z.value);null===d&&(z=
b[N+"2"],d=f(b,r,z.value));if(0===d)continue;"log"===z.scale.value&&(X=0>d?-1:1);U=z.scale.viz(d);d=z.scale.viz(X)}y=f(b,r,b[v].value);r.d3plus[v]=b[v].scale.viz(y);r.d3plus[v]+=b.axes.margin[k]+G;G=d-U;r.d3plus[N]=d-G/2;b.axes.stacked||(r.d3plus[N]+=b.axes.margin[L]);delete r.d3plus.r;r.d3plus[V]=K;r.d3plus[x]=Math.abs(G);r.d3plus.init={};r.d3plus.init[N]=z.scale.viz(X);r.d3plus.init[N]-=r.d3plus[N];r.d3plus.init[N]+=b.axes.margin[L];r.d3plus.init[V]=r.d3plus[V];b.text.value?delete r.d3plus.label:
r.d3plus.label=!1;w.push(r)}return w};b.filter=function(b,c){return k(b,c,b[b.axes.discrete].value)};b.requirements=["data","x","y"];b.setup=function(b){var c,d;b.axes.discrete||(c=b.time.value===b.y.value?"y":"x",b.self[c]({scale:"discrete"}));d=b[b.axes.opposite];c=b.size;if(!d.value&&c.value||c.changed&&c.previous===d.value)return b.self[b.axes.opposite](c.value);if(!c.value&&d.value||d.changed&&d.previous===c.value)return b.self.size(d.value)};b.shapes=["square"];c.exports=b},{"../../core/fetch/value.coffee":67,
"../../util/buckets.coffee":203,"../../util/uniques.coffee":209,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],308:[function(b,c,d){var g,f,h,k;g=b("../../core/fetch/value.coffee");f=b("./helpers/graph/draw.coffee");h=b("../../string/strip.js");k=b("../../util/uniques.coffee");b=function(b){var c,d,t,u,n,q,r,w,v,y,A,x,z;f(b,{buffer:!0});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];d=b.axes.discrete;v=b.axes.opposite;
c="x"===d?b.axes.margin.left:b.axes.margin.top;w="x"===v?b.axes.margin.left:b.axes.margin.top;t="x"===d?"height":"width";z="x"===d?"width":"height";x=b.axes[z]/b[d].ticks.values.length;A=b.size.value;x=d3.min([x-2*b.labels.padding,"number"===typeof A?A:100]);q=b.type.mode.value;q instanceof Array||(q=[q,q]);n=function(c){var d,f,h;f={};for(d in b.data.keys)h=k(c,d,g,b),f[d]=1===h.length?h[0]:h;return f};r=!1;u=[];y=[];d3.nest().key(function(c){return g(b,c,b[d].value)}).rollup(function(f){var A,B,
F,H,I,G,M,J,K,L,N,Q,S,U,V,W,X;U=b[v].scale.viz;H=f.map(function(c){return g(b,c,b[v].value)});H.sort(function(b,c){return b-c});k(H);J=d3.quantile(H,.25);Q=d3.quantile(H,.5);N=d3.quantile(H,.75);S={};"tukey"===q[1]?(V=N-1.5*(J-N),F="top tukey"):"extent"===q[1]?(V=d3.max(H),F="maximum"):"number"===typeof q[1]&&(V=d3.quantile(H,(100-q[1])/100),F=q[1]+" percentile");V=d3.min([d3.max(H),V]);b.tooltip.extent.value&&(S[F]={key:b[v].value,value:V});b.tooltip.iqr.value&&(S["third quartile"]={key:b[v].value,
value:N},S.median={key:b[v].value,value:Q},S["first quartile"]={key:b[v].value,value:J});"tukey"===q[0]?(A=J+1.5*(J-N),B="bottom tukey"):"extent"===q[0]?(A=d3.min(H),B="minimum"):"number"===typeof q[0]&&(A=d3.quantile(H,q[0]/100),B=q[0]+" percentile");A=d3.max([d3.min(H),A]);b.tooltip.extent.value&&(S[B]={key:b[v].value,value:A});H=[];F=[];W=[];B=[];K=0;for(L=f.length;K<L;K++)I=f[K],X=g(b,I,b[v].value),X>=J&&X<=N?H.push(I):X>=A&&X<J?F.push(I):X<=V&&X>N?W.push(I):B.push(I);I=g(b,f[0],b[d].value);K=
b[d].scale.viz(I);K+=c;L=b.format.value(I,{key:b[d].value,vars:b});I.constructor===Date&&(I=I.getTime());I=h(I);H=n(H);H.d3plus={color:"white",id:"box_"+I,init:{},label:!1,shape:"square",stroke:"#444",text:"Interquartile Range for "+L};H.d3plus[z]=x;H.d3plus.init[z]=x;H.d3plus[t]=Math.abs(U(J)-U(N));H.d3plus[d]=K;X=d3.min([U(J),U(N)])+H.d3plus[t]/2;X+=w;H.d3plus[v]=X;H.d3plus.tooltip=S;y.push(H);S={d3plus:{id:"median_line_"+I,position:"height"===t?"top":"right",shape:"whisker","static":!0}};L={background:"#fff",
names:[b.format.value(Q,{key:b[v].value,vars:b})],padding:0,resize:!1,x:0,y:0};G=Math.abs(U(Q)-U(J));M=Math.abs(U(Q)-U(N));M=2*d3.min([G,M]);G=2*b.data.stroke.width+2*b.labels.padding;L["width"===z?"w":"h"]=x-G;L["width"===t?"w":"h"]=M-G;S.d3plus.label=L;S.d3plus[z]=x;S.d3plus[d]=K;S.d3plus[v]=U(Q)+w;y.push(S);F=n(F);F.d3plus={id:"bottom_whisker_line_"+I,offset:H.d3plus[t]/2,position:"height"===t?"bottom":"left",shape:"whisker","static":!0};"x"===v&&(F.d3plus.offset*=-1);F.d3plus[t]=Math.abs(U(A)-
U(J));F.d3plus[z]=x;F.d3plus[d]=K;F.d3plus[v]=X;y.push(F);W=n(W);W.d3plus={id:"top_whisker_line_"+I,offset:H.d3plus[t]/2,position:"height"===t?"top":"right",shape:"whisker","static":!0};"y"===v&&(W.d3plus.offset*=-1);W.d3plus[t]=Math.abs(U(V)-U(N));W.d3plus[z]=x;W.d3plus[d]=K;W.d3plus[v]=X;y.push(W);J=0;for(N=B.length;J<N;J++)I=B[J],I.d3plus[d]=K,I.d3plus[v]=U(g(b,I,b.y.value)),I.d3plus[v]+=w,I.d3plus.r=4,I.d3plus.shape=b.shape.value;r=!B.length&&0===V-A;u.push(Q);y=y.concat(B);return f}).entries(b.data.viz);
return r&&1===k(u).length?[]:y};b.modes=["tukey","extent",Array,Number];b.requirements=["data","x","y"];b.shapes="circle check cross diamond square triangle triangle_up triangle_down".split(" ");b.setup=function(b){var c;if(!b.axes.discrete)return c=b.time.value===b.y.value?"y":"x",b.self[c]({scale:"discrete"})};c.exports=b},{"../../core/fetch/value.coffee":67,"../../string/strip.js":174,"../../util/uniques.coffee":209,"./helpers/graph/draw.coffee":313}],309:[function(b,c,d){var g,f,h,k,l,m;g=b("../../array/sort.coffee");
k=b("../../core/fetch/value.coffee");f=b("../../core/fetch/color.coffee");h=b("../../core/fetch/text.js");m=b("../../color/legible.coffee");l=b("../../core/data/group.coffee");b=function(b){var c,d,n,q,r,w,v,y,A,x,z,C,D,B,F,H,I,G,M,J;y=l(b,b.data.viz);y=g(y,null,null,null,b);w=y.length;4>w?(n=w,v=1):(v=b.width.viz/b.height.viz,n=Math.ceil(Math.sqrt(w*v)),v=Math.ceil(Math.sqrt(w/v)));if(0<w)for(;(v-1)*n>=w;)v--;d=b.width.viz/n;c=b.height.viz/v;b.size.value?(v=d3.min(b.data.viz,function(c){return k(b,
c,b.size.value,b.id.value,"min")}),w=d3.max(b.data.viz,function(c){return k(b,c,b.size.value,b.id.value)}),r=[v,w]):r=[0,0];v=d3.min([d,c])/2-10;w=b.labels.value&&!b.small&&40<=v?d3.max([20,d3.min([.25*v,50])]):0;v-=w;B=d3.min([v,b.size.scale.min.value]);H=b.size.scale.value.domain(r).rangeRound([B,v]);B=d3.layout.pack().children(function(b){return b.values}).padding(5).radius(function(b){return H(b)}).size([d-10,c-10-w]).value(function(b){return b.value});r=[];A=x=F=0;for(z=y.length;x<z;A=++x){q=
y[A];G=B.nodes(q);M=d*A%b.width.viz;J=c*F;q=0;for(C=G.length;q<C;q++)I=G[q],I.children?(D={d3plus:{}},D[b.id.value]=I.key):D=I.d3plus,D.d3plus.depth=b.id.grouping.value?I.depth:b.depth.value,D.d3plus.x=I.x,D.d3plus.xOffset=M,D.d3plus.y=I.y,D.d3plus.yOffset=J+w,D.d3plus.r=I.r,r.push(D);0===(A+1)%n&&F++}n=v/d3.max(r,function(b){return b.d3plus.r});y=B.size()[0]/2;A=B.size()[1]/2;d=0;for(c=r.length;d<c;d++)q=r[d],q.d3plus.x=(q.d3plus.x-y)*n+y+q.d3plus.xOffset,q.d3plus.y=(q.d3plus.y-A)*n+A+q.d3plus.yOffset,
q.d3plus.r*=n,delete q.d3plus.xOffset,delete q.d3plus.yOffset,q.d3plus["static"]=q.d3plus.depth<b.depth.value&&b.id.grouping.value,!w||0!==q.d3plus.depth&&!1!==b.id.grouping.value?delete q.d3plus.label:(q.d3plus.text=h(b,q[b.id.value],q.d3plus.depth),B=w>3*b.labels.padding?b.labels.padding:0,q.d3plus.label={x:0,y:-(v+B+w/2),w:2*v,h:w-B,padding:0,resize:!0,color:m(f(b,q,q.d3plus.depth)),force:!0});return r.sort(function(b,c){return b.d3plus.depth-c.d3plus.depth})};b.fill=!0;b.requirements=["data"];
b.scale=1.05;b.shapes=["circle","donut"];c.exports=b},{"../../array/sort.coffee":34,"../../color/legible.coffee":44,"../../core/data/group.coffee":57,"../../core/fetch/color.coffee":63,"../../core/fetch/text.js":66,"../../core/fetch/value.coffee":67}],310:[function(b,c,d){var g;g=b("../../../core/console/print.coffee");b=function(b){var c;c={circle:"scatter",donut:"scatter",line:"line",square:"scatter",area:"stacked"}[b.shape.value];g.warning('The "chart" visualization type has been deprecated and will be removed in version 2.0. Please use the "'+
c+'" visualization type.');b.self.type(c).draw()};b.shapes=["circle","donut","line","square","area"];c.exports=b},{"../../../core/console/print.coffee":52}],311:[function(b,c,d){b=function(b){var c,d,k,l;c=b.coords.value;d=b.coords.key||d3.keys(c.objects)[0];c=topojson.feature(c,c.objects[d]).features;l=b.coords.solo.value;k=b.coords.mute.value;return c=c.filter(function(c){c[b.id.value]=c.id;return l.length?0<=l.indexOf(c.id):k.length?0>k.indexOf(c.id):!0})};b.libs=["topojson"];b.nesting=!1;b.requirements=
["coords"];b.scale=1;b.shapes=["coordinates"];b.zoom=!0;c.exports=b},{}],312:[function(b,c,d){var g,f,h;g=b("../../../../core/fetch/color.coffee");f=b("../../../../color/legible.coffee");h=b("../../../../core/console/print.coffee");c.exports=function(b){var c,d,p,t,u,n,q,r,w,v;c=b.axes;t=c.stacked||!c.ticks.value?[]:b.data.viz;v=2*t.length>b.data.large?0:b.draw.timing;r=function(d,h){0===h.indexOf("y")?d.attr("x1",-2).attr("x2",-8).attr("y1",function(b){return b.d3plus.y-c.margin.top}).attr("y2",
function(b){return b.d3plus.y-c.margin.top}):d.attr("x1",function(b){return b.d3plus.x-c.margin.left}).attr("x2",function(b){return b.d3plus.x-c.margin.left}).attr("y1",c.height+2).attr("y2",c.height+8);return d.style("stroke",function(c){return f(g(b,c))}).style("stroke-width",b.data.stroke.width).attr("shape-rendering",b.shape.rendering.value)};b.dev.value&&h.time("creating axis tick groups");w=b.group.select("g#d3plus_graph_plane").selectAll("g.d3plus_data_tick").data(t,function(d){return"tick_"+
d[b.id.value]+"_"+d.d3plus.depth+(c.discrete?"_"+d.d3plus[c.discrete]:"")});w.enter().append("g").attr("class","d3plus_data_tick").attr("opacity",0);b.dev.value&&h.timeEnd("creating axis tick groups");q=["x","y"];u=0;for(n=q.length;u<n;u++)d=q[u],b.dev.value&&v&&h.time("creating "+d+" ticks"),p=v&&d!==c.discrete?t:[],p=w.selectAll("line.d3plus_data_"+d).data(p,function(c){return"tick_"+c[b.id.value]+"_"+c.d3plus.depth}),b.dev.value&&v&&h.timeEnd("creating "+d+" ticks"),b.dev.value&&v&&h.time("styling "+
d+" ticks"),0<v?p.transition().duration(v).call(r,d):p.call(r,d),p.enter().append("line").attr("class","d3plus_data_"+d).call(r,d),b.dev.value&&v&&h.timeEnd("styling "+d+" ticks");0<v?(w.transition().duration(v).attr("opacity",1),w.exit().transition().duration(v).attr("opacity",0).remove()):(w.attr("opacity",1),w.exit().remove())}},{"../../../../color/legible.coffee":44,"../../../../core/console/print.coffee":52,"../../../../core/fetch/color.coffee":63}],313:[function(b,c,d){var g,f,h,k;g=b("./includes/axes.coffee");
f=b("./includes/svg.coffee");h=b("./includes/mouse.coffee");k=b("./includes/plot.coffee");c.exports=function(b,c){void 0===c&&(c={});g(b,c);k(b,c);f(b,c);b.mouse.viz=!0===c.mouse?h:!1}},{"./includes/axes.coffee":314,"./includes/mouse.coffee":316,"./includes/plot.coffee":317,"./includes/svg.coffee":318}],314:[function(b,c,d){var g,f,h,k,l,m,p,t,u,n,q,r;g=b("../../../../../array/sort.coffee");k=b("./buffer.coffee");h=b("../../../../../util/buckets.coffee");m=b("../../../../../core/fetch/data.js");p=
b("../../../../../core/fetch/value.coffee");n=b("../../../../../core/console/print.coffee");r=b("../../../../../util/uniques.coffee");c.exports=function(b,c){var d,g,h,m,C,D;if((h=l(b))||!b.axes.dataset)b.axes.dataset=t(b);b.axes.scale=c.buffer&&!0!==c.buffer?q(b,c.buffer):!1;d=b.width.viz>b.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"];m=0;for(C=d.length;m<C;m++)g=d[m],D=0===g.indexOf("x")?"y":"x",D=b.order.changed||b.order.sort.changed||!0===b.order.value&&b[D].changed,b[g].value&&(!b[g].ticks.values||
h||D)&&(b.dev.value&&n.time("calculating "+g+" axis"),b[g].reset=!0,b[g].ticks.values=!1,g===b.axes.discrete&&b[g].value!==b.time.value&&(b[g].ticks.values=r(b.axes.dataset,b[g].value,p,b)),D=!0===c.zero||0===g.indexOf(c.zero)?!0:!1,D=f(b,g,D),0===g.indexOf("y")&&(D=D.reverse()),b[g].scale.viz=u(b,g,D),b[g].domain.viz=D,b.dev.value&&n.timeEnd("calculating "+g+" axis"));b.axes.mirror.value&&(g=d3.extent(b.y.domain.viz.concat(b.x.domain.viz)),b.x.domain.viz=g,b.x.scale.viz.domain(g),g=g.slice().reverse(),
b.y.domain.viz=g,b.y.scale.viz.domain(g));if(c.buffer)for(h=0,m=d.length;h<m;h++)g=d[h],g!==b.axes.discrete&&k(b,g,c.buffer)};l=function(b){var c,d,f,g,h,k,l,m,n;(d=b.time.fixed.value&&(b.time.solo.changed||b.time.mute.changed))||(d=b.id.solo.changed||b.id.mute.changed);if(d)return d;c="data time id depth type x y x2 y2".split(" ");f=0;for(h=c.length;f<h;f++)if(g=c[f],b[g].changed){d=!0;break}if(d)return d;n="mute range scale solo stacked zerofill".split(" ");l=["x","y","x2","y2"];f=0;for(h=l.length;f<
h;f++)for(c=l[f],g=0,k=n.length;g<k;g++)if(m=n[g],b[c][m].changed){d=!0;break}return d};t=function(b){var c,d;if(b.time.fixed.value)return b.data.viz;d=d3.range(0,b.id.nesting.length);return d3.merge([function(){var f,g,h;h=[];f=0;for(g=d.length;f<g;f++)c=d[f],h.push(m(b,"all",c));return h}()])};f=function(b,c,d,f){var h,k,l,m,n,q,t,u,G,M,J,K,L;G=0===c.indexOf("x")?"y":"x";if(b[c].range.value&&2===b[c].range.value.length)return b[c].range.value.slice();if("share"===b[c].scale.value)return b[c].ticks.values=
d3.range(0,1.1,.1),[0,1];if(b[c].stacked.value){q=[];h=b.axes.dataset;k=0;for(d=h.length;k<d;k++)f=h[k],f.values?q=q.concat(f.values):q.push(f);k=d3.nest().key(function(c){return p(b,c,b[G].value)}).rollup(function(d){var f;f=d3.sum(d,function(d){d=p(b,d,b[c].value);return 0<d?d:0});return[d3.sum(d,function(d){d=p(b,d,b[c].value);return 0>d?d:0}),f]}).entries(q);l=d3.merge(k.map(function(b){return b.values}));return d3.extent(l)}if(b[c].value===b.time.value)return b.time.solo.value.length?d3.extent(b.time.solo.value).map(function(b){return b.constructor!==
Date?(b+="",4===b.length&&parseInt(b)+""===b&&(b+="/01/01"),new Date(b)):b}):d3.extent(b.data.time.ticks);l=[];M=b.axes.dataset;h=0;for(q=M.length;h<q;h++)f=M[h],f=p(b,f,b[c].value),f instanceof Array?l=l.concat(f):l.push(f);l=l.filter(function(b){return null!==b});if(c===b.axes.discrete){if(M=!0===b.order.value?b[G].value:b.order.value){q=b.order.sort.value;d=b.order.agg.value||b.aggs.value[M]||"max";h=typeof d;l=l.reduce(function(b,c){b[c]=[];return b},{});J=b.axes.dataset;n=0;for(t=J.length;n<
t;n++)if(f=J[n],f.values)for(K=f.values,u=0,f=K.length;u<f;u++)L=K[u],m=p(b,L,b[c].value),l[m].push(p(b,L,M));else m=p(b,f,b[c].value),l[m].push(p(b,f,M));for(k in l)L=l[k],"string"===h?l[k]=d3[d](L):"function"===h&&(l[k]=d(L,M));l=g(d3.entries(l),"value",q);return l=l.reduce(function(b,c){b.push(c.key);return b},[])}return r(l).sort()}l.sort(function(b,c){return b-c});"log"===b[c].scale.value&&(0===l[0]&&(l[0]=1),0===l[l.length-1]&&(l[l.length-1]=-1));d&&(f=l.every(function(b){return 0<b}),k=l.every(function(b){return 0>
b}),(f||k)&&l.push("log"===b[c].scale.value?f?1:-1:0));return d3.extent(l)};u=function(b,c,d){var f,g,k,l;g=0===c.indexOf("x")?b.width.viz:b.height.viz;k=b[c].scale.value;0<=["discrete","share"].indexOf(k)&&(k="linear");l=10;"string"===typeof d[0]?(k="ordinal",f=h([0,g],d.length)):(f=[0,g],"linear"===b[c].scale.value&&(l=Math.floor(g/(4*b[c].ticks.font.size))));b[c].scale.ticks=l;return d3.scale[k]().domain(d).range(f)};q=function(b,c){var d,f,g;!0===c&&(c="size");c in b&&(c=b[c].value);g=b.size.scale.min.value;
"function"===typeof g&&(g=g(b));f=b.size.scale.max.value;"function"===typeof f&&(f=f(b));if(!1===c)return b.size.scale.value.rangeRound([f,f]);if("number"===typeof c)return b.size.scale.value.rangeRound([c,c]);if(c)return b.dev.value&&n.time("calculating buffer scale"),d=d3.extent(b.axes.dataset,function(d){return(d=p(b,d,c))?d:0}),d[0]===d[1]&&(g=f),b.dev.value&&n.timeEnd("calculating buffer scale"),b.size.scale.value.domain(d).rangeRound([g,f])}},{"../../../../../array/sort.coffee":34,"../../../../../core/console/print.coffee":52,
"../../../../../core/fetch/data.js":64,"../../../../../core/fetch/value.coffee":67,"../../../../../util/buckets.coffee":203,"../../../../../util/uniques.coffee":209,"./buffer.coffee":315}],315:[function(b,c,d){var g,f;g=b("../../../../../util/buckets.coffee");f=b("../../../../../util/closest.coffee");c.exports=function(b,c,d){var m,p,t,u,n;if("share"!==b[c].scale.value&&!b[c].range.value&&b[c].reset){if(c===b.axes.discrete){u=b[c].scale.viz.domain();if("string"===typeof u[0]){for(m=u.length;0<=m;)u.splice(m,
0,"d3plus_buffer_"+m),m--;d=b[c].scale.viz.range();d=g(d3.extent(d),u.length);return b[c].scale.viz.domain(u).range(d)}0===c.indexOf("y")&&(u=u.slice().reverse());if(1===b[c].ticks.values.length)b[c].value===b.time.value&&1!==b.data.time.ticks.length?(d=f(b.data.time.ticks,u[0]),m=b.data.time.ticks.indexOf(d),0<m?u[0]=b.data.time.ticks[m-1]:(t=b.data.time.ticks[m+1]-d,u[0]=new Date(d.getTime()-t)),m<b.data.time.ticks.length-1?u[1]=b.data.time.ticks[m+1]:(t=d-b.data.time.ticks[m-1],u[1]=new Date(d.getTime()+
t))):(--u[0],u[1]+=1);else if(b.axes.scale)d=Math.abs(u[1]-u[0]),m=d/(b[c].ticks.values.length-1),m/=2,p=b[c].scale.viz.range()[1],t=1.5*b.axes.scale.range()[1],d=b[c].scale.viz.invert(-t),t=b[c].scale.viz.invert(p+t),u[0]-m<d?(u[0]-=m,u[1]+=m):(u=[d,t],0===c.indexOf("y")&&(u=u.reverse()),d=b[c].scale.viz.domain(),d=d[1]-d[0],d||(--u[0],u[1]+=1));else if(b[c].value===b.time.value)d=Math.abs(u[1]-u[0]),m=d/(b[c].ticks.values.length-1),m/=2,u[0]-=m,u[1]+=m;else{d=Math.abs(u[1]-u[0]);d/=2;m=u.length;
for(p=u.slice();0<=m;)t=m?p[m-1]+d:p[m]-d,u.splice(m,0,t),m--;d=b[c].scale.viz.range();d=g(d3.extent(d),u.length);b[c].scale.viz.domain(u).range(d)}0===c.indexOf("y")&&(u=u.reverse());return b[c].scale.viz.domain(u)}if("x"===d&&0===c.indexOf("x")||"y"===d&&0===c.indexOf("y")||!0===d){u=b[c].scale.viz.domain();d=0<=u[0]&&0<=u[1];p=0>=u[0]&&0>=u[1];if("log"===b[c].scale.value)t=d?1:-1,d&&0===c.indexOf("y")&&(u=u.slice().reverse()),n=Math.pow(10,parseInt(Math.abs(u[0])).toString().length-1)*t,(m=p=u[0]%
n)&&.1>=m/n&&(m+=n*t),u[0]-=0===p?n:m,0===u[0]&&(u[0]=t),n=Math.pow(10,parseInt(Math.abs(u[1])).toString().length-1)*t,p=u[1]%n,m=Math.abs(n-p),p&&.1>=m/n&&(m+=n*t),u[1]+=0===p?n:m,0===u[1]&&(u[1]=t),d&&0===c.indexOf("y")&&(u=u.reverse());else{t=0;0===c.indexOf("y")&&(u=u.slice().reverse());n=u.filter(function(b){return b.constructor===String});m=.05*Math.abs(u[1]-u[0])||1;if(!n.length){u[0]-=m;u[1]+=m;if(d&&u[0]<t||p&&u[0]>t)u[0]=t;if(d&&u[1]<t||p&&u[1]>t)u[1]=t}0===c.indexOf("y")&&(u=u.reverse())}return b[c].scale.viz.domain(u)}if(b.axes.scale)return d=
!1,b.axes.mirror.value&&(u=0===c.indexOf("y")?"x":"y",d=b[u].scale.viz,u=b.width.viz>b.height.viz?"x":"y"),c===u&&d?u=d.domain().slice().reverse():(p=b[c].scale.viz.range()[1],t=b.axes.scale.range()[1],d=b[c].scale.viz.invert(1.5*-t),t=b[c].scale.viz.invert(p+1.5*t),u=[d,t],0===c.indexOf("y")&&(u=u.reverse()),d=b[c].scale.viz.domain(),d=d[1]-d[0],d||(--u[0],u[1]+=1),0===c.indexOf("y")&&(u=u.reverse())),b[c].scale.viz.domain(u)}}},{"../../../../../util/buckets.coffee":203,"../../../../../util/closest.coffee":205}],
316:[function(b,c,d){var g,f,h,k,l;b("../../../../../util/copy.coffee");g=b("../../../../../client/pointer.coffee");f=b("../../../../../core/fetch/color.coffee");h=b("../../../../../core/fetch/value.coffee");k=b("../../../../../color/legible.coffee");l=b("../../../../../color/text.coffee");c.exports=function(b,c){var d,u,n,q,r,w,v,y,A,x,z;d=d3.event.type===g.click&&(c.tooltip.value["long"]||c.tooltip.html.value);n=0<=[g.over,g.move].indexOf(d3.event.type);x=b.d3plus.x;z=b.d3plus.y;y=b.d3plus.r||0;
y*=c.types[c.type.value].scale||1;q=c.axes;A=c.draw.timing?c.timing.mouseevents:0;!d&&n?(u=k(f(c,b)),d=["x","y","x2","y2"].filter(function(d){var f;return(f=h(c,b,c[d].value))&&!(f instanceof Array)&&d!==c.axes.stacked&&c[d].mouse.value&&d!==c.axes.discrete})):d=[];n=function(b){return b.attr("x1",function(b){return 0===b.indexOf("x")?x:x-y}).attr("y1",function(b){return 0===b.indexOf("y")?z:z+y}).attr("x2",function(b){return 0===b.indexOf("x")?x:x-y}).attr("y2",function(b){return 0===b.indexOf("y")?
z:z+y}).attr("opacity",0)};r=function(b){return b.style("stroke",function(b){return"area"===c.shape.value?"white":u}).attr("stroke-dasharray",function(b){return c[b].mouse.dasharray.value}).attr("shape-rendering",function(b){return c[b].mouse.rendering.value}).style("stroke-width",function(b){return c[b].mouse.width})};w=function(d){return d.attr("x1",function(b){return 0===b.indexOf("x")?x:x-y}).attr("y1",function(b){return 0===b.indexOf("y")?z:z+y}).attr("x2",function(d){return 0===d.indexOf("x")?
x:b.d3plus.x0?b.d3plus.x0:"y"===d?q.margin.left-c[d].ticks.size:q.margin.left+q.width+c[d].ticks.size}).attr("y2",function(d){return 0===d.indexOf("y")?z:b.d3plus.y0?b.d3plus.y0:"x"===d?q.height+q.margin.top+c[d].ticks.size:q.margin.top-c[d].ticks.size}).style("opacity",1)};v=c.g.labels.selectAll("line.d3plus_mouse_axis_label").data(d);A?(v.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(n).call(r),v.transition().duration(A).call(w).call(r),v.exit().transition().duration(A).call(n).remove()):
(v.call(w).call(r),v.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(n).call(r),v.exit().remove());n=function(d){return d.attr("font-size",function(b){return c[b].ticks.font.size+"px"}).attr("font-family",function(b){return c[b].ticks.font.family.value}).attr("font-weight",function(b){return c[b].ticks.font.weight}).attr("x",function(b){return 0===b.indexOf("x")?x:"y"===b?q.margin.left-5-c[b].ticks.size:q.margin.left+q.width+5+c[b].ticks.size}).attr("y",
function(d){return 0===d.indexOf("y")?z:b.d3plus.y0?b.d3plus.y+(b.d3plus.y0-b.d3plus.y)/2+q.margin.top-6:"x"===d?q.height+q.margin.top+5+c[d].ticks.size:q.margin.top-5-c[d].ticks.size-1.35*c[d].ticks.font.size}).attr("fill","area"===c.shape.value?"white":l(u))};r=c.g.labels.selectAll("text.d3plus_mouse_axis_label").data(d);r.enter().append("text").attr("class","d3plus_mouse_axis_label").attr("id",function(b){return b+"_d3plusmouseaxislabel"}).attr("dy",function(b){return 0===b.indexOf("y")?.35*c[b].ticks.font.size:
c[b].ticks.font.size}).style("text-anchor",function(b){return"y"===b?"end":"y2"===b?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(n);r.text(function(d){var f;d=c.axes.stacked||d;f=h(c,b,c[d].value);return c.format.value(f,{key:c[d].value,vars:c,labels:c[d].affixes.value})});A?(r.transition().duration(A).delay(A).attr("opacity",1).call(n),r.exit().transition().duration(A).attr("opacity",0).remove()):(r.attr("opacity",1).call(n),r.exit().remove());n=function(d){var f;f=function(b){b=
d3.select("text#"+b+"_d3plusmouseaxislabel");return b.size()?b.node().getBBox():{width:0,height:0}};return d.attr("x",function(b){var d;d=f(b).width;return 0===b.indexOf("x")?x-d/2-5:"y"===b?q.margin.left-c[b].ticks.size-d-10:q.margin.left+q.width+c[b].ticks.size}).attr("y",function(d){var g;g=f(d).height;return 0===d.indexOf("y")?z-(g/2+5):b.d3plus.y0?b.d3plus.y+(b.d3plus.y0-b.d3plus.y)/2+q.margin.top-(g/2+5):"x"===d?q.height+q.margin.top+c[d].ticks.size:q.margin.top-c[d].ticks.size-g-10}).attr("width",
function(b){return f(b).width+10}).attr("height",function(b){return f(b).height+10}).style("stroke","area"===c.shape.value?"transparent":u).attr("fill",u).attr("shape-rendering",function(b){return c[b].mouse.rendering.value}).style("stroke-width",function(b){return c[b].mouse.width})};d=c.g.labels.selectAll("rect.d3plus_mouse_axis_label").data(d);if(A)return d.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").attr("opacity",
0).call(n),d.transition().duration(A).delay(A).attr("opacity",1).call(n),d.exit().transition().duration(A).attr("opacity",0).remove();d.attr("opacity",1).call(n);d.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(n);return d.exit().remove()}},{"../../../../../client/pointer.coffee":38,"../../../../../color/legible.coffee":44,"../../../../../color/text.coffee":50,"../../../../../core/fetch/color.coffee":63,"../../../../../core/fetch/value.coffee":67,
"../../../../../util/copy.coffee":206}],317:[function(b,c,d){var g,f,h,k,l,m,p,t,u,n;g=b("../../../../../util/buckets.coffee");f=b("./buffer.coffee");k=b("../../../../../core/fetch/value.coffee");l=b("../../../../../font/sizes.coffee");u=b("../../../../../textwrap/textwrap.coffee");n=b("../../../../../core/data/time.coffee");b("../../../../../util/uniques.coffee");c.exports=function(b,c){var d,g,l,m,u,z,C,D,B,F;b.axes.margin=t(b);b.axes.height=b.height.viz;b.axes.width=b.width.viz;d=b.width.viz>b.height.viz?
["y","y2","x","x2"]:["x","x2","y","y2"];u=0;for(z=d.length;u<z;u++)if(g=d[u],b[g].value){if(!1===b[g].ticks.values)if(b[g].value===b.time.value){l=b.time.solo.value;l=l.length?l.map(function(b){b.constructor!==Date&&(b+="",4===b.length&&parseInt(b)+""===b&&(b+="/01/01"),b=new Date(b));return b}):b.data.time.values;m=d3.extent(l);F=b.data.time.stepType;l=[m[0]];for(C=m[0];C<m[1];)C=new Date(C),C=new Date(C["set"+F](C["get"+F]()+1)),l.push(C);b[g].ticks.values=l}else 1===g.indexOf("2")?(D=b[g.slice(0,
1)].scale.viz,B=b[g].scale.viz,l=b[g.slice(0,1)].scale.ticks,b[g].ticks.values=D.ticks(l).map(function(b){return parseFloat(d3.format(".5f")(B.invert(D(b))))})):b[g].ticks.values=b[g].scale.viz.ticks(b[g].scale.ticks);b[g].ticks.values.length||(l=k(b,b.data.viz,b[g].value),l instanceof Array||(l=[l]),b[g].ticks.values=l);l=0===g.indexOf("x")?"y":"x";(1===b[g].ticks.values.length||c.buffer&&c.buffer!==l&&g===b.axes.discrete&&!0===b[g].reset)&&f(b,g,c.buffer);b[g].reset=!1;b[g].value===b.time.value?
(l={"font-family":b[g].ticks.font.family.value,"font-weight":b[g].ticks.font.weight,"font-size":b[g].ticks.font.size+"px","text-transform":b[g].ticks.font.transform.value,"letter-spacing":b[g].ticks.font.spacing+"px"},l=n(b,{values:b[g].ticks.values,limit:b.width.viz,style:l}),b[g].ticks.visible=b[g].ticks.value?b[g].ticks.value.map(Number):b[g].ticks.labels.value.constructor===Array?b[g].ticks.labels.value.map(Number):l.values.map(Number),b[g].ticks.format=l.format):b[g].ticks.value?(b[g].ticks.values=
b[g].ticks.value,b[g].ticks.visible=b[g].ticks.labels.value.constructor===Array?b[g].ticks.labels.value:b[g].ticks.value):b[g].ticks.labels.value.constructor===Array?b[g].ticks.visible=b[g].ticks.labels.value:"log"===b[g].scale.value?(l=b[g].ticks.values,m=l.filter(function(b){return"1"===Math.abs(b).toString().charAt(0)}),b[g].ticks.visible=3>m.length?l:m):b[g].ticks.visible=b[g].ticks.values}b.small||p(b);u=0;for(z=d.length;u<z;u++)g=d[u],b[g].axis.svg=h(b,g)};t=function(b){return b.small?{top:0,
right:0,bottom:0,left:0}:{top:10,right:10,bottom:10,left:10}};p=function(b){var c,d,f,h,k,n,p,t,D,B,F,H,I,G,M,J;B=b.x.scale.viz.domain();J=b.y.scale.viz.domain();b.x2.value&&(t=b.x2.scale.viz.domain());b.y2.value&&(M=b.y2.scale.viz.domain());n=["y","y2"];d=0;for(h=n.length;d<h;d++)c=n[d],b[c].value&&(k="y"===c?"left":"right",p={"font-size":b[c].ticks.font.size+"px","font-family":b[c].ticks.font.family.value,"font-weight":b[c].ticks.font.weight,"text-transform":b[c].ticks.font.transform.value,"letter-spacing":b[c].ticks.font.spacing+
"px"},f=b[c].ticks.visible,"log"===b[c].scale.value?f=f.map(function(b){return m(b)}):"share"===b[c].scale.value?f=f.map(function(d){return b.format.value(100*d,{key:"share",vars:b,output:c})}):b[c].value===b.time.value?f=f.map(function(d,f){return b[c].ticks.format(new Date(d))}):("string"===typeof f[0]&&(f=b[c].scale.viz.domain().filter(function(b){return 0!==b.indexOf("d3plus_buffer_")})),f=f.map(function(d){return b.format.value(d,{key:b[c].value,vars:b,labels:b[c].affixes.value,output:c})})),
b[c].ticks.labels.value?(b[c].ticks.hidden=!1,p=d3.max(l(f,p),function(b){return b.width}),p=Math.ceil(p+b.labels.padding),b.axes.margin[k]+=p):b[c].ticks.hidden=!0,(p=b[c].label.fetch(b))?(f={"font-family":b[c].label.font.family.value,"font-weight":b[c].label.font.weight,"font-size":b[c].label.font.size+"px","text-transform":b[c].label.font.transform.value,"letter-spacing":b[c].label.font.spacing+"px"},b[c].label.height=l([p],f)[0].height):b[c].label.height=0,b[c].label.value&&(b.axes.margin[k]+=
b[c].label.height,b.axes.margin[k]+=2*b[c].label.padding));b.axes.width-=b.axes.margin.left+b.axes.margin.right;b.x.scale.viz.range(g([0,b.axes.width],B.length));t&&b.x2.scale.viz.range(g([0,b.axes.width],t.length));n=["x","x2"];d=0;for(h=n.length;d<h;d++)c=n[d],b[c].value&&(k="x"===c?"bottom":"top",b[c].ticks.labels.value?(b[c].ticks.hidden=!1,f={"font-size":b[c].ticks.font.size+"px","font-family":b[c].ticks.font.family.value,"font-weight":b[c].ticks.font.weight,"text-transform":b[c].ticks.font.transform.value,
"letter-spacing":b[c].ticks.font.spacing+"px"},G=b[c].ticks.visible,"log"===b[c].scale.value?I=G.map(function(b){return m(b)}):"share"===b[c].scale.value?I=G.map(function(d){return b.format.value(100*d,{key:"share",vars:b,output:c})}):b[c].value===b.time.value?I=G.map(function(d,f){return b[c].ticks.format(new Date(d))}):("string"===typeof G[0]&&(G=b[c].scale.viz.domain().filter(function(b){return 0!==b.indexOf("d3plus_buffer_")})),I=G.map(function(d){return b.format.value(d,{key:b[c].value,vars:b,
labels:b[c].affixes.value,output:c})})),H=l(I,f),p=d3.max(H,function(b){return b.width}),D=d3.max(H,function(b){return b.height}),1===G.length?F=b.axes.width:(F=b[c].scale.viz(G[1])-b[c].scale.viz(G[0]),F=Math.abs(F)),p>F&&0<I.join("").indexOf(" ")?(b[c].ticks.wrap=!0,H=l(I,f,{mod:function(c){return u().container(d3.select(c)).height(b.axes.height/2).width(F).draw()}}),p=d3.max(H,function(b){return b.width}),D=d3.max(H,function(b){return b.height})):b[c].ticks.wrap=!1,b[c].ticks.baseline="auto",p<=
F?b[c].ticks.rotate=0:p<b.axes.height/2?(H=l(I,f,{mod:function(c){return u().container(d3.select(c)).width(b.axes.height/2).height(F).draw()}}),D=d3.max(H,function(b){return b.width}),p=d3.max(H,function(b){return b.height}),b[c].ticks.rotate=-90):D=p=0,p&&D||(b[c].ticks.hidden=!0,b[c].ticks.rotate=0),p=Math.ceil(p),D=Math.ceil(D),b[c].ticks.maxHeight=D,b[c].ticks.maxWidth=p,b.axes.margin[k]+=D+b.labels.padding,f=b[c].ticks.visible[b[c].ticks.visible.length-1],f=b[c].scale.viz(f),f+=p/2+b.axes.margin.left,
f>b.width.value&&(p=f-b.width.value+b.axes.margin.right,b.axes.width-=p,b.axes.margin.right+=p)):b[c].ticks.hidden=!0,(p=b[c].label.fetch(b))?(f={"font-family":b[c].label.font.family.value,"font-weight":b[c].label.font.weight,"font-size":b[c].label.font.size+"px","text-transform":b[c].label.font.transform.value,"letter-spacing":b[c].label.font.spacing+"px"},b[c].label.height=l([p],f)[0].height):b[c].label.height=0,b[c].label.value&&(b.axes.margin[k]+=b[c].label.height,b.axes.margin[k]+=2*b[c].label.padding));
b.axes.height-=b.axes.margin.top+b.axes.margin.bottom;b.x.scale.viz.range(g([0,b.axes.width],B.length));t&&b.x2.scale.viz.range(g([0,b.axes.width],t.length));b.y.scale.viz.range(g([0,b.axes.height],J.length));if(M)return b.y2.scale.viz.range(g([0,b.axes.height],M.length))};h=function(b,c){return d3.svg.axis().tickSize(b[c].ticks.size).tickPadding(5).orient(b[c].orient.value).scale(b[c].scale.viz).tickValues(b[c].ticks.values).tickFormat(function(d,f){var g;if(b[c].ticks.hidden)return null;g=b[c].scale.value;
return 0<=b[c].ticks.visible.indexOf(d.constructor===Date?+d:d)?"share"===g?b.format.value(100*d,{key:"share",vars:b,labels:b[c].affixes.value,output:c}):d.constructor===Date?b[c].ticks.format(d):"log"===g?m(d):b.format.value(d,{key:b[c].value,vars:b,labels:b[c].affixes.value,output:c}):null})};m=function(b){var c,d;c=Math.round(Math.log(Math.abs(b))/Math.LN10);d=Math.abs(b).toString().charAt(0);c="10 "+(c+"").split("").map(function(b){return"\u2070\u00b9\u00b2\u00b3\u2074\u2075\u2076\u2077\u2078\u2079"[b]}).join("");
"1"!==d&&(c=d+" x "+c);return 0>b?"-"+c:c}},{"../../../../../core/data/time.coffee":62,"../../../../../core/fetch/value.coffee":67,"../../../../../font/sizes.coffee":101,"../../../../../textwrap/textwrap.coffee":199,"../../../../../util/buckets.coffee":203,"../../../../../util/uniques.coffee":209,"./buffer.coffee":315}],318:[function(b,c,d){var g,f,h;g=b("../../../../../color/mix.coffee");f=b("../../../../../textwrap/textwrap.coffee");h=b("../../../../../object/validate.coffee");c.exports=function(b){var c,
d,p,t,u,n,q,r,w,v,y,A,x,z,C,D,B,F,H,I,G,M,J;if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return null;r={width:b.axes.width,height:b.axes.height,fill:b.axes.background.color,stroke:b.axes.background.stroke.color,"stroke-width":b.axes.background.stroke.width,"shape-rendering":b.axes.background.rendering.value};d={left:"start",center:"middle",right:"end"};t=b.small?[]:[0];n=function(c,d){return c.attr("x1",function(c){return 0===d.indexOf("x")?b.x.scale.viz(c):0}).attr("x2",function(c){return 0===
d.indexOf("x")?b.x.scale.viz(c):b.axes.width}).attr("y1",function(c){return 0===d.indexOf("y")?b.y.scale.viz(c):0}).attr("y2",function(c){return 0===d.indexOf("y")?b.y.scale.viz(c):b.axes.height})};x=function(c,d,f){var h,l;h=f?b[d].grid.color:b[d].ticks.color;l="log"===b[d].scale.value;return c.attr("stroke",function(c){if(0===c)return b[d].axis.color;c.constructor===Date&&(c=+c);return 0<=b[d].ticks.visible.indexOf(c)&&(!l||"1"===Math.abs(c).toString().charAt(0))?h:f&&"transparent"!==b.axes.background.color?
g(h,b.axes.background.color,.4,1):"transparent"!==b.background.value?g(h,b.background.value,.4,1):g(h,"white",.4,1)}).attr("stroke-width",b[d].ticks.width).attr("shape-rendering",b[d].ticks.rendering.value)};v=function(c,d,f){return(d=b[c][0===d?"axis":"ticks"].font[f])&&(d.length||"number"===typeof d)?d:b[c].ticks.font[f]};M=function(c,d){var f;f="log"===b[d].scale.value;return c.attr("font-size",function(b){return v(d,b,"size")+"px"}).attr("stroke","none").attr("fill",function(c){var h;h=v(d,c,
"color");return f&&"1"!==Math.abs(c).toString().charAt(0)?g(h,b.background.value,.4,1):h}).attr("font-family",function(b){return v(d,b,"family").value}).attr("font-weight",function(b){return v(d,b,"weight")}).style("text-transform",function(b){return v(d,b,"transform").value}).style("letter-spacing",function(b){return v(d,b,"spacing")+"px"})};B=function(c,d){var f,g;f=0===d.indexOf("x")?"height":"width";g=0===d.indexOf("x")?"y":"x";return c.attr(g+"1",0).attr(g+"2",b.axes[f]).attr(d+"1",function(b){return b.coords.line}).attr(d+
"2",function(b){return b.coords.line}).attr("stroke",function(c){return c.color||b[d].lines.color}).attr("stroke-width",b[d].lines.width).attr("shape-rendering",b[d].lines.rendering.value).attr("stroke-dasharray",b[d].lines.dasharray.value)};D=function(c,f){var g;g=0===f.indexOf("x")?"y":"x";return c.attr(g,function(b){return b.coords.text[g]+"px"}).attr(f,function(b){return b.coords.text[f]+"px"}).attr("dy",b[f].lines.font.position.value).attr("text-anchor",d[b[f].lines.font.align.value]).attr("transform",
function(b){return b.transform}).attr("font-size",b[f].lines.font.size+"px").attr("fill",function(c){return c.color||b[f].lines.color}).attr("font-family",b[f].lines.font.family.value).attr("font-weight",b[f].lines.font.weight)};q="translate("+b.axes.margin.left+","+b.axes.margin.top+")";F=b.group.selectAll("g#d3plus_graph_plane").data([0]);F.transition().duration(b.draw.timing).attr("transform",q);F.enter().append("g").attr("id","d3plus_graph_plane").attr("transform",q);q=F.selectAll("rect#d3plus_graph_background").data([0]);
q.transition().duration(b.draw.timing).attr(r);q.enter().append("rect").attr("id","d3plus_graph_background").attr("x",0).attr("y",0).attr(r);q=F.selectAll("path#d3plus_graph_mirror").data([0]);q.enter().append("path").attr("id","d3plus_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0);q.transition().duration(b.draw.timing).attr("opacity",function(){return b.axes.mirror.value?1:0}).attr("d",function(){var b,
c;c=r.width;b=r.height;return"M "+c+" "+b+" L 0 "+b+" L "+c+" 0 Z"});G=0!==b.x.ticks.rotate;c=function(c,d){var g;g=c.attr("transform","translate(0,"+("x"===d?b.axes.height:0)+")").call(b[d].axis.svg.scale(b[d].scale.viz)).selectAll("g.tick");g.selectAll("line").attr("y2",function(c){var f;c.constructor===Date&&(c=+c);f=d3.select(this).attr("y2");return 0<=b[d].ticks.visible.indexOf(c)?f:f/2});return g.select("text").style("text-anchor",G&&"x"===d?"end":G?"start":"middle").call(M,d).each(function(c){d3.select(this).attr("dy",
"0px").attr("font-size",function(b){return v(d,b,"size")+"px"});c.constructor===Date&&(c=+c);if(!b[d].ticks.hidden&&0<=b[d].ticks.visible.indexOf(c))return f().container(d3.select(this)).rotate(b[d].ticks.rotate).align(G?"end":"center").valign(G?"middle":"x"===d?"top":"bottom").width(b[d].ticks.maxWidth).height(b[d].ticks.maxHeight).padding(0).x(-b[d].ticks.maxWidth/2).y("x2"===d?-(b[d].ticks.maxHeight+2*b.labels.padding):0).draw()})};z=function(c,d){var f;f=c.attr("transform","translate("+("y2"===
d?b.axes.width:0)+", 0)").call(b[d].axis.svg.scale(b[d].scale.viz)).selectAll("g.tick");f.selectAll("line").attr("y2",function(c){var d;c.constructor===Date&&(c=+c);d=d3.select(this).attr("y2");return 0<=b.x.ticks.visible.indexOf(c)?d:d/2});return f.select("text").call(M,d)};w=["x","x2","y","y2"];q=0;for(A=w.length;q<A;q++)p=w[q],y=0===p.indexOf("x")?c:z,u=t.length&&b[p].value?[0]:[],u=F.selectAll("g#d3plus_graph_"+p+"ticks").data(u),u.transition().duration(b.draw.timing).call(y,p),u.selectAll("line").transition().duration(b.draw.timing).call(x,
p),y=u.enter().append("g").attr("id","d3plus_graph_"+p+"ticks").call(y,p),y.selectAll("path").attr("fill","none").attr("stroke","none"),y.selectAll("line").call(x,p),u.exit().transition().duration(b.data.timing).attr("opacity",0).remove();q=function(c,d){return c.attr("x",0===d.indexOf("x")?b.width.viz/2:-(b.axes.height/2+b.axes.margin.top)).attr("y","x"===d?b.height.viz-b[d].label.height/2-b[d].label.padding:"y2"===d?b.width.viz-b[d].label.height/2-b[d].label.padding:b[d].label.height/2+b[d].label.padding).attr("transform",
0===d.indexOf("y")?"rotate(-90)":null).attr("font-family",b[d].label.font.family.value).attr("font-weight",b[d].label.font.weight).attr("font-size",b[d].label.font.size+"px").attr("fill",b[d].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",b[d].label.font.transform.value).style("letter-spacing",b[d].label.font.spacing+"px")};z=["x","y"];A=0;for(c=z.length;A<c;A++)p=z[A],b[p].grid.value?w=b[p].ticks.value?b[p].ticks.value:b[p].ticks.values:
(w=[],u="x"===p?"y":"x",0<=b[p].ticks.values.indexOf(0)&&b[u].axis.value&&(w=[0])),u=F.selectAll("g#d3plus_graph_"+p+"grid").data([0]),u.enter().append("g").attr("id","d3plus_graph_"+p+"grid"),w=u.selectAll("line").data(w,function(b,c){return b.constructor===Date?b.getTime():b}),w.transition().duration(b.draw.timing).call(n,p).call(x,p,!0),w.enter().append("line").style("opacity",0).call(n,p).call(x,p,!0).transition().duration(b.draw.timing).delay(b.draw.timing/2).style("opacity",1),w.exit().transition().duration(b.draw.timing/
2).style("opacity",0).remove();w=["x","x2","y","y2"];x=0;for(A=w.length;x<A;x++)p=w[x],b[p].value?(n=b[p].label.fetch(b),z=t&&n?[0]:[],c=b.format.affixes.value[b[p].value],n&&!b[p].affixes.value&&c&&(u=b[p].affixes.separator.value,!0===u?u=["[","]"]:!1===u&&(u=["",""]),n+=" "+u[0]+c[0]+" "+c[1]+u[1])):(n="",z=[]),c=b.group.selectAll("text#d3plus_graph_"+p+"label").data(z),c.text(n).transition().duration(b.draw.timing).call(q,p),c.enter().append("text").attr("stroke","none").attr("id","d3plus_graph_"+
p+"label").text(n).call(q,p),c.exit().transition().duration(b.data.timing).attr("opacity",0).remove();x=["x","y","x2","y2"];n=0;for(t=x.length;n<t;n++)if(p=x[n],b[p].value){q=F.selectAll("g#d3plus_graph_"+p+"_userlines").data([0]);q.enter().append("g").attr("id","d3plus_graph_"+p+"_userlines");c=b[p].scale.viz.domain();0===p.indexOf("y")&&(c=c.slice().reverse());A=[];u=[];J=b[p].lines.value||[];y=0;for(z=J.length;y<z;y++)if(C=J[y],w=h(C)?C.position:C,H=p===b.axes.discrete?0<=c.indexOf(w):w>=c[0]&&
w<=c[1])w=h(C)?C:{position:w},w.coords={line:b[p].scale.viz(w.position)},u.push(w),w.text&&(w.axis=p,w.padding=.5*b[p].lines.font.padding.value,w.align=b[p].lines.font.align.value,H=b[p].lines.font.position.text,C="middle"===H?0:2*w.padding,"top"===H&&(C=-C),0===p.indexOf("x")?(H="left"===w.align?b.axes.height:"center"===w.align?b.axes.height/2:0,"left"===w.align&&(H-=2*w.padding),"right"===w.align&&(H+=2*w.padding)):(H="left"===w.align?0:"center"===w.align?b.axes.width/2:b.axes.width,"right"===w.align&&
(H-=2*w.padding),"left"===w.align&&(H+=2*w.padding)),w.coords.text={},w.coords.text[0===p.indexOf("x")?"y":"x"]=H,w.coords.text[p]=b[p].scale.viz(w.position)+C,w.transform=0===p.indexOf("x")?"rotate(-90,"+w.coords.text.x+","+w.coords.text.y+")":null,A.push(w));w=q.selectAll("line.d3plus_graph_"+p+"line").data(u,function(b){return b.position});w.enter().append("line").attr("class","d3plus_graph_"+p+"line").attr("opacity",0).call(B,p);w.transition().duration(b.draw.timing).attr("opacity",1).call(B,
p);w.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();w=q.selectAll("text.d3plus_graph_"+p+"line_text").data(A,function(b){return b.position});w.enter().append("text").attr("class","d3plus_graph_"+p+"line_text").attr("id",function(b){b=b.position+"";b=b.replace("-","neg");b=b.replace(".","p");return"d3plus_graph_"+p+"line_text_"+b}).attr("opacity",0).call(D,p);w.text(function(b){return b.text}).transition().duration(b.draw.timing).attr("opacity",1).call(D,p);w.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove();I=function(c){var d;d=function(b){var c;c=b.position+"";c=c.replace("-","neg");c=c.replace(".","p");return F.select("text#d3plus_graph_"+b.axis+"line_text_"+c).node().getBBox()};return c.attr("x",function(b){return d(b).x-b.padding}).attr("y",function(b){return d(b).y-b.padding}).attr("transform",function(b){return b.transform}).attr("width",function(b){return d(b).width+2*b.padding}).attr("height",function(b){return d(b).height+2*b.padding}).attr("fill","transparent"!==b.axes.background.color?
b.axes.background.color:"white")};A=b[p].lines.font.background.value?A:[];q=q.selectAll("rect.d3plus_graph_"+p+"line_rect").data(A,function(b){return b.position});q.enter().insert("rect","text.d3plus_graph_"+p+"line_text").attr("class","d3plus_graph_"+p+"line_rect").attr("pointer-events","none").attr("opacity",0).call(I);q.transition().delay(b.draw.timing).each("end",function(c){return d3.select(this).transition().duration(b.draw.timing).attr("opacity",1).call(I)});q.exit().transition().duration(b.draw.timing).attr("opacity",
0).remove()}}},{"../../../../../color/mix.coffee":46,"../../../../../object/validate.coffee":171,"../../../../../textwrap/textwrap.coffee":199}],319:[function(b,c,d){var g,f,h;g=b("../../../../core/fetch/value.coffee");f=b("../../../../string/strip.js");h=b("../../../../util/uniques.coffee");c.exports=function(b,c,d){var p,t,u,n,q,r,w;void 0===d?d=b.id.nesting.slice(0,b.depth.value+1):d.constructor!==Array&&(d=[d]);void 0===t&&(t=[]);c||(c=b.data.viz);p=b[b.axes.discrete];n=b[b.axes.opposite];(w=
p.value===b.time.value)?(r=b.data.time.ticks,u=b.time.solo.value.length?"solo":"mute",b.time[u].value.length&&(q=b.time[u].value.slice().map(function(b){b.constructor!==Date&&(b+="",4===b.length&&parseInt(b)+""===b&&(b+="/01/01"),b=new Date(b));return+b}),r=r.filter(function(b){return"solo"===u?0<=q.indexOf(+b):0>q.indexOf(+b)}))):r=p.ticks.values?p.ticks.values:h(c,p.value,g,b);return d3.nest().key(function(c){var h,l,n,p;p="nesting";l=0;for(n=d.length;l<n;l++)h=d[l],h=g(b,c,h),h instanceof Array&&
(h=h.join("_")),p+="_"+f(h);return p}).rollup(function(c){var d,f,l,m,q,t,B,F,H,I;d=h(c,p.value,g,b);d.length&&d[0].constructor===Date&&(d=d.map(Number));if(p.zerofill.value)for(f="log"===p.scale.value?n.scale.viz.domain().every(function(b){return 0>b})?-1:1:0,l=m=0,t=r.length;m<t;l=++m)if(I=r[l],q=w?+I:I,0>d.indexOf(q)){F={d3plus:{}};H=b.id.nesting;q=0;for(B=H.length;q<B;q++)u=H[q],u in c[0]&&(F[u]=c[0][u]);F[p.value]=I;F[n.value]=0;F[n.value]=f;c.splice(l,0,F)}return"string"===typeof c[0][p.value]?
c:c.sort(function(c,d){var f,h;f=g(b,c,p.value);h=g(b,d,p.value);if(f-=h)return f;f=g(b,c,n.value);h=g(b,d,n.value);return f-h})}).entries(c)}},{"../../../../core/fetch/value.coffee":67,"../../../../string/strip.js":174,"../../../../util/uniques.coffee":209}],320:[function(b,c,d){var g;g=b("../../../../core/fetch/value.coffee");c.exports=function(b,c){var d,l,m,p,t,u,n,q,r,w,v,y,A,x,z,C;x=b.axes.stacked||b.axes.opposite;l=b[x].scale.viz(0);y=b[x].scale.value;w="x"===x?"y":"x";n="y"===x?b.axes.margin.top:
b.axes.margin.left;d="share"===y?"expand":"zero";A=d3.layout.stack().values(function(b){return b.values||[b]}).offset(d).x(function(b){return b.d3plus[w]}).y(function(c){return l-b[x].scale.viz(g(b,c,b[x].value))}).out(function(c,d,h){g(b,c,b[x].value);"share"===y?(c.d3plus[x+"0"]=(1-d)*l,c.d3plus[x]=c.d3plus[x+"0"]-h*l):(c.d3plus[x+"0"]=l,b.axes.stacked&&(c.d3plus[x+"0"]-=d),c.d3plus[x]=c.d3plus[x+"0"]-h);c.d3plus[x]+=n;return c.d3plus[x+"0"]+=n});v=[];r=[];m=0;for(t=c.length;m<t;m++)if(d=c[m],C=
g(b,d,b[x].value),C instanceof Array){q=!0;p=0;for(u=C.length;p<u;p++)if(z=C[p],0<=z){q=!1;break}q?r.push(d):v.push(d)}else 0<=C&&v.push(d),0>C&&r.push(d);if(0===v.length||0===r.length)return A(c);v.length&&(v=A(v));r.length&&(r=A(r));return v.concat(r)}},{"../../../../core/fetch/value.coffee":67}],321:[function(b,c,d){var g,f,h,k,l;g=b("../../core/fetch/value.coffee");f=b("./helpers/graph/draw.coffee");h=b("./helpers/graph/nest.coffee");k=b("../../array/sort.coffee");l=b("./helpers/graph/stack.coffee");
b=function(b){var c,d,h,n,q,r,w,v;f(b,{buffer:b.axes.opposite,mouse:!0});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];d=k(b.data.viz,null,null,null,b);h=0;for(q=d.length;h<q;h++)for(c=d[h],w=c.values,n=0,r=w.length;n<r;n++)c=w[n],(v=g(b,c,b.x.value))?(c.d3plus.x2=!1,c.d3plus.x=b.x.scale.viz(v)):(c.d3plus.x2=!0,c.d3plus.x=b.x2.scale.viz(g(b,c,b.x2.value))),c.d3plus.x+=b.axes.margin.left,(v=g(b,c,b.y.value))?(c.d3plus.y2=!1,c.d3plus.y=b.y.scale.viz(v)):(c.d3plus.y2=!0,c.d3plus.y=
b.y2.scale.viz(g(b,c,b.y2.value))),c.d3plus.y+=b.axes.margin.top;return b.axes.stacked?l(b,d):d};b.filter=function(b,c){return h(b,c)};b.requirements=["data","x","y"];b.setup=function(b){var c;b.axes.discrete||(c=b.time.value===b.y.value?"y":"x",b.self[c]({scale:"discrete"}))};b.shapes=["line"];b.tooltip="static";c.exports=b},{"../../array/sort.coffee":34,"../../core/fetch/value.coffee":67,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],322:[function(b,
c,d){var g=b("../../network/smallestGap.coffee"),f=b("../../core/fetch/value.coffee");b=function(b){var c=b.nodes.restricted||b.nodes.value,d=b.edges.restricted||b.edges.value,m=d3.extent(c,function(b){return b.x}),p=d3.extent(c,function(b){return b.y}),t=[1,1];"number"===typeof b.size.value?t=[b.size.value,b.size.value]:b.size.value&&(t=d3.extent(c,function(c){c=f(b,c,b.size.value);return 0===c?null:c}));"undefined"==typeof t[0]&&(t=[1,1]);if("number"===typeof b.size.value)var u=b.size.value,n=b.size.value;
else{var u=g(c,{accessor:function(b){return[b.x,b.y]}}),q=u/2,u=u*(b.size.value?b.nodes.overlap:.4);b.edges.arrows.value&&(u*=.5);t[0]===t[1]?u=n=q:(n=m[1]+1.1*u-(m[0]-1.1*u),q=p[1]+1.1*u-(p[0]-1.1*u),q=b.width.viz/b.height.viz>n/q?b.height.viz/q:b.width.viz/n,n=.25*u,2>n*q&&(n=2/q))}var r=b.size.scale.value.domain(t).range([n,u]);b.zoom.bounds=[[m[0]-1.1*u,p[0]-1.1*u],[m[1]+1.1*u,p[1]+1.1*u]];var w=[],v={};c.forEach(function(c){var d=b.data.viz.filter(function(d){return d[b.id.value]==c[b.id.value]})[0]||
{};d[b.id.value]=c[b.id.value];d.d3plus={};d.d3plus.x=c.x;d.d3plus.y=c.y;var g=f(b,d,b.size.value);d.d3plus.r=g?r(g):r.range()[0];v[d[b.id.value]]={x:d.d3plus.x,y:d.d3plus.y,r:d.d3plus.r};w.push(d)});w.sort(function(b,c){return c.d3plus.r-b.d3plus.r});d.forEach(function(c,d){c.d3plus&&delete c.d3plus.spline;c[b.edges.source].d3plus={};var f=v[c[b.edges.source][b.id.value]];c[b.edges.source].d3plus.r=f.r;c[b.edges.source].d3plus.x=f.x;c[b.edges.source].d3plus.y=f.y;c[b.edges.target].d3plus={};f=v[c[b.edges.target][b.id.value]];
c[b.edges.target].d3plus.r=f.r;c[b.edges.target].d3plus.x=f.x;c[b.edges.target].d3plus.y=f.y});return{nodes:w,edges:d}};b.nesting=!1;b.requirements=["nodes","edges"];b.scale=1.05;b.shapes=["circle","square","donut"];b.tooltip="static";b.zoom=!0;c.exports=b},{"../../core/fetch/value.coffee":67,"../../network/smallestGap.coffee":167}],323:[function(b,c,d){var g,f,h,k,l=[].indexOf||function(b){for(var c=0,d=this.length;c<d;c++)if(c in this&&this[c]===b)return c;return-1};f=b("../../network/shortestPath.coffee");
g=b("../../core/fetch/value.coffee");h=b("../../util/uniques.coffee");k=function(b){var c,d,f,h,q,r,w,v,y,A,x,z,C,D,B,F,H,I,G,M,J;r=[];G={};G[b.focus.value[0]]=0;G[b.focus.value[1]]=0;D={all:[[b.focus.value[0]],[b.focus.value[1]]]};x=k.paths;y=h=0;for(v=x.length;h<v;y=++h)for(w=x[y],r=r.concat(w.edges),c=b.focus.value[0],D[y]=[c],H=w.edges,d=w=0,A=H.length;w<A;d=++w)q=H[d],q[b.edges.source]=b.data.viz.filter(function(c){return q[b.edges.source][b.id.value]===c[b.id.value]})[0],q[b.edges.target]=b.data.viz.filter(function(c){return q[b.edges.target][b.id.value]===
c[b.id.value]})[0],d=q[b.edges.source][b.id.value]===c?"target":"source",f=q[b.edges[d]][b.id.value],void 0===G[f]&&(G[f]=y),D[y].push(f),c=f;h=0;for(y in D)if(w=D[y],"all"!==y){d=v=A=0;for(x=w.length;v<x;d=++v)if(c=w[d],0!==d&&d!==w.length-1&&G[c]===parseFloat(y)){A=1;H=w[d-1];C=w[d+1];F=M=null;J=D.all;f=B=0;for(z=J.length;B<z;f=++B)d=J[f],0<=l.call(d,H)&&(M=f),0<=l.call(d,C)&&(F=f);null!==M&&null===F?M+1===D.all.length-1?D.all.splice(M+1,0,[c]):D.all[M+1].push(c):1===F-M?D.all.splice(F,0,[c]):1<
F-M&&D.all[F-1].push(c)}h+=A}f=Math.floor(b.height.viz/h);w=[];for(d=0;d<h;)0===d%2?w.push(d):w.unshift(d),d++;y=b.size.value&&!b.small?30:0;w=d3.scale.ordinal().domain(w).range(d3.range(f/2-y,b.height.viz+f/2-y,(b.height.viz-f)/(h-1)));d=D.all.length;h=Math.floor(b.width.viz/d);c=d3.scale.linear().domain([0,d-1]).rangeRound([h/2,b.width.viz-h/2]);v=.4*d3.min([h,f-y]);d=d3.extent(b.data.viz,function(c){return g(b,c,b.size.value)||0});B=b.size.scale.value.domain(d).rangeRound([5,v]);z=b.data.viz;A=
0;for(x=z.length;A<x;A++){H=z[A];null==H.d3plus&&(H.d3plus={});M=D.all;f=F=0;for(C=M.length;F<C;f=++F)if(d=M[f],I=H[b.id.value],0<=l.call(d,I))H.d3plus.x=c(f);H.d3plus.y=w(G[H[b.id.value]]);b.size.value?(d=g(b,H,b.size.value),H.d3plus.r=d?B(d):5):H.d3plus.r=v;H.d3plus.r<.1*h&&!b.small?H.d3plus.label={x:0,y:H.d3plus.r+2*b.labels.padding,w:.6*h,h:y+v-H.d3plus.r,resize:!1}:delete H.d3plus.label}v=k.paths;y=I=0;for(D=v.length;I<D;y=++I)for(w=v[y],c=b.focus.value[0],x=w.edges,d=w=0,y=x.length;w<y;d=++w)q=
x[d],d=q[b.edges.source][b.id.value]===c?"target":"source",A="target"===d?"source":"target",f=q[b.edges[d]][b.id.value],G[c]!==G[f]?(q.d3plus={spline:!0},null==(c=q[b.edges.source]).d3plus&&(c.d3plus={}),null==(c=q[b.edges.source].d3plus).edges&&(c.edges={}),null==(c=q[b.edges.target]).d3plus&&(c.d3plus={}),null==(c=q[b.edges.target].d3plus).edges&&(c.edges={}),c=q[d].d3plus.x-q[A].d3plus.x,q[A].d3plus.edges[q[d][b.id.value]]={angle:Math.PI,radius:h/2},q[d].d3plus.edges[q[A][b.id.value]]={angle:0,
radius:h/2,offset:c-h}):delete q.d3plus,c=f;return{nodes:b.data.viz,edges:r}};k.filter=function(b,c){var d,l,n,q,r,w,v,y,A,x;k.paths=f(b.edges.filtered||b.edges.value,b.focus.value[0],{target:b.focus.value[1],distance:b.edges.size.value||void 0,nodeid:b.id.value,startpoint:b.edges.source,endpoint:b.edges.target,K:b.edges.limit.value||5});k.nodes=[];d=[];y=k.paths;r=0;for(w=y.length;r<w;r++)for(l=y[r],A=l.edges,l=0,v=A.length;l<v;l++)n=A[l],x=n[b.edges.source],n=n[b.edges.target],0>d.indexOf(x[b.id.value])&&
(k.nodes.push(x),d.push(x[b.id.value])),0>d.indexOf(n[b.id.value])&&(k.nodes.push(n),d.push(n[b.id.value]));d=h(k.nodes,b.id.value,g,b);y=[];r=0;for(w=d.length;r<w;r++)q=d[r],l=c.filter(function(c){return c[b.id.value]===q}),l[0]?y.push(l[0]):(l={d3plus:{}},l[b.id.value]=q,y.push(l));return y};k.nesting=!1;k.requirements=[function(b){return{status:2===b.focus.value.length,text:b.format.locale.value.method.focus+" x 2"}},"edges"];k.scale=1;k.shapes=["circle","square","donut"];k.tooltip="static";c.exports=
k},{"../../core/fetch/value.coffee":67,"../../network/shortestPath.coffee":166,"../../util/uniques.coffee":209}],324:[function(b,c,d){var g,f;g=b("../../array/comparator.coffee");d=b("../../core/data/threshold.js");f=b("../../core/data/group.coffee");b=function(b){var c,d,m,p,t,u,n;d=d3.layout.pie().value(function(b){return b.value}).sort(function(c,d){return b.order.value?g(c.d3plus,d.d3plus,[b.order.value],b.order.sort.value,[],b):1<b.id.nesting.length?g(c.d3plus,d.d3plus,b.id.nesting.concat([b.size.value]),
void 0,[],b):g(c.d3plus,d.d3plus,[b.size.value],"desc",[],b)});c=f(b,b.data.viz,[]);t=d(c);n=[];u=d3.min([b.width.viz,b.height.viz])/2-2*b.labels.padding;d=0;for(p=t.length;d<p;d++)c=t[d],m=c.data.d3plus,m.d3plus.startAngle=c.startAngle,m.d3plus.endAngle=c.endAngle,m.d3plus.r=u,m.d3plus.x=b.width.viz/2,m.d3plus.y=b.height.viz/2,m.d3plus.share=(c.endAngle-c.startAngle)/(2*Math.PI),n.push(m);return n};b.filter=d;b.requirements=["data","size"];b.shapes=["arc"];b.threshold=function(b){return 1600/(b.width.viz*
b.height.viz)};c.exports=b},{"../../array/comparator.coffee":32,"../../core/data/group.coffee":57,"../../core/data/threshold.js":61}],325:[function(b,c,d){var g,f,h,k,l,m,p;b("../../array/comparator.coffee");b("../../array/sort.coffee");b("../../core/data/threshold.js");f=b("../../core/fetch/text.js");h=b("../../core/fetch/value.coffee");k=b("../../font/sizes.coffee");l=b("../../geom/offset.coffee");m=b("../../textwrap/textwrap.coffee");g=b("../../util/buckets.coffee");p=b("../../util/uniques.coffee");
b=function(b){var c,d,q,r,w,v,y,A,x,z,C,D,B,F,H,I,G,M,J,K,L,N;x=b.data.viz;J=b.depth.value+1;K=b.id.nesting[J];y=function(){var b,c,d;d=[];b=0;for(c=x.length;b<c;b++)A=x[b],d.push(A[K]);return d}();r=function(){var c,d,f;f=[];c=0;for(d=x.length;c<d;c++)A=x[c],f.push(p(x,K,h,b,J));return f}();r=p(d3.merge(r)).length;r=2*Math.PI/r;G=d3.min([b.width.viz,b.height.viz])/2;H=B=0;z=function(){var c,d,g;g=[];c=0;for(d=y.length;c<d;c++)v=y[c],g.push(f(b,v,J)[0]);return g}();z=p(d3.merge(z));b.labels.value&&
(c=l(Math.PI/2,G),C=l(r+Math.PI/2,G),B=c.x-C.x-2*b.labels.padding,N={fill:b.x.ticks.font.color,"font-family":b.x.ticks.font.family.value,"font-weight":b.x.ticks.font.weight,"font-size":b.x.ticks.font.size+"px"},c=k(z,N,{mod:function(c){return m().container(d3.select(c)).width(b.height.viz/8).height(B).draw()}}),H=d3.max(c,function(b){return b.width}),G=G-H-2*b.labels.padding);c=function(){var c,d,f;f=[];c=0;for(d=y.length;c<d;c++)v=y[c],f.push(function(){var c,d,f;f=[];c=0;for(d=v.length;c<d;c++)A=
v[c],f.push(h(b,A,b.size.value));return f}());return f}();c=d3.max(d3.merge(c));C=d3.scale.linear().domain([0,c]).range([0,G]);c=function(){var c,d,f;f=[];c=0;for(d=y.length;c<d;c++)v=y[c],f.push(h(b,v,K));return f}();c=p(d3.merge(c));q=d3.scale.ordinal().domain(c).range(d3.range(0,c.length));w=0;for(F=x.length;w<F;w++)for(A=x[w],A.d3plus.x=b.width.viz/2+b.margin.top,A.d3plus.y=b.height.viz/2+b.margin.left,M=A[K],c=D=0,I=M.length;D<I;c=++D)c=M[c],c.d3plus||(c.d3plus={}),c.d3plus.r=C(h(b,c,b.size.value)),
c.d3plus.a=q(h(b,c,K))*r;C=1;D=[10,5,4,2];w=0;for(q=D.length;w<q;w++)if(c=D[w],20<=G/c){C=c;break}c=g([G/C,G],C-1).reverse();c.length===C&&c.shift();C=b.group.selectAll(".d3plus_radar_rings").data(c,function(b,c){return c});c=function(c){return c.attr("fill",function(c,d){return 0===d?b.axes.background.color:"transparent"}).attr("cx",b.width.viz/2+b.margin.top).attr("cy",b.height.viz/2+b.margin.left).attr("stroke",b.x.grid.value?b.x.grid.color:"transparent")};C.enter().append("circle").attr("class",
"d3plus_radar_rings").call(c).attr("r",0);C.transition().duration(b.draw.timing).call(c).attr("r",function(b){return b});C.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();F=d3.scale.ordinal().domain(z).range(d3.range(0,z.length));C=[];M=0;for(I=z.length;M<I;M++)D=z[M],d=r*F(D)-Math.PI/2,c=180/Math.PI*d,-90>c||90<c?(c-=180,w=-(G+2*b.labels.padding+H),q="end"):(w=G+2*b.labels.padding,q="start"),L=G,b.labels.value&&(L+=b.labels.padding),d=l(d,L),[0,Math.PI].indexOf(r*F(D)),C.push({text:D,
angle:c,x:w,anchor:q,offset:d});r=b.group.selectAll("g.d3plus_radar_label_group").data([0]);r.enter().append("g").attr("class","d3plus_radar_label_group").attr("transform","translate("+b.width.viz/2+","+b.height.viz/2+")");r.transition().duration(b.draw.timing).attr("transform","translate("+b.width.viz/2+","+b.height.viz/2+")");z=r.selectAll(".d3plus_radar_labels").data(b.labels.value?C:[],function(b,c){return c});r=function(b){return b.attr(N).each(function(b,c){return m().container(d3.select(this)).height(B).width(H).align(b.anchor).text(b.text).padding(0).valign("middle").x(b.x).y(-B/
2).draw()}).attr("transform",function(b){var c;c=d3.select(this).attr("transform")||"";c.length&&(c=c.split(")").slice(-3).join(")"));return"rotate("+b.angle+")"+c})};z.call(r);z.enter().append("text").attr("class","d3plus_radar_labels").attr("opacity",0).call(r).transition().duration(b.draw.timing).attr("opacity",1);z.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();r=b.group.selectAll(".d3plus_radar_lines").data(C,function(b,c){return c});z=function(c){return c.attr("stroke",
b.x.grid.color).attr("x1",b.width.viz/2+b.margin.left).attr("y1",b.height.viz/2+b.margin.top)};r.enter().append("line").attr("class","d3plus_radar_lines").call(z).attr("x2",b.width.viz/2+b.margin.left).attr("y2",b.height.viz/2+b.margin.top);r.transition().duration(b.draw.timing).call(z).attr("x2",function(c){return b.width.viz/2+b.margin.left+c.offset.x}).attr("y2",function(c){return b.height.viz/2+b.margin.top+c.offset.y});r.exit().transition().duration(b.draw.timing).attr("opacity",0).remove();
b.mouse.viz={click:!1};return x};b.requirements=["data","size"];b.shapes=["radial"];c.exports=b},{"../../array/comparator.coffee":32,"../../array/sort.coffee":34,"../../core/data/threshold.js":61,"../../core/fetch/text.js":66,"../../core/fetch/value.coffee":67,"../../font/sizes.coffee":101,"../../geom/offset.coffee":160,"../../textwrap/textwrap.coffee":199,"../../util/buckets.coffee":203,"../../util/uniques.coffee":209}],326:[function(b,c,d){var g=b("../../array/sort.coffee"),f=b("../../client/pointer.coffee"),
h=b("../../core/fetch/value.coffee"),k=b("../../core/fetch/color.coffee"),l=b("../../color/legible.coffee"),m=b("../../tooltip/remove.coffee"),p=b("../../network/smallestGap.coffee"),t=b("../../color/text.coffee"),u=b("../../util/uniques.coffee");b=function(b){var c=d3.min([b.height.viz,b.width.viz])/2,d=b.small||!b.labels.value?(c-2*b.labels.padding)/2:c/3,w=b.small||!b.labels.value?1.4*d:d,v=2*d,y=[],A=[],x=b.data.viz.filter(function(c){return c[b.id.value]===b.focus.value[0]})[0];x||(x={d3plus:{}},
x[b.id.value]=b.focus.value[0]);x.d3plus.x=b.width.viz/2;x.d3plus.y=b.height.viz/2;x.d3plus.r=.65*w;var z=[],C=[b.focus.value[0]];b.edges.connections(b.focus.value[0],b.id.value).forEach(function(c){var d=c[b.edges.source][b.id.value]==b.focus.value[0]?c[b.edges.target]:c[b.edges.source],f=b.data.viz.filter(function(c){return c[b.id.value]===d[b.id.value]})[0];f||(f={d3plus:{}},f[b.id.value]=d[b.id.value]);f.d3plus.edges=b.edges.connections(f[b.id.value],b.id.value).filter(function(c){return c[b.edges.source][b.id.value]!=
b.focus.value[0]&&c[b.edges.target][b.id.value]!=b.focus.value[0]});f.d3plus.edge=c;C.push(f[b.id.value]);z.push(f)});var D=b.order.value||b.color.value||b.size.value||b.id.value;z.sort(function(c,d){var f=c.d3plus.edges.length-d.d3plus.edges.length;return f?f:g([c,d],D,b.order.sort.value,b.color.value||[],b)});"number"==typeof b.edges.limit.value?z=z.slice(0,b.edges.limit.value):"function"==typeof b.edges.limit.value&&(z=b.edges.limit.value(z));var B=[],F=0;z.forEach(function(c){var d=c[b.id.value];
c.d3plus.edges=c.d3plus.edges.filter(function(c){var f=c[b.edges.source][b.id.value];c=c[b.edges.target][b.id.value];return 0>C.indexOf(f)&&c==d||0>C.indexOf(c)&&f==d});F+=c.d3plus.edges.length||1;c.d3plus.edges.forEach(function(c){var f=c[b.edges.source];c=c[b.edges.target];C.push((c[b.id.value]==d?f:c)[b.id.value])})});g(z,D,b.order.sort.value,b.color.value||[],b);var H=0,I=2*Math.PI;z.forEach(function(c,d){var f=c.d3plus.edges.length||1,h=I/F*f;0==d&&(H-=h/2);var k=H+h/2,k=k-I/4;c.d3plus.radians=
k;c.d3plus.x=b.width.viz/2+w*Math.cos(k);c.d3plus.y=b.height.viz/2+w*Math.sin(k);H+=h;c.d3plus.edges.sort(function(d,f){d=d[b.edges.source][b.id.value]==c[b.id.value]?d[b.edges.target]:d[b.edges.source];f=f[b.edges.source][b.id.value]==c[b.id.value]?f[b.edges.target]:f[b.edges.source];return g([d,f],D,b.order.sort.value,b.color.value||[],b)});c.d3plus.edges.forEach(function(d,g){var h=d[b.edges.source][b.id.value]==c[b.id.value]?d[b.edges.target]:d[b.edges.source],l=I/F,m=b.data.viz.filter(function(c){return c[b.id.value]===
h[b.id.value]})[0];m||(m={d3plus:{}},m[b.id.value]=h[b.id.value]);a=k-l*f/2+l/2+l*g;m.d3plus.radians=a;m.d3plus.x=b.width.viz/2+v*Math.cos(a);m.d3plus.y=b.height.viz/2+v*Math.sin(a);B.push(m)})});var G=p(z,{accessor:function(b){return[b.d3plus.x,b.d3plus.y]}}),M=p(B,{accessor:function(b){return[b.d3plus.x,b.d3plus.y]}});G||(G=d/2);M||(M=d/4);var J=8>G/2-4?d3.min([G/2,8]):G/2-4,K=4>M/2-4?d3.min([M/2,4]):M/2-4;K>d/10&&(K=d/10);K>J&&10<K&&(K=.75*J);J>1.5*K&&(J=1.5*K);var J=Math.floor(J),K=Math.floor(K),
L=u(z,b.id.value,h,b),L=L.concat(u(B,b.id.value,h,b));L.push(b.focus.value[0]);var N=b.data.viz.filter(function(c){return 0<=L.indexOf(c[b.id.value])});if(b.size.value){var Q=d3.extent(N,function(c){return h(b,c,b.size.value)});Q[0]==Q[1]&&(Q[0]=0);c=d3.scale.linear().domain(Q).rangeRound([3,d3.min([J,K])]);J=h(b,x,b.size.value);x.d3plus.r=c(J)}else c=d3.scale.linear().domain([1,2]).rangeRound([J,K]),b.edges.label&&(x.d3plus.r=1.5*c(1));B.forEach(function(d){d.d3plus.ring=2;var f=b.size.value?h(b,
d,b.size.value):2;d.d3plus.r=c(f)});z.forEach(function(d){d.d3plus.ring=1;var f=b.size.value?h(b,d,b.size.value):1;d.d3plus.r=c(f)});A=[x].concat(z).concat(B);z.forEach(function(c,f){var g=c.d3plus.edge;[b.edges.source,b.edges.target].forEach(function(c){g[c]=A.filter(function(d){return d[b.id.value]==g[c][b.id.value]})[0]});delete g.d3plus;y.push(g);b.edges.connections(c[b.id.value],b.id.value).forEach(function(f){var g=f[b.edges.source][b.id.value]==c[b.id.value]?f[b.edges.target]:f[b.edges.source];
if(g[b.id.value]!=x[b.id.value]){var h=B.filter(function(c){return c[b.id.value]==g[b.id.value]})[0];h||(h=z.filter(function(c){return c[b.id.value]==g[b.id.value]})[0]);h&&(f.d3plus={spline:!0,translate:{x:b.width.viz/2,y:b.height.viz/2}},[b.edges.source,b.edges.target].forEach(function(g,k){f[g]=A.filter(function(c){return c[b.id.value]==f[g][b.id.value]})[0];void 0===f[g].d3plus.edges&&(f[g].d3plus.edges={});f[g].d3plus.edges[0===k?f[b.edges.target][b.id.value]:f[b.edges.source][b.id.value]]=f[g][b.id.value]==
c[b.id.value]?{angle:c.d3plus.radians+Math.PI,radius:d/2}:{angle:h.d3plus.radians,radius:d/2}}),y.push(f))}})});var S=!1;b.background.value&&0>["transparent","none"].indexOf(b.background.value)&&.5>d3.hsl(b.background.value).l&&(S=t(b.background.value));A.forEach(function(c){if(!b.small&&b.labels.value)if(c[b.id.value]!=b.focus.value[0]){c.d3plus.rotate=180/Math.PI*c.d3plus.radians;var f=c.d3plus.rotate,g=d-3*b.labels.padding-c.d3plus.r;if(-90>f||90<f)var f=f-180,h=-(c.d3plus.r+g/2+b.labels.padding),
m="end";else h=c.d3plus.r+g/2+b.labels.padding,m="start";var p=0<=z.indexOf(c)?!0:!1,q=1==c.d3plus.ring?G:M;c.d3plus.label={x:h,y:0,w:g,h:q,angle:f,anchor:m,valign:"center",color:S||l(k(b,c)),resize:[8,b.labels.font.size],background:p,mouse:!0}}else b.size.value||b.edges.label?(q=w-2*c.d3plus.r-2*b.labels.padding,c.d3plus.label={x:0,y:c.d3plus.r+q/2,w:w,h:q,color:S||l(k(b,c)),resize:[10,40],background:!0,mouse:!0}):(delete c.d3plus.rotate,delete c.d3plus.label);else delete c.d3plus.rotate,delete c.d3plus.label});
b.mouse.viz={};b.mouse.viz[f.click]=function(c){if(c[b.id.value]!=b.focus.value[0]){m(b.type.value);var d=b.focus.value[0];b.history.states.push(function(){b.self.focus(d).draw()});b.self.focus(c[b.id.value]).draw()}};return{edges:y,nodes:A,data:N}};b.filter=function(b,c){var d=b.edges.connections(b.focus.value[0],b.id.value,!0),f=[];d.forEach(function(c){f=f.concat(b.edges.connections(c[b.id.value],b.id.value,!0))});var d=d.concat(f),g=[];u(d,b.id.value,h,b).forEach(function(d){var f=c.filter(function(c){return c[b.id.value]==
d})[0];f||(f={d3plus:{}},f[b.id.value]=d);g.push(f)});return g};b.nesting=!1;b.scale=1;b.shapes=["circle","square","donut"];b.requirements=["edges","focus"];b.tooltip="static";c.exports=b},{"../../array/sort.coffee":34,"../../client/pointer.coffee":38,"../../color/legible.coffee":44,"../../color/text.coffee":50,"../../core/fetch/color.coffee":63,"../../core/fetch/value.coffee":67,"../../network/smallestGap.coffee":167,"../../tooltip/remove.coffee":202,"../../util/uniques.coffee":209}],327:[function(b,
c,d){var g,f,h;g=b("./sankey.js");f=b("../../client/pointer.coffee");h=b("../../tooltip/remove.coffee");b("../../util/uniques.coffee");b=function(b){var c,d,p,t,u,n,q,r,w,v,y;p=b.focus.value[0];w=2*b.data.stroke.width;y=b.size.value.constructor===Number?b.size.value:20;d=b.edges.connections(p,b.id.value).filter(function(c){return c[b.edges.source][b.id.value]!==p||c[b.edges.target][b.id.value]!==p});r=[];v=[];d=d.map(function(c){var d,f;c[b.edges.target][b.id.value]===p?(d={id:"left_"+c[b.edges.source][b.id.value],
dupe:"left",data:c[b.edges.source]},f=c[b.edges.target]):(d=c[b.edges.source],f={id:"right_"+c[b.edges.target][b.id.value],dupe:"right",data:c[b.edges.target]});0>v.indexOf(d.id)&&r.push(d);0>v.indexOf(f.id)&&r.push(f);v.push(d.id);v.push(f.id);return{source:d,target:f,value:c[b.edges.strength.value]||1}});u=g().nodeWidth(y).nodePadding(b.data.padding.value).size([b.width.viz-2*w,b.height.viz-2*w]).nodes(r).links(d).layout(2);y=[];t=0;for(n=r.length;t<n;t++)q=r[t],c=q.data||q,c={id:c[b.id.value]},
c.d3plus={x:q.x+q.dx/2+w,y:q.y+q.dy/2+w,width:q.dx,height:q.dy,suffix:q.dupe},y.push(c);b.edges.path=u.link();t=0;for(u=d.length;t<u;t++)c=d[t],c.d3plus={x:w,y:w};b.mouse.viz={};b.mouse.viz[f.click]=function(c){var d;if(c[b.id.value]!==b.focus.value[0])return h(b.type.value),d=b.focus.value[0],b.history.states.push(function(){return b.self.focus(d).draw()}),b.self.focus(c[b.id.value]).draw()};return{nodes:y,edges:d}};b.requirements=["edges","focus","nodes"];b.shapes=["square"];c.exports=b},{"../../client/pointer.coffee":38,
"../../tooltip/remove.coffee":202,"../../util/uniques.coffee":209,"./sankey.js":328}],328:[function(b,c,d){c.exports=function(){function b(){v.forEach(function(b){b.sourceLinks=[];b.targetLinks=[]});y.forEach(function(b){var c=b.source,d=b.target;"number"===typeof c&&(c=b.source=v[b.source]);"number"===typeof d&&(d=b.target=v[b.target]);c.sourceLinks.push(b);d.targetLinks.push(b)})}function c(){v.forEach(function(b){b.value=Math.max(d3.sum(b.sourceLinks,u),d3.sum(b.targetLinks,u))})}function d(){for(var b=
v,c,f=0;b.length;)c=[],b.forEach(function(b){b.x=f;b.dx=q;b.sourceLinks.forEach(function(b){0>c.indexOf(b.target)&&c.push(b.target)})}),b=c,++f;k(f);l((w[0]-q)/(f-1))}function k(b){v.forEach(function(c){c.sourceLinks.length||(c.x=b-1)})}function l(b){v.forEach(function(c){c.x*=b})}function m(b){function c(b){function d(b){return t(b.source)*b.value}h.forEach(function(c,f){c.forEach(function(c){if(c.targetLinks.length){var f=d3.sum(c.targetLinks,d)/d3.sum(c.targetLinks,u);c.y+=(f-t(c))*b}})})}function d(b){function c(b){return t(b.target)*
b.value}h.slice().reverse().forEach(function(d){d.forEach(function(d){if(d.sourceLinks.length){var f=d3.sum(d.sourceLinks,c)/d3.sum(d.sourceLinks,u);d.y+=(f-t(d))*b}})})}function f(){h.forEach(function(b){var c,d;d=0;var f=b.length,h;b.sort(g);for(h=0;h<f;++h)c=b[h],d-=c.y,0<d&&(c.y+=d),d=c.y+c.dy+r;d=d-r-w[1];if(0<d)for(d=c.y-=d,h=f-2;0<=h;--h)c=b[h],d=c.y+c.dy+r-d,0<d&&(c.y-=d),d=c.y})}function g(b,c){return b.y-c.y}var h=d3.nest().key(function(b){return b.x}).sortKeys(d3.ascending).entries(v).map(function(b){return b.values});
(function(){var b=d3.min(h,function(b){return(w[1]-(b.length-1)*r)/d3.sum(b,u)});h.forEach(function(c){c.forEach(function(c,d){c.y=d;c.dy=c.value*b})});y.forEach(function(c){c.dy=c.value*b})})();f();for(var k=1;0<b;--b)d(k*=.99),f(),c(k),f()}function p(){function b(c,d){return c.source.y-d.source.y}function c(b,d){return b.target.y-d.target.y}v.forEach(function(d){d.sourceLinks.sort(c);d.targetLinks.sort(b)});v.forEach(function(b){var c=0,d=0;b.sourceLinks.forEach(function(b){b.sy=c;c+=b.dy});b.targetLinks.forEach(function(b){b.ty=
d;d+=b.dy})})}function t(b){return b.y+b.dy/2}function u(b){return b.value}var n={},q=24,r=8,w=[1,1],v=[],y=[];n.nodeWidth=function(b){if(!arguments.length)return q;q=+b;return n};n.nodePadding=function(b){if(!arguments.length)return r;r=+b;return n};n.nodes=function(b){if(!arguments.length)return v;v=b;return n};n.links=function(b){if(!arguments.length)return y;y=b;return n};n.size=function(b){if(!arguments.length)return w;w=b;return n};n.layout=function(k){b();c();d();m(k);p();return n};n.relayout=
function(){p();return n};n.link=function(){function b(d){var f=d.source.x+d.source.dx,g=d.target.x,h=d3.interpolateNumber(f,g),k=h(c),h=h(1-c),l=d.source.y+d.sy+d.dy/2;d=d.target.y+d.ty+d.dy/2;return"M"+f+","+l+"C"+k+","+l+" "+h+","+d+" "+g+","+d}var c=.5;b.curvature=function(d){if(!arguments.length)return c;c=+d;return b};return b};return n}},{}],329:[function(b,c,d){var g,f,h,k;g=b("../../core/fetch/value.coffee");f=b("./helpers/graph/draw.coffee");b("../../core/console/print.coffee");h=b("../../array/sort.coffee");
k=b("./helpers/graph/dataTicks.coffee");b=function(b){var c,d,t,u;f(b,{buffer:"size",mouse:!0});if(0<=b.x.domain.viz.concat(b.y.domain.viz).indexOf(void 0))return[];u=b.data.viz;d=0;for(t=u.length;d<t;d++)c=u[d],c.d3plus.x=b.x.scale.viz(g(b,c,b.x.value)),c.d3plus.x+=b.axes.margin.left,c.d3plus.y=b.y.scale.viz(g(b,c,b.y.value)),c.d3plus.y+=b.axes.margin.top,c.d3plus.r="number"!==typeof b.size.value&&b.size.value?b.axes.scale(g(b,c,b.size.value)):b.axes.scale(0);k(b);return h(b.data.viz,b.order.value||
b.size.value||b.id.value,"desc"===b.order.sort.value?"asc":"desc",b.color.value||[],b)};b.fill=!0;b.requirements=["data","x","y"];b.scale=1.1;b.setup=function(b){if(b.time.value&&!b.axes.discrete&&(b.time.value===b.x.value&&b.self.x({scale:"discrete"}),b.time.value===b.y.value))return b.self.y({scale:"discrete"})};b.shapes=["circle","square","donut"];b.tooltip="static";c.exports=b},{"../../array/sort.coffee":34,"../../core/console/print.coffee":52,"../../core/fetch/value.coffee":67,"./helpers/graph/dataTicks.coffee":312,
"./helpers/graph/draw.coffee":313}],330:[function(b,c,d){var g=b("../../core/fetch/value.coffee"),f=b("../../util/uniques.coffee"),h=b("../../util/copy.coffee"),k=b("../../color/random.coffee");b=function(b){var c=f(b.data.viz,b.id.value,g,b),d=f(b.cols.value);0>d.indexOf("label")&&b.cols.index.value&&d.unshift("label");var t=b.height.viz/(c.length+1),u=b.width.viz/d.length;b.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",b.height.viz).attr("width",
b.width.viz).style("fill",b.color.missing);c=b.group.selectAll("line.horiz").data(b.data.viz);c.enter().append("line").attr("class","horiz");c.attr("x1",0).attr("y1",function(b,c){return t*c+t}).attr("x2",b.width.viz).attr("y2",function(b,c){return t*c+t}).style("fill","#fff").style("stroke","#fff");c.exit().remove();c=b.group.selectAll("line.vert").data(d);c.enter().append("line").attr("class","vert");c.attr("x1",function(b,c){return u*c+u}).attr("y1",0).attr("x2",function(b,c){return u*c+u}).attr("y2",
b.height.viz).style("fill","#fff").style("stroke","#fff");c.exit().remove();var n=[],q={};d.forEach(function(c,d){var f={d3plus:{x:u*d+u/2,y:t/2,width:u,height:t,id:"d3p_header_"+c.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:b.format.value(c)}};c==b.id.value&&(f.d3plus.color="#fff");"label"==c&&(f.d3plus.label=!1,f.d3plus.color="#fff",f.d3plus.stroke="#fff");n.push(f);"number"==b.data.keys[c]?(f=d3.extent(b.data.viz,function(b){return b[c]}),f[0]==f[1]&&(f=[f[0]-1,f[1]]),q[c]=d3.scale.linear().domain(f).range([b.color.missing,
k(c)])):"boolean"==b.data.keys[c]&&(q[c]=function(d){return d?k(c):b.color.missing})});b.data.viz.forEach(function(c,f){f+=1;d.forEach(function(d,g){var k=h(c);k.d3plus.id="d3p_"+k[b.id.value].toString().replace(/ /g,"_")+"_"+d;k.d3plus.x=u*g+u/2;k.d3plus.y=t*f+t/2;k.d3plus.width=u;k.d3plus.height=t;"label"==d&&(k.d3plus.shape="square",k.d3plus.color="#fff",n.push(k));0<=d3.keys(c).indexOf(d)&&d in c&&(q[d]&&(k.d3plus.color=q[d](k[d])),k.d3plus.text=b.format.value(k[d]),"boolean"==b.data.keys[d]?
k.d3plus.label=!1:"string"==b.data.keys[d]&&(k.d3plus.color=b.color.missing,k.d3plus.stroke="#fff",k.d3plus.shape="square"),n.push(k))})});return n};b.shapes="check cross diamond square triangle triangle_up triangle_down".split(" ");b.requirements=["data","cols"];c.exports=b},{"../../color/random.coffee":47,"../../core/fetch/value.coffee":67,"../../util/copy.coffee":206,"../../util/uniques.coffee":209}],331:[function(b,c,d){var g,f;d=b("../../core/data/threshold.js");g=b("../../core/data/group.coffee");
f=b("../../object/merge.coffee");b=function(b){var c,d,m,p,t;c=g(b,b.data.viz);c=d3.layout.treemap().mode(b.type.mode.value).round(!0).size([b.width.viz,b.height.viz]).children(function(b){return b.values}).padding(b.data.padding.value).sort(function(b,c){var d;d=b.value-c.value;return 0===d?b.id<c.id:d}).nodes({name:"root",values:c}).filter(function(b){return!b.values&&b.area});if(c.length){for(t=c[0];t.parent;)t=t.parent;p=[];d=0;for(m=c.length;d<m;d++)b=c[d],b.d3plus.d3plus=f(b.d3plus.d3plus,{x:b.x+
b.dx/2,y:b.y+b.dy/2,width:b.dx,height:b.dy,share:b.value/t.value}),p.push(b.d3plus)}return p};b.filter=d;b.modes=["squarify","slice","dice","slice-dice"];b.requirements=["data","size"];b.shapes=["square"];b.threshold=function(b){return 1600/(b.width.viz*b.height.viz)};c.exports=b},{"../../core/data/group.coffee":57,"../../core/data/threshold.js":61,"../../object/merge.coffee":170}],332:[function(b,c,d){var g,f,h,k,l,m;g=b("../core/methods/attach.coffee");f=b("./methods/helpers/axis.coffee");k=b("./helpers/ui/message.js");
l=b("./helpers/drawSteps.js");m=b("../core/console/print.coffee");h=b("./helpers/container.coffee");b("../object/validate.coffee");c.exports=function(){var c;c={g:{apps:{}},types:{area:b("./types/area.coffee"),bar:b("./types/bar.coffee"),bubbles:b("./types/bubbles.coffee"),box:b("./types/box.coffee"),chart:b("./types/deprecated/chart.coffee"),geo_map:b("./types/geo_map.coffee"),line:b("./types/line.coffee"),network:b("./types/network.js"),paths:b("./types/paths.coffee"),pie:b("./types/pie.coffee"),
radar:b("./types/radar.coffee"),rings:b("./types/rings.js"),sankey:b("./types/sankey.coffee"),scatter:b("./types/scatter.coffee"),stacked:b("./types/area.coffee"),table:b("./types/table.js"),tree_map:b("./types/tree_map.coffee")},self:function(b){b.each(function(){var b,d,f,g,t,v,y;c.draw.frozen=!0;c.error.internal=null;"timing"in c.draw||(c.draw.timing=c.timing.transitions);c.error.value&&(c.draw.timing=0);h(c);v=c.width.value<=c.width.small;t=c.height.value<=c.height.small;c.small=v||t;c.width.viz=
c.width.value;c.height.viz=c.height.value;b=!1;d=function(){y.length?g():c.dev.value&&(m.groupEnd(),m.timeEnd("total draw time"),m.log("\n"))};f=function(b,f){f=f||"function";if(b[f]instanceof Array)b[f].forEach(function(b){b(c,d)});else if("function"===typeof b[f])b[f](c,d);b.wait||d()};g=function(){var g,h,l;l=y.shift();h=c.g.message&&b===l.message;g="check"in l?l.check:!0;"function"===typeof g&&(g=g(c));g?h?f(l):(c.dev.value&&(!1!==b&&m.groupEnd(),m.group(l.message)),"string"===typeof c.messages.value?
g=b=c.messages.value:(b=l.message,g=c.format.value(l.message)),c.draw.update?(k(c,g),c.error.value?f(l):setTimeout(function(){return f(l)},10)):f(l)):"otherwise"in l?c.error.value?f(l,"otherwise"):setTimeout(function(){return f(l,"otherwise")},10):d()};c.messages.style.backup=c.group&&"1"===c.group.attr("opacity")?"small":"large";y=l(c);g()});return c.self}};g(c,{active:b("./methods/active.coffee"),aggs:b("./methods/aggs.coffee"),attrs:b("./methods/attrs.coffee"),axes:b("./methods/axes.coffee"),background:b("./methods/background.coffee"),
"class":b("./methods/class.coffee"),color:b("./methods/color.coffee"),cols:b("./methods/cols.js"),config:b("./methods/config.coffee"),container:b("./methods/container.coffee"),coords:b("./methods/coords.coffee"),csv:b("./methods/csv.coffee"),data:b("./methods/data.coffee"),depth:b("./methods/depth.coffee"),descs:b("./methods/descs.coffee"),dev:b("./methods/dev.coffee"),draw:b("./methods/draw.js"),edges:b("./methods/edges.js"),error:b("./methods/error.coffee"),focus:b("./methods/focus.coffee"),font:b("./methods/font.coffee"),
footer:b("./methods/footer.coffee"),format:b("./methods/format.coffee"),height:b("./methods/height.coffee"),history:b("./methods/history.coffee"),icon:b("./methods/icon.coffee"),id:b("./methods/id.coffee"),labels:b("./methods/labels.coffee"),legend:b("./methods/legend.coffee"),links:b("./methods/links.coffee"),margin:b("./methods/margin.coffee"),messages:b("./methods/messages.coffee"),mouse:b("./methods/mouse.coffee"),nodes:b("./methods/nodes.coffee"),order:b("./methods/order.coffee"),resize:b("./methods/resize.coffee"),
shape:b("./methods/shape.coffee"),size:b("./methods/size.coffee"),style:b("./methods/style.coffee"),temp:b("./methods/temp.coffee"),text:b("./methods/text.coffee"),time:b("./methods/time.coffee"),timeline:b("./methods/timeline.coffee"),timing:b("./methods/timing.coffee"),title:b("./methods/title.coffee"),tooltip:b("./methods/tooltip.coffee"),total:b("./methods/total.coffee"),type:b("./methods/type.coffee"),ui:b("./methods/ui.coffee"),width:b("./methods/width.coffee"),x:f("x"),x2:f("x2"),y:f("y"),
y2:f("y2"),zoom:b("./methods/zoom.js")});return c.self}},{"../core/console/print.coffee":52,"../core/methods/attach.coffee":79,"../object/validate.coffee":171,"./helpers/container.coffee":210,"./helpers/drawSteps.js":211,"./helpers/ui/message.js":245,"./methods/active.coffee":254,"./methods/aggs.coffee":255,"./methods/attrs.coffee":256,"./methods/axes.coffee":257,"./methods/background.coffee":258,"./methods/class.coffee":259,"./methods/color.coffee":260,"./methods/cols.js":261,"./methods/config.coffee":262,
"./methods/container.coffee":263,"./methods/coords.coffee":264,"./methods/csv.coffee":265,"./methods/data.coffee":266,"./methods/depth.coffee":267,"./methods/descs.coffee":268,"./methods/dev.coffee":269,"./methods/draw.js":270,"./methods/edges.js":271,"./methods/error.coffee":272,"./methods/focus.coffee":273,"./methods/font.coffee":274,"./methods/footer.coffee":275,"./methods/format.coffee":276,"./methods/height.coffee":277,"./methods/helpers/axis.coffee":278,"./methods/history.coffee":279,"./methods/icon.coffee":280,
"./methods/id.coffee":281,"./methods/labels.coffee":282,"./methods/legend.coffee":283,"./methods/links.coffee":284,"./methods/margin.coffee":285,"./methods/messages.coffee":286,"./methods/mouse.coffee":287,"./methods/nodes.coffee":288,"./methods/order.coffee":289,"./methods/resize.coffee":290,"./methods/shape.coffee":291,"./methods/size.coffee":292,"./methods/style.coffee":293,"./methods/temp.coffee":294,"./methods/text.coffee":295,"./methods/time.coffee":296,"./methods/timeline.coffee":297,"./methods/timing.coffee":298,
"./methods/title.coffee":299,"./methods/tooltip.coffee":300,"./methods/total.coffee":301,"./methods/type.coffee":302,"./methods/ui.coffee":303,"./methods/width.coffee":304,"./methods/zoom.js":305,"./types/area.coffee":306,"./types/bar.coffee":307,"./types/box.coffee":308,"./types/bubbles.coffee":309,"./types/deprecated/chart.coffee":310,"./types/geo_map.coffee":311,"./types/line.coffee":321,"./types/network.js":322,"./types/paths.coffee":323,"./types/pie.coffee":324,"./types/radar.coffee":325,"./types/rings.js":326,
"./types/sankey.coffee":327,"./types/scatter.coffee":329,"./types/table.js":330,"./types/tree_map.coffee":331}]},{},[162]);var width,height,graphid,smallRadius=14,mediumRadius=27,largeRadius=45,nodeTypes="instance concept-type relation relation-type resource resource-type meta".split(" "),edgeTypes=["default","active"];nodeColors="#77dd77 #3CB68E #FFBF57 #FA72A7 #5bc2e7 #747DF2 #BF77F3".split(" ");nodeColorsDark="#61BC60 #008B5D #FFA81C #F73882 #46A5C7 #4854ED #A15FD1".split(" ");
var edgeColors=["#DADADA","#CAEA9C"],edgeLabelColors=["#54585a","#2E4E00"],nodeColor=d3.scale.ordinal().domain(nodeTypes).range(nodeColors),borderColor=d3.scale.ordinal().domain(nodeTypes).range(nodeColorsDark),edgeColors=d3.scale.ordinal().domain(edgeTypes).range(edgeColors),edgeLabelColors=d3.scale.ordinal().domain(edgeTypes).range(edgeLabelColors),radius=d3.scale.ordinal().domain(nodeTypes).range([mediumRadius,mediumRadius,smallRadius,mediumRadius,mediumRadius,mediumRadius,mediumRadius]),dx=function(b){return width*
b},dy=function(b){return height*b};function getLinkUniqueId(b){return graphid+"_link_"+b.source.index+"_"+b.target.index}
var rotate=function(b){return b.target.x<b.source.x?"rotate(180, "+Math.abs(dx(b.source.x)+dx(b.target.x))/2+", "+Math.abs(dy(b.source.y)+dy(b.target.y))/2+")":""},boxRotation=function(b,c){var d=Math.abs(dx(b.target.x)-dx(b.source.x)),g=Math.abs(dy(b.target.y)-dy(b.source.y)),d=180/Math.PI*Math.atan(g/d);if(!(dx(b.target.x)<dx(b.source.x))&&dy(b.target.y)<dy(b.source.y)||dx(b.target.x)<dx(b.source.x)&&!(dy(b.target.y)<dy(b.source.y)))d*=-1;var g=c.left+hypotenuseLength(c)/4,f=c.top+hypotenuseLength(c)/
4;return"rotate("+d+", "+g+", "+f+")"},boundingRect=function(b){return document.getElementById(b).getBoundingClientRect()},hypotenuseLength=function(b){return Math.sqrt(Math.pow(b.top-b.bottom,2)+Math.pow(b.right-b.left,2))},offset=function(b){var c=radius(b.source.type),d=radius(b.target.type);if(b.source.x<b.target.x)var g=c,c=d;else b.source.x>b.target.x?g=d:b.source.y<b.target.Y?g=d:(g=c,c=d);b=Math.sqrt(Math.pow(dy(b.target.y)-dy(b.source.y),2)+Math.pow(dx(b.target.x)-dx(b.source.x),2));return((b-
(g+c))/2+g)/b*100+"%"},buildGraph=function(b){width=b.size.width;height=b.size.height;graphid=b.graph.id;var c=d3.select(b.node).append("svg").attr("width",width).attr("height",height);d3.layout.force().nodes(b.graph.nodes).links(b.graph.edges).size([width,height]).start().stop();c.append("svg:defs").append("svg:marker").attr("id","default-arrow").attr("viewBox","0 -5 10 10").attr("refX",23).attr("markerWidth",2).attr("markerHeight",2.5).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("stroke",
"#DADADA").style("fill","#DADADA");c.append("svg:defs").append("svg:marker").attr("id","active-arrow").attr("viewBox","0 -5 10 10").attr("refX",23).attr("markerWidth",2).attr("markerHeight",2.5).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("stroke","#CAEA9C").style("fill","#CAEA9C");var d=c.selectAll("g.link").data(b.graph.edges).enter().append("g").attr("class","link");d.append("path").attr("stroke",function(b){return edgeColors(b.type)}).attr("stroke-width",9).attr("id",
function(b){return getLinkUniqueId(b)}).attr("marker-end",function(b){return null!=b.type?"url(#"+b.type+"-arrow)":"url(#default-arrow)"}).attr("d",function(b){return"M"+dx(b.source.x)+","+dy(b.source.y)+"L "+dx(b.target.x)+","+dy(b.target.y)});d.append("text").attr("id",function(b){return getLinkUniqueId(b)+"text"}).attr("dy","3").attr("transform",function(b){return rotate(b)}).append("textPath").attr("stroke",function(b){return edgeLabelColors(b.type)}).attr("xlink:href",function(b){return"#"+getLinkUniqueId(b)}).attr("startOffset",
function(b){return offset(b)}).attr("text-anchor","middle").text(function(b){return b.text.toUpperCase()});b=c.selectAll("g.node").data(b.graph.nodes).enter().append("g").attr("class","node");b.append("circle").attr("r",function(b){return radius(b.type)}).attr("id",function(b){return"circle_"+b.id}).style("stroke",function(b){return borderColor(b.type)}).style("stroke-width",3).style("fill",function(b){return nodeColor(b.type)});b.append("text").attr("class","textWrap").style("text-anchor","middle").style("fill",
"white").text(function(b){return b.text}).each(function(b){d3plus.textwrap().align("center").valign("middle").container(d3.select(this)).draw()});b.attr("transform",function(b){return"translate("+dx(b.x)+","+dy(b.y)+")"})};Math.radians=function(b){return b*Math.PI/180};Math.degrees=function(b){return 180*b/Math.PI};function serializeObject(b){var c={};b=b.serializeArray();$.each(b,function(){void 0!==c[this.name]?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||"")):c[this.name]=this.value||""});return c}function getParentElement(b,c){if(b)return b.classList.contains(c)?b:"BODY"===b.nodeName||"HTML"===b.nodeName?!1:getParentElement(b.parentNode,c)}
function getParentElements(b,c){for(var d=[],g=getParentElement(b,c);g;)d.push(g),g=getParentElement(g.parentNode,c);return d}function getChildren(b,c){for(var d=[];b;b=b.nextSibling)1==b.nodeType&&b!=c&&d.push(b);return d}function getSiblings(b){return getChildren(b.parentNode.firstChild,b)}function f_filterResults(b,c,d){b=b?b:0;c&&(!b||b>c)&&(b=c);return d&&(!b||b>d)?d:b}
function f_clientWidth(){return f_filterResults(window.innerWidth?window.innerWidth:0,document.documentElement?document.documentElement.clientWidth:0,document.body?document.body.clientWidth:0)}function f_clientHeight(){return f_filterResults(window.innerHeight?window.innerHeight:0,document.documentElement?document.documentElement.clientHeight:0,document.body?document.body.clientHeight:0)}
function f_scrollLeft(){return f_filterResults(window.pageXOffset?window.pageXOffset:0,document.documentElement?document.documentElement.scrollLeft:0,document.body?document.body.scrollLeft:0)}function f_scrollTop(){return f_filterResults(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0)}
function dontScrollParent(b,c){function d(b){function c(){b.stopPropagation();b.preventDefault();return b.returnValue=!1}var d=this.scrollTop,k=this.scrollHeight,l=this.offsetHeight,m=b.wheelDelta,p=0<m;if(!p&&-m>k-l-d)return this.scrollTop=k,c();if(p&&m>d)return this.scrollTop=0,c()}b.removeEventListener("DOMMouseScroll",d,!1);b.removeEventListener("mousewheel",d,!1);c||(b.addEventListener("DOMMouseScroll",d,!1),b.addEventListener("mousewheel",d,!1))}
window.MNDMPS={data:{},threeD:function(){function b(b,c){return b[0][0]===c[0][0]&&b[0][1]===c[0][1]&&b[0][2]===c[0][2]&&b[1][0]===c[1][0]&&b[1][1]===c[1][1]&&b[1][2]===c[1][2]||b[1][0]===c[0][0]&&b[1][1]===c[0][1]&&b[1][2]===c[0][2]&&b[0][0]===c[1][0]&&b[0][1]===c[1][1]&&b[0][2]===c[1][2]?!0:!1}function c(){m.data.windowWidth=f_clientWidth();m.data.windowHeight=f_clientHeight();m.processScroll(f_scrollTop(),f_scrollLeft());t=m.data.windowWidth;u=.8*m.data.windowHeight;U=u/n;w.left=t/-2;w.right=t/
2;w.top=u/2;w.bottom=u/-2;w.updateProjectionMatrix();q.setSize(t,u)}function d(){if(m.data.threeDRunning){for(var b=0,c=0,f=null,g=null,h=0;20>h;h++)x[h].numConnections=0;for(h=0;20>h;h++){f=x[h];B[3*h]+=f.velocity.x;B[3*h+1]+=f.velocity.y;B[3*h+2]+=f.velocity.z;if(B[3*h+1]<-u/2||B[3*h+1]>u/2)f.velocity.y=-f.velocity.y;if(B[3*h]<-t/2||B[3*h]>t/2)f.velocity.x=-f.velocity.x;if(-100>B[3*h+2]||200<B[3*h+2])f.velocity.z=-f.velocity.z;if(!(F.limitConnections&&f.numConnections>=F.maxConnections))for(var k=
h+1;20>k;k++)g=x[k],!(F.limitConnections&&g.numConnections>=F.maxConnections)&&Math.sqrt(Math.pow(B[3*h+0]-B[3*k],2)+Math.pow(B[3*h+1]-B[3*k+1],2)+Math.pow(B[3*h+2]-B[3*k+2],2))<F.minDistance&&(f.numConnections++,g.numConnections++,z[b++]=B[3*h],z[b++]=B[3*h+1],z[b++]=B[3*h+2],z[b++]=B[3*k],z[b++]=B[3*k+1],z[b++]=B[3*k+2],c++)}A.geometry.setDrawRange(0,2*c);A.geometry.attributes.position.needsUpdate=!0;y.geometry.attributes.position.needsUpdate=!0;for(b=I.length-1;0<=b;b--)if(I[b].fadingOut){if(I[b].material.opacity+=
I[b].fadeOutSpeed,0>=I[b].material.opacity){c=I[b];f=[];g=null;h=c.geometry.attributes.position.array;for(k=0;10>k;k++)for(;3>f.length;)g=Math.floor(Math.random()*L.length),0>f.indexOf(g)&&f.push(L[g]);for(k=0;k<f.length;k++)h[3*k+0]=f[k][0],h[3*k+1]=f[k][1],h[3*k+2]=f[k][2];c.geometry.attributes.position.needsUpdate=!0;I[b].fadingOut=!1}}else I[b].material.opacity+=I[b].fadeInSpeed,.075<=I[b].material.opacity&&(I[b].fadingOut=!0);w.position.x=.01*-(m.data.mouseX-t/2);w.position.y=.01*(m.data.mouseY-
u/2);w.position.z=600;w.lookAt(r.position);H.rotation.set(Math.radians(.04*(m.data.mouseY-u/4)),Math.radians(.03*(m.data.mouseX-t/2)),0);H.position.setY(.13*u);H.scale.set(U,U,U);q.render(r,w)}window.requestAnimationFrame(d)}function g(b){l({x:b.pageX,y:b.pageY})}function f(b){l({x:b.touches[0].pageX,y:b.touches[0].pageY});document.addEventListener("touchmove",k,!1)}function h(b){document.removeEventListener("touchmove",k,!1);l({x:b.changedTouches[0].pageX,y:b.changedTouches[0].pageY})}function k(b){l({x:b.touches[0].pageX,
y:b.touches[0].pageY})}function l(b){m.data.threeDRunning&&(m.data.mouseX=b.x,m.data.mouseY=b.y,m.data.mouseX=m.data.mouseX>m.data.windowWidth?m.data.windowWidth:m.data.mouseX,m.data.mouseY=m.data.mouseY>m.data.windowHeight?m.data.windowHeight:m.data.mouseY)}var m=this,p=document.getElementsByClassName("splash")[0],t=f_clientWidth(),u=.8*f_clientHeight(),n=f_clientHeight(),q=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),r=new THREE.Scene,w=new THREE.OrthographicCamera(t/-2,t/2,u/2,u/-2,1,1200),
v=new THREE.Object3D,y=null,A=null,x=[],z=new Float32Array(3*Math.pow(40,2)),C=new THREE.PointsMaterial,D=new THREE.BufferGeometry,B=new Float32Array(120),F={minDistance:Math.sqrt(t*t+u*u)/3,limitConnections:!0,maxConnections:3},H=new THREE.Object3D,I=[],G=u/100*5,M=Math.sqrt(Math.pow(G,2)+Math.pow(G,2)),J=new THREE.LineBasicMaterial({color:16777215,linewidth:.8,transparent:!0,opacity:.2}),K=new THREE.LineBasicMaterial({color:16777215,linewidth:1.6,transparent:!0,opacity:.8}),L=[[0,0,2*-G],[0,-G,
-G],[-G,0,-G],[0,0,-G],[G,0,-G],[0,G,-G],[0,2*-G,0],[2*G,0,0],[0,2*G,0],[2*-G,0,0],[-G,-G,0],[0,-G,0],[G,-G,0],[-G,0,0],[0,0,0],[G,0,0],[-G,G,0],[0,G,0],[G,G,0]],N=[[-G,-G,0],[-G,0,0],[-G,G,0],[0,0,0],[G,G,0],[G,0,0],[G,-G,0]],Q=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.4}),S=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.8}),U=1;m.data.threeDRunning=!1;m.data.mouseX=t/2;m.data.mouseY=u/2;w.updateProjectionMatrix();w.position.z=600;w.lookAt(r.position);
w.zoom=2;r.add(w);q.setPixelRatio(window.devicePixelRatio);q.setSize(t,u);p.appendChild(q.domElement);(function(){for(var b=new THREE.BufferGeometry,c=0;40>c;c++){var d=Math.random()*u*1-.5*u,f=200*Math.random()-100;B[3*c+0]=Math.random()*t*1-.5*t;B[3*c+1]=d;B[3*c+2]=f;x.push({velocity:new THREE.Vector3(-.1+.2*Math.random(),-.1+.2*Math.random(),-.1+.2*Math.random()),numConnections:0})}D.setDrawRange(0,0);D.addAttribute("position",(new THREE.BufferAttribute(B,3)).setDynamic(!0));y=new THREE.Points(D,
C);v.add(y);b.addAttribute("position",(new THREE.BufferAttribute(z,3)).setDynamic(!0));b.computeBoundingSphere();b.setDrawRange(0,0);A=new THREE.LineSegments(b,J);v.add(A)})();v.position.set(0,0,-200);r.add(v);(function(){for(var c=new THREE.BufferGeometry,d=new THREE.BufferGeometry,f=new Float32Array(3*Math.pow(L.length,2)),g=new Float32Array(3*Math.pow(N.length,2)),h=[],k=[],l=[],m=[],n=[],p=null,r=!1,q=0;q<N.length;q++)N[q+1]&&m.push([N[q],N[q+1]]);for(q=0;q<L.length;q++)for(p=0;p<L.length;p++)q!==
p&&h.push([L[q],L[p]]);for(q=0;q<h.length;q++){r=!1;for(p=0;p<k.length;p++)if(b(h[q],k[p])){r=!0;break}for(p=0;p<m.length;p++)if(b(h[q],m[p])){r=!0;break}var p=h[q][0],t=h[q][1],p=Math.sqrt(Math.pow(t[0]-p[0],2)+Math.pow(t[1]-p[1],2)+Math.pow(t[2]-p[2],2));if(p>G&&0===p%G||p>M&&0===p%M)r=!0;r||k.push([h[q][0],h[q][1]])}for(q=0;q<k.length;q++)l.push(k[q][0],k[q][1]);for(q=0;q<l.length;q++)f[3*q+0]=l[q][0],f[3*q+1]=l[q][1],f[3*q+2]=l[q][2];for(q=0;q<m.length;q++)n.push(m[q][0],m[q][1]);for(q=0;q<n.length;q++)g[3*
q+0]=n[q][0],g[3*q+1]=n[q][1],g[3*q+2]=n[q][2];r=null;h=new THREE.Geometry;k=new THREE.Matrix4;for(q=0;q<L.length;q++){r=!1;for(p=0;p<N.length;p++)if(l=L[q],m=N[p],l=l[0]===m[0]&&l[1]===m[1]&&l[2]===m[2]?!0:!1,l){r=!0;break}r||(r=new THREE.SphereGeometry(G/25,8,6),r.applyMatrix(k.makeTranslation(L[q][0],L[q][1],L[q][2])),h.merge(r))}p=null;r=new THREE.Geometry;for(q=0;q<N.length;q++)p=new THREE.SphereGeometry(G/20,8,6),p.applyMatrix(k.makeTranslation(N[q][0],N[q][1],N[q][2])),r.merge(p);c.addAttribute("position",
new THREE.BufferAttribute(f,3));d.addAttribute("position",new THREE.BufferAttribute(g,3));h=(new THREE.BufferGeometry).fromGeometry(h);r=(new THREE.BufferGeometry).fromGeometry(r);c=new THREE.LineSegments(c,J);d=new THREE.LineSegments(d,K);f=new THREE.Mesh(h,Q);g=new THREE.Mesh(r,S);c.geometry.setDrawRange(0,Math.pow(L.length,2));d.geometry.setDrawRange(0,Math.pow(N.length,2));f.geometry.setDrawRange(0,h.attributes.position.array.length);g.geometry.setDrawRange(0,r.attributes.position.array.length);
H.add(c);H.add(d);H.add(f);H.add(g)})();(function(){for(var b=null,c=null,d=null,f=[],g=c=b=null,h=0;10>h;h++){c=new THREE.Color(Math.random(),Math.random(),Math.random());d=Math.random()/500;b=new THREE.Geometry;for(f=[];3>f.length;)g=Math.floor(Math.random()*L.length),0>f.indexOf(g)&&(f.push(g),b.vertices.push(new THREE.Vector3(L[g][0],L[g][1],L[g][2])));b.faces.push(new THREE.Face3(0,1,2));b.faces[0].color=c;b=(new THREE.BufferGeometry).fromGeometry(b);c=new THREE.MeshBasicMaterial({transparent:!0,
opacity:0,blending:THREE.AdditiveBlending,vertexColors:THREE.VertexColors});b=new THREE.Mesh(b,c);b.material.side=THREE.DoubleSide;b.fadeInSpeed=d;b.fadeOutSpeed=-d;b.fadingOut=!1;I.push(b);H.add(b)}})();r.add(H);"ontouchstart"in window||navigator.msMaxTouchPoints?(document.addEventListener("touchstart",f,!1),document.addEventListener("touchend",h,!1)):document.addEventListener("mousemove",g,!1);window.addEventListener("resize",function(){c();setTimeout(function(){var b=0;1E3>m.data.windowWidth&&
(b=(m.data.windowWidth-m.data.googleMap.getDiv().parentNode.getElementsByClassName("info")[0].offsetWidth)/2-(m.data.windowWidth/2-m.data.googleMap.getDiv().parentNode.getElementsByClassName("info")[0].offsetWidth));m.centerGoogleMap(m.data.googleMap,m.data.googleMapLatLng,b,0)},0)},!1);document.addEventListener("visibilitychange",function(){document.hidden?m.data.threeDRunning=!1:m.processScroll(f_scrollTop(),f_scrollLeft())},!1);c();d()},processScroll:function(b,c){this.data.threeDRunning&&this.refreshMousePositionOnScroll(b,
c);b>.5*this.data.windowHeight-this.data.menuBar.offsetHeight?(this.data.menuBar.classList.add("scrolled"),this.data.threeDRunning=!1):(this.data.menuBar.classList.remove("scrolled"),this.data.threeDRunning=!0)},refreshMousePositionOnScroll:function(b,c){this.data.lastScrolledLeft=this.data.lastScrolledLeft||0;this.data.lastScrolledTop=this.data.lastScrolledTop||0;this.data.lastScrolledLeft!==c&&(this.data.mouseX-=this.data.lastScrolledLeft,this.data.lastScrolledLeft=c,this.data.mouseX+=this.data.lastScrolledLeft);
this.data.lastScrolledTop!=b&&(this.data.mouseY-=this.data.lastScrolledTop,this.data.lastScrolledTop=b,this.data.mouseY+=this.data.lastScrolledTop);this.data.mouseX=this.data.mouseX>this.data.windowWidth?this.data.windowWidth:this.data.mouseX;this.data.mouseY=this.data.mouseY>this.data.windowHeight?this.data.windowHeight:this.data.mouseY},watchScroll:function(){document.addEventListener("scroll",function(b){window.MNDMPS.processScroll(f_scrollTop(),f_scrollLeft())},!1)},centerGoogleMap:function(b,
c,d,g){if(b.getBounds()){var f=Math.pow(2,b.getZoom());new google.maps.LatLng(b.getBounds().getNorthEast().lat(),b.getBounds().getSouthWest().lng());c=b.getProjection().fromLatLngToPoint(c);d=new google.maps.Point(d/f||0,g/f||0);d=new google.maps.Point(c.x-d.x,c.y+d.y);d=b.getProjection().fromPointToLatLng(d);b.setCenter(d)}},loadGoogleMap:function(){var b=window.MNDMPS,c={path:"M15.2,5.2v9.5L20,10L15.2,5.2z M10,0L5.2,4.8L10,9.7l4.8-4.8L10,0z M0,10l4.8,4.7V5.2L0,10z M14.8,15.3l-4.4,4.4l3.4,3.4l-0.4,0.3l-8.2-8.2V5.6l4.8,4.8l4.7-4.8V15.3z",
fillColor:"#5bc2e7",fillOpacity:1,anchor:new google.maps.Point(12,23),strokeWeight:0,scale:2},d=new google.maps.LatLng(51.551157,-.114799),g={zoom:560>window.MNDMPS.data.windowWidth?13:15,center:d,scrollwheel:!1,disableDefaultUI:!0,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},
{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",
stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},
{weight:1.2}]}],draggable:!1},f=new google.maps.Map(document.getElementsByClassName("google-map")[0],g),h=new google.maps.Marker({position:d,map:f,icon:c,url:"//google.co.uk/maps/place/Mindmaps+Research+Ltd/@51.5512213,-0.1169207,17z/data=!3m1!4b1!4m2!3m1!1s0x48761b7382210035:0x9ca7d8a98838539f"});b.data.googleMapLatLng=d;b.data.googleMap=f;google.maps.event.addListener(h,"click",function(){window.open(h.url,"_blank").focus()});google.maps.event.addListener(f,"idle",function(){1E3>b.data.windowWidth&&
b.centerGoogleMap(f,d,(b.data.windowWidth-f.getDiv().parentNode.getElementsByClassName("info")[0].offsetWidth)/2-(b.data.windowWidth/2-f.getDiv().parentNode.getElementsByClassName("info")[0].offsetWidth),0)})},webGLAvailable:function(){var b=document.createElement("canvas"),c;try{c=b.getContext("webgl")}catch(d){c=null}if(null===c)try{c=b.getContext("experimental-webgl")}catch(d){c=null}return null===c?!1:!0},appendSVGSplash:function(){var b=document.getElementsByClassName("splash")[0],c=document.createElement("div"),
d=document.createElement("div");d.classList.add("svg-logo");d.innerHTML='<svg viewBox="0 0 130 130"><style type="text/css">.st0{fill: #ffffff; stroke-width: 0;}.st1{fill: none; stroke: #ffffff; stroke-width: 0.1;}.st2{fill: none; stroke: #ffffff; stroke-width: 0.5;}</style><g class="polygons"><polygon points="77,89 43.6,77.9 75,35"/><polygon points="85,45 65,35 35,55"/><polygon points="55,55 35,35 65,5"/><polygon points="77.9,43.6 65,5 95,35"/><polygon points="53,41 65,5 90.7,47.9"/><polygon points="78.3,61.7 95,35 125,65"/><polygon points="55,75 35,35 83,59"/><polygon points="53,41 5,65 35,35"/><polygon points="47.9,39.3 5,65 47,71"/><polygon points="50,50 65,65 95,35"/><polygon points="80,80 35,65 95,50"/><polygon points="85,85 35,95 47,59"/><polygon points="65,125 47,71 83,89"/><polygon points="86.4,69.3 125,65 95,80"/><polygon points="89,47 125,65 95,95"/><polygon points="95,50 95,95 72.5,42.5"/><polygon points="95,95 85,45 65,93.5"/><polygon points="35,95 72.3,76.3 65,125"/><polygon points="35,75 45,45 5,65"/><polygon points="65,125 95,95 45,85"/><polygon points="35,95 5,65 55,55"/></g><g><line class="st1" x1="5" y1="65" x2="35" y2="35"/><line class="st1" x1="35" y1="35" x2="65" y2="5"/><line class="st1" x1="65" y1="5" x2="95" y2="35"/><line class="st1" x1="95" y1="35" x2="125" y2="65"/><line class="st1" x1="125" y1="65" x2="95" y2="95"/><line class="st1" x1="95" y1="95" x2="65" y2="125"/><line class="st1" x1="65" y1="125" x2="35" y2="95"/><line class="st1" x1="35" y1="95" x2="5" y2="65"/><line class="st1" x1="5" y1="65" x2="35" y2="65"/><line class="st1" x1="35" y1="65" x2="65" y2="65"/><line class="st1" x1="65" y1="65" x2="95" y2="65"/><line class="st1" x1="95" y1="65" x2="125" y2="65"/><line class="st1" x1="95" y1="65" x2="65" y2="95"/><line class="st1" x1="65" y1="95" x2="95" y2="95"/><line class="st1" x1="65" y1="95" x2="65" y2="125"/><line class="st1" x1="65" y1="95" x2="35" y2="95"/><line class="st1" x1="35" y1="65" x2="65" y2="95"/><line class="st1" x1="35" y1="95" x2="65" y2="65"/><line class="st1" x1="65" y1="65" x2="95" y2="95"/><line class="st1" x1="35" y1="65" x2="65" y2="35"/><line class="st1" x1="65" y1="35" x2="95" y2="65"/><line class="st1" x1="65" y1="35" x2="35" y2="35"/><line class="st1" x1="65" y1="35" x2="65" y2="5"/><line class="st1" x1="65" y1="35" x2="95" y2="35"/><line class="st1" x1="95" y1="65" x2="65" y2="5"/><line class="st1" x1="65" y1="5" x2="35" y2="65"/><line class="st1" x1="35" y1="65" x2="65" y2="125"/><line class="st1" x1="65" y1="125" x2="95" y2="65"/><line class="st1" x1="65" y1="95" x2="125" y2="65"/><line class="st1" x1="125" y1="65" x2="65" y2="35"/><line class="st1" x1="65" y1="35" x2="5" y2="65"/><line class="st1" x1="5" y1="65" x2="65" y2="95"/><line class="st1" x1="65" y1="35" x2="35" y2="95"/><line class="st1" x1="65" y1="35" x2="95" y2="95"/><line class="st1" x1="65" y1="95" x2="35" y2="35"/><line class="st1" x1="95" y1="35" x2="65" y2="95"/><line class="st1" x1="65" y1="65" x2="65" y2="35"/><line class="st1" x1="65" y1="65" x2="65" y2="95"/><line class="st1" x1="35" y1="65" x2="95" y2="35"/><line class="st1" x1="35" y1="65" x2="95" y2="95"/><line class="st1" x1="5" y1="65" x2="95" y2="35"/><line class="st1" x1="5" y1="65" x2="95" y2="95"/><line class="st1" x1="65" y1="125" x2="35" y2="35"/><line class="st1" x1="95" y1="35" x2="65" y2="125"/><line class="st1" x1="125" y1="65" x2="35" y2="35"/><line class="st1" x1="125" y1="65" x2="35" y2="95"/><line class="st1" x1="65" y1="5" x2="35" y2="95"/><line class="st1" x1="65" y1="5" x2="95" y2="95"/><line class="st1" x1="95" y1="65" x2="35" y2="35"/><line class="st1" x1="95" y1="65" x2="35" y2="95"/><circle class="st0" cx="65" cy="35" r="1"/><circle class="st0" cx="65" cy="5" r="1"/><circle class="st0" cx="65" cy="95" r="1"/><circle class="st0" cx="65" cy="125" r="1"/><circle class="st0" cx="125" cy="65" r="1"/><circle class="st0" cx="5" cy="65" r="1"/></g><g><line class="st2" x1="35" y1="95" x2="35" y2="65"/><line class="st2" x1="35" y1="65" x2="35" y2="35"/><line class="st2" x1="35" y1="35" x2="65" y2="65"/><line class="st2" x1="65" y1="65" x2="95" y2="35"/><line class="st2" x1="95" y1="35" x2="95" y2="65"/><line class="st2" x1="95" y1="65" x2="95" y2="95"/><circle class="st0" cx="65" cy="65" r="1.5"/><circle class="st0" cx="35" cy="35" r="1.5"/><circle class="st0" cx="35" cy="65" r="1.5"/><circle class="st0" cx="35" cy="95" r="1.5"/><circle class="st0" cx="95" cy="35" r="1.5"/><circle class="st0" cx="95" cy="65" r="1.5"/><circle class="st0" cx="95" cy="95" r="1.5"/></g></svg>';
c.appendChild(d);c.classList.add("svg-splash");b.appendChild(c)},dontScrollParent:function(b,c){function d(b){function c(){b.stopPropagation();b.preventDefault();return b.returnValue=!1}var d=this.scrollTop,k=this.scrollHeight,l=this.offsetHeight,m=b.wheelDelta,p=0<m;if(!p&&-m>k-l-d)return this.scrollTop=k,c();if(p&&m>d)return this.scrollTop=0,c()}b.removeEventListener("DOMMouseScroll",d,!1);b.removeEventListener("mousewheel",d,!1);c||(b.addEventListener("DOMMouseScroll",d,!1),b.addEventListener("mousewheel",
d,!1))},initSlick:function(){$(".slider-container").slick({slidesToShow:1,slidesToScroll:1,cssEase:"ease-in-out",infinite:!1,draggable:!1,dots:!0,easing:"easeInOutQuart",mobileFirst:!0,lazyLoad:"progressive",speed:200,zIndex:1,arrows:!1,responsive:[{breakpoint:559,settings:{arrows:!0}}]})},initGraph:function(b){buildGraph(b)},initGraphs:function(){for(var b=[{id:1,width:562,height:400,nodes:[{id:0,type:"meta",text:"relation-type",x:.8,y:.15},{id:1,type:"relation-type",text:"director-ship",x:.5,y:.1},
{id:2,type:"relation",text:"_",x:.3,y:.267},{id:3,type:"relation",text:"_",x:.7,y:.267},{id:4,type:"instance",text:"$x: Titanic",x:.1,y:.533},{id:5,type:"instance",text:"$y: James Cameron",x:.5,y:.533},{id:6,type:"instance",text:"$z: Avatar",x:.9,y:.533},{id:7,type:"concept-type",text:"person",x:.15,y:.8},{id:8,type:"concept-type",text:"movie",x:.85,y:.8},{id:9,type:"meta",text:"concept-type",x:.5,y:.9}],edges:[{source:1,target:0,text:"isa"},{source:2,target:1,text:"isa"},{source:3,target:1,text:"isa"},
{source:3,target:5,text:"director",type:"active"},{source:3,target:6,text:"movie-directed",type:"active"},{source:2,target:4,text:"movie-directed",type:"active"},{source:2,target:5,text:"director",type:"active"},{source:4,target:8,text:"isa"},{source:6,target:8,text:"isa"},{source:5,target:7,text:"isa"},{source:7,target:9,text:"isa"},{source:8,target:9,text:"isa"}]},{id:2,width:562,height:400,nodes:[{id:0,type:"meta",text:"concept-type",x:.2,y:.15},{id:1,type:"concept-type",text:"movie",x:.1,y:.5},
{id:2,type:"instance",text:"$x: id1234",x:.2,y:.85},{id:3,type:"relation",text:"has",x:.37,y:.1},{id:4,type:"relation",text:"has",x:.32,y:.5},{id:5,type:"relation",text:"has",x:.37,y:.9},{id:6,type:"resource",text:"8.3",x:.57,y:.1},{id:7,type:"resource",text:"The Martian",x:.5,y:.5},{id:8,type:"resource",text:"30 Sep 2015",x:.57,y:.9},{id:9,type:"resource-type",text:"rating",x:.8,y:.15},{id:10,type:"resource-type",text:"title",x:.7,y:.5},{id:11,type:"resource-type",text:"release-date",x:.8,y:.85},
{id:12,type:"meta",text:"resource-type",x:.9,y:.5}],edges:[{source:1,target:0,text:"isa"},{source:2,target:1,text:"isa",type:"active"},{source:3,target:2,text:"owner"},{source:4,target:2,text:"owner",type:"active"},{source:5,target:2,text:"owner"},{source:3,target:6,text:"value"},{source:4,target:7,text:"value",type:"active"},{source:5,target:8,text:"value"},{source:6,target:9,text:"isa"},{source:7,target:10,text:"isa",type:"active"},{source:8,target:11,text:"isa"},{source:9,target:12,text:"isa"},
{source:10,target:12,text:"isa"},{source:11,target:12,text:"isa"}]},{id:3,width:562,height:400,nodes:[{id:0,type:"meta",text:"relation-type",x:.5,y:.1},{id:1,type:"relation-type",text:"director-ship",x:.2,y:.2},{id:2,type:"relation-type",text:"casting",x:.8,y:.2},{id:3,type:"relation",text:"_",x:.3,y:.36},{id:4,type:"relation",text:"_",x:.7,y:.36},{id:5,type:"instance",text:"$z: Ang Lee",x:.1,y:.56},{id:6,type:"instance",text:"$y: Life of Pi",x:.5,y:.56},{id:7,type:"instance",text:"$y: Irrfan Khan",
x:.9,y:.56},{id:8,type:"concept-type",text:"person",x:.2,y:.8},{id:9,type:"concept-type",text:"movie",x:.8,y:.8},{id:10,type:"meta",text:"concept-type",x:.5,y:.9}],edges:[{source:1,target:0,text:"isa"},{source:2,target:0,text:"isa"},{source:3,target:1,text:"isa"},{source:3,target:5,text:"director",type:"active"},{source:3,target:6,text:"movie-directed",type:"active"},{source:4,target:2,text:"isa"},{source:4,target:6,text:"movie-cast",type:"active"},{source:4,target:7,text:"actor",type:"active"},{source:7,
target:8,text:"isa"},{source:6,target:9,text:"isa"},{source:5,target:8,text:"isa"},{source:9,target:10,text:"isa"},{source:8,target:10,text:"isa"}]},{id:4,width:562,height:400,nodes:[{id:0,type:"meta",text:"concept-type",x:.2,y:.15},{id:1,type:"concept-type",text:"movie",x:.1,y:.5},{id:2,type:"instance",text:"$x",x:.2,y:.85},{id:3,type:"relation",text:"has",x:.4,y:.1},{id:4,type:"relation",text:"has",x:.367,y:.5},{id:5,type:"relation",text:"has",x:.4,y:.9},{id:6,type:"resource",text:"Friday the 13th",
x:.6,y:.1},{id:7,type:"resource",text:"Slasher",x:.633,y:.5},{id:8,type:"resource",text:"Horror",x:.6,y:.9},{id:9,type:"resource-type",text:"title",x:.8,y:.15},{id:10,type:"meta",text:"resource-type",x:.9,y:.5},{id:11,type:"resource-type",text:"genre",x:.8,y:.85}],edges:[{source:1,target:0,text:"isa"},{source:2,target:1,text:"isa"},{source:3,target:2,text:"owner"},{source:4,target:2,text:"owner"},{source:5,target:2,text:"owner",type:"active"},{source:3,target:6,text:"value"},{source:4,target:7,text:"value"},
{source:5,target:8,text:"value",type:"active"},{source:6,target:9,text:"isa"},{source:7,target:11,text:"isa"},{source:8,target:11,text:"isa",type:"active"},{source:9,target:10,text:"isa"},{source:11,target:10,text:"isa"}]},{id:5,width:562,height:400,nodes:[{id:0,type:"meta",text:"concept-type",x:.18,y:.2},{id:1,type:"meta",text:"relation-type",x:.5,y:.1},{id:2,type:"relation-type",text:"director-ship",x:.82,y:.2},{id:3,type:"concept-type",text:"movie",x:.1,y:.6},{id:4,type:"relation",text:"$z",x:.5,
y:.6},{id:5,type:"concept-type",text:"person",x:.9,y:.6},{id:6,type:"instance",text:"$x: Big Fish",x:.3,y:.9},{id:7,type:"instance",text:"$y: Tim Burton",x:.7,y:.9}],edges:[{source:2,target:1,text:"isa"},{source:3,target:0,text:"isa"},{source:4,target:2,text:"isa"},{source:4,target:6,text:"movie-directed",type:"active"},{source:4,target:7,text:"director",type:"active"},{source:5,target:0,text:"isa"},{source:6,target:3,text:"isa",type:"active"},{source:7,target:5,text:"isa",type:"active"}]}],c=document.getElementsByClassName("graph"),
d=c[0],d={width:d.children[0].offsetWidth,height:d.children[0].offsetHeight},g=0;g<b.length;g++)console.log(b[g]),this.initGraph({node:c[g].children[0],graph:b[g],size:d})},initPrism:function(){function b(b){var c=b.value,c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"\n";$(b).next().children(0)[0].innerHTML=c;Prism.highlightAll()}function c(c){function d(c){var f=this.selectionStart,g=this.value;this.value=g=g.replace(/\t/g,"    ");9===c.keyCode&&(this.value=g.substring(0,f)+
"    "+g.substring(f,this.value.length),this.selectionStart=f+4,this.selectionEnd=f+4,c.preventDefault());b(this)}c.addEventListener("input",d,!1);c.addEventListener("keydown",d,!1);Prism.highlightAll()}function d(b){b.addEventListener("scroll",function(b){$(this).next()[0].scrollTop=this.scrollTop},!1)}for(var g=document.getElementsByClassName("code-input"),f=0;f<g.length;f++)b(g[f]),d(g[f]),c(g[f])},initStack:function(){var b=this.data;b.techStack=document.getElementsByClassName("tech-stack")[0];
b.techDescription=b.techStack.getElementsByClassName("description")[0];b.techTabs=b.techStack.getElementsByClassName("tab");b.techStack.addEventListener("click",function(c){var d=getParentElement(c.target,"tab");if(d){c=d.getAttribute("data-target");for(var g=0;g<b.techTabs.length;g++)b.techTabs[g].classList.remove("active");d.classList.add("active");d=b.techDescription.children;for(g=0;g<d.length;g++)d[g].getAttribute("data-name")!==c?d[g].classList.remove("active"):(d[g].classList.add("active"),
b.techDescription.style.height=d[g].offsetHeight+"px")}},!1)},modal:{_data:{},open:function(){var b=window.MNDMPS.modal,c=b._data;c.underlay.classList.contains("display")||(c.sent&&(c.sent=!1,b.resetForm(c.form)),clearTimeout(c.closeTimeout),c.underlay.classList.add("display"),setTimeout(function(){c.underlay.classList.add("active")},25))},close:function(){var b=window.MNDMPS.modal._data;b.underlay.classList.contains("active")&&(b.underlay.classList.remove("active"),setTimeout(function(){b.underlay.classList.remove("display")},
200))},closeByKey:function(b){var c=window.MNDMPS.modal;27===b.which&&c.close()},resetForm:function(b){var c=window.MNDMPS.modal._data,d=[].slice.call(b.getElementsByTagName("input"),0);d.push(b.getElementsByTagName("textarea")[0]);for(b=0;b<d.length;b++)"submit"!==d[b].type&&(d[b].value="");c.sendButton.classList.remove("disabled");c.sendButton.classList.remove("done")},init:function(){var b=this,c=this._data;c.underlay=document.getElementsByClassName("modal-underlay")[0];c.modal=c.underlay.children[0];
c.form=c.modal.getElementsByTagName("form")[0];c.sendButton=c.form.getElementsByClassName("sendButton")[0];c.sendButton.addEventListener("click",function(d){d.preventDefault();this.classList.contains("disabled")||(this.classList.add("disabled"),window.MNDMPS.ajax.sendSubscribe({data:serializeObject($(c.form))}).then(function(d){c.sent=!0;c.sendButton.classList.add("done");c.closeTimeout=setTimeout(function(){b.close()},1500)},function(b){console.log(b)}))},!1);c.underlay.addEventListener("click",
function(c){(c.target.classList.contains("modal-underlay")||c.target.classList.contains("modal-close"))&&b.close()},!1);document.addEventListener("keydown",this.closeByKey,!1);dontScrollParent(c.underlay)}},ajax:{_data:{},call:function(b){return new Promise(function(c,d){var g=new XMLHttpRequest;g.open(b.method,b.url,!0);b.contentType&&g.setRequestHeader("Content-type",b.contentType);g.send(b.data);g.onload=function(){200<=this.status&&300>this.status?c(this.response):d(this.statusText)};g.onerror=
function(){d(this.statusText)}})},sendSubscribe:function(b){return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(b.data),url:"/mail"})}},init:function(){this.data.windowHeight=f_clientHeight();this.data.windowWidth=f_clientWidth();this.data.menuBar=document.getElementsByClassName("nav")[0];document.getElementsByClassName("splash").length&&(this.webGLAvailable()?this.threeD():this.appendSVGSplash());vanillaSmoothScroller.bind({selector:".scrollTrigger",offset:function(){return window.MNDMPS.data.menuBar.offsetHeight}});
document.getElementById("graql-slider")&&(this.initSlick(),this.initGraphs(),this.initPrism());document.getElementById("section-platform")&&this.initStack();document.getElementsByClassName("splash").length?this.watchScroll():this.data.menuBar.classList.add("white");document.getElementById("section-team")&&atvImg();document.getElementsByClassName("modal-underlay").length&&this.modal.init();document.getElementsByClassName("google-map")[0]&&google.maps.event.addDomListener(window,"load",this.loadGoogleMap);
var b=document.getElementsByClassName("getMindmaps");if(b.length)for(var c=0;c<b.length;c++)b[c].addEventListener("click",this.modal.open,!1)}};window.MNDMPS.init();
